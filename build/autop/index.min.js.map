{"version":3,"file":"./build/autop/index.min.js","mappings":"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","sources":["webpack://wp/webpack/bootstrap","webpack://wp/webpack/runtime/define property getters","webpack://wp/webpack/runtime/hasOwnProperty shorthand","webpack://wp/webpack/runtime/make namespace object","../../packages/autop/src/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\r\n * The regular expression for an HTML element.\r\n *\r\n * @type {RegExp}\r\n */\r\nconst htmlSplitRegex = ( () => {\r\n\t/* eslint-disable no-multi-spaces */\r\n\tconst comments =\r\n\t\t'!' + // Start of comment, after the <.\r\n\t\t'(?:' + // Unroll the loop: Consume everything until --> is found.\r\n\t\t'-(?!->)' + // Dash not followed by end of comment.\r\n\t\t'[^\\\\-]*' + // Consume non-dashes.\r\n\t\t')*' + // Loop possessively.\r\n\t\t'(?:-->)?'; // End of comment. If not found, match all input.\r\n\r\n\tconst cdata =\r\n\t\t'!\\\\[CDATA\\\\[' + // Start of comment, after the <.\r\n\t\t'[^\\\\]]*' + // Consume non-].\r\n\t\t'(?:' + // Unroll the loop: Consume everything until ]]> is found.\r\n\t\t'](?!]>)' + // One ] not followed by end of comment.\r\n\t\t'[^\\\\]]*' + // Consume non-].\r\n\t\t')*?' + // Loop possessively.\r\n\t\t'(?:]]>)?'; // End of comment. If not found, match all input.\r\n\r\n\tconst escaped =\r\n\t\t'(?=' + // Is the element escaped?\r\n\t\t'!--' +\r\n\t\t'|' +\r\n\t\t'!\\\\[CDATA\\\\[' +\r\n\t\t')' +\r\n\t\t'((?=!-)' + // If yes, which type?\r\n\t\tcomments +\r\n\t\t'|' +\r\n\t\tcdata +\r\n\t\t')';\r\n\r\n\tconst regex =\r\n\t\t'(' + // Capture the entire match.\r\n\t\t'<' + // Find start of element.\r\n\t\t'(' + // Conditional expression follows.\r\n\t\tescaped + // Find end of escaped element.\r\n\t\t'|' + // ... else ...\r\n\t\t'[^>]*>?' + // Find end of normal element.\r\n\t\t')' +\r\n\t\t')';\r\n\r\n\treturn new RegExp( regex );\r\n\t/* eslint-enable no-multi-spaces */\r\n} )();\r\n\r\n/**\r\n * Separate HTML elements and comments from the text.\r\n *\r\n * @param {string} input The text which has to be formatted.\r\n *\r\n * @return {string[]} The formatted text.\r\n */\r\nfunction htmlSplit( input ) {\r\n\tconst parts = [];\r\n\tlet workingInput = input;\r\n\r\n\tlet match;\r\n\twhile ( ( match = workingInput.match( htmlSplitRegex ) ) ) {\r\n\t\t// The `match` result, when invoked on a RegExp with the `g` flag (`/foo/g`) will not include `index`.\r\n\t\t// If the `g` flag is omitted, `index` is included.\r\n\t\t// `htmlSplitRegex` does not have the `g` flag so we can assert it will have an index number.\r\n\t\t// Assert `match.index` is a number.\r\n\t\tconst index = /** @type {number} */ ( match.index );\r\n\r\n\t\tparts.push( workingInput.slice( 0, index ) );\r\n\t\tparts.push( match[ 0 ] );\r\n\t\tworkingInput = workingInput.slice( index + match[ 0 ].length );\r\n\t}\r\n\r\n\tif ( workingInput.length ) {\r\n\t\tparts.push( workingInput );\r\n\t}\r\n\r\n\treturn parts;\r\n}\r\n\r\n/**\r\n * Replace characters or phrases within HTML elements only.\r\n *\r\n * @param {string}                haystack     The text which has to be formatted.\r\n * @param {Record<string,string>} replacePairs In the form {from: 'to', â€¦}.\r\n *\r\n * @return {string} The formatted text.\r\n */\r\nfunction replaceInHtmlTags( haystack, replacePairs ) {\r\n\t// Find all elements.\r\n\tconst textArr = htmlSplit( haystack );\r\n\tlet changed = false;\r\n\r\n\t// Extract all needles.\r\n\tconst needles = Object.keys( replacePairs );\r\n\r\n\t// Loop through delimiters (elements) only.\r\n\tfor ( let i = 1; i < textArr.length; i += 2 ) {\r\n\t\tfor ( let j = 0; j < needles.length; j++ ) {\r\n\t\t\tconst needle = needles[ j ];\r\n\t\t\tif ( -1 !== textArr[ i ].indexOf( needle ) ) {\r\n\t\t\t\ttextArr[ i ] = textArr[ i ].replace(\r\n\t\t\t\t\tnew RegExp( needle, 'g' ),\r\n\t\t\t\t\treplacePairs[ needle ]\r\n\t\t\t\t);\r\n\t\t\t\tchanged = true;\r\n\t\t\t\t// After one strtr() break out of the foreach loop and look at next element.\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tif ( changed ) {\r\n\t\thaystack = textArr.join( '' );\r\n\t}\r\n\r\n\treturn haystack;\r\n}\r\n\r\n/**\r\n * Replaces double line-breaks with paragraph elements.\r\n *\r\n * A group of regex replaces used to identify text formatted with newlines and\r\n * replace double line-breaks with HTML paragraph tags. The remaining line-\r\n * breaks after conversion become `<br />` tags, unless br is set to 'false'.\r\n *\r\n * @param {string}  text The text which has to be formatted.\r\n * @param {boolean} br   Optional. If set, will convert all remaining line-\r\n *                       breaks after paragraphing. Default true.\r\n *\r\n * @example\r\n *```js\r\n * import { autop } from '@wordpress/autop';\r\n * autop( 'my text' ); // \"<p>my text</p>\"\r\n * ```\r\n *\r\n * @return {string} Text which has been converted into paragraph tags.\r\n */\r\nexport function autop( text, br = true ) {\r\n\tconst preTags = [];\r\n\r\n\tif ( text.trim() === '' ) {\r\n\t\treturn '';\r\n\t}\r\n\r\n\t// Just to make things a little easier, pad the end.\r\n\ttext = text + '\\n';\r\n\r\n\t/*\r\n\t * Pre tags shouldn't be touched by autop.\r\n\t * Replace pre tags with placeholders and bring them back after autop.\r\n\t */\r\n\tif ( text.indexOf( '<pre' ) !== -1 ) {\r\n\t\tconst textParts = text.split( '</pre>' );\r\n\t\tconst lastText = textParts.pop();\r\n\t\ttext = '';\r\n\r\n\t\tfor ( let i = 0; i < textParts.length; i++ ) {\r\n\t\t\tconst textPart = textParts[ i ];\r\n\t\t\tconst start = textPart.indexOf( '<pre' );\r\n\r\n\t\t\t// Malformed html?\r\n\t\t\tif ( start === -1 ) {\r\n\t\t\t\ttext += textPart;\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tconst name = '<pre wp-pre-tag-' + i + '></pre>';\r\n\t\t\tpreTags.push( [ name, textPart.substr( start ) + '</pre>' ] );\r\n\r\n\t\t\ttext += textPart.substr( 0, start ) + name;\r\n\t\t}\r\n\r\n\t\ttext += lastText;\r\n\t}\r\n\t// Change multiple <br>s into two line breaks, which will turn into paragraphs.\r\n\ttext = text.replace( /<br\\s*\\/?>\\s*<br\\s*\\/?>/g, '\\n\\n' );\r\n\r\n\tconst allBlocks =\r\n\t\t'(?:table|thead|tfoot|caption|col|colgroup|tbody|tr|td|th|div|dl|dd|dt|ul|ol|li|pre|form|map|area|blockquote|address|math|style|p|h[1-6]|hr|fieldset|legend|section|article|aside|hgroup|header|footer|nav|figure|figcaption|details|menu|summary)';\r\n\r\n\t// Add a double line break above block-level opening tags.\r\n\ttext = text.replace(\r\n\t\tnew RegExp( '(<' + allBlocks + '[\\\\s/>])', 'g' ),\r\n\t\t'\\n\\n$1'\r\n\t);\r\n\r\n\t// Add a double line break below block-level closing tags.\r\n\ttext = text.replace(\r\n\t\tnew RegExp( '(</' + allBlocks + '>)', 'g' ),\r\n\t\t'$1\\n\\n'\r\n\t);\r\n\r\n\t// Standardize newline characters to \"\\n\".\r\n\ttext = text.replace( /\\r\\n|\\r/g, '\\n' );\r\n\r\n\t// Find newlines in all elements and add placeholders.\r\n\ttext = replaceInHtmlTags( text, { '\\n': ' <!-- wpnl --> ' } );\r\n\r\n\t// Collapse line breaks before and after <option> elements so they don't get autop'd.\r\n\tif ( text.indexOf( '<option' ) !== -1 ) {\r\n\t\ttext = text.replace( /\\s*<option/g, '<option' );\r\n\t\ttext = text.replace( /<\\/option>\\s*/g, '</option>' );\r\n\t}\r\n\r\n\t/*\r\n\t * Collapse line breaks inside <object> elements, before <param> and <embed> elements\r\n\t * so they don't get autop'd.\r\n\t */\r\n\tif ( text.indexOf( '</object>' ) !== -1 ) {\r\n\t\ttext = text.replace( /(<object[^>]*>)\\s*/g, '$1' );\r\n\t\ttext = text.replace( /\\s*<\\/object>/g, '</object>' );\r\n\t\ttext = text.replace( /\\s*(<\\/?(?:param|embed)[^>]*>)\\s*/g, '$1' );\r\n\t}\r\n\r\n\t/*\r\n\t * Collapse line breaks inside <audio> and <video> elements,\r\n\t * before and after <source> and <track> elements.\r\n\t */\r\n\tif ( text.indexOf( '<source' ) !== -1 || text.indexOf( '<track' ) !== -1 ) {\r\n\t\ttext = text.replace( /([<\\[](?:audio|video)[^>\\]]*[>\\]])\\s*/g, '$1' );\r\n\t\ttext = text.replace( /\\s*([<\\[]\\/(?:audio|video)[>\\]])/g, '$1' );\r\n\t\ttext = text.replace( /\\s*(<(?:source|track)[^>]*>)\\s*/g, '$1' );\r\n\t}\r\n\r\n\t// Collapse line breaks before and after <figcaption> elements.\r\n\tif ( text.indexOf( '<figcaption' ) !== -1 ) {\r\n\t\ttext = text.replace( /\\s*(<figcaption[^>]*>)/, '$1' );\r\n\t\ttext = text.replace( /<\\/figcaption>\\s*/, '</figcaption>' );\r\n\t}\r\n\r\n\t// Remove more than two contiguous line breaks.\r\n\ttext = text.replace( /\\n\\n+/g, '\\n\\n' );\r\n\r\n\t// Split up the contents into an array of strings, separated by double line breaks.\r\n\tconst texts = text.split( /\\n\\s*\\n/ ).filter( Boolean );\r\n\r\n\t// Reset text prior to rebuilding.\r\n\ttext = '';\r\n\r\n\t// Rebuild the content as a string, wrapping every bit with a <p>.\r\n\ttexts.forEach( ( textPiece ) => {\r\n\t\ttext += '<p>' + textPiece.replace( /^\\n*|\\n*$/g, '' ) + '</p>\\n';\r\n\t} );\r\n\r\n\t// Under certain strange conditions it could create a P of entirely whitespace.\r\n\ttext = text.replace( /<p>\\s*<\\/p>/g, '' );\r\n\r\n\t// Add a closing <p> inside <div>, <address>, or <form> tag if missing.\r\n\ttext = text.replace(\r\n\t\t/<p>([^<]+)<\\/(div|address|form)>/g,\r\n\t\t'<p>$1</p></$2>'\r\n\t);\r\n\r\n\t// If an opening or closing block element tag is wrapped in a <p>, unwrap it.\r\n\ttext = text.replace(\r\n\t\tnew RegExp( '<p>\\\\s*(</?' + allBlocks + '[^>]*>)\\\\s*</p>', 'g' ),\r\n\t\t'$1'\r\n\t);\r\n\r\n\t// In some cases <li> may get wrapped in <p>, fix them.\r\n\ttext = text.replace( /<p>(<li.+?)<\\/p>/g, '$1' );\r\n\r\n\t// If a <blockquote> is wrapped with a <p>, move it inside the <blockquote>.\r\n\ttext = text.replace( /<p><blockquote([^>]*)>/gi, '<blockquote$1><p>' );\r\n\ttext = text.replace( /<\\/blockquote><\\/p>/g, '</p></blockquote>' );\r\n\r\n\t// If an opening or closing block element tag is preceded by an opening <p> tag, remove it.\r\n\ttext = text.replace(\r\n\t\tnew RegExp( '<p>\\\\s*(</?' + allBlocks + '[^>]*>)', 'g' ),\r\n\t\t'$1'\r\n\t);\r\n\r\n\t// If an opening or closing block element tag is followed by a closing <p> tag, remove it.\r\n\ttext = text.replace(\r\n\t\tnew RegExp( '(</?' + allBlocks + '[^>]*>)\\\\s*</p>', 'g' ),\r\n\t\t'$1'\r\n\t);\r\n\r\n\t// Optionally insert line breaks.\r\n\tif ( br ) {\r\n\t\t// Replace newlines that shouldn't be touched with a placeholder.\r\n\t\ttext = text.replace( /<(script|style).*?<\\/\\\\1>/g, ( match ) =>\r\n\t\t\tmatch[ 0 ].replace( /\\n/g, '<WPPreserveNewline />' )\r\n\t\t);\r\n\r\n\t\t// Normalize <br>\r\n\t\ttext = text.replace( /<br>|<br\\/>/g, '<br />' );\r\n\r\n\t\t// Replace any new line characters that aren't preceded by a <br /> with a <br />.\r\n\t\ttext = text.replace( /(<br \\/>)?\\s*\\n/g, ( a, b ) =>\r\n\t\t\tb ? a : '<br />\\n'\r\n\t\t);\r\n\r\n\t\t// Replace newline placeholders with newlines.\r\n\t\ttext = text.replace( /<WPPreserveNewline \\/>/g, '\\n' );\r\n\t}\r\n\r\n\t// If a <br /> tag is after an opening or closing block tag, remove it.\r\n\ttext = text.replace(\r\n\t\tnew RegExp( '(</?' + allBlocks + '[^>]*>)\\\\s*<br />', 'g' ),\r\n\t\t'$1'\r\n\t);\r\n\r\n\t// If a <br /> tag is before a subset of opening or closing block tags, remove it.\r\n\ttext = text.replace(\r\n\t\t/<br \\/>(\\s*<\\/?(?:p|li|div|dl|dd|dt|th|pre|td|ul|ol)[^>]*>)/g,\r\n\t\t'$1'\r\n\t);\r\n\ttext = text.replace( /\\n<\\/p>$/g, '</p>' );\r\n\r\n\t// Replace placeholder <pre> tags with their original content.\r\n\tpreTags.forEach( ( preTag ) => {\r\n\t\tconst [ name, original ] = preTag;\r\n\t\ttext = text.replace( name, original );\r\n\t} );\r\n\r\n\t// Restore newlines in all elements.\r\n\tif ( -1 !== text.indexOf( '<!-- wpnl -->' ) ) {\r\n\t\ttext = text.replace( /\\s?<!-- wpnl -->\\s?/g, '\\n' );\r\n\t}\r\n\r\n\treturn text;\r\n}\r\n\r\n/**\r\n * Replaces `<p>` tags with two line breaks. \"Opposite\" of autop().\r\n *\r\n * Replaces `<p>` tags with two line breaks except where the `<p>` has attributes.\r\n * Unifies whitespace. Indents `<li>`, `<dt>` and `<dd>` for better readability.\r\n *\r\n * @param {string} html The content from the editor.\r\n *\r\n * @example\r\n * ```js\r\n * import { removep } from '@wordpress/autop';\r\n * removep( '<p>my text</p>' ); // \"my text\"\r\n * ```\r\n *\r\n * @return {string} The content with stripped paragraph tags.\r\n */\r\nexport function removep( html ) {\r\n\tconst blocklist =\r\n\t\t'blockquote|ul|ol|li|dl|dt|dd|table|thead|tbody|tfoot|tr|th|td|h[1-6]|fieldset|figure';\r\n\tconst blocklist1 = blocklist + '|div|p';\r\n\tconst blocklist2 = blocklist + '|pre';\r\n\t/** @type {string[]} */\r\n\tconst preserve = [];\r\n\tlet preserveLinebreaks = false;\r\n\tlet preserveBr = false;\r\n\r\n\tif ( ! html ) {\r\n\t\treturn '';\r\n\t}\r\n\r\n\t// Protect script and style tags.\r\n\tif ( html.indexOf( '<script' ) !== -1 || html.indexOf( '<style' ) !== -1 ) {\r\n\t\thtml = html.replace(\r\n\t\t\t/<(script|style)[^>]*>[\\s\\S]*?<\\/\\1>/g,\r\n\t\t\t( match ) => {\r\n\t\t\t\tpreserve.push( match );\r\n\t\t\t\treturn '<wp-preserve>';\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\r\n\t// Protect pre tags.\r\n\tif ( html.indexOf( '<pre' ) !== -1 ) {\r\n\t\tpreserveLinebreaks = true;\r\n\t\thtml = html.replace( /<pre[^>]*>[\\s\\S]+?<\\/pre>/g, ( a ) => {\r\n\t\t\ta = a.replace( /<br ?\\/?>(\\r\\n|\\n)?/g, '<wp-line-break>' );\r\n\t\t\ta = a.replace( /<\\/?p( [^>]*)?>(\\r\\n|\\n)?/g, '<wp-line-break>' );\r\n\t\t\treturn a.replace( /\\r?\\n/g, '<wp-line-break>' );\r\n\t\t} );\r\n\t}\r\n\r\n\t// Remove line breaks but keep <br> tags inside image captions.\r\n\tif ( html.indexOf( '[caption' ) !== -1 ) {\r\n\t\tpreserveBr = true;\r\n\t\thtml = html.replace( /\\[caption[\\s\\S]+?\\[\\/caption\\]/g, ( a ) => {\r\n\t\t\treturn a\r\n\t\t\t\t.replace( /<br([^>]*)>/g, '<wp-temp-br$1>' )\r\n\t\t\t\t.replace( /[\\r\\n\\t]+/, '' );\r\n\t\t} );\r\n\t}\r\n\r\n\t// Normalize white space characters before and after block tags.\r\n\thtml = html.replace(\r\n\t\tnew RegExp( '\\\\s*</(' + blocklist1 + ')>\\\\s*', 'g' ),\r\n\t\t'</$1>\\n'\r\n\t);\r\n\thtml = html.replace(\r\n\t\tnew RegExp( '\\\\s*<((?:' + blocklist1 + ')(?: [^>]*)?)>', 'g' ),\r\n\t\t'\\n<$1>'\r\n\t);\r\n\r\n\t// Mark </p> if it has any attributes.\r\n\thtml = html.replace( /(<p [^>]+>[\\s\\S]*?)<\\/p>/g, '$1</p#>' );\r\n\r\n\t// Preserve the first <p> inside a <div>.\r\n\thtml = html.replace( /<div( [^>]*)?>\\s*<p>/gi, '<div$1>\\n\\n' );\r\n\r\n\t// Remove paragraph tags.\r\n\thtml = html.replace( /\\s*<p>/gi, '' );\r\n\thtml = html.replace( /\\s*<\\/p>\\s*/gi, '\\n\\n' );\r\n\r\n\t// Normalize white space chars and remove multiple line breaks.\r\n\thtml = html.replace( /\\n[\\s\\u00a0]+\\n/g, '\\n\\n' );\r\n\r\n\t// Replace <br> tags with line breaks.\r\n\thtml = html.replace( /(\\s*)<br ?\\/?>\\s*/gi, ( _, space ) => {\r\n\t\tif ( space && space.indexOf( '\\n' ) !== -1 ) {\r\n\t\t\treturn '\\n\\n';\r\n\t\t}\r\n\r\n\t\treturn '\\n';\r\n\t} );\r\n\r\n\t// Fix line breaks around <div>.\r\n\thtml = html.replace( /\\s*<div/g, '\\n<div' );\r\n\thtml = html.replace( /<\\/div>\\s*/g, '</div>\\n' );\r\n\r\n\t// Fix line breaks around caption shortcodes.\r\n\thtml = html.replace(\r\n\t\t/\\s*\\[caption([^\\[]+)\\[\\/caption\\]\\s*/gi,\r\n\t\t'\\n\\n[caption$1[/caption]\\n\\n'\r\n\t);\r\n\thtml = html.replace( /caption\\]\\n\\n+\\[caption/g, 'caption]\\n\\n[caption' );\r\n\r\n\t// Pad block elements tags with a line break.\r\n\thtml = html.replace(\r\n\t\tnew RegExp( '\\\\s*<((?:' + blocklist2 + ')(?: [^>]*)?)\\\\s*>', 'g' ),\r\n\t\t'\\n<$1>'\r\n\t);\r\n\thtml = html.replace(\r\n\t\tnew RegExp( '\\\\s*</(' + blocklist2 + ')>\\\\s*', 'g' ),\r\n\t\t'</$1>\\n'\r\n\t);\r\n\r\n\t// Indent <li>, <dt> and <dd> tags.\r\n\thtml = html.replace( /<((li|dt|dd)[^>]*)>/g, ' \\t<$1>' );\r\n\r\n\t// Fix line breaks around <select> and <option>.\r\n\tif ( html.indexOf( '<option' ) !== -1 ) {\r\n\t\thtml = html.replace( /\\s*<option/g, '\\n<option' );\r\n\t\thtml = html.replace( /\\s*<\\/select>/g, '\\n</select>' );\r\n\t}\r\n\r\n\t// Pad <hr> with two line breaks.\r\n\tif ( html.indexOf( '<hr' ) !== -1 ) {\r\n\t\thtml = html.replace( /\\s*<hr( [^>]*)?>\\s*/g, '\\n\\n<hr$1>\\n\\n' );\r\n\t}\r\n\r\n\t// Remove line breaks in <object> tags.\r\n\tif ( html.indexOf( '<object' ) !== -1 ) {\r\n\t\thtml = html.replace( /<object[\\s\\S]+?<\\/object>/g, ( a ) => {\r\n\t\t\treturn a.replace( /[\\r\\n]+/g, '' );\r\n\t\t} );\r\n\t}\r\n\r\n\t// Unmark special paragraph closing tags.\r\n\thtml = html.replace( /<\\/p#>/g, '</p>\\n' );\r\n\r\n\t// Pad remaining <p> tags whit a line break.\r\n\thtml = html.replace( /\\s*(<p [^>]+>[\\s\\S]*?<\\/p>)/g, '\\n$1' );\r\n\r\n\t// Trim.\r\n\thtml = html.replace( /^\\s+/, '' );\r\n\thtml = html.replace( /[\\s\\u00a0]+$/, '' );\r\n\r\n\tif ( preserveLinebreaks ) {\r\n\t\thtml = html.replace( /<wp-line-break>/g, '\\n' );\r\n\t}\r\n\r\n\tif ( preserveBr ) {\r\n\t\thtml = html.replace( /<wp-temp-br([^>]*)>/g, '<br$1>' );\r\n\t}\r\n\r\n\t// Restore preserved tags.\r\n\tif ( preserve.length ) {\r\n\t\thtml = html.replace( /<wp-preserve>/g, () => {\r\n\t\t\treturn /** @type {string} */ ( preserve.shift() );\r\n\t\t} );\r\n\t}\r\n\r\n\treturn html;\r\n}\r\n"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","htmlSplitRegex","RegExp","autop","text","br","preTags","trim","indexOf","textParts","split","lastText","pop","i","length","textPart","start","name","push","substr","allBlocks","haystack","replacePairs","textArr","input","parts","match","workingInput","index","slice","htmlSplit","changed","needles","keys","j","needle","replace","join","replaceInHtmlTags","texts","filter","Boolean","forEach","textPiece","a","b","preTag","original","removep","html","blocklist","blocklist1","blocklist2","preserve","preserveLinebreaks","preserveBr","_","space","shift"],"sourceRoot":""}