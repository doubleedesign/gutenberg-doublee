{"version":3,"file":"./build/patterns/index.min.js","mappings":"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","sources":["webpack://wp/webpack/bootstrap","webpack://wp/webpack/runtime/define property getters","webpack://wp/webpack/runtime/hasOwnProperty shorthand","webpack://wp/webpack/runtime/make namespace object","webpack://wp/external window [\"wp\",\"data\"]","../../packages/patterns/src/store/reducer.js","webpack://wp/external window [\"wp\",\"blocks\"]","webpack://wp/external window [\"wp\",\"coreData\"]","webpack://wp/external window [\"wp\",\"blockEditor\"]","../../packages/patterns/src/constants.js","../../packages/patterns/src/store/actions.js","../../packages/patterns/src/store/selectors.js","webpack://wp/external window [\"wp\",\"privateApis\"]","../../packages/patterns/src/lock-unlock.js","../../packages/patterns/src/store/index.js","../../packages/patterns/src/store/constants.js","webpack://wp/external window \"React\"","webpack://wp/external window [\"wp\",\"components\"]","webpack://wp/external window [\"wp\",\"element\"]","webpack://wp/external window [\"wp\",\"i18n\"]","../../packages/patterns/src/api/index.js","../../packages/patterns/src/components/overrides-panel.js","webpack://wp/external window [\"wp\",\"notices\"]","webpack://wp/external window [\"wp\",\"compose\"]","webpack://wp/external window [\"wp\",\"htmlEntities\"]","../../packages/patterns/src/components/category-selector.js","../../packages/patterns/src/private-hooks.js","../../packages/patterns/src/components/create-pattern-modal.js","../../packages/patterns/src/components/duplicate-pattern-modal.js","webpack://wp/external window [\"wp\",\"primitives\"]","../../packages/icons/src/library/symbol.js","../../packages/patterns/src/components/pattern-convert-button.js","webpack://wp/external window [\"wp\",\"url\"]","../../packages/patterns/src/components/patterns-manage-button.js","webpack://wp/external window [\"wp\",\"a11y\"]","../../packages/patterns/src/components/reset-overrides-control.js","../../packages/patterns/src/private-apis.js","../../packages/patterns/src/components/rename-pattern-modal.js","../../packages/patterns/src/components/index.js","../../packages/patterns/src/components/rename-pattern-category-modal.js","../../packages/patterns/src/components/use-set-pattern-bindings.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"data\"];","/**\r\n * WordPress dependencies\r\n */\r\nimport { combineReducers } from '@wordpress/data';\r\n\r\nexport function isEditingPattern( state = {}, action ) {\r\n\tif ( action?.type === 'SET_EDITING_PATTERN' ) {\r\n\t\treturn {\r\n\t\t\t...state,\r\n\t\t\t[ action.clientId ]: action.isEditing,\r\n\t\t};\r\n\t}\r\n\r\n\treturn state;\r\n}\r\n\r\nexport default combineReducers( {\r\n\tisEditingPattern,\r\n} );\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"blocks\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"coreData\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"blockEditor\"];","export const PATTERN_TYPES = {\n\ttheme: 'pattern',\n\tuser: 'wp_block',\n};\n\nexport const PATTERN_DEFAULT_CATEGORY = 'all-patterns';\nexport const PATTERN_USER_CATEGORY = 'my-patterns';\nexport const EXCLUDED_PATTERN_SOURCES = [\n\t'core',\n\t'pattern-directory/core',\n\t'pattern-directory/featured',\n];\nexport const PATTERN_SYNC_TYPES = {\n\tfull: 'fully',\n\tunsynced: 'unsynced',\n};\n\n// TODO: This should not be hardcoded. Maybe there should be a config and/or an UI.\nexport const PARTIAL_SYNCING_SUPPORTED_BLOCKS = {\n\t'core/paragraph': [ 'content' ],\n\t'core/heading': [ 'content' ],\n\t'core/button': [ 'text', 'url', 'linkTarget', 'rel' ],\n\t'core/image': [ 'id', 'url', 'title', 'alt' ],\n};\n","/**\r\n * WordPress dependencies\r\n */\r\n\r\nimport { cloneBlock } from '@wordpress/blocks';\r\nimport { store as coreStore } from '@wordpress/core-data';\r\nimport { store as blockEditorStore } from '@wordpress/block-editor';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { PATTERN_SYNC_TYPES } from '../constants';\r\n\r\n/**\r\n * Returns a generator converting one or more static blocks into a pattern, or creating a new empty pattern.\r\n *\r\n * @param {string}             title        Pattern title.\r\n * @param {'full'|'unsynced'}  syncType     They way block is synced, 'full' or 'unsynced'.\r\n * @param {string|undefined}   [content]    Optional serialized content of blocks to convert to pattern.\r\n * @param {number[]|undefined} [categories] Ids of any selected categories.\r\n */\r\nexport const createPattern =\r\n\t( title, syncType, content, categories ) =>\r\n\tasync ( { registry } ) => {\r\n\t\tconst meta =\r\n\t\t\tsyncType === PATTERN_SYNC_TYPES.unsynced\r\n\t\t\t\t? {\r\n\t\t\t\t\t\twp_pattern_sync_status: syncType,\r\n\t\t\t\t  }\r\n\t\t\t\t: undefined;\r\n\r\n\t\tconst reusableBlock = {\r\n\t\t\ttitle,\r\n\t\t\tcontent,\r\n\t\t\tstatus: 'publish',\r\n\t\t\tmeta,\r\n\t\t\twp_pattern_category: categories,\r\n\t\t};\r\n\r\n\t\tconst updatedRecord = await registry\r\n\t\t\t.dispatch( coreStore )\r\n\t\t\t.saveEntityRecord( 'postType', 'wp_block', reusableBlock );\r\n\r\n\t\treturn updatedRecord;\r\n\t};\r\n\r\n/**\r\n * Create a pattern from a JSON file.\r\n * @param {File}               file         The JSON file instance of the pattern.\r\n * @param {number[]|undefined} [categories] Ids of any selected categories.\r\n */\r\nexport const createPatternFromFile =\r\n\t( file, categories ) =>\r\n\tasync ( { dispatch } ) => {\r\n\t\tconst fileContent = await file.text();\r\n\t\t/** @type {import('./types').PatternJSON} */\r\n\t\tlet parsedContent;\r\n\t\ttry {\r\n\t\t\tparsedContent = JSON.parse( fileContent );\r\n\t\t} catch ( e ) {\r\n\t\t\tthrow new Error( 'Invalid JSON file' );\r\n\t\t}\r\n\t\tif (\r\n\t\t\tparsedContent.__file !== 'wp_block' ||\r\n\t\t\t! parsedContent.title ||\r\n\t\t\t! parsedContent.content ||\r\n\t\t\ttypeof parsedContent.title !== 'string' ||\r\n\t\t\ttypeof parsedContent.content !== 'string' ||\r\n\t\t\t( parsedContent.syncStatus &&\r\n\t\t\t\ttypeof parsedContent.syncStatus !== 'string' )\r\n\t\t) {\r\n\t\t\tthrow new Error( 'Invalid pattern JSON file' );\r\n\t\t}\r\n\r\n\t\tconst pattern = await dispatch.createPattern(\r\n\t\t\tparsedContent.title,\r\n\t\t\tparsedContent.syncStatus,\r\n\t\t\tparsedContent.content,\r\n\t\t\tcategories\r\n\t\t);\r\n\r\n\t\treturn pattern;\r\n\t};\r\n\r\n/**\r\n * Returns a generator converting a synced pattern block into a static block.\r\n *\r\n * @param {string} clientId The client ID of the block to attach.\r\n */\r\nexport const convertSyncedPatternToStatic =\r\n\t( clientId ) =>\r\n\t( { registry } ) => {\r\n\t\tconst patternBlock = registry\r\n\t\t\t.select( blockEditorStore )\r\n\t\t\t.getBlock( clientId );\r\n\r\n\t\tfunction cloneBlocksAndRemoveBindings( blocks ) {\r\n\t\t\treturn blocks.map( ( block ) => {\r\n\t\t\t\tlet metadata = block.attributes.metadata;\r\n\t\t\t\tif ( metadata ) {\r\n\t\t\t\t\tmetadata = { ...metadata };\r\n\t\t\t\t\tdelete metadata.id;\r\n\t\t\t\t\tdelete metadata.bindings;\r\n\t\t\t\t}\r\n\t\t\t\treturn cloneBlock(\r\n\t\t\t\t\tblock,\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tmetadata:\r\n\t\t\t\t\t\t\tmetadata && Object.keys( metadata ).length > 0\r\n\t\t\t\t\t\t\t\t? metadata\r\n\t\t\t\t\t\t\t\t: undefined,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcloneBlocksAndRemoveBindings( block.innerBlocks )\r\n\t\t\t\t);\r\n\t\t\t} );\r\n\t\t}\r\n\r\n\t\tregistry\r\n\t\t\t.dispatch( blockEditorStore )\r\n\t\t\t.replaceBlocks(\r\n\t\t\t\tpatternBlock.clientId,\r\n\t\t\t\tcloneBlocksAndRemoveBindings( patternBlock.innerBlocks )\r\n\t\t\t);\r\n\t};\r\n\r\n/**\r\n * Returns an action descriptor for SET_EDITING_PATTERN action.\r\n *\r\n * @param {string}  clientId  The clientID of the pattern to target.\r\n * @param {boolean} isEditing Whether the block should be in editing state.\r\n * @return {Object} Action descriptor.\r\n */\r\nexport function setEditingPattern( clientId, isEditing ) {\r\n\treturn {\r\n\t\ttype: 'SET_EDITING_PATTERN',\r\n\t\tclientId,\r\n\t\tisEditing,\r\n\t};\r\n}\r\n","/**\r\n * Returns true if pattern is in the editing state.\r\n *\r\n * @param {Object} state    Global application state.\r\n * @param {number} clientId the clientID of the block.\r\n * @return {boolean} Whether the pattern is in the editing state.\r\n */\r\nexport function isEditingPattern( state, clientId ) {\r\n\treturn state.isEditingPattern[ clientId ];\r\n}\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"privateApis\"];","/**\r\n * WordPress dependencies\r\n */\r\nimport { __dangerousOptInToUnstableAPIsOnlyForCoreModules } from '@wordpress/private-apis';\r\nexport const { lock, unlock } =\r\n\t__dangerousOptInToUnstableAPIsOnlyForCoreModules(\r\n\t\t'I know using unstable features means my theme or plugin will inevitably break in the next version of WordPress.',\r\n\t\t'@wordpress/patterns'\r\n\t);\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { createReduxStore, register } from '@wordpress/data';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport reducer from './reducer';\r\nimport * as actions from './actions';\r\nimport { STORE_NAME } from './constants';\r\nimport * as selectors from './selectors';\r\nimport { unlock } from '../lock-unlock';\r\n\r\n/**\r\n * Post editor data store configuration.\r\n *\r\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/data/README.md#registerStore\r\n *\r\n * @type {Object}\r\n */\r\nexport const storeConfig = {\r\n\treducer,\r\n};\r\n\r\n/**\r\n * Store definition for the editor namespace.\r\n *\r\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/data/README.md#createReduxStore\r\n *\r\n * @type {Object}\r\n */\r\nexport const store = createReduxStore( STORE_NAME, {\r\n\t...storeConfig,\r\n} );\r\n\r\nregister( store );\r\nunlock( store ).registerPrivateActions( actions );\r\nunlock( store ).registerPrivateSelectors( selectors );\r\n","/**\r\n * Module Constants\r\n */\r\nexport const STORE_NAME = 'core/patterns';\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"React\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"components\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"element\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"i18n\"];","/**\n * Internal dependencies\n */\nimport { PARTIAL_SYNCING_SUPPORTED_BLOCKS } from '../constants';\n\n/**\n * Determines whether a block is overridable.\n *\n * @param {WPBlock} block The block to test.\n *\n * @return {boolean} `true` if a block is overridable, `false` otherwise.\n */\nexport function isOverridableBlock( block ) {\n\treturn (\n\t\tObject.keys( PARTIAL_SYNCING_SUPPORTED_BLOCKS ).includes(\n\t\t\tblock.name\n\t\t) &&\n\t\t!! block.attributes.metadata?.bindings &&\n\t\tObject.values( block.attributes.metadata.bindings ).some(\n\t\t\t( binding ) => binding.source === 'core/pattern-overrides'\n\t\t)\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport {\n\tprivateApis as blockEditorPrivateApis,\n\tstore as blockEditorStore,\n} from '@wordpress/block-editor';\nimport { PanelBody } from '@wordpress/components';\nimport { useSelect } from '@wordpress/data';\nimport { useMemo } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { isOverridableBlock } from '../api';\nimport { unlock } from '../lock-unlock';\n\nconst { BlockQuickNavigation } = unlock( blockEditorPrivateApis );\n\nexport default function OverridesPanel() {\n\tconst allClientIds = useSelect(\n\t\t( select ) => select( blockEditorStore ).getClientIdsWithDescendants(),\n\t\t[]\n\t);\n\tconst { getBlock } = useSelect( blockEditorStore );\n\tconst clientIdsWithOverrides = useMemo(\n\t\t() =>\n\t\t\tallClientIds.filter( ( clientId ) => {\n\t\t\t\tconst block = getBlock( clientId );\n\t\t\t\treturn isOverridableBlock( block );\n\t\t\t} ),\n\t\t[ allClientIds, getBlock ]\n\t);\n\n\tif ( ! clientIdsWithOverrides?.length ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<PanelBody title={ __( 'Overrides' ) }>\n\t\t\t<BlockQuickNavigation clientIds={ clientIdsWithOverrides } />\n\t\t</PanelBody>\n\t);\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"notices\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"compose\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"htmlEntities\"];","/**\r\n * WordPress dependencies\r\n */\r\nimport { __ } from '@wordpress/i18n';\r\nimport { useMemo, useState } from '@wordpress/element';\r\nimport { FormTokenField } from '@wordpress/components';\r\nimport { useDebounce } from '@wordpress/compose';\r\nimport { decodeEntities } from '@wordpress/html-entities';\r\n\r\nconst unescapeString = ( arg ) => {\r\n\treturn decodeEntities( arg );\r\n};\r\n\r\nexport const CATEGORY_SLUG = 'wp_pattern_category';\r\n\r\nexport default function CategorySelector( {\r\n\tcategoryTerms,\r\n\tonChange,\r\n\tcategoryMap,\r\n} ) {\r\n\tconst [ search, setSearch ] = useState( '' );\r\n\tconst debouncedSearch = useDebounce( setSearch, 500 );\r\n\r\n\tconst suggestions = useMemo( () => {\r\n\t\treturn Array.from( categoryMap.values() )\r\n\t\t\t.map( ( category ) => unescapeString( category.label ) )\r\n\t\t\t.filter( ( category ) => {\r\n\t\t\t\tif ( search !== '' ) {\r\n\t\t\t\t\treturn category\r\n\t\t\t\t\t\t.toLowerCase()\r\n\t\t\t\t\t\t.includes( search.toLowerCase() );\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t} )\r\n\t\t\t.sort( ( a, b ) => a.localeCompare( b ) );\r\n\t}, [ search, categoryMap ] );\r\n\r\n\tfunction handleChange( termNames ) {\r\n\t\tconst uniqueTerms = termNames.reduce( ( terms, newTerm ) => {\r\n\t\t\tif (\r\n\t\t\t\t! terms.some(\r\n\t\t\t\t\t( term ) => term.toLowerCase() === newTerm.toLowerCase()\r\n\t\t\t\t)\r\n\t\t\t) {\r\n\t\t\t\tterms.push( newTerm );\r\n\t\t\t}\r\n\t\t\treturn terms;\r\n\t\t}, [] );\r\n\r\n\t\tonChange( uniqueTerms );\r\n\t}\r\n\r\n\treturn (\r\n\t\t<FormTokenField\r\n\t\t\tclassName=\"patterns-menu-items__convert-modal-categories\"\r\n\t\t\tvalue={ categoryTerms }\r\n\t\t\tsuggestions={ suggestions }\r\n\t\t\tonChange={ handleChange }\r\n\t\t\tonInputChange={ debouncedSearch }\r\n\t\t\tlabel={ __( 'Categories' ) }\r\n\t\t\ttokenizeOnBlur\r\n\t\t\t__experimentalExpandOnFocus\r\n\t\t\t__next40pxDefaultSize\r\n\t\t\t__nextHasNoMarginBottom\r\n\t\t/>\r\n\t);\r\n}\r\n","/**\n * WordPress dependencies\n */\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { store as coreStore } from '@wordpress/core-data';\nimport { useMemo } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { CATEGORY_SLUG } from './components/category-selector';\n\n/**\n * Helper hook that creates a Map with the core and user patterns categories\n * and removes any duplicates. It's used when we need to create new user\n * categories when creating or importing patterns.\n * This hook also provides a function to find or create a pattern category.\n *\n * @return {Object} The merged categories map and the callback function to find or create a category.\n */\nexport function useAddPatternCategory() {\n\tconst { saveEntityRecord, invalidateResolution } = useDispatch( coreStore );\n\tconst { corePatternCategories, userPatternCategories } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getUserPatternCategories, getBlockPatternCategories } =\n\t\t\t\tselect( coreStore );\n\n\t\t\treturn {\n\t\t\t\tcorePatternCategories: getBlockPatternCategories(),\n\t\t\t\tuserPatternCategories: getUserPatternCategories(),\n\t\t\t};\n\t\t},\n\t\t[]\n\t);\n\tconst categoryMap = useMemo( () => {\n\t\t// Merge the user and core pattern categories and remove any duplicates.\n\t\tconst uniqueCategories = new Map();\n\t\tuserPatternCategories.forEach( ( category ) => {\n\t\t\tuniqueCategories.set( category.label.toLowerCase(), {\n\t\t\t\tlabel: category.label,\n\t\t\t\tname: category.name,\n\t\t\t\tid: category.id,\n\t\t\t} );\n\t\t} );\n\n\t\tcorePatternCategories.forEach( ( category ) => {\n\t\t\tif (\n\t\t\t\t! uniqueCategories.has( category.label.toLowerCase() ) &&\n\t\t\t\t// There are two core categories with `Post` label so explicitly remove the one with\n\t\t\t\t// the `query` slug to avoid any confusion.\n\t\t\t\tcategory.name !== 'query'\n\t\t\t) {\n\t\t\t\tuniqueCategories.set( category.label.toLowerCase(), {\n\t\t\t\t\tlabel: category.label,\n\t\t\t\t\tname: category.name,\n\t\t\t\t} );\n\t\t\t}\n\t\t} );\n\t\treturn uniqueCategories;\n\t}, [ userPatternCategories, corePatternCategories ] );\n\n\tasync function findOrCreateTerm( term ) {\n\t\ttry {\n\t\t\tconst existingTerm = categoryMap.get( term.toLowerCase() );\n\t\t\tif ( existingTerm?.id ) {\n\t\t\t\treturn existingTerm.id;\n\t\t\t}\n\t\t\t// If we have an existing core category we need to match the new user category to the\n\t\t\t// correct slug rather than autogenerating it to prevent duplicates, eg. the core `Headers`\n\t\t\t// category uses the singular `header` as the slug.\n\t\t\tconst termData = existingTerm\n\t\t\t\t? { name: existingTerm.label, slug: existingTerm.name }\n\t\t\t\t: { name: term };\n\t\t\tconst newTerm = await saveEntityRecord(\n\t\t\t\t'taxonomy',\n\t\t\t\tCATEGORY_SLUG,\n\t\t\t\ttermData,\n\t\t\t\t{ throwOnError: true }\n\t\t\t);\n\t\t\tinvalidateResolution( 'getUserPatternCategories' );\n\t\t\treturn newTerm.id;\n\t\t} catch ( error ) {\n\t\t\tif ( error.code !== 'term_exists' ) {\n\t\t\t\tthrow error;\n\t\t\t}\n\t\t\treturn error.data.term_id;\n\t\t}\n\t}\n\n\treturn { categoryMap, findOrCreateTerm };\n}\n","/**\n * WordPress dependencies\n */\nimport {\n\tModal,\n\tButton,\n\tTextControl,\n\t__experimentalHStack as HStack,\n\t__experimentalVStack as VStack,\n\tToggleControl,\n} from '@wordpress/components';\nimport { __, _x } from '@wordpress/i18n';\nimport { useState } from '@wordpress/element';\nimport { useDispatch } from '@wordpress/data';\nimport { store as noticesStore } from '@wordpress/notices';\n\n/**\n * Internal dependencies\n */\nimport { PATTERN_DEFAULT_CATEGORY, PATTERN_SYNC_TYPES } from '../constants';\nimport { store as patternsStore } from '../store';\nimport CategorySelector from './category-selector';\nimport { useAddPatternCategory } from '../private-hooks';\nimport { unlock } from '../lock-unlock';\n\nexport default function CreatePatternModal( {\n\tclassName = 'patterns-menu-items__convert-modal',\n\tmodalTitle = __( 'Create pattern' ),\n\t...restProps\n} ) {\n\treturn (\n\t\t<Modal\n\t\t\ttitle={ modalTitle }\n\t\t\tonRequestClose={ restProps.onClose }\n\t\t\toverlayClassName={ className }\n\t\t>\n\t\t\t<CreatePatternModalContents { ...restProps } />\n\t\t</Modal>\n\t);\n}\n\nexport function CreatePatternModalContents( {\n\tconfirmLabel = __( 'Create' ),\n\tdefaultCategories = [],\n\tcontent,\n\tonClose,\n\tonError,\n\tonSuccess,\n\tdefaultSyncType = PATTERN_SYNC_TYPES.full,\n\tdefaultTitle = '',\n} ) {\n\tconst [ syncType, setSyncType ] = useState( defaultSyncType );\n\tconst [ categoryTerms, setCategoryTerms ] = useState( defaultCategories );\n\tconst [ title, setTitle ] = useState( defaultTitle );\n\n\tconst [ isSaving, setIsSaving ] = useState( false );\n\tconst { createPattern } = unlock( useDispatch( patternsStore ) );\n\tconst { createErrorNotice } = useDispatch( noticesStore );\n\n\tconst { categoryMap, findOrCreateTerm } = useAddPatternCategory();\n\n\tasync function onCreate( patternTitle, sync ) {\n\t\tif ( ! title || isSaving ) {\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tsetIsSaving( true );\n\t\t\tconst categories = await Promise.all(\n\t\t\t\tcategoryTerms.map( ( termName ) =>\n\t\t\t\t\tfindOrCreateTerm( termName )\n\t\t\t\t)\n\t\t\t);\n\n\t\t\tconst newPattern = await createPattern(\n\t\t\t\tpatternTitle,\n\t\t\t\tsync,\n\t\t\t\ttypeof content === 'function' ? content() : content,\n\t\t\t\tcategories\n\t\t\t);\n\t\t\tonSuccess( {\n\t\t\t\tpattern: newPattern,\n\t\t\t\tcategoryId: PATTERN_DEFAULT_CATEGORY,\n\t\t\t} );\n\t\t} catch ( error ) {\n\t\t\tcreateErrorNotice( error.message, {\n\t\t\t\ttype: 'snackbar',\n\t\t\t\tid: 'pattern-create',\n\t\t\t} );\n\t\t\tonError?.();\n\t\t} finally {\n\t\t\tsetIsSaving( false );\n\t\t\tsetCategoryTerms( [] );\n\t\t\tsetTitle( '' );\n\t\t}\n\t}\n\n\treturn (\n\t\t<form\n\t\t\tonSubmit={ ( event ) => {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tonCreate( title, syncType );\n\t\t\t} }\n\t\t>\n\t\t\t<VStack spacing=\"5\">\n\t\t\t\t<TextControl\n\t\t\t\t\tlabel={ __( 'Name' ) }\n\t\t\t\t\tvalue={ title }\n\t\t\t\t\tonChange={ setTitle }\n\t\t\t\t\tplaceholder={ __( 'My pattern' ) }\n\t\t\t\t\tclassName=\"patterns-create-modal__name-input\"\n\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t/>\n\t\t\t\t<CategorySelector\n\t\t\t\t\tcategoryTerms={ categoryTerms }\n\t\t\t\t\tonChange={ setCategoryTerms }\n\t\t\t\t\tcategoryMap={ categoryMap }\n\t\t\t\t/>\n\t\t\t\t<ToggleControl\n\t\t\t\t\tlabel={ _x(\n\t\t\t\t\t\t'Synced',\n\t\t\t\t\t\t'Option that makes an individual pattern synchronized'\n\t\t\t\t\t) }\n\t\t\t\t\thelp={ __(\n\t\t\t\t\t\t'Sync this pattern across multiple locations.'\n\t\t\t\t\t) }\n\t\t\t\t\tchecked={ syncType === PATTERN_SYNC_TYPES.full }\n\t\t\t\t\tonChange={ () => {\n\t\t\t\t\t\tsetSyncType(\n\t\t\t\t\t\t\tsyncType === PATTERN_SYNC_TYPES.full\n\t\t\t\t\t\t\t\t? PATTERN_SYNC_TYPES.unsynced\n\t\t\t\t\t\t\t\t: PATTERN_SYNC_TYPES.full\n\t\t\t\t\t\t);\n\t\t\t\t\t} }\n\t\t\t\t/>\n\t\t\t\t<HStack justify=\"right\">\n\t\t\t\t\t<Button\n\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\tvariant=\"tertiary\"\n\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\tonClose();\n\t\t\t\t\t\t\tsetTitle( '' );\n\t\t\t\t\t\t} }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Cancel' ) }\n\t\t\t\t\t</Button>\n\n\t\t\t\t\t<Button\n\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\taria-disabled={ ! title || isSaving }\n\t\t\t\t\t\tisBusy={ isSaving }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ confirmLabel }\n\t\t\t\t\t</Button>\n\t\t\t\t</HStack>\n\t\t\t</VStack>\n\t\t</form>\n\t);\n}\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { store as coreStore } from '@wordpress/core-data';\r\nimport { useDispatch, useSelect } from '@wordpress/data';\r\nimport { __, sprintf } from '@wordpress/i18n';\r\nimport { store as noticesStore } from '@wordpress/notices';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport CreatePatternModal from './create-pattern-modal';\r\nimport { PATTERN_SYNC_TYPES, PATTERN_TYPES } from '../constants';\r\n\r\nfunction getTermLabels( pattern, categories ) {\r\n\t// Theme patterns rely on core pattern categories.\r\n\tif ( pattern.type !== PATTERN_TYPES.user ) {\r\n\t\treturn categories.core\r\n\t\t\t?.filter( ( category ) =>\r\n\t\t\t\tpattern.categories.includes( category.name )\r\n\t\t\t)\r\n\t\t\t.map( ( category ) => category.label );\r\n\t}\r\n\r\n\treturn categories.user\r\n\t\t?.filter( ( category ) =>\r\n\t\t\tpattern.wp_pattern_category.includes( category.id )\r\n\t\t)\r\n\t\t.map( ( category ) => category.label );\r\n}\r\n\r\nexport function useDuplicatePatternProps( { pattern, onSuccess } ) {\r\n\tconst { createSuccessNotice } = useDispatch( noticesStore );\r\n\tconst categories = useSelect( ( select ) => {\r\n\t\tconst { getUserPatternCategories, getBlockPatternCategories } =\r\n\t\t\tselect( coreStore );\r\n\r\n\t\treturn {\r\n\t\t\tcore: getBlockPatternCategories(),\r\n\t\t\tuser: getUserPatternCategories(),\r\n\t\t};\r\n\t} );\r\n\tif ( ! pattern ) {\r\n\t\treturn null;\r\n\t}\r\n\treturn {\r\n\t\tcontent: pattern.content,\r\n\t\tdefaultCategories: getTermLabels( pattern, categories ),\r\n\t\tdefaultSyncType:\r\n\t\t\tpattern.type !== PATTERN_TYPES.user // Theme patterns are unsynced by default.\r\n\t\t\t\t? PATTERN_SYNC_TYPES.unsynced\r\n\t\t\t\t: pattern.wp_pattern_sync_status || PATTERN_SYNC_TYPES.full,\r\n\t\tdefaultTitle: sprintf(\r\n\t\t\t/* translators: %s: Existing pattern title */\r\n\t\t\t__( '%s (Copy)' ),\r\n\t\t\ttypeof pattern.title === 'string'\r\n\t\t\t\t? pattern.title\r\n\t\t\t\t: pattern.title.raw\r\n\t\t),\r\n\t\tonSuccess: ( { pattern: newPattern } ) => {\r\n\t\t\tcreateSuccessNotice(\r\n\t\t\t\tsprintf(\r\n\t\t\t\t\t// translators: %s: The new pattern's title e.g. 'Call to action (copy)'.\r\n\t\t\t\t\t__( '\"%s\" duplicated.' ),\r\n\t\t\t\t\tnewPattern.title.raw\r\n\t\t\t\t),\r\n\t\t\t\t{\r\n\t\t\t\t\ttype: 'snackbar',\r\n\t\t\t\t\tid: 'patterns-create',\r\n\t\t\t\t}\r\n\t\t\t);\r\n\r\n\t\t\tonSuccess?.( { pattern: newPattern } );\r\n\t\t},\r\n\t};\r\n}\r\n\r\nexport default function DuplicatePatternModal( {\r\n\tpattern,\r\n\tonClose,\r\n\tonSuccess,\r\n} ) {\r\n\tconst duplicatedProps = useDuplicatePatternProps( { pattern, onSuccess } );\r\n\tif ( ! pattern ) {\r\n\t\treturn null;\r\n\t}\r\n\treturn (\r\n\t\t<CreatePatternModal\r\n\t\t\tmodalTitle={ __( 'Duplicate pattern' ) }\r\n\t\t\tconfirmLabel={ __( 'Duplicate' ) }\r\n\t\t\tonClose={ onClose }\r\n\t\t\tonError={ onClose }\r\n\t\t\t{ ...duplicatedProps }\r\n\t\t/>\r\n\t);\r\n}\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"primitives\"];","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst symbol = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M21.3 10.8l-5.6-5.6c-.7-.7-1.8-.7-2.5 0l-5.6 5.6c-.7.7-.7 1.8 0 2.5l5.6 5.6c.3.3.8.5 1.2.5s.9-.2 1.2-.5l5.6-5.6c.8-.7.8-1.9.1-2.5zm-1 1.4l-5.6 5.6c-.1.1-.3.1-.4 0l-5.6-5.6c-.1-.1-.1-.3 0-.4l5.6-5.6s.1-.1.2-.1.1 0 .2.1l5.6 5.6c.1.1.1.3 0 .4zm-16.6-.4L10 5.5l-1-1-6.3 6.3c-.7.7-.7 1.8 0 2.5L9 19.5l1.1-1.1-6.3-6.3c-.2 0-.2-.2-.1-.3z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default symbol;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\thasBlockSupport,\r\n\tisReusableBlock,\r\n\tcreateBlock,\r\n\tserialize,\r\n} from '@wordpress/blocks';\r\nimport { store as blockEditorStore } from '@wordpress/block-editor';\r\nimport { useState, useCallback } from '@wordpress/element';\r\nimport { MenuItem } from '@wordpress/components';\r\nimport { symbol } from '@wordpress/icons';\r\nimport { useSelect, useDispatch } from '@wordpress/data';\r\nimport { store as coreStore } from '@wordpress/core-data';\r\nimport { __, sprintf } from '@wordpress/i18n';\r\nimport { store as noticesStore } from '@wordpress/notices';\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as patternsStore } from '../store';\r\nimport CreatePatternModal from './create-pattern-modal';\r\nimport { unlock } from '../lock-unlock';\r\nimport { PATTERN_SYNC_TYPES } from '../constants';\r\n\r\n/**\r\n * Menu control to convert block(s) to a pattern block.\r\n *\r\n * @param {Object}   props                        Component props.\r\n * @param {string[]} props.clientIds              Client ids of selected blocks.\r\n * @param {string}   props.rootClientId           ID of the currently selected top-level block.\r\n * @param {()=>void} props.closeBlockSettingsMenu Callback to close the block settings menu dropdown.\r\n * @return {import('react').ComponentType} The menu control or null.\r\n */\r\nexport default function PatternConvertButton( {\r\n\tclientIds,\r\n\trootClientId,\r\n\tcloseBlockSettingsMenu,\r\n} ) {\r\n\tconst { createSuccessNotice } = useDispatch( noticesStore );\r\n\tconst { replaceBlocks } = useDispatch( blockEditorStore );\r\n\t// Ignore reason: false positive of the lint rule.\r\n\t// eslint-disable-next-line @wordpress/no-unused-vars-before-return\r\n\tconst { setEditingPattern } = unlock( useDispatch( patternsStore ) );\r\n\tconst [ isModalOpen, setIsModalOpen ] = useState( false );\r\n\tconst canConvert = useSelect(\r\n\t\t( select ) => {\r\n\t\t\tconst { canUser } = select( coreStore );\r\n\t\t\tconst {\r\n\t\t\t\tgetBlocksByClientId,\r\n\t\t\t\tcanInsertBlockType,\r\n\t\t\t\tgetBlockRootClientId,\r\n\t\t\t} = select( blockEditorStore );\r\n\r\n\t\t\tconst rootId =\r\n\t\t\t\trootClientId ||\r\n\t\t\t\t( clientIds.length > 0\r\n\t\t\t\t\t? getBlockRootClientId( clientIds[ 0 ] )\r\n\t\t\t\t\t: undefined );\r\n\r\n\t\t\tconst blocks = getBlocksByClientId( clientIds ) ?? [];\r\n\r\n\t\t\tconst isReusable =\r\n\t\t\t\tblocks.length === 1 &&\r\n\t\t\t\tblocks[ 0 ] &&\r\n\t\t\t\tisReusableBlock( blocks[ 0 ] ) &&\r\n\t\t\t\t!! select( coreStore ).getEntityRecord(\r\n\t\t\t\t\t'postType',\r\n\t\t\t\t\t'wp_block',\r\n\t\t\t\t\tblocks[ 0 ].attributes.ref\r\n\t\t\t\t);\r\n\r\n\t\t\tconst _canConvert =\r\n\t\t\t\t// Hide when this is already a synced pattern.\r\n\t\t\t\t! isReusable &&\r\n\t\t\t\t// Hide when patterns are disabled.\r\n\t\t\t\tcanInsertBlockType( 'core/block', rootId ) &&\r\n\t\t\t\tblocks.every(\r\n\t\t\t\t\t( block ) =>\r\n\t\t\t\t\t\t// Guard against the case where a regular block has *just* been converted.\r\n\t\t\t\t\t\t!! block &&\r\n\t\t\t\t\t\t// Hide on invalid blocks.\r\n\t\t\t\t\t\tblock.isValid &&\r\n\t\t\t\t\t\t// Hide when block doesn't support being made into a pattern.\r\n\t\t\t\t\t\thasBlockSupport( block.name, 'reusable', true )\r\n\t\t\t\t) &&\r\n\t\t\t\t// Hide when current doesn't have permission to do that.\r\n\t\t\t\t!! canUser( 'create', 'blocks' );\r\n\r\n\t\t\treturn _canConvert;\r\n\t\t},\r\n\t\t[ clientIds, rootClientId ]\r\n\t);\r\n\tconst { getBlocksByClientId } = useSelect( blockEditorStore );\r\n\tconst getContent = useCallback(\r\n\t\t() => serialize( getBlocksByClientId( clientIds ) ),\r\n\t\t[ getBlocksByClientId, clientIds ]\r\n\t);\r\n\r\n\tif ( ! canConvert ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tconst handleSuccess = ( { pattern } ) => {\r\n\t\tif ( pattern.wp_pattern_sync_status !== PATTERN_SYNC_TYPES.unsynced ) {\r\n\t\t\tconst newBlock = createBlock( 'core/block', {\r\n\t\t\t\tref: pattern.id,\r\n\t\t\t} );\r\n\r\n\t\t\treplaceBlocks( clientIds, newBlock );\r\n\t\t\tsetEditingPattern( newBlock.clientId, true );\r\n\t\t\tcloseBlockSettingsMenu();\r\n\t\t}\r\n\r\n\t\tcreateSuccessNotice(\r\n\t\t\tpattern.wp_pattern_sync_status === PATTERN_SYNC_TYPES.unsynced\r\n\t\t\t\t? sprintf(\r\n\t\t\t\t\t\t// translators: %s: the name the user has given to the pattern.\r\n\t\t\t\t\t\t__( 'Unsynced pattern created: %s' ),\r\n\t\t\t\t\t\tpattern.title.raw\r\n\t\t\t\t  )\r\n\t\t\t\t: sprintf(\r\n\t\t\t\t\t\t// translators: %s: the name the user has given to the pattern.\r\n\t\t\t\t\t\t__( 'Synced pattern created: %s' ),\r\n\t\t\t\t\t\tpattern.title.raw\r\n\t\t\t\t  ),\r\n\t\t\t{\r\n\t\t\t\ttype: 'snackbar',\r\n\t\t\t\tid: 'convert-to-pattern-success',\r\n\t\t\t}\r\n\t\t);\r\n\t\tsetIsModalOpen( false );\r\n\t};\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<MenuItem\r\n\t\t\t\ticon={ symbol }\r\n\t\t\t\tonClick={ () => setIsModalOpen( true ) }\r\n\t\t\t\taria-expanded={ isModalOpen }\r\n\t\t\t\taria-haspopup=\"dialog\"\r\n\t\t\t>\r\n\t\t\t\t{ __( 'Create pattern' ) }\r\n\t\t\t</MenuItem>\r\n\t\t\t{ isModalOpen && (\r\n\t\t\t\t<CreatePatternModal\r\n\t\t\t\t\tcontent={ getContent }\r\n\t\t\t\t\tonSuccess={ ( pattern ) => {\r\n\t\t\t\t\t\thandleSuccess( pattern );\r\n\t\t\t\t\t} }\r\n\t\t\t\t\tonError={ () => {\r\n\t\t\t\t\t\tsetIsModalOpen( false );\r\n\t\t\t\t\t} }\r\n\t\t\t\t\tonClose={ () => {\r\n\t\t\t\t\t\tsetIsModalOpen( false );\r\n\t\t\t\t\t} }\r\n\t\t\t\t/>\r\n\t\t\t) }\r\n\t\t</>\r\n\t);\r\n}\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"url\"];","/**\r\n * WordPress dependencies\r\n */\r\nimport { MenuItem } from '@wordpress/components';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { isReusableBlock } from '@wordpress/blocks';\r\nimport { useSelect, useDispatch } from '@wordpress/data';\r\nimport { store as blockEditorStore } from '@wordpress/block-editor';\r\nimport { addQueryArgs } from '@wordpress/url';\r\nimport { store as coreStore } from '@wordpress/core-data';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as patternsStore } from '../store';\r\nimport { unlock } from '../lock-unlock';\r\n\r\nfunction PatternsManageButton( { clientId } ) {\r\n\tconst { canRemove, isVisible, managePatternsUrl } = useSelect(\r\n\t\t( select ) => {\r\n\t\t\tconst { getBlock, canRemoveBlock, getBlockCount, getSettings } =\r\n\t\t\t\tselect( blockEditorStore );\r\n\t\t\tconst { canUser } = select( coreStore );\r\n\t\t\tconst reusableBlock = getBlock( clientId );\r\n\t\t\tconst isBlockTheme = getSettings().__unstableIsBlockBasedTheme;\r\n\r\n\t\t\treturn {\r\n\t\t\t\tcanRemove: canRemoveBlock( clientId ),\r\n\t\t\t\tisVisible:\r\n\t\t\t\t\t!! reusableBlock &&\r\n\t\t\t\t\tisReusableBlock( reusableBlock ) &&\r\n\t\t\t\t\t!! canUser(\r\n\t\t\t\t\t\t'update',\r\n\t\t\t\t\t\t'blocks',\r\n\t\t\t\t\t\treusableBlock.attributes.ref\r\n\t\t\t\t\t),\r\n\t\t\t\tinnerBlockCount: getBlockCount( clientId ),\r\n\t\t\t\t// The site editor and templates both check whether the user\r\n\t\t\t\t// has edit_theme_options capabilities. We can leverage that here\r\n\t\t\t\t// and omit the manage patterns link if the user can't access it.\r\n\t\t\t\tmanagePatternsUrl:\r\n\t\t\t\t\tisBlockTheme && canUser( 'read', 'templates' )\r\n\t\t\t\t\t\t? addQueryArgs( 'site-editor.php', {\r\n\t\t\t\t\t\t\t\tpath: '/patterns',\r\n\t\t\t\t\t\t  } )\r\n\t\t\t\t\t\t: addQueryArgs( 'edit.php', {\r\n\t\t\t\t\t\t\t\tpost_type: 'wp_block',\r\n\t\t\t\t\t\t  } ),\r\n\t\t\t};\r\n\t\t},\r\n\t\t[ clientId ]\r\n\t);\r\n\r\n\t// Ignore reason: false positive of the lint rule.\r\n\t// eslint-disable-next-line @wordpress/no-unused-vars-before-return\r\n\tconst { convertSyncedPatternToStatic } = unlock(\r\n\t\tuseDispatch( patternsStore )\r\n\t);\r\n\r\n\tif ( ! isVisible ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{ canRemove && (\r\n\t\t\t\t<MenuItem\r\n\t\t\t\t\tonClick={ () => convertSyncedPatternToStatic( clientId ) }\r\n\t\t\t\t>\r\n\t\t\t\t\t{ __( 'Detach' ) }\r\n\t\t\t\t</MenuItem>\r\n\t\t\t) }\r\n\t\t\t<MenuItem href={ managePatternsUrl }>\r\n\t\t\t\t{ __( 'Manage patterns' ) }\r\n\t\t\t</MenuItem>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default PatternsManageButton;\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"a11y\"];","/**\n * WordPress dependencies\n */\nimport {\n\tstore as blockEditorStore,\n\tBlockControls,\n} from '@wordpress/block-editor';\nimport { ToolbarButton, ToolbarGroup } from '@wordpress/components';\nimport { useSelect, useRegistry } from '@wordpress/data';\nimport { store as coreStore } from '@wordpress/core-data';\nimport { parse } from '@wordpress/blocks';\nimport { __ } from '@wordpress/i18n';\n\nfunction recursivelyFindBlockWithName( blocks, name ) {\n\tfor ( const block of blocks ) {\n\t\tif ( block.attributes.metadata?.name === name ) {\n\t\t\treturn block;\n\t\t}\n\n\t\tconst found = recursivelyFindBlockWithName( block.innerBlocks, name );\n\t\tif ( found ) {\n\t\t\treturn found;\n\t\t}\n\t}\n}\n\nexport default function ResetOverridesControl( props ) {\n\tconst registry = useRegistry();\n\tconst name = props.attributes.metadata?.name;\n\tconst patternWithOverrides = useSelect(\n\t\t( select ) => {\n\t\t\tif ( ! name ) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\tconst { getBlockParentsByBlockName, getBlocksByClientId } =\n\t\t\t\tselect( blockEditorStore );\n\t\t\tconst patternBlock = getBlocksByClientId(\n\t\t\t\tgetBlockParentsByBlockName( props.clientId, 'core/block' )\n\t\t\t)[ 0 ];\n\n\t\t\tif ( ! patternBlock?.attributes.content?.[ name ] ) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\treturn patternBlock;\n\t\t},\n\t\t[ props.clientId, name ]\n\t);\n\n\tconst resetOverrides = async () => {\n\t\tconst editedRecord = await registry\n\t\t\t.resolveSelect( coreStore )\n\t\t\t.getEditedEntityRecord(\n\t\t\t\t'postType',\n\t\t\t\t'wp_block',\n\t\t\t\tpatternWithOverrides.attributes.ref\n\t\t\t);\n\t\tconst blocks = editedRecord.blocks ?? parse( editedRecord.content );\n\t\tconst block = recursivelyFindBlockWithName( blocks, name );\n\n\t\tconst newAttributes = Object.assign(\n\t\t\t// Reset every existing attribute to undefined.\n\t\t\tObject.fromEntries(\n\t\t\t\tObject.keys( props.attributes ).map( ( key ) => [\n\t\t\t\t\tkey,\n\t\t\t\t\tundefined,\n\t\t\t\t] )\n\t\t\t),\n\t\t\t// Then assign the original attributes.\n\t\t\tblock.attributes\n\t\t);\n\n\t\tprops.setAttributes( newAttributes );\n\t};\n\n\treturn (\n\t\t<BlockControls group=\"other\">\n\t\t\t<ToolbarGroup>\n\t\t\t\t<ToolbarButton\n\t\t\t\t\tonClick={ resetOverrides }\n\t\t\t\t\tdisabled={ ! patternWithOverrides }\n\t\t\t\t\t__experimentalIsFocusable\n\t\t\t\t>\n\t\t\t\t\t{ __( 'Reset' ) }\n\t\t\t\t</ToolbarButton>\n\t\t\t</ToolbarGroup>\n\t\t</BlockControls>\n\t);\n}\n","/**\n * Internal dependencies\n */\nimport { lock } from './lock-unlock';\nimport OverridesPanel from './components/overrides-panel';\nimport {\n\tdefault as CreatePatternModal,\n\tCreatePatternModalContents,\n} from './components/create-pattern-modal';\nimport {\n\tdefault as DuplicatePatternModal,\n\tuseDuplicatePatternProps,\n} from './components/duplicate-pattern-modal';\nimport { isOverridableBlock } from './api';\nimport RenamePatternModal from './components/rename-pattern-modal';\nimport PatternsMenuItems from './components';\nimport RenamePatternCategoryModal from './components/rename-pattern-category-modal';\nimport useSetPatternBindings from './components/use-set-pattern-bindings';\nimport ResetOverridesControl from './components/reset-overrides-control';\nimport { useAddPatternCategory } from './private-hooks';\nimport {\n\tPATTERN_TYPES,\n\tPATTERN_DEFAULT_CATEGORY,\n\tPATTERN_USER_CATEGORY,\n\tEXCLUDED_PATTERN_SOURCES,\n\tPATTERN_SYNC_TYPES,\n\tPARTIAL_SYNCING_SUPPORTED_BLOCKS,\n} from './constants';\n\nexport const privateApis = {};\nlock( privateApis, {\n\tOverridesPanel,\n\tCreatePatternModal,\n\tCreatePatternModalContents,\n\tDuplicatePatternModal,\n\tisOverridableBlock,\n\tuseDuplicatePatternProps,\n\tRenamePatternModal,\n\tPatternsMenuItems,\n\tRenamePatternCategoryModal,\n\tuseSetPatternBindings,\n\tResetOverridesControl,\n\tuseAddPatternCategory,\n\tPATTERN_TYPES,\n\tPATTERN_DEFAULT_CATEGORY,\n\tPATTERN_USER_CATEGORY,\n\tEXCLUDED_PATTERN_SOURCES,\n\tPATTERN_SYNC_TYPES,\n\tPARTIAL_SYNCING_SUPPORTED_BLOCKS,\n} );\n","/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\tButton,\r\n\tModal,\r\n\tTextControl,\r\n\t__experimentalHStack as HStack,\r\n\t__experimentalVStack as VStack,\r\n} from '@wordpress/components';\r\nimport { store as coreStore } from '@wordpress/core-data';\r\nimport { useDispatch } from '@wordpress/data';\r\nimport { useState } from '@wordpress/element';\r\nimport { decodeEntities } from '@wordpress/html-entities';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { store as noticesStore } from '@wordpress/notices';\r\n\r\nexport default function RenamePatternModal( {\r\n\tonClose,\r\n\tonError,\r\n\tonSuccess,\r\n\tpattern,\r\n\t...props\r\n} ) {\r\n\tconst originalName = decodeEntities( pattern.title );\r\n\tconst [ name, setName ] = useState( originalName );\r\n\tconst [ isSaving, setIsSaving ] = useState( false );\r\n\r\n\tconst {\r\n\t\teditEntityRecord,\r\n\t\t__experimentalSaveSpecifiedEntityEdits: saveSpecifiedEntityEdits,\r\n\t} = useDispatch( coreStore );\r\n\r\n\tconst { createSuccessNotice, createErrorNotice } =\r\n\t\tuseDispatch( noticesStore );\r\n\r\n\tconst onRename = async ( event ) => {\r\n\t\tevent.preventDefault();\r\n\r\n\t\tif ( ! name || name === pattern.title || isSaving ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\tawait editEntityRecord( 'postType', pattern.type, pattern.id, {\r\n\t\t\t\ttitle: name,\r\n\t\t\t} );\r\n\r\n\t\t\tsetIsSaving( true );\r\n\t\t\tsetName( '' );\r\n\t\t\tonClose?.();\r\n\r\n\t\t\tconst savedRecord = await saveSpecifiedEntityEdits(\r\n\t\t\t\t'postType',\r\n\t\t\t\tpattern.type,\r\n\t\t\t\tpattern.id,\r\n\t\t\t\t[ 'title' ],\r\n\t\t\t\t{ throwOnError: true }\r\n\t\t\t);\r\n\r\n\t\t\tonSuccess?.( savedRecord );\r\n\r\n\t\t\tcreateSuccessNotice( __( 'Pattern renamed' ), {\r\n\t\t\t\ttype: 'snackbar',\r\n\t\t\t\tid: 'pattern-update',\r\n\t\t\t} );\r\n\t\t} catch ( error ) {\r\n\t\t\tonError?.();\r\n\r\n\t\t\tconst errorMessage =\r\n\t\t\t\terror.message && error.code !== 'unknown_error'\r\n\t\t\t\t\t? error.message\r\n\t\t\t\t\t: __( 'An error occurred while renaming the pattern.' );\r\n\r\n\t\t\tcreateErrorNotice( errorMessage, {\r\n\t\t\t\ttype: 'snackbar',\r\n\t\t\t\tid: 'pattern-update',\r\n\t\t\t} );\r\n\t\t} finally {\r\n\t\t\tsetIsSaving( false );\r\n\t\t\tsetName( '' );\r\n\t\t}\r\n\t};\r\n\r\n\tconst onRequestClose = () => {\r\n\t\tonClose?.();\r\n\t\tsetName( '' );\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Modal title={ __( 'Rename' ) } { ...props } onRequestClose={ onClose }>\r\n\t\t\t<form onSubmit={ onRename }>\r\n\t\t\t\t<VStack spacing=\"5\">\r\n\t\t\t\t\t<TextControl\r\n\t\t\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t\t\t\t__next40pxDefaultSize\r\n\t\t\t\t\t\tlabel={ __( 'Name' ) }\r\n\t\t\t\t\t\tvalue={ name }\r\n\t\t\t\t\t\tonChange={ setName }\r\n\t\t\t\t\t\trequired\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<HStack justify=\"right\">\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t__next40pxDefaultSize\r\n\t\t\t\t\t\t\tvariant=\"tertiary\"\r\n\t\t\t\t\t\t\tonClick={ onRequestClose }\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{ __( 'Cancel' ) }\r\n\t\t\t\t\t\t</Button>\r\n\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t__next40pxDefaultSize\r\n\t\t\t\t\t\t\tvariant=\"primary\"\r\n\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{ __( 'Save' ) }\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</HStack>\r\n\t\t\t\t</VStack>\r\n\t\t\t</form>\r\n\t\t</Modal>\r\n\t);\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { BlockSettingsMenuControls } from '@wordpress/block-editor';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport PatternConvertButton from './pattern-convert-button';\r\nimport PatternsManageButton from './patterns-manage-button';\r\n\r\nexport default function PatternsMenuItems( { rootClientId } ) {\r\n\treturn (\r\n\t\t<BlockSettingsMenuControls>\r\n\t\t\t{ ( { selectedClientIds, onClose } ) => (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<PatternConvertButton\r\n\t\t\t\t\t\tclientIds={ selectedClientIds }\r\n\t\t\t\t\t\trootClientId={ rootClientId }\r\n\t\t\t\t\t\tcloseBlockSettingsMenu={ onClose }\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{ selectedClientIds.length === 1 && (\r\n\t\t\t\t\t\t<PatternsManageButton\r\n\t\t\t\t\t\t\tclientId={ selectedClientIds[ 0 ] }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t) }\r\n\t\t\t\t</>\r\n\t\t\t) }\r\n\t\t</BlockSettingsMenuControls>\r\n\t);\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\tModal,\r\n\tButton,\r\n\tTextControl,\r\n\t__experimentalHStack as HStack,\r\n\t__experimentalVStack as VStack,\r\n} from '@wordpress/components';\r\nimport { store as coreStore } from '@wordpress/core-data';\r\nimport { useDispatch } from '@wordpress/data';\r\nimport { useId, useRef, useState } from '@wordpress/element';\r\nimport { decodeEntities } from '@wordpress/html-entities';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { store as noticesStore } from '@wordpress/notices';\r\nimport { speak } from '@wordpress/a11y';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { CATEGORY_SLUG } from './category-selector';\r\n\r\nexport default function RenamePatternCategoryModal( {\r\n\tcategory,\r\n\texistingCategories,\r\n\tonClose,\r\n\tonError,\r\n\tonSuccess,\r\n\t...props\r\n} ) {\r\n\tconst id = useId();\r\n\tconst textControlRef = useRef();\r\n\tconst [ name, setName ] = useState( decodeEntities( category.name ) );\r\n\tconst [ isSaving, setIsSaving ] = useState( false );\r\n\tconst [ validationMessage, setValidationMessage ] = useState( false );\r\n\tconst validationMessageId = validationMessage\r\n\t\t? `patterns-rename-pattern-category-modal__validation-message-${ id }`\r\n\t\t: undefined;\r\n\r\n\tconst { saveEntityRecord, invalidateResolution } = useDispatch( coreStore );\r\n\tconst { createErrorNotice, createSuccessNotice } =\r\n\t\tuseDispatch( noticesStore );\r\n\r\n\tconst onChange = ( newName ) => {\r\n\t\tif ( validationMessage ) {\r\n\t\t\tsetValidationMessage( undefined );\r\n\t\t}\r\n\t\tsetName( newName );\r\n\t};\r\n\r\n\tconst onSave = async ( event ) => {\r\n\t\tevent.preventDefault();\r\n\r\n\t\tif ( isSaving ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( ! name || name === category.name ) {\r\n\t\t\tconst message = __( 'Please enter a new name for this category.' );\r\n\t\t\tspeak( message, 'assertive' );\r\n\t\t\tsetValidationMessage( message );\r\n\t\t\ttextControlRef.current?.focus();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Check existing categories to avoid creating duplicates.\r\n\t\tif (\r\n\t\t\texistingCategories.patternCategories.find( ( existingCategory ) => {\r\n\t\t\t\t// Compare the id so that the we don't disallow the user changing the case of their current category\r\n\t\t\t\t// (i.e. renaming 'test' to 'Test').\r\n\t\t\t\treturn (\r\n\t\t\t\t\texistingCategory.id !== category.id &&\r\n\t\t\t\t\texistingCategory.label.toLowerCase() === name.toLowerCase()\r\n\t\t\t\t);\r\n\t\t\t} )\r\n\t\t) {\r\n\t\t\tconst message = __(\r\n\t\t\t\t'This category already exists. Please use a different name.'\r\n\t\t\t);\r\n\t\t\tspeak( message, 'assertive' );\r\n\t\t\tsetValidationMessage( message );\r\n\t\t\ttextControlRef.current?.focus();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\tsetIsSaving( true );\r\n\r\n\t\t\t// User pattern category properties may differ as they can be\r\n\t\t\t// normalized for use alongside template part areas, core pattern\r\n\t\t\t// categories etc. As a result we won't just destructure the passed\r\n\t\t\t// category object.\r\n\t\t\tconst savedRecord = await saveEntityRecord(\r\n\t\t\t\t'taxonomy',\r\n\t\t\t\tCATEGORY_SLUG,\r\n\t\t\t\t{\r\n\t\t\t\t\tid: category.id,\r\n\t\t\t\t\tslug: category.slug,\r\n\t\t\t\t\tname,\r\n\t\t\t\t}\r\n\t\t\t);\r\n\r\n\t\t\tinvalidateResolution( 'getUserPatternCategories' );\r\n\t\t\tonSuccess?.( savedRecord );\r\n\t\t\tonClose();\r\n\r\n\t\t\tcreateSuccessNotice( __( 'Pattern category renamed.' ), {\r\n\t\t\t\ttype: 'snackbar',\r\n\t\t\t\tid: 'pattern-category-update',\r\n\t\t\t} );\r\n\t\t} catch ( error ) {\r\n\t\t\tonError?.();\r\n\t\t\tcreateErrorNotice( error.message, {\r\n\t\t\t\ttype: 'snackbar',\r\n\t\t\t\tid: 'pattern-category-update',\r\n\t\t\t} );\r\n\t\t} finally {\r\n\t\t\tsetIsSaving( false );\r\n\t\t\tsetName( '' );\r\n\t\t}\r\n\t};\r\n\r\n\tconst onRequestClose = () => {\r\n\t\tonClose();\r\n\t\tsetName( '' );\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Modal\r\n\t\t\ttitle={ __( 'Rename' ) }\r\n\t\t\tonRequestClose={ onRequestClose }\r\n\t\t\t{ ...props }\r\n\t\t>\r\n\t\t\t<form onSubmit={ onSave }>\r\n\t\t\t\t<VStack spacing=\"5\">\r\n\t\t\t\t\t<VStack spacing=\"2\">\r\n\t\t\t\t\t\t<TextControl\r\n\t\t\t\t\t\t\tref={ textControlRef }\r\n\t\t\t\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t\t\t\t\t__next40pxDefaultSize\r\n\t\t\t\t\t\t\tlabel={ __( 'Name' ) }\r\n\t\t\t\t\t\t\tvalue={ name }\r\n\t\t\t\t\t\t\tonChange={ onChange }\r\n\t\t\t\t\t\t\taria-describedby={ validationMessageId }\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t{ validationMessage && (\r\n\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\tclassName=\"patterns-rename-pattern-category-modal__validation-message\"\r\n\t\t\t\t\t\t\t\tid={ validationMessageId }\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{ validationMessage }\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t) }\r\n\t\t\t\t\t</VStack>\r\n\t\t\t\t\t<HStack justify=\"right\">\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t__next40pxDefaultSize\r\n\t\t\t\t\t\t\tvariant=\"tertiary\"\r\n\t\t\t\t\t\t\tonClick={ onRequestClose }\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{ __( 'Cancel' ) }\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t__next40pxDefaultSize\r\n\t\t\t\t\t\t\tvariant=\"primary\"\r\n\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\taria-disabled={\r\n\t\t\t\t\t\t\t\t! name || name === category.name || isSaving\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tisBusy={ isSaving }\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{ __( 'Save' ) }\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</HStack>\r\n\t\t\t\t</VStack>\r\n\t\t\t</form>\r\n\t\t</Modal>\r\n\t);\r\n}\r\n","/**\n * WordPress dependencies\n */\nimport { usePrevious } from '@wordpress/compose';\nimport { store as blocksStore } from '@wordpress/blocks';\nimport { useEffect } from '@wordpress/element';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { PARTIAL_SYNCING_SUPPORTED_BLOCKS } from '../constants';\n\nimport { unlock } from '../lock-unlock';\n\nfunction removeBindings( bindings, syncedAttributes ) {\n\tlet updatedBindings = {};\n\tfor ( const attributeName of syncedAttributes ) {\n\t\t// Omit any pattern override bindings from the `updatedBindings` object.\n\t\tif (\n\t\t\tbindings?.[ attributeName ]?.source !== 'core/pattern-overrides' &&\n\t\t\tbindings?.[ attributeName ]?.source !== undefined\n\t\t) {\n\t\t\tupdatedBindings[ attributeName ] = bindings[ attributeName ];\n\t\t}\n\t}\n\tif ( ! Object.keys( updatedBindings ).length ) {\n\t\tupdatedBindings = undefined;\n\t}\n\treturn updatedBindings;\n}\n\nfunction addBindings( bindings, syncedAttributes ) {\n\tconst updatedBindings = { ...bindings };\n\tfor ( const attributeName of syncedAttributes ) {\n\t\tif ( ! bindings?.[ attributeName ] ) {\n\t\t\tupdatedBindings[ attributeName ] = {\n\t\t\t\tsource: 'core/pattern-overrides',\n\t\t\t};\n\t\t}\n\t}\n\treturn updatedBindings;\n}\n\nexport default function useSetPatternBindings(\n\t{ name, attributes, setAttributes },\n\tcurrentPostType\n) {\n\tconst hasPatternOverridesSource = useSelect( ( select ) => {\n\t\tconst { getBlockBindingsSource } = unlock( select( blocksStore ) );\n\n\t\t// For editing link to the site editor if the theme and user permissions support it.\n\t\treturn !! getBlockBindingsSource( 'core/pattern-overrides' );\n\t}, [] );\n\n\tconst metadataName = attributes?.metadata?.name ?? '';\n\tconst prevMetadataName = usePrevious( metadataName ) ?? '';\n\tconst bindings = attributes?.metadata?.bindings;\n\n\tuseEffect( () => {\n\t\t// Bindings should only be created when editing a wp_block post type,\n\t\t// and also when there's a change to the user-given name for the block.\n\t\t// Also check that the pattern overrides source is registered.\n\t\tif (\n\t\t\t! hasPatternOverridesSource ||\n\t\t\tcurrentPostType !== 'wp_block' ||\n\t\t\tmetadataName === prevMetadataName\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst syncedAttributes = PARTIAL_SYNCING_SUPPORTED_BLOCKS[ name ];\n\t\tconst attributeSources = syncedAttributes.map(\n\t\t\t( attributeName ) =>\n\t\t\t\tattributes.metadata?.bindings?.[ attributeName ]?.source\n\t\t);\n\t\tconst isConnectedToOtherSources = attributeSources.every(\n\t\t\t( source ) => source && source !== 'core/pattern-overrides'\n\t\t);\n\n\t\t// Avoid overwriting other (e.g. meta) bindings.\n\t\tif ( isConnectedToOtherSources ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// The user-given name for the block was deleted, remove the bindings.\n\t\tif ( ! metadataName?.length && prevMetadataName?.length ) {\n\t\t\tconst updatedBindings = removeBindings(\n\t\t\t\tbindings,\n\t\t\t\tsyncedAttributes\n\t\t\t);\n\t\t\tsetAttributes( {\n\t\t\t\tmetadata: {\n\t\t\t\t\t...attributes.metadata,\n\t\t\t\t\tbindings: updatedBindings,\n\t\t\t\t},\n\t\t\t} );\n\t\t}\n\n\t\t// The user-given name for the block was set, set the bindings.\n\t\tif ( ! prevMetadataName?.length && metadataName.length ) {\n\t\t\tconst updatedBindings = addBindings( bindings, syncedAttributes );\n\t\t\tsetAttributes( {\n\t\t\t\tmetadata: {\n\t\t\t\t\t...attributes.metadata,\n\t\t\t\t\tbindings: updatedBindings,\n\t\t\t\t},\n\t\t\t} );\n\t\t}\n\t}, [\n\t\thasPatternOverridesSource,\n\t\tbindings,\n\t\tprevMetadataName,\n\t\tmetadataName,\n\t\tcurrentPostType,\n\t\tname,\n\t\tattributes.metadata,\n\t\tsetAttributes,\n\t] );\n}\n"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","window","combineReducers","isEditingPattern","state","action","type","clientId","isEditing","PATTERN_TYPES","theme","user","PATTERN_DEFAULT_CATEGORY","PATTERN_SYNC_TYPES","full","unsynced","PARTIAL_SYNCING_SUPPORTED_BLOCKS","createPattern","title","syncType","content","categories","async","registry","meta","wp_pattern_sync_status","undefined","reusableBlock","status","wp_pattern_category","dispatch","coreStore","saveEntityRecord","createPatternFromFile","file","fileContent","text","parsedContent","JSON","parse","e","Error","__file","syncStatus","convertSyncedPatternToStatic","patternBlock","select","blockEditorStore","getBlock","replaceBlocks","cloneBlocksAndRemoveBindings","blocks","map","block","metadata","attributes","id","bindings","cloneBlock","keys","length","innerBlocks","setEditingPattern","lock","unlock","__dangerousOptInToUnstableAPIsOnlyForCoreModules","storeConfig","reducer","store","createReduxStore","register","registerPrivateActions","actions","registerPrivateSelectors","selectors","isOverridableBlock","includes","name","values","some","binding","source","BlockQuickNavigation","blockEditorPrivateApis","unescapeString","arg","decodeEntities","CATEGORY_SLUG","CategorySelector","categoryTerms","onChange","categoryMap","search","setSearch","useState","debouncedSearch","useDebounce","suggestions","useMemo","Array","from","category","label","filter","toLowerCase","sort","a","b","localeCompare","createElement","FormTokenField","className","termNames","uniqueTerms","reduce","terms","newTerm","term","push","onInputChange","__","tokenizeOnBlur","__experimentalExpandOnFocus","__next40pxDefaultSize","__nextHasNoMarginBottom","useAddPatternCategory","invalidateResolution","useDispatch","corePatternCategories","userPatternCategories","useSelect","getUserPatternCategories","getBlockPatternCategories","uniqueCategories","Map","forEach","set","has","findOrCreateTerm","existingTerm","termData","slug","throwOnError","error","code","data","term_id","CreatePatternModal","modalTitle","restProps","Modal","onRequestClose","onClose","overlayClassName","CreatePatternModalContents","confirmLabel","defaultCategories","onError","onSuccess","defaultSyncType","defaultTitle","setSyncType","setCategoryTerms","setTitle","isSaving","setIsSaving","patternsStore","createErrorNotice","noticesStore","onSubmit","event","preventDefault","patternTitle","sync","Promise","all","termName","newPattern","pattern","categoryId","message","onCreate","VStack","spacing","TextControl","placeholder","ToggleControl","_x","help","checked","HStack","justify","Button","variant","onClick","isBusy","getTermLabels","core","useDuplicatePatternProps","createSuccessNotice","sprintf","raw","SVG","xmlns","viewBox","Path","d","PatternConvertButton","clientIds","rootClientId","closeBlockSettingsMenu","isModalOpen","setIsModalOpen","canConvert","_getBlocksByClientId","canUser","getBlocksByClientId","canInsertBlockType","getBlockRootClientId","rootId","isReusableBlock","getEntityRecord","ref","every","isValid","hasBlockSupport","getContent","useCallback","serialize","Fragment","MenuItem","icon","symbol","handleSuccess","newBlock","createBlock","canRemove","isVisible","managePatternsUrl","canRemoveBlock","getBlockCount","getSettings","isBlockTheme","__unstableIsBlockBasedTheme","innerBlockCount","addQueryArgs","path","post_type","href","recursivelyFindBlockWithName","found","privateApis","OverridesPanel","allClientIds","getClientIdsWithDescendants","clientIdsWithOverrides","PanelBody","DuplicatePatternModal","duplicatedProps","RenamePatternModal","props","originalName","setName","editEntityRecord","__experimentalSaveSpecifiedEntityEdits","saveSpecifiedEntityEdits","savedRecord","errorMessage","required","PatternsMenuItems","BlockSettingsMenuControls","selectedClientIds","PatternsManageButton","RenamePatternCategoryModal","existingCategories","useId","textControlRef","useRef","validationMessage","setValidationMessage","validationMessageId","speak","current","focus","patternCategories","find","existingCategory","newName","useSetPatternBindings","setAttributes","currentPostType","_attributes$metadata$","_usePrevious","hasPatternOverridesSource","getBlockBindingsSource","blocksStore","metadataName","prevMetadataName","usePrevious","useEffect","syncedAttributes","attributeName","updatedBindings","removeBindings","addBindings","ResetOverridesControl","useRegistry","patternWithOverrides","getBlockParentsByBlockName","BlockControls","group","ToolbarGroup","ToolbarButton","_editedRecord$blocks","editedRecord","resolveSelect","getEditedEntityRecord","newAttributes","assign","fromEntries","disabled","__experimentalIsFocusable","PATTERN_USER_CATEGORY","EXCLUDED_PATTERN_SOURCES"],"sourceRoot":""}