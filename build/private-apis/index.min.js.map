{"version":3,"file":"./build/private-apis/index.min.js","mappings":"mBACA,IAAIA,EAAsB,CCA1BA,EAAwB,CAACC,EAASC,KACjC,IAAI,IAAIC,KAAOD,EACXF,EAAoBI,EAAEF,EAAYC,KAASH,EAAoBI,EAAEH,EAASE,IAC5EE,OAAOC,eAAeL,EAASE,EAAK,CAAEI,YAAY,EAAMC,IAAKN,EAAWC,IAE1E,ECNDH,EAAwB,CAACS,EAAKC,IAAUL,OAAOM,UAAUC,eAAeC,KAAKJ,EAAKC,GCClFV,EAAyBC,IACH,oBAAXa,QAA0BA,OAAOC,aAC1CV,OAAOC,eAAeL,EAASa,OAAOC,YAAa,CAAEC,MAAO,WAE7DX,OAAOC,eAAeL,EAAS,aAAc,CAAEe,OAAO,GAAO,G,4ECM9D,MAAMC,EAAkC,CACvC,6BACA,0BACA,2BACA,oBACA,sBACA,wBACA,2BACA,uBACA,+BACA,kBACA,uBACA,uBACA,0BACA,oBACA,4BACA,uBACA,sBACA,yBACA,6BACA,oBACA,wBASKC,EAAwB,GAoB9B,IAAIC,EAMJ,IACCA,GAA8D,CAC/D,CAAE,MAAQC,GACTD,GAAsB,CACvB,CAUO,MAAME,EAAmDA,CAC/DC,EACAC,KAEA,IAAON,EAAgCO,SAAUD,GAChD,MAAM,IAAIE,MACR,mDAAmDF,uTAOtD,IACGJ,GACFD,EAAsBM,SAAUD,GAKhC,MAAM,IAAIE,MACR,mDAAmDF,mVAOtD,GAnDA,oHAmDKD,EACJ,MAAM,IAAIG,MACR,2XASH,OAFAP,EAAsBQ,KAAMH,GAErB,CACNI,OACAC,SACA,EA2BF,SAASD,EAAME,EAAQC,GACtB,IAAOD,EACN,MAAM,IAAIJ,MAAO,oCAETM,KAAaF,IACrBA,EAAQE,GAAc,CAAC,GAExBC,EAAWC,IAAKJ,EAAQE,GAAaD,EACtC,CAyBA,SAASF,EAAQC,GAChB,IAAOA,EACN,MAAM,IAAIJ,MAAO,sCAElB,KAASM,KAAaF,GACrB,MAAM,IAAIJ,MACT,wDAIF,OAAOO,EAAWxB,IAAKqB,EAAQE,GAChC,CAEA,MAAMC,EAAa,IAAIE,QAMjBH,EAAYjB,OAAQ,mB","sources":["webpack://wp/webpack/bootstrap","webpack://wp/webpack/runtime/define property getters","webpack://wp/webpack/runtime/hasOwnProperty shorthand","webpack://wp/webpack/runtime/make namespace object","../../packages/private-apis/src/implementation.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\r\n * wordpress/private-apis â€“ the utilities to enable private cross-package\r\n * exports of private APIs.\r\n *\r\n * This \"implementation.js\" file is needed for the sake of the unit tests. It\r\n * exports more than the public API of the package to aid in testing.\r\n */\r\n\r\n/**\r\n * The list of core modules allowed to opt-in to the private APIs.\r\n */\r\nconst CORE_MODULES_USING_PRIVATE_APIS = [\r\n\t'@wordpress/block-directory',\r\n\t'@wordpress/block-editor',\r\n\t'@wordpress/block-library',\r\n\t'@wordpress/blocks',\r\n\t'@wordpress/commands',\r\n\t'@wordpress/components',\r\n\t'@wordpress/core-commands',\r\n\t'@wordpress/core-data',\r\n\t'@wordpress/customize-widgets',\r\n\t'@wordpress/data',\r\n\t'@wordpress/edit-post',\r\n\t'@wordpress/edit-site',\r\n\t'@wordpress/edit-widgets',\r\n\t'@wordpress/editor',\r\n\t'@wordpress/format-library',\r\n\t'@wordpress/interface',\r\n\t'@wordpress/patterns',\r\n\t'@wordpress/preferences',\r\n\t'@wordpress/reusable-blocks',\r\n\t'@wordpress/router',\r\n\t'@wordpress/dataviews',\r\n];\r\n\r\n/**\r\n * A list of core modules that already opted-in to\r\n * the privateApis package.\r\n *\r\n * @type {string[]}\r\n */\r\nconst registeredPrivateApis = [];\r\n\r\n/*\r\n * Warning for theme and plugin developers.\r\n *\r\n * The use of private developer APIs is intended for use by WordPress Core\r\n * and the Gutenberg plugin exclusively.\r\n *\r\n * Dangerously opting in to using these APIs is NOT RECOMMENDED. Furthermore,\r\n * the WordPress Core philosophy to strive to maintain backward compatibility\r\n * for third-party developers DOES NOT APPLY to private APIs.\r\n *\r\n * THE CONSENT STRING FOR OPTING IN TO THESE APIS MAY CHANGE AT ANY TIME AND\r\n * WITHOUT NOTICE. THIS CHANGE WILL BREAK EXISTING THIRD-PARTY CODE. SUCH A\r\n * CHANGE MAY OCCUR IN EITHER A MAJOR OR MINOR RELEASE.\r\n */\r\nconst requiredConsent =\r\n\t'I know using unstable features means my theme or plugin will inevitably break in the next version of WordPress.';\r\n\r\n/** @type {boolean} */\r\nlet allowReRegistration;\r\n// The safety measure is meant for WordPress core where IS_WORDPRESS_CORE\r\n// is set to true.\r\n// For the general use-case, the re-registration should be allowed by default\r\n// Let's default to true, then. Try/catch will fall back to \"true\" even if the\r\n// environment variable is not explicitly defined.\r\ntry {\r\n\tallowReRegistration = process.env.IS_WORDPRESS_CORE ? false : true;\r\n} catch ( error ) {\r\n\tallowReRegistration = true;\r\n}\r\n\r\n/**\r\n * Called by a @wordpress package wishing to opt-in to accessing or exposing\r\n * private private APIs.\r\n *\r\n * @param {string} consent    The consent string.\r\n * @param {string} moduleName The name of the module that is opting in.\r\n * @return {{lock: typeof lock, unlock: typeof unlock}} An object containing the lock and unlock functions.\r\n */\r\nexport const __dangerousOptInToUnstableAPIsOnlyForCoreModules = (\r\n\tconsent,\r\n\tmoduleName\r\n) => {\r\n\tif ( ! CORE_MODULES_USING_PRIVATE_APIS.includes( moduleName ) ) {\r\n\t\tthrow new Error(\r\n\t\t\t`You tried to opt-in to unstable APIs as module \"${ moduleName }\". ` +\r\n\t\t\t\t'This feature is only for JavaScript modules shipped with WordPress core. ' +\r\n\t\t\t\t'Please do not use it in plugins and themes as the unstable APIs will be removed ' +\r\n\t\t\t\t'without a warning. If you ignore this error and depend on unstable features, ' +\r\n\t\t\t\t'your product will inevitably break on one of the next WordPress releases.'\r\n\t\t);\r\n\t}\r\n\tif (\r\n\t\t! allowReRegistration &&\r\n\t\tregisteredPrivateApis.includes( moduleName )\r\n\t) {\r\n\t\t// This check doesn't play well with Story Books / Hot Module Reloading\r\n\t\t// and isn't included in the Gutenberg plugin. It only matters in the\r\n\t\t// WordPress core release.\r\n\t\tthrow new Error(\r\n\t\t\t`You tried to opt-in to unstable APIs as module \"${ moduleName }\" which is already registered. ` +\r\n\t\t\t\t'This feature is only for JavaScript modules shipped with WordPress core. ' +\r\n\t\t\t\t'Please do not use it in plugins and themes as the unstable APIs will be removed ' +\r\n\t\t\t\t'without a warning. If you ignore this error and depend on unstable features, ' +\r\n\t\t\t\t'your product will inevitably break on one of the next WordPress releases.'\r\n\t\t);\r\n\t}\r\n\tif ( consent !== requiredConsent ) {\r\n\t\tthrow new Error(\r\n\t\t\t`You tried to opt-in to unstable APIs without confirming you know the consequences. ` +\r\n\t\t\t\t'This feature is only for JavaScript modules shipped with WordPress core. ' +\r\n\t\t\t\t'Please do not use it in plugins and themes as the unstable APIs will removed ' +\r\n\t\t\t\t'without a warning. If you ignore this error and depend on unstable features, ' +\r\n\t\t\t\t'your product will inevitably break on the next WordPress release.'\r\n\t\t);\r\n\t}\r\n\tregisteredPrivateApis.push( moduleName );\r\n\r\n\treturn {\r\n\t\tlock,\r\n\t\tunlock,\r\n\t};\r\n};\r\n\r\n/**\r\n * Binds private data to an object.\r\n * It does not alter the passed object in any way, only\r\n * registers it in an internal map of private data.\r\n *\r\n * The private data can't be accessed by any other means\r\n * than the `unlock` function.\r\n *\r\n * @example\r\n * ```js\r\n * const object = {};\r\n * const privateData = { a: 1 };\r\n * lock( object, privateData );\r\n *\r\n * object\r\n * // {}\r\n *\r\n * unlock( object );\r\n * // { a: 1 }\r\n * ```\r\n *\r\n * @param {any} object      The object to bind the private data to.\r\n * @param {any} privateData The private data to bind to the object.\r\n */\r\nfunction lock( object, privateData ) {\r\n\tif ( ! object ) {\r\n\t\tthrow new Error( 'Cannot lock an undefined object.' );\r\n\t}\r\n\tif ( ! ( __private in object ) ) {\r\n\t\tobject[ __private ] = {};\r\n\t}\r\n\tlockedData.set( object[ __private ], privateData );\r\n}\r\n\r\n/**\r\n * Unlocks the private data bound to an object.\r\n *\r\n * It does not alter the passed object in any way, only\r\n * returns the private data paired with it using the `lock()`\r\n * function.\r\n *\r\n * @example\r\n * ```js\r\n * const object = {};\r\n * const privateData = { a: 1 };\r\n * lock( object, privateData );\r\n *\r\n * object\r\n * // {}\r\n *\r\n * unlock( object );\r\n * // { a: 1 }\r\n * ```\r\n *\r\n * @param {any} object The object to unlock the private data from.\r\n * @return {any} The private data bound to the object.\r\n */\r\nfunction unlock( object ) {\r\n\tif ( ! object ) {\r\n\t\tthrow new Error( 'Cannot unlock an undefined object.' );\r\n\t}\r\n\tif ( ! ( __private in object ) ) {\r\n\t\tthrow new Error(\r\n\t\t\t'Cannot unlock an object that was not locked before. '\r\n\t\t);\r\n\t}\r\n\r\n\treturn lockedData.get( object[ __private ] );\r\n}\r\n\r\nconst lockedData = new WeakMap();\r\n\r\n/**\r\n * Used by lock() and unlock() to uniquely identify the private data\r\n * related to a containing object.\r\n */\r\nconst __private = Symbol( 'Private API ID' );\r\n\r\n// Unit tests utilities:\r\n\r\n/**\r\n * Private function to allow the unit tests to allow\r\n * a mock module to access the private APIs.\r\n *\r\n * @param {string} name The name of the module.\r\n */\r\nexport function allowCoreModule( name ) {\r\n\tCORE_MODULES_USING_PRIVATE_APIS.push( name );\r\n}\r\n\r\n/**\r\n * Private function to allow the unit tests to set\r\n * a custom list of allowed modules.\r\n */\r\nexport function resetAllowedCoreModules() {\r\n\twhile ( CORE_MODULES_USING_PRIVATE_APIS.length ) {\r\n\t\tCORE_MODULES_USING_PRIVATE_APIS.pop();\r\n\t}\r\n}\r\n/**\r\n * Private function to allow the unit tests to reset\r\n * the list of registered private apis.\r\n */\r\nexport function resetRegisteredPrivateApis() {\r\n\twhile ( registeredPrivateApis.length ) {\r\n\t\tregisteredPrivateApis.pop();\r\n\t}\r\n}\r\n"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","CORE_MODULES_USING_PRIVATE_APIS","registeredPrivateApis","allowReRegistration","error","__dangerousOptInToUnstableAPIsOnlyForCoreModules","consent","moduleName","includes","Error","push","lock","unlock","object","privateData","__private","lockedData","set","WeakMap"],"sourceRoot":""}