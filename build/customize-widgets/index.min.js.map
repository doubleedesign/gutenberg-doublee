{"version":3,"file":"./build/customize-widgets/index.min.js","mappings":"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","sources":["webpack://wp/./node_modules/classnames/index.js","webpack://wp/./node_modules/fast-deep-equal/es6/index.js","webpack://wp/webpack/bootstrap","webpack://wp/webpack/runtime/compat get default export","webpack://wp/webpack/runtime/define property getters","webpack://wp/webpack/runtime/hasOwnProperty shorthand","webpack://wp/webpack/runtime/make namespace object","webpack://wp/external window \"React\"","webpack://wp/external window [\"wp\",\"element\"]","webpack://wp/external window [\"wp\",\"blockLibrary\"]","webpack://wp/external window [\"wp\",\"widgets\"]","webpack://wp/external window [\"wp\",\"blocks\"]","webpack://wp/external window [\"wp\",\"data\"]","webpack://wp/external window [\"wp\",\"preferences\"]","webpack://wp/external window [\"wp\",\"components\"]","webpack://wp/external window [\"wp\",\"i18n\"]","webpack://wp/external window [\"wp\",\"blockEditor\"]","webpack://wp/external window [\"wp\",\"compose\"]","webpack://wp/external window [\"wp\",\"hooks\"]","../../packages/customize-widgets/src/components/error-boundary/index.js","webpack://wp/external window [\"wp\",\"coreData\"]","webpack://wp/external window [\"wp\",\"mediaUtils\"]","../../packages/customize-widgets/src/components/block-inspector-button/index.js","webpack://wp/external window [\"wp\",\"keycodes\"]","webpack://wp/external window [\"wp\",\"primitives\"]","../../packages/icons/src/library/undo.js","../../packages/icons/src/library/redo.js","../../packages/icons/src/library/plus.js","../../packages/icons/src/library/close-small.js","../../packages/customize-widgets/src/store/reducer.js","../../packages/customize-widgets/src/store/selectors.js","../../packages/customize-widgets/src/store/actions.js","../../packages/customize-widgets/src/store/constants.js","../../packages/customize-widgets/src/store/index.js","../../packages/customize-widgets/src/components/inserter/index.js","../../packages/icons/src/library/more-vertical.js","../../packages/icons/src/library/external.js","webpack://wp/external window [\"wp\",\"keyboardShortcuts\"]","../../packages/customize-widgets/src/components/keyboard-shortcut-help-modal/config.js","../../packages/customize-widgets/src/components/keyboard-shortcut-help-modal/shortcut.js","../../packages/customize-widgets/src/components/keyboard-shortcut-help-modal/dynamic-shortcut.js","../../packages/customize-widgets/src/components/keyboard-shortcut-help-modal/index.js","../../packages/customize-widgets/src/components/more-menu/index.js","../../packages/customize-widgets/src/components/header/index.js","webpack://wp/external window [\"wp\",\"isShallowEqual\"]","../../packages/customize-widgets/src/utils.js","../../packages/customize-widgets/src/components/focus-control/index.js","webpack://wp/external window [\"wp\",\"privateApis\"]","../../packages/customize-widgets/src/lock-unlock.js","../../packages/customize-widgets/src/components/sidebar-block-editor/sidebar-editor-provider.js","../../packages/customize-widgets/src/components/sidebar-block-editor/use-sidebar-block-editor.js","../../packages/customize-widgets/src/components/focus-control/use-blocks-focus-control.js","../../packages/customize-widgets/src/components/welcome-guide/index.js","../../packages/customize-widgets/src/components/keyboard-shortcuts/index.js","../../packages/customize-widgets/src/components/block-appender/index.js","../../packages/customize-widgets/src/components/sidebar-block-editor/index.js","../../packages/customize-widgets/src/components/inserter/use-inserter.js","../../packages/customize-widgets/src/components/sidebar-controls/index.js","../../packages/customize-widgets/src/components/customize-widgets/index.js","../../packages/customize-widgets/src/components/customize-widgets/use-clear-selected-block.js","../../packages/customize-widgets/src/controls/sidebar-section.js","../../packages/customize-widgets/src/components/sidebar-block-editor/sidebar-adapter.js","webpack://wp/external window [\"wp\",\"dom\"]","../../packages/customize-widgets/src/controls/sidebar-control.js","../../packages/customize-widgets/src/filters/move-to-sidebar.js","../../packages/customize-widgets/src/filters/replace-media-upload.js","../../packages/customize-widgets/src/filters/wide-widget-display.js","../../packages/customize-widgets/src/index.js","../../packages/customize-widgets/src/controls/inserter-outer-section.js","../../packages/customize-widgets/src/controls/inspector-section.js"],"sourcesContent":["/*!\n  Copyright (c) 2018 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames() {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg)) {\n\t\t\t\tif (arg.length) {\n\t\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\t\tif (inner) {\n\t\t\t\t\t\tclasses.push(inner);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tif (arg.toString === Object.prototype.toString) {\n\t\t\t\t\tfor (var key in arg) {\n\t\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tclasses.push(arg.toString());\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","'use strict';\n\n// do not edit .js files directly - edit src/index.jst\n\n\n  var envHasBigInt64Array = typeof BigInt64Array !== 'undefined';\n\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n\n    if ((a instanceof Map) && (b instanceof Map)) {\n      if (a.size !== b.size) return false;\n      for (i of a.entries())\n        if (!b.has(i[0])) return false;\n      for (i of a.entries())\n        if (!equal(i[1], b.get(i[0]))) return false;\n      return true;\n    }\n\n    if ((a instanceof Set) && (b instanceof Set)) {\n      if (a.size !== b.size) return false;\n      for (i of a.entries())\n        if (!b.has(i[0])) return false;\n      return true;\n    }\n\n    if (ArrayBuffer.isView(a) && ArrayBuffer.isView(b)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (a[i] !== b[i]) return false;\n      return true;\n    }\n\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a!==a && b!==b;\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"React\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"element\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"blockLibrary\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"widgets\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"blocks\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"data\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"preferences\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"components\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"i18n\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"blockEditor\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"compose\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"hooks\"];","/**\r\n * WordPress dependencies\r\n */\r\nimport { Component } from '@wordpress/element';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { Button } from '@wordpress/components';\r\nimport { Warning } from '@wordpress/block-editor';\r\nimport { useCopyToClipboard } from '@wordpress/compose';\r\nimport { doAction } from '@wordpress/hooks';\r\n\r\nfunction CopyButton( { text, children } ) {\r\n\tconst ref = useCopyToClipboard( text );\r\n\treturn (\r\n\t\t<Button variant=\"secondary\" ref={ ref }>\r\n\t\t\t{ children }\r\n\t\t</Button>\r\n\t);\r\n}\r\n\r\nexport default class ErrorBoundary extends Component {\r\n\tconstructor() {\r\n\t\tsuper( ...arguments );\r\n\t\tthis.state = {\r\n\t\t\terror: null,\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidCatch( error ) {\r\n\t\tthis.setState( { error } );\r\n\r\n\t\tdoAction( 'editor.ErrorBoundary.errorLogged', error );\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { error } = this.state;\r\n\t\tif ( ! error ) {\r\n\t\t\treturn this.props.children;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<Warning\r\n\t\t\t\tclassName=\"customize-widgets-error-boundary\"\r\n\t\t\t\tactions={ [\r\n\t\t\t\t\t<CopyButton key=\"copy-error\" text={ error.stack }>\r\n\t\t\t\t\t\t{ __( 'Copy Error' ) }\r\n\t\t\t\t\t</CopyButton>,\r\n\t\t\t\t] }\r\n\t\t\t>\r\n\t\t\t\t{ __( 'The editor has encountered an unexpected error.' ) }\r\n\t\t\t</Warning>\r\n\t\t);\r\n\t}\r\n}\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"coreData\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"mediaUtils\"];","/**\r\n * WordPress dependencies\r\n */\r\nimport { useMemo } from '@wordpress/element';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { MenuItem } from '@wordpress/components';\r\nimport { useSelect } from '@wordpress/data';\r\nimport { store as blockEditorStore } from '@wordpress/block-editor';\r\n\r\nfunction BlockInspectorButton( { inspector, closeMenu, ...props } ) {\r\n\tconst selectedBlockClientId = useSelect(\r\n\t\t( select ) => select( blockEditorStore ).getSelectedBlockClientId(),\r\n\t\t[]\r\n\t);\r\n\r\n\tconst selectedBlock = useMemo(\r\n\t\t() => document.getElementById( `block-${ selectedBlockClientId }` ),\r\n\t\t[ selectedBlockClientId ]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<MenuItem\r\n\t\t\tonClick={ () => {\r\n\t\t\t\t// Open the inspector.\r\n\t\t\t\tinspector.open( {\r\n\t\t\t\t\treturnFocusWhenClose: selectedBlock,\r\n\t\t\t\t} );\r\n\t\t\t\t// Then close the dropdown menu.\r\n\t\t\t\tcloseMenu();\r\n\t\t\t} }\r\n\t\t\t{ ...props }\r\n\t\t>\r\n\t\t\t{ __( 'Show more settings' ) }\r\n\t\t</MenuItem>\r\n\t);\r\n}\r\n\r\nexport default BlockInspectorButton;\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"keycodes\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"primitives\"];","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst undo = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M18.3 11.7c-.6-.6-1.4-.9-2.3-.9H6.7l2.9-3.3-1.1-1-4.5 5L8.5 16l1-1-2.7-2.7H16c.5 0 .9.2 1.3.5 1 1 1 3.4 1 4.5v.3h1.5v-.2c0-1.5 0-4.3-1.5-5.7z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default undo;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst redo = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M15.6 6.5l-1.1 1 2.9 3.3H8c-.9 0-1.7.3-2.3.9-1.4 1.5-1.4 4.2-1.4 5.6v.2h1.5v-.3c0-1.1 0-3.5 1-4.5.3-.3.7-.5 1.3-.5h9.2L14.5 15l1.1 1.1 4.6-4.6-4.6-5z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default redo;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst plus = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M11 12.5V17.5H12.5V12.5H17.5V11H12.5V6H11V11H6V12.5H11Z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default plus;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst closeSmall = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default closeSmall;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { combineReducers } from '@wordpress/data';\r\n\r\n/**\r\n * Reducer tracking whether the inserter is open.\r\n *\r\n * @param {boolean|Object} state\r\n * @param {Object}         action\r\n */\r\nfunction blockInserterPanel( state = false, action ) {\r\n\tswitch ( action.type ) {\r\n\t\tcase 'SET_IS_INSERTER_OPENED':\r\n\t\t\treturn action.value;\r\n\t}\r\n\treturn state;\r\n}\r\n\r\nexport default combineReducers( {\r\n\tblockInserterPanel,\r\n} );\r\n","const EMPTY_INSERTION_POINT = {\r\n\trootClientId: undefined,\r\n\tinsertionIndex: undefined,\r\n};\r\n\r\n/**\r\n * Returns true if the inserter is opened.\r\n *\r\n * @param {Object} state Global application state.\r\n *\r\n * @example\r\n * ```js\r\n * import { store as customizeWidgetsStore } from '@wordpress/customize-widgets';\r\n * import { __ } from '@wordpress/i18n';\r\n * import { useSelect } from '@wordpress/data';\r\n *\r\n * const ExampleComponent = () => {\r\n *    const { isInserterOpened } = useSelect(\r\n *        ( select ) => select( customizeWidgetsStore ),\r\n *        []\r\n *    );\r\n *\r\n *    return isInserterOpened()\r\n *        ? __( 'Inserter is open' )\r\n *        : __( 'Inserter is closed.' );\r\n * };\r\n * ```\r\n *\r\n * @return {boolean} Whether the inserter is opened.\r\n */\r\nexport function isInserterOpened( state ) {\r\n\treturn !! state.blockInserterPanel;\r\n}\r\n\r\n/**\r\n * Get the insertion point for the inserter.\r\n *\r\n * @param {Object} state Global application state.\r\n *\r\n * @return {Object} The root client ID and index to insert at.\r\n */\r\nexport function __experimentalGetInsertionPoint( state ) {\r\n\tif ( typeof state.blockInserterPanel === 'boolean' ) {\r\n\t\treturn EMPTY_INSERTION_POINT;\r\n\t}\r\n\r\n\treturn state.blockInserterPanel;\r\n}\r\n","/**\r\n * Returns an action object used to open/close the inserter.\r\n *\r\n * @param {boolean|Object} value                Whether the inserter should be\r\n *                                              opened (true) or closed (false).\r\n *                                              To specify an insertion point,\r\n *                                              use an object.\r\n * @param {string}         value.rootClientId   The root client ID to insert at.\r\n * @param {number}         value.insertionIndex The index to insert at.\r\n *\r\n * @example\r\n * ```js\r\n * import { useState } from 'react';\r\n * import { store as customizeWidgetsStore } from '@wordpress/customize-widgets';\r\n * import { __ } from '@wordpress/i18n';\r\n * import { useDispatch } from '@wordpress/data';\r\n * import { Button } from '@wordpress/components';\r\n *\r\n * const ExampleComponent = () => {\r\n *   const { setIsInserterOpened } = useDispatch( customizeWidgetsStore );\r\n *   const [ isOpen, setIsOpen ] = useState( false );\r\n *\r\n *    return (\r\n *        <Button\r\n *            onClick={ () => {\r\n *                setIsInserterOpened( ! isOpen );\r\n *                setIsOpen( ! isOpen );\r\n *            } }\r\n *        >\r\n *            { __( 'Open/close inserter' ) }\r\n *        </Button>\r\n *    );\r\n * };\r\n * ```\r\n *\r\n * @return {Object} Action object.\r\n */\r\nexport function setIsInserterOpened( value ) {\r\n\treturn {\r\n\t\ttype: 'SET_IS_INSERTER_OPENED',\r\n\t\tvalue,\r\n\t};\r\n}\r\n","/**\r\n * Module Constants\r\n */\r\nexport const STORE_NAME = 'core/customize-widgets';\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { createReduxStore, register } from '@wordpress/data';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport reducer from './reducer';\r\nimport * as selectors from './selectors';\r\nimport * as actions from './actions';\r\nimport { STORE_NAME } from './constants';\r\n\r\n/**\r\n * Block editor data store configuration.\r\n *\r\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/data/README.md#registering-a-store\r\n *\r\n * @type {Object}\r\n */\r\nconst storeConfig = {\r\n\treducer,\r\n\tselectors,\r\n\tactions,\r\n};\r\n\r\n/**\r\n * Store definition for the edit widgets namespace.\r\n *\r\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/data/README.md#createReduxStore\r\n *\r\n * @type {Object}\r\n */\r\nexport const store = createReduxStore( STORE_NAME, storeConfig );\r\nregister( store );\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { __ } from '@wordpress/i18n';\r\nimport { __experimentalLibrary as Library } from '@wordpress/block-editor';\r\nimport { Button } from '@wordpress/components';\r\nimport { useInstanceId } from '@wordpress/compose';\r\nimport { useSelect } from '@wordpress/data';\r\nimport { closeSmall } from '@wordpress/icons';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as customizeWidgetsStore } from '../../store';\r\n\r\nfunction Inserter( { setIsOpened } ) {\r\n\tconst inserterTitleId = useInstanceId(\r\n\t\tInserter,\r\n\t\t'customize-widget-layout__inserter-panel-title'\r\n\t);\r\n\tconst insertionPoint = useSelect(\r\n\t\t( select ) =>\r\n\t\t\tselect( customizeWidgetsStore ).__experimentalGetInsertionPoint(),\r\n\t\t[]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName=\"customize-widgets-layout__inserter-panel\"\r\n\t\t\taria-labelledby={ inserterTitleId }\r\n\t\t>\r\n\t\t\t<div className=\"customize-widgets-layout__inserter-panel-header\">\r\n\t\t\t\t<h2\r\n\t\t\t\t\tid={ inserterTitleId }\r\n\t\t\t\t\tclassName=\"customize-widgets-layout__inserter-panel-header-title\"\r\n\t\t\t\t>\r\n\t\t\t\t\t{ __( 'Add a block' ) }\r\n\t\t\t\t</h2>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tclassName=\"customize-widgets-layout__inserter-panel-header-close-button\"\r\n\t\t\t\t\ticon={ closeSmall }\r\n\t\t\t\t\tonClick={ () => setIsOpened( false ) }\r\n\t\t\t\t\taria-label={ __( 'Close inserter' ) }\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"customize-widgets-layout__inserter-panel-content\">\r\n\t\t\t\t<Library\r\n\t\t\t\t\trootClientId={ insertionPoint.rootClientId }\r\n\t\t\t\t\t__experimentalInsertionIndex={\r\n\t\t\t\t\t\tinsertionPoint.insertionIndex\r\n\t\t\t\t\t}\r\n\t\t\t\t\tshowInserterHelpPanel\r\n\t\t\t\t\tonSelect={ () => setIsOpened( false ) }\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Inserter;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst moreVertical = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M13 19h-2v-2h2v2zm0-6h-2v-2h2v2zm0-6h-2V5h2v2z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default moreVertical;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { Path, SVG } from '@wordpress/primitives';\r\n\r\nconst external = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M19.5 4.5h-7V6h4.44l-5.97 5.97 1.06 1.06L18 7.06v4.44h1.5v-7Zm-13 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-3H17v3a.5.5 0 0 1-.5.5h-10a.5.5 0 0 1-.5-.5v-10a.5.5 0 0 1 .5-.5h3V5.5h-3Z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default external;\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"keyboardShortcuts\"];","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\n\nexport const textFormattingShortcuts = [\n\t{\n\t\tkeyCombination: { modifier: 'primary', character: 'b' },\n\t\tdescription: __( 'Make the selected text bold.' ),\n\t},\n\t{\n\t\tkeyCombination: { modifier: 'primary', character: 'i' },\n\t\tdescription: __( 'Make the selected text italic.' ),\n\t},\n\t{\n\t\tkeyCombination: { modifier: 'primary', character: 'k' },\n\t\tdescription: __( 'Convert the selected text into a link.' ),\n\t},\n\t{\n\t\tkeyCombination: { modifier: 'primaryShift', character: 'k' },\n\t\tdescription: __( 'Remove a link.' ),\n\t},\n\t{\n\t\tkeyCombination: { character: '[[' },\n\t\tdescription: __( 'Insert a link to a post or page.' ),\n\t},\n\t{\n\t\tkeyCombination: { modifier: 'primary', character: 'u' },\n\t\tdescription: __( 'Underline the selected text.' ),\n\t},\n\t{\n\t\tkeyCombination: { modifier: 'access', character: 'd' },\n\t\tdescription: __( 'Strikethrough the selected text.' ),\n\t},\n\t{\n\t\tkeyCombination: { modifier: 'access', character: 'x' },\n\t\tdescription: __( 'Make the selected text inline code.' ),\n\t},\n\t{\n\t\tkeyCombination: { modifier: 'access', character: '0' },\n\t\tdescription: __( 'Convert the current heading to a paragraph.' ),\n\t},\n\t{\n\t\tkeyCombination: { modifier: 'access', character: '1-6' },\n\t\tdescription: __(\n\t\t\t'Convert the current paragraph or heading to a heading of level 1 to 6.'\n\t\t),\n\t},\n\t{\n\t\tkeyCombination: { modifier: 'primaryShift', character: 'SPACE' },\n\t\tdescription: __( 'Add non breaking space.' ),\n\t},\n];\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { Fragment } from '@wordpress/element';\r\nimport { displayShortcutList, shortcutAriaLabel } from '@wordpress/keycodes';\r\n\r\nfunction KeyCombination( { keyCombination, forceAriaLabel } ) {\r\n\tconst shortcut = keyCombination.modifier\r\n\t\t? displayShortcutList[ keyCombination.modifier ](\r\n\t\t\t\tkeyCombination.character\r\n\t\t  )\r\n\t\t: keyCombination.character;\r\n\tconst ariaLabel = keyCombination.modifier\r\n\t\t? shortcutAriaLabel[ keyCombination.modifier ](\r\n\t\t\t\tkeyCombination.character\r\n\t\t  )\r\n\t\t: keyCombination.character;\r\n\r\n\treturn (\r\n\t\t<kbd\r\n\t\t\tclassName=\"customize-widgets-keyboard-shortcut-help-modal__shortcut-key-combination\"\r\n\t\t\taria-label={ forceAriaLabel || ariaLabel }\r\n\t\t>\r\n\t\t\t{ ( Array.isArray( shortcut ) ? shortcut : [ shortcut ] ).map(\r\n\t\t\t\t( character, index ) => {\r\n\t\t\t\t\tif ( character === '+' ) {\r\n\t\t\t\t\t\treturn <Fragment key={ index }>{ character }</Fragment>;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<kbd\r\n\t\t\t\t\t\t\tkey={ index }\r\n\t\t\t\t\t\t\tclassName=\"customize-widgets-keyboard-shortcut-help-modal__shortcut-key\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{ character }\r\n\t\t\t\t\t\t</kbd>\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t) }\r\n\t\t</kbd>\r\n\t);\r\n}\r\n\r\nfunction Shortcut( { description, keyCombination, aliases = [], ariaLabel } ) {\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div className=\"customize-widgets-keyboard-shortcut-help-modal__shortcut-description\">\r\n\t\t\t\t{ description }\r\n\t\t\t</div>\r\n\t\t\t<div className=\"customize-widgets-keyboard-shortcut-help-modal__shortcut-term\">\r\n\t\t\t\t<KeyCombination\r\n\t\t\t\t\tkeyCombination={ keyCombination }\r\n\t\t\t\t\tforceAriaLabel={ ariaLabel }\r\n\t\t\t\t/>\r\n\t\t\t\t{ aliases.map( ( alias, index ) => (\r\n\t\t\t\t\t<KeyCombination\r\n\t\t\t\t\t\tkeyCombination={ alias }\r\n\t\t\t\t\t\tforceAriaLabel={ ariaLabel }\r\n\t\t\t\t\t\tkey={ index }\r\n\t\t\t\t\t/>\r\n\t\t\t\t) ) }\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default Shortcut;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useSelect } from '@wordpress/data';\r\nimport { store as keyboardShortcutsStore } from '@wordpress/keyboard-shortcuts';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport Shortcut from './shortcut';\r\n\r\nfunction DynamicShortcut( { name } ) {\r\n\tconst { keyCombination, description, aliases } = useSelect(\r\n\t\t( select ) => {\r\n\t\t\tconst {\r\n\t\t\t\tgetShortcutKeyCombination,\r\n\t\t\t\tgetShortcutDescription,\r\n\t\t\t\tgetShortcutAliases,\r\n\t\t\t} = select( keyboardShortcutsStore );\r\n\r\n\t\t\treturn {\r\n\t\t\t\tkeyCombination: getShortcutKeyCombination( name ),\r\n\t\t\t\taliases: getShortcutAliases( name ),\r\n\t\t\t\tdescription: getShortcutDescription( name ),\r\n\t\t\t};\r\n\t\t},\r\n\t\t[ name ]\r\n\t);\r\n\r\n\tif ( ! keyCombination ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Shortcut\r\n\t\t\tkeyCombination={ keyCombination }\r\n\t\t\tdescription={ description }\r\n\t\t\taliases={ aliases }\r\n\t\t/>\r\n\t);\r\n}\r\n\r\nexport default DynamicShortcut;\r\n","/**\r\n * External dependencies\r\n */\r\nimport classnames from 'classnames';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { Modal } from '@wordpress/components';\r\nimport { __ } from '@wordpress/i18n';\r\nimport {\r\n\tuseShortcut,\r\n\tstore as keyboardShortcutsStore,\r\n} from '@wordpress/keyboard-shortcuts';\r\nimport { useDispatch, useSelect } from '@wordpress/data';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { textFormattingShortcuts } from './config';\r\nimport Shortcut from './shortcut';\r\nimport DynamicShortcut from './dynamic-shortcut';\r\n\r\nconst ShortcutList = ( { shortcuts } ) => (\r\n\t/*\r\n\t * Disable reason: The `list` ARIA role is redundant but\r\n\t * Safari+VoiceOver won't announce the list otherwise.\r\n\t */\r\n\t/* eslint-disable jsx-a11y/no-redundant-roles */\r\n\t<ul\r\n\t\tclassName=\"customize-widgets-keyboard-shortcut-help-modal__shortcut-list\"\r\n\t\trole=\"list\"\r\n\t>\r\n\t\t{ shortcuts.map( ( shortcut, index ) => (\r\n\t\t\t<li\r\n\t\t\t\tclassName=\"customize-widgets-keyboard-shortcut-help-modal__shortcut\"\r\n\t\t\t\tkey={ index }\r\n\t\t\t>\r\n\t\t\t\t{ typeof shortcut === 'string' ? (\r\n\t\t\t\t\t<DynamicShortcut name={ shortcut } />\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<Shortcut { ...shortcut } />\r\n\t\t\t\t) }\r\n\t\t\t</li>\r\n\t\t) ) }\r\n\t</ul>\r\n\t/* eslint-enable jsx-a11y/no-redundant-roles */\r\n);\r\n\r\nconst ShortcutSection = ( { title, shortcuts, className } ) => (\r\n\t<section\r\n\t\tclassName={ classnames(\r\n\t\t\t'customize-widgets-keyboard-shortcut-help-modal__section',\r\n\t\t\tclassName\r\n\t\t) }\r\n\t>\r\n\t\t{ !! title && (\r\n\t\t\t<h2 className=\"customize-widgets-keyboard-shortcut-help-modal__section-title\">\r\n\t\t\t\t{ title }\r\n\t\t\t</h2>\r\n\t\t) }\r\n\t\t<ShortcutList shortcuts={ shortcuts } />\r\n\t</section>\r\n);\r\n\r\nconst ShortcutCategorySection = ( {\r\n\ttitle,\r\n\tcategoryName,\r\n\tadditionalShortcuts = [],\r\n} ) => {\r\n\tconst categoryShortcuts = useSelect(\r\n\t\t( select ) => {\r\n\t\t\treturn select( keyboardShortcutsStore ).getCategoryShortcuts(\r\n\t\t\t\tcategoryName\r\n\t\t\t);\r\n\t\t},\r\n\t\t[ categoryName ]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<ShortcutSection\r\n\t\t\ttitle={ title }\r\n\t\t\tshortcuts={ categoryShortcuts.concat( additionalShortcuts ) }\r\n\t\t/>\r\n\t);\r\n};\r\n\r\nexport default function KeyboardShortcutHelpModal( {\r\n\tisModalActive,\r\n\ttoggleModal,\r\n} ) {\r\n\tconst { registerShortcut } = useDispatch( keyboardShortcutsStore );\r\n\tregisterShortcut( {\r\n\t\tname: 'core/customize-widgets/keyboard-shortcuts',\r\n\t\tcategory: 'main',\r\n\t\tdescription: __( 'Display these keyboard shortcuts.' ),\r\n\t\tkeyCombination: {\r\n\t\t\tmodifier: 'access',\r\n\t\t\tcharacter: 'h',\r\n\t\t},\r\n\t} );\r\n\r\n\tuseShortcut( 'core/customize-widgets/keyboard-shortcuts', toggleModal );\r\n\r\n\tif ( ! isModalActive ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Modal\r\n\t\t\tclassName=\"customize-widgets-keyboard-shortcut-help-modal\"\r\n\t\t\ttitle={ __( 'Keyboard shortcuts' ) }\r\n\t\t\tonRequestClose={ toggleModal }\r\n\t\t>\r\n\t\t\t<ShortcutSection\r\n\t\t\t\tclassName=\"customize-widgets-keyboard-shortcut-help-modal__main-shortcuts\"\r\n\t\t\t\tshortcuts={ [ 'core/customize-widgets/keyboard-shortcuts' ] }\r\n\t\t\t/>\r\n\t\t\t<ShortcutCategorySection\r\n\t\t\t\ttitle={ __( 'Global shortcuts' ) }\r\n\t\t\t\tcategoryName=\"global\"\r\n\t\t\t/>\r\n\r\n\t\t\t<ShortcutCategorySection\r\n\t\t\t\ttitle={ __( 'Selection shortcuts' ) }\r\n\t\t\t\tcategoryName=\"selection\"\r\n\t\t\t/>\r\n\r\n\t\t\t<ShortcutCategorySection\r\n\t\t\t\ttitle={ __( 'Block shortcuts' ) }\r\n\t\t\t\tcategoryName=\"block\"\r\n\t\t\t\tadditionalShortcuts={ [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tkeyCombination: { character: '/' },\r\n\t\t\t\t\t\tdescription: __(\r\n\t\t\t\t\t\t\t'Change the block type after adding a new paragraph.'\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t\t/* translators: The forward-slash character. e.g. '/'. */\r\n\t\t\t\t\t\tariaLabel: __( 'Forward-slash' ),\r\n\t\t\t\t\t},\r\n\t\t\t\t] }\r\n\t\t\t/>\r\n\t\t\t<ShortcutSection\r\n\t\t\t\ttitle={ __( 'Text formatting' ) }\r\n\t\t\t\tshortcuts={ textFormattingShortcuts }\r\n\t\t\t/>\r\n\t\t</Modal>\r\n\t);\r\n}\r\n","/**\n * WordPress dependencies\n */\nimport {\n\tMenuGroup,\n\tMenuItem,\n\tToolbarDropdownMenu,\n\tVisuallyHidden,\n} from '@wordpress/components';\nimport { useState } from '@wordpress/element';\nimport { __, _x } from '@wordpress/i18n';\nimport { external, moreVertical } from '@wordpress/icons';\nimport { displayShortcut } from '@wordpress/keycodes';\nimport { useShortcut } from '@wordpress/keyboard-shortcuts';\nimport { PreferenceToggleMenuItem } from '@wordpress/preferences';\n\n/**\n * Internal dependencies\n */\nimport KeyboardShortcutHelpModal from '../keyboard-shortcut-help-modal';\n\nexport default function MoreMenu() {\n\tconst [\n\t\tisKeyboardShortcutsModalActive,\n\t\tsetIsKeyboardShortcutsModalVisible,\n\t] = useState( false );\n\tconst toggleKeyboardShortcutsModal = () =>\n\t\tsetIsKeyboardShortcutsModalVisible( ! isKeyboardShortcutsModalActive );\n\n\tuseShortcut(\n\t\t'core/customize-widgets/keyboard-shortcuts',\n\t\ttoggleKeyboardShortcutsModal\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t<ToolbarDropdownMenu\n\t\t\t\ticon={ moreVertical }\n\t\t\t\tlabel={ __( 'Options' ) }\n\t\t\t\tpopoverProps={ {\n\t\t\t\t\tplacement: 'bottom-end',\n\t\t\t\t\tclassName: 'more-menu-dropdown__content',\n\t\t\t\t} }\n\t\t\t\ttoggleProps={ {\n\t\t\t\t\ttooltipPosition: 'bottom',\n\t\t\t\t\tsize: 'compact',\n\t\t\t\t} }\n\t\t\t>\n\t\t\t\t{ () => (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<MenuGroup label={ _x( 'View', 'noun' ) }>\n\t\t\t\t\t\t\t<PreferenceToggleMenuItem\n\t\t\t\t\t\t\t\tscope=\"core/customize-widgets\"\n\t\t\t\t\t\t\t\tname=\"fixedToolbar\"\n\t\t\t\t\t\t\t\tlabel={ __( 'Top toolbar' ) }\n\t\t\t\t\t\t\t\tinfo={ __(\n\t\t\t\t\t\t\t\t\t'Access all block and document tools in a single place'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\tmessageActivated={ __(\n\t\t\t\t\t\t\t\t\t'Top toolbar activated'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\tmessageDeactivated={ __(\n\t\t\t\t\t\t\t\t\t'Top toolbar deactivated'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</MenuGroup>\n\t\t\t\t\t\t<MenuGroup label={ __( 'Tools' ) }>\n\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\t\tsetIsKeyboardShortcutsModalVisible( true );\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\tshortcut={ displayShortcut.access( 'h' ) }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ __( 'Keyboard shortcuts' ) }\n\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t<PreferenceToggleMenuItem\n\t\t\t\t\t\t\t\tscope=\"core/customize-widgets\"\n\t\t\t\t\t\t\t\tname=\"welcomeGuide\"\n\t\t\t\t\t\t\t\tlabel={ __( 'Welcome Guide' ) }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\trole=\"menuitem\"\n\t\t\t\t\t\t\t\ticon={ external }\n\t\t\t\t\t\t\t\thref={ __(\n\t\t\t\t\t\t\t\t\t'https://wordpress.org/documentation/article/block-based-widgets-editor/'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\trel=\"noopener noreferrer\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ __( 'Help' ) }\n\t\t\t\t\t\t\t\t<VisuallyHidden as=\"span\">\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t/* translators: accessibility text */\n\t\t\t\t\t\t\t\t\t\t__( '(opens in a new tab)' )\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</VisuallyHidden>\n\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t</MenuGroup>\n\t\t\t\t\t\t<MenuGroup label={ __( 'Preferences' ) }>\n\t\t\t\t\t\t\t<PreferenceToggleMenuItem\n\t\t\t\t\t\t\t\tscope=\"core/customize-widgets\"\n\t\t\t\t\t\t\t\tname=\"keepCaretInsideBlock\"\n\t\t\t\t\t\t\t\tlabel={ __(\n\t\t\t\t\t\t\t\t\t'Contain text cursor inside block'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\tinfo={ __(\n\t\t\t\t\t\t\t\t\t'Aids screen readers by stopping text caret from leaving blocks.'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\tmessageActivated={ __(\n\t\t\t\t\t\t\t\t\t'Contain text cursor inside block activated'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\tmessageDeactivated={ __(\n\t\t\t\t\t\t\t\t\t'Contain text cursor inside block deactivated'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</MenuGroup>\n\t\t\t\t\t</>\n\t\t\t\t) }\n\t\t\t</ToolbarDropdownMenu>\n\t\t\t<KeyboardShortcutHelpModal\n\t\t\t\tisModalActive={ isKeyboardShortcutsModalActive }\n\t\t\t\ttoggleModal={ toggleKeyboardShortcutsModal }\n\t\t\t/>\n\t\t</>\n\t);\n}\n","/**\r\n * External dependencies\r\n */\r\nimport classnames from 'classnames';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { ToolbarButton } from '@wordpress/components';\r\nimport { NavigableToolbar } from '@wordpress/block-editor';\r\nimport { createPortal, useEffect, useState } from '@wordpress/element';\r\nimport { displayShortcut, isAppleOS } from '@wordpress/keycodes';\r\nimport { __, _x, isRTL } from '@wordpress/i18n';\r\nimport { plus, undo as undoIcon, redo as redoIcon } from '@wordpress/icons';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport Inserter from '../inserter';\r\nimport MoreMenu from '../more-menu';\r\n\r\nfunction Header( {\r\n\tsidebar,\r\n\tinserter,\r\n\tisInserterOpened,\r\n\tsetIsInserterOpened,\r\n\tisFixedToolbarActive,\r\n} ) {\r\n\tconst [ [ hasUndo, hasRedo ], setUndoRedo ] = useState( [\r\n\t\tsidebar.hasUndo(),\r\n\t\tsidebar.hasRedo(),\r\n\t] );\r\n\r\n\tconst shortcut = isAppleOS()\r\n\t\t? displayShortcut.primaryShift( 'z' )\r\n\t\t: displayShortcut.primary( 'y' );\r\n\r\n\tuseEffect( () => {\r\n\t\treturn sidebar.subscribeHistory( () => {\r\n\t\t\tsetUndoRedo( [ sidebar.hasUndo(), sidebar.hasRedo() ] );\r\n\t\t} );\r\n\t}, [ sidebar ] );\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div\r\n\t\t\t\tclassName={ classnames( 'customize-widgets-header', {\r\n\t\t\t\t\t'is-fixed-toolbar-active': isFixedToolbarActive,\r\n\t\t\t\t} ) }\r\n\t\t\t>\r\n\t\t\t\t<NavigableToolbar\r\n\t\t\t\t\tclassName=\"customize-widgets-header-toolbar\"\r\n\t\t\t\t\taria-label={ __( 'Document tools' ) }\r\n\t\t\t\t>\r\n\t\t\t\t\t<ToolbarButton\r\n\t\t\t\t\t\ticon={ ! isRTL() ? undoIcon : redoIcon }\r\n\t\t\t\t\t\t/* translators: button label text should, if possible, be under 16 characters. */\r\n\t\t\t\t\t\tlabel={ __( 'Undo' ) }\r\n\t\t\t\t\t\tshortcut={ displayShortcut.primary( 'z' ) }\r\n\t\t\t\t\t\t// If there are no undo levels we don't want to actually disable this\r\n\t\t\t\t\t\t// button, because it will remove focus for keyboard users.\r\n\t\t\t\t\t\t// See: https://github.com/WordPress/gutenberg/issues/3486\r\n\t\t\t\t\t\taria-disabled={ ! hasUndo }\r\n\t\t\t\t\t\tonClick={ sidebar.undo }\r\n\t\t\t\t\t\tclassName=\"customize-widgets-editor-history-button undo-button\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<ToolbarButton\r\n\t\t\t\t\t\ticon={ ! isRTL() ? redoIcon : undoIcon }\r\n\t\t\t\t\t\t/* translators: button label text should, if possible, be under 16 characters. */\r\n\t\t\t\t\t\tlabel={ __( 'Redo' ) }\r\n\t\t\t\t\t\tshortcut={ shortcut }\r\n\t\t\t\t\t\t// If there are no undo levels we don't want to actually disable this\r\n\t\t\t\t\t\t// button, because it will remove focus for keyboard users.\r\n\t\t\t\t\t\t// See: https://github.com/WordPress/gutenberg/issues/3486\r\n\t\t\t\t\t\taria-disabled={ ! hasRedo }\r\n\t\t\t\t\t\tonClick={ sidebar.redo }\r\n\t\t\t\t\t\tclassName=\"customize-widgets-editor-history-button redo-button\"\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<ToolbarButton\r\n\t\t\t\t\t\tclassName=\"customize-widgets-header-toolbar__inserter-toggle\"\r\n\t\t\t\t\t\tisPressed={ isInserterOpened }\r\n\t\t\t\t\t\tvariant=\"primary\"\r\n\t\t\t\t\t\ticon={ plus }\r\n\t\t\t\t\t\tlabel={ _x(\r\n\t\t\t\t\t\t\t'Add block',\r\n\t\t\t\t\t\t\t'Generic label for block inserter button'\r\n\t\t\t\t\t\t) }\r\n\t\t\t\t\t\tonClick={ () => {\r\n\t\t\t\t\t\t\tsetIsInserterOpened( ( isOpen ) => ! isOpen );\r\n\t\t\t\t\t\t} }\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<MoreMenu />\r\n\t\t\t\t</NavigableToolbar>\r\n\t\t\t</div>\r\n\r\n\t\t\t{ createPortal(\r\n\t\t\t\t<Inserter setIsOpened={ setIsInserterOpened } />,\r\n\t\t\t\tinserter.contentContainer[ 0 ]\r\n\t\t\t) }\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default Header;\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"isShallowEqual\"];","// @ts-check\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { serialize, parse, createBlock } from '@wordpress/blocks';\r\nimport { addWidgetIdToBlock } from '@wordpress/widgets';\r\n\r\n/**\r\n * Convert settingId to widgetId.\r\n *\r\n * @param {string} settingId The setting id.\r\n * @return {string} The widget id.\r\n */\r\nexport function settingIdToWidgetId( settingId ) {\r\n\tconst matches = settingId.match( /^widget_(.+)(?:\\[(\\d+)\\])$/ );\r\n\r\n\tif ( matches ) {\r\n\t\tconst idBase = matches[ 1 ];\r\n\t\tconst number = parseInt( matches[ 2 ], 10 );\r\n\r\n\t\treturn `${ idBase }-${ number }`;\r\n\t}\r\n\r\n\treturn settingId;\r\n}\r\n\r\n/**\r\n * Transform a block to a customizable widget.\r\n *\r\n * @param {WPBlock} block          The block to be transformed from.\r\n * @param {Object}  existingWidget The widget to be extended from.\r\n * @return {Object} The transformed widget.\r\n */\r\nexport function blockToWidget( block, existingWidget = null ) {\r\n\tlet widget;\r\n\r\n\tconst isValidLegacyWidgetBlock =\r\n\t\tblock.name === 'core/legacy-widget' &&\r\n\t\t( block.attributes.id || block.attributes.instance );\r\n\r\n\tif ( isValidLegacyWidgetBlock ) {\r\n\t\tif ( block.attributes.id ) {\r\n\t\t\t// Widget that does not extend WP_Widget.\r\n\t\t\twidget = {\r\n\t\t\t\tid: block.attributes.id,\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\tconst { encoded, hash, raw, ...rest } = block.attributes.instance;\r\n\r\n\t\t\t// Widget that extends WP_Widget.\r\n\t\t\twidget = {\r\n\t\t\t\tidBase: block.attributes.idBase,\r\n\t\t\t\tinstance: {\r\n\t\t\t\t\t...existingWidget?.instance,\r\n\t\t\t\t\t// Required only for the customizer.\r\n\t\t\t\t\tis_widget_customizer_js_value: true,\r\n\t\t\t\t\tencoded_serialized_instance: encoded,\r\n\t\t\t\t\tinstance_hash_key: hash,\r\n\t\t\t\t\traw_instance: raw,\r\n\t\t\t\t\t...rest,\r\n\t\t\t\t},\r\n\t\t\t};\r\n\t\t}\r\n\t} else {\r\n\t\tconst instance = {\r\n\t\t\tcontent: serialize( block ),\r\n\t\t};\r\n\t\twidget = {\r\n\t\t\tidBase: 'block',\r\n\t\t\twidgetClass: 'WP_Widget_Block',\r\n\t\t\tinstance: {\r\n\t\t\t\traw_instance: instance,\r\n\t\t\t},\r\n\t\t};\r\n\t}\r\n\r\n\tconst { form, rendered, ...restExistingWidget } = existingWidget || {};\r\n\r\n\treturn {\r\n\t\t...restExistingWidget,\r\n\t\t...widget,\r\n\t};\r\n}\r\n\r\n/**\r\n * Transform a widget to a block.\r\n *\r\n * @param {Object} widget          The widget to be transformed from.\r\n * @param {string} widget.id       The widget id.\r\n * @param {string} widget.idBase   The id base of the widget.\r\n * @param {number} widget.number   The number/index of the widget.\r\n * @param {Object} widget.instance The instance of the widget.\r\n * @return {WPBlock} The transformed block.\r\n */\r\nexport function widgetToBlock( { id, idBase, number, instance } ) {\r\n\tlet block;\r\n\r\n\tconst {\r\n\t\tencoded_serialized_instance: encoded,\r\n\t\tinstance_hash_key: hash,\r\n\t\traw_instance: raw,\r\n\t\t...rest\r\n\t} = instance;\r\n\r\n\tif ( idBase === 'block' ) {\r\n\t\tconst parsedBlocks = parse( raw.content ?? '', {\r\n\t\t\t__unstableSkipAutop: true,\r\n\t\t} );\r\n\t\tblock = parsedBlocks.length\r\n\t\t\t? parsedBlocks[ 0 ]\r\n\t\t\t: createBlock( 'core/paragraph', {} );\r\n\t} else if ( number ) {\r\n\t\t// Widget that extends WP_Widget.\r\n\t\tblock = createBlock( 'core/legacy-widget', {\r\n\t\t\tidBase,\r\n\t\t\tinstance: {\r\n\t\t\t\tencoded,\r\n\t\t\t\thash,\r\n\t\t\t\traw,\r\n\t\t\t\t...rest,\r\n\t\t\t},\r\n\t\t} );\r\n\t} else {\r\n\t\t// Widget that does not extend WP_Widget.\r\n\t\tblock = createBlock( 'core/legacy-widget', {\r\n\t\t\tid,\r\n\t\t} );\r\n\t}\r\n\r\n\treturn addWidgetIdToBlock( block, id );\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\tcreateContext,\r\n\tuseState,\r\n\tuseEffect,\r\n\tuseContext,\r\n\tuseCallback,\r\n\tuseMemo,\r\n} from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { settingIdToWidgetId } from '../../utils';\r\n\r\nconst FocusControlContext = createContext();\r\n\r\nexport default function FocusControl( { api, sidebarControls, children } ) {\r\n\tconst [ focusedWidgetIdRef, setFocusedWidgetIdRef ] = useState( {\r\n\t\tcurrent: null,\r\n\t} );\r\n\r\n\tconst focusWidget = useCallback(\r\n\t\t( widgetId ) => {\r\n\t\t\tfor ( const sidebarControl of sidebarControls ) {\r\n\t\t\t\tconst widgets = sidebarControl.setting.get();\r\n\r\n\t\t\t\tif ( widgets.includes( widgetId ) ) {\r\n\t\t\t\t\tsidebarControl.sectionInstance.expand( {\r\n\t\t\t\t\t\t// Schedule it after the complete callback so that\r\n\t\t\t\t\t\t// it won't be overridden by the \"Back\" button focus.\r\n\t\t\t\t\t\tcompleteCallback() {\r\n\t\t\t\t\t\t\t// Create a \"ref-like\" object every time to ensure\r\n\t\t\t\t\t\t\t// the same widget id can also triggers the focus control.\r\n\t\t\t\t\t\t\tsetFocusedWidgetIdRef( { current: widgetId } );\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t} );\r\n\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t[ sidebarControls ]\r\n\t);\r\n\r\n\tuseEffect( () => {\r\n\t\tfunction handleFocus( settingId ) {\r\n\t\t\tconst widgetId = settingIdToWidgetId( settingId );\r\n\r\n\t\t\tfocusWidget( widgetId );\r\n\t\t}\r\n\r\n\t\tlet previewBound = false;\r\n\r\n\t\tfunction handleReady() {\r\n\t\t\tapi.previewer.preview.bind(\r\n\t\t\t\t'focus-control-for-setting',\r\n\t\t\t\thandleFocus\r\n\t\t\t);\r\n\t\t\tpreviewBound = true;\r\n\t\t}\r\n\r\n\t\tapi.previewer.bind( 'ready', handleReady );\r\n\r\n\t\treturn () => {\r\n\t\t\tapi.previewer.unbind( 'ready', handleReady );\r\n\t\t\tif ( previewBound ) {\r\n\t\t\t\tapi.previewer.preview.unbind(\r\n\t\t\t\t\t'focus-control-for-setting',\r\n\t\t\t\t\thandleFocus\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t};\r\n\t}, [ api, focusWidget ] );\r\n\r\n\tconst context = useMemo(\r\n\t\t() => [ focusedWidgetIdRef, focusWidget ],\r\n\t\t[ focusedWidgetIdRef, focusWidget ]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<FocusControlContext.Provider value={ context }>\r\n\t\t\t{ children }\r\n\t\t</FocusControlContext.Provider>\r\n\t);\r\n}\r\n\r\nexport const useFocusControl = () => useContext( FocusControlContext );\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"privateApis\"];","/**\r\n * WordPress dependencies\r\n */\r\nimport { __dangerousOptInToUnstableAPIsOnlyForCoreModules } from '@wordpress/private-apis';\r\n\r\nexport const { lock, unlock } =\r\n\t__dangerousOptInToUnstableAPIsOnlyForCoreModules(\r\n\t\t'I know using unstable features means my theme or plugin will inevitably break in the next version of WordPress.',\r\n\t\t'@wordpress/customize-widgets'\r\n\t);\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { privateApis as blockEditorPrivateApis } from '@wordpress/block-editor';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport useSidebarBlockEditor from './use-sidebar-block-editor';\r\nimport useBlocksFocusControl from '../focus-control/use-blocks-focus-control';\r\n\r\nimport { unlock } from '../../lock-unlock';\r\n\r\nconst { ExperimentalBlockEditorProvider } = unlock( blockEditorPrivateApis );\r\n\r\nexport default function SidebarEditorProvider( {\r\n\tsidebar,\r\n\tsettings,\r\n\tchildren,\r\n} ) {\r\n\tconst [ blocks, onInput, onChange ] = useSidebarBlockEditor( sidebar );\r\n\r\n\tuseBlocksFocusControl( blocks );\r\n\r\n\treturn (\r\n\t\t<ExperimentalBlockEditorProvider\r\n\t\t\tvalue={ blocks }\r\n\t\t\tonInput={ onInput }\r\n\t\t\tonChange={ onChange }\r\n\t\t\tsettings={ settings }\r\n\t\t\tuseSubRegistry={ false }\r\n\t\t>\r\n\t\t\t{ children }\r\n\t\t</ExperimentalBlockEditorProvider>\r\n\t);\r\n}\r\n","/**\r\n * External dependencies\r\n */\r\nimport fastDeepEqual from 'fast-deep-equal/es6';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { useState, useEffect, useCallback } from '@wordpress/element';\r\nimport isShallowEqual from '@wordpress/is-shallow-equal';\r\nimport { getWidgetIdFromBlock, addWidgetIdToBlock } from '@wordpress/widgets';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { blockToWidget, widgetToBlock } from '../../utils';\r\n\r\nfunction widgetsToBlocks( widgets ) {\r\n\treturn widgets.map( ( widget ) => widgetToBlock( widget ) );\r\n}\r\n\r\nexport default function useSidebarBlockEditor( sidebar ) {\r\n\tconst [ blocks, setBlocks ] = useState( () =>\r\n\t\twidgetsToBlocks( sidebar.getWidgets() )\r\n\t);\r\n\r\n\tuseEffect( () => {\r\n\t\treturn sidebar.subscribe( ( prevWidgets, nextWidgets ) => {\r\n\t\t\tsetBlocks( ( prevBlocks ) => {\r\n\t\t\t\tconst prevWidgetsMap = new Map(\r\n\t\t\t\t\tprevWidgets.map( ( widget ) => [ widget.id, widget ] )\r\n\t\t\t\t);\r\n\t\t\t\tconst prevBlocksMap = new Map(\r\n\t\t\t\t\tprevBlocks.map( ( block ) => [\r\n\t\t\t\t\t\tgetWidgetIdFromBlock( block ),\r\n\t\t\t\t\t\tblock,\r\n\t\t\t\t\t] )\r\n\t\t\t\t);\r\n\r\n\t\t\t\tconst nextBlocks = nextWidgets.map( ( nextWidget ) => {\r\n\t\t\t\t\tconst prevWidget = prevWidgetsMap.get( nextWidget.id );\r\n\r\n\t\t\t\t\t// Bail out updates.\r\n\t\t\t\t\tif ( prevWidget && prevWidget === nextWidget ) {\r\n\t\t\t\t\t\treturn prevBlocksMap.get( nextWidget.id );\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn widgetToBlock( nextWidget );\r\n\t\t\t\t} );\r\n\r\n\t\t\t\t// Bail out updates.\r\n\t\t\t\tif ( isShallowEqual( prevBlocks, nextBlocks ) ) {\r\n\t\t\t\t\treturn prevBlocks;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn nextBlocks;\r\n\t\t\t} );\r\n\t\t} );\r\n\t}, [ sidebar ] );\r\n\r\n\tconst onChangeBlocks = useCallback(\r\n\t\t( nextBlocks ) => {\r\n\t\t\tsetBlocks( ( prevBlocks ) => {\r\n\t\t\t\tif ( isShallowEqual( prevBlocks, nextBlocks ) ) {\r\n\t\t\t\t\treturn prevBlocks;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst prevBlocksMap = new Map(\r\n\t\t\t\t\tprevBlocks.map( ( block ) => [\r\n\t\t\t\t\t\tgetWidgetIdFromBlock( block ),\r\n\t\t\t\t\t\tblock,\r\n\t\t\t\t\t] )\r\n\t\t\t\t);\r\n\r\n\t\t\t\tconst nextWidgets = nextBlocks.map( ( nextBlock ) => {\r\n\t\t\t\t\tconst widgetId = getWidgetIdFromBlock( nextBlock );\r\n\r\n\t\t\t\t\t// Update existing widgets.\r\n\t\t\t\t\tif ( widgetId && prevBlocksMap.has( widgetId ) ) {\r\n\t\t\t\t\t\tconst prevBlock = prevBlocksMap.get( widgetId );\r\n\t\t\t\t\t\tconst prevWidget = sidebar.getWidget( widgetId );\r\n\r\n\t\t\t\t\t\t// Bail out updates by returning the previous widgets.\r\n\t\t\t\t\t\t// Deep equality is necessary until the block editor's internals changes.\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tfastDeepEqual( nextBlock, prevBlock ) &&\r\n\t\t\t\t\t\t\tprevWidget\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\treturn prevWidget;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treturn blockToWidget( nextBlock, prevWidget );\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Add a new widget.\r\n\t\t\t\t\treturn blockToWidget( nextBlock );\r\n\t\t\t\t} );\r\n\r\n\t\t\t\t// Bail out updates if the updated widgets are the same.\r\n\t\t\t\tif ( isShallowEqual( sidebar.getWidgets(), nextWidgets ) ) {\r\n\t\t\t\t\treturn prevBlocks;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst addedWidgetIds = sidebar.setWidgets( nextWidgets );\r\n\r\n\t\t\t\treturn nextBlocks.reduce(\r\n\t\t\t\t\t( updatedNextBlocks, nextBlock, index ) => {\r\n\t\t\t\t\t\tconst addedWidgetId = addedWidgetIds[ index ];\r\n\r\n\t\t\t\t\t\tif ( addedWidgetId !== null ) {\r\n\t\t\t\t\t\t\t// Only create a new instance if necessary to prevent\r\n\t\t\t\t\t\t\t// the whole editor from re-rendering on every edit.\r\n\t\t\t\t\t\t\tif ( updatedNextBlocks === nextBlocks ) {\r\n\t\t\t\t\t\t\t\tupdatedNextBlocks = nextBlocks.slice();\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tupdatedNextBlocks[ index ] = addWidgetIdToBlock(\r\n\t\t\t\t\t\t\t\tnextBlock,\r\n\t\t\t\t\t\t\t\taddedWidgetId\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treturn updatedNextBlocks;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tnextBlocks\r\n\t\t\t\t);\r\n\t\t\t} );\r\n\t\t},\r\n\t\t[ sidebar ]\r\n\t);\r\n\r\n\treturn [ blocks, onChangeBlocks, onChangeBlocks ];\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useRef, useEffect } from '@wordpress/element';\r\nimport { useDispatch } from '@wordpress/data';\r\nimport { store as blockEditorStore } from '@wordpress/block-editor';\r\nimport { getWidgetIdFromBlock } from '@wordpress/widgets';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { useFocusControl } from '.';\r\n\r\nexport default function useBlocksFocusControl( blocks ) {\r\n\tconst { selectBlock } = useDispatch( blockEditorStore );\r\n\tconst [ focusedWidgetIdRef ] = useFocusControl();\r\n\r\n\tconst blocksRef = useRef( blocks );\r\n\r\n\tuseEffect( () => {\r\n\t\tblocksRef.current = blocks;\r\n\t}, [ blocks ] );\r\n\r\n\tuseEffect( () => {\r\n\t\tif ( focusedWidgetIdRef.current ) {\r\n\t\t\tconst focusedBlock = blocksRef.current.find(\r\n\t\t\t\t( block ) =>\r\n\t\t\t\t\tgetWidgetIdFromBlock( block ) === focusedWidgetIdRef.current\r\n\t\t\t);\r\n\r\n\t\t\tif ( focusedBlock ) {\r\n\t\t\t\tselectBlock( focusedBlock.clientId );\r\n\t\t\t\t// If the block is already being selected, the DOM node won't\r\n\t\t\t\t// get focused again automatically.\r\n\t\t\t\t// We select the DOM and focus it manually here.\r\n\t\t\t\tconst blockNode = document.querySelector(\r\n\t\t\t\t\t`[data-block=\"${ focusedBlock.clientId }\"]`\r\n\t\t\t\t);\r\n\t\t\t\tblockNode?.focus();\r\n\t\t\t}\r\n\t\t}\r\n\t}, [ focusedWidgetIdRef, selectBlock ] );\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { __ } from '@wordpress/i18n';\r\nimport { Button, ExternalLink } from '@wordpress/components';\r\nimport { useDispatch } from '@wordpress/data';\r\nimport { store as preferencesStore } from '@wordpress/preferences';\r\n\r\nexport default function WelcomeGuide( { sidebar } ) {\r\n\tconst { toggle } = useDispatch( preferencesStore );\r\n\r\n\tconst isEntirelyBlockWidgets = sidebar\r\n\t\t.getWidgets()\r\n\t\t.every( ( widget ) => widget.id.startsWith( 'block-' ) );\r\n\r\n\treturn (\r\n\t\t<div className=\"customize-widgets-welcome-guide\">\r\n\t\t\t<div className=\"customize-widgets-welcome-guide__image__wrapper\">\r\n\t\t\t\t<picture>\r\n\t\t\t\t\t<source\r\n\t\t\t\t\t\tsrcSet=\"https://s.w.org/images/block-editor/welcome-editor.svg\"\r\n\t\t\t\t\t\tmedia=\"(prefers-reduced-motion: reduce)\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<img\r\n\t\t\t\t\t\tclassName=\"customize-widgets-welcome-guide__image\"\r\n\t\t\t\t\t\tsrc=\"https://s.w.org/images/block-editor/welcome-editor.gif\"\r\n\t\t\t\t\t\twidth=\"312\"\r\n\t\t\t\t\t\theight=\"240\"\r\n\t\t\t\t\t\talt=\"\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</picture>\r\n\t\t\t</div>\r\n\t\t\t<h1 className=\"customize-widgets-welcome-guide__heading\">\r\n\t\t\t\t{ __( 'Welcome to block Widgets' ) }\r\n\t\t\t</h1>\r\n\t\t\t<p className=\"customize-widgets-welcome-guide__text\">\r\n\t\t\t\t{ isEntirelyBlockWidgets\r\n\t\t\t\t\t? __(\r\n\t\t\t\t\t\t\t'Your theme provides different block areas for you to add and edit content.Try adding a search bar, social icons, or other types of blocks here and see how theyll look on your site.'\r\n\t\t\t\t\t  )\r\n\t\t\t\t\t: __(\r\n\t\t\t\t\t\t\t'You can now add any block to your sites widget areas. Dont worry, all of your favorite widgets still work flawlessly.'\r\n\t\t\t\t\t  ) }\r\n\t\t\t</p>\r\n\t\t\t<Button\r\n\t\t\t\tclassName=\"customize-widgets-welcome-guide__button\"\r\n\t\t\t\tvariant=\"primary\"\r\n\t\t\t\tonClick={ () =>\r\n\t\t\t\t\ttoggle( 'core/customize-widgets', 'welcomeGuide' )\r\n\t\t\t\t}\r\n\t\t\t>\r\n\t\t\t\t{ __( 'Got it' ) }\r\n\t\t\t</Button>\r\n\t\t\t<hr className=\"customize-widgets-welcome-guide__separator\" />\r\n\t\t\t{ ! isEntirelyBlockWidgets && (\r\n\t\t\t\t<p className=\"customize-widgets-welcome-guide__more-info\">\r\n\t\t\t\t\t{ __( 'Want to stick with the old widgets?' ) }\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t<ExternalLink\r\n\t\t\t\t\t\thref={ __(\r\n\t\t\t\t\t\t\t'https://wordpress.org/plugins/classic-widgets/'\r\n\t\t\t\t\t\t) }\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{ __( 'Get the Classic Widgets plugin.' ) }\r\n\t\t\t\t\t</ExternalLink>\r\n\t\t\t\t</p>\r\n\t\t\t) }\r\n\t\t\t<p className=\"customize-widgets-welcome-guide__more-info\">\r\n\t\t\t\t{ __( 'New to the block editor?' ) }\r\n\t\t\t\t<br />\r\n\t\t\t\t<ExternalLink\r\n\t\t\t\t\thref={ __(\r\n\t\t\t\t\t\t'https://wordpress.org/documentation/article/wordpress-block-editor/'\r\n\t\t\t\t\t) }\r\n\t\t\t\t>\r\n\t\t\t\t\t{ __( \"Here's a detailed guide.\" ) }\r\n\t\t\t\t</ExternalLink>\r\n\t\t\t</p>\r\n\t\t</div>\r\n\t);\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useEffect } from '@wordpress/element';\r\nimport {\r\n\tuseShortcut,\r\n\tstore as keyboardShortcutsStore,\r\n} from '@wordpress/keyboard-shortcuts';\r\nimport { isAppleOS } from '@wordpress/keycodes';\r\nimport { useDispatch, useSelect } from '@wordpress/data';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { store as blockEditorStore } from '@wordpress/block-editor';\r\nimport { createBlock } from '@wordpress/blocks';\r\n\r\nfunction KeyboardShortcuts( { undo, redo, save } ) {\r\n\tconst { replaceBlocks } = useDispatch( blockEditorStore );\r\n\tconst { getBlockName, getSelectedBlockClientId, getBlockAttributes } =\r\n\t\tuseSelect( blockEditorStore );\r\n\r\n\tconst handleTextLevelShortcut = ( event, level ) => {\r\n\t\tevent.preventDefault();\r\n\t\tconst destinationBlockName =\r\n\t\t\tlevel === 0 ? 'core/paragraph' : 'core/heading';\r\n\t\tconst currentClientId = getSelectedBlockClientId();\r\n\t\tif ( currentClientId === null ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst blockName = getBlockName( currentClientId );\r\n\t\tif ( blockName !== 'core/paragraph' && blockName !== 'core/heading' ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst attributes = getBlockAttributes( currentClientId );\r\n\t\tconst textAlign =\r\n\t\t\tblockName === 'core/paragraph' ? 'align' : 'textAlign';\r\n\t\tconst destinationTextAlign =\r\n\t\t\tdestinationBlockName === 'core/paragraph' ? 'align' : 'textAlign';\r\n\r\n\t\treplaceBlocks(\r\n\t\t\tcurrentClientId,\r\n\t\t\tcreateBlock( destinationBlockName, {\r\n\t\t\t\tlevel,\r\n\t\t\t\tcontent: attributes.content,\r\n\t\t\t\t...{ [ destinationTextAlign ]: attributes[ textAlign ] },\r\n\t\t\t} )\r\n\t\t);\r\n\t};\r\n\r\n\tuseShortcut( 'core/customize-widgets/undo', ( event ) => {\r\n\t\tundo();\r\n\t\tevent.preventDefault();\r\n\t} );\r\n\r\n\tuseShortcut( 'core/customize-widgets/redo', ( event ) => {\r\n\t\tredo();\r\n\t\tevent.preventDefault();\r\n\t} );\r\n\r\n\tuseShortcut( 'core/customize-widgets/save', ( event ) => {\r\n\t\tevent.preventDefault();\r\n\t\tsave();\r\n\t} );\r\n\r\n\tuseShortcut(\r\n\t\t'core/customize-widgets/transform-heading-to-paragraph',\r\n\t\t( event ) => handleTextLevelShortcut( event, 0 )\r\n\t);\r\n\r\n\t[ 1, 2, 3, 4, 5, 6 ].forEach( ( level ) => {\r\n\t\t//the loop is based off on a constant therefore\r\n\t\t//the hook will execute the same way every time\r\n\t\t//eslint-disable-next-line react-hooks/rules-of-hooks\r\n\t\tuseShortcut(\r\n\t\t\t`core/customize-widgets/transform-paragraph-to-heading-${ level }`,\r\n\t\t\t( event ) => handleTextLevelShortcut( event, level )\r\n\t\t);\r\n\t} );\r\n\r\n\treturn null;\r\n}\r\n\r\nfunction KeyboardShortcutsRegister() {\r\n\tconst { registerShortcut, unregisterShortcut } = useDispatch(\r\n\t\tkeyboardShortcutsStore\r\n\t);\r\n\r\n\tuseEffect( () => {\r\n\t\tregisterShortcut( {\r\n\t\t\tname: 'core/customize-widgets/undo',\r\n\t\t\tcategory: 'global',\r\n\t\t\tdescription: __( 'Undo your last changes.' ),\r\n\t\t\tkeyCombination: {\r\n\t\t\t\tmodifier: 'primary',\r\n\t\t\t\tcharacter: 'z',\r\n\t\t\t},\r\n\t\t} );\r\n\r\n\t\tregisterShortcut( {\r\n\t\t\tname: 'core/customize-widgets/redo',\r\n\t\t\tcategory: 'global',\r\n\t\t\tdescription: __( 'Redo your last undo.' ),\r\n\t\t\tkeyCombination: {\r\n\t\t\t\tmodifier: 'primaryShift',\r\n\t\t\t\tcharacter: 'z',\r\n\t\t\t},\r\n\t\t\t// Disable on Apple OS because it conflicts with the browser's\r\n\t\t\t// history shortcut. It's a fine alias for both Windows and Linux.\r\n\t\t\t// Since there's no conflict for Ctrl+Shift+Z on both Windows and\r\n\t\t\t// Linux, we keep it as the default for consistency.\r\n\t\t\taliases: isAppleOS()\r\n\t\t\t\t? []\r\n\t\t\t\t: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tmodifier: 'primary',\r\n\t\t\t\t\t\t\tcharacter: 'y',\r\n\t\t\t\t\t\t},\r\n\t\t\t\t  ],\r\n\t\t} );\r\n\r\n\t\tregisterShortcut( {\r\n\t\t\tname: 'core/customize-widgets/save',\r\n\t\t\tcategory: 'global',\r\n\t\t\tdescription: __( 'Save your changes.' ),\r\n\t\t\tkeyCombination: {\r\n\t\t\t\tmodifier: 'primary',\r\n\t\t\t\tcharacter: 's',\r\n\t\t\t},\r\n\t\t} );\r\n\r\n\t\tregisterShortcut( {\r\n\t\t\tname: 'core/customize-widgets/transform-heading-to-paragraph',\r\n\t\t\tcategory: 'block-library',\r\n\t\t\tdescription: __( 'Transform heading to paragraph.' ),\r\n\t\t\tkeyCombination: {\r\n\t\t\t\tmodifier: 'access',\r\n\t\t\t\tcharacter: `0`,\r\n\t\t\t},\r\n\t\t} );\r\n\r\n\t\t[ 1, 2, 3, 4, 5, 6 ].forEach( ( level ) => {\r\n\t\t\tregisterShortcut( {\r\n\t\t\t\tname: `core/customize-widgets/transform-paragraph-to-heading-${ level }`,\r\n\t\t\t\tcategory: 'block-library',\r\n\t\t\t\tdescription: __( 'Transform paragraph to heading.' ),\r\n\t\t\t\tkeyCombination: {\r\n\t\t\t\t\tmodifier: 'access',\r\n\t\t\t\t\tcharacter: `${ level }`,\r\n\t\t\t\t},\r\n\t\t\t} );\r\n\t\t} );\r\n\r\n\t\treturn () => {\r\n\t\t\tunregisterShortcut( 'core/customize-widgets/undo' );\r\n\t\t\tunregisterShortcut( 'core/customize-widgets/redo' );\r\n\t\t\tunregisterShortcut( 'core/customize-widgets/save' );\r\n\t\t};\r\n\t}, [ registerShortcut ] );\r\n\r\n\treturn null;\r\n}\r\n\r\nKeyboardShortcuts.Register = KeyboardShortcutsRegister;\r\nexport default KeyboardShortcuts;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useRef, useEffect } from '@wordpress/element';\r\nimport {\r\n\tButtonBlockAppender,\r\n\tstore as blockEditorStore,\r\n} from '@wordpress/block-editor';\r\nimport { useSelect } from '@wordpress/data';\r\n\r\nexport default function BlockAppender( props ) {\r\n\tconst ref = useRef();\r\n\tconst isBlocksListEmpty = useSelect(\r\n\t\t( select ) => select( blockEditorStore ).getBlockCount() === 0\r\n\t);\r\n\r\n\t// Move the focus to the block appender to prevent focus from\r\n\t// being lost when emptying the widget area.\r\n\tuseEffect( () => {\r\n\t\tif ( isBlocksListEmpty && ref.current ) {\r\n\t\t\tconst { ownerDocument } = ref.current;\r\n\r\n\t\t\tif (\r\n\t\t\t\t! ownerDocument.activeElement ||\r\n\t\t\t\townerDocument.activeElement === ownerDocument.body\r\n\t\t\t) {\r\n\t\t\t\tref.current.focus();\r\n\t\t\t}\r\n\t\t}\r\n\t}, [ isBlocksListEmpty ] );\r\n\r\n\treturn <ButtonBlockAppender { ...props } ref={ ref } />;\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useViewportMatch } from '@wordpress/compose';\r\nimport { store as coreStore } from '@wordpress/core-data';\r\nimport { useSelect } from '@wordpress/data';\r\nimport { useMemo, createPortal } from '@wordpress/element';\r\nimport {\r\n\tBlockList,\r\n\tBlockToolbar,\r\n\tBlockInspector,\r\n\tprivateApis as blockEditorPrivateApis,\r\n\t__unstableBlockSettingsMenuFirstItem,\r\n} from '@wordpress/block-editor';\r\nimport { uploadMedia } from '@wordpress/media-utils';\r\nimport { store as preferencesStore } from '@wordpress/preferences';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport BlockInspectorButton from '../block-inspector-button';\r\nimport Header from '../header';\r\nimport useInserter from '../inserter/use-inserter';\r\nimport SidebarEditorProvider from './sidebar-editor-provider';\r\nimport WelcomeGuide from '../welcome-guide';\r\nimport KeyboardShortcuts from '../keyboard-shortcuts';\r\nimport BlockAppender from '../block-appender';\r\nimport { unlock } from '../../lock-unlock';\r\n\r\nconst { ExperimentalBlockCanvas: BlockCanvas } = unlock(\r\n\tblockEditorPrivateApis\r\n);\r\n\r\nexport default function SidebarBlockEditor( {\r\n\tblockEditorSettings,\r\n\tsidebar,\r\n\tinserter,\r\n\tinspector,\r\n} ) {\r\n\tconst [ isInserterOpened, setIsInserterOpened ] = useInserter( inserter );\r\n\tconst isMediumViewport = useViewportMatch( 'small' );\r\n\tconst {\r\n\t\thasUploadPermissions,\r\n\t\tisFixedToolbarActive,\r\n\t\tkeepCaretInsideBlock,\r\n\t\tisWelcomeGuideActive,\r\n\t} = useSelect( ( select ) => {\r\n\t\tconst { get } = select( preferencesStore );\r\n\t\treturn {\r\n\t\t\thasUploadPermissions:\r\n\t\t\t\tselect( coreStore ).canUser( 'create', 'media' ) ?? true,\r\n\t\t\tisFixedToolbarActive: !! get(\r\n\t\t\t\t'core/customize-widgets',\r\n\t\t\t\t'fixedToolbar'\r\n\t\t\t),\r\n\t\t\tkeepCaretInsideBlock: !! get(\r\n\t\t\t\t'core/customize-widgets',\r\n\t\t\t\t'keepCaretInsideBlock'\r\n\t\t\t),\r\n\t\t\tisWelcomeGuideActive: !! get(\r\n\t\t\t\t'core/customize-widgets',\r\n\t\t\t\t'welcomeGuide'\r\n\t\t\t),\r\n\t\t};\r\n\t}, [] );\r\n\tconst settings = useMemo( () => {\r\n\t\tlet mediaUploadBlockEditor;\r\n\t\tif ( hasUploadPermissions ) {\r\n\t\t\tmediaUploadBlockEditor = ( { onError, ...argumentsObject } ) => {\r\n\t\t\t\tuploadMedia( {\r\n\t\t\t\t\twpAllowedMimeTypes: blockEditorSettings.allowedMimeTypes,\r\n\t\t\t\t\tonError: ( { message } ) => onError( message ),\r\n\t\t\t\t\t...argumentsObject,\r\n\t\t\t\t} );\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\t...blockEditorSettings,\r\n\t\t\t__experimentalSetIsInserterOpened: setIsInserterOpened,\r\n\t\t\tmediaUpload: mediaUploadBlockEditor,\r\n\t\t\thasFixedToolbar: isFixedToolbarActive || ! isMediumViewport,\r\n\t\t\tkeepCaretInsideBlock,\r\n\t\t\t__unstableHasCustomAppender: true,\r\n\t\t};\r\n\t}, [\r\n\t\thasUploadPermissions,\r\n\t\tblockEditorSettings,\r\n\t\tisFixedToolbarActive,\r\n\t\tisMediumViewport,\r\n\t\tkeepCaretInsideBlock,\r\n\t\tsetIsInserterOpened,\r\n\t] );\r\n\r\n\tif ( isWelcomeGuideActive ) {\r\n\t\treturn <WelcomeGuide sidebar={ sidebar } />;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<KeyboardShortcuts.Register />\r\n\r\n\t\t\t<SidebarEditorProvider sidebar={ sidebar } settings={ settings }>\r\n\t\t\t\t<KeyboardShortcuts\r\n\t\t\t\t\tundo={ sidebar.undo }\r\n\t\t\t\t\tredo={ sidebar.redo }\r\n\t\t\t\t\tsave={ sidebar.save }\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<Header\r\n\t\t\t\t\tsidebar={ sidebar }\r\n\t\t\t\t\tinserter={ inserter }\r\n\t\t\t\t\tisInserterOpened={ isInserterOpened }\r\n\t\t\t\t\tsetIsInserterOpened={ setIsInserterOpened }\r\n\t\t\t\t\tisFixedToolbarActive={\r\n\t\t\t\t\t\tisFixedToolbarActive || ! isMediumViewport\r\n\t\t\t\t\t}\r\n\t\t\t\t/>\r\n\t\t\t\t{ ( isFixedToolbarActive || ! isMediumViewport ) && (\r\n\t\t\t\t\t<BlockToolbar hideDragHandle />\r\n\t\t\t\t) }\r\n\t\t\t\t<BlockCanvas\r\n\t\t\t\t\tshouldIframe={ false }\r\n\t\t\t\t\tstyles={ settings.defaultEditorStyles }\r\n\t\t\t\t\theight=\"100%\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<BlockList renderAppender={ BlockAppender } />\r\n\t\t\t\t</BlockCanvas>\r\n\r\n\t\t\t\t{ createPortal(\r\n\t\t\t\t\t// This is a temporary hack to prevent button component inside <BlockInspector>\r\n\t\t\t\t\t// from submitting form when type=\"button\" is not specified.\r\n\t\t\t\t\t<form onSubmit={ ( event ) => event.preventDefault() }>\r\n\t\t\t\t\t\t<BlockInspector />\r\n\t\t\t\t\t</form>,\r\n\t\t\t\t\tinspector.contentContainer[ 0 ]\r\n\t\t\t\t) }\r\n\t\t\t</SidebarEditorProvider>\r\n\r\n\t\t\t<__unstableBlockSettingsMenuFirstItem>\r\n\t\t\t\t{ ( { onClose } ) => (\r\n\t\t\t\t\t<BlockInspectorButton\r\n\t\t\t\t\t\tinspector={ inspector }\r\n\t\t\t\t\t\tcloseMenu={ onClose }\r\n\t\t\t\t\t/>\r\n\t\t\t\t) }\r\n\t\t\t</__unstableBlockSettingsMenuFirstItem>\r\n\t\t</>\r\n\t);\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useEffect, useCallback } from '@wordpress/element';\r\nimport { useSelect, useDispatch, select as selectStore } from '@wordpress/data';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as customizeWidgetsStore } from '../../store';\r\n\r\nexport default function useInserter( inserter ) {\r\n\tconst isInserterOpened = useSelect(\r\n\t\t( select ) => select( customizeWidgetsStore ).isInserterOpened(),\r\n\t\t[]\r\n\t);\r\n\tconst { setIsInserterOpened } = useDispatch( customizeWidgetsStore );\r\n\r\n\tuseEffect( () => {\r\n\t\tif ( isInserterOpened ) {\r\n\t\t\tinserter.open();\r\n\t\t} else {\r\n\t\t\tinserter.close();\r\n\t\t}\r\n\t}, [ inserter, isInserterOpened ] );\r\n\r\n\treturn [\r\n\t\tisInserterOpened,\r\n\t\tuseCallback(\r\n\t\t\t( updater ) => {\r\n\t\t\t\tlet isOpen = updater;\r\n\t\t\t\tif ( typeof updater === 'function' ) {\r\n\t\t\t\t\tisOpen = updater(\r\n\t\t\t\t\t\tselectStore( customizeWidgetsStore ).isInserterOpened()\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsetIsInserterOpened( isOpen );\r\n\t\t\t},\r\n\t\t\t[ setIsInserterOpened ]\r\n\t\t),\r\n\t];\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { createContext, useMemo, useContext } from '@wordpress/element';\r\n\r\nexport const SidebarControlsContext = createContext();\r\n\r\nexport default function SidebarControls( {\r\n\tsidebarControls,\r\n\tactiveSidebarControl,\r\n\tchildren,\r\n} ) {\r\n\tconst context = useMemo(\r\n\t\t() => ( {\r\n\t\t\tsidebarControls,\r\n\t\t\tactiveSidebarControl,\r\n\t\t} ),\r\n\t\t[ sidebarControls, activeSidebarControl ]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<SidebarControlsContext.Provider value={ context }>\r\n\t\t\t{ children }\r\n\t\t</SidebarControlsContext.Provider>\r\n\t);\r\n}\r\n\r\nexport function useSidebarControls() {\r\n\tconst { sidebarControls } = useContext( SidebarControlsContext );\r\n\r\n\treturn sidebarControls;\r\n}\r\n\r\nexport function useActiveSidebarControl() {\r\n\tconst { activeSidebarControl } = useContext( SidebarControlsContext );\r\n\r\n\treturn activeSidebarControl;\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useState, useEffect, useRef, createPortal } from '@wordpress/element';\r\nimport { SlotFillProvider, Popover } from '@wordpress/components';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport ErrorBoundary from '../error-boundary';\r\nimport SidebarBlockEditor from '../sidebar-block-editor';\r\nimport FocusControl from '../focus-control';\r\nimport SidebarControls from '../sidebar-controls';\r\nimport useClearSelectedBlock from './use-clear-selected-block';\r\n\r\nexport default function CustomizeWidgets( {\r\n\tapi,\r\n\tsidebarControls,\r\n\tblockEditorSettings,\r\n} ) {\r\n\tconst [ activeSidebarControl, setActiveSidebarControl ] = useState( null );\r\n\tconst parentContainer = document.getElementById(\r\n\t\t'customize-theme-controls'\r\n\t);\r\n\tconst popoverRef = useRef();\r\n\r\n\tuseClearSelectedBlock( activeSidebarControl, popoverRef );\r\n\r\n\tuseEffect( () => {\r\n\t\tconst unsubscribers = sidebarControls.map( ( sidebarControl ) =>\r\n\t\t\tsidebarControl.subscribe( ( expanded ) => {\r\n\t\t\t\tif ( expanded ) {\r\n\t\t\t\t\tsetActiveSidebarControl( sidebarControl );\r\n\t\t\t\t}\r\n\t\t\t} )\r\n\t\t);\r\n\r\n\t\treturn () => {\r\n\t\t\tunsubscribers.forEach( ( unsubscriber ) => unsubscriber() );\r\n\t\t};\r\n\t}, [ sidebarControls ] );\r\n\r\n\tconst activeSidebar =\r\n\t\tactiveSidebarControl &&\r\n\t\tcreatePortal(\r\n\t\t\t<ErrorBoundary>\r\n\t\t\t\t<SidebarBlockEditor\r\n\t\t\t\t\tkey={ activeSidebarControl.id }\r\n\t\t\t\t\tblockEditorSettings={ blockEditorSettings }\r\n\t\t\t\t\tsidebar={ activeSidebarControl.sidebarAdapter }\r\n\t\t\t\t\tinserter={ activeSidebarControl.inserter }\r\n\t\t\t\t\tinspector={ activeSidebarControl.inspector }\r\n\t\t\t\t/>\r\n\t\t\t</ErrorBoundary>,\r\n\t\t\tactiveSidebarControl.container[ 0 ]\r\n\t\t);\r\n\r\n\t// We have to portal this to the parent of both the editor and the inspector,\r\n\t// so that the popovers will appear above both of them.\r\n\tconst popover =\r\n\t\tparentContainer &&\r\n\t\tcreatePortal(\r\n\t\t\t<div className=\"customize-widgets-popover\" ref={ popoverRef }>\r\n\t\t\t\t<Popover.Slot />\r\n\t\t\t</div>,\r\n\t\t\tparentContainer\r\n\t\t);\r\n\r\n\treturn (\r\n\t\t<SlotFillProvider>\r\n\t\t\t<SidebarControls\r\n\t\t\t\tsidebarControls={ sidebarControls }\r\n\t\t\t\tactiveSidebarControl={ activeSidebarControl }\r\n\t\t\t>\r\n\t\t\t\t<FocusControl api={ api } sidebarControls={ sidebarControls }>\r\n\t\t\t\t\t{ activeSidebar }\r\n\t\t\t\t\t{ popover }\r\n\t\t\t\t</FocusControl>\r\n\t\t\t</SidebarControls>\r\n\t\t</SlotFillProvider>\r\n\t);\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useEffect } from '@wordpress/element';\r\nimport { useDispatch, useSelect } from '@wordpress/data';\r\nimport { store as blockEditorStore } from '@wordpress/block-editor';\r\n\r\n/**\r\n * We can't just use <BlockSelectionClearer> because the customizer has\r\n * many root nodes rather than just one in the post editor.\r\n * We need to listen to the focus events in all those roots, and also in\r\n * the preview iframe.\r\n * This hook will clear the selected block when focusing outside the editor,\r\n * with a few exceptions:\r\n * 1. Focusing on popovers.\r\n * 2. Focusing on the inspector.\r\n * 3. Focusing on any modals/dialogs.\r\n * These cases are normally triggered by user interactions from the editor,\r\n * not by explicitly focusing outside the editor, hence no need for clearing.\r\n *\r\n * @param {Object} sidebarControl The sidebar control instance.\r\n * @param {Object} popoverRef     The ref object of the popover node container.\r\n */\r\nexport default function useClearSelectedBlock( sidebarControl, popoverRef ) {\r\n\tconst { hasSelectedBlock, hasMultiSelection } =\r\n\t\tuseSelect( blockEditorStore );\r\n\tconst { clearSelectedBlock } = useDispatch( blockEditorStore );\r\n\r\n\tuseEffect( () => {\r\n\t\tif ( popoverRef.current && sidebarControl ) {\r\n\t\t\tconst inspector = sidebarControl.inspector;\r\n\t\t\tconst container = sidebarControl.container[ 0 ];\r\n\t\t\tconst ownerDocument = container.ownerDocument;\r\n\t\t\tconst ownerWindow = ownerDocument.defaultView;\r\n\r\n\t\t\tfunction handleClearSelectedBlock( element ) {\r\n\t\t\t\tif (\r\n\t\t\t\t\t// 1. Make sure there are blocks being selected.\r\n\t\t\t\t\t( hasSelectedBlock() || hasMultiSelection() ) &&\r\n\t\t\t\t\t// 2. The element should exist in the DOM (not deleted).\r\n\t\t\t\t\telement &&\r\n\t\t\t\t\townerDocument.contains( element ) &&\r\n\t\t\t\t\t// 3. It should also not exist in the container, the popover, nor the dialog.\r\n\t\t\t\t\t! container.contains( element ) &&\r\n\t\t\t\t\t! popoverRef.current.contains( element ) &&\r\n\t\t\t\t\t! element.closest( '[role=\"dialog\"]' ) &&\r\n\t\t\t\t\t// 4. The inspector should not be opened.\r\n\t\t\t\t\t! inspector.expanded()\r\n\t\t\t\t) {\r\n\t\t\t\t\tclearSelectedBlock();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Handle mouse down in the same document.\r\n\t\t\tfunction handleMouseDown( event ) {\r\n\t\t\t\thandleClearSelectedBlock( event.target );\r\n\t\t\t}\r\n\t\t\t// Handle focusing outside the current document, like to iframes.\r\n\t\t\tfunction handleBlur() {\r\n\t\t\t\thandleClearSelectedBlock( ownerDocument.activeElement );\r\n\t\t\t}\r\n\r\n\t\t\townerDocument.addEventListener( 'mousedown', handleMouseDown );\r\n\t\t\townerWindow.addEventListener( 'blur', handleBlur );\r\n\r\n\t\t\treturn () => {\r\n\t\t\t\townerDocument.removeEventListener(\r\n\t\t\t\t\t'mousedown',\r\n\t\t\t\t\thandleMouseDown\r\n\t\t\t\t);\r\n\t\t\t\townerWindow.removeEventListener( 'blur', handleBlur );\r\n\t\t\t};\r\n\t\t}\r\n\t}, [\r\n\t\tpopoverRef,\r\n\t\tsidebarControl,\r\n\t\thasSelectedBlock,\r\n\t\thasMultiSelection,\r\n\t\tclearSelectedBlock,\r\n\t] );\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { __ } from '@wordpress/i18n';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport getInspectorSection from './inspector-section';\r\n\r\nconst getInspectorSectionId = ( sidebarId ) =>\r\n\t`widgets-inspector-${ sidebarId }`;\r\n\r\nexport default function getSidebarSection() {\r\n\tconst {\r\n\t\twp: { customize },\r\n\t} = window;\r\n\r\n\tconst reduceMotionMediaQuery = window.matchMedia(\r\n\t\t'(prefers-reduced-motion: reduce)'\r\n\t);\r\n\tlet isReducedMotion = reduceMotionMediaQuery.matches;\r\n\treduceMotionMediaQuery.addEventListener( 'change', ( event ) => {\r\n\t\tisReducedMotion = event.matches;\r\n\t} );\r\n\r\n\treturn class SidebarSection extends customize.Section {\r\n\t\tready() {\r\n\t\t\tconst InspectorSection = getInspectorSection();\r\n\t\t\tthis.inspector = new InspectorSection(\r\n\t\t\t\tgetInspectorSectionId( this.id ),\r\n\t\t\t\t{\r\n\t\t\t\t\ttitle: __( 'Block Settings' ),\r\n\t\t\t\t\tparentSection: this,\r\n\t\t\t\t\tcustomizeAction: [\r\n\t\t\t\t\t\t__( 'Customizing' ),\r\n\t\t\t\t\t\t__( 'Widgets' ),\r\n\t\t\t\t\t\tthis.params.title,\r\n\t\t\t\t\t].join( '  ' ),\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t\tcustomize.section.add( this.inspector );\r\n\t\t\tthis.contentContainer[ 0 ].classList.add(\r\n\t\t\t\t'customize-widgets__sidebar-section'\r\n\t\t\t);\r\n\t\t}\r\n\t\thasSubSectionOpened() {\r\n\t\t\treturn this.inspector.expanded();\r\n\t\t}\r\n\t\tonChangeExpanded( expanded, _args ) {\r\n\t\t\tconst controls = this.controls();\r\n\t\t\tconst args = {\r\n\t\t\t\t..._args,\r\n\t\t\t\tcompleteCallback() {\r\n\t\t\t\t\tcontrols.forEach( ( control ) => {\r\n\t\t\t\t\t\tcontrol.onChangeSectionExpanded?.( expanded, args );\r\n\t\t\t\t\t} );\r\n\t\t\t\t\t_args.completeCallback?.();\r\n\t\t\t\t},\r\n\t\t\t};\r\n\r\n\t\t\tif ( args.manualTransition ) {\r\n\t\t\t\tif ( expanded ) {\r\n\t\t\t\t\tthis.contentContainer.addClass( [ 'busy', 'open' ] );\r\n\t\t\t\t\tthis.contentContainer.removeClass( 'is-sub-section-open' );\r\n\t\t\t\t\tthis.contentContainer\r\n\t\t\t\t\t\t.closest( '.wp-full-overlay' )\r\n\t\t\t\t\t\t.addClass( 'section-open' );\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.contentContainer.addClass( [\r\n\t\t\t\t\t\t'busy',\r\n\t\t\t\t\t\t'is-sub-section-open',\r\n\t\t\t\t\t] );\r\n\t\t\t\t\tthis.contentContainer\r\n\t\t\t\t\t\t.closest( '.wp-full-overlay' )\r\n\t\t\t\t\t\t.addClass( 'section-open' );\r\n\t\t\t\t\tthis.contentContainer.removeClass( 'open' );\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst handleTransitionEnd = () => {\r\n\t\t\t\t\tthis.contentContainer.removeClass( 'busy' );\r\n\t\t\t\t\targs.completeCallback();\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif ( isReducedMotion ) {\r\n\t\t\t\t\thandleTransitionEnd();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.contentContainer.one(\r\n\t\t\t\t\t\t'transitionend',\r\n\t\t\t\t\t\thandleTransitionEnd\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tsuper.onChangeExpanded( expanded, args );\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n","/**\r\n * Internal dependencies\r\n */\r\nimport { settingIdToWidgetId } from '../../utils';\r\n\r\nconst { wp } = window;\r\n\r\nfunction parseWidgetId( widgetId ) {\r\n\tconst matches = widgetId.match( /^(.+)-(\\d+)$/ );\r\n\tif ( matches ) {\r\n\t\treturn {\r\n\t\t\tidBase: matches[ 1 ],\r\n\t\t\tnumber: parseInt( matches[ 2 ], 10 ),\r\n\t\t};\r\n\t}\r\n\r\n\t// Likely an old single widget.\r\n\treturn { idBase: widgetId };\r\n}\r\n\r\nfunction widgetIdToSettingId( widgetId ) {\r\n\tconst { idBase, number } = parseWidgetId( widgetId );\r\n\tif ( number ) {\r\n\t\treturn `widget_${ idBase }[${ number }]`;\r\n\t}\r\n\r\n\treturn `widget_${ idBase }`;\r\n}\r\n\r\n/**\r\n * This is a custom debounce function to call different callbacks depending on\r\n * whether it's the _leading_ call or not.\r\n *\r\n * @param {Function} leading  The callback that gets called first.\r\n * @param {Function} callback The callback that gets called after the first time.\r\n * @param {number}   timeout  The debounced time in milliseconds.\r\n * @return {Function} The debounced function.\r\n */\r\nfunction debounce( leading, callback, timeout ) {\r\n\tlet isLeading = false;\r\n\tlet timerID;\r\n\r\n\tfunction debounced( ...args ) {\r\n\t\tconst result = ( isLeading ? callback : leading ).apply( this, args );\r\n\r\n\t\tisLeading = true;\r\n\r\n\t\tclearTimeout( timerID );\r\n\r\n\t\ttimerID = setTimeout( () => {\r\n\t\t\tisLeading = false;\r\n\t\t}, timeout );\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\n\tdebounced.cancel = () => {\r\n\t\tisLeading = false;\r\n\t\tclearTimeout( timerID );\r\n\t};\r\n\r\n\treturn debounced;\r\n}\r\n\r\nexport default class SidebarAdapter {\r\n\tconstructor( setting, api ) {\r\n\t\tthis.setting = setting;\r\n\t\tthis.api = api;\r\n\r\n\t\tthis.locked = false;\r\n\t\tthis.widgetsCache = new WeakMap();\r\n\t\tthis.subscribers = new Set();\r\n\r\n\t\tthis.history = [\r\n\t\t\tthis._getWidgetIds().map( ( widgetId ) =>\r\n\t\t\t\tthis.getWidget( widgetId )\r\n\t\t\t),\r\n\t\t];\r\n\t\tthis.historyIndex = 0;\r\n\t\tthis.historySubscribers = new Set();\r\n\t\t// Debounce the input for 1 second.\r\n\t\tthis._debounceSetHistory = debounce(\r\n\t\t\tthis._pushHistory,\r\n\t\t\tthis._replaceHistory,\r\n\t\t\t1000\r\n\t\t);\r\n\r\n\t\tthis.setting.bind( this._handleSettingChange.bind( this ) );\r\n\t\tthis.api.bind( 'change', this._handleAllSettingsChange.bind( this ) );\r\n\r\n\t\tthis.undo = this.undo.bind( this );\r\n\t\tthis.redo = this.redo.bind( this );\r\n\t\tthis.save = this.save.bind( this );\r\n\t}\r\n\r\n\tsubscribe( callback ) {\r\n\t\tthis.subscribers.add( callback );\r\n\r\n\t\treturn () => {\r\n\t\t\tthis.subscribers.delete( callback );\r\n\t\t};\r\n\t}\r\n\r\n\tgetWidgets() {\r\n\t\treturn this.history[ this.historyIndex ];\r\n\t}\r\n\r\n\t_emit( ...args ) {\r\n\t\tfor ( const callback of this.subscribers ) {\r\n\t\t\tcallback( ...args );\r\n\t\t}\r\n\t}\r\n\r\n\t_getWidgetIds() {\r\n\t\treturn this.setting.get();\r\n\t}\r\n\r\n\t_pushHistory() {\r\n\t\tthis.history = [\r\n\t\t\t...this.history.slice( 0, this.historyIndex + 1 ),\r\n\t\t\tthis._getWidgetIds().map( ( widgetId ) =>\r\n\t\t\t\tthis.getWidget( widgetId )\r\n\t\t\t),\r\n\t\t];\r\n\t\tthis.historyIndex += 1;\r\n\r\n\t\tthis.historySubscribers.forEach( ( listener ) => listener() );\r\n\t}\r\n\r\n\t_replaceHistory() {\r\n\t\tthis.history[ this.historyIndex ] = this._getWidgetIds().map(\r\n\t\t\t( widgetId ) => this.getWidget( widgetId )\r\n\t\t);\r\n\t}\r\n\r\n\t_handleSettingChange() {\r\n\t\tif ( this.locked ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst prevWidgets = this.getWidgets();\r\n\r\n\t\tthis._pushHistory();\r\n\r\n\t\tthis._emit( prevWidgets, this.getWidgets() );\r\n\t}\r\n\r\n\t_handleAllSettingsChange( setting ) {\r\n\t\tif ( this.locked ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( ! setting.id.startsWith( 'widget_' ) ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst widgetId = settingIdToWidgetId( setting.id );\r\n\t\tif ( ! this.setting.get().includes( widgetId ) ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst prevWidgets = this.getWidgets();\r\n\r\n\t\tthis._pushHistory();\r\n\r\n\t\tthis._emit( prevWidgets, this.getWidgets() );\r\n\t}\r\n\r\n\t_createWidget( widget ) {\r\n\t\tconst widgetModel = wp.customize.Widgets.availableWidgets.findWhere( {\r\n\t\t\tid_base: widget.idBase,\r\n\t\t} );\r\n\r\n\t\tlet number = widget.number;\r\n\t\tif ( widgetModel.get( 'is_multi' ) && ! number ) {\r\n\t\t\twidgetModel.set(\r\n\t\t\t\t'multi_number',\r\n\t\t\t\twidgetModel.get( 'multi_number' ) + 1\r\n\t\t\t);\r\n\t\t\tnumber = widgetModel.get( 'multi_number' );\r\n\t\t}\r\n\r\n\t\tconst settingId = number\r\n\t\t\t? `widget_${ widget.idBase }[${ number }]`\r\n\t\t\t: `widget_${ widget.idBase }`;\r\n\r\n\t\tconst settingArgs = {\r\n\t\t\ttransport: wp.customize.Widgets.data.selectiveRefreshableWidgets[\r\n\t\t\t\twidgetModel.get( 'id_base' )\r\n\t\t\t]\r\n\t\t\t\t? 'postMessage'\r\n\t\t\t\t: 'refresh',\r\n\t\t\tpreviewer: this.setting.previewer,\r\n\t\t};\r\n\t\tconst setting = this.api.create(\r\n\t\t\tsettingId,\r\n\t\t\tsettingId,\r\n\t\t\t'',\r\n\t\t\tsettingArgs\r\n\t\t);\r\n\t\tsetting.set( widget.instance );\r\n\r\n\t\tconst widgetId = settingIdToWidgetId( settingId );\r\n\r\n\t\treturn widgetId;\r\n\t}\r\n\r\n\t_removeWidget( widget ) {\r\n\t\tconst settingId = widgetIdToSettingId( widget.id );\r\n\t\tconst setting = this.api( settingId );\r\n\r\n\t\tif ( setting ) {\r\n\t\t\tconst instance = setting.get();\r\n\t\t\tthis.widgetsCache.delete( instance );\r\n\t\t}\r\n\r\n\t\tthis.api.remove( settingId );\r\n\t}\r\n\r\n\t_updateWidget( widget ) {\r\n\t\tconst prevWidget = this.getWidget( widget.id );\r\n\r\n\t\t// Bail out update if nothing changed.\r\n\t\tif ( prevWidget === widget ) {\r\n\t\t\treturn widget.id;\r\n\t\t}\r\n\r\n\t\t// Update existing setting if only the widget's instance changed.\r\n\t\tif (\r\n\t\t\tprevWidget.idBase &&\r\n\t\t\twidget.idBase &&\r\n\t\t\tprevWidget.idBase === widget.idBase\r\n\t\t) {\r\n\t\t\tconst settingId = widgetIdToSettingId( widget.id );\r\n\t\t\tthis.api( settingId ).set( widget.instance );\r\n\t\t\treturn widget.id;\r\n\t\t}\r\n\r\n\t\t// Otherwise delete and re-create.\r\n\t\tthis._removeWidget( widget );\r\n\t\treturn this._createWidget( widget );\r\n\t}\r\n\r\n\tgetWidget( widgetId ) {\r\n\t\tif ( ! widgetId ) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tconst { idBase, number } = parseWidgetId( widgetId );\r\n\t\tconst settingId = widgetIdToSettingId( widgetId );\r\n\t\tconst setting = this.api( settingId );\r\n\r\n\t\tif ( ! setting ) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tconst instance = setting.get();\r\n\r\n\t\tif ( this.widgetsCache.has( instance ) ) {\r\n\t\t\treturn this.widgetsCache.get( instance );\r\n\t\t}\r\n\r\n\t\tconst widget = {\r\n\t\t\tid: widgetId,\r\n\t\t\tidBase,\r\n\t\t\tnumber,\r\n\t\t\tinstance,\r\n\t\t};\r\n\r\n\t\tthis.widgetsCache.set( instance, widget );\r\n\r\n\t\treturn widget;\r\n\t}\r\n\r\n\t_updateWidgets( nextWidgets ) {\r\n\t\tthis.locked = true;\r\n\r\n\t\tconst addedWidgetIds = [];\r\n\r\n\t\tconst nextWidgetIds = nextWidgets.map( ( nextWidget ) => {\r\n\t\t\tif ( nextWidget.id && this.getWidget( nextWidget.id ) ) {\r\n\t\t\t\taddedWidgetIds.push( null );\r\n\r\n\t\t\t\treturn this._updateWidget( nextWidget );\r\n\t\t\t}\r\n\r\n\t\t\tconst widgetId = this._createWidget( nextWidget );\r\n\r\n\t\t\taddedWidgetIds.push( widgetId );\r\n\r\n\t\t\treturn widgetId;\r\n\t\t} );\r\n\r\n\t\tconst deletedWidgets = this.getWidgets().filter(\r\n\t\t\t( widget ) => ! nextWidgetIds.includes( widget.id )\r\n\t\t);\r\n\t\tdeletedWidgets.forEach( ( widget ) => this._removeWidget( widget ) );\r\n\r\n\t\tthis.setting.set( nextWidgetIds );\r\n\r\n\t\tthis.locked = false;\r\n\r\n\t\treturn addedWidgetIds;\r\n\t}\r\n\r\n\tsetWidgets( nextWidgets ) {\r\n\t\tconst addedWidgetIds = this._updateWidgets( nextWidgets );\r\n\r\n\t\tthis._debounceSetHistory();\r\n\r\n\t\treturn addedWidgetIds;\r\n\t}\r\n\r\n\t/**\r\n\t * Undo/Redo related features\r\n\t */\r\n\thasUndo() {\r\n\t\treturn this.historyIndex > 0;\r\n\t}\r\n\r\n\thasRedo() {\r\n\t\treturn this.historyIndex < this.history.length - 1;\r\n\t}\r\n\r\n\t_seek( historyIndex ) {\r\n\t\tconst currentWidgets = this.getWidgets();\r\n\r\n\t\tthis.historyIndex = historyIndex;\r\n\r\n\t\tconst widgets = this.history[ this.historyIndex ];\r\n\r\n\t\tthis._updateWidgets( widgets );\r\n\r\n\t\tthis._emit( currentWidgets, this.getWidgets() );\r\n\r\n\t\tthis.historySubscribers.forEach( ( listener ) => listener() );\r\n\t\tthis._debounceSetHistory.cancel();\r\n\t}\r\n\r\n\tundo() {\r\n\t\tif ( ! this.hasUndo() ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis._seek( this.historyIndex - 1 );\r\n\t}\r\n\r\n\tredo() {\r\n\t\tif ( ! this.hasRedo() ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis._seek( this.historyIndex + 1 );\r\n\t}\r\n\r\n\tsubscribeHistory( listener ) {\r\n\t\tthis.historySubscribers.add( listener );\r\n\r\n\t\treturn () => {\r\n\t\t\tthis.historySubscribers.delete( listener );\r\n\t\t};\r\n\t}\r\n\r\n\tsave() {\r\n\t\tthis.api.previewer.save();\r\n\t}\r\n}\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"dom\"];","/**\r\n * WordPress dependencies\r\n */\r\nimport { dispatch } from '@wordpress/data';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport SidebarAdapter from '../components/sidebar-block-editor/sidebar-adapter';\r\nimport getInserterOuterSection from './inserter-outer-section';\r\nimport { store as customizeWidgetsStore } from '../store';\r\n\r\nconst getInserterId = ( controlId ) => `widgets-inserter-${ controlId }`;\r\n\r\nexport default function getSidebarControl() {\r\n\tconst {\r\n\t\twp: { customize },\r\n\t} = window;\r\n\r\n\treturn class SidebarControl extends customize.Control {\r\n\t\tconstructor( ...args ) {\r\n\t\t\tsuper( ...args );\r\n\r\n\t\t\tthis.subscribers = new Set();\r\n\t\t}\r\n\r\n\t\tready() {\r\n\t\t\tconst InserterOuterSection = getInserterOuterSection();\r\n\t\t\tthis.inserter = new InserterOuterSection(\r\n\t\t\t\tgetInserterId( this.id ),\r\n\t\t\t\t{}\r\n\t\t\t);\r\n\t\t\tcustomize.section.add( this.inserter );\r\n\r\n\t\t\tthis.sectionInstance = customize.section( this.section() );\r\n\r\n\t\t\tthis.inspector = this.sectionInstance.inspector;\r\n\r\n\t\t\tthis.sidebarAdapter = new SidebarAdapter( this.setting, customize );\r\n\t\t}\r\n\r\n\t\tsubscribe( callback ) {\r\n\t\t\tthis.subscribers.add( callback );\r\n\r\n\t\t\treturn () => {\r\n\t\t\t\tthis.subscribers.delete( callback );\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tonChangeSectionExpanded( expanded, args ) {\r\n\t\t\tif ( ! args.unchanged ) {\r\n\t\t\t\t// Close the inserter when the section collapses.\r\n\t\t\t\tif ( ! expanded ) {\r\n\t\t\t\t\tdispatch( customizeWidgetsStore ).setIsInserterOpened(\r\n\t\t\t\t\t\tfalse\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.subscribers.forEach( ( subscriber ) =>\r\n\t\t\t\t\tsubscriber( expanded, args )\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\tBlockControls,\r\n\tstore as blockEditorStore,\r\n} from '@wordpress/block-editor';\r\nimport { createHigherOrderComponent } from '@wordpress/compose';\r\nimport { useSelect, useDispatch } from '@wordpress/data';\r\nimport { addFilter } from '@wordpress/hooks';\r\nimport { MoveToWidgetArea, getWidgetIdFromBlock } from '@wordpress/widgets';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport {\r\n\tuseSidebarControls,\r\n\tuseActiveSidebarControl,\r\n} from '../components/sidebar-controls';\r\nimport { useFocusControl } from '../components/focus-control';\r\nimport { blockToWidget } from '../utils';\r\n\r\nconst withMoveToSidebarToolbarItem = createHigherOrderComponent(\r\n\t( BlockEdit ) => ( props ) => {\r\n\t\tlet widgetId = getWidgetIdFromBlock( props );\r\n\t\tconst sidebarControls = useSidebarControls();\r\n\t\tconst activeSidebarControl = useActiveSidebarControl();\r\n\t\tconst hasMultipleSidebars = sidebarControls?.length > 1;\r\n\t\tconst blockName = props.name;\r\n\t\tconst clientId = props.clientId;\r\n\t\tconst canInsertBlockInSidebar = useSelect(\r\n\t\t\t( select ) => {\r\n\t\t\t\t// Use an empty string to represent the root block list, which\r\n\t\t\t\t// in the customizer editor represents a sidebar/widget area.\r\n\t\t\t\treturn select( blockEditorStore ).canInsertBlockType(\r\n\t\t\t\t\tblockName,\r\n\t\t\t\t\t''\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\t[ blockName ]\r\n\t\t);\r\n\t\tconst block = useSelect(\r\n\t\t\t( select ) => select( blockEditorStore ).getBlock( clientId ),\r\n\t\t\t[ clientId ]\r\n\t\t);\r\n\t\tconst { removeBlock } = useDispatch( blockEditorStore );\r\n\t\tconst [ , focusWidget ] = useFocusControl();\r\n\r\n\t\tfunction moveToSidebar( sidebarControlId ) {\r\n\t\t\tconst newSidebarControl = sidebarControls.find(\r\n\t\t\t\t( sidebarControl ) => sidebarControl.id === sidebarControlId\r\n\t\t\t);\r\n\r\n\t\t\tif ( widgetId ) {\r\n\t\t\t\t/**\r\n\t\t\t\t * If there's a widgetId, move it to the other sidebar.\r\n\t\t\t\t */\r\n\t\t\t\tconst oldSetting = activeSidebarControl.setting;\r\n\t\t\t\tconst newSetting = newSidebarControl.setting;\r\n\r\n\t\t\t\toldSetting( oldSetting().filter( ( id ) => id !== widgetId ) );\r\n\t\t\t\tnewSetting( [ ...newSetting(), widgetId ] );\r\n\t\t\t} else {\r\n\t\t\t\t/**\r\n\t\t\t\t * If there isn't a widgetId, it's most likely a inner block.\r\n\t\t\t\t * First, remove the block in the original sidebar,\r\n\t\t\t\t * then, create a new widget in the new sidebar and get back its widgetId.\r\n\t\t\t\t */\r\n\t\t\t\tconst sidebarAdapter = newSidebarControl.sidebarAdapter;\r\n\r\n\t\t\t\tremoveBlock( clientId );\r\n\t\t\t\tconst addedWidgetIds = sidebarAdapter.setWidgets( [\r\n\t\t\t\t\t...sidebarAdapter.getWidgets(),\r\n\t\t\t\t\tblockToWidget( block ),\r\n\t\t\t\t] );\r\n\t\t\t\t// The last non-null id is the added widget's id.\r\n\t\t\t\twidgetId = addedWidgetIds.reverse().find( ( id ) => !! id );\r\n\t\t\t}\r\n\r\n\t\t\t// Move focus to the moved widget and expand the sidebar.\r\n\t\t\tfocusWidget( widgetId );\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<BlockEdit { ...props } />\r\n\t\t\t\t{ hasMultipleSidebars && canInsertBlockInSidebar && (\r\n\t\t\t\t\t<BlockControls>\r\n\t\t\t\t\t\t<MoveToWidgetArea\r\n\t\t\t\t\t\t\twidgetAreas={ sidebarControls.map(\r\n\t\t\t\t\t\t\t\t( sidebarControl ) => ( {\r\n\t\t\t\t\t\t\t\t\tid: sidebarControl.id,\r\n\t\t\t\t\t\t\t\t\tname: sidebarControl.params.label,\r\n\t\t\t\t\t\t\t\t\tdescription:\r\n\t\t\t\t\t\t\t\t\t\tsidebarControl.params.description,\r\n\t\t\t\t\t\t\t\t} )\r\n\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\tcurrentWidgetAreaId={ activeSidebarControl?.id }\r\n\t\t\t\t\t\t\tonSelect={ moveToSidebar }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</BlockControls>\r\n\t\t\t\t) }\r\n\t\t\t</>\r\n\t\t);\r\n\t},\r\n\t'withMoveToSidebarToolbarItem'\r\n);\r\n\r\naddFilter(\r\n\t'editor.BlockEdit',\r\n\t'core/customize-widgets/block-edit',\r\n\twithMoveToSidebarToolbarItem\r\n);\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { addFilter } from '@wordpress/hooks';\r\nimport { MediaUpload } from '@wordpress/media-utils';\r\n\r\nconst replaceMediaUpload = () => MediaUpload;\r\n\r\naddFilter(\r\n\t'editor.MediaUpload',\r\n\t'core/edit-widgets/replace-media-upload',\r\n\treplaceMediaUpload\r\n);\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { createHigherOrderComponent } from '@wordpress/compose';\r\nimport { addFilter } from '@wordpress/hooks';\r\n\r\nconst { wp } = window;\r\n\r\nconst withWideWidgetDisplay = createHigherOrderComponent(\r\n\t( BlockEdit ) => ( props ) => {\r\n\t\tconst { idBase } = props.attributes;\r\n\t\tconst isWide =\r\n\t\t\twp.customize.Widgets.data.availableWidgets.find(\r\n\t\t\t\t( widget ) => widget.id_base === idBase\r\n\t\t\t)?.is_wide ?? false;\r\n\r\n\t\treturn <BlockEdit { ...props } isWide={ isWide } />;\r\n\t},\r\n\t'withWideWidgetDisplay'\r\n);\r\n\r\naddFilter(\r\n\t'editor.BlockEdit',\r\n\t'core/customize-widgets/wide-widget-display',\r\n\twithWideWidgetDisplay\r\n);\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { createRoot } from '@wordpress/element';\r\nimport {\r\n\tregisterCoreBlocks,\r\n\t__experimentalGetCoreBlocks,\r\n\t__experimentalRegisterExperimentalCoreBlocks,\r\n} from '@wordpress/block-library';\r\nimport {\r\n\tregisterLegacyWidgetBlock,\r\n\tregisterLegacyWidgetVariations,\r\n\tregisterWidgetGroupBlock,\r\n} from '@wordpress/widgets';\r\nimport {\r\n\tsetFreeformContentHandlerName,\r\n\tstore as blocksStore,\r\n} from '@wordpress/blocks';\r\nimport { dispatch } from '@wordpress/data';\r\nimport { store as preferencesStore } from '@wordpress/preferences';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport CustomizeWidgets from './components/customize-widgets';\r\nimport getSidebarSection from './controls/sidebar-section';\r\nimport getSidebarControl from './controls/sidebar-control';\r\nimport './filters';\r\n\r\nconst { wp } = window;\r\n\r\nconst DISABLED_BLOCKS = [\r\n\t'core/more',\r\n\t'core/block',\r\n\t'core/freeform',\r\n\t'core/template-part',\r\n];\r\nconst ENABLE_EXPERIMENTAL_FSE_BLOCKS = false;\r\n\r\n/**\r\n * Initializes the widgets block editor in the customizer.\r\n *\r\n * @param {string} editorName          The editor name.\r\n * @param {Object} blockEditorSettings Block editor settings.\r\n */\r\nexport function initialize( editorName, blockEditorSettings ) {\r\n\tdispatch( preferencesStore ).setDefaults( 'core/customize-widgets', {\r\n\t\tfixedToolbar: false,\r\n\t\twelcomeGuide: true,\r\n\t} );\r\n\r\n\tdispatch( blocksStore ).reapplyBlockTypeFilters();\r\n\tconst coreBlocks = __experimentalGetCoreBlocks().filter( ( block ) => {\r\n\t\treturn ! (\r\n\t\t\tDISABLED_BLOCKS.includes( block.name ) ||\r\n\t\t\tblock.name.startsWith( 'core/post' ) ||\r\n\t\t\tblock.name.startsWith( 'core/query' ) ||\r\n\t\t\tblock.name.startsWith( 'core/site' ) ||\r\n\t\t\tblock.name.startsWith( 'core/navigation' )\r\n\t\t);\r\n\t} );\r\n\tregisterCoreBlocks( coreBlocks );\r\n\tregisterLegacyWidgetBlock();\r\n\tif ( process.env.IS_GUTENBERG_PLUGIN ) {\r\n\t\t__experimentalRegisterExperimentalCoreBlocks( {\r\n\t\t\tenableFSEBlocks: ENABLE_EXPERIMENTAL_FSE_BLOCKS,\r\n\t\t} );\r\n\t}\r\n\tregisterLegacyWidgetVariations( blockEditorSettings );\r\n\tregisterWidgetGroupBlock();\r\n\r\n\t// As we are unregistering `core/freeform` to avoid the Classic block, we must\r\n\t// replace it with something as the default freeform content handler. Failure to\r\n\t// do this will result in errors in the default block parser.\r\n\t// see: https://github.com/WordPress/gutenberg/issues/33097\r\n\tsetFreeformContentHandlerName( 'core/html' );\r\n\r\n\tconst SidebarControl = getSidebarControl( blockEditorSettings );\r\n\r\n\twp.customize.sectionConstructor.sidebar = getSidebarSection();\r\n\twp.customize.controlConstructor.sidebar_block_editor = SidebarControl;\r\n\r\n\tconst container = document.createElement( 'div' );\r\n\tdocument.body.appendChild( container );\r\n\r\n\twp.customize.bind( 'ready', () => {\r\n\t\tconst sidebarControls = [];\r\n\t\twp.customize.control.each( ( control ) => {\r\n\t\t\tif ( control instanceof SidebarControl ) {\r\n\t\t\t\tsidebarControls.push( control );\r\n\t\t\t}\r\n\t\t} );\r\n\r\n\t\tcreateRoot( container ).render(\r\n\t\t\t<CustomizeWidgets\r\n\t\t\t\tapi={ wp.customize }\r\n\t\t\t\tsidebarControls={ sidebarControls }\r\n\t\t\t\tblockEditorSettings={ blockEditorSettings }\r\n\t\t\t/>\r\n\t\t);\r\n\t} );\r\n}\r\nexport { store } from './store';\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { ESCAPE } from '@wordpress/keycodes';\r\nimport { focus } from '@wordpress/dom';\r\nimport { dispatch } from '@wordpress/data';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as customizeWidgetsStore } from '../store';\r\n\r\nexport default function getInserterOuterSection() {\r\n\tconst {\r\n\t\twp: { customize },\r\n\t} = window;\r\n\r\n\tconst OuterSection = customize.OuterSection;\r\n\t// Override the OuterSection class to handle multiple outer sections.\r\n\t// It closes all the other outer sections whenever one is opened.\r\n\t// The result is that at most one outer section can be opened at the same time.\r\n\tcustomize.OuterSection = class extends OuterSection {\r\n\t\tonChangeExpanded( expanded, args ) {\r\n\t\t\tif ( expanded ) {\r\n\t\t\t\tcustomize.section.each( ( section ) => {\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\tsection.params.type === 'outer' &&\r\n\t\t\t\t\t\tsection.id !== this.id\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tif ( section.expanded() ) {\r\n\t\t\t\t\t\t\tsection.collapse();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} );\r\n\t\t\t}\r\n\r\n\t\t\treturn super.onChangeExpanded( expanded, args );\r\n\t\t}\r\n\t};\r\n\t// Handle constructor so that \"params.type\" can be correctly pointed to \"outer\".\r\n\tcustomize.sectionConstructor.outer = customize.OuterSection;\r\n\r\n\treturn class InserterOuterSection extends customize.OuterSection {\r\n\t\tconstructor( ...args ) {\r\n\t\t\tsuper( ...args );\r\n\r\n\t\t\t// This is necessary since we're creating a new class which is not identical to the original OuterSection.\r\n\t\t\t// @See https://github.com/WordPress/wordpress-develop/blob/42b05c397c50d9dc244083eff52991413909d4bd/src/js/_enqueues/wp/customize/controls.js#L1427-L1436\r\n\t\t\tthis.params.type = 'outer';\r\n\r\n\t\t\tthis.activeElementBeforeExpanded = null;\r\n\r\n\t\t\tconst ownerWindow =\r\n\t\t\t\tthis.contentContainer[ 0 ].ownerDocument.defaultView;\r\n\r\n\t\t\t// Handle closing the inserter when pressing the Escape key.\r\n\t\t\townerWindow.addEventListener(\r\n\t\t\t\t'keydown',\r\n\t\t\t\t( event ) => {\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\tthis.expanded() &&\r\n\t\t\t\t\t\t( event.keyCode === ESCAPE ||\r\n\t\t\t\t\t\t\tevent.code === 'Escape' ) &&\r\n\t\t\t\t\t\t! event.defaultPrevented\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\tevent.stopPropagation();\r\n\t\t\t\t\t\tdispatch( customizeWidgetsStore ).setIsInserterOpened(\r\n\t\t\t\t\t\t\tfalse\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t// Use capture mode to make this run before other event listeners.\r\n\t\t\t\ttrue\r\n\t\t\t);\r\n\r\n\t\t\tthis.contentContainer.addClass( 'widgets-inserter' );\r\n\r\n\t\t\t// Set a flag if the state is being changed from open() or close().\r\n\t\t\t// Don't propagate the event if it's an internal action to prevent infinite loop.\r\n\t\t\tthis.isFromInternalAction = false;\r\n\t\t\tthis.expanded.bind( () => {\r\n\t\t\t\tif ( ! this.isFromInternalAction ) {\r\n\t\t\t\t\t// Propagate the event to React to sync the state.\r\n\t\t\t\t\tdispatch( customizeWidgetsStore ).setIsInserterOpened(\r\n\t\t\t\t\t\tthis.expanded()\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t\tthis.isFromInternalAction = false;\r\n\t\t\t} );\r\n\t\t}\r\n\t\topen() {\r\n\t\t\tif ( ! this.expanded() ) {\r\n\t\t\t\tconst contentContainer = this.contentContainer[ 0 ];\r\n\t\t\t\tthis.activeElementBeforeExpanded =\r\n\t\t\t\t\tcontentContainer.ownerDocument.activeElement;\r\n\r\n\t\t\t\tthis.isFromInternalAction = true;\r\n\r\n\t\t\t\tthis.expand( {\r\n\t\t\t\t\tcompleteCallback() {\r\n\t\t\t\t\t\t// We have to do this in a \"completeCallback\" or else the elements will not yet be visible/tabbable.\r\n\t\t\t\t\t\t// The first one should be the close button,\r\n\t\t\t\t\t\t// we want to skip it and choose the second one instead, which is the search box.\r\n\t\t\t\t\t\tconst searchBox =\r\n\t\t\t\t\t\t\tfocus.tabbable.find( contentContainer )[ 1 ];\r\n\t\t\t\t\t\tif ( searchBox ) {\r\n\t\t\t\t\t\t\tsearchBox.focus();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t} );\r\n\t\t\t}\r\n\t\t}\r\n\t\tclose() {\r\n\t\t\tif ( this.expanded() ) {\r\n\t\t\t\tconst contentContainer = this.contentContainer[ 0 ];\r\n\t\t\t\tconst activeElement =\r\n\t\t\t\t\tcontentContainer.ownerDocument.activeElement;\r\n\r\n\t\t\t\tthis.isFromInternalAction = true;\r\n\r\n\t\t\t\tthis.collapse( {\r\n\t\t\t\t\tcompleteCallback() {\r\n\t\t\t\t\t\t// Return back the focus when closing the inserter.\r\n\t\t\t\t\t\t// Only do this if the active element which triggers the action is inside the inserter,\r\n\t\t\t\t\t\t// (the close button for instance). In that case the focus will be lost.\r\n\t\t\t\t\t\t// Otherwise, we don't hijack the focus when the user is focusing on other elements\r\n\t\t\t\t\t\t// (like the quick inserter).\r\n\t\t\t\t\t\tif ( contentContainer.contains( activeElement ) ) {\r\n\t\t\t\t\t\t\t// Return back the focus when closing the inserter.\r\n\t\t\t\t\t\t\tif ( this.activeElementBeforeExpanded ) {\r\n\t\t\t\t\t\t\t\tthis.activeElementBeforeExpanded.focus();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t} );\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n","export default function getInspectorSection() {\r\n\tconst {\r\n\t\twp: { customize },\r\n\t} = window;\r\n\r\n\treturn class InspectorSection extends customize.Section {\r\n\t\tconstructor( id, options ) {\r\n\t\t\tsuper( id, options );\r\n\r\n\t\t\tthis.parentSection = options.parentSection;\r\n\r\n\t\t\tthis.returnFocusWhenClose = null;\r\n\t\t\tthis._isOpen = false;\r\n\t\t}\r\n\t\tget isOpen() {\r\n\t\t\treturn this._isOpen;\r\n\t\t}\r\n\t\tset isOpen( value ) {\r\n\t\t\tthis._isOpen = value;\r\n\t\t\tthis.triggerActiveCallbacks();\r\n\t\t}\r\n\t\tready() {\r\n\t\t\tthis.contentContainer[ 0 ].classList.add(\r\n\t\t\t\t'customize-widgets-layout__inspector'\r\n\t\t\t);\r\n\t\t}\r\n\t\tisContextuallyActive() {\r\n\t\t\treturn this.isOpen;\r\n\t\t}\r\n\t\tonChangeExpanded( expanded, args ) {\r\n\t\t\tsuper.onChangeExpanded( expanded, args );\r\n\r\n\t\t\tif ( this.parentSection && ! args.unchanged ) {\r\n\t\t\t\tif ( expanded ) {\r\n\t\t\t\t\tthis.parentSection.collapse( {\r\n\t\t\t\t\t\tmanualTransition: true,\r\n\t\t\t\t\t} );\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.parentSection.expand( {\r\n\t\t\t\t\t\tmanualTransition: true,\r\n\t\t\t\t\t\tcompleteCallback: () => {\r\n\t\t\t\t\t\t\t// Return focus after finishing the transition.\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\tthis.returnFocusWhenClose &&\r\n\t\t\t\t\t\t\t\t! this.contentContainer[ 0 ].contains(\r\n\t\t\t\t\t\t\t\t\tthis.returnFocusWhenClose\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\tthis.returnFocusWhenClose.focus();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t} );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\topen( { returnFocusWhenClose } = {} ) {\r\n\t\t\tthis.isOpen = true;\r\n\t\t\tthis.returnFocusWhenClose = returnFocusWhenClose;\r\n\r\n\t\t\tthis.expand( {\r\n\t\t\t\tallowMultiple: true,\r\n\t\t\t} );\r\n\t\t}\r\n\t\tclose() {\r\n\t\t\tthis.collapse( {\r\n\t\t\t\tallowMultiple: true,\r\n\t\t\t} );\r\n\t\t}\r\n\t\tcollapse( options ) {\r\n\t\t\t// Overridden collapse() function. Mostly call the parent collapse(), but also\r\n\t\t\t// move our .isOpen to false.\r\n\t\t\t// Initially, I tried tracking this with onChangeExpanded(), but it doesn't work\r\n\t\t\t// because the block settings sidebar is a layer \"on top of\" the G editor sidebar.\r\n\t\t\t//\r\n\t\t\t// For example, when closing the block settings sidebar, the G\r\n\t\t\t// editor sidebar would display, and onChangeExpanded in\r\n\t\t\t// inspector-section would run with expanded=true, but I want\r\n\t\t\t// isOpen to be false when the block settings is closed.\r\n\t\t\tthis.isOpen = false;\r\n\t\t\tsuper.collapse( options );\r\n\t\t}\r\n\t\ttriggerActiveCallbacks() {\r\n\t\t\t// Manually fire the callbacks associated with moving this.active\r\n\t\t\t// from false to true.  \"active\" is always true for this section,\r\n\t\t\t// and \"isContextuallyActive\" reflects if the block settings\r\n\t\t\t// sidebar is currently visible, that is, it has replaced the main\r\n\t\t\t// Gutenberg view.\r\n\t\t\t// The WP customizer only checks \".isContextuallyActive()\" when\r\n\t\t\t// \".active\" changes values. But our \".active\" never changes value.\r\n\t\t\t// The WP customizer never foresaw a section being used a way we\r\n\t\t\t// fit the block settings sidebar into a section. By manually\r\n\t\t\t// triggering the \"this.active\" callbacks, we force the WP\r\n\t\t\t// customizer to query our .isContextuallyActive() function and\r\n\t\t\t// update its view of our status.\r\n\t\t\tthis.active.callbacks.fireWith( this.active, [ false, true ] );\r\n\t\t}\r\n\t};\r\n}\r\n"],"names":["hasOwn","hasOwnProperty","classNames","classes","i","arguments","length","arg","argType","push","Array","isArray","inner","apply","toString","Object","prototype","key","call","join","module","exports","default","equal","a","b","constructor","keys","Map","size","entries","has","get","Set","ArrayBuffer","isView","RegExp","source","flags","valueOf","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","n","getter","__esModule","d","definition","o","defineProperty","enumerable","obj","prop","r","Symbol","toStringTag","value","window","CopyButton","text","children","ref","useCopyToClipboard","createElement","Button","variant","ErrorBoundary","Component","super","this","state","error","componentDidCatch","setState","doAction","render","Warning","className","actions","stack","__","props","inspector","closeMenu","selectedBlockClientId","useSelect","select","blockEditorStore","getSelectedBlockClientId","selectedBlock","useMemo","document","getElementById","MenuItem","onClick","open","returnFocusWhenClose","SVG","xmlns","viewBox","Path","combineReducers","blockInserterPanel","action","type","EMPTY_INSERTION_POINT","rootClientId","insertionIndex","isInserterOpened","__experimentalGetInsertionPoint","setIsInserterOpened","storeConfig","reducer","selectors","store","createReduxStore","register","Inserter","setIsOpened","inserterTitleId","useInstanceId","insertionPoint","customizeWidgetsStore","id","icon","closeSmall","Library","__experimentalInsertionIndex","showInserterHelpPanel","onSelect","textFormattingShortcuts","keyCombination","modifier","character","description","KeyCombination","forceAriaLabel","shortcut","displayShortcutList","ariaLabel","shortcutAriaLabel","map","index","Fragment","aliases","alias","name","getShortcutKeyCombination","getShortcutDescription","getShortcutAliases","keyboardShortcutsStore","Shortcut","ShortcutList","shortcuts","role","DynamicShortcut","ShortcutSection","title","classnames","ShortcutCategorySection","categoryName","additionalShortcuts","categoryShortcuts","getCategoryShortcuts","concat","KeyboardShortcutHelpModal","isModalActive","toggleModal","registerShortcut","useDispatch","category","useShortcut","Modal","onRequestClose","MoreMenu","isKeyboardShortcutsModalActive","setIsKeyboardShortcutsModalVisible","useState","toggleKeyboardShortcutsModal","ToolbarDropdownMenu","moreVertical","label","popoverProps","placement","toggleProps","tooltipPosition","MenuGroup","_x","PreferenceToggleMenuItem","scope","info","messageActivated","messageDeactivated","displayShortcut","access","external","href","target","rel","VisuallyHidden","as","sidebar","inserter","isFixedToolbarActive","hasUndo","hasRedo","setUndoRedo","isAppleOS","primaryShift","primary","useEffect","subscribeHistory","NavigableToolbar","ToolbarButton","isRTL","redoIcon","undoIcon","undo","redo","isPressed","plus","isOpen","createPortal","contentContainer","settingIdToWidgetId","settingId","matches","match","parseInt","blockToWidget","block","existingWidget","widget","attributes","instance","encoded","hash","raw","rest","idBase","is_widget_customizer_js_value","encoded_serialized_instance","instance_hash_key","raw_instance","widgetClass","content","serialize","form","rendered","restExistingWidget","widgetToBlock","number","_raw$content","parsedBlocks","parse","__unstableSkipAutop","createBlock","addWidgetIdToBlock","FocusControlContext","createContext","FocusControl","api","sidebarControls","focusedWidgetIdRef","setFocusedWidgetIdRef","current","focusWidget","useCallback","widgetId","sidebarControl","setting","includes","sectionInstance","expand","completeCallback","handleFocus","previewBound","handleReady","previewer","preview","bind","unbind","context","Provider","useFocusControl","useContext","lock","unlock","__dangerousOptInToUnstableAPIsOnlyForCoreModules","ExperimentalBlockEditorProvider","blockEditorPrivateApis","SidebarEditorProvider","settings","blocks","onInput","onChange","setBlocks","getWidgets","subscribe","prevWidgets","nextWidgets","prevBlocks","prevWidgetsMap","prevBlocksMap","getWidgetIdFromBlock","nextBlocks","nextWidget","prevWidget","isShallowEqual","onChangeBlocks","nextBlock","prevBlock","getWidget","fastDeepEqual","addedWidgetIds","setWidgets","reduce","updatedNextBlocks","addedWidgetId","slice","useSidebarBlockEditor","selectBlock","blocksRef","useRef","focusedBlock","find","clientId","blockNode","querySelector","focus","useBlocksFocusControl","useSubRegistry","WelcomeGuide","toggle","preferencesStore","isEntirelyBlockWidgets","every","startsWith","srcSet","media","src","width","height","alt","ExternalLink","KeyboardShortcuts","save","replaceBlocks","getBlockName","getBlockAttributes","handleTextLevelShortcut","event","level","preventDefault","destinationBlockName","currentClientId","blockName","textAlign","destinationTextAlign","forEach","Register","unregisterShortcut","BlockAppender","isBlocksListEmpty","getBlockCount","ownerDocument","activeElement","body","ButtonBlockAppender","ExperimentalBlockCanvas","BlockCanvas","SidebarBlockEditor","blockEditorSettings","close","updater","selectStore","useInserter","isMediumViewport","useViewportMatch","hasUploadPermissions","keepCaretInsideBlock","isWelcomeGuideActive","_select$canUser","coreStore","canUser","mediaUploadBlockEditor","onError","argumentsObject","uploadMedia","wpAllowedMimeTypes","allowedMimeTypes","message","__experimentalSetIsInserterOpened","mediaUpload","hasFixedToolbar","__unstableHasCustomAppender","Header","BlockToolbar","hideDragHandle","shouldIframe","styles","defaultEditorStyles","BlockList","renderAppender","onSubmit","BlockInspector","__unstableBlockSettingsMenuFirstItem","onClose","BlockInspectorButton","SidebarControlsContext","SidebarControls","activeSidebarControl","CustomizeWidgets","setActiveSidebarControl","parentContainer","popoverRef","hasSelectedBlock","hasMultiSelection","clearSelectedBlock","container","ownerWindow","defaultView","handleClearSelectedBlock","element","contains","closest","expanded","handleMouseDown","handleBlur","addEventListener","removeEventListener","useClearSelectedBlock","unsubscribers","unsubscriber","activeSidebar","sidebarAdapter","popover","Popover","Slot","SlotFillProvider","getInspectorSectionId","sidebarId","wp","parseWidgetId","widgetIdToSettingId","SidebarAdapter","locked","widgetsCache","WeakMap","subscribers","history","_getWidgetIds","historyIndex","historySubscribers","_debounceSetHistory","leading","callback","timeout","timerID","isLeading","debounced","args","result","clearTimeout","setTimeout","cancel","debounce","_pushHistory","_replaceHistory","_handleSettingChange","_handleAllSettingsChange","add","delete","_emit","listener","_createWidget","widgetModel","customize","Widgets","availableWidgets","findWhere","id_base","set","settingArgs","transport","data","selectiveRefreshableWidgets","create","_removeWidget","remove","_updateWidget","_updateWidgets","nextWidgetIds","filter","_seek","currentWidgets","widgets","getInserterId","controlId","withMoveToSidebarToolbarItem","createHigherOrderComponent","BlockEdit","useSidebarControls","useActiveSidebarControl","hasMultipleSidebars","canInsertBlockInSidebar","canInsertBlockType","getBlock","removeBlock","BlockControls","MoveToWidgetArea","widgetAreas","params","currentWidgetAreaId","sidebarControlId","newSidebarControl","oldSetting","newSetting","reverse","addFilter","replaceMediaUpload","MediaUpload","withWideWidgetDisplay","_wp$customize$Widgets","isWide","is_wide","DISABLED_BLOCKS","ENABLE_EXPERIMENTAL_FSE_BLOCKS","initialize","editorName","dispatch","setDefaults","fixedToolbar","welcomeGuide","blocksStore","reapplyBlockTypeFilters","coreBlocks","__experimentalGetCoreBlocks","registerCoreBlocks","registerLegacyWidgetBlock","__experimentalRegisterExperimentalCoreBlocks","enableFSEBlocks","registerLegacyWidgetVariations","registerWidgetGroupBlock","setFreeformContentHandlerName","SidebarControl","Control","ready","InserterOuterSection","OuterSection","onChangeExpanded","section","each","collapse","sectionConstructor","outer","activeElementBeforeExpanded","keyCode","ESCAPE","code","defaultPrevented","stopPropagation","addClass","isFromInternalAction","searchBox","tabbable","getInserterOuterSection","onChangeSectionExpanded","unchanged","subscriber","getSidebarControl","reduceMotionMediaQuery","matchMedia","isReducedMotion","Section","InspectorSection","options","parentSection","_isOpen","triggerActiveCallbacks","classList","isContextuallyActive","manualTransition","allowMultiple","active","callbacks","fireWith","getInspectorSection","customizeAction","hasSubSectionOpened","_args","controls","control","removeClass","handleTransitionEnd","one","getSidebarSection","controlConstructor","sidebar_block_editor","appendChild","createRoot"],"sourceRoot":""}