{"version":3,"file":"./build/block-editor/index.min.js","mappings":"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K,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,KACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,KACL,EAAK,KACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,KACL,EAAK,KACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,KACL,EAAK,KACL,EAAK,IACL,EAAK,IACL,EAAK,KACL,EAAK,KACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,EAAK,IACL,EAAK,IACL,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,EAAI,IACJ,EAAI,IACJ,EAAI,IACJ,EAAI,KAGD3xB,EAAQ3H,OAAOlC,KAAKw7B,GAAc11B,KAAK,KACvC21B,EAAa,IAAI/wB,OAAOb,EAAO,KAC/B6xB,EAAc,IAAIhxB,OAAOb,EAAO,IAEpC,SAAS8xB,EAAQrnB,GAChB,OAAOknB,EAAalnB,EACrB,CAEA,IAAIsnB,EAAgB,SAASjT,GAC5B,OAAOA,EAAO1iB,QAAQw1B,EAAYE,EACnC,EAMA77B,EAAOC,QAAU67B,EACjB97B,EAAOC,QAAQK,IALE,SAASuoB,GACzB,QAASA,EAAOrU,MAAMonB,EACvB,EAIA57B,EAAOC,QAAQ8sB,OAAS+O,C,8BC9dxB,IAAIngB,EAAY,EAAQ,MAExB,MAAMC,UAAeD,EACnB,WAAArR,CAAYuR,GACVC,MAAMD,GACNhU,KAAKiN,KAAO,QACd,CAEA,MAAAiH,IAAUC,GAER,OADKnU,KAAKoU,QAAQ9D,QAAOtQ,KAAKsQ,MAAQ,IAC/B2D,MAAMC,UAAUC,EACzB,CAEA,OAAAE,IAAWF,GAET,OADKnU,KAAKoU,QAAQ9D,QAAOtQ,KAAKsQ,MAAQ,IAC/B2D,MAAMI,WAAWF,EAC1B,EAGFhc,EAAOC,QAAU2b,EACjBA,EAAOzW,QAAUyW,EAEjBD,EAAUQ,eAAeP,E,8BCtBzB,IAAIQ,EAAO,EAAQ,MAEnB,MAAMC,UAAgBD,EACpB,WAAA9R,CAAYuR,GACVC,MAAMD,GACNhU,KAAKiN,KAAO,SACd,EAGF9U,EAAOC,QAAUoc,EACjBA,EAAQlX,QAAUkX,C,8BCVlB,IAKI5D,EAAO6D,EAAMV,EAAQjF,GALrB,QAAE4F,EAAO,GAAEC,GAAO,EAAQ,MAC1B3E,EAAc,EAAQ,MACtBwE,EAAU,EAAQ,MAClBD,EAAO,EAAQ,MAInB,SAASK,EAAYtE,GACnB,OAAOA,EAAM/X,KAAIoF,IACXA,EAAE2S,QAAO3S,EAAE2S,MAAQsE,EAAYjX,EAAE2S,eAC9B3S,EAAEqF,OACFrF,IAEX,CAEA,SAASkX,EAAY3Y,GAEnB,GADAA,EAAKwY,IAAW,EACZxY,EAAKkY,QAAQ9D,MACf,IAAK,IAAI3S,KAAKzB,EAAKkY,QAAQ9D,MACzBuE,EAAYlX,EAGlB,CAEA,MAAMmW,UAAkBS,EACtB,MAAAL,IAAUC,GACR,IAAK,IAAIW,KAASX,EAAU,CAC1B,IAAI7D,EAAQtQ,KAAKuV,UAAUT,EAAO9U,KAAKyB,MACvC,IAAK,IAAIvF,KAAQoU,EAAOtQ,KAAKoU,QAAQ9D,MAAMvX,KAAKmD,EAClD,CAIA,OAFA8D,KAAKwV,YAEExV,IACT,CAEA,SAAA6V,CAAUC,GAER,GADA7B,MAAM4B,UAAUC,GACZ9V,KAAKsQ,MACP,IAAK,IAAIpU,KAAQ8D,KAAKsQ,MAAOpU,EAAK2Z,UAAUC,EAEhD,CAEA,IAAAf,CAAKhV,GACH,IAAKC,KAAKoU,QAAQ9D,MAAO,OACzB,IAEIrX,EAAOoV,EAFP2G,EAAWhV,KAAKiV,cAGpB,KAAOjV,KAAKkV,QAAQF,GAAYhV,KAAKoU,QAAQ9D,MAAMlT,SACjDnE,EAAQ+G,KAAKkV,QAAQF,GACrB3G,EAAStO,EAASC,KAAKoU,QAAQ9D,MAAMrX,GAAQA,IAC9B,IAAXoV,IAEJrO,KAAKkV,QAAQF,IAAa,EAI5B,cADOhV,KAAKkV,QAAQF,GACb3G,CACT,CAEA,KAAAoI,CAAMC,GACJ,OAAO1W,KAAKsQ,MAAMmG,MAAMC,EAC1B,CAEA,WAAAzB,GACOjV,KAAKoX,WAAUpX,KAAKoX,SAAW,GAC/BpX,KAAKkV,UAASlV,KAAKkV,QAAU,CAAC,GAEnClV,KAAKoX,UAAY,EACjB,IAAIpC,EAAWhV,KAAKoX,SAGpB,OAFApX,KAAKkV,QAAQF,GAAY,EAElBA,CACT,CAEA,iBAAAgC,GACE,MAAO,CACLpe,IAAG,CAACsD,EAAMkC,IACK,YAATA,EACKlC,EACGA,EAAKkC,GAGN,SAATA,GACiB,iBAATA,GAAqBA,EAAKmO,WAAW,QAEtC,IAAI0K,IACF/a,EAAKkC,MACP6Y,EAAK1e,KAAIoF,GACO,mBAANA,EACF,CAACmX,EAAO7b,IAAU0E,EAAEmX,EAAMoC,UAAWje,GAErC0E,KAKG,UAATS,GAA6B,SAATA,EACtB0S,GACE5U,EAAKkC,IAAM,CAAC0W,KAAUqC,IAC3BrG,EAAGgE,EAAMoC,aAAcC,KAGT,SAAT/Y,EACF,IAAMlC,EAAK+S,OAAOiI,UACP,UAAT9Y,EACFlC,EAAKoU,MAAM/X,KAAIoF,GAAKA,EAAEuZ,YACX,UAAT9Y,GAA6B,SAATA,EACtBlC,EAAKkC,GAAM8Y,UAEXhb,EAAKkC,GA7BLlC,EAAKkC,GAiChBvF,IAAG,CAACqD,EAAMkC,EAAMtF,KACVoD,EAAKkC,KAAUtF,IACnBoD,EAAKkC,GAAQtF,EACA,SAATsF,GAA4B,WAATA,GAA8B,aAATA,GAC1ClC,EAAKsZ,cAH0B,GAQvC,CAEA,KAAAvc,CAAM6b,GACJ,MAAqB,iBAAVA,EAA2BA,GAClCA,EAAMV,UAASU,EAAQA,EAAMV,SAC1BpU,KAAKoU,QAAQ9D,MAAM3X,QAAQmc,GACpC,CAEA,WAAAoB,CAAYF,EAAOC,GACjB,IAKIhd,EALAi7B,EAAal0B,KAAK/G,MAAM+c,GACxB1F,EAAQtQ,KAAKuV,UAAUU,EAAKjW,KAAKoU,QAAQ9D,MAAM4jB,IAAaze,UAChEye,EAAal0B,KAAK/G,MAAM+c,GACxB,IAAK,IAAI9Z,KAAQoU,EAAOtQ,KAAKoU,QAAQ9D,MAAMpX,OAAOg7B,EAAa,EAAG,EAAGh4B,GAGrE,IAAK,IAAI0Z,KAAM5V,KAAKkV,QAClBjc,EAAQ+G,KAAKkV,QAAQU,GACjBse,EAAaj7B,IACf+G,KAAKkV,QAAQU,GAAM3c,EAAQqX,EAAMlT,QAMrC,OAFA4C,KAAKwV,YAEExV,IACT,CAEA,YAAA+V,CAAaC,EAAOC,GAClB,IAMIhd,EANAi7B,EAAal0B,KAAK/G,MAAM+c,GACxB/I,EAAsB,IAAfinB,GAAmB,UAC1B5jB,EAAQtQ,KAAKuV,UAAUU,EAAKjW,KAAKoU,QAAQ9D,MAAM4jB,GAAajnB,GAAMwI,UACtEye,EAAal0B,KAAK/G,MAAM+c,GACxB,IAAK,IAAI9Z,KAAQoU,EAAOtQ,KAAKoU,QAAQ9D,MAAMpX,OAAOg7B,EAAY,EAAGh4B,GAGjE,IAAK,IAAI0Z,KAAM5V,KAAKkV,QAClBjc,EAAQ+G,KAAKkV,QAAQU,GACjBse,GAAcj7B,IAChB+G,KAAKkV,QAAQU,GAAM3c,EAAQqX,EAAMlT,QAMrC,OAFA4C,KAAKwV,YAEExV,IACT,CAEA,SAAAuV,CAAUjF,EAAOqG,GACf,GAAqB,iBAAVrG,EACTA,EAAQsE,EAAYhE,EAAMN,GAAOA,YAC5B,QAAqB,IAAVA,EAChBA,EAAQ,QACH,GAAIrT,MAAMc,QAAQuS,GAAQ,CAC/BA,EAAQA,EAAM/Q,MAAM,GACpB,IAAK,IAAI5B,KAAK2S,EACR3S,EAAEoP,QAAQpP,EAAEoP,OAAO7I,YAAYvG,EAAG,SAE1C,MAAO,GAAmB,SAAf2S,EAAMrD,MAAiC,aAAdjN,KAAKiN,KAAqB,CAC5DqD,EAAQA,EAAMA,MAAM/Q,MAAM,GAC1B,IAAK,IAAI5B,KAAK2S,EACR3S,EAAEoP,QAAQpP,EAAEoP,OAAO7I,YAAYvG,EAAG,SAE1C,MAAO,GAAI2S,EAAMrD,KACfqD,EAAQ,CAACA,QACJ,GAAIA,EAAMlS,KAAM,CACrB,QAA2B,IAAhBkS,EAAMxX,MACf,MAAM,IAAI8d,MAAM,0CACgB,iBAAhBtG,EAAMxX,QACtBwX,EAAMxX,MAAQsQ,OAAOkH,EAAMxX,QAE7BwX,EAAQ,CAAC,IAAIN,EAAYM,GAC3B,MAAO,GAAIA,EAAMtE,SACfsE,EAAQ,CAAC,IAAImE,EAAKnE,SACb,GAAIA,EAAMlX,KACfkX,EAAQ,CAAC,IAAIyD,EAAOzD,QACf,KAAIA,EAAMuG,KAGf,MAAM,IAAID,MAAM,sCAFhBtG,EAAQ,CAAC,IAAIkE,EAAQlE,GAGvB,CAiBA,OAfgBA,EAAM/X,KAAIoF,IAEnBA,EAAEgX,IAAKb,EAAUgD,QAAQnZ,IAC9BA,EAAIA,EAAEyW,SACArH,QAAQpP,EAAEoP,OAAO7I,YAAYvG,GAC/BA,EAAE+W,IAAUG,EAAYlX,QACC,IAAlBA,EAAEoZ,KAAKlE,QACZ8D,QAAwC,IAAvBA,EAAOI,KAAKlE,SAC/BlV,EAAEoZ,KAAKlE,OAAS8D,EAAOI,KAAKlE,OAAOvU,QAAQ,MAAO,KAGtDX,EAAEoP,OAAS/M,KAAKoU,QACTzW,IAIX,CAEA,OAAA0W,IAAWF,GACTA,EAAWA,EAASsB,UACpB,IAAK,IAAIX,KAASX,EAAU,CAC1B,IAAI7D,EAAQtQ,KAAKuV,UAAUT,EAAO9U,KAAK0V,MAAO,WAAWD,UACzD,IAAK,IAAIvZ,KAAQoU,EAAOtQ,KAAKoU,QAAQ9D,MAAMqF,QAAQzZ,GACnD,IAAK,IAAI0Z,KAAM5V,KAAKkV,QAClBlV,KAAKkV,QAAQU,GAAM5V,KAAKkV,QAAQU,GAAMtF,EAAMlT,MAEhD,CAIA,OAFA4C,KAAKwV,YAEExV,IACT,CAEA,IAAAjH,CAAK+b,GAGH,OAFAA,EAAM/H,OAAS/M,KACfA,KAAKoU,QAAQ9D,MAAMvX,KAAK+b,GACjB9U,IACT,CAEA,SAAAmW,GACE,IAAK,IAAIja,KAAQ8D,KAAKoU,QAAQ9D,MAAOpU,EAAK6Q,YAAS3M,EAKnD,OAJAJ,KAAKoU,QAAQ9D,MAAQ,GAErBtQ,KAAKwV,YAEExV,IACT,CAEA,WAAAkE,CAAY4Q,GAKV,IAAI7b,EAJJ6b,EAAQ9U,KAAK/G,MAAM6b,GACnB9U,KAAKoU,QAAQ9D,MAAMwE,GAAO/H,YAAS3M,EACnCJ,KAAKoU,QAAQ9D,MAAMpX,OAAO4b,EAAO,GAGjC,IAAK,IAAIc,KAAM5V,KAAKkV,QAClBjc,EAAQ+G,KAAKkV,QAAQU,GACjB3c,GAAS6b,IACX9U,KAAKkV,QAAQU,GAAM3c,EAAQ,GAM/B,OAFA+G,KAAKwV,YAEExV,IACT,CAEA,aAAAoW,CAAcC,EAASxG,EAAM9P,GAe3B,OAdKA,IACHA,EAAW8P,EACXA,EAAO,CAAC,GAGV7P,KAAKoV,WAAUnF,IACTJ,EAAKyG,QAAUzG,EAAKyG,MAAMC,SAAStG,EAAK7R,OACxCyR,EAAK2G,OAASvG,EAAKnX,MAAMyd,SAAS1G,EAAK2G,QAE3CvG,EAAKnX,MAAQmX,EAAKnX,MAAMwF,QAAQ+X,EAAStW,GAAQ,IAGnDC,KAAKwV,YAEExV,IACT,CAEA,IAAAyM,CAAKiK,GACH,OAAO1W,KAAKsQ,MAAM7D,KAAKiK,EACzB,CAEA,IAAAtG,CAAKrQ,GACH,OAAOC,KAAK+U,MAAK,CAACD,EAAOnX,KACvB,IAAI0Q,EACJ,IACEA,EAAStO,EAAS+U,EAAOnX,EAC3B,CAAE,MAAOpE,GACP,MAAMub,EAAMK,WAAW5b,EACzB,CAKA,OAJe,IAAX8U,GAAoByG,EAAM1E,OAC5B/B,EAASyG,EAAM1E,KAAKrQ,IAGfsO,IAEX,CAEA,WAAAgH,CAAYjc,EAAM2G,GAChB,OAAKA,EAQD3G,aAAgB2J,OACX/C,KAAKoQ,MAAK,CAAC0E,EAAOnX,KACvB,GAAmB,WAAfmX,EAAM7H,MAAqB7T,EAAK+T,KAAK2H,EAAM1b,MAC7C,OAAO2G,EAAS+U,EAAOnX,EACzB,IAGGqC,KAAKoQ,MAAK,CAAC0E,EAAOnX,KACvB,GAAmB,WAAfmX,EAAM7H,MAAqB6H,EAAM1b,OAASA,EAC5C,OAAO2G,EAAS+U,EAAOnX,EACzB,KAjBAoC,EAAW3G,EACJ4G,KAAKoQ,MAAK,CAAC0E,EAAOnX,KACvB,GAAmB,WAAfmX,EAAM7H,KACR,OAAOlN,EAAS+U,EAAOnX,EACzB,IAeN,CAEA,YAAA2X,CAAavV,GACX,OAAOC,KAAKoQ,MAAK,CAAC0E,EAAOnX,KACvB,GAAmB,YAAfmX,EAAM7H,KACR,OAAOlN,EAAS+U,EAAOnX,EACzB,GAEJ,CAEA,SAAAyX,CAAUhX,EAAM2B,GACd,OAAKA,EAQD3B,aAAgB2E,OACX/C,KAAKoQ,MAAK,CAAC0E,EAAOnX,KACvB,GAAmB,SAAfmX,EAAM7H,MAAmB7O,EAAK+O,KAAK2H,EAAM1W,MAC3C,OAAO2B,EAAS+U,EAAOnX,EACzB,IAGGqC,KAAKoQ,MAAK,CAAC0E,EAAOnX,KACvB,GAAmB,SAAfmX,EAAM7H,MAAmB6H,EAAM1W,OAASA,EAC1C,OAAO2B,EAAS+U,EAAOnX,EACzB,KAjBAoC,EAAW3B,EACJ4B,KAAKoQ,MAAK,CAAC0E,EAAOnX,KACvB,GAAmB,SAAfmX,EAAM7H,KACR,OAAOlN,EAAS+U,EAAOnX,EACzB,IAeN,CAEA,SAAAgS,CAAU3D,EAAUjM,GAClB,OAAKA,EASDiM,aAAoBjJ,OACf/C,KAAKoQ,MAAK,CAAC0E,EAAOnX,KACvB,GAAmB,SAAfmX,EAAM7H,MAAmBjB,EAASmB,KAAK2H,EAAM9I,UAC/C,OAAOjM,EAAS+U,EAAOnX,EACzB,IAGGqC,KAAKoQ,MAAK,CAAC0E,EAAOnX,KACvB,GAAmB,SAAfmX,EAAM7H,MAAmB6H,EAAM9I,WAAaA,EAC9C,OAAOjM,EAAS+U,EAAOnX,EACzB,KAlBAoC,EAAWiM,EAEJhM,KAAKoQ,MAAK,CAAC0E,EAAOnX,KACvB,GAAmB,SAAfmX,EAAM7H,KACR,OAAOlN,EAAS+U,EAAOnX,EACzB,IAeN,CAEA,SAAI+X,GACF,GAAK1V,KAAKoU,QAAQ9D,MAClB,OAAOtQ,KAAKoU,QAAQ9D,MAAM,EAC5B,CAEA,QAAI7O,GACF,GAAKzB,KAAKoU,QAAQ9D,MAClB,OAAOtQ,KAAKoU,QAAQ9D,MAAMtQ,KAAKoU,QAAQ9D,MAAMlT,OAAS,EACxD,EAGF0W,EAAUuD,cAAgBC,IACxB1G,EAAQ0G,GAGVxD,EAAUyD,aAAeD,IACvB7C,EAAO6C,GAGTxD,EAAUQ,eAAiBgD,IACzBvD,EAASuD,GAGXxD,EAAU0D,aAAeF,IACvBxI,EAAOwI,GAGTnf,EAAOC,QAAU0b,EACjBA,EAAUxW,QAAUwW,EAGpBA,EAAUgD,QAAU5a,IACA,WAAdA,EAAK+Q,KACP1S,OAAOkd,eAAevb,EAAM6X,EAAO7W,WACZ,SAAdhB,EAAK+Q,KACd1S,OAAOkd,eAAevb,EAAMuY,EAAKvX,WACV,SAAdhB,EAAK+Q,KACd1S,OAAOkd,eAAevb,EAAM8T,EAAY9S,WACjB,YAAdhB,EAAK+Q,KACd1S,OAAOkd,eAAevb,EAAMsY,EAAQtX,WACb,SAAdhB,EAAK+Q,MACd1S,OAAOkd,eAAevb,EAAM4S,EAAK5R,WAGnChB,EAAKyY,IAAM,EAEPzY,EAAKoU,OACPpU,EAAKoU,MAAM9V,SAAQsa,IACjBhB,EAAUgD,QAAQhC,EAAK,GAE3B,C,6BCpbF,IAAI4C,EAAO,EAAQ,MAEfC,EAAoB,EAAQ,KAEhC,MAAMC,UAAuBhB,MAC3B,WAAAnU,CAAYoV,EAASC,EAAMC,EAAQ/U,EAAQ0M,EAAMjB,GAC/CwF,MAAM4D,GACN7X,KAAK5G,KAAO,iBACZ4G,KAAKgY,OAASH,EAEVnI,IACF1P,KAAK0P,KAAOA,GAEV1M,IACFhD,KAAKgD,OAASA,GAEZyL,IACFzO,KAAKyO,OAASA,QAEI,IAATqJ,QAA0C,IAAXC,IACpB,iBAATD,GACT9X,KAAK8X,KAAOA,EACZ9X,KAAK+X,OAASA,IAEd/X,KAAK8X,KAAOA,EAAKA,KACjB9X,KAAK+X,OAASD,EAAKC,OACnB/X,KAAKiY,QAAUF,EAAOD,KACtB9X,KAAKkY,UAAYH,EAAOA,SAI5B/X,KAAKmY,aAEDvB,MAAMwB,mBACRxB,MAAMwB,kBAAkBpY,KAAM4X,EAElC,CAEA,UAAAO,GACEnY,KAAK6X,QAAU7X,KAAKyO,OAASzO,KAAKyO,OAAS,KAAO,GAClDzO,KAAK6X,SAAW7X,KAAK0P,KAAO1P,KAAK0P,KAAO,mBACf,IAAd1P,KAAK8X,OACd9X,KAAK6X,SAAW,IAAM7X,KAAK8X,KAAO,IAAM9X,KAAK+X,QAE/C/X,KAAK6X,SAAW,KAAO7X,KAAKgY,MAC9B,CAEA,cAAAK,CAAeC,GACb,IAAKtY,KAAKgD,OAAQ,MAAO,GAEzB,IAAIwM,EAAMxP,KAAKgD,OACF,MAATsV,IAAeA,EAAQZ,EAAKpO,kBAC5BqO,GACEW,IAAO9I,EAAMmI,EAAkBnI,IAGrC,IAMI+I,EAAMC,EANNC,EAAQjJ,EAAIvN,MAAM,SAClByW,EAAQnc,KAAKmW,IAAI1S,KAAK8X,KAAO,EAAG,GAChCa,EAAMpc,KAAKqc,IAAI5Y,KAAK8X,KAAO,EAAGW,EAAMrb,QAEpCyb,EAAWzP,OAAOuP,GAAKvb,OAG3B,GAAIkb,EAAO,CACT,IAAI,KAAE9O,EAAI,KAAEe,EAAI,IAAEP,GAAQ0N,EAAK1M,cAAa,GAC5CuN,EAAO1B,GAAQrN,EAAKQ,EAAI6M,IACxB2B,EAAQ3B,GAAQtM,EAAKsM,EACvB,MACE0B,EAAOC,EAAQM,GAAOA,EAGxB,OAAOL,EACJlZ,MAAMmZ,EAAOC,GACbpgB,KAAI,CAACuf,EAAM7e,KACV,IAAI4a,EAAS6E,EAAQ,EAAIzf,EACrB8f,EAAS,KAAO,IAAMlF,GAAQtU,OAAOsZ,GAAY,MACrD,GAAIhF,IAAW7T,KAAK8X,KAAM,CACxB,IAAIkB,EACFR,EAAMO,EAAOza,QAAQ,MAAO,MAC5BwZ,EAAKvY,MAAM,EAAGS,KAAK+X,OAAS,GAAGzZ,QAAQ,SAAU,KACnD,OAAOia,EAAK,KAAOC,EAAMO,GAAUjB,EAAO,MAAQkB,EAAUT,EAAK,IACnE,CACA,MAAO,IAAMC,EAAMO,GAAUjB,KAE9B3Z,KAAK,KACV,CAEA,QAAAD,GACE,IAAIuU,EAAOzS,KAAKqY,iBAIhB,OAHI5F,IACFA,EAAO,OAASA,EAAO,MAElBzS,KAAK5G,KAAO,KAAO4G,KAAK6X,QAAUpF,CAC3C,EAGFta,EAAOC,QAAUwf,EACjBA,EAAeta,QAAUsa,C,8BCjGzB,IAAIrD,EAAO,EAAQ,MAEnB,MAAMvE,UAAoBuE,EACxB,WAAA9R,CAAYuR,GAERA,QAC0B,IAAnBA,EAASlb,OACU,iBAAnBkb,EAASlb,QAEhBkb,EAAW,IAAKA,EAAUlb,MAAOsQ,OAAO4K,EAASlb,SAEnDmb,MAAMD,GACNhU,KAAKiN,KAAO,MACd,CAEA,YAAIgM,GACF,OAAOjZ,KAAK5B,KAAKmO,WAAW,OAA0B,MAAjBvM,KAAK5B,KAAK,EACjD,EAGFjG,EAAOC,QAAU4X,EACjBA,EAAY1S,QAAU0S,C,8BCrBtB,IAEIkJ,EAAYC,EAFZrF,EAAY,EAAQ,MAIxB,MAAMsF,UAAiBtF,EACrB,WAAArR,CAAYuR,GAEVC,MAAM,CAAEhH,KAAM,cAAe+G,IAExBhU,KAAKsQ,QACRtQ,KAAKsQ,MAAQ,GAEjB,CAEA,QAAA+I,CAASxJ,EAAO,CAAC,GAGf,OAFW,IAAIqJ,EAAW,IAAIC,EAAanZ,KAAM6P,GAErCc,WACd,EAGFyI,EAASE,mBAAqBhC,IAC5B4B,EAAa5B,GAGf8B,EAASG,kBAAoBjC,IAC3B6B,EAAY7B,GAGdnf,EAAOC,QAAUghB,EACjBA,EAAS9b,QAAU8b,C,8BC9BnB,IAAIpJ,EAAc,EAAQ,MACtBwJ,EAAc,EAAQ,MACtBhF,EAAU,EAAQ,MAClBT,EAAS,EAAQ,MACjB0F,EAAQ,EAAQ,MAChB3K,EAAO,EAAQ,MACf2F,EAAO,EAAQ,MAEnB,SAASiF,EAASC,EAAMC,GACtB,GAAI3c,MAAMc,QAAQ4b,GAAO,OAAOA,EAAKphB,KAAIshB,GAAKH,EAASG,KAEvD,IAAMD,OAAQE,KAAc9F,GAAa2F,EACzC,GAAIG,EAAW,CACbF,EAAS,GACT,IAAK,IAAInK,KAASqK,EAAW,CAC3B,IAAIC,EAAgB,IAAKtK,EAAOuK,UAAWP,EAAMvc,WAC7C6c,EAAcxhB,MAChBwhB,EAAcxhB,IAAM,IACfwhB,EAAcxhB,IACjByhB,UAAWR,EAAYtc,YAG3B0c,EAAO7gB,KAAKghB,EACd,CACF,CAIA,GAHI/F,EAAS1D,QACX0D,EAAS1D,MAAQqJ,EAAKrJ,MAAM/X,KAAIshB,GAAKH,EAASG,EAAGD,MAE/C5F,EAAShR,OAAQ,CACnB,IAAI,QAAEiX,KAAYjX,GAAWgR,EAAShR,OACtCgR,EAAShR,OAASA,EACH,MAAXiX,IACFjG,EAAShR,OAAOyM,MAAQmK,EAAOK,GAEnC,CACA,GAAsB,SAAlBjG,EAAS/G,KACX,OAAO,IAAI6B,EAAKkF,GACX,GAAsB,SAAlBA,EAAS/G,KAClB,OAAO,IAAI+C,EAAYgE,GAClB,GAAsB,SAAlBA,EAAS/G,KAClB,OAAO,IAAIwH,EAAKT,GACX,GAAsB,YAAlBA,EAAS/G,KAClB,OAAO,IAAIuH,EAAQR,GACd,GAAsB,WAAlBA,EAAS/G,KAClB,OAAO,IAAI8G,EAAOC,GAElB,MAAM,IAAI4C,MAAM,sBAAwB+C,EAAK1M,KAEjD,CAEA9U,EAAOC,QAAUshB,EACjBA,EAASpc,QAAUoc,C,8BCnDnB,IAAI,kBAAEQ,EAAiB,mBAAEC,GAAuB,EAAQ,OACpD,cAAEC,EAAa,cAAEC,GAAkB,EAAQ,OAC3C,WAAEE,EAAU,QAAED,GAAY,EAAQ,OAClC,OAAEE,GAAW,EAAQ,MAErB7C,EAAoB,EAAQ,KAC5BC,EAAiB,EAAQ,KACzB4B,EAAc,EAAQ,MAEtBiB,EAAkBC,OAAO,mBAEzBC,EAAqBC,QAAQV,GAAqBC,GAClDU,EAAgBD,QAAQN,GAAWC,GAEvC,MAAMd,EACJ,WAAAhX,CAAY+M,EAAKK,EAAO,CAAC,GACvB,GACEL,SAEgB,iBAARA,IAAqBA,EAAItR,SAEjC,MAAM,IAAI0Y,MAAM,oBAAoBpH,2BAwBtC,GArBAxP,KAAKwP,IAAMA,EAAItR,WAEK,WAAhB8B,KAAKwP,IAAI,IAAmC,MAAhBxP,KAAKwP,IAAI,IACvCxP,KAAK8a,QAAS,EACd9a,KAAKwP,IAAMxP,KAAKwP,IAAIjQ,MAAM,IAE1BS,KAAK8a,QAAS,EAGZjL,EAAKkL,QAEJF,GACD,YAAY1N,KAAK0C,EAAKkL,OACtBR,EAAW1K,EAAKkL,MAEhB/a,KAAK0P,KAAOG,EAAKkL,KAEjB/a,KAAK0P,KAAO4K,EAAQzK,EAAKkL,OAIzBF,GAAiBF,EAAoB,CACvC,IAAIpiB,EAAM,IAAIihB,EAAYxZ,KAAKwP,IAAKK,GACpC,GAAItX,EAAIse,KAAM,CACZ7W,KAAKzH,IAAMA,EACX,IAAImX,EAAOnX,EAAIyiB,WAAWtL,MACrB1P,KAAK0P,MAAQA,IAAM1P,KAAK0P,KAAO1P,KAAKib,WAAWvL,GACtD,CACF,CAEK1P,KAAK0P,OACR1P,KAAK4V,GAAK,cAAgB4E,EAAO,GAAK,KAEpCxa,KAAKzH,MAAKyH,KAAKzH,IAAImX,KAAO1P,KAAK+a,KACrC,CAEA,KAAAW,CAAM7D,EAASC,EAAMC,EAAQlI,EAAO,CAAC,GACnC,IAAIxB,EAAQ4J,EAASC,EAErB,GAAIJ,GAAwB,iBAATA,EAAmB,CACpC,IAAIY,EAAQZ,EACRa,EAAMZ,EACV,GAA4B,iBAAjBW,EAAMyC,OAAqB,CACpC,IAAI3I,EAAMxS,KAAKkb,WAAWxC,EAAMyC,QAChCrD,EAAOtF,EAAIsF,KACXC,EAASvF,EAAIiJ,GACf,MACE3D,EAAOY,EAAMZ,KACbC,EAASW,EAAMX,OAEjB,GAA0B,iBAAfY,EAAIwC,OAAqB,CAClC,IAAI3I,EAAMxS,KAAKkb,WAAWvC,EAAIwC,QAC9BlD,EAAUzF,EAAIsF,KACdI,EAAY1F,EAAIiJ,GAClB,MACExD,EAAUU,EAAIb,KACdI,EAAYS,EAAIZ,MAEpB,MAAO,IAAKA,EAAQ,CAClB,IAAIvF,EAAMxS,KAAKkb,WAAWpD,GAC1BA,EAAOtF,EAAIsF,KACXC,EAASvF,EAAIiJ,GACf,CAEA,IAAIE,EAAS3b,KAAK2b,OAAO7D,EAAMC,EAAQE,EAASC,GAiChD,OA/BE7J,EADEsN,EACO,IAAI/D,EACXC,OACmBzX,IAAnBub,EAAO1D,QACH0D,EAAO7D,KACP,CAAEC,OAAQ4D,EAAO5D,OAAQD,KAAM6D,EAAO7D,WACvB1X,IAAnBub,EAAO1D,QACH0D,EAAO5D,OACP,CAAEA,OAAQ4D,EAAOzD,UAAWJ,KAAM6D,EAAO1D,SAC7C0D,EAAO3Y,OACP2Y,EAAOjM,KACPG,EAAKpB,QAGE,IAAImJ,EACXC,OACYzX,IAAZ6X,EAAwBH,EAAO,CAAEC,SAAQD,aAC7B1X,IAAZ6X,EAAwBF,EAAS,CAAEA,OAAQG,EAAWJ,KAAMG,GAC5DjY,KAAKwP,IACLxP,KAAK0P,KACLG,EAAKpB,QAITJ,EAAOoB,MAAQ,CAAEsI,SAAQG,YAAWD,UAASH,OAAM9U,OAAQhD,KAAKwP,KAC5DxP,KAAK0P,OACH2K,IACFhM,EAAOoB,MAAMmM,IAAMvB,EAAcra,KAAK0P,MAAMxR,YAE9CmQ,EAAOoB,MAAMC,KAAO1P,KAAK0P,MAGpBrB,CACT,CAEA,UAAA6M,CAAWC,GACT,IAAIC,EAAUC,EACd,GAAKrb,KAAKya,GAYRY,EAAcrb,KAAKya,OAZO,CAC1B,IAAIhC,EAAQzY,KAAKwP,IAAIvN,MAAM,MAC3BoZ,EAAc,IAAIpe,MAAMwb,EAAMrb,QAC9B,IAAIke,EAAY,EAEhB,IAAK,IAAI3d,EAAI,EAAG4d,EAAI9C,EAAMrb,OAAQO,EAAI4d,EAAG5d,IACvC0d,EAAY1d,GAAK2d,EACjBA,GAAa7C,EAAM9a,GAAGP,OAAS,EAGjC4C,KAAKya,GAAmBY,CAC1B,CAGAD,EAAWC,EAAYA,EAAYje,OAAS,GAE5C,IAAIwb,EAAM,EACV,GAAIuC,GAAUC,EACZxC,EAAMyC,EAAYje,OAAS,MACtB,CACL,IACIoe,EADA9I,EAAM2I,EAAYje,OAAS,EAE/B,KAAOwb,EAAMlG,GAEX,GADA8I,EAAM5C,GAAQlG,EAAMkG,GAAQ,GACxBuC,EAASE,EAAYG,GACvB9I,EAAM8I,EAAM,MACP,MAAIL,GAAUE,EAAYG,EAAM,IAEhC,CACL5C,EAAM4C,EACN,KACF,CAJE5C,EAAM4C,EAAM,CAId,CAEJ,CACA,MAAO,CACLC,IAAKN,EAASE,EAAYzC,GAAO,EACjCd,KAAMc,EAAM,EAEhB,CAEA,UAAAqC,CAAWvL,GACT,MAAI,YAAYvC,KAAKuC,GACZA,EAEF4K,EAAQta,KAAKzH,IAAIyiB,WAAWgB,YAAchc,KAAKzH,IAAI0W,MAAQ,IAAKS,EACzE,CAEA,MAAAiM,CAAO7D,EAAMC,EAAQE,EAASC,GAC5B,IAAKlY,KAAKzH,IAAK,OAAO,EACtB,IAKIsjB,EAKAC,EAVAd,EAAWhb,KAAKzH,IAAIyiB,WAEpBD,EAAOC,EAASe,oBAAoB,CAAEhE,SAAQD,SAClD,IAAKiD,EAAK/X,OAAQ,OAAO,EAGF,iBAAZiV,IACT4D,EAAKb,EAASe,oBAAoB,CAAEhE,OAAQG,EAAWJ,KAAMG,KAM7D6D,EADEvB,EAAWQ,EAAK/X,QACRqX,EAAcU,EAAK/X,QAEnB,IAAIwN,IACZuK,EAAK/X,OACLhD,KAAKzH,IAAIyiB,WAAWgB,YAAc3B,EAAcra,KAAKzH,IAAI0jB,UAI7D,IAAI5N,EAAS,CACX0J,OAAQgD,EAAKhD,OACbG,UAAW2D,GAAMA,EAAG9D,OACpBE,QAAS4D,GAAMA,EAAG/D,KAClBA,KAAMiD,EAAKjD,KACX8D,IAAKE,EAAQ5d,YAGf,GAAyB,UAArB4d,EAAQI,SAAsB,CAChC,IAAI9B,EAIF,MAAM,IAAIxD,MAAM,yDAHhBvI,EAAOqB,KAAO0K,EAAc0B,EAKhC,CAEA,IAAI9Y,EAASgY,EAASmB,iBAAiBpB,EAAK/X,QAG5C,OAFIA,IAAQqL,EAAOrL,OAASA,GAErBqL,CACT,CAEA,MAAA+N,GACE,IAAIzC,EAAO,CAAC,EACZ,IAAK,IAAIvgB,IAAQ,CAAC,SAAU,MAAO,OAAQ,MACvB,MAAd4G,KAAK5G,KACPugB,EAAKvgB,GAAQ4G,KAAK5G,IAStB,OANI4G,KAAKzH,MACPohB,EAAKphB,IAAM,IAAKyH,KAAKzH,KACjBohB,EAAKphB,IAAI8jB,gBACX1C,EAAKphB,IAAI8jB,mBAAgBjc,IAGtBuZ,CACT,CAEA,QAAIoB,GACF,OAAO/a,KAAK0P,MAAQ1P,KAAK4V,EAC3B,EAGFzd,EAAOC,QAAUqhB,EACjBA,EAAMnc,QAAUmc,EAEZ9B,GAAqBA,EAAkB2E,eACzC3E,EAAkB2E,cAAc7C,E,6BCpPlC,IAAI,QAAE/E,EAAO,GAAEC,GAAO,EAAQ,MAC1B4H,EAAe,EAAQ,KACvB5L,EAAY,EAAQ,MACpBmD,EAAY,EAAQ,MACpBsF,EAAW,EAAQ,MAEnBoD,GADW,EAAQ,MACV,EAAQ,MACjB5L,EAAQ,EAAQ,MAChB9B,EAAO,EAAQ,MAEnB,MAAM2N,EAAqB,CACzBC,OAAQ,SACRE,QAAS,UACT3M,KAAM,cACNxW,SAAU,WACVwV,KAAM,OACN0N,KAAM,QAGFE,EAAe,CACnB9I,QAAQ,EACRkJ,YAAY,EACZzI,SAAS,EACT0I,aAAa,EACblN,aAAa,EACb+M,iBAAiB,EACjB3D,UAAU,EACVgE,cAAc,EACdpO,MAAM,EACNqO,UAAU,EACVtO,eAAe,EACf+N,SAAS,EACThO,MAAM,EACNqO,UAAU,EACV1I,MAAM,EACNuI,UAAU,GAGNM,EAAe,CACnBtO,MAAM,EACND,eAAe,EACf+N,SAAS,GAGLS,EAAW,EAEjB,SAASC,EAAUC,GACjB,MAAsB,iBAARA,GAAwC,mBAAbA,EAAIC,IAC/C,CAEA,SAASC,EAAUzhB,GACjB,IAAIxD,GAAM,EACNuU,EAAOwP,EAAmBvgB,EAAK+Q,MAOnC,MANkB,SAAd/Q,EAAK+Q,KACPvU,EAAMwD,EAAKkC,KAAK2D,cACO,WAAd7F,EAAK+Q,OACdvU,EAAMwD,EAAK9C,KAAK2I,eAGdrJ,GAAOwD,EAAKgY,OACP,CACLjH,EACAA,EAAO,IAAMvU,EACb6kB,EACAtQ,EAAO,OACPA,EAAO,QAAUvU,GAEVA,EACF,CAACuU,EAAMA,EAAO,IAAMvU,EAAKuU,EAAO,OAAQA,EAAO,QAAUvU,GACvDwD,EAAKgY,OACP,CAACjH,EAAMsQ,EAAUtQ,EAAO,QAExB,CAACA,EAAMA,EAAO,OAEzB,CAEA,SAAS2Q,EAAQ1hB,GACf,IAAI2hB,EASJ,OAPEA,EADgB,aAAd3hB,EAAK+Q,KACE,CAAC,WAAYsQ,EAAU,gBACT,SAAdrhB,EAAK+Q,KACL,CAAC,OAAQsQ,EAAU,YAEnBI,EAAUzhB,GAGd,CACL4hB,WAAY,EACZD,SACA7I,SAAU,EACV9Y,OACA8hB,aAAc,EACdD,SAAU,GAEd,CAEA,SAASE,EAAW/hB,GAGlB,OAFAA,EAAKwY,IAAW,EACZxY,EAAKoU,OAAOpU,EAAKoU,MAAM9V,SAAQmD,GAAKsgB,EAAWtgB,KAC5CzB,CACT,CAEA,IAAIsS,EAAU,CAAC,EAEf,MAAM0K,EACJ,WAAAzW,CAAYyb,EAAW1O,EAAKK,GAI1B,IAAIZ,EACJ,GAJAjP,KAAKme,aAAc,EACnBne,KAAKoe,WAAY,EAIA,iBAAR5O,GACC,OAARA,GACc,SAAbA,EAAIvC,MAAgC,aAAbuC,EAAIvC,KAGvB,GAAIuC,aAAe0J,GAAc1J,aAAegN,EACrDvN,EAAOgP,EAAWzO,EAAIP,MAClBO,EAAIjX,WACkB,IAAbsX,EAAKtX,MAAqBsX,EAAKtX,IAAM,CAAC,GAC5CsX,EAAKtX,IAAI8lB,SAAQxO,EAAKtX,IAAI8lB,QAAS,GACxCxO,EAAKtX,IAAI0Z,KAAOzC,EAAIjX,SAEjB,CACL,IAAI+lB,EAAS1N,EACTf,EAAK0O,SAAQD,EAASzO,EAAK0O,OAAO3N,OAClCf,EAAKyO,SAAQA,EAASzO,EAAKyO,QAC3BA,EAAO1N,QAAO0N,EAASA,EAAO1N,OAElC,IACE3B,EAAOqP,EAAO9O,EAAKK,EACrB,CAAE,MAAO6L,GACP1b,KAAKoe,WAAY,EACjBpe,KAAK0b,MAAQA,CACf,CAEIzM,IAASA,EAAK0F,IAEhBb,EAAUgD,QAAQ7H,EAEtB,MAzBEA,EAAOgP,EAAWzO,GA2BpBxP,KAAKqO,OAAS,IAAImO,EAAO0B,EAAWjP,EAAMY,GAC1C7P,KAAKwe,QAAU,IAAKhQ,EAASA,UAASH,OAAQrO,KAAKqO,QACnDrO,KAAKye,QAAUze,KAAKke,UAAUO,QAAQlmB,KAAIkW,GAClB,iBAAXA,GAAuBA,EAAOqO,QAChC,IAAKrO,KAAWA,EAAOqO,QAAQ9c,KAAKqO,SAEpCI,GAGb,CAEA,KAAAwQ,GACE,OAAIjf,KAAK0b,MAAc0D,QAAQC,OAAOrf,KAAK0b,OACvC1b,KAAKoe,UAAkBgB,QAAQ9E,QAAQta,KAAKqO,SAC3CrO,KAAKsf,aACRtf,KAAKsf,WAAatf,KAAKuf,YAElBvf,KAAKsf,WACd,CAEA,MAAMN,GACJ,OAAOhf,KAAKif,QAAQC,MAAMF,EAC5B,CAEA,QAAQG,GACN,OAAOnf,KAAKif,QAAQvB,KAAKyB,EAAWA,EACtC,CAEA,aAAAK,GACE,MAAM,IAAI5I,MAAM,uDAClB,CAEA,WAAA0J,CAAY5E,EAAOxf,GACjB,IAAIuS,EAASzO,KAAKqO,OAAOgS,WACzB,IACMnkB,GAAMA,EAAKiZ,WAAWuG,GAC1B1b,KAAK0b,MAAQA,EACM,mBAAfA,EAAMtiB,MAA8BsiB,EAAMjN,OAGnCA,EAAOgS,gBAFhB/E,EAAMjN,OAASA,EAAOM,cACtB2M,EAAMvD,aAwBV,CAAE,MAAOtb,GAGH6jB,SAAWA,QAAQhF,OAAOgF,QAAQhF,MAAM7e,EAC9C,CACA,OAAO6e,CACT,CAEA,eAAAgE,GACE1f,KAAK6f,UAAY,CAAC,EAClB,IAAI5J,EAAM,CAACxH,EAAQxB,EAAM6D,KAClB9Q,KAAK6f,UAAU5S,KAAOjN,KAAK6f,UAAU5S,GAAQ,IAClDjN,KAAK6f,UAAU5S,GAAMlU,KAAK,CAAC0V,EAAQqC,GAAG,EAExC,IAAK,IAAIrC,KAAUzO,KAAKye,QACtB,GAAsB,iBAAXhQ,EACT,IAAK,IAAIxG,KAASwG,EAAQ,CACxB,IAAKoO,EAAa5U,IAAU,SAASkF,KAAKlF,GACxC,MAAM,IAAI2O,MACR,iBAAiB3O,QAAYwG,EAAOM,yCACR/O,KAAKke,UAAU0C,iBAG/C,IAAKtD,EAAarV,GAChB,GAA6B,iBAAlBwG,EAAOxG,GAChB,IAAK,IAAIgE,KAAUwC,EAAOxG,GAEtBgO,EAAIxH,EADS,MAAXxC,EACUhE,EAIVA,EAAQ,IAAMgE,EAAOlK,cAJJ0M,EAAOxG,GAAOgE,QASH,mBAAlBwC,EAAOxG,IACvBgO,EAAIxH,EAAQxG,EAAOwG,EAAOxG,GAGhC,CAGJjI,KAAK2f,YAAcplB,OAAOlC,KAAK2H,KAAK6f,WAAWziB,OAAS,CAC1D,CAEA,cAAMmiB,GACJvf,KAAKyO,OAAS,EACd,IAAK,IAAI9Q,EAAI,EAAGA,EAAIqC,KAAKye,QAAQrhB,OAAQO,IAAK,CAC5C,IAAI8Q,EAASzO,KAAKye,QAAQ9gB,GACtByiB,EAAUpgB,KAAKyf,UAAUhR,GAC7B,GAAI+O,EAAU4C,GACZ,UACQA,CACR,CAAE,MAAO1E,GACP,MAAM1b,KAAKsgB,YAAY5E,EACzB,CAEJ,CAGA,GADA1b,KAAK0f,kBACD1f,KAAK2f,YAAa,CACpB,IAAI1Q,EAAOjP,KAAKqO,OAAOY,KACvB,MAAQA,EAAKyF,IAAU,CACrBzF,EAAKyF,IAAW,EAChB,IAAI/B,EAAQ,CAACiL,EAAQ3O,IACrB,KAAO0D,EAAMvV,OAAS,GAAG,CACvB,IAAIgjB,EAAUpgB,KAAK2gB,UAAUhO,GAC7B,GAAI6K,EAAU4C,GACZ,UACQA,CACR,CAAE,MAAO7mB,GACP,IAAI2C,EAAOyW,EAAMA,EAAMvV,OAAS,GAAGlB,KACnC,MAAM8D,KAAKsgB,YAAY/mB,EAAG2C,EAC5B,CAEJ,CACF,CAEA,GAAI8D,KAAK6f,UAAUxC,SACjB,IAAK,IAAK5O,EAAQ0R,KAAYngB,KAAK6f,UAAUxC,SAAU,CACrDrd,KAAKqO,OAAOgS,WAAa5R,EACzB,IACE,GAAkB,aAAdQ,EAAKhC,KAAqB,CAC5B,IAAIsT,EAAQtR,EAAKqB,MAAM/X,KAAIunB,GACzBK,EAAQL,EAAS9f,KAAKwe,iBAGlBY,QAAQoB,IAAID,EACpB,YACQJ,EAAQlR,EAAMjP,KAAKwe,QAE7B,CAAE,MAAOjlB,GACP,MAAMyG,KAAKsgB,YAAY/mB,EACzB,CACF,CAEJ,CAGA,OADAyG,KAAKoe,WAAY,EACVpe,KAAK2Q,WACd,CAEA,SAAA8O,CAAUhR,GACRzO,KAAKqO,OAAOgS,WAAa5R,EACzB,IACE,GAAsB,iBAAXA,GAAuBA,EAAOO,KAAM,CAC7C,GAA8B,aAA1BhP,KAAKqO,OAAOY,KAAKhC,KAAqB,CACxC,IAAIsT,EAAQvgB,KAAKqO,OAAOY,KAAKqB,MAAM/X,KAAI0W,GACrCR,EAAOO,KAAKC,EAAMjP,KAAKwe,WAGzB,OAAIhB,EAAU+C,EAAM,IACXnB,QAAQoB,IAAID,GAGdA,CACT,CAEA,OAAO9R,EAAOO,KAAKhP,KAAKqO,OAAOY,KAAMjP,KAAKwe,QAC5C,CAAO,GAAsB,mBAAX/P,EAChB,OAAOA,EAAOzO,KAAKqO,OAAOY,KAAMjP,KAAKqO,OAEzC,CAAE,MAAOqN,GACP,MAAM1b,KAAKsgB,YAAY5E,EACzB,CACF,CAEA,SAAA/K,GACE,GAAI3Q,KAAK0b,MAAO,MAAM1b,KAAK0b,MAC3B,GAAI1b,KAAKme,YAAa,OAAOne,KAAKqO,OAClCrO,KAAKme,aAAc,EAEnBne,KAAK4e,OAEL,IAAI/O,EAAO7P,KAAKqO,OAAOwB,KACnBiJ,EAAMnI,EACNd,EAAK0O,SAAQzF,EAAMjJ,EAAK0O,OAAO5N,WAC/Bd,EAAKmQ,cAAalH,EAAMjJ,EAAKmQ,aAC7BlH,EAAInI,YAAWmI,EAAMA,EAAInI,WAE7B,IACIsP,EADM,IAAI1D,EAAazD,EAAK9Y,KAAKqO,OAAOY,KAAMjP,KAAKqO,OAAOwB,MAC/CqQ,WAIf,OAHAlgB,KAAKqO,OAAOmB,IAAMyQ,EAAK,GACvBjgB,KAAKqO,OAAO9V,IAAM0nB,EAAK,GAEhBjgB,KAAKqO,MACd,CAEA,IAAAuQ,GACE,GAAI5e,KAAK0b,MAAO,MAAM1b,KAAK0b,MAC3B,GAAI1b,KAAKoe,UAAW,OAAOpe,KAAKqO,OAGhC,GAFArO,KAAKoe,WAAY,EAEbpe,KAAKsf,WACP,MAAMtf,KAAKwf,gBAGb,IAAK,IAAI/Q,KAAUzO,KAAKye,QAEtB,GAAIjB,EADUxd,KAAKyf,UAAUhR,IAE3B,MAAMzO,KAAKwf,gBAKf,GADAxf,KAAK0f,kBACD1f,KAAK2f,YAAa,CACpB,IAAI1Q,EAAOjP,KAAKqO,OAAOY,KACvB,MAAQA,EAAKyF,IACXzF,EAAKyF,IAAW,EAChB1U,KAAK4f,SAAS3Q,GAEhB,GAAIjP,KAAK6f,UAAUxC,SACjB,GAAkB,aAAdpO,EAAKhC,KACP,IAAK,IAAI6S,KAAW7Q,EAAKqB,MACvBtQ,KAAK+f,UAAU/f,KAAK6f,UAAUxC,SAAUyC,QAG1C9f,KAAK+f,UAAU/f,KAAK6f,UAAUxC,SAAUpO,EAG9C,CAEA,OAAOjP,KAAKqO,MACd,CAEA,IAAAqP,CAAKqB,EAAaC,GAUhB,OAAOhf,KAAKif,QAAQvB,KAAKqB,EAAaC,EACxC,CAEA,QAAA9gB,GACE,OAAO8B,KAAKwP,GACd,CAEA,SAAAuQ,CAAUhC,EAAU7hB,GAClB,IAAK,IAAKuS,EAAQ0R,KAAYpC,EAAU,CAEtC,IAAIqC,EADJpgB,KAAKqO,OAAOgS,WAAa5R,EAEzB,IACE2R,EAAUD,EAAQjkB,EAAM8D,KAAKwe,QAC/B,CAAE,MAAOjlB,GACP,MAAMyG,KAAKsgB,YAAY/mB,EAAG2C,EAAKkY,QACjC,CACA,GAAkB,SAAdlY,EAAK+Q,MAAiC,aAAd/Q,EAAK+Q,OAAwB/Q,EAAK6Q,OAC5D,OAAO,EAET,GAAIyQ,EAAU4C,GACZ,MAAMpgB,KAAKwf,eAEf,CACF,CAEA,SAAAmB,CAAUhO,GACR,IAAIkO,EAAQlO,EAAMA,EAAMvV,OAAS,IAC7B,KAAElB,EAAI,SAAE6hB,GAAa8C,EAEzB,GAAkB,SAAd3kB,EAAK+Q,MAAiC,aAAd/Q,EAAK+Q,OAAwB/Q,EAAK6Q,OAE5D,YADA4F,EAAM7S,MAIR,GAAIie,EAAS3gB,OAAS,GAAKyjB,EAAM7C,aAAeD,EAAS3gB,OAAQ,CAC/D,IAAKqR,EAAQ0R,GAAWpC,EAAS8C,EAAM7C,cACvC6C,EAAM7C,cAAgB,EAClB6C,EAAM7C,eAAiBD,EAAS3gB,SAClCyjB,EAAM9C,SAAW,GACjB8C,EAAM7C,aAAe,GAEvBhe,KAAKqO,OAAOgS,WAAa5R,EACzB,IACE,OAAO0R,EAAQjkB,EAAKgb,UAAWlX,KAAKwe,QACtC,CAAE,MAAOjlB,GACP,MAAMyG,KAAKsgB,YAAY/mB,EAAG2C,EAC5B,CACF,CAEA,GAAuB,IAAnB2kB,EAAM7L,SAAgB,CACxB,IACIF,EADAE,EAAW6L,EAAM7L,SAErB,KAAQF,EAAQ5Y,EAAKoU,MAAMpU,EAAKgZ,QAAQF,KAEtC,GADA9Y,EAAKgZ,QAAQF,IAAa,GACrBF,EAAMJ,GAGT,OAFAI,EAAMJ,IAAW,OACjB/B,EAAM5Z,KAAK6kB,EAAQ9I,IAIvB+L,EAAM7L,SAAW,SACV9Y,EAAKgZ,QAAQF,EACtB,CAEA,IAAI6I,EAASgD,EAAMhD,OACnB,KAAOgD,EAAM/C,WAAaD,EAAOzgB,QAAQ,CACvC,IAAI6K,EAAQ4V,EAAOgD,EAAM/C,YAEzB,GADA+C,EAAM/C,YAAc,EAChB7V,IAAUsV,EAKZ,YAJIrhB,EAAKoU,OAASpU,EAAKoU,MAAMlT,SAC3BlB,EAAKwY,IAAW,EAChBmM,EAAM7L,SAAW9Y,EAAK+Y,gBAGnB,GAAIjV,KAAK6f,UAAU5X,GAExB,YADA4Y,EAAM9C,SAAW/d,KAAK6f,UAAU5X,GAGpC,CACA0K,EAAM7S,KACR,CAEA,QAAA8f,CAAS1jB,GACPA,EAAKwY,IAAW,EAChB,IAAImJ,EAASF,EAAUzhB,GACvB,IAAK,IAAI+L,KAAS4V,EAChB,GAAI5V,IAAUsV,EACRrhB,EAAKoU,OACPpU,EAAK6Y,MAAKD,IACHA,EAAMJ,IAAU1U,KAAK4f,SAAS9K,EAAK,QAGvC,CACL,IAAIiJ,EAAW/d,KAAK6f,UAAU5X,GAC9B,GAAI8V,GACE/d,KAAK+f,UAAUhC,EAAU7hB,EAAKgb,WAAY,MAElD,CAEJ,CAEA,QAAA4H,GACE,OAAO9e,KAAK4e,OAAOE,UACrB,CAEA,WAAIH,GACF,OAAO3e,KAAK2Q,YAAYgO,OAC1B,CAEA,OAAInP,GACF,OAAOxP,KAAK2Q,YAAYnB,GAC1B,CAEA,OAAIjX,GACF,OAAOyH,KAAK2Q,YAAYpY,GAC1B,CAEA,YAAIsmB,GACF,OAAO7e,KAAK4e,OAAOC,QACrB,CAEA,QAAIhP,GACF,OAAO7P,KAAKqO,OAAOwB,IACrB,CAEA,aAAIqO,GACF,OAAOle,KAAKqO,OAAO6P,SACrB,CAEA,QAAIjP,GACF,OAAOjP,KAAK4e,OAAO3P,IACrB,CAEA,IAAKyL,OAAOgE,eACV,MAAO,YACT,EAGFxF,EAAW4H,gBAAkBxJ,IAC3B9I,EAAU8I,GAGZnf,EAAOC,QAAU8gB,EACjBA,EAAW5b,QAAU4b,EAErBpK,EAAKwK,mBAAmBJ,GACxBE,EAASE,mBAAmBJ,E,uBCniB5B,IAAI6H,EAAO,CACTvP,MAAMwP,GACGD,EAAK9e,MAAM+e,EAAQ,CAAC,MAAM,GAGnCO,MAAMP,GAEGD,EAAK9e,MAAM+e,EADL,CAAC,IAAK,KAAM,OAI3B,KAAA/e,CAAM+e,EAAQC,EAAYxf,GACxB,IAAIO,EAAQ,GACRkf,EAAU,GACVjf,GAAQ,EAERkf,EAAO,EACPC,GAAU,EACVC,EAAY,GACZlP,GAAS,EAEb,IAAK,IAAI3T,KAAUwiB,EACb7O,EACFA,GAAS,EACW,OAAX3T,EACT2T,GAAS,EACAiP,EACL5iB,IAAW6iB,IACbD,GAAU,GAEQ,MAAX5iB,GAA6B,MAAXA,GAC3B4iB,GAAU,EACVC,EAAY7iB,GACQ,MAAXA,EACT2iB,GAAQ,EACY,MAAX3iB,EACL2iB,EAAO,IAAGA,GAAQ,GACJ,IAATA,GACLF,EAAW1K,SAAS/X,KAASyD,GAAQ,GAGvCA,GACc,KAAZif,GAAgBlf,EAAMjJ,KAAKmoB,EAAQI,QACvCJ,EAAU,GACVjf,GAAQ,GAERif,GAAW1iB,EAKf,OADIiD,GAAoB,KAAZyf,IAAgBlf,EAAMjJ,KAAKmoB,EAAQI,QACxCtf,CACT,GAGF7J,EAAOC,QAAU2oB,EACjBA,EAAKzjB,QAAUyjB,C,6BCvDf,IAAI,kBAAE7G,EAAiB,mBAAEC,GAAuB,EAAQ,OACpD,QAAEqH,EAAO,SAAEC,EAAQ,QAAEnH,EAAO,IAAEoH,GAAQ,EAAQ,OAC9C,cAAErH,GAAkB,EAAQ,MAE5BZ,EAAQ,EAAQ,MAEhBkB,EAAqBC,QAAQV,GAAqBC,GAClDU,EAAgBD,QAAQ4G,GAAWlH,GAAWmH,GAAYC,GA8V9DvpB,EAAOC,QA5VP,MACE,WAAAqK,CAAYkO,EAAW1B,EAAMY,EAAM8R,GACjC3hB,KAAK2Q,UAAYA,EACjB3Q,KAAK4hB,QAAU/R,EAAKtX,KAAO,CAAC,EAC5ByH,KAAKiP,KAAOA,EACZjP,KAAK6P,KAAOA,EACZ7P,KAAKwP,IAAMmS,EACX3hB,KAAKm0B,YAAcxS,EACnB3hB,KAAKo0B,cAAgBp0B,KAAK4hB,QAAQ7G,MAAQ/a,KAAK4hB,QAAQ+B,SAEvD3jB,KAAKq0B,iBAAmB,IAAI77B,IAC5BwH,KAAKs0B,cAAgB,IAAI97B,IACzBwH,KAAKu0B,aAAe,IAAI/7B,GAC1B,CAEA,aAAA0qB,GACE,IAAIvE,EAGFA,EADE3e,KAAKgiB,WAEL,gCAAkChiB,KAAK6iB,SAAS7iB,KAAKzH,IAAI2F,YACf,iBAA5B8B,KAAK4hB,QAAQK,WACnBjiB,KAAK4hB,QAAQK,WACqB,mBAA5BjiB,KAAK4hB,QAAQK,WACnBjiB,KAAK4hB,QAAQK,WAAWjiB,KAAK6P,KAAKgM,GAAI7b,KAAKiP,MAE3CjP,KAAKmjB,aAAe,OAEhC,IAAIC,EAAM,KACNpjB,KAAKwP,IAAI+G,SAAS,UAAS6M,EAAM,QAErCpjB,KAAKwP,KAAO4T,EAAM,wBAA0BzE,EAAU,KACxD,CAEA,aAAA+D,GACE,IAAK,IAAIzQ,KAAQjS,KAAK8hB,WAAY,CAChC,IAEIvpB,EAFAwiB,EAAO/a,KAAKyiB,MAAMziB,KAAKqB,KAAK4Q,EAAKvC,OACjCT,EAAOgD,EAAKhD,MAAQuS,EAAQvP,EAAKvC,OAGD,IAAhC1P,KAAK4hB,QAAQO,gBACf5pB,EAAM,IAAI2hB,EAAkBjI,EAAK4E,MAC7Bte,EAAI4pB,iBACN5pB,EAAI4pB,eAAiB,OAGvB5pB,EAAM0Z,EAAK+I,WAGbhb,KAAKzH,IAAIoqB,eAAepqB,EAAKwiB,EAAM/a,KAAKyiB,MAAMziB,KAAKqB,KAAK4N,IAC1D,CACF,CAEA,eAAAoT,GACE,IAAgC,IAA5BriB,KAAK4hB,QAAQK,WAEjB,GAAIjiB,KAAKiP,KAAM,CACb,IAAI/S,EACJ,IAAK,IAAIyB,EAAIqC,KAAKiP,KAAKqB,MAAMlT,OAAS,EAAGO,GAAK,EAAGA,IAC/CzB,EAAO8D,KAAKiP,KAAKqB,MAAM3S,GACL,YAAdzB,EAAK+Q,MACwC,IAA7C/Q,EAAK2a,KAAKle,QAAQ,wBACpBqH,KAAKiP,KAAK/K,YAAYvG,EAG5B,MAAWqC,KAAKwP,MACdxP,KAAKwP,IAAMxP,KAAKwP,IAAIlR,QAAQ,2BAA4B,IAE5D,CAEA,QAAA4hB,GAEE,GADAlgB,KAAKqiB,kBACDxH,GAAiBF,GAAsB3a,KAAK6hB,QAC9C,OAAO7hB,KAAKqjB,cACP,CACL,IAAIhV,EAAS,GAIb,OAHArO,KAAK2Q,UAAU3Q,KAAKiP,MAAMtR,IACxB0Q,GAAU1Q,KAEL,CAAC0Q,EACV,CACF,CAEA,WAAAgV,GACE,GAAIrjB,KAAKiP,KACPjP,KAAKsjB,sBACA,GAA+B,IAA3BtjB,KAAK8hB,WAAW1kB,OAAc,CACvC,IAAI6U,EAAOjS,KAAK8hB,WAAW,GAAG9G,WAC9B/I,EAAKvC,KAAO1P,KAAKmjB,aACjBnjB,KAAKzH,IAAM4hB,EAAmBoJ,cAActR,EAC9C,MACEjS,KAAKzH,IAAM,IAAI4hB,EAAmB,CAAEzK,KAAM1P,KAAKmjB,eAC/CnjB,KAAKzH,IAAIirB,WAAW,CAClBC,UAAW,CAAE1L,OAAQ,EAAGD,KAAM,GAC9B4L,SAAU,CAAE3L,OAAQ,EAAGD,KAAM,GAC7B9U,OAAQhD,KAAK6P,KAAKkL,KACd/a,KAAKyiB,MAAMziB,KAAKqB,KAAKrB,KAAK6P,KAAKkL,OAC/B,gBAQR,OAJI/a,KAAKkiB,oBAAoBliB,KAAKsiB,oBAC9BtiB,KAAKiP,MAAQjP,KAAK8hB,WAAW1kB,OAAS,GAAG4C,KAAK0iB,gBAC9C1iB,KAAK4iB,gBAAgB5iB,KAAKkjB,gBAE1BljB,KAAKgiB,WACA,CAAChiB,KAAKwP,KAEN,CAACxP,KAAKwP,IAAKxP,KAAKzH,IAE3B,CAEA,cAAA+qB,GACEtjB,KAAKwP,IAAM,GACXxP,KAAKzH,IAAM,IAAI4hB,EAAmB,CAAEzK,KAAM1P,KAAKmjB,eAE/C,IAUI1K,EAAOhX,EAVPqW,EAAO,EACPC,EAAS,EAET+L,EAAW,cACXC,EAAU,CACZN,UAAW,CAAE1L,OAAQ,EAAGD,KAAM,GAC9B4L,SAAU,CAAE3L,OAAQ,EAAGD,KAAM,GAC7B9U,OAAQ,IAIVhD,KAAK2Q,UAAU3Q,KAAKiP,MAAM,CAAC6J,EAAK5c,EAAM+Q,KA4BpC,GA3BAjN,KAAKwP,KAAOsJ,EAER5c,GAAiB,QAAT+Q,IACV8W,EAAQN,UAAU3L,KAAOA,EACzBiM,EAAQN,UAAU1L,OAASA,EAAS,EAChC7b,EAAK8G,QAAU9G,EAAK8G,OAAO0V,OAC7BqL,EAAQ/gB,OAAShD,KAAK6jB,WAAW3nB,GACjC6nB,EAAQL,SAAS5L,KAAO5b,EAAK8G,OAAO0V,MAAMZ,KAC1CiM,EAAQL,SAAS3L,OAAS7b,EAAK8G,OAAO0V,MAAMX,OAAS,EACrD/X,KAAKzH,IAAIirB,WAAWO,KAEpBA,EAAQ/gB,OAAS8gB,EACjBC,EAAQL,SAAS5L,KAAO,EACxBiM,EAAQL,SAAS3L,OAAS,EAC1B/X,KAAKzH,IAAIirB,WAAWO,KAIxBtL,EAAQK,EAAInM,MAAM,OACd8L,GACFX,GAAQW,EAAMrb,OACdqE,EAAOqX,EAAIkL,YAAY,MACvBjM,EAASe,EAAI1b,OAASqE,GAEtBsW,GAAUe,EAAI1b,OAGZlB,GAAiB,UAAT+Q,EAAkB,CAC5B,IAAIgX,EAAI/nB,EAAK6Q,QAAU,CAAEgK,KAAM,CAAC,IAEhB,SAAd7a,EAAK+Q,MAAkC,WAAd/Q,EAAK+Q,OAAsB/Q,EAAKoU,QACzCpU,IAAS+nB,EAAExiB,OAAQwiB,EAAElN,KAAKmN,YACtChoB,EAAK8G,QAAU9G,EAAK8G,OAAO2V,KAC7BoL,EAAQ/gB,OAAShD,KAAK6jB,WAAW3nB,GACjC6nB,EAAQL,SAAS5L,KAAO5b,EAAK8G,OAAO2V,IAAIb,KACxCiM,EAAQL,SAAS3L,OAAS7b,EAAK8G,OAAO2V,IAAIZ,OAAS,EACnDgM,EAAQN,UAAU3L,KAAOA,EACzBiM,EAAQN,UAAU1L,OAASA,EAAS,EACpC/X,KAAKzH,IAAIirB,WAAWO,KAEpBA,EAAQ/gB,OAAS8gB,EACjBC,EAAQL,SAAS5L,KAAO,EACxBiM,EAAQL,SAAS3L,OAAS,EAC1BgM,EAAQN,UAAU3L,KAAOA,EACzBiM,EAAQN,UAAU1L,OAASA,EAAS,EACpC/X,KAAKzH,IAAIirB,WAAWO,IAG1B,IAEJ,CAEA,YAAAnB,GACE,QAAI5iB,KAAKgiB,kBAG8B,IAA5BhiB,KAAK4hB,QAAQK,WACfjiB,KAAK4hB,QAAQK,YAElBjiB,KAAK8hB,WAAW1kB,QACX4C,KAAK8hB,WAAWrV,MAAK9O,GAAKA,EAAEskB,aAGvC,CAEA,QAAAD,GACE,QAAmC,IAAxBhiB,KAAK4hB,QAAQvD,OACtB,OAAOre,KAAK4hB,QAAQvD,OAGtB,IAAI4D,EAAajiB,KAAK4hB,QAAQK,WAC9B,YAA0B,IAAfA,IAA6C,IAAfA,MAIrCjiB,KAAK8hB,WAAW1kB,QACX4C,KAAK8hB,WAAWrV,MAAK9O,GAAKA,EAAE0gB,SAGvC,CAEA,KAAAwD,GACE,YAA6B,IAAlB7hB,KAAK6P,KAAKtX,MACVyH,KAAK6P,KAAKtX,IAEdyH,KAAK8hB,WAAW1kB,OAAS,CAClC,CAEA,gBAAA8kB,GACE,YAA2C,IAAhCliB,KAAK4hB,QAAQO,eACfniB,KAAK4hB,QAAQO,gBAElBniB,KAAK8hB,WAAW1kB,QACX4C,KAAK8hB,WAAWrV,MAAK9O,GAAKA,EAAEykB,eAGvC,CAEA,UAAAe,GACE,OAAInjB,KAAK6P,KAAKgM,GACL7b,KAAKqB,KAAKrB,KAAK6P,KAAKgM,IAClB7b,KAAK6P,KAAKkL,KACZ/a,KAAKqB,KAAKrB,KAAK6P,KAAKkL,MAEpB,QAEX,CAEA,IAAA1Z,CAAKqO,GACH,GAAI1P,KAAK4hB,QAAQ+B,SAAU,OAAOjU,EAClC,GAA2B,KAAvBA,EAAKwB,WAAW,GAAqB,OAAOxB,EAChD,GAAI,YAAYvC,KAAKuC,GAAO,OAAOA,EACnC,IAAI8kB,EAASx0B,KAAKs0B,cAAc17B,IAAI8W,GACpC,GAAI8kB,EAAQ,OAAOA,EAEnB,IAAIzZ,EAAO/a,KAAK6P,KAAKgM,GAAK2F,EAAQxhB,KAAK6P,KAAKgM,IAAM,IAEX,iBAA5B7b,KAAK4hB,QAAQK,aACtBlH,EAAOyG,EAAQlH,EAAQS,EAAM/a,KAAK4hB,QAAQK,cAG5C,IAAI5gB,EAAOogB,EAAS1G,EAAMrL,GAG1B,OAFA1P,KAAKs0B,cAAcz7B,IAAI6W,EAAMrO,GAEtBA,CACT,CAEA,QAAAygB,GACE,IAAK9hB,KAAK+hB,aAER,GADA/hB,KAAK+hB,aAAe,GAChB/hB,KAAKiP,KACPjP,KAAKiP,KAAKmB,MAAKlU,IACb,GAAIA,EAAK8G,QAAU9G,EAAK8G,OAAOyM,MAAMlX,IAAK,CACxC,IAAIA,EAAM2D,EAAK8G,OAAOyM,MAAMlX,IACvByH,KAAK+hB,aAAaxL,SAAShe,IAC9ByH,KAAK+hB,aAAahpB,KAAKR,EAE3B,SAEG,CACL,IAAIkX,EAAQ,IAAIgK,EAAMzZ,KAAKm0B,YAAan0B,KAAK6P,MACzCJ,EAAMlX,KAAKyH,KAAK+hB,aAAahpB,KAAK0W,EAAMlX,IAC9C,CAGF,OAAOyH,KAAK+hB,YACd,CAEA,iBAAAO,GACE,IAAIC,EAAU,CAAC,EACf,GAAIviB,KAAKiP,KACPjP,KAAKiP,KAAKmB,MAAKlU,IACb,GAAIA,EAAK8G,OAAQ,CACf,IAAI+X,EAAO7e,EAAK8G,OAAOyM,MAAMsL,KAC7B,GAAIA,IAASwH,EAAQxH,GAAO,CAC1BwH,EAAQxH,IAAQ,EAChB,IAAIe,EAAU9b,KAAKo0B,aACfp0B,KAAKy0B,UAAU1Z,GACf/a,KAAKyiB,MAAMziB,KAAKqB,KAAK0Z,IACzB/a,KAAKzH,IAAIiqB,iBAAiB1G,EAAS5f,EAAK8G,OAAOyM,MAAMD,IACvD,CACF,UAEG,GAAIxP,KAAKwP,IAAK,CACnB,IAAIuL,EAAO/a,KAAK6P,KAAKkL,KACjB/a,KAAKyiB,MAAMziB,KAAKqB,KAAKrB,KAAK6P,KAAKkL,OAC/B,cACJ/a,KAAKzH,IAAIiqB,iBAAiBzH,EAAM/a,KAAKwP,IACvC,CACF,CAEA,UAAAqU,CAAW3nB,GACT,OAAI8D,KAAK4hB,QAAQ7G,KACR/a,KAAKyiB,MAAMziB,KAAK4hB,QAAQ7G,MACtB/a,KAAKo0B,aACPp0B,KAAKy0B,UAAUv4B,EAAK8G,OAAOyM,MAAMsL,MAEjC/a,KAAKyiB,MAAMziB,KAAKqB,KAAKnF,EAAK8G,OAAOyM,MAAMsL,MAElD,CAEA,QAAA8H,CAAS/J,GACP,OAAIgK,OACKA,OAAO/H,KAAKjC,GAAK5a,SAAS,UAE1B7D,OAAO0oB,KAAKC,SAASC,mBAAmBnK,IAEnD,CAEA,SAAA2b,CAAUpzB,GACR,IAAImzB,EAASx0B,KAAKq0B,iBAAiBz7B,IAAIyI,GACvC,GAAImzB,EAAQ,OAAOA,EAEnB,GAAIna,EAAe,CACjB,IAAIqa,EAAUra,EAAchZ,GAAMnD,WAGlC,OAFA8B,KAAKq0B,iBAAiBx7B,IAAIwI,EAAMqzB,GAEzBA,CACT,CACE,MAAM,IAAI9d,MACR,+DAGN,CAEA,KAAA6L,CAAMphB,GACJ,IAAImzB,EAASx0B,KAAKu0B,aAAa37B,IAAIyI,GACnC,GAAImzB,EAAQ,OAAOA,EAEP,OAAR9S,IACFrgB,EAAOA,EAAK/C,QAAQ,MAAO,MAG7B,IAAIsd,EAAMgI,UAAUviB,GAAM/C,QAAQ,QAAS2kB,oBAG3C,OAFAjjB,KAAKu0B,aAAa17B,IAAIwI,EAAMua,GAErBA,CACT,E,8BClWF,IAAIW,EAAe,EAAQ,KACvB5L,EAAY,EAAQ,MAEpBC,GADW,EAAQ,MACX,EAAQ,OACpB,MAAM4L,EAAS,EAAQ,KAEvB,MAAM2H,EACJ,WAAA1hB,CAAYyb,EAAW1O,EAAKK,GAQ1B,IAAIZ,EAPJO,EAAMA,EAAItR,WACV8B,KAAKme,aAAc,EAEnBne,KAAKokB,WAAalG,EAClBle,KAAKqkB,KAAO7U,EACZxP,KAAKskB,MAAQzU,EACb7P,KAAKukB,UAAOnkB,EAGZ,IAAI0Y,EAAMnI,EACV3Q,KAAKqO,OAAS,IAAImO,EAAOxc,KAAKokB,WAAYnV,EAAMjP,KAAKskB,OACrDtkB,KAAKqO,OAAOmB,IAAMA,EAElB,IAAIvP,EAAOD,KACXzF,OAAO0Q,eAAejL,KAAKqO,OAAQ,OAAQ,CACzCzV,IAAG,IACMqH,EAAKgP,OAIhB,IAAI1W,EAAM,IAAIgkB,EAAazD,EAAK7J,EAAMjP,KAAKskB,MAAO9U,GAClD,GAAIjX,EAAIspB,QAAS,CACf,IAAK2C,EAAcC,GAAgBlsB,EAAI2nB,WACnCsE,IACFxkB,KAAKqO,OAAOmB,IAAMgV,GAEhBC,IACFzkB,KAAKqO,OAAO9V,IAAMksB,EAEtB,MACElsB,EAAI8pB,kBACJriB,KAAKqO,OAAOmB,IAAMjX,EAAIiX,GAE1B,CAEA,KAAAyP,GACE,OAAIjf,KAAK0b,MAAc0D,QAAQC,OAAOrf,KAAK0b,OACpC0D,QAAQ9E,QAAQta,KAAKqO,OAC9B,CAEA,MAAM2Q,GACJ,OAAOhf,KAAKif,QAAQC,MAAMF,EAC5B,CAEA,QAAQG,GACN,OAAOnf,KAAKif,QAAQvB,KAAKyB,EAAWA,EACtC,CAEA,IAAAP,GACE,GAAI5e,KAAK0b,MAAO,MAAM1b,KAAK0b,MAC3B,OAAO1b,KAAKqO,MACd,CAEA,IAAAqP,CAAKqB,EAAaC,GAWhB,OAAOhf,KAAKif,QAAQvB,KAAKqB,EAAaC,EACxC,CAEA,QAAA9gB,GACE,OAAO8B,KAAKqkB,IACd,CAEA,QAAAvF,GACE,MAAO,EACT,CAEA,WAAIH,GACF,OAAO3e,KAAKqO,OAAOmB,GACrB,CAEA,OAAIA,GACF,OAAOxP,KAAKqO,OAAOmB,GACrB,CAEA,OAAIjX,GACF,OAAOyH,KAAKqO,OAAO9V,GACrB,CAEA,YAAIsmB,GACF,MAAO,EACT,CAEA,QAAIhP,GACF,OAAO7P,KAAKqO,OAAOwB,IACrB,CAEA,aAAIqO,GACF,OAAOle,KAAKqO,OAAO6P,SACrB,CAEA,QAAIjP,GACF,GAAIjP,KAAK0kB,MACP,OAAO1kB,KAAK0kB,MAGd,IAAIzV,EACAqP,EAAS1N,EAEb,IACE3B,EAAOqP,EAAOte,KAAKqkB,KAAMrkB,KAAKskB,MAChC,CAAE,MAAO5I,GACP1b,KAAK0b,MAAQA,CACf,CAEA,GAAI1b,KAAK0b,MACP,MAAM1b,KAAK0b,MAGX,OADA1b,KAAK0kB,MAAQzV,EACNA,CAEX,CAEA,IAAKyL,OAAOgE,eACV,MAAO,cACT,EAGFvmB,EAAOC,QAAU+rB,EACjBA,EAAa7mB,QAAU6mB,C,8BCvIvB,IAAI,QAAEzP,EAAO,GAAEC,GAAO,EAAQ,MAC1BiD,EAAiB,EAAQ,KACzB+M,EAAc,EAAQ,MACtBhU,EAAY,EAAQ,MAExB,SAASiU,EAAUnH,EAAK1Q,GACtB,IAAI8X,EAAS,IAAIpH,EAAIhb,YAErB,IAAK,IAAI9E,KAAK8f,EAAK,CACjB,IAAKljB,OAAO2C,UAAUM,eAAeL,KAAKsgB,EAAK9f,GAE7C,SAEF,GAAU,eAANA,EAAoB,SACxB,IAAI7E,EAAQ2kB,EAAI9f,GACZsP,SAAcnU,EAER,WAAN6E,GAA2B,WAATsP,EAChBF,IAAQ8X,EAAOlnB,GAAKoP,GACT,WAANpP,EACTknB,EAAOlnB,GAAK7E,EACHmE,MAAMc,QAAQjF,GACvB+rB,EAAOlnB,GAAK7E,EAAMP,KAAIusB,GAAKF,EAAUE,EAAGD,MAE3B,WAAT5X,GAA+B,OAAVnU,IAAgBA,EAAQ8rB,EAAU9rB,IAC3D+rB,EAAOlnB,GAAK7E,EAEhB,CAEA,OAAO+rB,CACT,CAEA,MAAMtQ,EACJ,WAAA9R,CAAYuR,EAAW,CAAC,GACtBhU,KAAK+W,KAAO,CAAC,EACb/W,KAAK0U,IAAW,EAChB1U,KAAK2U,IAAM,EAEX,IAAK,IAAIvb,KAAQ4a,EACf,GAAa,UAAT5a,EAAkB,CACpB4G,KAAKsQ,MAAQ,GACb,IAAK,IAAIpU,KAAQ8X,EAAS5a,GACE,mBAAf8C,EAAK6oB,MACd/kB,KAAKkU,OAAOhY,EAAK6oB,SAEjB/kB,KAAKkU,OAAOhY,EAGlB,MACE8D,KAAK5G,GAAQ4a,EAAS5a,EAG5B,CAEA,UAAA+b,CAAWuG,GAET,GADAA,EAAM2K,YAAcrmB,KAChB0b,EAAM/I,OAAS3S,KAAKgD,QAAU,aAAamK,KAAKuO,EAAM/I,OAAQ,CAChE,IAAI2T,EAAItmB,KAAKgD,OACb0Y,EAAM/I,MAAQ+I,EAAM/I,MAAMrU,QACxB,aACA,KAAKgoB,EAAE7W,MAAMsL,QAAQuL,EAAE5N,MAAMZ,QAAQwO,EAAE5N,MAAMX,WAEjD,CACA,OAAO2D,CACT,CAEA,KAAA5I,CAAMmD,GAEJ,OADAjW,KAAK+M,OAAOmJ,YAAYlW,KAAMiW,GACvBjW,IACT,CAEA,MAAArG,CAAOwrB,EAAY,CAAC,GAClB,IAAK,IAAI/rB,KAAQ+rB,EACfnlB,KAAK5G,GAAQ+rB,EAAU/rB,GAEzB,OAAO4G,IACT,CAEA,MAAA6S,CAAOoD,GAEL,OADAjW,KAAK+M,OAAOgJ,aAAa/V,KAAMiW,GACxBjW,IACT,CAEA,SAAA6V,CAAUC,UACD9V,KAAK+W,KAAKlE,cACV7S,KAAK+W,KAAKjE,MACZgD,UAAoB9V,KAAK+W,KAAK4O,OACrC,CAEA,KAAAZ,CAAMI,EAAY,CAAC,GACjB,IAAIN,EAASD,EAAU5kB,MACvB,IAAK,IAAI5G,KAAQ+rB,EACfN,EAAOzrB,GAAQ+rB,EAAU/rB,GAE3B,OAAOyrB,CACT,CAEA,UAAAQ,CAAWF,EAAY,CAAC,GACtB,IAAIN,EAAS7kB,KAAK+kB,MAAMI,GAExB,OADAnlB,KAAK+M,OAAOmJ,YAAYlW,KAAM6kB,GACvBA,CACT,CAEA,WAAAO,CAAYD,EAAY,CAAC,GACvB,IAAIN,EAAS7kB,KAAK+kB,MAAMI,GAExB,OADAnlB,KAAK+M,OAAOgJ,aAAa/V,KAAM6kB,GACxBA,CACT,CAEA,KAAAnJ,CAAM7D,EAAShI,EAAO,CAAC,GACrB,GAAI7P,KAAKgD,OAAQ,CACf,IAAI,IAAE2V,EAAG,MAAED,GAAU1Y,KAAKglB,QAAQnV,GAClC,OAAO7P,KAAKgD,OAAOyM,MAAMiM,MACvB7D,EACA,CAAEE,OAAQW,EAAMX,OAAQD,KAAMY,EAAMZ,MACpC,CAAEC,OAAQY,EAAIZ,OAAQD,KAAMa,EAAIb,MAChCjI,EAEJ,CACA,OAAO,IAAI+H,EAAeC,EAC5B,CAEA,iBAAAb,GACE,MAAO,CACLpe,IAAG,CAACsD,EAAMkC,IACK,YAATA,EACKlC,EACW,SAATkC,EACF,IAAMlC,EAAK+S,OAAOiI,UAElBhb,EAAKkC,GAIhBvF,IAAG,CAACqD,EAAMkC,EAAMtF,KACVoD,EAAKkC,KAAUtF,IACnBoD,EAAKkC,GAAQtF,EAEF,SAATsF,GACS,UAATA,GACS,SAATA,GACS,WAATA,GACS,cAATA,GAES,SAATA,GAEAlC,EAAKsZ,cAX0B,GAgBvC,CAEA,SAAAA,GACE,GAAIxV,KAAK0U,GAAU,CACjB1U,KAAK0U,IAAW,EAChB,IAAI3C,EAAO/R,KACX,KAAQ+R,EAAOA,EAAKhF,QAClBgF,EAAK2C,IAAW,CAEpB,CACF,CAEA,IAAA3C,GACE,IAAK/R,KAAK+M,OAAQ,OAClB,IAAI9T,EAAQ+G,KAAK+M,OAAO9T,MAAM+G,MAC9B,OAAOA,KAAK+M,OAAOuD,MAAMrX,EAAQ,EACnC,CAEA,UAAAgtB,CAAWpW,EAAM8kB,GACf,IAAIniB,EAAMxS,KAAKgD,OAAO0V,MACtB,GAAI7I,EAAK5W,MACPuZ,EAAMxS,KAAKgmB,eAAenW,EAAK5W,MAAO07B,QACjC,GAAI9kB,EAAKtR,KAAM,CAEpB,IAAItF,GADJ07B,EAAuB30B,KAAK9B,YACKvF,QAAQkX,EAAKtR,OAC/B,IAAXtF,IAAcuZ,EAAMxS,KAAKgmB,eAAe/sB,EAAO07B,GACrD,CACA,OAAOniB,CACT,CAEA,cAAAwT,CAAe/sB,EAAO07B,GACpB,IAAI3T,EAAS2T,GAAwB30B,KAAK9B,WACtC6Z,EAAS/X,KAAKgD,OAAO0V,MAAMX,OAC3BD,EAAO9X,KAAKgD,OAAO0V,MAAMZ,KAE7B,IAAK,IAAIna,EAAI,EAAGA,EAAI1E,EAAO0E,IACP,OAAdqjB,EAAOrjB,IACToa,EAAS,EACTD,GAAQ,GAERC,GAAU,EAId,MAAO,CAAEA,SAAQD,OACnB,CAEA,IAAA7F,GACE,IAAKjS,KAAK+M,OAAQ,OAClB,IAAI9T,EAAQ+G,KAAK+M,OAAO9T,MAAM+G,MAC9B,OAAOA,KAAK+M,OAAOuD,MAAMrX,EAAQ,EACnC,CAEA,OAAA+rB,CAAQnV,GACN,IAAI6I,EAAQ,CACVX,OAAQ/X,KAAKgD,OAAO0V,MAAMX,OAC1BD,KAAM9X,KAAKgD,OAAO0V,MAAMZ,MAEtBa,EAAM3Y,KAAKgD,OAAO2V,IAClB,CACAZ,OAAQ/X,KAAKgD,OAAO2V,IAAIZ,OAAS,EACjCD,KAAM9X,KAAKgD,OAAO2V,IAAIb,MAEtB,CACAC,OAAQW,EAAMX,OAAS,EACvBD,KAAMY,EAAMZ,MAGhB,GAAIjI,EAAKtR,KAAM,CACb,IAAIo2B,EAAuB30B,KAAK9B,WAC5BjF,EAAQ07B,EAAqBh8B,QAAQkX,EAAKtR,OAC/B,IAAXtF,IACFyf,EAAQ1Y,KAAKgmB,eAAe/sB,EAAO07B,GACnChc,EAAM3Y,KAAKgmB,eAAe/sB,EAAQ4W,EAAKtR,KAAKnB,OAAQu3B,GAExD,MACM9kB,EAAK6I,MACPA,EAAQ,CACNX,OAAQlI,EAAK6I,MAAMX,OACnBD,KAAMjI,EAAK6I,MAAMZ,MAEVjI,EAAK5W,QACdyf,EAAQ1Y,KAAKgmB,eAAenW,EAAK5W,QAG/B4W,EAAK8I,IACPA,EAAM,CACJZ,OAAQlI,EAAK8I,IAAIZ,OACjBD,KAAMjI,EAAK8I,IAAIb,MAERjI,EAAKqW,SACdvN,EAAM3Y,KAAKgmB,eAAenW,EAAKqW,UACtBrW,EAAK5W,QACd0f,EAAM3Y,KAAKgmB,eAAenW,EAAK5W,MAAQ,IAW3C,OANE0f,EAAIb,KAAOY,EAAMZ,MAChBa,EAAIb,OAASY,EAAMZ,MAAQa,EAAIZ,QAAUW,EAAMX,UAEhDY,EAAM,CAAEZ,OAAQW,EAAMX,OAAS,EAAGD,KAAMY,EAAMZ,OAGzC,CAAEa,MAAKD,QAChB,CAEA,GAAA+M,CAAIrnB,EAAMsnB,GAER,OADU,IAAIf,GACHc,IAAIzlB,KAAM5B,EAAMsnB,EAC7B,CAEA,MAAAR,GAKE,OAJIllB,KAAK+M,QACP/M,KAAK+M,OAAO7I,YAAYlE,MAE1BA,KAAK+M,YAAS3M,EACPJ,IACT,CAEA,WAAAslB,IAAehV,GACb,GAAItQ,KAAK+M,OAAQ,CACf,IAAIwY,EAAWvlB,KACXwlB,GAAY,EAChB,IAAK,IAAItpB,KAAQoU,EACXpU,IAAS8D,KACXwlB,GAAY,EACHA,GACTxlB,KAAK+M,OAAOmJ,YAAYqP,EAAUrpB,GAClCqpB,EAAWrpB,GAEX8D,KAAK+M,OAAOgJ,aAAawP,EAAUrpB,GAIlCspB,GACHxlB,KAAKklB,QAET,CAEA,OAAOllB,IACT,CAEA,IAAAiP,GACE,IAAIZ,EAASrO,KACb,KAAOqO,EAAOtB,QAAiC,aAAvBsB,EAAOtB,OAAOE,MACpCoB,EAASA,EAAOtB,OAElB,OAAOsB,CACT,CAEA,MAAA+N,CAAOwJ,EAAGhM,GACR,IAAIiM,EAAQ,CAAC,EACTC,EAAuB,MAAVlM,EACjBA,EAASA,GAAU,IAAIphB,IACvB,IAAIutB,EAAkB,EAEtB,IAAK,IAAI3sB,KAAQ4G,KAAM,CACrB,IAAKzF,OAAO2C,UAAUM,eAAeL,KAAK6C,KAAM5G,GAE9C,SAEF,GAAa,WAATA,GAA8B,eAATA,EAAuB,SAChD,IAAIN,EAAQkH,KAAK5G,GAEjB,GAAI6D,MAAMc,QAAQjF,GAChB+sB,EAAMzsB,GAAQN,EAAMP,KAAIoF,GACL,iBAANA,GAAkBA,EAAEye,OACtBze,EAAEye,OAAO,KAAMxC,GAEfjc,SAGN,GAAqB,iBAAV7E,GAAsBA,EAAMsjB,OAC5CyJ,EAAMzsB,GAAQN,EAAMsjB,OAAO,KAAMxC,QAC5B,GAAa,WAATxgB,EAAmB,CAC5B,IAAI6gB,EAAUL,EAAOhhB,IAAIE,EAAM2W,OAChB,MAAXwK,IACFA,EAAU8L,EACVnM,EAAO/gB,IAAIC,EAAM2W,MAAOsW,GACxBA,KAEFF,EAAMzsB,GAAQ,CACZuf,IAAK7f,EAAM6f,IACXsB,UACAvB,MAAO5f,EAAM4f,MAEjB,MACEmN,EAAMzsB,GAAQN,CAElB,CAMA,OAJIgtB,IACFD,EAAMjM,OAAS,IAAIA,EAAOvhB,QAAQE,KAAIkX,GAASA,EAAM2M,YAGhDyJ,CACT,CAEA,OAAA3O,GAIE,OAHKlX,KAAKmmB,aACRnmB,KAAKmmB,WAAa,IAAIC,MAAMpmB,KAAMA,KAAKgX,sBAElChX,KAAKmmB,UACd,CAEA,QAAAjoB,CAAS8hB,EAAcrP,GACjBqP,EAAYrP,YAAWqP,EAAcA,EAAYrP,WACrD,IAAItC,EAAS,GAIb,OAHA2R,EAAYhgB,MAAMrC,IAChB0Q,GAAU1Q,KAEL0Q,CACT,CAEA,IAAA4W,CAAK5W,EAAQwI,EAAMhH,GACjB,IAAIoQ,EAAO,CAAE/jB,KAAM8D,MACnB,IAAK,IAAIrC,KAAKkS,EAAMoQ,EAAKtiB,GAAKkS,EAAKlS,GACnC,OAAO0Q,EAAO4W,KAAKpO,EAAMoJ,EAC3B,CAEA,WAAI7L,GACF,OAAOpU,IACT,EAGF7H,EAAOC,QAAUmc,EACjBA,EAAKjX,QAAUiX,C,8BC1Xf,IAAIT,EAAY,EAAQ,MACpByS,EAAS,EAAQ,MACjB9M,EAAQ,EAAQ,MAEpB,SAAS7I,EAAMpB,EAAKK,GAClB,IAAIJ,EAAQ,IAAIgK,EAAMjK,EAAKK,GACvByO,EAAS,IAAIiI,EAAO9W,GACxB,IACE6O,EAAO1N,OACT,CAAE,MAAOrX,GAqBP,MAAMA,CACR,CAEA,OAAO+kB,EAAOrP,IAChB,CAEA9W,EAAOC,QAAUwY,EACjBA,EAAMtT,QAAUsT,EAEhBkD,EAAUuD,cAAczG,E,8BCvCxB,IAAIZ,EAAc,EAAQ,MACtBwW,EAAY,EAAQ,MACpBhS,EAAU,EAAQ,MAClBT,EAAS,EAAQ,MACjBjF,EAAO,EAAQ,MACf2F,EAAO,EAAQ,MAEnB,MAAMgS,EAAwB,CAC5BC,OAAO,EACPnF,OAAO,GAqlBTppB,EAAOC,QA1kBP,MACE,WAAAqK,CAAYgN,GACVzP,KAAKyP,MAAQA,EAEbzP,KAAKiP,KAAO,IAAIH,EAChB9O,KAAKkhB,QAAUlhB,KAAKiP,KACpBjP,KAAK2mB,OAAS,GACd3mB,KAAKkkB,WAAY,EAEjBlkB,KAAK6mB,kBACL7mB,KAAKiP,KAAKjM,OAAS,CAAEyM,QAAOiJ,MAAO,CAAEX,OAAQ,EAAGD,KAAM,EAAGqD,OAAQ,GACnE,CAEA,MAAAuB,CAAOxK,GACL,IAOIjF,EACAgF,EACA2V,EATA1rB,EAAO,IAAI6X,EACf7X,EAAK9C,KAAO8Y,EAAM,GAAG3S,MAAM,GACT,KAAdrD,EAAK9C,MACP4G,KAAKqoB,cAAcnsB,EAAMgW,GAE3BlS,KAAKmnB,KAAKjrB,EAAMgW,EAAM,IAKtB,IAAIzQ,GAAO,EACP6mB,GAAO,EACPC,EAAS,GACTjB,EAAW,GAEf,MAAQtnB,KAAKwmB,UAAUM,aAAa,CAYlC,GAVA7Z,GADAiF,EAAQlS,KAAKwmB,UAAUO,aACV,GAEA,MAAT9Z,GAAyB,MAATA,EAClBqa,EAASvuB,KAAc,MAATkU,EAAe,IAAM,KACjB,MAATA,GAAgBqa,EAASlqB,OAAS,EAC3CkqB,EAASvuB,KAAK,KACLkU,IAASqa,EAASA,EAASlqB,OAAS,IAC7CkqB,EAASxnB,MAGa,IAApBwnB,EAASlqB,OAAc,CACzB,GAAa,MAAT6P,EAAc,CAChB/Q,EAAK8G,OAAO2V,IAAM3Y,KAAKonB,YAAYlV,EAAM,IACzChW,EAAK8G,OAAO2V,IAAIwC,SAChBnb,KAAKkkB,WAAY,EACjB,KACF,CAAO,GAAa,MAATjX,EAAc,CACvBqb,GAAO,EACP,KACF,CAAO,GAAa,MAATrb,EAAc,CACvB,GAAIsb,EAAOnrB,OAAS,EAAG,CAGrB,IAFAwqB,EAAQW,EAAOnrB,OAAS,EACxB6U,EAAOsW,EAAOX,GACP3V,GAAoB,UAAZA,EAAK,IAClBA,EAAOsW,IAASX,GAEd3V,IACF/V,EAAK8G,OAAO2V,IAAM3Y,KAAKonB,YAAYnV,EAAK,IAAMA,EAAK,IACnD/V,EAAK8G,OAAO2V,IAAIwC,SAEpB,CACAnb,KAAK2Y,IAAIzG,GACT,KACF,CACEqW,EAAOxvB,KAAKmZ,EAEhB,MACEqW,EAAOxvB,KAAKmZ,GAGd,GAAIlS,KAAKwmB,UAAUM,YAAa,CAC9BrlB,GAAO,EACP,KACF,CACF,CAEAvF,EAAK6a,KAAK4O,QAAU3lB,KAAK0nB,yBAAyBa,GAC9CA,EAAOnrB,QACTlB,EAAK6a,KAAKyR,UAAYxoB,KAAKyoB,2BAA2BF,GACtDvoB,KAAKylB,IAAIvpB,EAAM,SAAUqsB,GACrB9mB,IACFyQ,EAAQqW,EAAOA,EAAOnrB,OAAS,GAC/BlB,EAAK8G,OAAO2V,IAAM3Y,KAAKonB,YAAYlV,EAAM,IAAMA,EAAM,IACrDhW,EAAK8G,OAAO2V,IAAIwC,SAChBnb,KAAK2mB,OAASzqB,EAAK6a,KAAK4O,QACxBzpB,EAAK6a,KAAK4O,QAAU,MAGtBzpB,EAAK6a,KAAKyR,UAAY,GACtBtsB,EAAKqsB,OAAS,IAGZD,IACFpsB,EAAKoU,MAAQ,GACbtQ,KAAKkhB,QAAUhlB,EAEnB,CAEA,oBAAAksB,CAAqB7V,GACnB,IAAId,EAAQzR,KAAKyR,MAAMc,GACvB,IAAc,IAAVd,EAAiB,OAErB,IACIS,EADA+W,EAAU,EAEd,IAAK,IAAInE,EAAIrT,EAAQ,EAAGqT,GAAK,IAC3B5S,EAAQK,EAAOuS,GACE,UAAb5S,EAAM,KACR+W,GAAW,EACK,IAAZA,IAJwBnE,KAUhC,MAAM9kB,KAAKyP,MAAMiM,MACf,mBACa,SAAbxJ,EAAM,GAAgBA,EAAM,GAAK,EAAIA,EAAM,GAE/C,CAEA,KAAAT,CAAMc,GACJ,IACIL,EAAOjF,EAAMgF,EADbqV,EAAW,EAEf,IAAK,IAAK3pB,EAAGmK,KAAYyK,EAAO5P,UAAW,CAUzC,GATAuP,EAAQpK,EACRmF,EAAOiF,EAAM,GAEA,MAATjF,IACFqa,GAAY,GAED,MAATra,IACFqa,GAAY,GAEG,IAAbA,GAA2B,MAATra,EAAc,CAClC,GAAKgF,EAEE,IAAgB,SAAZA,EAAK,IAA6B,WAAZA,EAAK,GACpC,SAEA,OAAOtU,CACT,CALEqC,KAAKgpB,YAAY9W,EAMrB,CAEAD,EAAOC,CACT,CACA,OAAO,CACT,CAEA,OAAA0K,CAAQ1K,GACN,IAAIhW,EAAO,IAAIsY,EACfxU,KAAKmnB,KAAKjrB,EAAMgW,EAAM,IACtBhW,EAAK8G,OAAO2V,IAAM3Y,KAAKonB,YAAYlV,EAAM,IAAMA,EAAM,IACrDhW,EAAK8G,OAAO2V,IAAIwC,SAEhB,IAAItE,EAAO3E,EAAM,GAAG3S,MAAM,GAAI,GAC9B,GAAI,QAAQ4N,KAAK0J,GACf3a,EAAK2a,KAAO,GACZ3a,EAAK6a,KAAKpV,KAAOkV,EACjB3a,EAAK6a,KAAKnV,MAAQ,OACb,CACL,IAAI+K,EAAQkK,EAAKlK,MAAM,wBACvBzQ,EAAK2a,KAAOlK,EAAM,GAClBzQ,EAAK6a,KAAKpV,KAAOgL,EAAM,GACvBzQ,EAAK6a,KAAKnV,MAAQ+K,EAAM,EAC1B,CACF,CAEA,eAAAka,GACE7mB,KAAKwmB,UAAYA,EAAUxmB,KAAKyP,MAClC,CAEA,IAAAQ,CAAKsC,EAAQqU,GACX,IAAI1qB,EAAO,IAAI8T,EACfhQ,KAAKmnB,KAAKjrB,EAAMqW,EAAO,GAAG,IAE1B,IA4BIL,EA5BAzQ,EAAO8Q,EAAOA,EAAOnV,OAAS,GAWlC,IAVgB,MAAZqE,EAAK,KACPzB,KAAKkkB,WAAY,EACjB3R,EAAOzS,OAGT5D,EAAK8G,OAAO2V,IAAM3Y,KAAKonB,YACrB3lB,EAAK,IAAMA,EAAK,IA/LtB,SAA8B8Q,GAC5B,IAAK,IAAI5U,EAAI4U,EAAOnV,OAAS,EAAGO,GAAK,EAAGA,IAAK,CAC3C,IAAIuU,EAAQK,EAAO5U,GACf6U,EAAMN,EAAM,IAAMA,EAAM,GAC5B,GAAIM,EAAK,OAAOA,CAClB,CACF,CAyL4BmV,CAAqBpV,IAE7CrW,EAAK8G,OAAO2V,IAAIwC,SAEQ,SAAjB5I,EAAO,GAAG,IACO,IAAlBA,EAAOnV,QAAc4C,KAAKynB,YAAYlV,GAC1CrW,EAAK6a,KAAKlE,QAAUN,EAAOqV,QAAQ,GAKrC,IAHA1rB,EAAK8G,OAAO0V,MAAQ1Y,KAAKonB,YAAY7U,EAAO,GAAG,IAE/CrW,EAAKkC,KAAO,GACLmU,EAAOnV,QAAQ,CACpB,IAAI6P,EAAOsF,EAAO,GAAG,GACrB,GAAa,MAATtF,GAAyB,UAATA,GAA6B,YAATA,EACtC,MAEF/Q,EAAKkC,MAAQmU,EAAOqV,QAAQ,EAC9B,CAKA,IAHA1rB,EAAK6a,KAAK4O,QAAU,GAGbpT,EAAOnV,QAAQ,CAGpB,GAFA8U,EAAQK,EAAOqV,QAEE,MAAb1V,EAAM,GAAY,CACpBhW,EAAK6a,KAAK4O,SAAWzT,EAAM,GAC3B,KACF,CACmB,SAAbA,EAAM,IAAiB,KAAK/E,KAAK+E,EAAM,KACzClS,KAAKynB,YAAY,CAACvV,IAEpBhW,EAAK6a,KAAK4O,SAAWzT,EAAM,EAE/B,CAEqB,MAAjBhW,EAAKkC,KAAK,IAA+B,MAAjBlC,EAAKkC,KAAK,KACpClC,EAAK6a,KAAKlE,QAAU3W,EAAKkC,KAAK,GAC9BlC,EAAKkC,KAAOlC,EAAKkC,KAAKmB,MAAM,IAG9B,IACIwS,EADA8V,EAAc,GAElB,KAAOtV,EAAOnV,SACZ2U,EAAOQ,EAAO,GAAG,GACJ,UAATR,GAA6B,YAATA,IACxB8V,EAAY9uB,KAAKwZ,EAAOqV,SAG1B5nB,KAAK8nB,wBAAwBvV,GAE7B,IAAK,IAAI5U,EAAI4U,EAAOnV,OAAS,EAAGO,GAAK,EAAGA,IAAK,CAE3C,GADAuU,EAAQK,EAAO5U,GACgB,eAA3BuU,EAAM,GAAGnQ,cAAgC,CAC3C7F,EAAK6rB,WAAY,EACjB,IAAI/G,EAAShhB,KAAKgoB,WAAWzV,EAAQ5U,GACrCqjB,EAAShhB,KAAKioB,cAAc1V,GAAUyO,EACvB,gBAAXA,IAA0B9kB,EAAK6a,KAAKgR,UAAY/G,GACpD,KACF,CAAO,GAA+B,cAA3B9O,EAAM,GAAGnQ,cAA+B,CACjD,IAAImmB,EAAQ3V,EAAOhT,MAAM,GACrBuZ,EAAM,GACV,IAAK,IAAIgM,EAAInnB,EAAGmnB,EAAI,EAAGA,IAAK,CAC1B,IAAI7X,EAAOib,EAAMpD,GAAG,GACpB,GAAgC,IAA5BhM,EAAIwI,OAAO3oB,QAAQ,MAAuB,UAATsU,EACnC,MAEF6L,EAAMoP,EAAMpoB,MAAM,GAAKgZ,CACzB,CACgC,IAA5BA,EAAIwI,OAAO3oB,QAAQ,OACrBuD,EAAK6rB,WAAY,EACjB7rB,EAAK6a,KAAKgR,UAAYjP,EACtBvG,EAAS2V,EAEb,CAEA,GAAiB,UAAbhW,EAAM,IAA+B,YAAbA,EAAM,GAChC,KAEJ,CAEcK,EAAO9F,MAAK9O,GAAc,UAATA,EAAE,IAA2B,YAATA,EAAE,OAGnDzB,EAAK6a,KAAK4O,SAAWkC,EAAYtvB,KAAIoF,GAAKA,EAAE,KAAIQ,KAAK,IACrD0pB,EAAc,IAEhB7nB,KAAKylB,IAAIvpB,EAAM,QAAS2rB,EAAYM,OAAO5V,GAASqU,GAEhD1qB,EAAKpD,MAAMyd,SAAS,OAASqQ,GAC/B5mB,KAAKooB,qBAAqB7V,EAE9B,CAEA,WAAAyW,CAAY9W,GACV,MAAMlS,KAAKyP,MAAMiM,MACf,eACA,CAAEP,OAAQjJ,EAAM,IAChB,CAAEiJ,OAAQjJ,EAAM,GAAKA,EAAM,GAAG9U,QAElC,CAEA,SAAA6pB,CAAU/U,GACR,IAAIhW,EAAO,IAAIuY,EACfzU,KAAKmnB,KAAKjrB,EAAMgW,EAAM,IACtBhW,EAAK8P,SAAW,GAChB9P,EAAK6a,KAAK4O,QAAU,GACpB3lB,KAAKkhB,QAAUhlB,CACjB,CAEA,GAAAyc,CAAIzG,GACElS,KAAKkhB,QAAQ5Q,OAAStQ,KAAKkhB,QAAQ5Q,MAAMlT,SAC3C4C,KAAKkhB,QAAQnK,KAAKmN,UAAYlkB,KAAKkkB,WAErClkB,KAAKkkB,WAAY,EAEjBlkB,KAAKkhB,QAAQnK,KAAKjE,OAAS9S,KAAKkhB,QAAQnK,KAAKjE,OAAS,IAAM9S,KAAK2mB,OACjE3mB,KAAK2mB,OAAS,GAEV3mB,KAAKkhB,QAAQnU,QACf/M,KAAKkhB,QAAQle,OAAO2V,IAAM3Y,KAAKonB,YAAYlV,EAAM,IACjDlS,KAAKkhB,QAAQle,OAAO2V,IAAIwC,SACxBnb,KAAKkhB,QAAUlhB,KAAKkhB,QAAQnU,QAE5B/M,KAAK0oB,gBAAgBxW,EAEzB,CAEA,OAAAgV,GACMlnB,KAAKkhB,QAAQnU,QAAQ/M,KAAK2oB,gBAC1B3oB,KAAKkhB,QAAQ5Q,OAAStQ,KAAKkhB,QAAQ5Q,MAAMlT,SAC3C4C,KAAKkhB,QAAQnK,KAAKmN,UAAYlkB,KAAKkkB,WAErClkB,KAAKkhB,QAAQnK,KAAKjE,OAAS9S,KAAKkhB,QAAQnK,KAAKjE,OAAS,IAAM9S,KAAK2mB,OACjE3mB,KAAKiP,KAAKjM,OAAO2V,IAAM3Y,KAAKonB,YAAYpnB,KAAKwmB,UAAU+I,WACzD,CAEA,aAAAvI,CAAc9U,GAEZ,GADAlS,KAAK2mB,QAAUzU,EAAM,GACjBlS,KAAKkhB,QAAQ5Q,MAAO,CACtB,IAAI2B,EAAOjS,KAAKkhB,QAAQ5Q,MAAMtQ,KAAKkhB,QAAQ5Q,MAAMlT,OAAS,GACtD6U,GAAsB,SAAdA,EAAKhF,OAAoBgF,EAAK8E,KAAK6R,eAC7C3W,EAAK8E,KAAK6R,aAAe5oB,KAAK2mB,OAC9B3mB,KAAK2mB,OAAS,GAElB,CACF,CAIA,WAAAS,CAAYjM,GACV,IAAI3I,EAAMxS,KAAKyP,MAAMyL,WAAWC,GAChC,MAAO,CACLpD,OAAQvF,EAAIiJ,IACZ3D,KAAMtF,EAAIsF,KACVqD,SAEJ,CAEA,IAAAgM,CAAKjrB,EAAMif,GACTnb,KAAKkhB,QAAQnoB,KAAKmD,GAClBA,EAAK8G,OAAS,CACZyM,MAAOzP,KAAKyP,MACZiJ,MAAO1Y,KAAKonB,YAAYjM,IAE1Bjf,EAAK6a,KAAKlE,OAAS7S,KAAK2mB,OACxB3mB,KAAK2mB,OAAS,GACI,YAAdzqB,EAAK+Q,OAAoBjN,KAAKkkB,WAAY,EAChD,CAEA,KAAA/M,CAAMuB,GACJ,IAAIC,GAAM,EACN1L,EAAO,KACPwE,GAAQ,EACR4V,EAAU,KACVC,EAAW,GACXV,EAAiBlO,EAAM,GAAGnM,WAAW,MAErCgG,EAAS,GACTL,EAAQwG,EACZ,KAAOxG,GAAO,CAIZ,GAHAjF,EAAOiF,EAAM,GACbK,EAAOxZ,KAAKmZ,GAEC,MAATjF,GAAyB,MAATA,EACboa,IAASA,EAAUnV,GACxBoV,EAASvuB,KAAc,MAATkU,EAAe,IAAM,UAC9B,GAAI2Z,GAAkBnV,GAAkB,MAATxE,EAC/Boa,IAASA,EAAUnV,GACxBoV,EAASvuB,KAAK,UACT,GAAwB,IAApBuuB,EAASlqB,OAAc,CAChC,GAAa,MAAT6P,EAAc,CAChB,GAAIwE,EAEF,YADAzR,KAAKiQ,KAAKsC,EAAQqU,GAGlB,KAEJ,CAAO,GAAa,MAAT3Z,EAET,YADAjN,KAAK2c,KAAKpK,GAEL,GAAa,MAATtF,EAAc,CACvBjN,KAAKwmB,UAAUe,KAAKhV,EAAOzS,OAC3B6Y,GAAM,EACN,KACF,CAAoB,MAAT1L,IACTwE,GAAQ,EAEZ,MAAWxE,IAASqa,EAASA,EAASlqB,OAAS,KAC7CkqB,EAASxnB,MACe,IAApBwnB,EAASlqB,SAAciqB,EAAU,OAGvCnV,EAAQlS,KAAKwmB,UAAUO,WACzB,CAKA,GAHI/mB,KAAKwmB,UAAUM,cAAanO,GAAM,GAClC2O,EAASlqB,OAAS,GAAG4C,KAAKwnB,gBAAgBH,GAE1C1O,GAAOlH,EAAO,CAChB,IAAKmV,EACH,KAAOrU,EAAOnV,SACZ8U,EAAQK,EAAOA,EAAOnV,OAAS,GAAG,GACpB,UAAV8U,GAA+B,YAAVA,IACzBlS,KAAKwmB,UAAUe,KAAKhV,EAAOzS,OAG/BE,KAAKiQ,KAAKsC,EAAQqU,EACpB,MACE5mB,KAAKynB,YAAYlV,EAErB,CAEA,KAAA3B,GACE,IAAIsB,EACJ,MAAQlS,KAAKwmB,UAAUM,aAGrB,OAFA5U,EAAQlS,KAAKwmB,UAAUO,YAEf7U,EAAM,IACZ,IAAK,QACHlS,KAAK2mB,QAAUzU,EAAM,GACrB,MAEF,IAAK,IACHlS,KAAKgnB,cAAc9U,GACnB,MAEF,IAAK,IACHlS,KAAK2Y,IAAIzG,GACT,MAEF,IAAK,UACHlS,KAAK4c,QAAQ1K,GACb,MAEF,IAAK,UACHlS,KAAK0c,OAAOxK,GACZ,MAEF,IAAK,IACHlS,KAAKinB,UAAU/U,GACf,MAEF,QACElS,KAAKmX,MAAMjF,GAIjBlS,KAAKknB,SACP,CAEA,uBAAAY,GAEA,CAEA,GAAArC,CAAIvpB,EAAMkC,EAAMmU,EAAQqU,GACtB,IAAI1U,EAAOjF,EAIP8E,EAAME,EAHN7U,EAASmV,EAAOnV,OAChBtE,EAAQ,GACR+vB,GAAQ,EAGZ,IAAK,IAAIlrB,EAAI,EAAGA,EAAIP,EAAQO,GAAK,EAC/BuU,EAAQK,EAAO5U,GACfsP,EAAOiF,EAAM,GACA,UAATjF,GAAoBtP,IAAMP,EAAS,GAAMwpB,EAEzB,YAAT3Z,GACTgF,EAAOM,EAAO5U,EAAI,GAAK4U,EAAO5U,EAAI,GAAG,GAAK,QAC1CoU,EAAOQ,EAAO5U,EAAI,GAAK4U,EAAO5U,EAAI,GAAG,GAAK,QACrC8oB,EAAsBxU,IAAUwU,EAAsB1U,IACjC,MAApBjZ,EAAMyG,OAAO,GAMjBspB,GAAQ,EAHN/vB,GAASoZ,EAAM,IAMnBpZ,GAASoZ,EAAM,GAdf2W,GAAQ,EAiBZ,IAAKA,EAAO,CACV,IAAIpD,EAAMlT,EAAOuW,QAAO,CAACtI,EAAK7iB,IAAM6iB,EAAM7iB,EAAE,IAAI,IAChDzB,EAAK6a,KAAK3Y,GAAQ,CAAEqnB,MAAK3sB,QAC3B,CACAoD,EAAKkC,GAAQtF,CACf,CAEA,IAAA6jB,CAAKpK,GACHA,EAAOzS,MAEP,IAAI5D,EAAO,IAAIuY,EACfzU,KAAKmnB,KAAKjrB,EAAMqW,EAAO,GAAG,IAE1BrW,EAAK6a,KAAK4O,QAAU3lB,KAAK0nB,yBAAyBnV,GAClDvS,KAAKylB,IAAIvpB,EAAM,WAAYqW,GAC3BvS,KAAKkhB,QAAUhlB,CACjB,CAEA,wBAAAwrB,CAAyBnV,GACvB,IAAIwW,EACApC,EAAS,GACb,KAAOpU,EAAOnV,SACZ2rB,EAAgBxW,EAAOA,EAAOnV,OAAS,GAAG,GACpB,UAAlB2rB,GAA+C,YAAlBA,IACjCpC,EAASpU,EAAOzS,MAAM,GAAK6mB,EAE7B,OAAOA,CACT,CAIA,0BAAA8B,CAA2BlW,GACzB,IAAIR,EACA4U,EAAS,GACb,KAAOpU,EAAOnV,SACZ2U,EAAOQ,EAAO,GAAG,GACJ,UAATR,GAA6B,YAATA,IACxB4U,GAAUpU,EAAOqV,QAAQ,GAE3B,OAAOjB,CACT,CAEA,aAAAsB,CAAc1V,GACZ,IAAIwW,EACApC,EAAS,GACb,KAAOpU,EAAOnV,SACZ2rB,EAAgBxW,EAAOA,EAAOnV,OAAS,GAAG,GACpB,UAAlB2rB,IACJpC,EAASpU,EAAOzS,MAAM,GAAK6mB,EAE7B,OAAOA,CACT,CAEA,UAAAqB,CAAWzV,EAAQwI,GACjB,IAAI1M,EAAS,GACb,IAAK,IAAI1Q,EAAIod,EAAMpd,EAAI4U,EAAOnV,OAAQO,IACpC0Q,GAAUkE,EAAO5U,GAAG,GAGtB,OADA4U,EAAOrZ,OAAO6hB,EAAMxI,EAAOnV,OAAS2d,GAC7B1M,CACT,CAEA,aAAAsa,GACE,IAAInW,EAAMxS,KAAKkhB,QAAQle,OAAO0V,MAC9B,MAAM1Y,KAAKyP,MAAMiM,MAAM,iBAAkBlJ,EAAIsF,KAAMtF,EAAIuF,OACzD,CAEA,eAAAyP,CAAgBH,GACd,MAAMrnB,KAAKyP,MAAMiM,MACf,mBACA,CAAEP,OAAQkM,EAAQ,IAClB,CAAElM,OAAQkM,EAAQ,GAAK,GAE3B,CAEA,eAAAqB,CAAgBxW,GACd,MAAMlS,KAAKyP,MAAMiM,MACf,eACA,CAAEP,OAAQjJ,EAAM,IAChB,CAAEiJ,OAAQjJ,EAAM,GAAK,GAEzB,CAEA,WAAAuV,CAAYlV,GACV,MAAMvS,KAAKyP,MAAMiM,MACf,eACA,CAAEP,OAAQ5I,EAAO,GAAG,IACpB,CAAE4I,OAAQ5I,EAAO,GAAG,GAAKA,EAAO,GAAG,GAAGnV,QAE1C,CAEA,aAAAirB,CAAcnsB,EAAMgW,GAClB,MAAMlS,KAAKyP,MAAMiM,MACf,uBACA,CAAEP,OAAQjJ,EAAM,IAChB,CAAEiJ,OAAQjJ,EAAM,GAAKA,EAAM,GAAG9U,QAElC,E,8BC3lBF,IAAIwa,EAAiB,EAAQ,KACzB5H,EAAc,EAAQ,MACtBkJ,EAAa,EAAQ,KACrBpF,EAAY,EAAQ,MACpBqF,EAAY,EAAQ,MACpBxI,EAAY,EAAQ,MACpB+I,EAAW,EAAQ,MACnBN,EAAW,EAAQ,MACnB8P,EAAU,EAAQ,MAClB1U,EAAU,EAAQ,MAClBT,EAAS,EAAQ,MACjByI,EAAS,EAAQ,KACjB/C,EAAQ,EAAQ,MAChB7I,EAAQ,EAAQ,MAChBmQ,EAAO,EAAQ,KACftM,EAAO,EAAQ,MACf3F,EAAO,EAAQ,MACfyF,EAAO,EAAQ,MAEnB,SAAS/F,KAAWiQ,GAIlB,OAHuB,IAAnBA,EAAQrhB,QAAgBH,MAAMc,QAAQ0gB,EAAQ,MAChDA,EAAUA,EAAQ,IAEb,IAAItF,EAAUsF,EACvB,CAEAjQ,EAAQC,OAAS,SAAgBrV,EAAM+vB,GACrC,IA2BIjB,EA3BAkB,GAAiB,EACrB,SAASC,KAAWpS,GAEdyJ,SAAWA,QAAQuE,OAASmE,IAC9BA,GAAiB,EAEjB1I,QAAQuE,KACN7rB,uHAIEkwB,QAAQC,IAAIC,MAAQF,QAAQC,IAAIC,KAAKjd,WAAW,OAGlDmU,QAAQuE,KACN7rB,yEAMN,IAAIqwB,EAAcN,KAAelS,GAGjC,OAFAwS,EAAY1a,cAAgB3V,EAC5BqwB,EAAYhJ,gBAAiB,IAAItH,GAAYyH,QACtC6I,CACT,CAcA,OAXAlvB,OAAO0Q,eAAeoe,EAAS,UAAW,CACxCzwB,IAAG,KACIsvB,IAAOA,EAAQmB,KACbnB,KAIXmB,EAAQC,QAAU,SAAU9Z,EAAKka,EAAaC,GAC5C,OAAOnb,EAAQ,CAAC6a,EAAQM,KAAcL,QAAQ9Z,EAAKka,EACrD,EAEOL,CACT,EAEA7a,EAAQmC,UAAYA,EACpBnC,EAAQoC,MAAQA,EAChBpC,EAAQkL,SAAWA,EACnBlL,EAAQuS,KAAOA,EAEfvS,EAAQoO,QAAU5I,GAAY,IAAIQ,EAAQR,GAC1CxF,EAAQob,OAAS5V,GAAY,IAAID,EAAOC,GACxCxF,EAAQyB,KAAO+D,GAAY,IAAIhE,EAAYgE,GAC3CxF,EAAQmO,KAAO3I,GAAY,IAAIS,EAAKT,GACpCxF,EAAQS,KAAO+E,GAAY,IAAIlF,EAAKkF,GACpCxF,EAAQ/U,SAAWua,GAAY,IAAIoF,EAASpF,GAE5CxF,EAAQoJ,eAAiBA,EACzBpJ,EAAQwB,YAAcA,EACtBxB,EAAQsF,UAAYA,EACpBtF,EAAQ2K,UAAYA,EACpB3K,EAAQ4K,SAAWA,EACnB5K,EAAQgG,QAAUA,EAClBhG,EAAQ0a,QAAUA,EAClB1a,EAAQuF,OAASA,EACjBvF,EAAQgO,OAASA,EACjBhO,EAAQiL,MAAQA,EAChBjL,EAAQiG,KAAOA,EACfjG,EAAQM,KAAOA,EACfN,EAAQ+F,KAAOA,EAEf2E,EAAW4H,gBAAgBtS,GAE3BrW,EAAOC,QAAUoW,EACjBA,EAAQlR,QAAUkR,C,8BClGlB,IAAI,kBAAE0L,EAAiB,mBAAEC,GAAuB,EAAQ,OACpD,WAAE0P,EAAU,aAAEC,GAAiB,EAAQ,OACvC,QAAEtI,EAAO,KAAErjB,GAAS,EAAQ,MAWhC,MAAMqb,EACJ,WAAA/W,CAAY+M,EAAKK,GACf,IAAiB,IAAbA,EAAKtX,IAAe,OACxByH,KAAK+pB,eAAeva,GACpBxP,KAAKqe,OAASre,KAAKgqB,UAAUhqB,KAAKiiB,WAAY,SAE9C,IAAIhQ,EAAOpC,EAAKtX,IAAMsX,EAAKtX,IAAI0Z,UAAO7R,EAClCyW,EAAO7W,KAAKiqB,QAAQpa,EAAKkL,KAAM9I,IAC9BjS,KAAKic,SAAWpM,EAAKkL,OACxB/a,KAAKic,QAAUpM,EAAKkL,MAElB/a,KAAKic,UAASjc,KAAKiP,KAAOuS,EAAQxhB,KAAKic,UACvCpF,IAAM7W,KAAK6W,KAAOA,EACxB,CAEA,QAAAmE,GAIE,OAHKhb,KAAKqc,gBACRrc,KAAKqc,cAAgB,IAAInC,EAAkBla,KAAK6W,OAE3C7W,KAAKqc,aACd,CAEA,YAAAkO,CAAa1T,GAMX,GAHiB,0CAGF1J,KAAK0J,IAFV,2BAEuB1J,KAAK0J,GACpC,OAAO2T,mBAAmB3T,EAAKqT,OAAOnnB,OAAO0nB,UAAUrtB,SAGzD,GATqB,iDASF+P,KAAK0J,IARV,kCAQ2B1J,KAAK0J,GAC5C,OA1CciC,EA0CIjC,EAAKqT,OAAOnnB,OAAO0nB,UAAUrtB,QAzC/C0lB,OACKA,OAAO/H,KAAKjC,EAAK,UAAU5a,WAG3B7D,OAAOqwB,KAAK5R,GALvB,IAAoBA,EA6ChB,IAAI6R,EAAW9T,EAAKlK,MAAM,mCAAmC,GAC7D,MAAM,IAAIiK,MAAM,mCAAqC+T,EACvD,CAEA,gBAAAR,CAAiBC,GACf,OAAOA,EAAgB9rB,QAAQ,8BAA+B,IAAIgjB,MACpE,CAEA,KAAAO,CAAMtpB,GACJ,MAAmB,iBAARA,IAEe,iBAAjBA,EAAIwyB,UACc,iBAAlBxyB,EAAIyyB,WACX/tB,MAAMc,QAAQxF,EAAI0yB,UAEtB,CAEA,cAAAlB,CAAeva,GACb,IAAI6a,EAAW7a,EAAI7C,MAAM,gCACzB,IAAK0d,EAAU,OAGf,IAAI3R,EAAQlJ,EAAIwU,YAAYqG,EAASvqB,OACjC6Y,EAAMnJ,EAAI7W,QAAQ,KAAM+f,GAExBA,GAAS,GAAKC,GAAO,IAEvB3Y,KAAKiiB,WAAajiB,KAAKmqB,iBAAiB3a,EAAI8a,UAAU5R,EAAOC,IAEjE,CAEA,QAAAiS,CAASvpB,GAEP,GADArB,KAAKiP,KAAOuS,EAAQngB,GAChBwoB,EAAWxoB,GAEb,OADArB,KAAKic,QAAU5a,EACRyoB,EAAazoB,EAAM,SAASnD,WAAWojB,MAElD,CAEA,OAAA2I,CAAQva,EAAMuC,GACZ,IAAa,IAATA,EAAgB,OAAO,EAE3B,GAAIA,EAAM,CACR,GAAoB,iBAATA,EACT,OAAOA,EACF,GAAoB,mBAATA,EAWX,IAAIA,aAAgBiI,EACzB,OAAOC,EAAmBoJ,cAActR,GAAM/T,WACzC,GAAI+T,aAAgBkI,EACzB,OAAOlI,EAAK/T,WACP,GAAI8B,KAAK6hB,MAAM5P,GACpB,OAAO4Y,KAAKla,UAAUsB,GAEtB,MAAM,IAAI2E,MACR,2CAA6C3E,EAAK/T,WAEtD,CArBuC,CACrC,IAAI4sB,EAAW7Y,EAAKvC,GACpB,GAAIob,EAAU,CACZ,IAAIvyB,EAAMyH,KAAK4qB,SAASE,GACxB,IAAKvyB,EACH,MAAM,IAAIqe,MACR,uCAAyCkU,EAAS5sB,YAGtD,OAAO3F,CACT,CACF,CAWF,KAAO,IAAIyH,KAAKqe,OACd,OAAOre,KAAKuqB,aAAavqB,KAAKiiB,YACzB,GAAIjiB,KAAKiiB,WAAY,CAC1B,IAAI1pB,EAAMyH,KAAKiiB,WAEf,OADIvS,IAAMnX,EAAM4F,EAAKqjB,EAAQ9R,GAAOnX,IAC7ByH,KAAK4qB,SAASryB,EACvB,EACF,CAEA,SAAAyxB,CAAUhJ,EAAQtI,GAChB,QAAKsI,GACEA,EAAOkJ,OAAO,EAAGxR,EAAMtb,UAAYsb,CAC5C,CAEA,WAAA0J,GACE,SACEpiB,KAAKgb,WAAWmH,gBAChBniB,KAAKgb,WAAWmH,eAAe/kB,OAAS,EAE5C,EAGFjF,EAAOC,QAAUohB,EACjBA,EAAYlc,QAAUkc,C,8BC3ItB,IAAI2K,EAAe,EAAQ,MACvBjL,EAAa,EAAQ,KACrBE,EAAW,EAAQ,MACnBtK,EAAO,EAAQ,MAEnB,MAAMqK,EACJ,WAAA1W,CAAYgc,EAAU,IACpBze,KAAK4gB,QAAU,SACf5gB,KAAKye,QAAUze,KAAKuV,UAAUkJ,EAChC,CAEA,SAAAlJ,CAAUkJ,GACR,IAAI0M,EAAa,GACjB,IAAK,IAAIxtB,KAAK8gB,EAOZ,IANkB,IAAd9gB,EAAE6Q,QACJ7Q,EAAIA,IACKA,EAAE6Q,UACX7Q,EAAIA,EAAE6Q,SAGS,iBAAN7Q,GAAkBV,MAAMc,QAAQJ,EAAE8gB,SAC3C0M,EAAaA,EAAWhD,OAAOxqB,EAAE8gB,cAC5B,GAAiB,iBAAN9gB,GAAkBA,EAAEoR,cACpCoc,EAAWpyB,KAAK4E,QACX,GAAiB,mBAANA,EAChBwtB,EAAWpyB,KAAK4E,QACX,GAAiB,iBAANA,IAAmBA,EAAEiT,QAASjT,EAAEgT,UAShD,MAAM,IAAIiG,MAAMjZ,EAAI,4BAGxB,OAAOwtB,CACT,CAEA,OAAA7B,CAAQ9Z,EAAKK,EAAO,CAAC,GACnB,OACG7P,KAAKye,QAAQrhB,QACbyS,EAAKyO,QACLzO,EAAKmQ,aACLnQ,EAAK0O,OAIC,IAAIrF,EAAWlZ,KAAMwP,EAAKK,GAF1B,IAAIsU,EAAankB,KAAMwP,EAAKK,EAIvC,CAEA,GAAAqb,CAAIzc,GAEF,OADAzO,KAAKye,QAAUze,KAAKye,QAAQ0J,OAAOnoB,KAAKuV,UAAU,CAAC9G,KAC5CzO,IACT,EAGF7H,EAAOC,QAAU+gB,EACjBA,EAAU7b,QAAU6b,EAEpBrK,EAAKyK,kBAAkBJ,GACvBC,EAASG,kBAAkBJ,E,6BChE3B,IAAI+P,EAAU,EAAQ,MAEtB,MAAM1M,EACJ,WAAA/Z,CAAYyb,EAAWjP,EAAMY,GAC3B7P,KAAKke,UAAYA,EACjBle,KAAK6e,SAAW,GAChB7e,KAAKiP,KAAOA,EACZjP,KAAK6P,KAAOA,EACZ7P,KAAKwP,SAAMpP,EACXJ,KAAKzH,SAAM6H,CACb,CAEA,QAAAlC,GACE,OAAO8B,KAAKwP,GACd,CAEA,IAAAyV,CAAKpO,EAAMhH,EAAO,CAAC,GACZA,EAAKpB,QACJzO,KAAKqgB,YAAcrgB,KAAKqgB,WAAWtR,gBACrCc,EAAKpB,OAASzO,KAAKqgB,WAAWtR,eAIlC,IAAIqc,EAAU,IAAIlC,EAAQrS,EAAMhH,GAGhC,OAFA7P,KAAK6e,SAAS9lB,KAAKqyB,GAEZA,CACT,CAEA,QAAAtM,GACE,OAAO9e,KAAK6e,SAAS5S,QAAOtO,GAAgB,YAAXA,EAAEsP,MACrC,CAEA,WAAI0R,GACF,OAAO3e,KAAKwP,GACd,EAGFrX,EAAOC,QAAUokB,EACjBA,EAAOlf,QAAUkf,C,8BCvCjB,IAEItD,EAAYC,EAFZrF,EAAY,EAAQ,MAIxB,MAAMhF,UAAagF,EACjB,WAAArR,CAAYuR,GACVC,MAAMD,GACNhU,KAAKiN,KAAO,OACPjN,KAAKsQ,QAAOtQ,KAAKsQ,MAAQ,GAChC,CAEA,SAAAiF,CAAUT,EAAO6B,EAAQ1J,GACvB,IAAIqD,EAAQ2D,MAAMsB,UAAUT,GAE5B,GAAI6B,EACF,GAAa,YAAT1J,EACEjN,KAAKsQ,MAAMlT,OAAS,EACtBuZ,EAAOI,KAAKlE,OAAS7S,KAAKsQ,MAAM,GAAGyG,KAAKlE,cAEjC8D,EAAOI,KAAKlE,YAEhB,GAAI7S,KAAK0V,QAAUiB,EACxB,IAAK,IAAIza,KAAQoU,EACfpU,EAAK6a,KAAKlE,OAAS8D,EAAOI,KAAKlE,OAKrC,OAAOvC,CACT,CAEA,WAAApM,CAAY4Q,EAAOuW,GACjB,IAAIpyB,EAAQ+G,KAAK/G,MAAM6b,GAMvB,OAJKuW,GAAoB,IAAVpyB,GAAe+G,KAAKsQ,MAAMlT,OAAS,IAChD4C,KAAKsQ,MAAM,GAAGyG,KAAKlE,OAAS7S,KAAKsQ,MAAMrX,GAAO8d,KAAKlE,QAG9CoB,MAAM/P,YAAY4Q,EAC3B,CAEA,QAAAuE,CAASxJ,EAAO,CAAC,GAEf,OADW,IAAIqJ,EAAW,IAAIC,EAAanZ,KAAM6P,GACrCc,WACd,EAGF7B,EAAKwK,mBAAqBhC,IACxB4B,EAAa5B,GAGfxI,EAAKyK,kBAAoBjC,IACvB6B,EAAY7B,GAGdnf,EAAOC,QAAU0W,EACjBA,EAAKxR,QAAUwR,EAEfgF,EAAU0D,aAAa1I,E,8BC1DvB,IAAIgF,EAAY,EAAQ,MACpBiN,EAAO,EAAQ,KAEnB,MAAMtM,UAAaX,EACjB,WAAArR,CAAYuR,GACVC,MAAMD,GACNhU,KAAKiN,KAAO,OACPjN,KAAKsQ,QAAOtQ,KAAKsQ,MAAQ,GAChC,CAEA,aAAIgb,GACF,OAAOvK,EAAKvP,MAAMxR,KAAKgM,SACzB,CAEA,aAAIsf,CAAUhzB,GACZ,IAAIqU,EAAQ3M,KAAKgM,SAAWhM,KAAKgM,SAASW,MAAM,QAAU,KACtD+U,EAAM/U,EAAQA,EAAM,GAAK,IAAM3M,KAAKylB,IAAI,UAAW,cACvDzlB,KAAKgM,SAAW1T,EAAO6F,KAAKujB,EAC9B,EAGFvpB,EAAOC,QAAUqc,EACjBA,EAAKnX,QAAUmX,EAEfX,EAAUyD,aAAa9C,E,wBCxBvB,MAAM8W,EAAc,CAClBzY,MAAO,KACP8Y,YAAa,KACbC,cAAe,KACfJ,WAAY,KACZE,WAAY,IACZD,WAAY,KACZja,MAAO,KACPsa,YAAa,IACbC,aAAc,IACdF,UAAW,GACXN,OAAQ,OACRtH,WAAW,GAOb,MAAMS,EACJ,WAAAliB,CAAYwpB,GACVjsB,KAAKisB,QAAUA,CACjB,CAEA,MAAAvP,CAAOxgB,EAAMgoB,GACX,IAAI9qB,EAAO,IAAM8C,EAAK9C,KAClBmvB,EAASrsB,EAAKqsB,OAASvoB,KAAKksB,SAAShwB,EAAM,UAAY,GAQ3D,QANmC,IAAxBA,EAAK6a,KAAKyR,UACnBpvB,GAAQ8C,EAAK6a,KAAKyR,UACTD,IACTnvB,GAAQ,KAGN8C,EAAKoU,MACPtQ,KAAKmsB,MAAMjwB,EAAM9C,EAAOmvB,OACnB,CACL,IAAI5P,GAAOzc,EAAK6a,KAAK4O,SAAW,KAAOzB,EAAY,IAAM,IACzDlkB,KAAKisB,QAAQ7yB,EAAOmvB,EAAS5P,EAAKzc,EACpC,CACF,CAEA,WAAAqwB,CAAYrwB,EAAMmwB,GAChB,IAAIvzB,EAEFA,EADgB,SAAdoD,EAAK+Q,KACCjN,KAAKylB,IAAIvpB,EAAM,KAAM,cACN,YAAdA,EAAK+Q,KACNjN,KAAKylB,IAAIvpB,EAAM,KAAM,iBACT,WAAXmwB,EACDrsB,KAAKylB,IAAIvpB,EAAM,KAAM,cAErB8D,KAAKylB,IAAIvpB,EAAM,KAAM,eAG/B,IAAIkX,EAAMlX,EAAK6Q,OACXogB,EAAQ,EACZ,KAAO/Z,GAAoB,SAAbA,EAAInG,MAChBkgB,GAAS,EACT/Z,EAAMA,EAAIrG,OAGZ,GAAIjU,EAAMyd,SAAS,MAAO,CACxB,IAAIiV,EAASxrB,KAAKylB,IAAIvpB,EAAM,KAAM,UAClC,GAAIsvB,EAAOpuB,OACT,IAAK,IAAIgwB,EAAO,EAAGA,EAAOD,EAAOC,IAAQt0B,GAAS0yB,CAEtD,CAEA,OAAO1yB,CACT,CAEA,KAAAqzB,CAAMjwB,EAAMwc,GACV,IAGI5F,EAHA6S,EAAU3lB,KAAKylB,IAAIvpB,EAAM,UAAW,cACxC8D,KAAKisB,QAAQvT,EAAQiN,EAAU,IAAKzpB,EAAM,SAGtCA,EAAKoU,OAASpU,EAAKoU,MAAMlT,QAC3B4C,KAAKgE,KAAK9H,GACV4W,EAAQ9S,KAAKylB,IAAIvpB,EAAM,UAEvB4W,EAAQ9S,KAAKylB,IAAIvpB,EAAM,QAAS,aAG9B4W,GAAO9S,KAAKisB,QAAQnZ,GACxB9S,KAAKisB,QAAQ,IAAK/vB,EAAM,MAC1B,CAEA,IAAA8H,CAAK9H,GACH,IAAIuF,EAAOvF,EAAKoU,MAAMlT,OAAS,EAC/B,KAAOqE,EAAO,GACkB,YAA1BvF,EAAKoU,MAAM7O,GAAMwL,MACrBxL,GAAQ,EAGV,IAAIyiB,EAAYlkB,KAAKylB,IAAIvpB,EAAM,aAC/B,IAAK,IAAIyB,EAAI,EAAGA,EAAIzB,EAAKoU,MAAMlT,OAAQO,IAAK,CAC1C,IAAImX,EAAQ5Y,EAAKoU,MAAM3S,GACnBkV,EAAS7S,KAAKylB,IAAI3Q,EAAO,UACzBjC,GAAQ7S,KAAKisB,QAAQpZ,GACzB7S,KAAK2Q,UAAUmE,EAAOrT,IAAS9D,GAAKumB,EACtC,CACF,CAEA,OAAAtH,CAAQ1gB,GACN,IAAIyF,EAAO3B,KAAKylB,IAAIvpB,EAAM,OAAQ,eAC9B0F,EAAQ5B,KAAKylB,IAAIvpB,EAAM,QAAS,gBACpC8D,KAAKisB,QAAQ,KAAOtqB,EAAOzF,EAAK2a,KAAOjV,EAAQ,KAAM1F,EACvD,CAEA,IAAA+T,CAAK/T,EAAMgoB,GACT,IAAIyB,EAAU3lB,KAAKylB,IAAIvpB,EAAM,UAAW,SACpC8kB,EAAS9kB,EAAKkC,KAAOunB,EAAU3lB,KAAKksB,SAAShwB,EAAM,SAEnDA,EAAK6rB,YACP/G,GAAU9kB,EAAK6a,KAAKgR,WAAa,eAG/B7D,IAAWlD,GAAU,KACzBhhB,KAAKisB,QAAQjL,EAAQ9kB,EACvB,CAEA,QAAAzC,CAASyC,GACP8D,KAAKgE,KAAK9H,EACZ,CAEA,GAAAupB,CAAIvpB,EAAMkwB,EAAKC,GACb,IAAIvzB,EAIJ,GAHKuzB,IAAQA,EAASD,GAGlBA,IACFtzB,EAAQoD,EAAK6a,KAAKqV,QACG,IAAVtzB,GAAuB,OAAOA,EAG3C,IAAIiU,EAAS7Q,EAAK6Q,OAElB,GAAe,WAAXsf,EAAqB,CAEvB,IAAKtf,GAA2B,SAAhBA,EAAOE,MAAmBF,EAAO2I,QAAUxZ,EACzD,MAAO,GAIT,GAAI6Q,GAA0B,aAAhBA,EAAOE,KACnB,MAAO,EAEX,CAGA,IAAKF,EAAQ,OAAOwe,EAAYc,GAGhC,IAAIpd,EAAO/S,EAAK+S,OAEhB,GADKA,EAAKqd,WAAUrd,EAAKqd,SAAW,CAAC,QACA,IAA1Brd,EAAKqd,SAASD,GACvB,OAAOpd,EAAKqd,SAASD,GAGvB,GAAe,WAAXA,GAAkC,UAAXA,EACzB,OAAOrsB,KAAKusB,YAAYrwB,EAAMmwB,GACzB,CACL,IAAIG,EAAS,QAnJC1T,EAmJkBuT,GAlJzB,GAAG5tB,cAAgBqa,EAAIvZ,MAAM,IAmJhCS,KAAKwsB,GACP1zB,EAAQkH,KAAKwsB,GAAQvd,EAAM/S,GAE3B+S,EAAKmB,MAAKzS,IAER,GADA7E,EAAQ6E,EAAEoZ,KAAKqV,QACM,IAAVtzB,EAAuB,OAAO,IAG/C,CA5JJ,IAAoBggB,EAiKhB,YAHqB,IAAVhgB,IAAuBA,EAAQyyB,EAAYc,IAEtDpd,EAAKqd,SAASD,GAAUvzB,EACjBA,CACT,CAEA,cAAAk0B,CAAe/d,GACb,IAAInW,EAaJ,OAZAmW,EAAKmB,MAAKzS,IACR,GAAIA,EAAE2S,OAAS3S,EAAE2S,MAAMlT,OAAS,QACF,IAAjBO,EAAEoZ,KAAKjE,MAKhB,OAJAha,EAAQ6E,EAAEoZ,KAAKjE,MACXha,EAAMyd,SAAS,QACjBzd,EAAQA,EAAMwF,QAAQ,UAAW,MAE5B,CAEX,IAEExF,IAAOA,EAAQA,EAAMwF,QAAQ,MAAO,KACjCxF,CACT,CAEA,gBAAA+zB,CAAiB5d,EAAM/S,GACrB,IAAIpD,EAeJ,OAdAmW,EAAKqG,cAAa3X,IAChB,QAA6B,IAAlBA,EAAEoZ,KAAKlE,OAKhB,OAJA/Z,EAAQ6E,EAAEoZ,KAAKlE,OACX/Z,EAAMyd,SAAS,QACjBzd,EAAQA,EAAMwF,QAAQ,UAAW,MAE5B,CACT,SAEmB,IAAVxF,EACTA,EAAQkH,KAAKylB,IAAIvpB,EAAM,KAAM,cACpBpD,IACTA,EAAQA,EAAMwF,QAAQ,MAAO,KAExBxF,CACT,CAEA,aAAAg0B,CAAc7d,EAAM/S,GAClB,IAAIpD,EAeJ,OAdAmW,EAAKmG,WAAUzX,IACb,QAA6B,IAAlBA,EAAEoZ,KAAKlE,OAKhB,OAJA/Z,EAAQ6E,EAAEoZ,KAAKlE,OACX/Z,EAAMyd,SAAS,QACjBzd,EAAQA,EAAMwF,QAAQ,UAAW,MAE5B,CACT,SAEmB,IAAVxF,EACTA,EAAQkH,KAAKylB,IAAIvpB,EAAM,KAAM,cACpBpD,IACTA,EAAQA,EAAMwF,QAAQ,MAAO,KAExBxF,CACT,CAEA,aAAAm0B,CAAche,GACZ,IAAInW,EAOJ,OANAmW,EAAKmB,MAAKzS,IACR,GAAe,SAAXA,EAAEsP,OACJnU,EAAQ6E,EAAEoZ,KAAK4O,aACM,IAAV7sB,GAAuB,OAAO,CAC3C,IAEKA,CACT,CAEA,aAAAi0B,CAAc9d,GACZ,IAAInW,EAaJ,OAZAmW,EAAKmB,MAAKzS,IACR,GAAIA,EAAE2S,QAAU3S,EAAEoP,SAAWkC,GAAQA,EAAKyG,QAAU/X,SACrB,IAAlBA,EAAEoZ,KAAKlE,OAKhB,OAJA/Z,EAAQ6E,EAAEoZ,KAAKlE,OACX/Z,EAAMyd,SAAS,QACjBzd,EAAQA,EAAMwF,QAAQ,UAAW,MAE5B,CAEX,IAEExF,IAAOA,EAAQA,EAAMwF,QAAQ,MAAO,KACjCxF,CACT,CAEA,QAAAo0B,CAASje,GACP,IAAInW,EAOJ,OANAmW,EAAKmG,WAAUzX,IACb,QAA8B,IAAnBA,EAAEoZ,KAAK4O,QAEhB,OADA7sB,EAAQ6E,EAAEoZ,KAAK4O,QAAQrnB,QAAQ,UAAW,KACnC,CACT,IAEKxF,CACT,CAEA,YAAA4zB,CAAazd,GACX,IAAInW,EAOJ,OANAmW,EAAKmB,MAAKzS,IACR,GAAIA,EAAE2S,OAA4B,IAAnB3S,EAAE2S,MAAMlT,SACrBtE,EAAQ6E,EAAEoZ,KAAKjE,WACM,IAAVha,GAAuB,OAAO,CAC3C,IAEKA,CACT,CAEA,SAAA6zB,CAAU1d,GACR,GAAIA,EAAK8H,KAAKyU,OAAQ,OAAOvc,EAAK8H,KAAKyU,OACvC,IAAI1yB,EAYJ,OAXAmW,EAAKmB,MAAKzS,IACR,IAAIsmB,EAAItmB,EAAEoP,OACV,GAAIkX,GAAKA,IAAMhV,GAAQgV,EAAElX,QAAUkX,EAAElX,SAAWkC,QACjB,IAAlBtR,EAAEoZ,KAAKlE,OAAwB,CACxC,IAAI+Z,EAAQjvB,EAAEoZ,KAAKlE,OAAO5Q,MAAM,MAGhC,OAFAnJ,EAAQ8zB,EAAMA,EAAMxvB,OAAS,GAC7BtE,EAAQA,EAAMwF,QAAQ,MAAO,KACtB,CACT,CACF,IAEKxF,CACT,CAEA,YAAA2zB,CAAaxd,GACX,IAAInW,EAOJ,OANAmW,EAAKmB,MAAKzS,IACR,GAAIA,EAAE2S,OAAS3S,EAAE2S,MAAMlT,QAA0B,SAAhBO,EAAE8D,KAAKwL,OACtCnU,EAAQ6E,EAAEoZ,KAAKmN,eACM,IAAVprB,GAAuB,OAAO,CAC3C,IAEKA,CACT,CAEA,QAAAozB,CAAShwB,EAAMkC,GACb,IAAItF,EAAQoD,EAAKkC,GACbqnB,EAAMvpB,EAAK6a,KAAK3Y,GACpB,OAAIqnB,GAAOA,EAAI3sB,QAAUA,EAChB2sB,EAAIA,IAGN3sB,CACT,CAEA,IAAAmW,CAAK/S,GACH8D,KAAKgE,KAAK9H,GACNA,EAAK6a,KAAKjE,OAAO9S,KAAKisB,QAAQ/vB,EAAK6a,KAAKjE,MAC9C,CAEA,IAAA6J,CAAKzgB,GACH8D,KAAKmsB,MAAMjwB,EAAM8D,KAAKksB,SAAShwB,EAAM,aACjCA,EAAK6a,KAAK6R,cACZ5oB,KAAKisB,QAAQ/vB,EAAK6a,KAAK6R,aAAc1sB,EAAM,MAE/C,CAEA,SAAAyU,CAAUzU,EAAMgoB,GAEd,IAAKlkB,KAAK9D,EAAK+Q,MACb,MAAM,IAAI2J,MACR,yBACE1a,EAAK+Q,KADP,mDAOJjN,KAAK9D,EAAK+Q,MAAM/Q,EAAMgoB,EACxB,EAGF/rB,EAAOC,QAAUusB,EACjBA,EAAYrnB,QAAUqnB,C,8BC9VtB,IAAIA,EAAc,EAAQ,MAE1B,SAAShU,EAAUzU,EAAM+vB,GACb,IAAItH,EAAYsH,GACtBtb,UAAUzU,EAChB,CAEA/D,EAAOC,QAAUuY,EACjBA,EAAUrT,QAAUqT,C,wBCRpBxY,EAAOC,QAAQsc,QAAUgG,OAAO,WAEhCviB,EAAOC,QAAQuc,GAAK+F,OAAO,K,wBCF3B,MAAM2S,EAAe,IAAInc,WAAW,GAC9Boc,EAAe,IAAIpc,WAAW,GAC9Bqc,EAAY,KAAKrc,WAAW,GAC5Bsc,EAAQ,IAAItc,WAAW,GACvBuc,EAAU,KAAKvc,WAAW,GAC1Bwc,EAAQ,IAAIxc,WAAW,GACvByc,EAAO,KAAKzc,WAAW,GACvB0c,EAAM,KAAK1c,WAAW,GACtB2c,EAAK,KAAK3c,WAAW,GACrB4c,EAAc,IAAI5c,WAAW,GAC7B6c,EAAe,IAAI7c,WAAW,GAC9B8c,EAAmB,IAAI9c,WAAW,GAClC+c,EAAoB,IAAI/c,WAAW,GACnCgd,EAAa,IAAIhd,WAAW,GAC5Bid,EAAc,IAAIjd,WAAW,GAC7Bkd,EAAY,IAAIld,WAAW,GAC3Bmd,EAAW,IAAInd,WAAW,GAC1Bod,EAAQ,IAAIpd,WAAW,GACvBqd,EAAK,IAAIrd,WAAW,GAEpBsd,EAAY,6BACZC,EAAc,wCACdC,EAAiB,gBACjBC,EAAgB,WAEtBx2B,EAAOC,QAAU,SAAmBqX,EAAOzS,EAAU,CAAC,GACpD,IAGIyV,EAAMV,EAAMC,EAAO2M,EAASxM,EAC5Byc,EAASxc,EAAWH,EAAM4H,EAAGgV,EAJ7Brf,EAAMC,EAAMD,IAAItM,UAChBmoB,EAASruB,EAAQ8xB,aAKjB1xB,EAASoS,EAAIpS,OACboV,EAAM,EACNuc,EAAS,GACTC,EAAW,GAMf,SAAS/b,EAASgc,GAChB,MAAMxf,EAAMiM,MAAM,YAAcuT,EAAMzc,EACxC,CAsNA,MAAO,CACL+U,KALF,SAAcrV,GACZ8c,EAASj2B,KAAKmZ,EAChB,EAIE4U,UAtNF,WACE,OAA2B,IAApBkI,EAAS5xB,QAAgBoV,GAAOpV,CACzC,EAqNE2pB,UAnNF,SAAmBlX,GACjB,GAAImf,EAAS5xB,OAAQ,OAAO4xB,EAASlvB,MACrC,GAAI0S,GAAOpV,EAAQ,OAEnB,IAAI8xB,IAAiBrf,GAAOA,EAAKqf,eAIjC,OAFAzc,EAAOjD,EAAI0B,WAAWsB,GAEdC,GACN,KAAKgb,EACL,KAAKC,EACL,KAAKE,EACL,KAAKC,EACL,KAAKF,EACH5b,EAAOS,EACP,GACET,GAAQ,EACRU,EAAOjD,EAAI0B,WAAWa,SAEtBU,IAASib,GACTjb,IAASgb,GACThb,IAASmb,GACTnb,IAASob,GACTpb,IAASkb,GAGXkB,EAAe,CAAC,QAASrf,EAAIjQ,MAAMiT,EAAKT,IACxCS,EAAMT,EAAO,EACb,MAGF,KAAK+b,EACL,KAAKC,EACL,KAAKG,EACL,KAAKC,EACL,KAAKG,EACL,KAAKF,EACL,KAAKH,EAAmB,CACtB,IAAIkB,EAAc/lB,OAAOgmB,aAAa3c,GACtCoc,EAAe,CAACM,EAAaA,EAAa3c,GAC1C,KACF,CAEA,KAAKwb,EAGH,GAFA/b,EAAO8c,EAAO3xB,OAAS2xB,EAAOjvB,MAAM,GAAK,GACzC+Z,EAAIrK,EAAI0B,WAAWsB,EAAM,GAEd,QAATP,GACA4H,IAAMwT,GACNxT,IAAMyT,GACNzT,IAAM6T,GACN7T,IAAM4T,GACN5T,IAAM+T,GACN/T,IAAM8T,GACN9T,IAAMgU,EACN,CACA9b,EAAOS,EACP,EAAG,CAGD,GAFAoc,GAAU,EACV7c,EAAOvC,EAAI7W,QAAQ,IAAKoZ,EAAO,IACjB,IAAVA,EAAa,CACf,GAAIsZ,GAAU6D,EAAgB,CAC5Bnd,EAAOS,EACP,KACF,CACES,EAAS,UAEb,CAEA,IADAb,EAAYL,EACLvC,EAAI0B,WAAWkB,EAAY,KAAOmb,GACvCnb,GAAa,EACbwc,GAAWA,CAEf,OAASA,GAETC,EAAe,CAAC,WAAYrf,EAAIjQ,MAAMiT,EAAKT,EAAO,GAAIS,EAAKT,GAE3DS,EAAMT,CACR,MACEA,EAAOvC,EAAI7W,QAAQ,IAAK6Z,EAAM,GAC9BmM,EAAUnP,EAAIjQ,MAAMiT,EAAKT,EAAO,IAElB,IAAVA,GAAe2c,EAAevhB,KAAKwR,GACrCkQ,EAAe,CAAC,IAAK,IAAKrc,IAE1Bqc,EAAe,CAAC,WAAYlQ,EAASnM,EAAKT,GAC1CS,EAAMT,GAIV,MAGF,KAAKsb,EACL,KAAKC,EACHtb,EAAQS,IAAS4a,EAAe,IAAM,IACtCtb,EAAOS,EACP,EAAG,CAGD,GAFAoc,GAAU,EACV7c,EAAOvC,EAAI7W,QAAQqZ,EAAOD,EAAO,IACnB,IAAVA,EAAa,CACf,GAAIsZ,GAAU6D,EAAgB,CAC5Bnd,EAAOS,EAAM,EACb,KACF,CACES,EAAS,SAEb,CAEA,IADAb,EAAYL,EACLvC,EAAI0B,WAAWkB,EAAY,KAAOmb,GACvCnb,GAAa,EACbwc,GAAWA,CAEf,OAASA,GAETC,EAAe,CAAC,SAAUrf,EAAIjQ,MAAMiT,EAAKT,EAAO,GAAIS,EAAKT,GACzDS,EAAMT,EACN,MAGF,KAAKwc,EACHC,EAAUa,UAAY7c,EAAM,EAC5Bgc,EAAUrhB,KAAKqC,GAEbuC,EAD0B,IAAxByc,EAAUa,UACL7f,EAAIpS,OAAS,EAEboxB,EAAUa,UAAY,EAG/BR,EAAe,CAAC,UAAWrf,EAAIjQ,MAAMiT,EAAKT,EAAO,GAAIS,EAAKT,GAE1DS,EAAMT,EACN,MAGF,KAAKwb,EAGH,IAFAxb,EAAOS,EACPL,GAAS,EACF3C,EAAI0B,WAAWa,EAAO,KAAOwb,GAClCxb,GAAQ,EACRI,GAAUA,EAGZ,GADAM,EAAOjD,EAAI0B,WAAWa,EAAO,GAE3BI,GACAM,IAAS+a,GACT/a,IAASib,GACTjb,IAASgb,GACThb,IAASmb,GACTnb,IAASob,GACTpb,IAASkb,IAET5b,GAAQ,EACJ4c,EAAcxhB,KAAKqC,EAAI8f,OAAOvd,KAAQ,CACxC,KAAO4c,EAAcxhB,KAAKqC,EAAI8f,OAAOvd,EAAO,KAC1CA,GAAQ,EAENvC,EAAI0B,WAAWa,EAAO,KAAO2b,IAC/B3b,GAAQ,EAEZ,CAGF8c,EAAe,CAAC,OAAQrf,EAAIjQ,MAAMiT,EAAKT,EAAO,GAAIS,EAAKT,GAEvDS,EAAMT,EACN,MAGF,QACMU,IAAS+a,GAAShe,EAAI0B,WAAWsB,EAAM,KAAO6b,GAChDtc,EAAOvC,EAAI7W,QAAQ,KAAM6Z,EAAM,GAAK,EACvB,IAATT,IACEsZ,GAAU6D,EACZnd,EAAOvC,EAAIpS,OAEX6V,EAAS,YAIb4b,EAAe,CAAC,UAAWrf,EAAIjQ,MAAMiT,EAAKT,EAAO,GAAIS,EAAKT,GAC1DS,EAAMT,IAEN0c,EAAYY,UAAY7c,EAAM,EAC9Bic,EAAYthB,KAAKqC,GAEfuC,EAD4B,IAA1B0c,EAAYY,UACP7f,EAAIpS,OAAS,EAEbqxB,EAAYY,UAAY,EAGjCR,EAAe,CAAC,OAAQrf,EAAIjQ,MAAMiT,EAAKT,EAAO,GAAIS,EAAKT,GACvDgd,EAAOh2B,KAAK81B,GACZrc,EAAMT,GAQZ,OADAS,IACOqc,CACT,EAUEU,SAhOF,WACE,OAAO/c,CACT,EAgOF,C,wBCtQA,IAAIgd,EAAU,CAAC,EAEfr3B,EAAOC,QAAU,SAAkByf,GAC7B2X,EAAQ3X,KACZ2X,EAAQ3X,IAAW,EAEI,oBAAZ6I,SAA2BA,QAAQuE,MAC5CvE,QAAQuE,KAAKpN,GAEjB,C,wBCVA,MAAMqR,EACJ,WAAAzmB,CAAYoU,EAAMhH,EAAO,CAAC,GAIxB,GAHA7P,KAAKiN,KAAO,UACZjN,KAAK6W,KAAOA,EAERhH,EAAK3T,MAAQ2T,EAAK3T,KAAK8G,OAAQ,CACjC,IAAIysB,EAAQ5f,EAAK3T,KAAK8oB,QAAQnV,GAC9B7P,KAAK8X,KAAO2X,EAAM/W,MAAMZ,KACxB9X,KAAK+X,OAAS0X,EAAM/W,MAAMX,OAC1B/X,KAAKiY,QAAUwX,EAAM9W,IAAIb,KACzB9X,KAAKkY,UAAYuX,EAAM9W,IAAIZ,MAC7B,CAEA,IAAK,IAAI2X,KAAO7f,EAAM7P,KAAK0vB,GAAO7f,EAAK6f,EACzC,CAEA,QAAAxxB,GACE,OAAI8B,KAAK9D,KACA8D,KAAK9D,KAAKwf,MAAM1b,KAAK6W,KAAM,CAChC5d,MAAO+G,KAAK/G,MACZwV,OAAQzO,KAAKyO,OACblQ,KAAMyB,KAAKzB,OACVsZ,QAGD7X,KAAKyO,OACAzO,KAAKyO,OAAS,KAAOzO,KAAK6W,KAG5B7W,KAAK6W,IACd,EAGF1e,EAAOC,QAAU8wB,EACjBA,EAAQ5rB,QAAU4rB,C,wBCpClB/wB,EAAOC,QAAUiC,OAAc,K,iICoB/BlC,EAAOC,QAAU,CAAEoiB,OARN,CAAC9X,EAAO,MACnB,IAAIkT,EAAK,GACLjY,EAAI+E,EACR,KAAO/E,KACLiY,GAfF,mEAeqC,GAAhBrZ,KAAKq4B,SAAiB,GAE3C,OAAOhf,GAEkBif,eAlBN,CAACC,EAAUC,EAAc,KACrC,CAACryB,EAAOqyB,KACb,IAAInf,EAAK,GACLjY,EAAI+E,EACR,KAAO/E,KACLiY,GAAMkf,EAAUv4B,KAAKq4B,SAAWE,EAAS13B,OAAU,GAErD,OAAOwY,G,GCRPof,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqB90B,IAAjB+0B,EACH,OAAOA,EAAa/8B,QAGrB,IAAID,EAAS68B,EAAyBE,GAAY,CAGjD98B,QAAS,CAAC,GAOX,OAHAg9B,EAAoBF,GAAU/3B,KAAKhF,EAAOC,QAASD,EAAQA,EAAOC,QAAS68B,GAGpE98B,EAAOC,OACf,CCrBA68B,EAAoBpb,EAAK1hB,IACxB,IAAIk9B,EAASl9B,GAAUA,EAAOiT,WAC7B,IAAOjT,EAAiB,QACxB,IAAM,EAEP,OADA88B,EAAoBxD,EAAE4D,EAAQ,CAAE9yB,EAAG8yB,IAC5BA,CAAM,ECLdJ,EAAoBxD,EAAI,CAACr5B,EAASk9B,KACjC,IAAI,IAAI58B,KAAO48B,EACXL,EAAoBxnB,EAAE6nB,EAAY58B,KAASu8B,EAAoBxnB,EAAErV,EAASM,IAC5E6B,OAAO0Q,eAAe7S,EAASM,EAAK,CAAEuV,YAAY,EAAMrV,IAAK08B,EAAW58B,IAE1E,ECNDu8B,EAAoBxnB,EAAI,CAACgQ,EAAKrf,IAAU7D,OAAO2C,UAAUM,eAAeL,KAAKsgB,EAAKrf,GCClF62B,EAAoBM,EAAKn9B,IACH,oBAAXsiB,QAA0BA,OAAOgE,aAC1CnkB,OAAO0Q,eAAe7S,EAASsiB,OAAOgE,YAAa,CAAE5lB,MAAO,WAE7DyB,OAAO0Q,eAAe7S,EAAS,aAAc,CAAEU,OAAO,GAAO,E,kyXCL9D,MAAM,EAA+BuB,OAAW,GAAU,OCApD,EAA+BA,OAAW,GAAW,QCArD,EAA+BA,OAAW,GAAQ,KCAlD,EAA+BA,OAAW,GAAW,QCArD,EAA+BA,OAAW,GAAS,MCK5Cm7B,EAAwB9a,OAAQ,sBAChC+a,EAA8B/a,OAAQ,4BACtCgb,EAAsBhb,OAAQ,oBAC9Bib,EAAmBjb,OAAQ,iBAE3Bkb,EAA6B,CACzCx8B,KAAM,GACNy8B,YAAY,GAGPC,GAAUC,EAAAA,EAAAA,eAAeH,IACzB,SAAEI,GAAaF,EASd,SAASG,IACf,OAAOC,EAAAA,EAAAA,YAAYJ,EACpB,CC3BA,MAAM,EAA+Bz7B,OAAW,GAAc,W,gCCA9D,MAAM,EAA+BA,OAAW,GAAQ,KCK3C87B,EAAuB,CACnCC,YAAa,CAAC,GA+BFC,EAAoB,CAChCC,WAAW,EACXC,gBAAgB,EAIhBC,OAAQ,CACP,CACCp9B,MAAMs4B,EAAAA,EAAAA,IAAI,SACV+E,KAAM,QACNne,MAAO,WAER,CACClf,MAAMs4B,EAAAA,EAAAA,IAAI,oBACV+E,KAAM,mBACNne,MAAO,WAER,CACClf,MAAMs4B,EAAAA,EAAAA,IAAI,SACV+E,KAAM,QACNne,MAAO,WAER,CACClf,MAAMs4B,EAAAA,EAAAA,IAAI,aACV+E,KAAM,YACNne,MAAO,WAER,CAAElf,MAAMs4B,EAAAA,EAAAA,IAAI,aAAe+E,KAAM,YAAane,MAAO,WACrD,CACClf,MAAMs4B,EAAAA,EAAAA,IAAI,yBACV+E,KAAM,wBACNne,MAAO,WAER,CACClf,MAAMs4B,EAAAA,EAAAA,IAAI,wBACV+E,KAAM,uBACNne,MAAO,WAER,CACClf,MAAMs4B,EAAAA,EAAAA,IAAI,oBACV+E,KAAM,mBACNne,MAAO,WAER,CACClf,MAAMs4B,EAAAA,EAAAA,IAAI,oBACV+E,KAAM,mBACNne,MAAO,WAER,CACClf,MAAMs4B,EAAAA,EAAAA,IAAI,kBACV+E,KAAM,iBACNne,MAAO,WAER,CACClf,MAAMs4B,EAAAA,EAAAA,IAAI,mBACV+E,KAAM,kBACNne,MAAO,WAER,CACClf,MAAMs4B,EAAAA,EAAAA,IAAI,gBACV+E,KAAM,eACNne,MAAO,YAKToe,UAAW,CACV,CACCt9B,MAAMu9B,EAAAA,EAAAA,IAAI,QAAS,kBACnBj0B,KAAM,GACN+zB,KAAM,SAEP,CACCr9B,MAAMu9B,EAAAA,EAAAA,IAAI,SAAU,kBACpBj0B,KAAM,GACN+zB,KAAM,UAEP,CACCr9B,MAAMu9B,EAAAA,EAAAA,IAAI,SAAU,kBACpBj0B,KAAM,GACN+zB,KAAM,UAEP,CACCr9B,MAAMu9B,EAAAA,EAAAA,IAAI,QAAS,kBACnBj0B,KAAM,GACN+zB,KAAM,SAEP,CACCr9B,MAAMu9B,EAAAA,EAAAA,IAAI,OAAQ,kBAClBj0B,KAAM,GACN+zB,KAAM,SAKRG,iBAAkB,QAElBC,WAAY,CACX,CAAEJ,KAAM,YAAar9B,MAAMs4B,EAAAA,EAAAA,IAAI,cAC/B,CAAE+E,KAAM,SAAUr9B,MAAMs4B,EAAAA,EAAAA,IAAI,WAC5B,CAAE+E,KAAM,QAASr9B,MAAMs4B,EAAAA,EAAAA,IAAI,UAC3B,CAAE+E,KAAM,OAAQr9B,MAAMs4B,EAAAA,EAAAA,IAAI,eAI3BoF,cAAc,EAIdje,SAAU,IAGVke,mBAAmB,EAGnBC,kBAAmB,EAGnBC,iBAAkB,KAGlBC,eAAe,EAGfC,8BAA8B,EAE9BC,qBAAqB,EAErBC,wCAAwC,EACxCC,8BAA8B,EAC9BC,6BAA6B,EAC7BC,4BAA6B,GAC7BC,qCAAsC,GACtCC,kCAAkC,EAClCC,yBAAyB,EAQzBC,wBAAyB,CACxBC,gBAAiB,kBACjB,kBAAmB,CAAEC,eAAgB,eACrC,0BAA2B,CAAEA,eAAgB,eAC7C,uBAAwB,CAAEA,eAAgB,eAC1C,cAAe,CAAEA,eAAgB,eACjC,oBAAqB,CAAEA,eAAgB,eACvC,iBAAkB,CAAEA,eAAgB,eACpC,cAAe,CAAEA,eAAgB,eACjC,iBAAkB,CAAEA,eAAgB,eACpC,kBAAmB,CAAEA,eAAgB,eACrC,iBAAkB,CAAEA,eAAgB,gBAGrCC,iBAAiB,EAGjBC,UAAW,CACV,CACC5+B,MAAMs4B,EAAAA,EAAAA,IAAI,mCACVuG,SACC,oEACDxB,KAAM,mCAEP,CACCr9B,MAAMs4B,EAAAA,EAAAA,IAAI,wCACVuG,SACC,kEACDxB,KAAM,wCAEP,CACCr9B,MAAMs4B,EAAAA,EAAAA,IAAI,iDACVuG,SACC,sEACDxB,KAAM,iDAEP,CACCr9B,MAAMs4B,EAAAA,EAAAA,IAAI,sCACVuG,SACC,mEACDxB,KAAM,sCAEP,CACCr9B,MAAMs4B,EAAAA,EAAAA,IAAI,uCACVuG,SACC,oEACDxB,KAAM,uCAEP,CACCr9B,MAAMs4B,EAAAA,EAAAA,IAAI,yBACVuG,SACC,mJACDxB,KAAM,yBAEP,CACCr9B,MAAMs4B,EAAAA,EAAAA,IAAI,sBACVuG,SACC,oEACDxB,KAAM,sBAEP,CACCr9B,MAAMs4B,EAAAA,EAAAA,IAAI,kBACVuG,SACC,oFACDxB,KAAM,kBAEP,CACCr9B,MAAMs4B,EAAAA,EAAAA,IAAI,iBACVuG,SACC,sFACDxB,KAAM,iBAEP,CACCr9B,MAAMs4B,EAAAA,EAAAA,IAAI,cACVuG,SACC,wFACDxB,KAAM,cAEP,CACCr9B,MAAMs4B,EAAAA,EAAAA,IAAI,kBACVuG,SACC,oEACDxB,KAAM,kBAEP,CACCr9B,MAAMs4B,EAAAA,EAAAA,IAAI,YACVuG,SACC,+DACDxB,KAAM,aAIRyB,yBAA0B,CAAEC,OAAQ,GAAIC,QAAS,KCtQ3C,SAASC,EAAUr2B,EAAOs2B,EAAUr/B,GAC1C,MAAO,IACH+I,EAAMzC,MAAO,EAAGtG,MACdgE,MAAMc,QAASu6B,GAAaA,EAAW,CAAEA,MAC3Ct2B,EAAMzC,MAAOtG,GAElB,CAYO,SAASs/B,EAAQv2B,EAAO+Y,EAAMc,EAAIrc,EAAQ,GAChD,MAAMg5B,EAAuB,IAAKx2B,GAElC,OADAw2B,EAAqBt/B,OAAQ6hB,EAAMvb,GAC5B64B,EACNG,EACAx2B,EAAMzC,MAAOwb,EAAMA,EAAOvb,GAC1Bqc,EAEF,CClBA,MAAM4c,EAAap7B,GAAOA,EAY1B,SAASq7B,EAAeC,EAAQC,EAAe,IAC9C,MAAMvqB,EAAS,IAAI7V,IACb0oB,EAAU,GAWhB,OAVA7S,EAAOxV,IAAK+/B,EAAc1X,GAC1ByX,EAAOn+B,SAAW2xB,IACjB,MAAM,SAAE0M,EAAQ,YAAEC,GAAgB3M,EAClCjL,EAAQnoB,KAAM8/B,GACdH,EAAeI,EAAaD,GAAWr+B,SACtC,CAAEu+B,EAAOC,KACR3qB,EAAOxV,IAAKmgC,EAAaD,EAAO,GAEjC,IAEK1qB,CACR,CAWA,SAAS4qB,EAAiBN,EAAQC,EAAe,IAChD,MAAMvqB,EAAS,GACTsE,EAAQ,CAAE,CAAEimB,EAAcD,IAChC,KAAQhmB,EAAMvV,QAAS,CACtB,MAAQ2P,EAAQmsB,GAAkBvmB,EAAMiV,QACxCsR,EAAc1+B,SAAS,EAAIs+B,iBAAgB3M,MAC1C9d,EAAOtV,KAAM,CAAEozB,EAAM0M,SAAU9rB,IAC1B+rB,GAAa17B,QACjBuV,EAAM5Z,KAAM,CAAEozB,EAAM0M,SAAUC,GAC/B,GAEF,CACA,OAAOzqB,CACR,CAYA,SAAS8qB,EAAeR,EAAQS,EAAYX,GAC3C,MAAMpqB,EAAS,GAETsE,EAAQ,IAAKgmB,GACnB,KAAQhmB,EAAMvV,QAAS,CACtB,MAAM,YAAE07B,KAAgB3M,GAAUxZ,EAAMiV,QACxCjV,EAAM5Z,QAAS+/B,GACfzqB,EAAOtV,KAAM,CAAEozB,EAAM0M,SAAUO,EAAWjN,IAC3C,CAEA,OAAO9d,CACR,CAuBA,SAASgrB,EAAqCV,GAC7C,OAAOQ,EAAeR,GAAUxM,IAC/B,MAAM,WAAEmN,KAAeC,GAAcpN,EACrC,OAAOoN,CAAS,GAElB,CAWA,SAASC,EAA6Bb,GACrC,OAAOQ,EAAeR,GAAUxM,GAAWA,EAAMmN,YAClD,CAyBO,SAASG,EAA8BC,EAAQC,GACrD,MACiB,4BAAhBD,EAAOzsB,WACQ7M,IAAfu5B,GACoB,4BAApBA,EAAW1sB,MACX2sB,IAAeF,EAAOG,UAAWF,EAAWE,YAnBvC,SAAsBt3B,EAAGC,GAC/B,OAAOo3B,IAAer/B,OAAOlC,KAAMkK,GAAKhI,OAAOlC,KAAMmK,GACtD,CAkBEs3B,CAAaJ,EAAOJ,WAAYK,EAAWL,WAE7C,CAEA,SAASS,EAA0B1H,EAAOsG,GACzC,MAAMqB,EAAe3H,EAAM4H,KACrBtnB,EAAQ,IAAKgmB,GACbuB,EAAkB,IAAKvB,GAC7B,KAAQhmB,EAAMvV,QAAS,CACtB,MAAM+uB,EAAQxZ,EAAMiV,QACpBjV,EAAM5Z,QAASozB,EAAM2M,aACrBoB,EAAgBnhC,QAASozB,EAAM2M,YAChC,CAEA,IAAM,MAAM3M,KAAS+N,EACpBF,EAAanhC,IAAKszB,EAAM0M,SAAU,CAAC,GAEpC,IAAM,MAAM1M,KAAS+N,EACpBF,EAAanhC,IACZszB,EAAM0M,SACNt+B,OAAOZ,OAAQqgC,EAAaphC,IAAKuzB,EAAM0M,UAAY,IAC/CxG,EAAM8H,WAAWvhC,IAAKuzB,EAAM0M,UAC/BS,WAAYjH,EAAMiH,WAAW1gC,IAAKuzB,EAAM0M,UACxCC,YAAa3M,EAAM2M,YAAYvgC,KAAO6hC,GACrCJ,EAAaphC,IAAKwhC,EAASvB,cAKhC,CAEA,SAASwB,EACRhI,EACAiI,EACAC,GAAmC,GAEnC,MAAMP,EAAe3H,EAAM4H,KACrBO,EAAsB,IAAI53B,IAAK,IAC/B63B,EAAoB,IAAI73B,IAC9B,IAAM,MAAMi2B,KAAYyB,EAAmB,CAC1C,IAAIpZ,EAAUqZ,EACX1B,EACAxG,EAAMqI,QAAQ9hC,IAAKigC,GACtB,EAAG,CACF,GAAKxG,EAAMsI,sBAAuBzZ,GAAY,CAG7CuZ,EAAkBxkB,IAAKiL,GACvB,KACD,CAECsZ,EAAoBvkB,IAAKiL,GACzBA,EAAUmR,EAAMqI,QAAQ9hC,IAAKsoB,EAE/B,YAAsB9gB,IAAZ8gB,EACX,CAIA,IAAM,MAAM2X,KAAY2B,EACvBR,EAAanhC,IAAKggC,EAAU,IAAKmB,EAAaphC,IAAKigC,KAEpD,IAAM,MAAMA,KAAY2B,EACvBR,EAAaphC,IAAKigC,GAAWC,aAC5BzG,EAAM0G,MAAMngC,IAAKigC,IAAc,IAC9BtgC,KAAOygC,GAAiBgB,EAAaphC,IAAKogC,KAK7C,IAAM,MAAMH,KAAY4B,EACvBT,EAAanhC,IAAK,eAAiBggC,EAAU,CAC5CC,aAAezG,EAAM0G,MAAMngC,IAAKigC,IAAc,IAAKtgC,KAChDygC,GAAiBgB,EAAaphC,IAAKogC,MAIzC,CAmTA,MA2NaL,GAASiC,EAAAA,EAAAA,MACrBC,EAAAA,iBAvD+BC,GAAa,CAAEzI,EAAOqH,KACrD,GAAKrH,GAAyB,gCAAhBqH,EAAOzsB,KAAyC,CAC7D,MAAM,GAAE2I,EAAE,UAAEmlB,GAAcrB,EAG1B,GAAK9jB,IAAOmlB,EACX,OAAO1I,GAGRA,EAAQ,IAAKA,IACPiH,WAAa,IAAI9gC,IAAK65B,EAAMiH,YAClCjH,EAAMiH,WAAW9+B,SAAS,CAAE8+B,EAAYT,KACvC,MAAM,KAAEz/B,GAASi5B,EAAM8H,WAAWvhC,IAAKigC,GACzB,eAATz/B,GAAyBkgC,EAAWlG,MAAQxd,GAChDyc,EAAMiH,WAAWzgC,IAAKggC,EAAU,IAC5BS,EACHlG,IAAK2H,GAEP,GAEF,CAEA,OAAOD,EAASzI,EAAOqH,EAAQ,IAle7BoB,GACF,CAAEzI,EAAQ,CAAC,EAAGqH,KACb,MAAMsB,EAAWF,EAASzI,EAAOqH,GAEjC,GAAKsB,IAAa3I,EACjB,OAAOA,EAIR,OADA2I,EAASf,KAAO5H,EAAM4H,KAAO5H,EAAM4H,KAAO,IAAIzhC,IACrCkhC,EAAOzsB,MACf,IAAK,iBACL,IAAK,gBACJ+tB,EAASf,KAAO,IAAIzhC,IAAKwiC,EAASf,MAClCF,EAA0BiB,EAAUtB,EAAOf,QAC3C0B,EACCW,EACAtB,EAAOd,aAAe,CAAEc,EAAOd,cAAiB,CAAE,KAClD,GAED,MAED,IAAK,eACJoC,EAASf,KAAO,IAAIzhC,IAAKwiC,EAASf,MAClCe,EAASf,KAAKphC,IAAK6gC,EAAOb,SAAU,IAChCmC,EAASf,KAAKrhC,IAAK8gC,EAAOb,aAC1BmC,EAASb,WAAWvhC,IAAK8gC,EAAOb,UACnCS,WAAY0B,EAAS1B,WAAW1gC,IAAK8gC,EAAOb,YAE7CwB,EACCW,EACA,CAAEtB,EAAOb,WACT,GAED,MACD,IAAK,gCACL,IAAK,0BACJmC,EAASf,KAAO,IAAIzhC,IAAKwiC,EAASf,MAClCP,EAAOG,UAAUr/B,SAAWq+B,IAC3BmC,EAASf,KAAKphC,IAAKggC,EAAU,IACzBmC,EAASf,KAAKrhC,IAAKigC,GACtBS,WAAY0B,EAAS1B,WAAW1gC,IAAKigC,IACnC,IAEJwB,EACCW,EACAtB,EAAOG,WACP,GAED,MAED,IAAK,yCAA0C,CAC9C,MAAMoB,EAlNV,SAAgCtC,GAC/B,MAAMtqB,EAAS,CAAC,EACVsE,EAAQ,IAAKgmB,GACnB,KAAQhmB,EAAMvV,QAAS,CACtB,MAAM,YAAE07B,KAAgB3M,GAAUxZ,EAAMiV,QACxCjV,EAAM5Z,QAAS+/B,GACfzqB,EAAQ8d,EAAM0M,WAAa,CAC5B,CAEA,OAAOxqB,CACR,CAwM8B6sB,CACzBxB,EAAOf,QAERqC,EAASf,KAAO,IAAIzhC,IAAKwiC,EAASf,MAClCP,EAAOyB,kBACLhT,OAIAuR,EAAOyB,kBACLlvB,QACE4sB,IAAgBoC,EAAmBpC,KAErCtgC,KAAOsgC,GAAc,eAAiBA,KAExCr+B,SAAW9B,IACXsiC,EAASf,KAAKjhC,OAAQN,EAAK,IAG7BqhC,EAA0BiB,EAAUtB,EAAOf,QAC3C0B,EACCW,EACAtB,EAAOf,OAAOpgC,KAAOiK,GAAOA,EAAEq2B,YAC9B,GAID,MAAMuC,EAAyB,GAC/B,IAAM,MAAMvC,KAAYa,EAAOG,UAAY,CAC1C,MAAMwB,EAAWhJ,EAAMqI,QAAQ9hC,IAAKigC,QAEtBz4B,IAAbi7B,GACe,KAAbA,IACDL,EAASb,WAAWvhC,IAAKyiC,IAE1BD,EAAuBriC,KAAMsiC,EAE/B,CACAhB,EACCW,EACAI,GACA,GAED,KACD,CACA,IAAK,wCACJ,MAAMA,EAAyB,GAC/B,IAAM,MAAMvC,KAAYa,EAAOG,UAAY,CAC1C,MAAMwB,EAAWhJ,EAAMqI,QAAQ9hC,IAAKigC,QAEtBz4B,IAAbi7B,GACe,KAAbA,IACDL,EAASb,WAAWvhC,IAAKyiC,IAE1BD,EAAuBriC,KAAMsiC,EAE/B,CACAL,EAASf,KAAO,IAAIzhC,IAAKwiC,EAASf,MAClCP,EAAO4B,iBACLnT,OACAuR,EAAO4B,iBAAiB/iC,KACrBsgC,GAAc,eAAiBA,KAGlCr+B,SAAW9B,IACXsiC,EAASf,KAAKjhC,OAAQN,EAAK,IAE7B2hC,EACCW,EACAI,GACA,GAED,MACD,IAAK,0BAA2B,CAC/B,MAAMG,EAAmB,GACpB7B,EAAO8B,iBACXD,EAAiBxiC,KAAM2gC,EAAO8B,kBAE9BD,EAAiBxiC,KAAM,IAEnB2gC,EAAO+B,gBACXF,EAAiBxiC,KAAM2gC,EAAO+B,gBAE/BT,EAASf,KAAO,IAAIzhC,IAAKwiC,EAASf,MAClCI,EACCW,EACAO,GACA,GAED,KACD,CACA,IAAK,iBACL,IAAK,mBAAoB,CACxB,MAAMA,EAAmB,CACxB7B,EAAOd,aAAec,EAAOd,aAAe,IAE7CoC,EAASf,KAAO,IAAIzhC,IAAKwiC,EAASf,MAClCI,EACCW,EACAO,GACA,GAED,KACD,CACA,IAAK,8BAA+B,CACnC,MAAMA,EAAmB,GACzBP,EAAS1B,WAAW9+B,SAAS,CAAE8+B,EAAYT,KAGxC,eADDmC,EAASb,WAAWvhC,IAAKigC,GAAWz/B,MAEpCkgC,EAAWlG,MAAQsG,EAAOqB,WAE1BQ,EAAiBxiC,KAAM8/B,EACxB,IAEDmC,EAASf,KAAO,IAAIzhC,IAAKwiC,EAASf,MAClCsB,EAAiB/gC,SAAWq+B,IAC3BmC,EAASf,KAAKphC,IAAKggC,EAAU,IACzBmC,EAASb,WAAWvhC,IAAKigC,GAC5BS,WAAY0B,EAAS1B,WAAW1gC,IAAKigC,GACrCC,YAAakC,EAASf,KAAKrhC,IAAKigC,GAAWC,aACzC,IAEJuB,EACCW,EACAO,GACA,EAEF,EAGD,OAAOP,CAAQ,IAiHsBF,GAAa,CAAEzI,EAAOqH,KAE5D,MAAMgC,EAAmB7B,IACxB,IAAIxrB,EAASwrB,EACb,IAAM,IAAIl8B,EAAI,EAAGA,EAAI0Q,EAAOjR,OAAQO,KAEhC00B,EAAM0G,MAAMngC,IAAKyV,EAAQ1Q,KACzB+7B,EAAOiC,2BACRjC,EAAOiC,0BAA2BttB,EAAQ1Q,MAKvC0Q,IAAWwrB,IACfxrB,EAAS,IAAKA,IAGfA,EAAOtV,QAASs5B,EAAM0G,MAAMngC,IAAKyV,EAAQ1Q,MAE1C,OAAO0Q,CAAM,EAGd,GAAKgkB,EACJ,OAASqH,EAAOzsB,MACf,IAAK,gBACJysB,EAAS,IACLA,EACHzsB,KAAM,wCACNquB,iBAAkBI,EAAgBhC,EAAOG,YAE1C,MACD,IAAK,iBACJH,EAAS,IACLA,EACHzsB,KAAM,yCACNkuB,kBAAmBO,EAAgBhC,EAAOG,YAM9C,OAAOiB,EAASzI,EAAOqH,EAAQ,IAmDCoB,GAAa,CAAEzI,EAAOqH,KACtD,GAAqB,yBAAhBA,EAAOzsB,KACX,OAAO6tB,EAASzI,EAAOqH,GASxB,MAAMkC,EAAoB,CAAC,EAC3B,GAAKrhC,OAAOlC,KAAMg6B,EAAMsI,uBAAwBv9B,OAAS,CACxD,MAAMuV,EAAQ,IAAK+mB,EAAOf,QAC1B,KAAQhmB,EAAMvV,QAAS,CACtB,MAAM,YAAE07B,KAAgB3M,GAAUxZ,EAAMiV,QACxCjV,EAAM5Z,QAAS+/B,GACPzG,EAAMsI,sBAAuBxO,EAAM0M,YAC1C+C,EAAmBzP,EAAM0M,WAAa,EAExC,CACD,CAKA,IAAIgD,EAA0BxJ,EACzBA,EAAM0G,MAAMngC,IAAK8gC,EAAOd,gBAC5BiD,EAA0Bf,EAASe,EAAyB,CAC3D5uB,KAAM,gBACN0uB,0BAA2BC,EAC3B/B,UAAWxH,EAAM0G,MAAMngC,IAAK8gC,EAAOd,iBAGrC,IAAIkD,EAAmBD,EACvB,GAAKnC,EAAOf,OAAOv7B,OAAS,CAC3B0+B,EAAmBhB,EAASgB,EAAkB,IAC1CpC,EACHzsB,KAAM,gBACNhU,MAAO,IAMR,MAAM8iC,EAAwB,IAAIvjC,IAAKsjC,EAAiB/C,OACxDx+B,OAAOlC,KAAMujC,GAAoBphC,SAAW9B,IACtC25B,EAAM0G,MAAMngC,IAAKF,IACrBqjC,EAAsBljC,IAAKH,EAAK25B,EAAM0G,MAAMngC,IAAKF,GAClD,IAEDojC,EAAiB/C,MAAQgD,EACzBD,EAAiB7B,KAAO,IAAIzhC,IAAKsjC,EAAiB7B,MAClD1/B,OAAOlC,KAAMujC,GAAoBphC,SAAWwhC,IAC3C,MAAMtjC,EAAO,eAAesjC,IACvB3J,EAAM4H,KAAKxhC,IAAKC,IACpBojC,EAAiB7B,KAAKphC,IAAKH,EAAK25B,EAAM4H,KAAKrhC,IAAKF,GACjD,GAEF,CACA,OAAOojC,CAAgB,IAlGChB,GAAa,CAAEzI,EAAOqH,KAC9C,GAAqB,iBAAhBA,EAAOzsB,KAA0B,CACrC,MAAM+tB,EAAW,IACb3I,EACH8H,WAAY,IAAI3hC,IACf6gC,EAAqCK,EAAOf,SAE7CW,WAAY,IAAI9gC,IAAKghC,EAA6BE,EAAOf,SACzDI,MAAOL,EAAegB,EAAOf,QAC7B+B,QAAS,IAAIliC,IAAKygC,EAAiBS,EAAOf,SAC1CgC,sBAAuB,CAAC,GAWzB,OARAK,EAASf,KAAO,IAAIzhC,IAAK65B,GAAO4H,MAChCF,EAA0BiB,EAAUtB,EAAOf,QAC3CqC,EAASf,KAAKphC,IAAK,GAAI,CACtBigC,YAAaY,EAAOf,OAAOpgC,KAAO6hC,GACjCY,EAASf,KAAKrhC,IAAKwhC,EAASvB,cAIvBmC,CACR,CAEA,OAAOF,EAASzI,EAAOqH,EAAQ,IAlLhC,SAAoCoB,GACnC,IAAInB,EAEAsC,EADAC,GAAgC,EAGpC,MAAO,CAAE7J,EAAOqH,KACf,IAEIyC,EAFAC,EAAYtB,EAASzI,EAAOqH,GAGiB,IAAA2C,EAKjD,GALqB,4BAAhB3C,EAAOzsB,OACXgvB,EAAqBvC,EAAO4C,mBAC5BH,EAAiD,QAA3BE,EAAGhK,EAAMiK,0BAAkB,IAAAD,GAAAA,QAGtBj8B,IAAvB67B,EAEJ,OADAE,EAAyBF,EAClBE,IAA2BC,EAAUE,mBACzCF,EACA,IACGA,EACHE,mBAAoBH,GAIxB,MAAMI,EACW,mCAAhB7C,EAAOzsB,MACPivB,EAI0D,IAAAM,EAA3D,OAAKnK,IAAU+J,GAAeG,GAe9BH,EAAY,IACRA,EACHE,mBAAoBC,GACfL,GACAzC,EAA8BC,EAAQC,IAM5CA,EAAaD,EACbwC,EACiB,uCAAhBxC,EAAOzsB,KAEDmvB,IA5BNF,EACiB,uCAAhBxC,EAAOzsB,KAERkvB,EAAkD,QAA5BK,EAAGnK,GAAOiK,0BAAkB,IAAAE,GAAAA,EAC7CnK,EAAMiK,qBAAuBH,EAC1B9J,EAGD,IACH+J,EACHE,mBAAoBH,GAkBN,CAElB,IAYA,SAAiCrB,GAMhC,MAAM2B,EAAuB,IAAI75B,IAAK,CAAE,mBAExC,MAAO,CAAEyvB,EAAOqH,KACf,MAAM0C,EAAYtB,EAASzI,EAAOqH,GAMlC,OAJK0C,IAAc/J,IAClB+J,EAAUM,gBAAkBD,EAAqBhkC,IAAKihC,EAAOzsB,OAGvDmvB,CAAS,CAElB,IA8MoCtB,GAAa,CAAEzI,EAAOqH,KACzD,GAAqB,oCAAhBA,EAAOzsB,KAA6C,CAGxD,MAAM0vB,EAAY7B,EAASzI,EAAO,CACjCplB,KAAM,uBACN2rB,aAAcc,EAAOb,SACrBF,OAAQ,KAET,OAAOmC,EAAS6B,EAAWjD,EAC5B,CAEA,OAAOoB,EAASzI,EAAOqH,EAAQ,GAWVkB,CAUnB,CAIFT,UAAAA,CAAY9H,EAAQ,IAAI75B,IAAOkhC,GAC9B,OAASA,EAAOzsB,MACf,IAAK,iBACL,IAAK,gBAAiB,CACrB,MAAM+tB,EAAW,IAAIxiC,IAAK65B,GAM1B,OALAgH,EAAqCK,EAAOf,QAASn+B,SACpD,EAAI9B,EAAKI,MACRkiC,EAASniC,IAAKH,EAAKI,EAAO,IAGrBkiC,CACR,CACA,IAAK,eAAgB,CAEpB,IAAO3I,EAAM55B,IAAKihC,EAAOb,UACxB,OAAOxG,EAIR,MAAM,WAAEiH,KAAesD,GAAYlD,EAAOmD,QAC1C,GAAyC,IAApCtiC,OAAOjC,OAAQskC,GAAUx/B,OAC7B,OAAOi1B,EAGR,MAAM2I,EAAW,IAAIxiC,IAAK65B,GAK1B,OAJA2I,EAASniC,IAAK6gC,EAAOb,SAAU,IAC3BxG,EAAMz5B,IAAK8gC,EAAOb,aAClB+D,IAEG5B,CACR,CAEA,IAAK,yCAA0C,CAC9C,IAAOtB,EAAOf,OACb,OAAOtG,EAGR,MAAM2I,EAAW,IAAIxiC,IAAK65B,GAU1B,OATAqH,EAAOyB,kBAAkB3gC,SAAWq+B,IACnCmC,EAAShiC,OAAQ6/B,EAAU,IAG5BQ,EAAqCK,EAAOf,QAASn+B,SACpD,EAAI9B,EAAKI,MACRkiC,EAASniC,IAAKH,EAAKI,EAAO,IAGrBkiC,CACR,CAEA,IAAK,wCAAyC,CAC7C,MAAMA,EAAW,IAAIxiC,IAAK65B,GAI1B,OAHAqH,EAAO4B,iBAAiB9gC,SAAWq+B,IAClCmC,EAAShiC,OAAQ6/B,EAAU,IAErBmC,CACR,EAGD,OAAO3I,CACR,EAKAiH,UAAAA,CAAYjH,EAAQ,IAAI75B,IAAOkhC,GAC9B,OAASA,EAAOzsB,MACf,IAAK,iBACL,IAAK,gBAAiB,CACrB,MAAM+tB,EAAW,IAAIxiC,IAAK65B,GAM1B,OALAmH,EAA6BE,EAAOf,QAASn+B,SAC5C,EAAI9B,EAAKI,MACRkiC,EAASniC,IAAKH,EAAKI,EAAO,IAGrBkiC,CACR,CAEA,IAAK,eAAgB,CAEpB,IACG3I,EAAMz5B,IAAK8gC,EAAOb,YAClBa,EAAOmD,QAAQvD,WAEjB,OAAOjH,EAGR,MAAM2I,EAAW,IAAIxiC,IAAK65B,GAK1B,OAJA2I,EAASniC,IAAK6gC,EAAOb,SAAU,IAC3BxG,EAAMz5B,IAAK8gC,EAAOb,aAClBa,EAAOmD,QAAQvD,aAEZ0B,CACR,CAEA,IAAK,gCACL,IAAK,0BAA2B,CAE/B,GAAKtB,EAAOG,UAAUpjB,OAASb,IAAUyc,EAAMz5B,IAAKgd,KACnD,OAAOyc,EAGR,IAAIyK,GAAY,EAChB,MAAM9B,EAAW,IAAIxiC,IAAK65B,GAC1B,IAAM,MAAMwG,KAAYa,EAAOG,UAAY,KAAAkD,EAC1C,MAAMC,EAA0BziC,OAAOoI,QACtC+2B,EAAOuD,cACJvD,EAAOJ,WAAYT,GACF,QADYkE,EAC7BrD,EAAOJ,kBAAU,IAAAyD,EAAAA,EAAI,CAAC,GAE1B,GAAwC,IAAnCC,EAAwB5/B,OAC5B,SAED,IAAI8/B,GAAuB,EAC3B,MAAMC,EAAqB9K,EAAMz5B,IAAKigC,GAChCuE,EAAgB,CAAC,EACvBJ,EAAwBxiC,SAAS,EAAI9B,EAAKI,MACpCqkC,EAAoBzkC,KAAUI,IAClCokC,GAAuB,EACvBE,EAAe1kC,GAAQI,EACxB,IAEDgkC,EAAYA,GAAaI,EACpBA,GACJlC,EAASniC,IAAKggC,EAAU,IACpBsE,KACAC,GAGN,CAEA,OAAON,EAAY9B,EAAW3I,CAC/B,CAEA,IAAK,yCAA0C,CAC9C,IAAOqH,EAAOf,OACb,OAAOtG,EAGR,MAAM2I,EAAW,IAAIxiC,IAAK65B,GAS1B,OARAqH,EAAOyB,kBAAkB3gC,SAAWq+B,IACnCmC,EAAShiC,OAAQ6/B,EAAU,IAE5BW,EAA6BE,EAAOf,QAASn+B,SAC5C,EAAI9B,EAAKI,MACRkiC,EAASniC,IAAKH,EAAKI,EAAO,IAGrBkiC,CACR,CAEA,IAAK,wCAAyC,CAC7C,MAAMA,EAAW,IAAIxiC,IAAK65B,GAI1B,OAHAqH,EAAO4B,iBAAiB9gC,SAAWq+B,IAClCmC,EAAShiC,OAAQ6/B,EAAU,IAErBmC,CACR,EAGD,OAAO3I,CACR,EAKA0G,KAAAA,CAAO1G,EAAQ,IAAI75B,IAAOkhC,GACzB,OAASA,EAAOzsB,MACf,IAAK,iBAAkB,KAAAowB,EACtB,MAAMC,EAAa5E,EAAegB,EAAOf,QACnCqC,EAAW,IAAIxiC,IAAK65B,GAU1B,OATAiL,EAAW9iC,SAAS,CAAEu+B,EAAOF,KACV,KAAbA,GACJmC,EAASniC,IAAKggC,EAAUE,EACzB,IAEDiC,EAASniC,IACR,IACiB,QAAjBwkC,EAAEhL,EAAMz5B,IAAK,WAAI,IAAAykC,EAAAA,EAAI,IAAKlV,OAAQmV,EAAY,MAExCtC,CACR,CACA,IAAK,gBAAiB,CACrB,MAAM,aAAEpC,EAAe,IAAOc,EACxB6D,EAAWlL,EAAMz5B,IAAKggC,IAAkB,GACxC4E,EAAe9E,EACpBgB,EAAOf,OACPC,IAEK,MAAE3/B,EAAQskC,EAASngC,QAAWs8B,EAC9BsB,EAAW,IAAIxiC,IAAK65B,GAY1B,OAXAmL,EAAahjC,SAAS,CAAEu+B,EAAOF,KAC9BmC,EAASniC,IAAKggC,EAAUE,EAAO,IAEhCiC,EAASniC,IACR+/B,EACAP,EACCkF,EACAC,EAAa5kC,IAAKggC,GAClB3/B,IAGK+hC,CACR,CAEA,IAAK,0BAA2B,KAAAyC,EAC/B,MAAM,iBACLjC,EAAmB,GAAE,eACrBC,EAAiB,GAAE,UACnB5B,GACGH,GACE,MAAEzgC,EAAQo5B,EAAMz5B,IAAK6iC,GAAiBr+B,QAAWs8B,EAGvD,GAAK8B,IAAqBC,EAAiB,CAC1C,MACMiC,EADWrL,EAAMz5B,IAAK6iC,GACD9iC,QAASkhC,EAAW,IACzCmB,EAAW,IAAIxiC,IAAK65B,GAU1B,OATA2I,EAASniC,IACR4iC,EACAlD,EACClG,EAAMz5B,IAAK6iC,GACXiC,EACAzkC,EACA4gC,EAAUz8B,SAGL49B,CACR,CAGA,MAAMA,EAAW,IAAIxiC,IAAK65B,GAW1B,OAVA2I,EAASniC,IACR2iC,EAGiD,QAHjCiC,EAChBpL,EACEz5B,IAAK4iC,IACJvvB,QAAU2J,IAAUikB,EAAUtjB,SAAUX,YAAM,IAAA6nB,EAAAA,EAAI,IAEtDzC,EAASniC,IACR4iC,EACApD,EAAUhG,EAAMz5B,IAAK6iC,GAAkB5B,EAAW5gC,IAE5C+hC,CACR,CAEA,IAAK,iBAAkB,CACtB,MAAM,UAAEnB,EAAS,aAAEjB,EAAe,IAAOc,EACnCiE,EAAgB9D,EAAW,GAC3B0D,EAAWlL,EAAMz5B,IAAKggC,GAE5B,IAAO2E,EAASngC,QAAUugC,IAAkBJ,EAAU,GACrD,OAAOlL,EAGR,MAAMuL,EAAaL,EAAS5kC,QAASglC,GAC/B3C,EAAW,IAAIxiC,IAAK65B,GAU1B,OATA2I,EAASniC,IACR+/B,EACAL,EACCgF,EACAK,EACAA,EAAa,EACb/D,EAAUz8B,SAGL49B,CACR,CAEA,IAAK,mBAAoB,CACxB,MAAM,UAAEnB,EAAS,aAAEjB,EAAe,IAAOc,EACnCiE,EAAgB9D,EAAW,GAC3BgE,EAAehE,EAAWA,EAAUz8B,OAAS,GAC7CmgC,EAAWlL,EAAMz5B,IAAKggC,GAE5B,IACG2E,EAASngC,QACXygC,IAAiBN,EAAUA,EAASngC,OAAS,GAE7C,OAAOi1B,EAGR,MAAMuL,EAAaL,EAAS5kC,QAASglC,GAC/B3C,EAAW,IAAIxiC,IAAK65B,GAU1B,OATA2I,EAASniC,IACR+/B,EACAL,EACCgF,EACAK,EACAA,EAAa,EACb/D,EAAUz8B,SAGL49B,CACR,CAEA,IAAK,yCAA0C,CAC9C,MAAM,UAAEnB,GAAcH,EACtB,IAAOA,EAAOf,OACb,OAAOtG,EAGR,MAAMmL,EAAe9E,EAAegB,EAAOf,QACrCqC,EAAW,IAAIxiC,IAAK65B,GA0B1B,OAzBAqH,EAAOyB,kBAAkB3gC,SAAWq+B,IACnCmC,EAAShiC,OAAQ6/B,EAAU,IAE5B2E,EAAahjC,SAAS,CAAEu+B,EAAOF,KACZ,KAAbA,GACJmC,EAASniC,IAAKggC,EAAUE,EACzB,IAEDiC,EAASxgC,SAAS,CAAEu+B,EAAOF,KAC1B,MAAMiF,EAAcvjC,OAAOjC,OAAQygC,GAAQjQ,QAC1C,CAAEza,EAAQ2qB,IACJA,IAAgBa,EAAW,GACxB,IAAKxrB,KAAWmvB,EAAa5kC,IAAK,OAGC,IAAtCihC,EAAUlhC,QAASqgC,IACvB3qB,EAAOtV,KAAMigC,GAGP3qB,IAER,IAED2sB,EAASniC,IAAKggC,EAAUiF,EAAa,IAE/B9C,CACR,CAEA,IAAK,wCAAyC,CAC7C,MAAMA,EAAW,IAAIxiC,IAAK65B,GAc1B,OAZAqH,EAAO4B,iBAAiB9gC,SAAWq+B,IAClCmC,EAAShiC,OAAQ6/B,EAAU,IAE5BmC,EAASxgC,SAAS,CAAEu+B,EAAOF,KAAc,IAAAkF,EACxC,MAAMD,EAGJ,QAHeC,EAChBhF,GAAO9sB,QACJ2J,IAAU8jB,EAAO4B,iBAAiB/kB,SAAUX,YAC9C,IAAAmoB,EAAAA,EAAI,GACDD,EAAY1gC,SAAW27B,EAAM37B,QACjC49B,EAASniC,IAAKggC,EAAUiF,EACzB,IAEM9C,CACR,EAGD,OAAO3I,CACR,EAIAqI,OAAAA,CAASrI,EAAQ,IAAI75B,IAAOkhC,GAC3B,OAASA,EAAOzsB,MACf,IAAK,iBAAkB,CACtB,MAAM+tB,EAAW,IAAIxiC,IAAK65B,GAM1B,OALA4G,EAAiBS,EAAOf,QAASn+B,SAChC,EAAI9B,EAAKI,MACRkiC,EAASniC,IAAKH,EAAKI,EAAO,IAGrBkiC,CACR,CACA,IAAK,gBAAiB,CACrB,MAAMA,EAAW,IAAIxiC,IAAK65B,GAO1B,OANA4G,EACCS,EAAOf,OACPe,EAAOd,cAAgB,IACtBp+B,SAAS,EAAI9B,EAAKI,MACnBkiC,EAASniC,IAAKH,EAAKI,EAAO,IAEpBkiC,CACR,CACA,IAAK,0BAA2B,CAC/B,MAAMA,EAAW,IAAIxiC,IAAK65B,GAI1B,OAHAqH,EAAOG,UAAUr/B,SAAWob,IAC3BolB,EAASniC,IAAK+c,EAAI8jB,EAAO+B,gBAAkB,GAAI,IAEzCT,CACR,CAEA,IAAK,yCAA0C,CAC9C,MAAMA,EAAW,IAAIxiC,IAAK65B,GAU1B,OATAqH,EAAOyB,kBAAkB3gC,SAAWq+B,IACnCmC,EAAShiC,OAAQ6/B,EAAU,IAE5BI,EACCS,EAAOf,OACPtG,EAAMz5B,IAAK8gC,EAAOG,UAAW,KAC5Br/B,SAAS,EAAI9B,EAAKI,MACnBkiC,EAASniC,IAAKH,EAAKI,EAAO,IAEpBkiC,CACR,CACA,IAAK,wCAAyC,CAC7C,MAAMA,EAAW,IAAIxiC,IAAK65B,GAI1B,OAHAqH,EAAO4B,iBAAiB9gC,SAAWq+B,IAClCmC,EAAShiC,OAAQ6/B,EAAU,IAErBmC,CACR,EAGD,OAAO3I,CACR,EAEAsI,sBAAqBA,CACpBtI,EAAQ,CAAC,GACT,KAAEplB,EAAI,SAAE4rB,EAAQ,yBAAEmF,KAEJ,oCAAT/wB,EACG,IACHolB,EACH,CAAEwG,GAAYmF,GAGT3L,IAiHT,SAAS4L,EAAiB5L,EAAQ,CAAC,EAAGqH,GACrC,OAASA,EAAOzsB,MACf,IAAK,uBACJ,OAAKolB,EAAMwG,SACH,CAAC,EAGFxG,EAER,IAAK,eACJ,OAAKqH,EAAOb,WAAaxG,EAAMwG,SACvBxG,EAGD,CAAEwG,SAAUa,EAAOb,UAC3B,IAAK,uBACL,IAAK,gBACJ,OAAOa,EAAOwE,iBAAqBxE,EAAOf,OAAOv7B,OAI1C,CAAEy7B,SAAUa,EAAOf,OAAQ,GAAIE,UAH9BxG,EAKT,IAAK,gBACJ,OACGqH,EAAOG,WACPH,EAAOG,UAAUz8B,SAC6B,IAAhDs8B,EAAOG,UAAUlhC,QAAS05B,EAAMwG,UAK1B,CAAC,EAHAxG,EAIT,IAAK,iBAAkB,CACtB,IAAqD,IAAhDqH,EAAOG,UAAUlhC,QAAS05B,EAAMwG,UACpC,OAAOxG,EAGR,MAAM8L,EACLzE,EAAOf,OAAQe,EAAO0E,gBACtB1E,EAAOf,OAAQe,EAAOf,OAAOv7B,OAAS,GAEvC,OAAO+gC,EAIFA,EAActF,WAAaxG,EAAMwG,SAC9BxG,EAGD,CAAEwG,SAAUsF,EAActF,UAPzB,CAAC,CAQV,EAGD,OAAOxG,CACR,CA6rBA,MAAMgM,GAAmBxD,EAAAA,EAAAA,iBAAiB,CACzClC,SACA2F,WAlzBM,SAAqBjM,GAAQ,EAAOqH,GAC1C,OAASA,EAAOzsB,MACf,IAAK,iBACJ,OAAO,EAER,IAAK,gBACJ,OAAO,EAGT,OAAOolB,CACR,EAyyBCkM,SAx0BM,SAAmBlM,GAAQ,EAAOqH,GACxC,OAASA,EAAOzsB,MACf,IAAK,eACJ,OAAO,EAER,IAAK,cACJ,OAAO,EAGT,OAAOolB,CACR,EA+zBCmM,uBA71BM,SAAiCnM,GAAQ,EAAOqH,GACtD,OAASA,EAAOzsB,MACf,IAAK,uBACJ,OAAO,EAER,IAAK,uBACJ,OAAO,EAGT,OAAOolB,CACR,EAo1BCoM,cAjyBM,SAAwBpM,EAAQ,GAAIqH,GAC1C,OAASA,EAAOzsB,MACf,IAAK,wBACJ,OAAOysB,EAAOG,UAEf,IAAK,uBACJ,MAAO,GAGT,OAAOxH,CACR,EAwxBCqM,UAzrBM,SAAoBrM,EAAQ,CAAC,EAAGqH,GACtC,OAASA,EAAOzsB,MACf,IAAK,mBACJ,OAAKysB,EAAOb,SACJ,CACN8F,eAAgB,CACf9F,SAAUa,EAAOb,SACjB+F,aAAclF,EAAOkF,aACrBzjB,OAAQue,EAAOmF,aAEhBC,aAAc,CACbjG,SAAUa,EAAOb,SACjB+F,aAAclF,EAAOkF,aACrBzjB,OAAQue,EAAOqF,YAKX,CACNJ,eAAgBjF,EAAOhhB,OAAS2Z,EAAMsM,eACtCG,aAAcpF,EAAO/gB,KAAO0Z,EAAMyM,cAEpC,IAAK,kBACJ,MAAM,eAAEH,EAAc,aAAEG,GAAiBpF,EACzC,MAAO,CACNiF,iBACAG,gBAEF,IAAK,eACJ,MAAM,MAAEpmB,EAAK,IAAEC,GAAQ+gB,EAEvB,OACChhB,IAAU2Z,EAAMsM,gBAAgB9F,UAChClgB,IAAQ0Z,EAAMyM,cAAcjG,SAErBxG,EAGD,CACNsM,eAAgB,CAAE9F,SAAUngB,GAC5BomB,aAAc,CAAEjG,SAAUlgB,IAE5B,IAAK,eACJ,MAAMqmB,EAAgB3M,GAAOsM,gBAAgB9F,SACvCoG,EAAc5M,GAAOyM,cAAcjG,SAGzC,IAAOmG,IAAmBC,EACzB,OAAO5M,EAIR,IACGqH,EAAOf,OAAOlsB,MACb0f,GAAWA,EAAM0M,WAAamG,IAGjC,MAAO,CACNL,eAAgB,CAAC,EACjBG,aAAc,CAAC,GAKjB,IACGpF,EAAOf,OAAOlsB,MACb0f,GAAWA,EAAM0M,WAAaoG,IAGjC,MAAO,IACH5M,EACHyM,aAAczM,EAAMsM,gBAKxB,MAAMA,EAAiBV,EAAiB5L,EAAMsM,eAAgBjF,GACxDoF,EAAeb,EAAiB5L,EAAMyM,aAAcpF,GAE1D,OACCiF,IAAmBtM,EAAMsM,gBACzBG,IAAiBzM,EAAMyM,aAEhBzM,EAGD,CACNsM,iBACAG,eAEF,EAgmBCI,iBAtlBM,SAA2B7M,GAAQ,EAAOqH,GAChD,OAASA,EAAOzsB,MACf,IAAK,qBACJ,OAAO,EAER,IAAK,oBACJ,OAAO,EAGT,OAAOolB,CACR,EA6kBC8M,mBAnkBM,SAA6B9M,GAAQ,EAAMqH,GACjD,MACM,qBADGA,EAAOzsB,KAEPysB,EAAOyF,mBAGT9M,CACR,EA6jBC+M,gBA7fM,SAA0B/M,EAAQ,KAAMqH,GAC9C,MACiB,mBAAhBA,EAAOzsB,WACoB7M,IAA3Bs5B,EAAO0F,iBAIP,CACC,eACA,eACA,kBACA,gBACA,wBACC7oB,SAAUmjB,EAAOzsB,MARZysB,EAAO0F,gBAaR/M,CACR,EA2eCgN,WAzeM,SAAqBhN,EAAQ,CAAC,EAAGqH,GACvC,GAAqB,sBAAhBA,EAAOzsB,KAA+B,CAC1C,MAAM,SAAE4rB,GAAaa,EACrB,MAAO,IACHrH,EACH,CAAEwG,GACDxG,EAAOwG,IAAoC,SAAtBxG,EAAOwG,GACzB,SACA,OAEN,CAEA,OAAOxG,CACR,EA6dCiN,kBAzUgCA,CAAEjN,EAAQ,CAAC,EAAGqH,KAC9C,OAASA,EAAOzsB,MAGf,IAAK,iBACL,IAAK,gBACJ,OAAO1S,OAAOglC,YACbhlC,OAAOoI,QAAS0vB,GAAQpmB,QACvB,EAAI2J,MAAY8jB,EAAOG,UAAUtjB,SAAUX,MAI9C,IAAK,6BAA8B,CAClC,MAAM,SAAEijB,GAAaa,EACrB,IAAOA,EAAO8F,SAAW,CACxB,GAAKnN,EAAM70B,eAAgBq7B,GAAa,CACvC,MAAQ,CAAEA,GAAY4G,KAAiBC,GAAerN,EACtD,OAAOqN,CACR,CAEA,OAAOrN,CACR,CAEA,OAAKuH,IAAevH,EAAOwG,GAAYa,EAAO8F,UACtCnN,EAGD,IACHA,EACH,CAAEwG,GAAYa,EAAO8F,SAEvB,EAED,OAAOnN,CAAK,EAySZsN,eAldM,SAAyBtN,EAAQ,KAAMqH,GAC7C,OAASA,EAAOzsB,MACf,IAAK,uBAAwB,CAC5B,MAAM,aACL2rB,EAAY,MACZ3/B,EAAK,uBACL2mC,EAAsB,UACtBC,EAAS,YACTC,GACGpG,EACE0C,EAAY,CACjBxD,eACA3/B,QACA2mC,yBACAC,YACAC,eAID,OAAOlG,IAAevH,EAAO+J,GAAc/J,EAAQ+J,CACpD,CAEA,IAAK,uBACJ,OAAO,KAGT,OAAO/J,CACR,EAwbC0N,SA9aM,SAAmB1N,EAAQ,CAAE2N,SAAS,GAAQtG,GACpD,MACM,0BADGA,EAAOzsB,KAEP,IACHolB,EACH2N,QAAStG,EAAOsG,SAIZ3N,CACR,EAqaCmN,SA3ZM,SAAmBnN,EAAQgE,EAAmBqD,GACpD,MACM,oBADGA,EAAOzsB,KAETysB,EAAOnwB,MACJ,IACH8sB,KACAqD,EAAO8F,UAGL,IACHnN,KACAqH,EAAO8F,UAINnN,CACR,EA4YC4N,YAlYM,SAAsB5N,EAAQ8D,EAAsBuD,GAC1D,OAASA,EAAOzsB,MACf,IAAK,gBACL,IAAK,iBAAkB,CACtB,MAAMizB,EAAkBxG,EAAOf,OAAO7P,QACrC,CAAEqX,EAAWhU,KACZ,MAAM,WAAEmN,EAAYlgC,KAAMgnC,GAAcjU,EACxC,IAAIvW,EAAKwqB,EAGT,MAAMzzB,GAAQ0zB,EAAAA,EAAAA,QAAQC,EAAAA,OAAcC,wBACnCH,EACA9G,GASD,OAPK3sB,GAAOvT,OACXwc,GAAM,IAAMjJ,EAAMvT,MAEA,eAAdgnC,IACJxqB,GAAM,IAAM0jB,EAAWlG,KAGjB,IACH+M,EACH,CAAEvqB,GAAM,CACP4qB,KAAM9G,EAAO8G,KACbhhC,MAAO2gC,EAAWvqB,GACfuqB,EAAWvqB,GAAKpW,MAAQ,EACxB,GAEJ,GAEF6yB,EAAM+D,aAGP,MAAO,IACH/D,EACH+D,YAAa8J,EAEf,EAGD,OAAO7N,CACR,EAyVCoO,0BArPM,SAAoCpO,EAAQ,KAAMqH,GACxD,OAASA,EAAOzsB,MACf,IAAK,eACJ,IAAOysB,EAAOmD,QAAQvD,WACrB,MAGD,MAAO,CAAE,CAAEI,EAAOb,UAAYa,EAAOmD,QAAQvD,YAE9C,IAAK,0BACJ,OAAOI,EAAOG,UAAU/Q,QACvB,CAAE4X,EAAa9qB,KAAE,IACb8qB,EACH,CAAE9qB,GAAM8jB,EAAOuD,cACZvD,EAAOJ,WAAY1jB,GACnB8jB,EAAOJ,cAEX,CAAC,GAIJ,OAAOjH,CACR,EAgOCsO,UA1BM,SAAoBtO,GAAQ,EAAOqH,GACzC,MACM,eADGA,EAAOzsB,KAEPysB,EAAOiH,UAGTtO,CACR,EAoBCuO,WApSM,SAAqBvO,EAAQ,OAAQqH,GAE3C,MAAqB,kBAAhBA,EAAOzsB,MAAsC,eAAVolB,EAChC,OAGa,oBAAhBqH,EAAOzsB,KACJysB,EAAOmH,KAGRxO,CACR,EA0RCyO,uBAhRM,SAAiCzO,EAAQ,KAAMqH,GACrD,MAAqB,0BAAhBA,EAAOzsB,KACJysB,EAAOoH,uBAGM,oBAAhBpH,EAAOzsB,KACJ,KAGDolB,CACR,EAuQC0O,cA5LM,SAAwB1O,EAAQ,KAAMqH,GAC5C,OAASA,EAAOzsB,MACf,IAAK,kCACJ,OAAOysB,EAAOb,SACf,IAAK,eACJ,GAAKa,EAAOb,WAAaxG,EACxB,OAAO,KAIV,OAAOA,CACR,EAkLC2O,iBA1NM,SAA2B3O,EAAOqH,GACxC,OAASA,EAAOzsB,MACf,IAAK,yBACJ,MAAM,SAAE4rB,EAAQ,cAAEoI,GAAkBvH,EAEpC,OAAKuH,EACGpI,EACIxG,IAAUwG,EACd,KAGDxG,EACR,IAAK,eACJ,GAAKqH,EAAOb,WAAaxG,EACxB,OAAO,KAIV,OAAOA,CACR,EAwMC6O,kBAzKM,SAA4B7O,EAAQ,CAAC,EAAGqH,GAC9C,OAASA,EAAOzsB,MACf,IAAK,gBACL,IAAK,iBACJ,IAAOysB,EAAOf,OAAOv7B,OACpB,OAAOi1B,EAGR,MAAMwH,EAAYH,EAAOf,OAAOpgC,KAAO4zB,GAC/BA,EAAM0M,WAGR71B,EAAS02B,EAAOyH,MAAMn+B,OAE5B,MAAO,CAAE62B,YAAW72B,UACrB,IAAK,eACJ,MAAO,CAAC,EAEV,OAAOqvB,CACR,EAuJC+O,2BA7IM,SAAqC/O,EAAQ,GAAIqH,GACvD,MAAqB,sCAAhBA,EAAOzsB,KACJysB,EAAO0H,2BAER/O,CACR,EAyICgP,kCA/HM,SAA4ChP,EAAQ,GAAIqH,GAC9D,MAAqB,sCAAhBA,EAAOzsB,KACJysB,EAAO4H,kBAERjP,CACR,EA2HCkP,gBAjyBM,SAA0BlP,EAAQ,CAAC,EAAGqH,GAC5C,MAAqB,yBAAhBA,EAAOzsB,KACJ,IACHolB,KACAqH,EAAOmD,SAILxK,CACR,EAyxBCmP,kBAlHM,SAA4BnP,EAAQ,IAAI75B,IAAOkhC,GACrD,OAASA,EAAOzsB,MACf,IAAK,yBACJ,OAAO,IAAIzU,IAAK65B,GAAQx5B,IAAK6gC,EAAOb,SAAUa,EAAOmH,MACtD,IAAK,2BAA4B,CAChC,MAAM7F,EAAW,IAAIxiC,IAAK65B,GAE1B,OADA2I,EAAShiC,OAAQ0gC,EAAOb,UACjBmC,CACR,CACA,IAAK,eACJ,OAAO3I,EAAM55B,IAAK,KACf,IAAID,KAAMK,IAAK,GAAIw5B,EAAMz5B,IAAK,KAC9By5B,EAGL,OAAOA,CACR,EAmGCoP,eA1EM,SAAyBpP,EAAQ,IAAI75B,IAAOkhC,GAClD,OAASA,EAAOzsB,MACf,IAAK,qBACJ,OAAO,IAAIzU,IAAK65B,GAAQx5B,IAAK6gC,EAAO9jB,GAAI8jB,EAAOt/B,OAChD,IAAK,wBAAyB,CAC7B,MAAM4gC,EAAW,IAAIxiC,IAAK65B,GAE1B,OADA2I,EAAShiC,OAAQ0gC,EAAO9jB,IACjBolB,CACR,EAED,OAAO3I,CACR,EAgECqP,kBArkBD,SAA4BrP,GAAQ,EAAOqH,GAC1C,OAASA,EAAOzsB,MACf,IAAK,+BACJ,MAAM,UAAE4sB,EAAS,eAAE8H,EAAc,QAAE9pB,GAAY6hB,EAC/C,MAAO,CACNG,YACA8H,iBACA9pB,WAEF,IAAK,6BACJ,OAAO,EAGT,OAAOwa,CACR,EAwjBCuP,kBAtiBD,SAA4BvP,GAAQ,EAAOqH,GAC1C,MACM,4BADGA,EAAOzsB,KAEPysB,EAAO3tB,MAGTsmB,CACR,EAgiBCwP,wBA5FM,SAAkCxP,EAAQ,KAAMqH,GACE,IAAAoI,EAAxD,MAAK,mCAAqCpI,EAAOzsB,KACzB,QAAvB60B,EAAOpI,GAAQb,gBAAQ,IAAAiJ,EAAAA,EAAI,KAErBzP,CACR,EAwFC0P,kCAzDM,SAA4C1P,EAAQ,GAAIqH,GAC9D,MACM,qCADGA,EAAOzsB,KAEP,IAAKolB,EAAOqH,EAAOsI,UAGrB3P,CACR,IA0GA,EArDA,SAAmCyI,GAClC,MAAO,CAAEzI,EAAOqH,KACf,MAAM0C,EAAYtB,EAASzI,EAAOqH,GAElC,OAAOrH,GAKP+J,EAAU6F,sBAAwB5P,EAAM4P,sBAEnB,0BAAhBvI,EAAOzsB,KACJ,IACHmvB,EACH6F,sBAAuB,WAKR,gCAAhBvI,EAAOzsB,MACyB,YAAhColB,EAAM4P,sBAEC,IACH7F,EACH6F,sBAAuB,SAOxB7F,EAAUzD,SAAWtG,EAAMsG,QAC3ByD,EAAUsC,YAAcrM,EAAMqM,WAOM,UAApCtC,EAAU6F,uBACV7F,EAAUsC,YAAcrM,EAAMqM,UANvBtC,EAYD,IACHA,EACH6F,2BAAuB7hC,IA3ChBg8B,CA4CP,CAEH,CAEA,CAAyCiC,GClkEzC,IAAI6D,EAAW,CAAC,EAWhB,SAASrR,EAAQ/3B,GAChB,MAAO,CAACA,EACT,CAwCA,SAASqpC,EAAe5/B,EAAGC,EAAGk7B,GAC7B,IAAI//B,EAEJ,GAAI4E,EAAEnF,SAAWoF,EAAEpF,OAClB,OAAO,EAGR,IAAKO,EAAI+/B,EAAW//B,EAAI4E,EAAEnF,OAAQO,IACjC,GAAI4E,EAAE5E,KAAO6E,EAAE7E,GACd,OAAO,EAIT,OAAO,CACR,CAgBe,SAAS,EAACqO,EAAUo2B,GAElC,IAAIC,EAGAC,EAA0BF,GAAgCvR,EA+D9D,SAAS0R,IACRF,EAAY,IAAIG,OACjB,CAaA,SAASC,IACR,IACCva,EACAhsB,EACAyB,EACAsZ,EACAyrB,EALGC,EAAM/kC,UAAUR,OASpB,IADA6Z,EAAO,IAAIha,MAAM0lC,GACZhlC,EAAI,EAAGA,EAAIglC,EAAKhlC,IACpBsZ,EAAKtZ,GAAKC,UAAUD,GAqBrB,IAjBAuqB,EAzED,SAAkBwa,GACjB,IAEC/kC,EACA2Z,EACA/e,EACA2vB,EA3FmBpvB,EAsFhB8pC,EAASP,EACZQ,GAAuB,EAMxB,IAAKllC,EAAI,EAAGA,EAAI+kC,EAAWtlC,OAAQO,IAAK,CAIvC,KAjGmB7E,EA8FnBwe,EAAYorB,EAAW/kC,KA7FP,iBAAoB7E,EAgGN,CAC7B+pC,GAAuB,EACvB,KACD,CAGID,EAAOnqC,IAAI6e,GAEdsrB,EAASA,EAAOhqC,IAAI0e,IAGpB/e,EAAM,IAAIiqC,QACVI,EAAO/pC,IAAIye,EAAW/e,GACtBqqC,EAASrqC,EAEX,CAUA,OANKqqC,EAAOnqC,IAAIypC,MACfha,EA5GH,WAEC,IAAIA,EAAQ,CACXqa,MAAO,WACNra,EAAM4a,KAAO,IACd,GAGD,OAAO5a,CACR,CAmGW6a,IACFF,qBAAuBA,EAC7BD,EAAO/pC,IAAIqpC,EAAUha,IAGf0a,EAAOhqC,IAAIspC,EACnB,CAmCSc,CADRN,EAAaJ,EAAwBrkC,MAAM,KAAMgZ,IAM5CiR,EAAM2a,uBAET3a,EAAM+a,iBACLd,EAAeO,EAAYxa,EAAM+a,eAAgB,IAElD/a,EAAMqa,QAGPra,EAAM+a,eAAiBP,GAGxBxmC,EAAOgsB,EAAM4a,KACN5mC,GAAM,CAEZ,GAAKimC,EAAejmC,EAAK+a,KAAMA,EAAM,GAsBrC,OAdI/a,IAASgsB,EAAM4a,OAEQ5mC,EAAS,KAAE6V,KAAO7V,EAAK6V,KAC7C7V,EAAK6V,OACR7V,EAAK6V,KAAKE,KAAO/V,EAAK+V,MAGvB/V,EAAK6V,KAAOmW,EAAM4a,KAClB5mC,EAAK+V,KAAO,KACciW,EAAU,KAAEjW,KAAO/V,EAC7CgsB,EAAM4a,KAAO5mC,GAIPA,EAAKgnC,IArBXhnC,EAAOA,EAAK6V,IAsBd,CAwBA,OApBA7V,EAAgC,CAE/BgnC,IAAKl3B,EAAS/N,MAAM,KAAMgZ,IAI3BA,EAAK,GAAK,KACV/a,EAAK+a,KAAOA,EAMRiR,EAAM4a,OACT5a,EAAM4a,KAAK7wB,KAAO/V,EAClBA,EAAK6V,KAAOmW,EAAM4a,MAGnB5a,EAAM4a,KAAO5mC,EAENA,EAAKgnC,GACb,CAMA,OAJAT,EAAaL,cAAgBE,EAC7BG,EAAaF,MAAQA,EACrBA,IAE2C,CAC5C,CCvSA,MAAM,EAA+BloC,OAAW,GAAc,WCW9D,GALCoJ,EAAAA,EAAAA,eAAC0/B,EAAAA,IAAG,CAACC,MAAM,6BAA6BC,QAAQ,cAC/C5/B,EAAAA,EAAAA,eAAC6/B,EAAAA,KAAI,CAAC7R,EAAE,gVCPJ,EAA+Bp3B,OAAW,GAAY,SCA/CkpC,EAAyB7oB,OAAQ,0BACjC8oB,EAA0B9oB,OAAQ,wBCDzC,EAA+BrgB,OAAW,GAAe,aCKlD,KAAEopC,GAAI,OAAEC,KACpBC,EAAAA,EAAAA,kDACC,kHACA,2BCRWC,GAAa,oBCObC,GAAiBA,CAAE9iB,EAAM+iB,EAAMC,EAAgB,OACtC,kBAAThjB,EACJA,EAEH9jB,MAAMc,QAASgjB,MAIdA,EAAKxK,SAAU,sBAAkC,OAATutB,IAGtC/iB,EAAKxK,SAAUutB,GAEhBC,EAGKC,GAA0BA,CAAErL,EAAQ5B,KAChD,GAAkC,kBAAtBA,EACX,OAAOA,EAGR,MAAMkN,EAAc,IAAKtL,GACzB,KAAQsL,EAAY7mC,OAAS,GAAI,CAChC,MAAM+uB,EAAQ8X,EAAYrc,QAO1B,IALkBic,GACjB9M,EACA5K,EAAM/yB,MAAQ+yB,EAAMiU,WACpB,GAGA,OAAO,EAGRjU,EAAM2M,aAAat+B,SAAW0pC,IAC7BD,EAAYlrC,KAAMmrC,EAAY,GAEhC,CAEA,OAAO,CAAI,EAGCC,GAA6B9D,GAAchO,GAChD,CACNA,EAAMmN,SAAShI,4BACfnF,EAAMmN,SAAS4E,oCACf/R,EAAMmN,SAAS6E,6BACfhS,EAAMmN,SAAU+D,KAA4BlD,GAC5ChO,EAAMiS,cACNZ,GAAQrD,EAAQuD,KAAeW,qBAI1B,SAASC,GAA8BnS,EAAOuG,GACpD,MAAO,CACNvG,EAAMiN,kBAAmB1G,GACzBvG,EAAMsG,OAAOwB,WAAWvhC,IAAKggC,GAC7BvG,EAAMmN,SAASzI,kBACf1E,EAAMmN,SAASiF,aACfpS,EAAMmP,kBAER,CCjBO,SAASkD,GAASC,EAAOC,EAAO7L,EAAQ,OAC9C,OAAO4L,EAAMxc,SAAS0c,KA5CJhjC,EAAE+iC,EAAOD,EAAO5L,IAC3B,CAAEx2B,EAAGC,KACX,IAAIsiC,EAAMC,EAUV,GARsB,mBAAVH,GACXE,EAAOF,EAAOriC,GACdwiC,EAAOH,EAAOpiC,KAEdsiC,EAAOviC,EAAGqiC,GACVG,EAAOviC,EAAGoiC,IAGNE,EAAOC,EACX,MAAiB,QAAVhM,EAAkB,GAAK,EACxB,GAAKgM,EAAOD,EAClB,MAAiB,QAAV/L,GAAmB,EAAI,EAG/B,MAAMiM,EAASL,EAAMM,WAAanB,GAAUA,IAASvhC,IAC/C2iC,EAASP,EAAMM,WAAanB,GAAUA,IAASthC,IAGrD,OAAKwiC,EAASE,EACN,EACIA,EAASF,GACZ,EAGF,CAAC,EAgBmBnjC,CAAY+iC,EAAOD,EAAO5L,GACvD,CCHA,MAaMoM,GAAc,GAWdC,GAAY,IAAIxiC,IAWf,SAASyiC,GAAchT,EAAOwG,GACpC,MAAM1M,EAAQkG,EAAMsG,OAAOwB,WAAWvhC,IAAKigC,GACrCyM,EAAiB,mBAEvB,GAAqB,QAAhBC,EAAAA,SAASC,IAAgBrZ,GAAO/yB,OAASksC,EAAiB,CAC9D,MAAMhM,EAAajH,EAAMsG,OAAOW,WAAW1gC,IAAKigC,IAC1C,QAAE4M,GAAYnM,QAAAA,EAAc,CAAC,EAEnC,OAAOmM,EAAW,GAAGH,KAAoBG,IAAaH,CACvD,CACA,OAAOnZ,EAAQA,EAAM/yB,KAAO,IAC7B,CAUO,SAASssC,GAAcrT,EAAOwG,GACpC,MAAM1M,EAAQkG,EAAMsG,OAAOwB,WAAWvhC,IAAKigC,GAC3C,QAAU1M,GAASA,EAAM6T,OAC1B,CAWO,SAAS2F,GAAoBtT,EAAOwG,GAE1C,OADcxG,EAAMsG,OAAOwB,WAAWvhC,IAAKigC,GAKpCxG,EAAMsG,OAAOW,WAAW1gC,IAAKigC,GAH5B,IAIT,CAuBO,SAAS+M,GAAUvT,EAAOwG,GAChC,OAAOxG,EAAMsG,OAAOwB,WAAW1hC,IAAKogC,GAI7BxG,EAAMsG,OAAOsB,KAAKrhC,IAAKigC,GAHtB,IAIT,CAEO,MAAMgN,GAAuCC,GACnD,CAAEzT,EAAOwG,KACR,MAAM1M,EAAQkG,EAAMsG,OAAOwB,WAAWvhC,IAAKigC,GAC3C,OAAO1M,EAIA,IACHA,EACHmN,WAAYqM,GAAoBtT,EAAOwG,IALhC,IAMP,IAEF,CAAExG,EAAOwG,IAAc,CACtBxG,EAAMsG,OAAOwB,WAAWvhC,IAAKigC,GAC7BxG,EAAMsG,OAAOW,WAAW1gC,IAAKigC,MAcxB,SAASkN,GAAW1T,EAAOuG,GACjC,MAAMoN,EACHpN,GAAkBqN,GAA0B5T,EAAOuG,GAElD,eAAiBA,EADjBA,GAAgB,GAEpB,OAAOvG,EAAMsG,OAAOsB,KAAKrhC,IAAKotC,IAAWlN,aAAeqM,EACzD,CAaO,MAAMe,GAAyCJ,GACrD,CAAEzT,EAAOwG,KACRsN,IACC,+EACA,CACCC,MAAO,MACPxlB,QAAS,QAGJ,CACNiY,WACAC,YAAauN,GAA4BhU,EAAOwG,OAGhDxG,GAAW,CAAEA,EAAMsG,OAAOI,SAehBsN,GAA6BP,GACzC,CAAEzT,EAAOuG,EAAe,MACvBuN,IACC,mEACA,CACCC,MAAO,MACPxlB,QAAS,QAGJ0lB,GAAejU,EAAOuG,GAAergC,KAAOsgC,GAClDqN,GAAwC7T,EAAOwG,QAG/CxG,GAAW,CAAEA,EAAMsG,OAAOI,SAahBwN,GAA4BT,GACxC,CAAEzT,EAAOmU,KACRA,EAAUvpC,MAAMc,QAASyoC,GAAY,IAAKA,GAAY,CAAEA,GACxD,MAAMC,EAAM,GAGZ,IAAM,MAAMC,KAAUF,EAAU,CAC/B,MAAMzN,EAAQ1G,EAAMsG,OAAOI,MAAMngC,IAAK8tC,GACjC3N,GACJ0N,EAAI1tC,QAASggC,EAEf,CAEA,IAAI9/B,EAAQ,EAGZ,KAAQA,EAAQwtC,EAAIrpC,QAAS,CAC5B,MAAMwY,EAAK6wB,EAAKxtC,GACV8/B,EAAQ1G,EAAMsG,OAAOI,MAAMngC,IAAKgd,GACjCmjB,GACJ0N,EAAIvtC,OAAQD,EAAQ,EAAG,KAAM8/B,GAE9B9/B,GACD,CAEA,OAAOwtC,CAAG,IAETpU,GAAW,CAAEA,EAAMsG,OAAOI,SAYhB4N,GAAgCtU,GAC5CkU,GAA2BlU,EAAO,IAWtBuU,GAAsBd,GAClC,CAAEzT,EAAO+N,KACR,MAAMvG,EAAY8M,GAA6BtU,GAC/C,IAAO+N,EACN,OAAOvG,EAAUz8B,OAElB,IAAIoC,EAAQ,EACZ,IAAM,MAAMq5B,KAAYgB,EACTxH,EAAMsG,OAAOwB,WAAWvhC,IAAKigC,GAChCz/B,OAASgnC,GACnB5gC,IAGF,OAAOA,CAAK,IAEX6yB,GAAW,CAAEA,EAAMsG,OAAOI,MAAO1G,EAAMsG,OAAOwB,cAWpC0M,GAAkBf,GAC9B,CAAEzT,EAAO+N,KACR,IAAOA,EACN,OAAO+E,GAER,MAAM2B,EAAa7pC,MAAMc,QAASqiC,GAC/BA,EACA,CAAEA,GAEC2G,EADYJ,GAA6BtU,GACjBpmB,QAAU4sB,IACvC,MAAM1M,EAAQkG,EAAMsG,OAAOwB,WAAWvhC,IAAKigC,GAC3C,OAAOiO,EAAWvwB,SAAU4V,EAAM/yB,KAAM,IAEzC,OAAO2tC,EAAY3pC,OAAS,EAAI2pC,EAAc5B,EAAW,IAExD9S,GAAW,CAAEA,EAAMsG,OAAOI,MAAO1G,EAAMsG,OAAOwB,cAa1C,SAAS6M,GAAqC3U,EAAO+N,GAQ3D,OAPA+F,IACC,4EACA,CACCC,MAAO,MACPa,YAAc,0DAGTJ,GAAiBxU,EAAO+N,EAChC,CAWO,MAAM8G,GAAsBpB,GAClC,CAAEzT,EAAOwH,KACN58B,MAAMc,QAAS87B,GAAcA,EAAY,CAAEA,IAActhC,KACxDsgC,GAAc+M,GAAUvT,EAAOwG,OAEnC,CAAExG,EAAOwH,KACN58B,MAAMc,QAAS87B,GAAcA,EAAY,CAAEA,IAActhC,KACxDsgC,GAAcxG,EAAMsG,OAAOsB,KAAKrhC,IAAKigC,OAa7BsO,GAA0BrB,GACtC,CAAEzT,EAAOwH,IACRqN,GAAqB7U,EAAOwH,GAC1B5tB,OAAQ2O,SACRriB,KAAO4zB,GAAWA,EAAM/yB,SAC3B,CAAEi5B,EAAOwH,IAAeqN,GAAqB7U,EAAOwH,KAW9C,SAASuN,GAAe/U,EAAOuG,GACrC,OAAO0N,GAAejU,EAAOuG,GAAex7B,MAC7C,CAUO,SAASiqC,GAAmBhV,GAClC,OAAOA,EAAMqM,UAAUC,cACxB,CAUO,SAAS2I,GAAiBjV,GAChC,OAAOA,EAAMqM,UAAUI,YACxB,CAWO,SAASyI,GAAwBlV,GACvC,OAAOA,EAAMqM,UAAUC,eAAe9F,QACvC,CAWO,SAAS2O,GAAsBnV,GACrC,OAAOA,EAAMqM,UAAUI,aAAajG,QACrC,CASO,SAAS4O,GAAuBpV,GAItC,OAFCqV,GAAgCrV,GAAQj1B,SAMlCi1B,EAAMqM,UAAUC,eAAe9F,SAAW,EAAI,EACtD,CASO,SAAS8O,GAAkBtV,GACjC,MAAM,eAAEsM,EAAc,aAAEG,GAAiBzM,EAAMqM,UAC/C,QACIC,EAAe9F,UAClB8F,EAAe9F,WAAaiG,EAAajG,QAE3C,CAUO,SAAS+O,GAA0BvV,GACzC,MAAM,eAAEsM,EAAc,aAAEG,GAAiBzM,EAAMqM,WACzC,SAAE7F,GAAa8F,EAErB,OAAO9F,GAAYA,IAAaiG,EAAajG,SAItCA,EAHC,IAIT,CASO,SAASgP,GAAkBxV,GACjC,MAAMwG,EAAW+O,GAA0BvV,GAC3C,OAAOwG,EAAW+M,GAAUvT,EAAOwG,GAAa,IACjD,CAYO,SAASiP,GAAsBzV,EAAOwG,GAAW,IAAAkP,EACvD,OAA2C,QAA3CA,EAAO1V,EAAMsG,OAAO+B,QAAQ9hC,IAAKigC,UAAU,IAAAkP,EAAAA,EAAI,IAChD,CAWO,MAAMC,GAAkBlC,GAC9B,CAAEzT,EAAOwG,EAAUoP,GAAY,KAC9B,MAAMvN,EAAU,GAChB,IAAIxZ,EAAU2X,EACd,KAAU3X,EAAUmR,EAAMsG,OAAO+B,QAAQ9hC,IAAKsoB,IAC7CwZ,EAAQ3hC,KAAMmoB,GAGf,OAAOwZ,EAAQt9B,OAIR6qC,EAAYvN,EAAUA,EAAQjlB,UAH7B0vB,EAGsC,IAE7C9S,GAAW,CAAEA,EAAMsG,OAAO+B,WAiBhBwN,GAA6BpC,GACzC,CAAEzT,EAAOwG,EAAUuH,EAAW6H,GAAY,KACzC,MAAMvN,EAAUsN,GAAiB3V,EAAOwG,EAAUoP,GAC5CE,EAAUlrC,MAAMc,QAASqiC,GAC1BhnC,GAAUgnC,EAAU7pB,SAAUnd,GAC9BA,GAAUgnC,IAAchnC,EAC7B,OAAOshC,EAAQzuB,QAAU2J,GAAQuyB,EAAS9C,GAAchT,EAAOzc,KAAQ,IAEtEyc,GAAW,CAAEA,EAAMsG,OAAO+B,WAUtB,SAAS0N,GAA+B/V,EAAOwG,GACrD,IACI9rB,EADAmU,EAAU2X,EAEd,GACC9rB,EAASmU,EACTA,EAAUmR,EAAMsG,OAAO+B,QAAQ9hC,IAAKsoB,SAC3BA,GACV,OAAOnU,CACR,CAUO,SAASs7B,GAA0ChW,EAAOwG,GAChE,MAAMyP,EAAaV,GAA0BvV,GACvCkW,EAAgB,IAAKP,GAAiB3V,EAAOwG,GAAYA,GACzD2P,EAAkB,IACpBR,GAAiB3V,EAAOiW,GAC3BA,GAGD,IAAIG,EAEJ,MAAMC,EAAWnsC,KAAKqc,IAAK2vB,EAAcnrC,OAAQorC,EAAgBprC,QACjE,IAAM,IAAInE,EAAQ,EAAGA,EAAQyvC,GACvBH,EAAetvC,KAAYuvC,EAAiBvvC,GADXA,IAErCwvC,EAAuBF,EAAetvC,GAMxC,OAAOwvC,CACR,CAgBO,SAASE,GAA0BtW,EAAO2M,EAAe4J,EAAW,GAgB1E,QAduBxoC,IAAlB4+B,IACJA,EAAgB4I,GAA0BvV,SAIpBjyB,IAAlB4+B,IAEHA,EADI4J,EAAW,EACCC,GAAoCxW,GAEpCyW,GAAmCzW,KAK9C2M,EACN,OAAO,KAKR,MAAMpG,EAAekP,GAAsBzV,EAAO2M,GAClD,GAAsB,OAAjBpG,EACJ,OAAO,KAGR,MAAM,MAAEG,GAAU1G,EAAMsG,OAClBoQ,EAAWhQ,EAAMngC,IAAKggC,GAEtBoQ,EADQD,EAASpwC,QAASqmC,GACN,EAAI4J,EAG9B,OAAKI,EAAY,GAKZA,IAAcD,EAAS3rC,OAJpB,KASD2rC,EAAUC,EAClB,CAaO,SAASC,GAA0B5W,EAAO2M,GAChD,OAAO2J,GAA0BtW,EAAO2M,GAAgB,EACzD,CAaO,SAASkK,GAAsB7W,EAAO2M,GAC5C,OAAO2J,GAA0BtW,EAAO2M,EAAe,EACxD,CAYO,SAASmK,GAAuC9W,GAEtD,OAAOA,EAAM+M,eACd,CASO,MAAMgK,GAA4BtD,GACtCzT,IACD,MAAM,eAAEsM,EAAc,aAAEG,GAAiBzM,EAAMqM,UAE/C,IAAOC,EAAe9F,WAAciG,EAAajG,SAChD,OAAOsM,GAGR,GAAKxG,EAAe9F,WAAaiG,EAAajG,SAC7C,MAAO,CAAE8F,EAAe9F,UAMzB,MAAMD,EAAekP,GACpBzV,EACAsM,EAAe9F,UAGhB,GAAsB,OAAjBD,EACJ,OAAOuM,GAGR,MAAM7H,EAAagJ,GAAejU,EAAOuG,GACnCyQ,EAAa/L,EAAW3kC,QAASgmC,EAAe9F,UAChD3S,EAAWoX,EAAW3kC,QAASmmC,EAAajG,UAElD,OAAKwQ,EAAanjB,EACVoX,EAAW/9B,MAAO2mB,EAAUmjB,EAAa,GAG1C/L,EAAW/9B,MAAO8pC,EAAYnjB,EAAW,EAAG,IAElDmM,GAAW,CACZA,EAAMsG,OAAOI,MACb1G,EAAMqM,UAAUC,eAAe9F,SAC/BxG,EAAMqM,UAAUI,aAAajG,YAYxB,SAAS6O,GAAgCrV,GAC/C,MAAM,eAAEsM,EAAc,aAAEG,GAAiBzM,EAAMqM,UAE/C,OAAKC,EAAe9F,WAAaiG,EAAajG,SACtCsM,GAGDiE,GAA2B/W,EACnC,CAUO,MAAMiX,GAAyBxD,GACnCzT,IACD,MAAMkX,EACL7B,GAAgCrV,GACjC,OAAOkX,EAA4BnsC,OAI5BmsC,EAA4BhxC,KAAOsgC,GACzC+M,GAAUvT,EAAOwG,KAJVsM,EAKP,IAEA9S,GAAW,IACT+W,GAA0BhH,cAAe/P,GAC5CA,EAAMsG,OAAOwB,WACb9H,EAAMsG,OAAOI,MACb1G,EAAMsG,OAAOW,cAYR,SAASuP,GAAoCxW,GACnD,OAAOqV,GAAgCrV,GAAS,IAAO,IACxD,CAUO,SAASyW,GAAmCzW,GAClD,MAAMmX,EAAoB9B,GAAgCrV,GAC1D,OAAOmX,EAAmBA,EAAkBpsC,OAAS,IAAO,IAC7D,CAYO,SAASqsC,GAA2BpX,EAAOwG,GACjD,OAAOgQ,GAAoCxW,KAAYwG,CACxD,CAWO,SAAS6Q,GAAsBrX,EAAOwG,GAC5C,OAAwE,IAAjE6O,GAAgCrV,GAAQ15B,QAASkgC,EACzD,CAYO,MAAM8Q,GAA0B7D,GACtC,CAAEzT,EAAOwG,KACR,IAAI+Q,EAAmB/Q,EACnBgR,GAAkB,EACtB,KAAQD,IAAsBC,GAC7BD,EAAmB9B,GAAsBzV,EAAOuX,GAChDC,EAAkBH,GAAsBrX,EAAOuX,GAEhD,OAAOC,CAAe,IAErBxX,GAAW,CACZA,EAAMsG,OAAOI,MACb1G,EAAMqM,UAAUC,eAAe9F,SAC/BxG,EAAMqM,UAAUI,aAAajG,YAgBxB,SAASiR,GAAqCzX,GACpD,MAAM,eAAEsM,EAAc,aAAEG,GAAiBzM,EAAMqM,UAE/C,OAAKC,EAAe9F,WAAaiG,EAAajG,SACtC,KAGD8F,EAAe9F,UAAY,IACnC,CAcO,SAASkR,GAAmC1X,GAClD,MAAM,eAAEsM,EAAc,aAAEG,GAAiBzM,EAAMqM,UAE/C,OAAKC,EAAe9F,WAAaiG,EAAajG,SACtC,KAGDiG,EAAajG,UAAY,IACjC,CASO,SAASmR,GAA2B3X,GAC1C,MAAM4X,EAAkB5C,GAAmBhV,GACrC6X,EAAiB5C,GAAiBjV,GACxC,OACG4X,EAAgBrL,eAChBsL,EAAetL,mBACiB,IAA3BqL,EAAgB9uB,aACU,IAA1B+uB,EAAe/uB,MAExB,CASO,SAASgvB,GAAgC9X,GAC/C,MAAM4X,EAAkB5C,GAAmBhV,GACrC6X,EAAiB5C,GAAiBjV,GACxC,QACI4X,KACAC,GACHD,EAAgBpR,WAAaqR,EAAerR,UAC5CoR,EAAgBrL,eAAiBsL,EAAetL,cAChDqL,EAAgB9uB,SAAW+uB,EAAe/uB,MAE5C,CAEO,SAASivB,GAAwC/X,GACvD,OAAO+W,GAA2B/W,GAAQ5lB,MAAQosB,IACjD,MAAMuH,EAAYiF,GAAchT,EAAOwG,GAEvC,QADkBwR,EAAAA,EAAAA,cAAcjK,GACbkK,KAAK,GAE1B,CAUO,SAASC,GAAgClY,EAAOmY,GACtD,MAAMP,EAAkB5C,GAAmBhV,GACrC6X,EAAiB5C,GAAiBjV,GAGxC,GAAK4X,EAAgBpR,WAAaqR,EAAerR,SAAW,OAAO,EAGnE,IACGoR,EAAgBrL,eAChBsL,EAAetL,mBACiB,IAA3BqL,EAAgB9uB,aACU,IAA1B+uB,EAAe/uB,OAEtB,OAAO,EAER,MAAMsvB,EAAqB3C,GAC1BzV,EACA4X,EAAgBpR,UASjB,GAAK4R,IAPqB3C,GACzBzV,EACA6X,EAAerR,UAMf,OAAO,EAGR,MAAMyE,EAAagJ,GAAejU,EAAOoY,GAKzC,IAAI9L,EAAgBG,EAJAxB,EAAW3kC,QAASsxC,EAAgBpR,UACrCyE,EAAW3kC,QAASuxC,EAAerR,WAMrD8F,EAAiBuL,EACjBpL,EAAemL,IAEftL,EAAiBsL,EACjBnL,EAAeoL,GAGhB,MAAMQ,EAAsBF,EACzB1L,EAAajG,SACb8F,EAAe9F,SACZ8R,EAAuBH,EAC1B7L,EAAe9F,SACfiG,EAAajG,SAEV+R,EAAkBvF,GAAchT,EAAOqY,GAG7C,KAFwBL,EAAAA,EAAAA,cAAcO,GAEfN,MAAQ,OAAO,EAEtC,MAAMO,EAAejF,GAAUvT,EAAOsY,GAGtC,GAAKE,EAAazxC,OAASwxC,EAAkB,OAAO,EAIpD,MAAME,GAAgBC,EAAAA,EAAAA,mBAAmBF,EAAcD,GAEvD,OAAOE,GAAiBA,EAAc1tC,MACvC,CAUO,MAAM4tC,GAAoD3Y,IAChE,MAAM4X,EAAkB5C,GAAmBhV,GACrC6X,EAAiB5C,GAAiBjV,GAExC,GAAK4X,EAAgBpR,WAAaqR,EAAerR,SAChD,OAAOsM,GAIR,IACG8E,EAAgBrL,eAChBsL,EAAetL,mBACiB,IAA3BqL,EAAgB9uB,aACU,IAA1B+uB,EAAe/uB,OAEtB,OAAOgqB,GAGR,MAAMsF,EAAqB3C,GAC1BzV,EACA4X,EAAgBpR,UASjB,GAAK4R,IAPqB3C,GACzBzV,EACA6X,EAAerR,UAMf,OAAOsM,GAGR,MAAM7H,EAAagJ,GAAejU,EAAOoY,GACnCQ,EAAc3N,EAAW3kC,QAASsxC,EAAgBpR,UAClDqS,EAAa5N,EAAW3kC,QAASuxC,EAAerR,WAG9C8F,EAAgBG,GACvBmM,EAAcC,EACX,CAAEhB,EAAgBD,GAClB,CAAEA,EAAiBC,GAEjBiB,EAASvF,GAAUvT,EAAOsM,EAAe9F,UACzCuS,EAASxF,GAAUvT,EAAOyM,EAAajG,UAEvCwS,EAAQF,EAAO7R,WAAYqF,EAAeC,cAC1C0M,EAAQF,EAAO9R,WAAYwF,EAAaF,cAE9C,IAAI2M,GAASliC,EAAAA,EAAAA,QAAQ,CAAEmiC,KAAMH,IACzBI,GAASpiC,EAAAA,EAAAA,QAAQ,CAAEmiC,KAAMF,IAK7B,OAHAC,GAASrmB,EAAAA,EAAAA,QAAQqmB,EAAQ,EAAG5M,EAAexjB,QAC3CswB,GAASvmB,EAAAA,EAAAA,QAAQumB,EAAQ3M,EAAa3jB,OAAQswB,EAAO50B,KAAKzZ,QAEnD,CACN,IACI+tC,EACH7R,WAAY,IACR6R,EAAO7R,WACV,CAAEqF,EAAeC,eAAgB8M,EAAAA,EAAAA,cAAc,CAC9C5yC,MAAOyyC,MAIV,IACIH,EACH9R,WAAY,IACR8R,EAAO9R,WACV,CAAEwF,EAAaF,eAAgB8M,EAAAA,EAAAA,cAAc,CAC5C5yC,MAAO2yC,MAIV,EAaK,SAASnF,GAAejU,EAAOuG,GACrC,OAAOvG,EAAMsG,OAAOI,MAAMngC,IAAKggC,GAAgB,KAAQuM,EACxD,CAWO,SAASwG,GAAetZ,EAAOwG,GAErC,OAAOyN,GAAejU,EADDyV,GAAsBzV,EAAOwG,IACNlgC,QAASkgC,EACtD,CAWO,SAAS+S,GAAiBvZ,EAAOwG,GACvC,MAAM,eAAE8F,EAAc,aAAEG,GAAiBzM,EAAMqM,UAE/C,OAAKC,EAAe9F,WAAaiG,EAAajG,UAIvC8F,EAAe9F,WAAaA,CACpC,CAWO,SAASgT,GAAuBxZ,EAAOwG,EAAUiT,GAAO,GAC9D,MAAMC,EAAyB3C,GAA2B/W,GAE1D,QAAO0Z,EAAuB3uC,SAIzB0uC,EACGC,EAAuBt/B,MAAQmJ,GAGrCoyB,GAAiB3V,EAAOzc,GAAI,GAAOW,SAAUsiB,KAIxCkT,EAAuBt/B,MAC3BmJ,GAAQkyB,GAAsBzV,EAAOzc,KAASijB,IAElD,CAWO,SAASmT,GAAsB3Z,EAAOwG,EAAUiT,GAAO,GAC7D,OAAOxF,GAAejU,EAAOwG,GAAWpsB,MACrCw/B,GACDC,GAAqB7Z,EAAO4Z,IAC1BH,GAAQE,GAAsB3Z,EAAO4Z,EAAeH,IAEzD,CAcO,SAASK,GAAwB9Z,EAAOwG,GAC9C,IAAOA,EACN,OAAO,EAGR,MAAMgB,EAAY6N,GAAgCrV,GAC5Cp5B,EAAQ4gC,EAAUlhC,QAASkgC,GACjC,OAAO5/B,GAAS,GAAKA,EAAQ4gC,EAAUz8B,OAAS,CACjD,CASO,SAASgvC,GAAmB/Z,GAClC,MAAM,eAAEsM,EAAc,aAAEG,GAAiBzM,EAAMqM,UAC/C,OAAOC,EAAe9F,WAAaiG,EAAajG,QACjD,CAaO,SAASqG,GAAkB7M,GACjC,OAAOA,EAAM6M,gBACd,CASO,SAASC,GAAoB9M,GACnC,OAAOA,EAAM8M,kBACd,CAWO,SAASkN,GAAcha,EAAOwG,GACpC,OAAOxG,EAAMgN,WAAYxG,IAAc,QACxC,CASO,SAAS0F,GAAUlM,GACzB,OAAOA,EAAMkM,QACd,CASO,SAAS+N,GAAkBja,GACjC,QAAUA,EAAMoM,cAAcrhC,MAC/B,CAWO,SAASmvC,GAA0Bla,GACzC,OAAOA,EAAMoM,aACd,CAcO,SAASyN,GAAqB7Z,EAAOwG,GAC3C,OAAOxG,EAAMoM,cAAcloB,SAAUsiB,EACtC,CAUO,SAAS2T,GAAwBna,EAAOwG,GAG9C,QAAOyT,GAAkBja,IAIT2V,GAAiB3V,EAAOwG,GACzBpsB,MAAQggC,GACtBP,GAAqB7Z,EAAOoa,IAE9B,CASO,SAASC,KASf,OARAvG,IACC,mEACA,CACCC,MAAO,MACPxlB,QAAS,SAIJ,CACR,CAUO,MAAM+rB,GAAyB7G,GACnCzT,IACD,IAAIuG,EAAc3/B,EAElB,MAAM,eACL0mC,EACAjB,WAAW,aAAEI,IACVzM,EACJ,GAAwB,OAAnBsN,EACJ,OAAOA,EAGR,MAAM,SAAE9G,GAAaiG,EASrB,OAPKjG,GACJD,EAAekP,GAAsBzV,EAAOwG,SAAcz4B,EAC1DnH,EAAQ0yC,GAAetZ,EAAOyM,EAAajG,UAAa,GAExD5/B,EAAQqtC,GAAejU,GAAQj1B,OAGzB,CAAEw7B,eAAc3/B,QAAO,IAE7Bo5B,GAAW,CACZA,EAAMsN,eACNtN,EAAMqM,UAAUI,aAAajG,SAC7BxG,EAAMsG,OAAO+B,QACbrI,EAAMsG,OAAOI,SAWR,SAAS6T,GAA8Bva,GAC7C,OAAgC,OAAzBA,EAAMsN,cACd,CAQO,SAASkN,GAAiBxa,GAChC,OAAOA,EAAM0N,SAASC,OACvB,CASO,SAAS8M,GAAaza,GAC5B,OAAOA,EAAMmN,SAASO,QACvB,CAWO,SAASgN,GAAiB1a,EAAOuG,GAAe,IAAAoU,EAChCC,EAAtB,OAAOrU,EAIyD,QAAhEoU,EAAOE,GAAsB7a,EAAOuG,IAAgB6L,oBAAY,IAAAuI,GAAAA,EAH7B,QAAlCC,EAAO5a,EAAMmN,SAASiF,oBAAY,IAAAwI,GAAAA,CAIpC,CAeA,MAAME,GAA+BA,CACpC9a,EACA+N,EACAxH,EAAe,QAEf,IAAIwU,EAOJ,GANKhN,GAAa,iBAAoBA,GACrCgN,EAAYhN,EACZA,EAAYgN,EAAUh0C,MAEtBg0C,GAAY/C,EAAAA,EAAAA,cAAcjK,IAEpBgN,EACN,OAAO,EAGR,MAAM,kBAAErW,GAAsBsW,GAAahb,GAO3C,IAL+BwR,GAC9B9M,EACAqJ,GACA,GAGA,OAAO,EAIR,GADoB2M,GAAiB1a,EAAOuG,GAE3C,OAAO,EAGR,GAA0D,aAArD0U,GAAqBjb,EAAOuG,QAAAA,EAAgB,IAChD,OAAO,EAGR,MAAM2U,EAA0BL,GAAsB7a,EAAOuG,GAI7D,GAAKA,QAA4Cx4B,IAA5BmtC,EACpB,OAAO,EAGR,MAAMC,EAAanI,GAAchT,EAAOuG,GAClC6U,GAAkBpD,EAAAA,EAAAA,cAAcmD,GAGhCE,EAA2BD,GAAiBE,cAClD,IAAIC,EAAwB/J,GAC3B6J,EACAtN,GAID,IAA+B,IAA1BwN,EAAkC,CACtC,MAAMC,EAAsBN,GAAyBI,cAC/CG,EAA4BjK,GACjCgK,EACAzN,GAGkC,OAA9B0N,IACJF,EAAwBE,EAE1B,CAEA,MAAMC,EAA2BX,EAAUrgC,OACrCihC,EAAwBnK,GAC7BkK,EACAP,GAGD,IAAIS,GAA0B,EAC9B,MAAMC,EAA6Bd,EAAUe,SACxCD,IAMJD,EALkB,CACjBrV,KACGoP,GAAiB3V,EAAOuG,IAGQnsB,MAAQm9B,GAC3C/F,GACCqK,EACA7I,GAAchT,EAAOuX,OAKxB,MAAMwE,EACLH,IAC8B,OAA1BL,GACuB,OAA1BI,IAC0B,IAA1BJ,IAC0B,IAA1BI,GAEF,OAAOI,GAgBAC,EAAAA,EAAAA,cACN,2CACAD,EACAhB,EACAxU,EACA,CAICgN,SAAUA,GAASnrC,KAAM,KAAM43B,GAC/B6V,2BAA4BA,GAA2BztC,KACtD,KACA43B,KA3BK+b,CA8BP,EAYWE,GAAqBxI,EACjCqH,IACA,CAAE9a,EAAO+N,EAAWxH,IACnB4L,GAA8BnS,EAAOuG,KAahC,SAAS2V,GAAiBlc,EAAOwH,EAAWjB,EAAe,MACjE,OAAOiB,EAAUpjB,OAASb,GACzB04B,GAAoBjc,EAAOgT,GAAchT,EAAOzc,GAAMgjB,IAExD,CAWO,SAAS4V,GAAgBnc,EAAOwG,EAAUD,EAAe,MAC/D,MAAMU,EAAaqM,GAAoBtT,EAAOwG,GAC9C,OAAoB,OAAfS,SAG4Bl5B,IAA5Bk5B,EAAWmK,MAAMve,QACZoU,EAAWmK,KAAKve,QAErB6nB,GAAiB1a,EAAOuG,IAIyB,aAA/C0U,GAAqBjb,EAAOuG,GACpC,CAWO,SAAS6V,GAAiBpc,EAAOwH,EAAWjB,EAAe,MACjE,OAAOiB,EAAUpjB,OAASoiB,GACzB2V,GAAgBnc,EAAOwG,EAAUD,IAEnC,CAWO,SAAS8V,GAAcrc,EAAOwG,EAAUD,EAAe,MAC7D,MAAMU,EAAaqM,GAAoBtT,EAAOwG,GAC9C,OAAoB,OAAfS,SAG0Bl5B,IAA1Bk5B,EAAWmK,MAAMkL,MACZrV,EAAWmK,KAAKkL,KAEsB,QAA3C5B,GAAiB1a,EAAOuG,IAIyB,aAA/C0U,GAAqBjb,EAAOuG,GACpC,CAWO,SAASgW,GAAevc,EAAOwH,EAAWjB,EAAe,MAC/D,OAAOiB,EAAUpjB,OAASoiB,GACzB6V,GAAcrc,EAAOwG,EAAUD,IAEjC,CAUO,SAASiW,GAAcxc,EAAOwG,GACpC,MAAMS,EAAaqM,GAAoBtT,EAAOwG,GAC9C,GAAoB,OAAfS,EACJ,OAAO,EAGR,MAAM,KAAEmK,GAASnK,EAGjB,OAASmK,GAAMqL,IAChB,CAUO,SAASC,GAAkB1c,EAAO2c,GACxC,SAAOC,EAAAA,EAAAA,iBAAiBD,EAAY,QAAQ,MAKlC3c,EAAMmN,UAAUtI,aAC3B,CAYA,SAASgY,GAAgB7c,EAAOzc,GAAK,IAAAu5B,EACpC,OAA4C,QAA5CA,EAAO9c,EAAM4N,YAAY7J,cAAexgB,UAAI,IAAAu5B,EAAAA,EAAI,IACjD,CAWA,MAAMC,GAAgCA,CAAE/c,EAAO+a,EAAWxU,OAClDqW,EAAAA,EAAAA,iBAAiB7B,EAAW,YAAY,IAIxCD,GAA8B9a,EAAO+a,EAAUh0C,KAAMw/B,GA6CvDyW,GAAoBA,CAAE7O,EAAMhhC,KACjC,IAAOghC,EACN,OAAOhhC,EAIR,MAAM8vC,EAAWC,KAAKC,MAAQhP,EAC9B,QAAS,GACR,KAAK8O,EAtzDuB,KAuzD3B,OAAe,EAAR9vC,EACR,KAAK8vC,EAvzDsB,MAwzD1B,OAAe,EAAR9vC,EACR,KAAK8vC,EAxzDuB,OAyzD3B,OAAO9vC,EAAQ,EAChB,QACC,OAAOA,EAAQ,EACjB,EAaKiwC,GACLA,CAAEpd,GAASqd,aAAa,cACtBtC,IACD,MAAMx3B,EAAKw3B,EAAUh0C,KAErB,IAAIu2C,GAAa,GACVV,EAAAA,EAAAA,iBAAiB7B,EAAUh0C,KAAM,YAAY,KACnDu2C,EAAazI,GACZ7U,EACAsU,GAA6BtU,IAC5B5lB,MAAM,EAAIrT,UAAYA,IAASg0C,EAAUh0C,QAG5C,MAAM,KAAEonC,EAAI,MAAEhhC,EAAQ,GAAM0vC,GAAgB7c,EAAOzc,IAAQ,CAAC,EACtDg6B,EAAgB,CACrBh6B,KACAxc,KAAMg0C,EAAUh0C,KAChBy2C,MAAOzC,EAAUyC,MACjBC,KAAM1C,EAAU0C,KAChBH,aACAI,SAAUV,GAAmB7O,EAAMhhC,IAEpC,GAAoB,cAAfkwC,EAA6B,OAAOE,EAEzC,MAAMI,GAAqBC,EAAAA,EAAAA,oBAC1B7C,EAAUh0C,KACV,YAED,MAAO,IACHw2C,EACHM,kBAAmB,CAAC,EACpBC,YAAa/C,EAAU+C,YACvBnO,SAAUoL,EAAUpL,SACpBoO,SAAUhD,EAAUgD,SACpBC,WAAYL,EACZM,QAASlD,EAAUkD,QACnBC,QAAS,EACT,EAgCUC,IAAmBC,EAAAA,EAAAA,yBAA0BpQ,GACzDyF,GACC,CAAEzT,EAAOuG,EAAe,QACvB,MA2BM8X,EAA6BvD,GAClC9a,EACA,aACAuG,GAEE8K,GAAQrD,EAAQuD,KACfW,oBACAhsC,KAlCqCo4C,IACxC,MAAMb,EAASa,EAAcC,uBAK1BjgB,EAJA,CACAkgB,IAAKlgB,EACLmgB,WAAY,gCAGTl7B,EAAM,cAAc+6B,EAAc/6B,MAClC,KAAE4qB,EAAI,MAAEhhC,EAAQ,GAAM0vC,GAAgB7c,EAAOzc,IAAQ,CAAC,EACtDm6B,EAAWV,GAAmB7O,EAAMhhC,GAE1C,MAAO,CACNoW,KACAxc,KAAM,aACN82C,kBAAmB,CAAE9c,IAAKud,EAAc/6B,IACxCi6B,MAAOc,EAAcd,OAAOpqB,IAC5BqqB,OACA9N,SAAU,WACVoO,SAAU,CAAE,YACZT,YAAY,EACZY,QAAS,EACTR,WACApxB,QAASgyB,EAAchyB,SAAS8G,IAChCsrB,WAAYJ,EAAcC,uBAC1B,IAWC,GAEGI,EAA6BvB,GAAoBpd,EAAO,CAC7Dqd,WAAY,aAaP/K,GAVyBsM,EAAAA,EAAAA,iBAC7BhlC,QAAUmhC,GACVgC,GACC/c,EACA+a,EACAxU,KAGDrgC,IAAKy4C,GAE8BloB,QACpC,CAAE4X,EAAaoD,KACd,MAAM,WAAEuM,EAAa,IAAOvM,EAK5B,GAHOuM,EAAW5jC,MAAM,EAAIykC,eAAiBA,KAC5CxQ,EAAY3nC,KAAM+qC,GAEduM,EAAWjzC,OAAS,CACxB,MAAM+zC,EAnMiBC,EAAE/e,EAAOyR,IAAYuN,IACjD,MAAMC,EAAe,GAAGxN,EAAKluB,MAAQy7B,EAAUj4C,QACzC,KAAEonC,EAAI,MAAEhhC,EAAQ,GAAM0vC,GAAgB7c,EAAOif,IAAiB,CAAC,EACrE,MAAO,IACHxN,EACHluB,GAAI07B,EACJxB,KAAMuB,EAAUvB,MAAQhM,EAAKgM,KAC7BD,MAAOwB,EAAUxB,OAAS/L,EAAK+L,MAC/BM,YAAakB,EAAUlB,aAAerM,EAAKqM,YAC3CnO,SAAUqP,EAAUrP,UAAY8B,EAAK9B,SAErCsO,QAASe,EAAU7zC,eAAgB,WAChC6zC,EAAUf,QACVxM,EAAKwM,QACRJ,kBAAmB,IACfpM,EAAKoM,qBACLmB,EAAU/X,YAEdR,YAAauY,EAAUvY,YACvBsX,SAAUiB,EAAUjB,UAAYtM,EAAKsM,SACrCL,SAAUV,GAAmB7O,EAAMhhC,GACnC,EA8K4B4xC,CACvB/e,EACAyR,GAEDpD,EAAY3nC,QACRs3C,EAAW93C,IAAK44C,GAErB,CACA,OAAOzQ,CAAW,GAEnB,KAeO6Q,KAAMC,EAAWC,QAASC,GAAiB/M,EAAM7b,QAPrC6oB,CAAEhZ,EAAQxM,KAC7B,MAAM,KAAEolB,EAAI,QAAEE,GAAY9Y,EAI1B,OAHaxM,EAAM/yB,KAAKmT,WAAY,SAAYglC,EAAOE,GAElD14C,KAAMozB,GACJwM,CAAM,GAIb,CAAE4Y,KAAM,GAAIE,QAAS,KAGtB,MAAO,IADuBD,KAAcE,KACXhB,EAA4B,IAE9D,CAAEre,EAAOuG,IAAkB,EAC1BqY,EAAAA,EAAAA,iBACAvN,GAAQrD,EAAQuD,KAAeW,oBAC/BlS,EAAMsG,OAAOI,MACb1G,EAAM4N,YAAY7J,eACfoO,GAA8BnS,EAAOuG,QA+B9BgZ,GAAyB9L,GACrC,CAAEzT,EAAOsG,EAAQC,EAAe,QAC/B,MAAMiZ,EAAmB50C,MAAMc,QAAS46B,GAAWA,EAAS,CAAEA,GACxDmZ,EAA8BrC,GAAoBpd,EAAO,CAC9Dqd,WAAY,cAEPqC,GAA0Bd,EAAAA,EAAAA,iBAC9BhlC,QAAUmhC,GACVgC,GAA+B/c,EAAO+a,EAAWxU,KAEjDrgC,IAAKu5C,GAEDE,EAAcz3C,OAAOglC,YAC1BhlC,OAAOoI,QAASovC,GAA0Bx5C,KAAK,EAAG,CAAGO,KAAa,CACjEA,EAAMM,KACNN,MAIIm5C,GAAqBC,EAAAA,EAAAA,iCAC1BL,GACC/oB,QAAQ,CAAE4X,EAAavU,KACnB6lB,EAAa7lB,GAAO/yB,OACxBsnC,EAAY3nC,KAAMi5C,EAAa7lB,EAAM/yB,OAE/BsnC,IACL,IACH,OAAOgE,GACNuN,GACE9lB,GAAW6lB,EAAa7lB,EAAM/yB,MAAO22C,UACvC,OACA,IAEF,CAAE1d,EAAOsG,EAAQC,IAAkB,EAClCqY,EAAAA,EAAAA,iBACA5e,EAAM4N,YAAY7J,eACfoO,GAA8BnS,EAAOuG,MAY7BuZ,IAAmB1B,EAAAA,EAAAA,yBAC7BpQ,GACD,CAAEhO,EAAOuG,EAAe,UACFqY,EAAAA,EAAAA,iBAAgBxkC,MAAQ2gC,GAC5CgC,GAA+B/c,EAAO+a,EAAWxU,MAMjDuU,GACC9a,EACA,aACAuG,IAED8K,GAAQrD,EAAQuD,KAAeW,oBAAoBnnC,OAAS,IAcnDg1C,IAAmB3B,EAAAA,EAAAA,yBAA0BpQ,GACzDyF,GACC,CAAEzT,EAAOuG,EAAe,QACvB,IAAOA,EACN,OAGD,MAAMyZ,GAAapB,EAAAA,EAAAA,iBAAgBhlC,QAAUmhC,GAC5CgC,GAA+B/c,EAAO+a,EAAWxU,KAelD,OAXCuU,GACC9a,EACA,aACAuG,IAED8K,GAAQrD,EAAQuD,KAAeW,oBAAoBnnC,OAAS,GAG5Di1C,EAAWt5C,KAAM,cAGXs5C,CAAU,IAElB,CAAEhgB,EAAOuG,IAAkB,EAC1BqY,EAAAA,EAAAA,iBACAvN,GAAQrD,EAAQuD,KAAeW,uBAC5BC,GAA8BnS,EAAOuG,QAK9B0Z,GAAiCxM,GAC7C,CAAEzT,EAAOuG,EAAe,QACvBuN,IACC,uEACA,CACCc,YACC,yDACDb,MAAO,MACPxlB,QAAS,QAGJwxB,GAAkB/f,EAAOuG,MAEjC,CAAEvG,EAAOuG,IACRwZ,GAAiBhQ,cAAe/P,EAAOuG,KAgBlC,SAAS2Z,GAAsBlgB,EAAOuG,EAAe,MAAO,IAAA4Z,EAClE,IAAO5Z,EACN,OAED,MAAM,aAAE6Z,EAAY,aAAEC,GACkB,QADJF,EACnCngB,EAAMiN,kBAAmB1G,UAAc,IAAA4Z,EAAAA,EAAI,CAAC,EAC7C,OAAOC,GAAkBC,EAIlBD,OAJP,CAKD,CAEO,SAASE,GACftgB,EACAuG,EAAe,MAWf,OATAuN,IACC,2EACA,CACCc,YACC,6DACDb,MAAO,MACPxlB,QAAS,QAGJ2xB,GAAsBlgB,EAAOuG,EACrC,CAEO,MAAMga,IAAiCnC,EAAAA,EAAAA,yBAC3CpQ,GACDyF,GAAgB,CAAEzT,EAAOwgB,KACxB,MAAM,eAAEC,GAAmBpP,GAAQrD,EAAQuD,KAErCvtB,EADWy8B,IACQC,MACxB,EAAI35C,UAAYA,IAASy5C,IAE1B,IAAOx8B,EACN,OAAO,KAER,MAAMsiB,GAAS/nB,EAAAA,EAAAA,OAAOyF,EAAQsI,QAAS,CACtCq0B,6BAA6B,IAe9B,OAbuB,IAAlBra,EAAOv7B,SACXu7B,EAAQ,GAAIW,WAAa,IACrBX,EAAQ,GAAIW,WACf2Z,SAAU,IACJta,EAAQ,GAAIW,WAAW2Z,UAAY,CAAC,EACzCC,WAAY78B,EAAQ68B,WACpBL,YAAax8B,EAAQjd,KACrBA,KACCu/B,EAAQ,GAAIW,WAAW2Z,UAAU75C,MACjCid,EAAQw5B,SAIL,IACHx5B,EACHsiB,SACA,GACCwL,GAA0B9D,MAGzB8S,GAAiC9S,GAAY,CAAEhO,EAAOuG,IAAkB,IAC1EuL,GAA0B9D,EAA1B8D,CAAoC9R,MACpCmS,GAA8BnS,EAAOuG,IAW5Bwa,IAAmC3C,EAAAA,EAAAA,yBAC7CpQ,GACMyF,GAAgB,CAAEzT,EAAOuG,EAAe,QAC9C,MAAM,eACLka,EACAF,+BAAgCS,GAC7B3P,GAAQrD,EAAQuD,KACd0P,EAAWR,KACX,kBAAE/b,GAAsBsW,GAAahb,GAErCkhB,EAAiBD,EACrBrnC,QAAQ,EAAIunC,YAAW,OAAeA,IACtCj7C,KAAK,EAAIa,UAAYi6C,EAAkBj6C,KACnCq6C,EAA0BF,EAAetnC,QAC9C,EAAI0sB,YACHqL,GAAyBrL,EAAQ5B,KAE7B2c,EAAkBD,EAAwBxnC,QAC/C,EAAI0sB,YACHA,EAAOliB,OAAO,EAAIrd,UACjBk1C,GAAoBjc,EAAOj5B,EAAMw/B,OAIpC,OAAO8a,CAAe,GACpBP,GAA8B9S,MAiBtBsT,IAA0BlD,EAAAA,EAAAA,yBAA0BpQ,GAChEyF,GACC,CAAEzT,EAAOyU,EAAYlO,EAAe,QACnC,IAAOkO,EAAa,OAAO3B,GAC3B,MAAMmO,EACLjT,EAAQuD,IAAawP,iCACpBxa,GAEIgb,EAAuB32C,MAAMc,QAAS+oC,GACzCA,EACA,CAAEA,GACC+M,EAAmBP,EAASrnC,QAAUoK,GAC3CA,GAASg8B,YAAY5lC,QAAU2zB,GAC9BwT,EAAqBr9B,SAAU6pB,OAGjC,OAAiC,IAA5ByT,EAAiBz2C,OACd+nC,GAED0O,CAAgB,IAExB,CAAExhB,EAAOyU,EAAYlO,IACpBua,GAA8B9S,EAA9B8S,CAAwC9gB,EAAOuG,OAIrCkb,IAAwCrD,EAAAA,EAAAA,yBAClDpQ,IACD8F,IACC,8EACA,CACCc,YACC,gEACDb,MAAO,MACPxlB,QAAS,QAGJyf,EAAQuD,IAAa+P,2BAqBjBI,IAAyCtD,EAAAA,EAAAA,yBACnDpQ,GACDyF,GACC,CAAEzT,EAAOsG,EAAQC,EAAe,QAC/B,IAAOD,EAAS,OAAOwM,GAQvB,GACCxM,EAAOlsB,MACN,EAAIosB,WAAUC,iBACbA,EAAY17B,QACZ6oC,GAA0B5T,EAAOwG,KAGnC,OAAOsM,GAIR,MAAM6O,EAAqB/2C,MAAM8d,KAChC,IAAInY,IAAK+1B,EAAOpgC,KAAK,EAAIa,UAAYA,MAQtC,OAAOinC,EAAQuD,IAAa+P,wBAC3BK,EACApb,EACA,IAEF,CAAEvG,EAAOsG,EAAQC,IAChBua,GAA8B9S,EAA9B8S,CAAwC9gB,EAAOuG,OAY5C,SAASsU,GAAsB7a,EAAOwG,GAC5C,OAAOxG,EAAMiN,kBAAmBzG,EACjC,CASO,SAASwU,GAAahb,GAC5B,OAAOA,EAAMmN,QACd,CAWO,SAASyU,GAA6B5hB,GAC5C,OAAOA,EAAMsG,OAAO2D,kBACrB,CAWO,MAAM4X,GAA8CpO,GAC1D,CAAEzT,EAAOwH,EAAY,KACbA,EAAU/Q,QAAQ,CAAEqrB,EAA4Btb,IAC/CxG,EAAMiN,kBAAmBzG,GAIzB,IACHsb,EACH,CAAEtb,GAAYxG,EAAMiN,kBAAmBzG,IALhCsb,GAON,CAAC,KAEH9hB,GAAW,CAAEA,EAAMiN,qBAWT8U,IAAsC3D,EAAAA,EAAAA,yBAChDpQ,GACDyF,GACC,CAAEzT,EAAOe,KACR+S,IACC,4EACA,CACCC,MAAO,MACPxlB,QAAS,QAIX,MAAM+vB,EAAgBjN,GAAQrD,EAAQuD,KACpCW,oBACAwO,MAAQ5mB,GAAWA,EAAMvW,KAAOwd,IAClC,OAAOud,EAIAA,EAAcd,OAAOpqB,IAHpB,IAGuB,IAEhC,IAAM,CAAEie,GAAQrD,EAAQuD,KAAeW,yBAanC,SAAS8P,GAAoChiB,GAMnD,OAAOA,EAAMsG,OAAO+D,eACrB,CAWO,SAAS4X,GAA4CjiB,GAC3D,OAAOA,EAAMoO,yBACd,CASO,SAAS8T,GAAkBliB,GACjC,MAA4B,eAArBA,EAAMuO,UACd,CASO,SAAS4T,GAAyBniB,GACxC,OAAOA,EAAMuO,UACd,CASO,SAASE,GAAwBzO,GACvC,OAAOA,EAAMyO,sBACd,CASO,SAAS2T,GAAoBpiB,GACnC,QAAUA,EAAM4P,qBACjB,CAUO,SAASyS,GAAoBriB,EAAOwG,GAC1C,OAAOxG,EAAM2O,mBAAqBnI,CACnC,CAUO,SAASoN,GAA0B5T,EAAOwG,GAChD,QAAUxG,EAAMsG,OAAOgC,sBAAuB9B,EAC/C,CAYO,MAAM8b,GAA6C7O,GACzD,CAAEzT,EAAOuiB,KACR,IAAOA,EAAgBx3C,OACtB,OAAO,KAGR,MAAMy3C,EAAwBjN,GAA0BvV,GACxD,GACCuiB,EAAgBr+B,SACf8uB,GAAchT,EAAOwiB,IAGtB,OAAOA,EAGR,MAAMtL,EACL7B,GAAgCrV,GAC3ByiB,EAAoB5M,GACzB7V,EACAwiB,GAAyBtL,EAA6B,GACtDqL,GAED,OAAKE,EAEGA,EAAmBA,EAAkB13C,OAAS,GAE/C,IAAI,IAEZ,CAAEi1B,EAAOuiB,IAAqB,CAC7BviB,EAAMqM,UAAUC,eAAe9F,SAC/BxG,EAAMqM,UAAUI,aAAajG,SAC7B+b,KAYK,SAASG,GAAsB1iB,EAAOwG,EAAU71B,GACtD,MAAM,kBAAEk+B,GAAsB7O,EAC9B,OACC6O,EAAkBrH,WAAWtjB,SAAUsiB,IACvCqI,EAAkBl+B,SAAWA,CAE/B,CASO,SAASgyC,GAAgB3iB,EAAOwG,GAAW,IAAAoc,EACjD,OAA0C,QAA1CA,EAAO5iB,EAAMkP,kBAAmB1I,UAAU,IAAAoc,GAAAA,CAC3C,CAQO,MAAMC,GAA6BpP,GACvCzT,IACD,MAAM8iB,EAAgB,IAAIvyC,IACzBrI,OAAOlC,KAAMg6B,EAAMkP,iBAAkBt1B,QAClCvT,GAAS25B,EAAMkP,gBAAiB7oC,MAGpC,OAA4B,IAAvBy8C,EAAczyC,KACX0iC,GAED+P,CAAa,IAEnB9iB,GAAW,CAAEA,EAAMkP,mBAQT6T,GAAoCtP,GAChD,CAAEzT,EAAOwG,KACR,IACIxqB,EADA6S,EAAU2X,EAEd,KAAU3X,EAAUmR,EAAMsG,OAAO+B,QAAQ9hC,IAAKsoB,IAET,eAAnCmkB,GAAchT,EAAOnR,IACiB,gBAAtC6rB,GAAiB1a,EAAOnR,KAExB7S,EAAS6S,GAGX,OAAO7S,CAAM,IAEZgkB,GAAW,CAAEA,EAAMsG,OAAO+B,QAASrI,EAAMiN,qBAUrC,SAAS+V,GAAyChjB,GACxD,OAAOA,EAAM+O,0BACd,CASO,SAASkU,GAAkDjjB,GACjE,OAAOA,EAAMgP,iCACd,CAEO,SAASkU,GAAuCljB,EAAOwG,GAK7D,GAAgD,YAA3CyU,GAAqBjb,EAAOwG,GAChC,OAAO,EAIR,IAAOgW,GAAcxc,EAAOwG,GAC3B,OAAO,EAGR,MAAM+H,EAAa4T,GAAyBniB,GAG5C,GACgB,aAAfuO,GACA/H,IACEiP,GAAsBzV,EAAOwG,GAE/B,OAAO,EAQR,MAAM2c,GAAsBvG,EAAAA,EAAAA,iBAC3B5J,GAAchT,EAAOwG,GACrB,qCACA,GAQD,OALgB,eAAf+H,IACE4U,GAECvP,GAA0B5T,EAAOwG,MAIlC+S,GAAiBvZ,EAAOwG,KACxBgT,GAAuBxZ,EAAOwG,GAAU,EAE5C,CAEO,SAAS4c,GAAgCpjB,EAAOwG,GACtD,IAAI9rB,EAASslB,EAAMsG,OAAO+B,QAAQ9hC,IAAKigC,GACvC,KAAW9rB,GAAS,CACnB,GAAKwoC,GAAuCljB,EAAOtlB,GAClD,OAAO,EAERA,EAASslB,EAAMsG,OAAO+B,QAAQ9hC,IAAKmU,EACpC,CACA,OAAO,CACR,CAkCO,MAAMugC,IAAsBmD,EAAAA,EAAAA,yBAChCpQ,GACD,CAAEhO,EAAOwG,EAAW,MACnB,MAAM6c,EAAmBrjB,EAAMmP,kBAAkB5oC,IAAKigC,GACtD,GAAK6c,EACJ,OAAOA,EAER,IAAO7c,EACN,MAAO,UAER,MAAMD,EAAekP,GAAsBzV,EAAOwG,GAElD,GAAsB,gBADDkU,GAAiB1a,EAAOuG,GACP,CACrC,MAAMx/B,EAAOisC,GAAchT,EAAOwG,GAKlC,OAHCwH,EAAQC,EAAAA,OAAcqV,sCACrBv8C,GAEiB,cAAgB,UACpC,CACA,MAAMw8C,EAAatI,GAAqBjb,EAAOuG,GAC/C,MAAsB,gBAAfgd,EAA+B,UAAYA,CAAU,IAgBlDC,IAAgBpF,EAAAA,EAAAA,yBAC1BpQ,GACD,CAAEhO,EAAOwG,EAAW,MACnB,MAAMid,EAAYjd,GAAY+O,GAA0BvV,GACxD,IAAOyjB,EACN,OAAO,EAER,MAAM,qBAAEC,GAAyB1V,EAAQC,EAAAA,OACnCnU,EAAQyZ,GAAUvT,EAAOyjB,GACzBE,EAAoBD,IAO1B,OALC5pB,IACEA,EAAM/yB,OAAS48C,IAChB3L,EAAAA,EAAAA,cAAcle,EAAM/yB,OAAQ68C,YAAYC,YACtC/pB,EAAM2M,YAAY17B,QAEGoxC,GAAgBnc,EAAOyjB,EAAW,IAajDK,IAAc1F,EAAAA,EAAAA,yBACxBpQ,GACD,CAAEhO,EAAOwH,EAAYsL,MACpB,MAAM,qBAAE4Q,GAAyB1V,EAAQC,EAAAA,OACnC0V,EAAoBD,IACpBK,EAAavc,GAAWz8B,OAC3By8B,EACAuP,GAA2B/W,GACxBuG,EAAewd,GAAYh5C,OAC9B0qC,GAAsBzV,EAAO+jB,EAAY,SACzCh2C,EAOH,OAN+BkuC,GAC9Bjc,EACA2jB,EACApd,IAE8Cwd,EAAWh5C,QAGzDqxC,GAAiBpc,EAAO+jB,EAAYxd,EAAc,ICj6FzCyd,GAAmB,IAAIC,QCkB9BC,GAAkB,CACvB,0BACA,2BAaM,SAASC,GACfhX,GACA,0BAAEiX,GAA4B,EAAK,MAAEltC,GAAQ,GAAU,CAAC,GAExD,IAAImtC,EAAgBlX,EAGpB,GAAKiX,GAA6C,QAAhBlR,EAAAA,SAASC,GAAe,CACzDkR,EAAgB,CAAC,EACjB,IAAM,MAAMh+C,KAAO8mC,EACX+W,GAAgBhgC,SAAU7d,KAChCg+C,EAAeh+C,GAAQ8mC,EAAU9mC,GAGpC,CACA,MAAO,CACNuU,KAAM,kBACNuyB,SAAUkX,EACVntC,QAEF,CAOO,SAASotC,KACf,MAAO,CACN1pC,KAAM,uBAER,CAOO,SAAS2pC,KACf,MAAO,CACN3pC,KAAM,uBAER,CAmBO,MAAM4pC,GACZA,CAAEhd,EAAW8H,GAAiB,EAAMmV,GAAc,IAClD,EAAIzW,SAAQ0W,WAAUC,eACrB,IAAOnd,IAAeA,EAAUz8B,OAC/B,OA3FiB65C,QA8FKpd,EAAvBA,EA7FD58B,MAAMc,QAASk5C,GAAeA,EAAa,CAAEA,GA8F5C,MAAMre,EAAeyH,EAAOyH,qBAAsBjO,EAAW,IAM7D,IALwBwG,EAAOoO,gBAC9B5U,EACAjB,GAIA,OAYD,MAAM7sB,GAAU+qC,GAAezW,EAAO6W,uBAEtC,GAAKnrC,EAAQ,CACZ,SAASotB,EAAeR,GACvB,MAAMtqB,EAAS,GACTsE,EAAQ,IAAKgmB,GACnB,KAAQhmB,EAAMvV,QAAS,CACtB,MAAM,YAAE07B,KAAgB3M,GAAUxZ,EAAMiV,QACxCjV,EAAM5Z,QAAS+/B,GACfzqB,EAAOtV,KAAMozB,EACd,CACA,OAAO9d,CACR,CAEA,MACM6rB,EAAkBf,EADNU,EAAUthC,IAAK8nC,EAAOuF,WAIxC,IAAI/tB,EACJ,IAAM,MAAM8E,KAAQ5Q,EAEnB,GADA8L,EAAU8E,EAAK5c,SAAUm6B,GACpBriB,EAQJ,YAPAk/B,EACCI,GACCtd,EACA8H,EACA9pB,GAML,CAEK8pB,GACJoV,EAASK,oBAAqBvd,EAAW,GAAK8H,GAK/CqV,EAASK,OAAO,KACfN,EAAU,CAAE9pC,KAAM,gBAAiB4sB,cAGnCkd,EAAUO,KAAsB,GAC9B,EASQA,GACZA,IACA,EAAIjX,SAAQ0W,eAIX,GADc1W,EAAO+G,gBACR,EACZ,OAMD,MAAM,4BAAEmQ,GAAgClX,EAAOgN,cAC1CkK,GAILR,EAASS,oBAAoB,EAkB/B,SAASL,GAA2Btd,EAAW8H,EAAgB9pB,GAC9D,MAAO,CACN5K,KAAM,+BACN4sB,YACA8H,iBACA9pB,UAEF,CASO,SAAS4/B,KACf,MAAO,CACNxqC,KAAM,6BAER,CAuBO,SAASyqC,GAAsB3rC,GAAQ,GAC7C,MAAO,CACNkB,KAAM,0BACNlB,QAEF,CAQO,SAAS4rC,GAA4B9e,GAC3C,MAAO,CACN5rB,KAAM,iCACN4rB,WAEF,CAEO,SAAS+e,GAAkBhiC,EAAIxb,GACrC,MAAO,CACN6S,KAAM,qBACN2I,KACAxb,QAEF,CAEO,SAASy9C,GAAqBjiC,GACpC,MAAO,CACN3I,KAAM,wBACN2I,KAEF,CASO,SAASkiC,GAAoB/3C,GACnC,MAAO,EAAIg3C,WAAU1W,SAAQ2W,eAC5BA,EAASK,OAAO,KAEfN,EAAU,CACT9pC,KAAM,0BACNqvB,oBAAoB,IAErBv8B,IACAg3C,EAAU,CACT9pC,KAAM,0BACNqvB,wBAAoBl8B,IAIrB,MAAM23C,EAAgB1X,EAAO0F,YAC7BsQ,GAAiBpgC,IAAK8hC,EAAe,GACnC,CAEL,CAUO,SAASC,GAAcrX,EAAY,MACzC,MAAO,CACN1zB,KAAM,aACN0zB,YAEF,CAOO,SAASsX,GAAqBpf,GACpC,MAAO,EAAIwH,SAAQ0W,eAClB,MAAMzV,EACLjB,EAAOiV,mDACRyB,EAASmB,0CACTnB,EAASoB,sBAAuBtf,EAAU,CACzC4L,aAAc,gBAEfsS,EAASqB,wBAAyBvf,EAAU,IACxCwH,EAAO6M,qBAAsBrU,GAChC4L,aAAc,gBAEfsS,EAASsB,eAAgB,CAAEC,UAAWhX,IACtCyV,EAASwB,yCAAyC,CAEpD,CAOO,SAASC,KACf,MAAO,CACNvrC,KAAM,iBAER,CAOO,SAASwrC,KACf,MAAO,CACNxrC,KAAM,gBAER,CAOO,SAASyrC,GAAa7f,GAC5B,MAAO,CACN5rB,KAAM,kCACN4rB,WAEF,CC/XO,MAAM8f,GAAyB,CACrCC,KAAM,OACNC,MAAO,QACPC,UAAW,aAGCC,GAAsB,CAClCC,KAAM,QACNC,SAAU,YAGEC,GAAsB,CAClC9/C,KAAM,cACN+/C,OAAOxiB,EAAAA,EAAAA,IAAI,MAAO,aAGNyiB,GAAqB,CACjChgD,KAAM,aACN+/C,OAAOznB,EAAAA,EAAAA,IAAI,gBAGL,SAAS2nB,GAAmBhjC,EAASijC,EAAcC,GACzD,MAAMC,EAAgBnjC,EAAQjd,KAAKmT,WAAY,cACzCktC,EACc,SAAnBpjC,EAAQrT,QACRqT,EAAQrT,QAAQuJ,WAAY,qBAI7B,QACC+sC,IAAiBX,GAAuBE,QACtCW,IAAiBC,MAQnBH,IAAiBX,GAAuBG,YACtCU,GAAmBC,IAOrBH,IAAiBX,GAAuBC,MACxCviC,EAAQpJ,OAAS0rC,GAAuBC,MAOxCW,IAAeR,GAAoBC,MACZ,KAAvB3iC,EAAQ06B,cAMRwI,IAAeR,GAAoBE,UACZ,aAAvB5iC,EAAQ06B,aACRyI,EAMF,CClEO,SAASE,GAAchpB,EAAQrvB,EAAMvI,GAE3CuI,EAAOpE,MAAMc,QAASsD,GAAS,IAAKA,GAAS,CAAEA,GAG/CqvB,EAASzzB,MAAMc,QAAS2yB,GAAW,IAAKA,GAAW,IAAKA,GAExD,MAAMipB,EAAOt4C,EAAKvB,MAGlB,IAAImS,EAAOye,EACX,IAAM,MAAMh4B,KAAO2I,EAAO,CACzB,MAAMu4C,EAAM3nC,EAAMvZ,GAClBuZ,EAAOA,EAAMvZ,GAAQuE,MAAMc,QAAS67C,GAAQ,IAAKA,GAAQ,IAAKA,EAC/D,CAIA,OAFA3nC,EAAM0nC,GAAS7gD,EAER43B,CACR,CAcO,MAAMmpB,GAAyBA,CAAEnpB,EAAQrvB,EAAMy4C,KAAkB,IAAAC,EACvE,MAAMC,EAAY/8C,MAAMc,QAASsD,GAASA,EAAOA,EAAKY,MAAO,KAC7D,IAAInJ,EAAQ43B,EAIZ,OAHAspB,EAAUx/C,SAAWy/C,IACpBnhD,EAAQA,IAASmhD,EAAW,IAEjB,QAAZF,EAAOjhD,SAAK,IAAAihD,EAAAA,EAAID,CAAY,EClCvBI,GAAe,CACpB,QACA,SACA,aACA,aACA,WAGKC,GAAkB,CACvB,gBAAmB3a,GAAcA,EAAShJ,OAC1C,kBAAqBgJ,GAAcA,EAASxH,UAC5C,eAAkBwH,QACgBp/B,IAAjCo/B,EAAS4a,yBACNh6C,GACEo/B,EAAS4a,oBACf,uBAA0B5a,QACWp/B,IAApCo/B,EAAS6a,4BACNj6C,GACEo/B,EAAS6a,uBACf,uBAA0B7a,GAAcA,EAAS9I,UACjD,4BAA+B8I,QACMp/B,IAApCo/B,EAAS8a,4BACNl6C,GACEo/B,EAAS8a,uBACf,wBAA2B9a,GAAcA,EAAS+a,uBAClD,gBAAmB/a,IAClB,QAAoCp/B,IAA/Bo/B,EAASgb,kBAId,OAAoC,IAA/Bhb,EAASgb,kBACN,CAAE,KAAM,KAAM,MAAO,KAAM,KAAM,KAGlChb,EAASgb,iBAAiB,EAElC,kBAAqBhb,GAAcA,EAASib,qBAGvCC,GAAgB,CAMrB,qBAAsB,eACtB,qBAAsB,eACtB,qBAAsB,eACtB,6BAA8B,uBAC9B,8BAA+B,wBAC/B,iCAAkC,2BAClC,mCAAoC,4BACpC,kCAAmC,2BAInC,sBAAuB,gBACvB,uBAAwB,iBACxB,wBAAyB,kBACzB,8BAA+B,yBAe1BC,GAAyBt5C,GACvBq5C,GAAer5C,IAAUA,EAqB3Bu5C,GAAa,IAAIpY,QAShB,SAASqY,GAAiB/hD,GAAQ,IAAAgiD,EAAAC,EACxC,OAAkC,QAAlCD,EAAmB,QAAnBC,EAAOjiD,EAAMqa,cAAM,IAAA4nC,EAAAA,EAAIjiD,EAAM+/C,aAAK,IAAAiC,EAAAA,EAAIhiD,EAAMwE,OAC7C,CAUO,SAAS09C,GAAgBliD,GAC/B,MAAO,CAAE,UAAW,QAAS,UAAW2T,MACrC/T,GAASI,IAASJ,IAAO0E,QAE7B,CAEO,SAAS69C,GAAkB5oB,EAAOwG,KAAaqiB,GACrD,MAAM9a,EAAYiF,GAAchT,EAAOwG,GACjCsiB,EAAa,GAEnB,GAAKtiB,EAAW,CACf,IAAIjjB,EAAKijB,EACT,EAAG,CACF,MAAMz/B,EAAOisC,GAAchT,EAAOzc,IAC7Bq5B,EAAAA,EAAAA,iBAAiB71C,EAAM,0BAA0B,IACrD+hD,EAAWpiD,KAAM6c,EAEnB,OAAYA,EAAKyc,EAAMsG,OAAO+B,QAAQ9hC,IAAKgd,GAC5C,CAEA,OAAOslC,EAAM3iD,KAAO8I,IACnB,GAAK64C,GAAa3jC,SAAUlV,GAK3B,YAHAqf,QAAQuE,KACP,kGAMF,IAAI5W,GAASggC,EAAAA,EAAAA,cACZ,qCACAjuC,EACAiB,EACAw3B,EACAuH,GAGD,QAAKhgC,IAAciO,EAClB,OAAOA,EAGR,MAAM+sC,EAAiBT,GAAsBt5C,GAI7C,IAAM,MAAMg6C,KAAqBF,EAAa,KAAAG,EAC7C,MAAMC,EAAgB5V,GACrBtT,EACAgpB,GAWD,GATAhtC,EAIE,QAJIitC,EACLzB,GACC0B,EAAc/b,UAAU7G,SAAUyH,GAClCgb,UACA,IAAAE,EAAAA,EACDzB,GACC0B,EAAc/b,SACd4b,QAEch7C,IAAXiO,EAEJ,KAEF,CAGA,MAAMmxB,EAAW6N,GAAahb,GAgB9B,QAfgBjyB,IAAXiO,GAAwB+xB,IAC5B/xB,EAASwrC,GACRra,EAASgc,wBAAwB7iB,SAAUyH,GAC3Cgb,SAIch7C,IAAXiO,IACJA,EAASwrC,GACRra,EAASgc,uBACTJ,SAKch7C,IAAXiO,EACJ,OAAKotC,EAAAA,mCAAqBL,GAClBP,GAAiBxsC,GAElBA,EAIR,MAAMqtC,EACLvB,GAAiBiB,KAAoB5b,GACtC,YAAiCp/B,IAA5Bs7C,EACGA,EAOkB,uBAAnBN,QAAiDh7C,CAAS,GAEnE,CCjMO,SAASo+B,GAAwBnM,GACvC,OAAOA,EAAMmM,sBACd,CAQO,SAASmd,GAAgCtpB,GAC/C,OAAOA,GAAO6O,mBAAmBrH,SAClC,CAEO,SAAS+hB,GAA2BvpB,EAAOwG,GACjD,OAAOxG,EAAMsG,OAAOwB,WAAWvhC,IAAKigC,EACrC,CAWO,MAAMgjB,GAAyBA,CAAExpB,EAAOwG,KAC9C,MAAMijB,EAA2BC,GAEiB,aAAhDzO,GAAqBjb,EAAO0pB,IAC5BzV,GAAejU,EAAO0pB,GAAgBtlC,MACrCqlC,GAIH,OAAOxV,GAAejU,EAAOwG,GAAWpiB,MAAOqlC,EAAwB,EA+B3DE,GAA0BlW,GA5BvC,SAASmW,EAAmC5pB,EAAOuG,GAClD,MAAM0E,EAAagJ,GAAejU,EAAOuG,GACnCvqB,EAAS,GAEf,IAAM,MAAMwqB,KAAYyE,EAAa,CACpC,MAAMxE,EAAcmjB,EACnB5pB,EACAwG,GAE+C,aAA3CyU,GAAqBjb,EAAOwG,GAChCxqB,EAAOtV,KAAM,CAAE8/B,WAAUC,gBAEzBzqB,EAAOtV,QAAS+/B,EAElB,CAEA,OAAOzqB,CACR,IAaGgkB,GAAW,CACZA,EAAMsG,OAAOI,MACb1G,EAAMmP,kBACNnP,EAAMmN,SAASiF,aACfpS,EAAMiN,qBAeK4c,GAAyBpW,GACrC,CAAEzT,EAAOwG,EAAUoP,GAAY,IACvBD,GAAiB3V,EAAOwG,EAAUoP,GAAYh8B,QAClDc,GAAqD,aAAzCugC,GAAqBjb,EAAOtlB,OAG1CslB,GAAW,CACZA,EAAMsG,OAAO+B,QACbrI,EAAMmP,kBACNnP,EAAMmN,SAASiF,aACfpS,EAAMiN,qBAYD,SAAS6c,GAAsB9pB,GACrC,OAAOA,EAAMqP,iBACd,CASO,SAASwV,GAAsB7kB,GACrC,OAAOA,EAAMuP,iBACd,CAQO,SAASwa,GAA4B/pB,GAC3C,OAAOA,EAAMwP,uBACd,CASO,SAASwa,GAAmBhqB,GAClC,OAAOA,EAAMoP,cACd,CAUO,SAAS6a,GAAsCjqB,GACrD,OAAOA,EAAM0P,iCACd,CAYO,MAAMwa,GAA6BzW,GACvCzT,IACD,MACCmN,UAAU,wBACTgd,EAAuB,iBACvBvlB,EAAgB,6BAChBE,GACA,kCACD4K,GACG1P,EAIJ,IACKmqB,IACDza,EAAkC3kC,SACnC65B,EAEF,OAED,MAAMwlB,EACLD,GAAyBjkD,KAAK,EAAIa,UAAYA,KAAU,GAQzD,MAPyB,IACnBojD,GAA2B,OAC3Bza,GAAqC,IAAK91B,QAC9C,EAAI7S,WACDqjD,EAAiClmC,SAAUnd,MAGxB6S,QAAU+1B,MAG9B7K,GACgB,cAAlB6K,EAAS5oC,OAIHmB,OAAOjC,OAAQ2+B,GAAmBxqB,MAAQiwC,GAChDA,EAASnwC,WAAa,GAAGy1B,EAAS2a,iBAEjC,IAEFtqB,GAAW,CACZA,EAAMmN,SAASgd,wBACfnqB,EAAMmN,SAASvI,iBACf5E,EAAMmN,SAASrI,6BACf9E,EAAM0P,qCAaK6a,IAAqBnM,EAAAA,EAAAA,yBAA0BpQ,GAC3DyF,GACC,CAAEzT,EAAOuG,EAAe,QACvB,MAAM,eAAEka,EAAc,+BAAEF,GAAmClP,GAC1DrD,EAAQuD,KAEH0P,EAAWR,KACX,kBAAE/b,GAAsBsW,GAAahb,GAC3C,OAAOihB,EAAS7mC,MAAM,EAAIrT,OAAMo6C,YAAW,MAC1C,IAAOA,EACN,OAAO,EAER,MAAM,OAAE7a,GAAWia,EAAgCx5C,GACnD,OACC4qC,GAAyBrL,EAAQ5B,IACjC4B,EAAOliB,OAAO,EAAIrd,KAAMgnC,KACvBkO,GAAoBjc,EAAO+N,EAAWxH,IACtC,GAEA,IAEJ,CAAEvG,EAAOuG,IAAkB,IACvBuL,GAA0B9D,EAA1B8D,CAAoC9R,MACpCmS,GAA8BnS,EAAOuG,QAK9Bka,IAAiBrC,EAAAA,EAAAA,yBAA0BpQ,GACvDyF,GAAkBzT,IAAW,IAAAwqB,EAE5B,MAAM,4BACLrlB,EAA8B,GAAE,oCAChC4M,EAAsC,GAAE,6BACxCC,EAA+B,IAC5BhS,EAAMmN,SACJsd,EAAuBzqB,EAAMmN,SAAUgE,GAqB7C,MAAO,KAnBNsZ,EACGA,EAAsBzc,GACtBgE,QAAAA,EAAgC,IAClC9rC,KAAOwkD,IACD,CACN3jD,KAAO,cAAc2jD,EAAYnnC,KACjCA,GAAImnC,EAAYnnC,GAChB3I,KAAM0rC,GAAuBC,KAC7B/I,MAAOkN,EAAYlN,MAAMpqB,IACzBytB,WAAY6J,EAAYC,oBAAoBzkD,KAAO0kD,IAClD,MAAMjb,GACLoC,QAAAA,EAAuC,IACtC2O,MAAM,EAAIn9B,QAAUA,IAAOqnC,IAC7B,OAAOjb,EAAWA,EAASvL,KAAOwmB,CAAK,IAExCt+B,QAASo+B,EAAYp+B,QAAQ8G,IAC7BsrB,WAAYgM,EAAYnM,8BAKtBpZ,KACsD,QAAzDqlB,EAAKxqB,EAAMmN,SAAU+D,KAA4BlD,UAAQ,IAAAwc,EAAAA,EAAI,IAC5D5wC,QACD,CAAE5O,EAAGpE,EAAO6C,IACX7C,IAAU6C,EAAImpC,WAAaiY,GAAO7/C,EAAEjE,OAAS8jD,EAAE9jD,QAChD,GACC+qC,GAA0B9D,MAGxB8E,GAAc,GAEPZ,IAAoBkM,EAAAA,EAAAA,yBAC9BpQ,GAAchO,IAAW,IAAA8qB,EAC1B,MAAML,EAAuBzqB,EAAMmN,SAAUgE,GAC7C,OAAOsZ,EACJA,EAAsBzc,GACqB,QADb8c,EAC9B9qB,EAAMmN,SAAS6E,oCAA4B,IAAA8Y,EAAAA,EAAIhY,EAAW,IAWxD,SAASiY,GAAc/qB,GAC7B,OAAOA,EAAMsO,SACd,CAWO,SAASrC,GAAYjM,GAC3B,OAAOA,EAAMiM,UACd,CASO,SAAS+e,GAAkBhrB,GACjC,OAAOA,EAAM0O,aACd,CC7XA,MAAM,GAA+B1mC,OAAW,GAAQ,KCU3CijD,GAAyB,IAQ/B,SAASC,GAA2BC,GAC1C,GAAOA,EAIP,OAAOjjD,OAAOlC,KAAMmlD,GAAkBzK,MAAQ35C,IAC7C,MAAMN,EAAQ0kD,EAAiBpkD,GAC/B,OACoB,iBAAVN,GAAsBA,aAAiB2kD,EAAAA,gBAGQ,IAAxD3kD,EAAMoF,WAAWvF,QAAS2kD,GAA+B,GAG5D,CCIA,MAAMI,GAAczG,GACnBh6C,MAAMc,QAASk5C,GAAeA,EAAa,CAAEA,GAQjC0G,GACVhlB,GACF,EAAIoe,eACHA,EAAU,CAAE9pC,KAAM,eAAgB0rB,WAClCoe,EAAU6G,GAA0BjlB,GAAU,EAWnCilB,GACVjlB,GACF,EAAI0H,SAAQ0W,eACX,MAAMhX,EAAWM,EAAOyM,cAClBrI,EAAepE,EAAO0M,kBAItB8Q,GACH9d,GACe,QAAjB0E,IACAqZ,EAAAA,EAAAA,uBAAuBnlB,EAAQoH,GAKhC,GAAK8d,IAFmBxd,EAAOwM,kBAI9B,OADAkK,EAASgH,oBAAqBF,GACvBA,CACR,EAkCK,SAASG,GACfrf,EACAG,EACAM,GAGA,MAAO,CACNnyB,KAAM,kBACN0xB,iBACAG,eACAM,kBAEF,CAaO,SAAS6e,GAAetlB,GAM9B,OALAwN,IAAY,wDAAyD,CACpEC,MAAO,MACPa,YAAa,gCAGP,CACNh6B,KAAM,iBACN0rB,SAEF,CAWO,SAASwf,GACfte,EACAP,EACA2D,GAAgB,GAEhB,MAAO,CACNhwB,KAAM,0BACN4sB,UAAW6jB,GAAW7jB,GACtBP,aACA2D,gBAEF,CAUO,SAASihB,GAAarlB,EAAUgE,GACtC,MAAO,CACN5vB,KAAM,eACN4rB,WACAgE,UAEF,CAeO,SAASshB,GAAatlB,EAAUuG,EAAkB,GAExD,MAAO,CACNnyB,KAAM,eACNmyB,kBACAvG,WAEF,CAUO,MAAMue,GACZA,CAAEve,EAAUulB,GAAmB,IAC/B,EAAI/d,SAAQ0W,eACX,MAAMsH,EACLhe,EAAO4I,yBAA0BpQ,GAClC,GAAKwlB,EACJtH,EAASoH,YAAaE,GAAwB,QACxC,GAAKD,EAAmB,CAC9B,MAAME,EAAsBje,EAAOyH,qBAAsBjP,GACpDylB,GACJvH,EAASoH,YAAaG,GAAsB,EAE9C,GASWC,GACV1lB,GACF,EAAIwH,SAAQ0W,eACX,MAAMyH,EAAoBne,EAAO6I,qBAAsBrQ,GAClD2lB,GACJzH,EAASoH,YAAaK,EACvB,EAQK,SAASC,KACf,MAAO,CACNxxC,KAAM,qBAER,CAOO,SAASyxC,KACf,MAAO,CACNzxC,KAAM,oBAER,CASO,MAAM0xC,GACZA,CAAEjmC,EAAOC,EAAKimC,EAAgC,IAC9C,EAAIve,SAAQ0W,eAKX,GAJ+B1W,EAAOyH,qBAAsBpvB,KAC/B2nB,EAAOyH,qBAAsBnvB,GAIzD,OAGDo+B,EAAU,CACT9pC,KAAM,eACNyL,QACAC,MACAymB,gBAAiBwf,IAGlB,MAAMC,EAAaxe,EAAOoH,yBAE1BqX,EAAAA,GAAAA,QACCC,EAAAA,EAAAA;CAECC,EAAAA,EAAAA,IAAI,qBAAsB,sBAAuBH,GACjDA,GAED,YACA,EAQI,SAASI,KACf,MAAO,CACNhyC,KAAM,uBAER,CAUO,SAASiyC,GAAiB/f,GAAqB,GACrD,MAAO,CACNlyB,KAAM,mBACNkyB,qBAEF,CAcO,MAAMggB,GACZA,CAAEtlB,EAAWlB,EAAQyF,EAAegB,EAAkB,EAAG+B,IACzD,EAAId,SAAQ0W,WAAUC,eAErBnd,EAAY6jB,GAAW7jB,GACvBlB,EAAS+kB,GAAW/kB,GACpB,MAAMC,EAAeyH,EAAOyH,qBAAsBjO,EAAW,IAE7D,IAAM,IAAI5gC,EAAQ,EAAGA,EAAQ0/B,EAAOv7B,OAAQnE,IAAU,CACrD,MAAMkzB,EAAQwM,EAAQ1/B,GAKtB,IAJuBonC,EAAOiO,mBAC7BniB,EAAM/yB,KACNw/B,GAGA,MAEF,CAGAoe,EAASK,OAAO,KACfN,EAAU,CACT9pC,KAAM,iBACN4sB,YACAlB,SACA6H,KAAM+O,KAAKC,MACXpR,gBACAgB,kBACA+B,SAID4V,EAASO,oBAAoB,GAC3B,EAWE,SAAS8H,GAAcvmB,EAAU1M,GACvC,OAAOgzB,GAAetmB,EAAU1M,EACjC,CAUA,MAAMkzB,GACHpyC,GACF,CAAE4sB,EAAWjB,IACb,EAAIyH,SAAQ0W,eAEW1W,EAAOuO,cAAe/U,EAAWjB,IAKvDme,EAAU,CAAE9pC,OAAM4sB,UAAW6jB,GAAW7jB,GAAajB,gBAAgB,EAG1D0mB,GAAiBD,GAAc,oBAC/BE,GAAeF,GAAc,kBAU7BG,GACZA,CAAE3lB,EAAW2B,EAAmB,GAAIC,EAAiB,GAAIxiC,IACzD,EAAIonC,SAAQ0W,eAOX,GANsB1W,EAAOuO,cAC5B/U,EACA2B,GAID,CAKA,GAAKA,IAAqBC,EAAiB,CAQ1C,IAPwB4E,EAAOoO,gBAC9B5U,EACA2B,GAMA,OASD,IANwB6E,EAAOkO,gBAC9B1U,EACA4B,GAKA,MAEF,CAEAsb,EAAU,CACT9pC,KAAM,0BACNuuB,mBACAC,iBACA5B,YACA5gC,SA/BD,CAgCG,EAWE,SAASwmD,GACf5mB,EACA2C,EAAmB,GACnBC,EAAiB,GACjBxiC,GAEA,OAAOumD,GACN,CAAE3mB,GACF2C,EACAC,EACAxiC,EAEF,CAgBO,SAASymD,GACfvzB,EACAlzB,EACA2/B,EACAsF,EACAiD,GAEA,OAAOwe,GACN,CAAExzB,GACFlzB,EACA2/B,EACAsF,EACA,EACAiD,EAEF,CAkBO,MAAMwe,GACZA,CACChnB,EACA1/B,EACA2/B,EACAsF,GAAkB,EAClBkB,EAAkB,EAClB+B,IAED,EAAId,SAAQ0W,eAEc,OAApB3X,GAAuD,iBAApBA,IACvC+B,EAAO/B,EACPA,EAAkB,EAClB+G,IACC,yDACA,CACCC,MAAO,MACPwZ,KAAM,+DAKTjnB,EAAS+kB,GAAW/kB,GACpB,MAAMgV,EAAgB,GACtB,IAAM,MAAMxhB,KAASwM,EACJ0H,EAAOiO,mBACtBniB,EAAM/yB,KACNw/B,IAGA+U,EAAc50C,KAAMozB,GAGjBwhB,EAAcvwC,QAClB25C,EAAU,CACT9pC,KAAM,gBACN0rB,OAAQgV,EACR10C,QACA2/B,eACA4H,KAAM+O,KAAKC,MACXtR,kBACAkB,gBAAiBlB,EAAkBkB,EAAkB,KACrD+B,QAEF,EAgBK,SAAS0e,GACfjnB,EACA3/B,EACA6mD,EAAoB,CAAC,GAErB,MAAM,uBAAElgB,EAAsB,UAAEC,EAAS,YAAEC,GAC1CggB,EACD,MAAO,CACN7yC,KAAM,uBACN2rB,eACA3/B,QACA2mC,yBACAC,YACAC,cAEF,CAIO,MAAMigB,GACZA,IACA,EAAI1f,SAAQ0W,eACJ1W,EAAOuM,gCAGdmK,EAAU,CACT9pC,KAAM,wBACJ,EAUE,SAAS8wC,GAAqB/d,GACpC,MAAO,CACN/yB,KAAM,wBACN+yB,UAEF,CAOO,MAAMggB,GACZA,IACA,EAAI3f,SAAQ0W,eACXA,EAAU,CAAE9pC,KAAM,yBAClB,MAAM0rB,EAAS0H,EAAO0F,YAChBhG,EAAWM,EAAOyM,cAClBmT,GAAmBC,EAAAA,EAAAA,+BACxBvnB,EACAoH,GAGDgX,EAAS4G,YAAasC,EAAkB,EAQ7BE,GACV3V,GACF,EAAIwM,WAAU3W,SAAQ0W,eACrB,MAAM9M,EAAkB5J,EAAOgH,oBACzB6C,EAAiB7J,EAAOiH,kBAE9B,GAAK2C,EAAgBpR,WAAaqR,EAAerR,SAAW,OAG5D,IACGoR,EAAgBrL,eAChBsL,EAAetL,mBACiB,IAA3BqL,EAAgB9uB,aACU,IAA1B+uB,EAAe/uB,OAEtB,OAAO,EAER,MAAMsvB,EAAqBpK,EAAOyH,qBACjCmC,EAAgBpR,UAQjB,GAAK4R,IANqBpK,EAAOyH,qBAChCoC,EAAerR,UAMf,OAGD,MAAMyE,EAAa+C,EAAOiG,cAAemE,GAKzC,IAAI9L,EAAgBG,EAJAxB,EAAW3kC,QAASsxC,EAAgBpR,UACrCyE,EAAW3kC,QAASuxC,EAAerR,WAMrD8F,EAAiBuL,EACjBpL,EAAemL,IAEftL,EAAiBsL,EACjBnL,EAAeoL,GAGhB,MAAMkW,EAAkB5V,EAAY1L,EAAeH,EAC7C0hB,EAAchgB,EAAOuF,SAAUwa,EAAgBvnB,UAC/CynB,GAAkBjW,EAAAA,EAAAA,cAAcgW,EAAYjnD,MAElD,IAAOknD,EAAgBhW,MACtB,OAGD,MAAMiW,EAAa5hB,EACb6hB,EAAa1hB,EAEbqM,EAAS9K,EAAOuF,SAAU2a,EAAW1nB,UACrCuS,EAAS/K,EAAOuF,SAAU4a,EAAW3nB,UAErCwS,EAAQF,EAAO7R,WAAYinB,EAAW3hB,cACtC0M,EAAQF,EAAO9R,WAAYknB,EAAW5hB,cAE5C,IAAI2M,GAASliC,EAAAA,EAAAA,QAAQ,CAAEmiC,KAAMH,IACzBI,GAASpiC,EAAAA,EAAAA,QAAQ,CAAEmiC,KAAMF,IAE7BC,GAASrmB,EAAAA,EAAAA,QAAQqmB,EAAQgV,EAAWplC,OAAQowB,EAAO10B,KAAKzZ,QACxDquC,GAASgV,EAAAA,EAAAA,QAAQhV,EAAQ6R,GAAwB,EAAGkD,EAAWrlC,QAG/D,MAAMulC,GAASC,EAAAA,EAAAA,YAAYxV,EAAQ,CAClC,CAAEoV,EAAW3hB,eAAgB8M,EAAAA,EAAAA,cAAc,CAAE5yC,MAAOyyC,MAE/CqV,GAASD,EAAAA,EAAAA,YAAYvV,EAAQ,CAClC,CAAEoV,EAAW5hB,eAAgB8M,EAAAA,EAAAA,cAAc,CAAE5yC,MAAO2yC,MAG/CoV,EAAiBrW,EAAYkW,EAASE,EAItCE,EACL3V,EAAO/xC,OAASgyC,EAAOhyC,KACpB,CAAEynD,IACF9V,EAAAA,EAAAA,mBAAmB8V,EAAgBP,EAAgBlnD,MAGvD,IAAO0nD,IAA2BA,EAAsB1jD,OACvD,OAGD,IAAI2jD,EAEJ,GAAKvW,EAAY,CAChB,MAAMK,EAAeiW,EAAsBhhD,MAC3CihD,EAAoBT,EAAgBhW,MACnCO,EAAavR,WACbsnB,EAAOtnB,WAET,KAAO,CACN,MAAMuR,EAAeiW,EAAsBl5B,QAC3Cm5B,EAAoBT,EAAgBhW,MACnCoW,EAAOpnB,WACPuR,EAAavR,WAEf,CAEA,MAAM0nB,EAAkBzD,GAA2BwD,GAE7CE,EAAgBF,EAAmBC,GACnCE,GAAiB73C,EAAAA,EAAAA,QAAQ,CAAEmiC,KAAMyV,IACjCE,EAAYD,EAAerqC,KAAKle,QAAS2kD,IACzC8D,GAAWl8B,EAAAA,EAAAA,QAAQg8B,EAAgBC,EAAWA,EAAY,GAC1DE,GAAU3V,EAAAA,EAAAA,cAAc,CAAE5yC,MAAOsoD,IAEvCL,EAAmBC,GAAoBK,EAEvC,MAAMtV,EAAyB1L,EAAO+I,4BAChCkY,EAAc,IACd9W,EAAYsW,EAAwB,GACzC,IAEIT,EACH/mB,WAAY,IACR+mB,EAAY/mB,cACZynB,OAGAvW,EAAY,GAAKsW,GAGvB9J,EAASK,OAAO,KACfN,EAASwK,gBACRlB,EAAYxnB,SACZmoB,EACAG,EACAA,GAGDpK,EAASoI,cACRpT,EACAuV,EACA,EACAjhB,EAAO8I,wCACP,GACC,EAMQqY,GACZA,IACA,EAAInhB,SAAQ0W,eACX,MAAM9M,EAAkB5J,EAAOgH,oBACzB6C,EAAiB7J,EAAOiH,kBAE9B,GAAK2C,EAAgBpR,WAAaqR,EAAerR,SAAW,OAG5D,IACGoR,EAAgBrL,eAChBsL,EAAetL,mBACiB,IAA3BqL,EAAgB9uB,aACU,IAA1B+uB,EAAe/uB,OAEtB,OAED,MAAMsvB,EAAqBpK,EAAOyH,qBACjCmC,EAAgBpR,UAQjB,GAAK4R,IANqBpK,EAAOyH,qBAChCoC,EAAerR,UAMf,OAGD,MAAMyE,EAAa+C,EAAOiG,cAAemE,GAKzC,IAAI9L,EAAgBG,EAJAxB,EAAW3kC,QAASsxC,EAAgBpR,UACrCyE,EAAW3kC,QAASuxC,EAAerR,WAMrD8F,EAAiBuL,EACjBpL,EAAemL,IAEftL,EAAiBsL,EACjBnL,EAAeoL,GAGhB,MAAMqW,EAAa5hB,EACb6hB,EAAa1hB,EAEbqM,EAAS9K,EAAOuF,SAAU2a,EAAW1nB,UACrCuS,EAAS/K,EAAOuF,SAAU4a,EAAW3nB,UAErCwS,EAAQF,EAAO7R,WAAYinB,EAAW3hB,cACtC0M,EAAQF,EAAO9R,WAAYknB,EAAW5hB,cAE5C,IAAI2M,GAASliC,EAAAA,EAAAA,QAAQ,CAAEmiC,KAAMH,IACzBI,GAASpiC,EAAAA,EAAAA,QAAQ,CAAEmiC,KAAMF,IAE7BC,GAASrmB,EAAAA,EAAAA,QAAQqmB,EAAQgV,EAAWplC,OAAQowB,EAAO10B,KAAKzZ,QACxDquC,GAASvmB,EAAAA,EAAAA,QAAQumB,EAAQ,EAAG+U,EAAWrlC,QAEvC47B,EAASoI,cAAe9e,EAAO+I,4BAA6B,CAC3D,IAEI+B,EACH7R,WAAY,IACR6R,EAAO7R,WACV,CAAEinB,EAAW3hB,eAAgB8M,EAAAA,EAAAA,cAAc,CAC1C5yC,MAAOyyC,MAIV,IAEIH,EACH9R,WAAY,IACR8R,EAAO9R,WACV,CAAEknB,EAAW5hB,eAAgB8M,EAAAA,EAAAA,cAAc,CAC1C5yC,MAAO2yC,OAIR,EAMQgW,GACZA,IACA,EAAIphB,SAAQ0W,eACX,MAAM9M,EAAkB5J,EAAOgH,oBACzB6C,EAAiB7J,EAAOiH,kBAC9ByP,EAASwK,gBAAiB,CACzB7oC,MAAO,CAAEmgB,SAAUoR,EAAgBpR,UACnClgB,IAAK,CAAEkgB,SAAUqR,EAAerR,WAC9B,EASQ6oB,GACZA,CAAEC,EAAoBC,IACtB,EAAI5K,WAAU3W,SAAQ0W,eACrB,MAAM8K,EAAYF,EACZG,EAAYF,EACZzW,EAAS9K,EAAOuF,SAAUic,GAC1BE,GAAa1X,EAAAA,EAAAA,cAAcc,EAAO/xC,MAExC,IAAO2oD,EAAa,OAEpB,MAAM3W,EAAS/K,EAAOuF,SAAUkc,GAEhC,IACGC,EAAWzX,QACb0X,EAAAA,EAAAA,iBAAiB7W,EAAO/xC,KAAM,yBAC7B,CAGD,MAAM0nD,GAAwB/V,EAAAA,EAAAA,mBAC7BK,EACA2W,EAAW3oD,MAGZ,GAAuC,IAAlC0nD,GAAuB1jD,OAE3B,YADA25C,EAASoH,YAAahT,EAAOtS,UAG9B,MAAQopB,GAAsBnB,EAC9B,OAAKmB,EAAkBnpB,YAAY17B,OAAS,OAC3C25C,EAASoH,YAAahT,EAAOtS,eAI9Bme,EAASK,OAAO,KACfN,EAAS4I,aACRsC,EAAkBnpB,iBAClB14B,EACAyhD,GAED9K,EAASmL,YAAaJ,GACtB/K,EAASoH,YACR8D,EAAkBnpB,YAAa,GAAID,UASpC,MAAM2lB,EACLne,EAAO6I,qBAAsB2Y,GAE9B,GACCrD,GACAne,EAAOgF,aAAcwc,KACpBxhB,EAAOgF,aAAcmZ,GACrB,CACD,MAAM2D,EACL9hB,EAAOsF,mBAAoBkc,GACtBO,EACL/hB,EAAOsF,mBAAoB6Y,GAG3BjkD,OAAOlC,KAAM8pD,GAAiB1rC,OAC3B/d,GACDypD,EAAgBzpD,KAChB0pD,EAAwB1pD,OAG1Bq+C,EAASyI,qBACRnf,EAAOiG,cAAekY,GACtBA,EACAqD,GAED9K,EAASmL,YAAa1D,GAAmB,GAE3C,IAGF,CAEA,IAAK6D,EAAAA,EAAAA,0BAA0BlX,GAK9B,YAJA4L,EAASmL,YACRL,EACAxhB,EAAOuL,gBAAiBiW,IAK1B,IAAKQ,EAAAA,EAAAA,0BAA0BjX,GAK9B,YAJA2L,EAASmL,YACRJ,EACAzhB,EAAOuL,gBAAiBkW,IAK1B,IAAOC,EAAWzX,MAEjB,YADAyM,EAASoH,YAAahT,EAAOtS,UAI9B,MAAMypB,GAAajY,EAAAA,EAAAA,cAAce,EAAOhyC,OAClC,SAAEy/B,EAAQ,aAAE+F,EAAY,OAAEzjB,GAAWklB,EAAOgH,oBAG5Ckb,GADL1pB,IAAagpB,EAAYE,EAAaO,GAEpBhpB,WAAYsF,GACzB4jB,GACH3pB,IAAagpB,GAAahpB,IAAaipB,SACxB1hD,IAAjBw+B,QACWx+B,IAAX+a,KAKGonC,EAEGA,IACuB,iBAAjB3jB,EACXvkC,OAAOqmB,QAAQhF,MACb,uJAAuJkjB,GAGzJvkC,OAAOqmB,QAAQhF,MACd,qFAMH,MAAMglC,GAASC,EAAAA,EAAAA,YAAYxV,GACrByV,GAASD,EAAAA,EAAAA,YAAYvV,GAE3B,GAAKoX,EAA0B,CAC9B,MAAMC,EAAgB5pB,IAAagpB,EAAYnB,EAASE,EAClDpV,EAAOiX,EAAcnpB,WAAYsF,GACjC9lC,GAAQ2nD,EAAAA,EAAAA,SACbp3C,EAAAA,EAAAA,QAAQ,CAAEmiC,SACV8R,GACAniC,EACAA,GAGDsnC,EAAcnpB,WAAYsF,IAAiB8M,EAAAA,EAAAA,cAAc,CACxD5yC,SAEF,CAIA,MAAMgoD,EACL3V,EAAO/xC,OAASgyC,EAAOhyC,KACpB,CAAEwnD,IACF7V,EAAAA,EAAAA,mBAAmB6V,EAAQzV,EAAO/xC,MAGtC,IAAO0nD,IAA2BA,EAAsB1jD,OACvD,OAID,MAAM2jD,EAAoBgB,EAAWzX,MACpCoW,EAAOpnB,WACPwnB,EAAuB,GAAIxnB,YAG5B,GAAKkpB,EAA0B,CAC9B,MAAMxB,EACLzD,GAA2BwD,GACtBE,EAAgBF,EAAmBC,GACnCE,GAAiB73C,EAAAA,EAAAA,QAAQ,CAAEmiC,KAAMyV,IACjCE,EAAYD,EAAerqC,KAAKle,QACrC2kD,IAEK8D,GAAWl8B,EAAAA,EAAAA,QAAQg8B,EAAgBC,EAAWA,EAAY,GAC1DE,GAAU3V,EAAAA,EAAAA,cAAc,CAAE5yC,MAAOsoD,IAEvCL,EAAmBC,GAAoBK,EAEvCtK,EAASwK,gBACRpW,EAAOtS,SACPmoB,EACAG,EACAA,EAEF,CAEApK,EAASoI,cACR,CAAEhU,EAAOtS,SAAUuS,EAAOvS,UAC1B,CACC,IACIsS,EACH7R,WAAY,IACR6R,EAAO7R,cACPynB,OAGFD,EAAsBvhD,MAAO,IAEjC,EACA,EAcUmjD,GAAeA,CAAE7oB,EAAW8H,GAAiB,IACzDkV,GAAqBhd,EAAW8H,GAY1B,SAASugB,GAAarpB,EAAU8I,GACtC,OAAO+gB,GAAc,CAAE7pB,GAAY8I,EACpC,CAaO,SAASghB,GACf/pB,EACAD,EACAuF,GAAkB,EAClBkB,EAAkB,GAGlB,MAAO,CACNnyB,KAAM,uBACN2rB,eACAD,SACAuF,kBACAkB,gBAAiBlB,EAAkBkB,EAAkB,KACrDoB,KAAM+O,KAAKC,MAEb,CAUO,SAASoT,GAAiB/pB,GAChC,MAAO,CACN5rB,KAAM,oBACN4rB,WAEF,CAOO,SAASgqB,KACf,MAAO,CACN51C,KAAM,eAER,CAOO,SAAS61C,KACf,MAAO,CACN71C,KAAM,cAER,CASO,SAAS81C,GAAqBlpB,EAAY,IAChD,MAAO,CACN5sB,KAAM,wBACN4sB,YAEF,CAOO,SAASmpB,KACf,MAAO,CACN/1C,KAAM,uBAER,CASO,SAASg2C,KAKf,OAJA9c,IAAY,6DAA8D,CACzEC,MAAO,MACPxlB,QAAS,QAEH,CACN3T,KAAM,aAER,CASO,SAASi2C,KAKf,OAJA/c,IAAY,4DAA6D,CACxEC,MAAO,MACPxlB,QAAS,QAEH,CACN3T,KAAM,aAER,CAYO,SAASs0C,GACf1oB,EACA+F,EACAC,EACAE,GAEA,MAAyB,iBAAblG,EACJ,CACN5rB,KAAM,mBACN4rB,WACA+F,eACAC,cACAE,aAIK,CAAE9xB,KAAM,sBAAuB4rB,EACvC,CAUO,MAAM2e,GACZA,CAAEle,EAAYV,EAAc3/B,IAC5B,EAAI89C,eAEH,MAAMoM,GAAmBC,EAAAA,EAAAA,uBACzB,IAAOD,EACN,OAGD,MAAMh3B,GAAQk3B,EAAAA,EAAAA,aAAaF,EAAkB7pB,GAE7C,OAAOyd,EAAS2I,YAAavzB,EAAOlzB,EAAO2/B,EAAc,EAYpD,SAASwf,GAAyBvf,EAAU2G,GAClD,MAAO,CACNvyB,KAAM,6BACN4rB,WACA2G,WAEF,CASO,SAAS6Y,GAAgB7Y,GAC/B,OAAOgX,GAA8BhX,EAAU,CAC9CiX,2BAA2B,GAE7B,CAWO,SAAS6M,GAA6B1tC,EAAImlB,GAChD,MAAO,CACN9tB,KAAM,8BACN2I,KACAmlB,YAEF,CAOO,SAASwoB,KACf,MAAO,CAAEt2C,KAAM,iCAChB,CAOO,SAASirC,KACf,MAAO,CAAEjrC,KAAM,qCAChB,CASO,MAAMu2C,GACZA,IACA,EAAIzM,eACHA,EAAU,CAAE9pC,KAAM,0BAClB,MAAM,oBAAEw2C,EAAwB3yC,IAAQ3Q,WAAY2Q,EAAI,OACvDzW,OACDopD,GAAqB,KACpB1M,EAAU,CAAE9pC,KAAM,+BAAiC,GACjD,EAQQy2C,GACZA,CAAEnP,GAAmB,IACrB,EAAIwC,eACHA,EAAS4M,wBACRpP,EAAmB,aAAe,OAClC,EAQUoP,GACV9iB,GACF,EAAIkW,WAAU1W,aAEb,GAAc,aAATQ,EAAsB,CAC1B,MAAM+iB,EAAwBvjB,EAAOkH,yBAChCqc,GACJ7M,EAASoH,YACR9d,EAAO+H,8BACNwb,GAIJ,CAEA7M,EAAU,CAAE9pC,KAAM,kBAAmB4zB,SAEvB,eAATA,GACJie,EAAAA,GAAAA,QACCptB,EAAAA,EAAAA,IACC,4NAGkB,SAATmP,GACXie,EAAAA,GAAAA,QACCptB,EAAAA,EAAAA,IACC,oFAGkB,aAATmP,IACXie,EAAAA,GAAAA,QAAOptB,EAAAA,EAAAA,IAAI,uCACZ,EAQWmyB,GACZA,CAAE/iB,EAAyB,OAC3B,EAAIiW,eACHA,EAAU,CAAE9pC,KAAM,wBAAyB6zB,2BAEtCA,IACJge,EAAAA,GAAAA,QACCptB,EAAAA,EAAAA,IACC,gMAGH,EASWoyB,GACZA,CAAEjqB,EAAWqE,GAAkB,IAC/B,EAAImC,SAAQ0W,eACX,IAAOld,IAAeA,EAAUz8B,OAC/B,OAID,MAAMu7B,EAAS0H,EAAO6G,oBAAqBrN,GAC3C,GAAKlB,EAAOlsB,MAAQ0f,IAAaA,IAChC,OAID,MAAM2a,EAAanO,EAAOpgC,KAAO4zB,GAAWA,EAAM/yB,OAClD,GACC0tC,EAAWr6B,MACR2zB,KACC6O,EAAAA,EAAAA,iBAAiB7O,EAAW,YAAY,KAG5C,OAGD,MAAMxH,EAAeyH,EAAOyH,qBAAsBjO,EAAW,IACvDkqB,EAAiBrG,GAAW7jB,GAC5BmqB,EAAoB3jB,EAAOsL,cAChCoY,EAAgBA,EAAe3mD,OAAS,IAEnC6mD,EAAetrB,EAAOpgC,KAAO4zB,IAClC+3B,EAAAA,EAAAA,mCAAmC/3B,KAcpC,OAZA4qB,EAAS4I,aACRsE,EACAD,EAAoB,EACpBprB,EACAsF,GAEI+lB,EAAa7mD,OAAS,GAAK8gC,GAC/B6Y,EAAS4H,YACRsF,EAAc,GAAIprB,SAClBorB,EAAcA,EAAa7mD,OAAS,GAAIy7B,UAGnCorB,EAAa1rD,KAAO4zB,GAAWA,EAAM0M,UAAU,EAQ3CsrB,GACVtrB,GACF,EAAIwH,SAAQ0W,eACX,IAAOle,EACN,OAED,MAAMD,EAAeyH,EAAOyH,qBAAsBjP,GAElD,GADiBwH,EAAO0M,gBAAiBnU,GAExC,OAGD,MAAMwrB,EAAa/jB,EAAOsL,cAAe9S,GACnCwrB,EAAoBzrB,EACvByH,EAAOkS,qBAAsB3Z,GAC7B,KAEH,IAAOyrB,EACN,OAAOtN,EAASS,mBAAoB,CAAC,EAAG5e,EAAcwrB,GAGvD,MAAME,EAAmB,CAAC,EAC1B,GAAKD,EAAkBE,iBAAmB,CACzC,MAAMjrB,EAAa+G,EAAOsF,mBAAoB9M,GAC9CwrB,EAAkBE,iBAAiB/pD,SAAW9B,IACxC4gC,EAAY5gC,KAChB4rD,EAAkB5rD,GAAQ4gC,EAAY5gC,GACvC,GAEF,CAEA,MAAMyzB,GAAQk3B,EAAAA,EAAAA,aAAagB,EAAkBjrD,KAAM,IAC/CirD,EAAkB/qB,cAClBgrB,IAEJ,OAAOvN,EAAS2I,YAAavzB,EAAOi4B,EAAYxrB,EAAc,EAQnD4rB,GACV3rB,GACF,EAAIwH,SAAQ0W,eACX,IAAOle,EACN,OAED,MAAMD,EAAeyH,EAAOyH,qBAAsBjP,GAElD,GADiBwH,EAAO0M,gBAAiBnU,GAExC,OAGD,MAAMwrB,EAAa/jB,EAAOsL,cAAe9S,GACnCwrB,EAAoBzrB,EACvByH,EAAOkS,qBAAsB3Z,GAC7B,KAEH,IAAOyrB,EACN,OAAOtN,EAASS,mBACf,CAAC,EACD5e,EACAwrB,EAAa,GAIf,MAAME,EAAmB,CAAC,EAC1B,GAAKD,EAAkBE,iBAAmB,CACzC,MAAMjrB,EAAa+G,EAAOsF,mBAAoB9M,GAC9CwrB,EAAkBE,iBAAiB/pD,SAAW9B,IACxC4gC,EAAY5gC,KAChB4rD,EAAkB5rD,GAAQ4gC,EAAY5gC,GACvC,GAEF,CAEA,MAAMyzB,GAAQk3B,EAAAA,EAAAA,aAAagB,EAAkBjrD,KAAM,IAC/CirD,EAAkB/qB,cAClBgrB,IAEJ,OAAOvN,EAAS2I,YAAavzB,EAAOi4B,EAAa,EAAGxrB,EAAc,EAS7D,SAAS6rB,GAAsB5rB,EAAUoI,GAC/C,MAAO,CACNh0B,KAAM,yBACN4rB,WACAoI,gBAEF,CAOO,MAAMyjB,GACV7rB,GACF5Z,OAAU83B,eACTA,EAAU0N,GAAsB5rB,GAAU,UACpC,IAAIzZ,SAAW9E,GAAana,WAAYma,EAAS,OACvDy8B,EAAU0N,GAAsB5rB,GAAU,GAAS,EAS9C,SAAS8rB,GACf9rB,EACAmF,GAEA,MAAO,CACN/wB,KAAM,kCACN+wB,2BACAnF,WAEF,CAOO,SAAS+rB,GAAoB/nB,GACnC,MAAO,CACN5vB,KAAM,uBACN4vB,UAEF,CAYO,SAAS0b,GACfnX,EACAE,GAEA,MAAO,CACNr0B,KAAM,oCACNm0B,6BACAE,oBAEF,CA4HO,MAAMujB,GACV7iB,GACF,EAAI3B,SAAQ0W,eACX,IAAO/U,GAAgC,iBAAbA,EAIzB,YAHAthB,QAAQhF,MACP,yDAIF,IAAOsmB,EAAS5oC,KAIf,YAHAsnB,QAAQhF,MACP,mFAIF,IAAOsmB,EAAS8iB,QAAQ1rD,KAEvB,YADAsnB,QAAQhF,MAAO,yCAGhB,IAAO,CAAE,QAAS,QAAS,SAAUnF,SAAUyrB,EAAS2a,WAIvD,YAHAj8B,QAAQhF,MACP,iFAIF,IAAOsmB,EAAS+iB,OAAmC,mBAAnB/iB,EAAS+iB,MAIxC,YAHArkC,QAAQhF,MACP,0IAIF,MAAMqmB,EACL1B,EAAOic,uCAEPva,EAAkCt1B,MACjC,EAAIrT,UAAYA,IAAS4oC,EAAS5oC,OAGnCsnB,QAAQhF,MACN,yDAAyDsmB,EAAS5oC,UAKpE2oC,EAAkCt1B,MACjC,EAAIq4C,QAAU1rD,QAAS,CAAC,KAASA,IAAS4oC,EAAS8iB,QAAQ1rD,OAG5DsnB,QAAQhF,MACN,gEAAgEsmB,EAAS8iB,OAAO1rD,UAQnF29C,EAAU,CACT9pC,KAAM,mCACN+0B,SAAU,IAAKA,EAAUgjB,oBAAoB,IAC3C,EAkBE,SAASC,GAAqBpsB,EAAW,GAAIgI,GACnD,MAAO,CACN5zB,KAAM,yBACN4rB,WACAgI,OAEF,CAWO,SAASqkB,GAAuBrsB,EAAW,IACjD,MAAO,CACN5rB,KAAM,2BACN4rB,WAEF,CCl3DO,MAAMssB,GAAc,CAC1BrqB,QAAO,EACPxP,UAAS,EACT85B,QAAOA,GAQKC,IAAQC,EAAAA,EAAAA,kBAAkB1hB,GAAY,IAC/CuhB,GACHI,QAAS,CAAE,iBAKNC,IAAkBC,EAAAA,EAAAA,eAAe7hB,GAAY,IAC/CuhB,GACHI,QAAS,CAAE,iBCfL,SAASG,MAAgBxK,GAC/B,MAAM,SAAEriB,EAAW,MAAS5C,IAC5B,OAAO0vB,EAAAA,EAAAA,YACJtlB,GACDqD,GAAQrD,EAAQulB,KAAqB3K,iBACpCpiB,KACGqiB,IAGL,CAAEriB,KAAaqiB,GAEjB,CAgBO,SAAS2K,GAAYxkD,GAC3B8kC,IAAY,4BAA6B,CACxCC,MAAO,MACPa,YAAa,6BACb6e,KAAM,kGAGP,MAAQhtD,GAAU4sD,GAAarkD,GAC/B,OAAOvI,CACR,CDnBA4qC,GAAQ8hB,IAAkBO,uBAAwBC,GAClDtiB,GAAQ8hB,IAAkBS,yBAA0BC,GASpDxiB,GAAQ2hB,IAAQU,uBAAwBC,GACxCtiB,GAAQ2hB,IAAQY,yBAA0BC,GE/C1C,MAAMC,GAAiC,SACjCC,GAAiC,QACjCC,GAAuB,EACvBC,GAAuC,IACvCC,GAAuC,IACvCC,GAAkC,OAgCjC,SAASC,IAAiC,gBAChDC,EAAe,gBACfC,EAAe,SACf9iD,EAAQ,qBACR+iD,EAAuBR,GAA8B,qBACrDS,EAAuBV,GAA8B,YACrDW,EAAcT,GAAoB,qBAClCU,IAWA,GARAA,EAA0BC,GAA2BD,GAClDA,EACAP,GAME3iD,EAAW,CAEf,MAAMojD,EAAiBD,GAA2BnjD,GAGlD,IAAOojD,GAAgBj2C,KACtB,OAAO,KAIR,MAAMk2C,EAA6BF,GAClCD,EACA,CACCI,SAAUF,EAAej2C,OAK3B,GACIk2C,GAA4BpuD,QAC7B4tD,IACAC,GAOGM,GAAgBnuD,OAASouD,GAA4BpuD,MACzD,OAAO,KAaT,GARO6tD,IACNA,EAAmB,GAAGM,EAAenuD,QAAUmuD,EAAej2C,SAOxD01C,EAAkB,CACxB,MAAMU,EACmB,OAAxBH,EAAej2C,KACZi2C,EAAenuD,MACQ,GAAvBmuD,EAAenuD,MAQbuuD,EAAwB9qD,KAAKqc,IAClCrc,KAAKmW,IACJ,EAAI,KAAQnW,KAAK+qD,KAAMF,GACvBd,IAEDC,IAIKgB,EAA4BC,GACjCP,EAAenuD,MAAQuuD,EACvB,GAQAX,EAHGQ,GAA4BpuD,OAC/ByuD,EAA4BL,GAA4BpuD,MAErC,GAAGouD,EAA2BpuD,QAAUouD,EAA2Bl2C,OAEnE,GAAGu2C,IAA8BN,EAAej2C,MAErE,CACD,CAGA,MAAMy2C,EAAwBT,GAA2BN,GAInDgB,EAAeD,GAAuBz2C,MAAQ,MAG9C22C,EAAwBX,GAA2BL,EAAiB,CACzEQ,SAAUO,IAIX,IAAOD,IAA2BE,EACjC,OAAO,KAIR,MAAMC,EAAqBZ,GAA2BN,EAAiB,CACtES,SAAU,QAILU,EAA6Bb,GAClCH,EACA,CAAEM,SAAUO,IAEPI,EAA6Bd,GAClCJ,EACA,CAAEO,SAAUO,IAIb,IACGG,IACAC,IACAF,EAEF,OAAO,KAIR,MAAMG,EACLF,EAA2B/uD,MAAQgvD,EAA2BhvD,MAC/D,IAAOivD,EACN,OAAO,KAKR,MAAMC,EAA8BR,GACnCM,EAA2BhvD,MAAQ,IACnC,GAGKmvD,EACLT,GAAkBQ,EAA6B,GAAMN,EAKhDQ,EAAqBV,KAFtBG,EAAsB7uD,MAAQ2uD,EAAsB3uD,OACvDivD,EAFD,KAIkB,GAAMjB,EACxB,GAID,MAAQ,SAASJ,MAFekB,EAAmB9uD,QAAU8uD,EAAmB52C,kBAAoBi3C,QAA4BC,OAE/DvB,IAClE,CAWO,SAASK,GAA2B96B,EAAUlvB,EAAU,CAAC,GAC/D,GAAyB,iBAAbkvB,GAA6C,iBAAbA,EAC3C,OAAO,KAIHi8B,SAAUj8B,KACdA,EAAY,GAAGA,OAGhB,MAAM,SAAEi7B,EAAQ,cAAEiB,EAAa,gBAAEC,GAAoB,CACpDlB,SAAU,GAEViB,cAAe,GACfC,gBAAiB,CAAE,MAAO,KAAM,SAC7BrrD,GAGEsrD,EAAuBD,GAAiBlqD,KAAM,KAC9CoqD,EAAa,IAAIxlD,OACrB,mBAAmBulD,YAGfE,EAAUt8B,EAASvf,MAAO47C,GAGhC,IAAOC,GAAWA,EAAQprD,OAAS,EAClC,OAAO,KAGR,IAAK,CAAGtE,EAAOkY,GAASw3C,EAEpBC,EAAcvtD,WAAYpC,GAwB9B,MAtBK,OAASquD,GAAc,OAASn2C,GAAQ,QAAUA,IACtDy3C,GAA4BL,EAC5Bp3C,EAAOm2C,GAGH,OAASn2C,GAAU,OAASm2C,GAAY,QAAUA,IACtDsB,GAA4BL,EAC5Bp3C,EAAOm2C,GASL,OAASA,GAAY,QAAUA,GAC/B,OAASn2C,GAAQ,QAAUA,IAE7BA,EAAOm2C,GAGD,CACNruD,MAAO0uD,GAAkBiB,EAAa,GACtCz3C,OAEF,CAWO,SAASw2C,GAAkB1uD,EAAO4vD,EAAS,GACjD,MAAMC,EAAOpsD,KAAKqsD,IAAK,GAAIF,GAC3B,OAAOG,OAAOV,SAAUrvD,GACrBoC,WAAYqB,KAAKC,MAAO1D,EAAQ6vD,GAASA,QACzCvoD,CACJ,CCzPO,SAAS0oD,GAA4BC,EAAQvpB,GACnD,MAAQ98B,KAAMqyB,GAAgBg0B,EAE9B,IAAOC,GAA0BxpB,GAAUypB,YAC1C,OAAOl0B,EAOR,IAAOA,GAAe,MAAQA,IAAe,IAAUg0B,GAAQG,MAC9D,OAAOn0B,EAGR,IAAIo0B,EAyCE,SAAgD3pB,GACtD,MAAM4pB,EAAqB5pB,GAAUypB,WAC/BI,EAAiB7pB,GAAU8pB,OAC3BC,EAA0BvC,GAC/BqC,GAAgBG,UAEdH,GAAgBG,SAChB,KACH,OAAOR,GAA0BI,IAChCG,EACE,CACAL,MAAO,CACNO,iBAAkBF,KACfH,EAAmBF,QAGvB,CACAA,MAAOE,GAAoBF,MAE/B,CA3DEQ,CAAuClqB,GACxC2pB,EAC2C,iBAAnCA,GAAyBD,MAC7BC,GAAyBD,MACzB,CAAC,EAWL,OAT2BzC,GAAiC,CAC3DC,gBAAiBqC,GAAQG,OAAOtwC,IAChC+tC,gBAAiBoC,GAAQG,OAAOx2C,IAChC7O,SAAUkxB,EACVgyB,qBAAsBoC,GAAyBQ,YAC/C9C,qBAAsBsC,GAAyBM,iBAC/C7C,qBAAsBuC,GAAyBS,oBAOzC70B,CACR,CAEA,SAASi0B,GAA0BI,GAClC,MAAMS,EAAgBT,GAAoBF,MAC1C,OACC,IAASW,GACPA,GACwB,iBAAlBA,GACPtvD,OAAOlC,KAAMwxD,GAAgBzsD,OAAS,CAEzC,CClFO,MAAM0sD,GAAsB,OACtBC,GAA+B,QAE/BC,GAAkB,CAC9B,CACC3oD,KAAM,CAAE,QAAS,WACjB4oD,SAAU,QACVC,YAAa,QACbxsD,QAAS,CACR,CAAEysD,YAAa,QAASC,aAAc,SACtC,CACCD,YAAa,mBACbC,aAAc,oBAEf,CACCD,YAAa,eACbC,aAAc,kBAIjB,CACC/oD,KAAM,CAAE,QAAS,aACjB4oD,SAAU,WACVC,YAAa,WACbxsD,QAAS,CACR,CACCysD,YAAa,sBACbC,aAAc,gBAIjB,CACC/oD,KAAM,CAAE,QAAS,WACjB4oD,SAAU,SACVC,YAAa,UACbG,UAAWA,EAAI5zB,UAAa,qBAAqBA,OACjD/4B,QAAS,IAEV,CACC2D,KAAM,CAAE,SAAU,WAClB4oD,SAAU,SACVC,YAAa,SACbxsD,QAAS,IAEV,CACC2D,KAAM,CAAE,aAAc,aACtBgpD,UAAWA,CAAEtB,EAAQvpB,IACpBspB,GAA4BC,EAAQvpB,GACrCyqB,SAAU,OACVC,YAAa,YACbxsD,QAAS,CAAE,CAAEysD,YAAa,YAAaC,aAAc,eAEtD,CACC/oD,KAAM,CAAE,aAAc,gBACtB4oD,SAAU,aACVC,YAAa,cACbxsD,QAAS,CACR,CAAEysD,YAAa,cAAeC,aAAc,iBAG9C,CACC/oD,KAAM,CAAE,UAAW,gBACnB4oD,SAAU,OACVC,YAAa,UACbG,UAAWA,EAAI3nD,UAAYA,EAC3BhF,QAAS,KAIE4sD,GAA8B,CAC1C,mBAAoB,QACpB,aAAc,QACd,iBAAkB,UAClB,2BAA4B,QAC5B,kCAAmC,QACnC,sCAAuC,cACvC,oCAAqC,YACrC,6BAA8B,QAC9B,mCAAoC,QACpC,8BAA+B,QAC/B,wCAAyC,cACzC,sCAAuC,YACvC,yBAA0B,QAC1B,oCAAqC,QACrC,yCAA0C,cAC1C,4BAA6B,WAC7B,kCAAmC,WACnC,oBAAqB,QACrB,+BAAgC,QAChC,oCAAqC,cACrC,6BAA8B,WAC9B,oBAAqB,QACrB,+BAAgC,QAChC,oCAAqC,cACrC,6BAA8B,WAC9B,oBAAqB,QACrB,+BAAgC,QAChC,oCAAqC,cACrC,6BAA8B,WAC9B,oBAAqB,QACrB,+BAAgC,QAChC,oCAAqC,cACrC,6BAA8B,WAC9B,oBAAqB,QACrB,+BAAgC,QAChC,oCAAqC,cACrC,6BAA8B,WAC9B,oBAAqB,QACrB,+BAAgC,QAChC,oCAAqC,cACrC,6BAA8B,WAC9B,iBAAkB,WAClBC,OAAQ,SACR,sBAAuB,YACvB,wBAAyB,eAYbC,GAAgC,CAC5CC,aAAc,CACbC,UAAW,aACXvvC,OAAQ,MAIV,SAASwvC,GACRC,EACAxqB,EACAyqB,EACAC,EACAC,GAGA,MAAMC,EAAyB,CAC9BnR,GAAwB+Q,EAAU,CACjC,SACAxqB,KACGyqB,IAEJhR,GAAwB+Q,EAAUC,IAGnC,IAAM,MAAMI,KAAkBD,EAC7B,GAAKC,EAAiB,CAErB,MAAMC,EAAU,CAAE,SAAU,QAAS,WACrC,IAAM,MAAMvvC,KAAUuvC,EAAU,CAC/B,MAAMC,EAAUF,EAAgBtvC,GAChC,GAAKwvC,EAAU,CACd,MAAMC,EAAeD,EAAQpY,MAC1BgW,GACDA,EAAQ+B,KAAqBC,IAE/B,GAAKK,EACJ,MAAwB,SAAnBN,GAImCH,GACvCC,EACAxqB,EACAyqB,EACA,OACAO,EAAa30B,MAIZq0B,KACKM,EAAcN,GAbbM,OAiBR,CAEF,CACD,CACD,CAEF,CAgGO,SAASC,GAAsBT,EAAUxqB,EAAWnnB,GAC1D,IAAOA,GAAgC,iBAAbA,EAAwB,CACjD,IAAKA,GAAUma,KAAgC,iBAAlBna,GAAUma,IAStC,OAAOna,EATkD,CACzD,MAAMqyC,EAAUryC,EAASma,IAAInxB,MAAO,KAIpC,KAHAgX,EAAW4gC,GAAwB+Q,EAAUU,KAGvBryC,GAAUma,IAC/B,OAAOna,CAET,CAGD,CAKA,IAAIsyC,EAEJ,GAAKtyC,EAAS1M,WANY,QAOzBg/C,EAAYtyC,EAAS1Z,MAAOisD,GAA2BvpD,MAAO,SACxD,KACNgX,EAAS1M,WARiB,gBAS1B0M,EAASwyC,SARiB,KAe1B,OAAOxyC,EALPsyC,EAAYtyC,EACV1Z,MAAOmsD,IAA4BC,GACnC1pD,MAAO,KAIV,CAEA,MAAQgL,KAAS5L,GAASkqD,EAC1B,MAAc,WAATt+C,EAzFN,SACC29C,EACAxqB,EACAnnB,GACE2yC,EAAYn1B,IAEd,MAAMwc,EAAW+W,GAAgBjX,MAC9B9yB,GAAUA,EAAKiqC,cAAgB0B,IAElC,IAAO3Y,EACN,OAAOh6B,EAGR,MAAMmyC,EAAeT,GACpBC,EAASprB,SACTY,EACA6S,EAAS5xC,KACT,OACAo1B,GAGD,GAAK20B,EAAe,CACnB,MAAM,SAAEnB,GAAahX,EAErB,OAAOoY,GAAsBT,EAAUxqB,EADxBgrB,EAAcnB,GAE9B,CAEA,OAAOhxC,CACR,CA8DS4yC,CACNjB,EACAxqB,EACAnnB,EACA5X,GAGY,WAAT4L,EAnEN,SAAqC29C,EAAUxqB,EAAWnnB,EAAU5X,GAAO,IAAAi6C,EAC1E,MAAMjtC,EAMF,QANQitC,EACXzB,GAAwB+Q,EAASprB,SAAU,CAC1C,SACAY,EACA,YACG/+B,WACD,IAAAi6C,EAAAA,EACHzB,GAAwB+Q,EAASprB,SAAU,CAAE,YAAan+B,IAC3D,OAAOgN,EAIAg9C,GAAsBT,EAAUxqB,EAAW/xB,GAH1C4K,CAIT,CAsDS6yC,CACNlB,EACAxqB,EACAnnB,EACA5X,GAGK4X,CACR,CAmBO,SAAS8yC,GAAeC,EAAOhgD,GACrC,MAAMigD,EAASD,EAAM/pD,MAAO,KACtBqpB,EAAYtf,EAAS/J,MAAO,KAE5BiqD,EAAkB,GAOxB,OANAD,EAAOzxD,SAAW2xD,IACjB7gC,EAAU9wB,SAAWwD,IACpBkuD,EAAgBnzD,KAAO,GAAGozD,EAAM7qC,UAAYtjB,EAAMsjB,SAAW,GAC3D,IAGG4qC,EAAgB/tD,KAAM,KAC9B,CAuCO,SAASiuD,GAA4B1oC,EAAU2tB,GACrD,MAAyB,iBAAb3tB,GAA8C,iBAAd2tB,EACpC3tB,IAAa2tB,EAGpBzX,IAAelW,GAAUyU,OAAQkZ,GAAWlZ,SAC5CyB,IAAelW,GAAU8b,SAAU6R,GAAW7R,SAEhD,CCnaO,MAOM6sB,IAAsBt2B,EAAAA,EAAAA,eAPU,CAC5C6iB,KAAM,CAAC,EACP+P,KAAM,CAAC,EACP2D,OAAQ,CAAC,EACTC,cAAeA,SCYVC,GAAe,CAAEhtB,SAAU,CAAC,EAAGrH,OAAQ,CAAC,GAExCs0B,GAAiB,CACtB,kBACA,gCACA,6BACA,8BACA,4BACA,gCACA,eACA,gBACA,eACA,eACA,iBACA,wBACA,mBACA,eACA,gBACA,eACA,sBACA,uBACA,uBACA,yBACA,uBACA,gBACA,kBACA,gBACA,aACA,gBACA,aACA,SACA,yBACA,uBACA,qBACA,qBACA,kBACA,mBACA,wBACA,iBACA,kBACA,4BACA,uBACA,uBACA,mBACA,iBACA,kBACA,gBACA,mBACA,4BACA,qBACA,0BACA,uBACA,uBACA,wBACA,2BACA,wBACA,yBACA,4BACA,2BACA,0BAGYC,GAAuBA,KACnC,MAAQ9T,KAAM9oC,EAAM,cAAEy8C,IAAkBr2B,EAAAA,EAAAA,YAAYm2B,IAEpD,MAAO,GADav8C,IAAY8pB,IAAe9pB,EAAQ08C,KAGtDG,EAAAA,EAAAA,cACC,IAAMJ,GAAe,IAAMC,MAC3B,CAAED,IAEH,EAGK,SAASK,GAAkBC,EAAczsB,EAAWp9B,EAAS,OACnE,MAAM,cAAEupD,KAAkBO,IAAY52B,EAAAA,EAAAA,YAAYm2B,IAC5CU,EAAoB3sB,EAAY,WAAaA,EAAY,GACzD4sB,EAAuBH,EAAe,IAAMA,EAAe,GAC3DI,EAAkB,WAAWF,IAAsBC,IACnDE,EAAc,WAAWF,IACzBG,EAAuB,QAAXnqD,EAAmB,SAAWA,EA0ChD,MAAO,EAxCcoqD,EAAAA,EAAAA,UAAS,KAC7B,MAAMC,EAAcP,EAASK,GAC7B,IAAOE,EACN,KAAM,qBAGa,IAAA/R,EAApB,GAAKuR,EACJ,OACsD,QADtDvR,EACCzB,GAAwBwT,EAAaJ,UAAgB,IAAA3R,EAAAA,EACrDzB,GAAwBwT,EAAaH,GAIvC,IAAI7+C,EAAS,CAAC,EAYd,OAXAo+C,GAAejyD,SAAW8yD,IAAa,IAAAC,EACtC,MAAMz0D,EAIJ,QAJSy0D,EACV1T,GACCwT,EACC,WAAWN,KAAuBO,YACnC,IAAAC,EAAAA,EACD1T,GAAwBwT,EAAc,YAAYC,UACpCltD,IAAVtH,IACJuV,EAASqrC,GAAcrrC,EAAQi/C,EAAQrrD,MAAO,KAAOnJ,GACtD,IAEMuV,CAAM,GACX,CACFy+C,EACAK,EACAN,EACAI,EACAC,EACAH,IAGoB3L,IACpBmL,GAAiBiB,GAChB9T,GAAc8T,EAAeP,EAAehrD,MAAO,KAAOm/C,IAC1D,EAGH,CAEO,SAASqM,GACfpsD,EACA++B,EACAp9B,EAAS,OACT,mBAAE0qD,GAAqB,GAAS,CAAC,GAEjC,MACCpB,OAAQqB,EACRhF,KAAMiF,EACNhV,KAAMiV,EAAU,cAChBtB,IACGr2B,EAAAA,EAAAA,YAAYm2B,IACVyB,EAAezsD,EAAO,IAAMA,EAAO,GACnC0sD,EAAc3tB,EAEhB,iBAAiBA,IAAc0tB,IAD/B,SAASA,IAoBb,IAAIE,EAAW3/C,EACf,OAASrL,GACR,IAAK,MACJgrD,EAAYnU,GAAwB8T,EAAcI,GAClD1/C,EAASq/C,EACNrC,GAAsBsC,EAAcvtB,EAAW4tB,GAC/CA,EACH,MACD,IAAK,OACJA,EAAYnU,GAAwBgU,EAAYE,GAChD1/C,EAASq/C,EACNrC,GAAsBsC,EAAcvtB,EAAW4tB,GAC/CA,EACH,MACD,IAAK,OACJA,EAAYnU,GAAwB+T,EAAYG,GAChD1/C,EAASq/C,EACNrC,GAAsBuC,EAAYxtB,EAAW4tB,GAC7CA,EACH,MACD,QACC,KAAM,qBAGR,MAAO,CAAE3/C,EAzCU+yC,IAClBmL,GAAiBiB,GAChB9T,GACC8T,EACAO,EAAU9rD,MAAO,KACjByrD,EFgCG,SACN9C,EACAxqB,EACA6tB,EACAC,GAEA,IAAOA,EACN,OAAOA,EAGR,MAAMhE,EAAcI,GAA6B2D,GAE3Chb,EAAW+W,GAAgBjX,MAC9B9yB,GAAUA,EAAKiqC,cAAgBA,IAGlC,IAAOjX,EAGN,OAAOib,EAER,MAAM,SAAEjE,EAAQ,KAAE5oD,GAAS4xC,EAErBmY,EAAeT,GACpBC,EACAxqB,EACA/+B,EACA4oD,EACAiE,GAGD,OAAO9C,EAMC,cAAclB,KAAiBkB,EAAa30B,OAH5Cy3B,CAIT,CErEOC,CACAR,EAAanuB,SACbY,EACA/+B,EACA+/C,GAEAA,IAEJ,EA4BH,CAWO,SAASgN,GACfC,EACAjuB,EACAt4B,GAEA,MAAM,gBAAEwmD,EAAe,SAAEC,IAAa5I,EAAAA,EAAAA,YACnCtlB,IACM,CACNiuB,gBAAiB5qB,GAChBrD,EAAQC,EAAAA,QACPkuB,mBAAoBpuB,EAAWt4B,GACjCymD,SACCluB,EAAQC,EAAAA,OAAc+J,aAAcjK,IAAamuB,YAGpD,CAAEnuB,EAAWt4B,IAGd,OAAOslD,EAAAA,EAAAA,UAAS,KACf,MAAMqB,EAAkB,IAAKJ,GAyI7B,OAvIOC,EAAgB/3C,SAAU,cAChCk4C,EAAgBxF,WAAa,IACzBwF,EAAgBxF,WACnBvyB,UAAW,CAAC,EACZg4B,gBAAgB,IAIXJ,EAAgB/3C,SAAU,gBAChCk4C,EAAgBxF,WAAa,IACzBwF,EAAgBxF,WACnB0F,aAAc,CAAC,IAIjBF,EAAgBn2C,MAAQ,IACpBm2C,EAAgBn2C,MACnBzB,KACC43C,EAAgBn2C,OAAOzB,MACvBy3C,EAAgB/3C,SAAU,SAC3Bq4C,WACCH,EAAgBn2C,OAAOs2C,aACrBN,EAAgB/3C,SAAU,eAC3B+3C,EAAgB/3C,SAAU,oBAC5Bs4C,OACCJ,EAAgBn2C,OAAOu2C,QACvBP,EAAgB/3C,SAAU,eAC3Bu4C,QACCL,EAAgBn2C,OAAOw2C,SACvBR,EAAgB/3C,SAAU,gBAC3Bw4C,KACCN,EAAgBn2C,OAAOy2C,MACvBT,EAAgB/3C,SAAU,aAC3By4C,QACCP,EAAgBn2C,OAAO02C,SACvBV,EAAgB/3C,SAAU,iBAIrB+3C,EAAgB/3C,SAAU,gBAChCk4C,EAAgBn2C,MAAM0f,UAAY,GAClCy2B,EAAgBn2C,MAAM22C,gBAAiB,GAIjCX,EAAgB/3C,SAAU,YAChCk4C,EAAgBn2C,MAAM42C,gBAAiB,EACvCT,EAAgBn2C,MAAM62C,eAAgB,GAGvC,CACC,aACA,YACA,aACA,gBACA,gBACA,iBACA,eACC30D,SAAW9B,IACL41D,EAAgB/3C,SAAU7d,KAChC+1D,EAAgBxF,WAAa,IACzBwF,EAAgBxF,WACnB,CAAEvwD,IAAO,GAEX,IAMM41D,EAAgB/3C,SAAU,iBAChCk4C,EAAgBxF,WAAa,IACzBwF,EAAgBxF,WACnBmG,aAAa,IAIf,CAAE,cAAe,YAAa50D,SAAW9B,IACjC41D,EAAgB/3C,SAAU7d,KAChC+1D,EAAgBnF,OAAS,IACrBmF,EAAgBnF,OACnB,CAAE5wD,IAAO,GAEX,IAGD,CAAE,UAAW,SAAU,YAAa8B,SAAW9B,IACvC41D,EAAgB/3C,SAAU7d,KAChC+1D,EAAgBz1C,QAAU,IACtBy1C,EAAgBz1C,QACnB,CAAEtgB,IAAO,IAIX,MAAM22D,EAAQpyD,MAAMc,QAASwwD,GAAUv1C,UAAWtgB,IAC/C61D,GAAUv1C,UAAWtgB,GACrB61D,GAAUv1C,UAAWtgB,IAAO22D,MAE1BA,GAAOjyD,QAAUqxD,EAAgBz1C,UAAWtgB,KAChD+1D,EAAgBz1C,QAAU,IACtBy1C,EAAgBz1C,QACnB,CAAEtgB,GAAO,IACL+1D,EAAgBz1C,UAAWtgB,GAC9B22D,UAGH,IAGD,CAAE,cAAe,aAAc70D,SAAW9B,IAClC41D,EAAgB/3C,SAAU7d,KAChC+1D,EAAgBa,WAAa,IACzBb,EAAgBa,WACnB,CAAE52D,IAAO,GAEX,IAGD,CAAE,SAAU,QAAS,QAAS,SAAU8B,SAAW9B,IAE/C41D,EAAgB/3C,SACjB,SAAW7d,EAAI42B,OAAQ,GAAI7wB,cAAgB/F,EAAI6G,MAAO,MAGvDkvD,EAAgB1qD,OAAS,IACrB0qD,EAAgB1qD,OACnB,CAAErL,IAAO,GAEX,IAGD+1D,EAAgBlE,SAAS+D,EAAgB/3C,SAAU,WAChDk4C,EAAgBlE,OAGZkE,CAAe,GACpB,CAAEJ,EAAgBC,EAAiBC,GACvC,CAEO,SAASgB,GAAoB/vB,GACnC,MAAMgwB,EAAehwB,GAAUlnB,OAAOm3C,SAASt8C,OACzCu8C,EAAclwB,GAAUlnB,OAAOm3C,SAAS5W,MACxC8W,EAAgBnwB,GAAUlnB,OAAOm3C,SAASnyD,QAC1CsyD,EAA6BpwB,GAAUlnB,OAAOu3C,eAEpD,OAAOzC,EAAAA,EAAAA,UAAS,KACf,MAAM/+C,EAAS,GAgCf,OA/BKqhD,GAAeA,EAAYtyD,QAC/BiR,EAAOtV,KAAM,CACZK,MAAMu9B,EAAAA,EAAAA,IACL,QACA,gDAEDH,OAAQk5B,IAITE,GACAD,GACAA,EAAcvyD,QAEdiR,EAAOtV,KAAM,CACZK,MAAMu9B,EAAAA,EAAAA,IACL,UACA,gDAEDH,OAAQm5B,IAGLH,GAAgBA,EAAapyD,QACjCiR,EAAOtV,KAAM,CACZK,MAAMu9B,EAAAA,EAAAA,IACL,SACA,kDAEDH,OAAQg5B,IAGHnhD,CAAM,GACX,CACFmhD,EACAE,EACAC,EACAC,GAEF,CAEO,SAASE,GAAuBtwB,GACtC,MAAMuwB,EAAkBvwB,GAAUlnB,OAAO0f,WAAW7kB,OAC9C68C,EAAiBxwB,GAAUlnB,OAAO0f,WAAW6gB,MAC7CoX,EAAmBzwB,GAAUlnB,OAAO0f,WAAW16B,QAC/C4yD,EAAgC1wB,GAAUlnB,OAAO23C,iBAEvD,OAAO7C,EAAAA,EAAAA,UAAS,KACf,MAAM/+C,EAAS,GAgCf,OA/BK2hD,GAAkBA,EAAe5yD,QACrCiR,EAAOtV,KAAM,CACZK,MAAMu9B,EAAAA,EAAAA,IACL,QACA,gDAEDqB,UAAWg4B,IAIZE,GACAD,GACAA,EAAiB7yD,QAEjBiR,EAAOtV,KAAM,CACZK,MAAMu9B,EAAAA,EAAAA,IACL,UACA,gDAEDqB,UAAWi4B,IAGRF,GAAmBA,EAAgB3yD,QACvCiR,EAAOtV,KAAM,CACZK,MAAMu9B,EAAAA,EAAAA,IACL,SACA,kDAEDqB,UAAW+3B,IAGN1hD,CAAM,GACX,CACF0hD,EACAC,EACAC,EACAC,GAEF,C,0BCrbO,MAAMC,GAAqBz/B,IACjC,GACY,OAAXA,GACkB,iBAAXA,GACPzzB,MAAMc,QAAS2yB,GAEf,OAAOA,EAGR,MAAM0/B,EAAuB71D,OAAOoI,QAAS+tB,GAC3Cn4B,KAAK,EAAIG,EAAKI,KAAa,CAAEJ,EAAKy3D,GAAkBr3D,MACpDmT,QAAQ,EAAG,CAAGnT,UAAuBsH,IAAVtH,IAC7B,OAASs3D,EAAqBhzD,OAE3B7C,OAAOglC,YAAa6wB,QADpBhwD,CAC0C,EAGvC,SAASiwD,GACfC,EACAC,EACAliD,EACArL,EACA/J,EACAu3D,GAGA,GACCj2D,OAAOjC,OAAQg4D,QAAAA,EAAkB,CAAC,GAAI75C,OACnCg6C,IAAgBA,IAGnB,OAAOpiD,EAIR,GAAwB,IAAnBmiD,EAAQpzD,QAAgBiR,EAAOyqB,YAAY17B,SAAW4F,EAAO5F,OACjE,OAAOiR,EAKR,IAAIqiD,EAA2B1tD,EAAQ,IAAKs2B,WAK5C,GAAKk3B,EAAQpzD,OAAS,GAAK4F,EAAO5F,OAAS,EAAI,CAC9C,IAAK4F,EAAQ/J,GAGZ,OAAOoV,EAFPqiD,EAA2B1tD,EAAQ/J,IAASqgC,UAI9C,CACA,IAAIq3B,EAActiD,EAqBlB,OApBA9T,OAAOoI,QAAS2tD,GAAiB91D,SAAS,EAAIo2D,EAASH,MACjDA,GACJF,EAAgBK,GAAUp2D,SAAW6G,IACpC,MAAMwvD,EAAahX,GAClB6W,EACArvD,GAEIwvD,IACJF,EAAc,IACVA,EACHr3B,WAAYogB,GACXiX,EAAYr3B,WACZj4B,EACAwvD,IAGH,GAEF,IAEMF,CACR,CAYO,SAASG,GACfC,EACAC,EACAC,GAEA,MAAML,GAAU5O,EAAAA,EAAAA,iBAAiB+O,EAAiBC,GAC5CE,EAAoBN,GAASO,gCAEnC,OAAKl0D,MAAMc,QAASmzD,GACZA,EAAkB36C,SAAU06C,GAG7BC,CACR,CAEO,SAASE,IAAkB,GAAEx7C,EAAE,IAAEpG,EAAG,OAAE6hD,EAAM,eAAEC,GAAmB,CAAC,GACxE,MAAM,iBAAE1Z,EAAgB,oBAAEC,GAAwBnU,IACjD6tB,EAAAA,EAAAA,aAAa3L,KAER4L,GAAaC,EAAAA,EAAAA,UACnBC,EAAAA,EAAAA,YAAW,KAEV,IAAOliD,IAAS6hD,EAAS,OACzB,MAAMM,EAAM/7C,GAAM47C,EAOlB,OANA5Z,EAAkB+Z,EAAK,CACtB/7C,KACApG,MACA6hD,SACAC,mBAEM,KACNzZ,EAAqB8Z,EAAK,CAC1B,GACC,CACF/7C,EACApG,EACA6hD,EACAC,EACAE,EACA5Z,EACAC,GAEF,CAYO,SAAS+Z,GAAkBx4D,EAAMy4D,GACvC,MACCC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACA3D,EACA4D,EACAC,EACAhvD,EACA6rD,EACAoD,EACAC,EACAC,EACAC,EACA7uD,EACA8uD,EACAC,EACAC,EACAC,EACAC,EACAC,EACA3J,EACA4J,EACAC,EACAC,EACAC,EACAC,EACA9D,EACAL,EACAO,EACAC,EACAE,EACAX,EACAqE,EACAC,EACAC,EACAC,EACAC,EACAC,EACA3D,EACA4D,EACAC,EACAC,EACAC,EACAC,EACAC,EACA3J,GACG7E,GACH,6BACA,4BACA,iCACA,kCACA,gCACA,8BACA,+BACA,6BACA,4BACA,uBACA,wBACA,wBACA,yBACA,4BACA,yBACA,2BACA,2BACA,kBACA,iBACA,mBACA,uBACA,gBACA,yBACA,uBACA,SACA,eACA,gBACA,eACA,eACA,eACA,uBACA,sBACA,sBACA,wBACA,uBACA,uBACA,uBACA,sBACA,wBACA,yBACA,wBACA,0BACA,yBACA,uBACA,mBACA,aACA,aACA,gBACA,eACA,UAuID,OAAO0I,IApIahB,EAAAA,EAAAA,UAAS,KACrB,CACNwB,WAAY,CACXkD,kBACAC,kBAEDz5C,MAAO,CACNm3C,QAAS,CACRt8C,OAAQq8C,EACR3W,MAAO6W,EACPpyD,QAASqyD,GAEV33B,UAAW,CACV7kB,OAAQugD,EACR7a,MAAO8a,EACPr2D,QAASs2D,GAEVO,QAAS,CACRhhD,OAAQogD,EACR1a,MAAO2a,EACPl2D,QAASm2D,GAEVxD,mBACAJ,iBACAX,iBACA/7C,OAAQmgD,EACRrE,eAAgB4E,EAChB1E,gBACAP,WAAYkF,EACZ/E,KAAMgF,EACNjF,QAASmF,EACTpF,OAAQqF,EACRr9C,KAAMm9C,GAEP/K,WAAY,CACX0F,aAAc,CACbx7C,OAAQ6+C,EACR10D,QAAS20D,EACTpZ,MAAOqZ,GAERx7B,UAAW,CACVvjB,OAAQg/C,EACR70D,QAAS80D,EACTvZ,MAAOwZ,GAER3D,iBACA4D,YACAC,aACAhvD,aACA6rD,cACAoD,iBACAE,gBACAC,gBACAF,eAEDz5C,QAAS,CACR85C,aAAc,CACb3/C,OAAQ2/C,GAEThvD,UACA8uD,SACAC,WACAE,SAEDhvD,OAAQ,CACPuU,MAAO46C,EACPkB,OAAQjB,EACR/4D,MAAOg5D,EACP33D,MAAO43D,GAER/D,WAAY,CACX0D,cACAC,aAED3J,SACAuI,eACAtH,YAEC,CACFuH,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACA3D,EACA4D,EACAC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","sources":["webpack://wp/./node_modules/autosize/dist/autosize.js","webpack://wp/./node_modules/classnames/index.js","webpack://wp/./node_modules/computed-style/dist/computedStyle.commonjs.js","webpack://wp/./node_modules/diff/src/diff/base.js","webpack://wp/./node_modules/diff/src/diff/character.js","webpack://wp/./node_modules/fast-deep-equal/es6/index.js","webpack://wp/./node_modules/fast-deep-equal/index.js","webpack://wp/./node_modules/line-height/lib/line-height.js","webpack://wp/./node_modules/normalize-wheel/index.js","webpack://wp/./node_modules/normalize-wheel/src/ExecutionEnvironment.js","webpack://wp/./node_modules/normalize-wheel/src/UserAgent_DEPRECATED.js","webpack://wp/./node_modules/normalize-wheel/src/isEventSupported.js","webpack://wp/./node_modules/normalize-wheel/src/normalizeWheel.js","webpack://wp/./node_modules/picocolors/picocolors.browser.js","webpack://wp/./node_modules/postcss-prefixwrap/build/Types.js","webpack://wp/./node_modules/postcss-prefixwrap/build/index.js","webpack://wp/./node_modules/postcss-prefixwrap/build/internal/domain/CSSRuleWrapper.js","webpack://wp/./node_modules/postcss-prefixwrap/build/internal/domain/CSSSelector.js","webpack://wp/./node_modules/postcss-prefixwrap/build/internal/domain/FileIncludeList.js","webpack://wp/./node_modules/postcss-prefixwrap/build/plugin/PostCSS7Plugin.js","webpack://wp/./node_modules/postcss-prefixwrap/build/plugin/PostCSS8Plugin.js","webpack://wp/./node_modules/postcss-prefixwrap/build/plugin/PostCSSPlugin.js","webpack://wp/./node_modules/postcss-prefixwrap/build/plugin/PostCSSPrefixWrap.js","webpack://wp/./node_modules/postcss-urlrebase/index.js","webpack://wp/./node_modules/postcss-urlrebase/node_modules/postcss-value-parser/lib/index.js","webpack://wp/./node_modules/postcss-urlrebase/node_modules/postcss-value-parser/lib/parse.js","webpack://wp/./node_modules/postcss-urlrebase/node_modules/postcss-value-parser/lib/stringify.js","webpack://wp/./node_modules/postcss-urlrebase/node_modules/postcss-value-parser/lib/unit.js","webpack://wp/./node_modules/postcss-urlrebase/node_modules/postcss-value-parser/lib/walk.js","webpack://wp/./node_modules/postcss/lib/at-rule.js","webpack://wp/./node_modules/postcss/lib/comment.js","webpack://wp/./node_modules/postcss/lib/container.js","webpack://wp/./node_modules/postcss/lib/css-syntax-error.js","webpack://wp/./node_modules/postcss/lib/declaration.js","webpack://wp/./node_modules/postcss/lib/document.js","webpack://wp/./node_modules/postcss/lib/fromJSON.js","webpack://wp/./node_modules/postcss/lib/input.js","webpack://wp/./node_modules/postcss/lib/lazy-result.js","webpack://wp/./node_modules/postcss/lib/list.js","webpack://wp/./node_modules/postcss/lib/map-generator.js","webpack://wp/./node_modules/postcss/lib/no-work-result.js","webpack://wp/./node_modules/postcss/lib/node.js","webpack://wp/./node_modules/postcss/lib/parse.js","webpack://wp/./node_modules/postcss/lib/parser.js","webpack://wp/./node_modules/postcss/lib/postcss.js","webpack://wp/./node_modules/postcss/lib/previous-map.js","webpack://wp/./node_modules/postcss/lib/processor.js","webpack://wp/./node_modules/postcss/lib/result.js","webpack://wp/./node_modules/postcss/lib/root.js","webpack://wp/./node_modules/postcss/lib/rule.js","webpack://wp/./node_modules/postcss/lib/stringifier.js","webpack://wp/./node_modules/postcss/lib/stringify.js","webpack://wp/./node_modules/postcss/lib/symbols.js","webpack://wp/./node_modules/postcss/lib/tokenize.js","webpack://wp/./node_modules/postcss/lib/warn-once.js","webpack://wp/./node_modules/postcss/lib/warning.js","webpack://wp/./node_modules/prop-types/factoryWithThrowingShims.js","webpack://wp/./node_modules/prop-types/index.js","webpack://wp/./node_modules/prop-types/lib/ReactPropTypesSecret.js","webpack://wp/./node_modules/react-autosize-textarea/lib/TextareaAutosize.js","webpack://wp/./node_modules/react-autosize-textarea/lib/index.js","webpack://wp/./node_modules/remove-accents/index.js","webpack://wp/./packages/block-editor/node_modules/postcss/lib/at-rule.js","webpack://wp/./packages/block-editor/node_modules/postcss/lib/comment.js","webpack://wp/./packages/block-editor/node_modules/postcss/lib/container.js","webpack://wp/./packages/block-editor/node_modules/postcss/lib/css-syntax-error.js","webpack://wp/./packages/block-editor/node_modules/postcss/lib/declaration.js","webpack://wp/./packages/block-editor/node_modules/postcss/lib/document.js","webpack://wp/./packages/block-editor/node_modules/postcss/lib/fromJSON.js","webpack://wp/./packages/block-editor/node_modules/postcss/lib/input.js","webpack://wp/./packages/block-editor/node_modules/postcss/lib/lazy-result.js","webpack://wp/./packages/block-editor/node_modules/postcss/lib/list.js","webpack://wp/./packages/block-editor/node_modules/postcss/lib/map-generator.js","webpack://wp/./packages/block-editor/node_modules/postcss/lib/no-work-result.js","webpack://wp/./packages/block-editor/node_modules/postcss/lib/node.js","webpack://wp/./packages/block-editor/node_modules/postcss/lib/parse.js","webpack://wp/./packages/block-editor/node_modules/postcss/lib/parser.js","webpack://wp/./packages/block-editor/node_modules/postcss/lib/postcss.js","webpack://wp/./packages/block-editor/node_modules/postcss/lib/previous-map.js","webpack://wp/./packages/block-editor/node_modules/postcss/lib/processor.js","webpack://wp/./packages/block-editor/node_modules/postcss/lib/result.js","webpack://wp/./packages/block-editor/node_modules/postcss/lib/root.js","webpack://wp/./packages/block-editor/node_modules/postcss/lib/rule.js","webpack://wp/./packages/block-editor/node_modules/postcss/lib/stringifier.js","webpack://wp/./packages/block-editor/node_modules/postcss/lib/stringify.js","webpack://wp/./packages/block-editor/node_modules/postcss/lib/symbols.js","webpack://wp/./packages/block-editor/node_modules/postcss/lib/tokenize.js","webpack://wp/./packages/block-editor/node_modules/postcss/lib/warn-once.js","webpack://wp/./packages/block-editor/node_modules/postcss/lib/warning.js","webpack://wp/external window \"React\"","webpack://wp/./node_modules/nanoid/non-secure/index.cjs","webpack://wp/webpack/bootstrap","webpack://wp/webpack/runtime/compat get default export","webpack://wp/webpack/runtime/define property getters","webpack://wp/webpack/runtime/hasOwnProperty shorthand","webpack://wp/webpack/runtime/make namespace object","webpack://wp/external window [\"wp\",\"blocks\"]","webpack://wp/external window [\"wp\",\"element\"]","webpack://wp/external window [\"wp\",\"data\"]","webpack://wp/external window [\"wp\",\"compose\"]","webpack://wp/external window [\"wp\",\"hooks\"]","../../packages/block-editor/src/components/block-edit/context.js","webpack://wp/external window [\"wp\",\"deprecated\"]","webpack://wp/external window [\"wp\",\"i18n\"]","../../packages/block-editor/src/store/defaults.js","../../packages/block-editor/src/store/array.js","../../packages/block-editor/src/store/reducer.js","webpack://wp/./node_modules/rememo/rememo.js","webpack://wp/external window [\"wp\",\"primitives\"]","../../packages/icons/src/library/symbol.js","webpack://wp/external window [\"wp\",\"richText\"]","../../packages/block-editor/src/store/private-keys.js","webpack://wp/external window [\"wp\",\"privateApis\"]","../../packages/block-editor/src/lock-unlock.js","../../packages/block-editor/src/store/constants.js","../../packages/block-editor/src/store/utils.js","../../packages/block-editor/src/utils/sorting.js","../../packages/block-editor/src/store/selectors.js","../../packages/block-editor/src/store/undo-ignore.js","../../packages/block-editor/src/store/private-actions.js","../../packages/block-editor/src/components/inserter/block-patterns-tab/utils.js","../../packages/block-editor/src/utils/object.js","../../packages/block-editor/src/store/get-block-settings.js","../../packages/block-editor/src/store/private-selectors.js","webpack://wp/external window [\"wp\",\"a11y\"]","../../packages/block-editor/src/utils/selection.js","../../packages/block-editor/src/store/actions.js","../../packages/block-editor/src/store/index.js","../../packages/block-editor/src/components/use-settings/index.js","../../packages/block-editor/src/components/font-sizes/fluid-utils.js","../../packages/block-editor/src/components/global-styles/typography-utils.js","../../packages/block-editor/src/components/global-styles/utils.js","../../packages/block-editor/src/components/global-styles/context.js","../../packages/block-editor/src/components/global-styles/hooks.js","../../packages/block-editor/src/hooks/utils.js","../../packages/block-editor/src/hooks/compat.js","webpack://wp/external window [\"wp\",\"components\"]","../../packages/block-editor/src/components/block-controls/groups.js","../../packages/block-editor/src/components/block-controls/fill.js","../../packages/block-editor/src/components/block-controls/hook.js","webpack://wp/external window [\"wp\",\"warning\"]","../../packages/block-editor/src/components/block-controls/slot.js","../../packages/block-editor/src/components/block-controls/index.js","../../packages/icons/src/library/justify-left.js","../../packages/icons/src/library/justify-center.js","../../packages/icons/src/library/justify-right.js","../../packages/icons/src/library/justify-space-between.js","../../packages/icons/src/library/justify-stretch.js","../../packages/icons/src/library/arrow-right.js","../../packages/icons/src/library/arrow-down.js","../../packages/block-editor/src/layouts/definitions.js","../../packages/block-editor/src/layouts/utils.js","../../packages/icons/src/library/sides-all.js","../../packages/icons/src/library/sides-horizontal.js","../../packages/icons/src/library/sides-vertical.js","../../packages/icons/src/library/sides-top.js","../../packages/icons/src/library/sides-right.js","../../packages/icons/src/library/sides-bottom.js","../../packages/icons/src/library/sides-left.js","../../packages/block-editor/src/components/spacing-sizes-control/utils.js","../../packages/block-editor/src/hooks/gap.js","../../packages/block-editor/src/components/block-vertical-alignment-control/icons.js","../../packages/block-editor/src/components/block-vertical-alignment-control/ui.js","../../packages/block-editor/src/components/block-vertical-alignment-control/index.js","../../packages/block-editor/src/components/justify-content-control/ui.js","../../packages/block-editor/src/components/justify-content-control/index.js","../../packages/block-editor/src/layouts/flex.js","../../packages/block-editor/src/layouts/flow.js","../../packages/icons/src/icon/index.js","../../packages/icons/src/library/position-center.js","../../packages/icons/src/library/stretch-wide.js","webpack://wp/external window [\"wp\",\"styleEngine\"]","../../packages/block-editor/src/layouts/constrained.js","../../packages/block-editor/src/components/provider/block-refs-provider.js","../../packages/block-editor/src/components/block-list/use-block-props/use-block-refs.js","../../packages/block-editor/src/components/block-popover/use-popover-scroll.js","../../packages/block-editor/src/components/block-popover/index.js","../../packages/block-editor/src/components/block-popover/cover.js","../../packages/block-editor/src/components/grid-visualizer/utils.js","../../packages/block-editor/src/components/grid-visualizer/grid-visualizer.js","../../packages/block-editor/src/layouts/grid.js","../../packages/block-editor/src/layouts/index.js","../../packages/block-editor/src/components/block-list/layout.js","../../packages/block-editor/src/components/block-alignment-control/use-available-alignments.js","../../packages/icons/src/library/align-none.js","../../packages/icons/src/library/position-left.js","../../packages/icons/src/library/position-right.js","../../packages/icons/src/library/stretch-full-width.js","../../packages/block-editor/src/components/block-alignment-control/constants.js","../../packages/block-editor/src/components/block-alignment-control/ui.js","../../packages/block-editor/src/components/block-alignment-control/index.js","../../packages/block-editor/src/components/block-editing-mode/index.js","../../packages/block-editor/src/hooks/align.js","../../packages/block-editor/src/components/inspector-controls/groups.js","../../packages/block-editor/src/components/inspector-controls/fill.js","../../packages/block-editor/src/components/inspector-controls/block-support-tools-panel.js","../../packages/block-editor/src/components/inspector-controls/block-support-slot-container.js","../../packages/block-editor/src/components/inspector-controls/slot.js","../../packages/block-editor/src/components/inspector-controls/index.js","webpack://wp/external window [\"wp\",\"notices\"]","webpack://wp/external window [\"wp\",\"url\"]","webpack://wp/external window [\"wp\",\"dom\"]","webpack://wp/external window [\"wp\",\"blob\"]","webpack://wp/external window [\"wp\",\"keycodes\"]","../../packages/icons/src/library/media.js","../../packages/icons/src/library/upload.js","../../packages/icons/src/library/post-featured-image.js","../../packages/block-editor/src/components/media-upload/index.js","../../packages/block-editor/src/components/media-upload/check.js","webpack://wp/external window [\"wp\",\"isShallowEqual\"]","webpack://wp/external window [\"wp\",\"preferences\"]","../../packages/icons/src/library/keyboard-return.js","../../packages/icons/src/library/chevron-left-small.js","../../packages/icons/src/library/chevron-right-small.js","../../packages/block-editor/src/components/link-control/settings-drawer.js","../../packages/block-editor/src/components/url-input/index.js","../../packages/icons/src/library/plus.js","../../packages/block-editor/src/components/link-control/search-create-button.js","../../packages/icons/src/library/post-list.js","../../packages/icons/src/library/page.js","../../packages/icons/src/library/tag.js","../../packages/icons/src/library/category.js","../../packages/icons/src/library/file.js","../../packages/icons/src/library/globe.js","../../packages/icons/src/library/home.js","../../packages/icons/src/library/verse.js","../../packages/block-editor/src/components/link-control/search-item.js","../../packages/block-editor/src/components/link-control/constants.js","../../packages/block-editor/src/components/link-control/search-results.js","../../packages/block-editor/src/components/link-control/is-url-like.js","../../packages/block-editor/src/components/link-control/use-search-handler.js","../../packages/block-editor/src/components/link-control/search-input.js","../../packages/icons/src/library/info.js","../../packages/icons/src/library/edit.js","../../packages/icons/src/library/pencil.js","../../packages/icons/src/library/link-off.js","../../packages/icons/src/library/copy-small.js","../../packages/block-editor/src/components/link-control/viewer-slot.js","../../packages/block-editor/src/components/link-control/use-rich-url-data.js","../../packages/block-editor/src/components/link-control/link-preview.js","../../packages/block-editor/src/components/link-control/settings.js","../../packages/block-editor/src/components/link-control/index.js","../../packages/block-editor/src/components/link-control/use-internal-value.js","../../packages/block-editor/src/components/link-control/use-create-page.js","../../packages/block-editor/src/components/media-replace-flow/index.js","../../packages/block-editor/src/components/global-styles/background-panel.js","../../packages/block-editor/src/hooks/background.js","../../packages/block-editor/src/hooks/lock.js","../../packages/block-editor/src/hooks/anchor.js","../../packages/block-editor/src/hooks/aria-label.js","../../packages/block-editor/src/hooks/custom-class-name.js","../../packages/block-editor/src/hooks/generated-class-name.js","webpack://wp/./node_modules/colord/index.mjs","webpack://wp/./node_modules/colord/plugins/names.mjs","webpack://wp/./node_modules/colord/plugins/a11y.mjs","../../packages/block-editor/src/components/colors/utils.js","../../packages/block-editor/src/components/colors-gradients/use-multiple-origin-colors-and-gradients.js","../../packages/block-editor/src/components/border-radius-control/utils.js","../../packages/block-editor/src/components/border-radius-control/all-input-control.js","../../packages/block-editor/src/components/border-radius-control/input-controls.js","../../packages/icons/src/library/link.js","../../packages/block-editor/src/components/border-radius-control/linked-button.js","../../packages/block-editor/src/components/border-radius-control/index.js","../../packages/icons/src/library/check.js","../../packages/icons/src/library/shadow.js","../../packages/block-editor/src/components/global-styles/shadow-panel-components.js","../../packages/block-editor/src/components/global-styles/border-panel.js","../../packages/block-editor/src/hooks/border.js","../../packages/block-editor/src/components/gradients/use-gradient.js","../../packages/block-editor/src/components/colors-gradients/control.js","../../packages/block-editor/src/components/global-styles/color-panel.js","../../packages/block-editor/src/components/contrast-checker/index.js","../../packages/block-editor/src/hooks/contrast-checker.js","../../packages/block-editor/src/hooks/color.js","../../packages/block-editor/src/components/font-family/index.js","../../packages/block-editor/src/components/font-appearance-control/index.js","../../packages/block-editor/src/components/line-height-control/utils.js","../../packages/block-editor/src/components/line-height-control/index.js","../../packages/block-editor/src/components/letter-spacing-control/index.js","../../packages/icons/src/library/reset.js","../../packages/icons/src/library/format-uppercase.js","../../packages/icons/src/library/format-lowercase.js","../../packages/icons/src/library/format-capitalize.js","../../packages/block-editor/src/components/text-transform-control/index.js","../../packages/icons/src/library/format-underline.js","../../packages/icons/src/library/format-strikethrough.js","../../packages/block-editor/src/components/text-decoration-control/index.js","../../packages/icons/src/library/text-horizontal.js","../../packages/icons/src/library/text-vertical.js","../../packages/block-editor/src/components/writing-mode-control/index.js","../../packages/block-editor/src/components/global-styles/typography-panel.js","../../packages/block-editor/src/hooks/line-height.js","webpack://wp/external window [\"wp\",\"tokenList\"]","../../packages/block-editor/src/hooks/font-family.js","../../packages/block-editor/src/components/font-sizes/utils.js","../../packages/block-editor/src/hooks/font-size.js","../../packages/block-editor/src/hooks/typography.js","../../packages/icons/src/library/settings.js","../../packages/block-editor/src/components/spacing-sizes-control/input-controls/spacing-input-control.js","../../packages/block-editor/src/components/spacing-sizes-control/input-controls/axial.js","../../packages/block-editor/src/components/spacing-sizes-control/input-controls/separated.js","../../packages/block-editor/src/components/spacing-sizes-control/input-controls/single.js","../../packages/block-editor/src/components/spacing-sizes-control/sides-dropdown/index.js","../../packages/block-editor/src/components/spacing-sizes-control/index.js","../../packages/block-editor/src/components/spacing-sizes-control/hooks/use-spacing-sizes.js","../../packages/block-editor/src/components/height-control/index.js","../../packages/block-editor/src/components/child-layout-control/index.js","../../packages/block-editor/src/components/dimensions-tool/aspect-ratio-tool.js","../../packages/block-editor/src/components/global-styles/dimensions-panel.js","../../packages/block-editor/src/hooks/spacing-visualizer.js","../../packages/block-editor/src/hooks/dimensions.js","../../packages/block-editor/src/hooks/style.js","../../packages/block-editor/src/hooks/settings.js","../../packages/icons/src/library/filter.js","../../packages/block-editor/src/components/duotone-control/index.js","../../packages/block-editor/src/components/duotone/utils.js","../../packages/block-editor/src/components/global-styles/get-block-css-selector.js","../../packages/block-editor/src/components/global-styles/filters-panel.js","../../packages/block-editor/src/hooks/duotone.js","../../packages/block-editor/src/components/use-block-display-information/index.js","../../packages/block-editor/src/hooks/position.js","../../packages/block-editor/src/hooks/layout.js","../../packages/block-editor/src/components/grid-visualizer/grid-item-resizer.js","../../packages/block-editor/src/hooks/layout-child.js","../../packages/block-editor/src/components/convert-to-group-buttons/use-convert-to-group-button-props.js","../../packages/block-editor/src/components/convert-to-group-buttons/index.js","../../packages/block-editor/src/components/block-lock/use-block-lock.js","../../packages/icons/src/library/unlock.js","../../packages/icons/src/library/lock-outline.js","../../packages/icons/src/library/lock.js","../../packages/block-editor/src/components/block-lock/modal.js","../../packages/block-editor/src/components/block-lock/menu-item.js","../../packages/block-editor/src/components/block-settings-menu/block-mode-toggle.js","../../packages/block-editor/src/components/block-rename/is-empty-string.js","../../packages/block-editor/src/components/block-rename/modal.js","../../packages/block-editor/src/components/block-rename/rename-control.js","../../packages/block-editor/src/components/block-settings-menu-controls/index.js","../../packages/block-editor/src/components/block-rename/use-block-rename.js","../../packages/block-editor/src/hooks/content-lock-ui.js","../../packages/block-editor/src/hooks/metadata.js","../../packages/icons/src/library/block-default.js","../../packages/block-editor/src/components/block-icon/index.js","../../packages/block-editor/src/hooks/block-hooks.js","../../packages/block-editor/src/hooks/block-renaming.js","../../packages/block-editor/src/hooks/use-bindings-attributes.js","../../packages/block-editor/src/hooks/use-border-props.js","../../packages/block-editor/src/hooks/use-shadow-props.js","../../packages/block-editor/src/hooks/use-color-props.js","../../packages/block-editor/src/hooks/use-spacing-props.js","../../packages/block-editor/src/hooks/use-typography-props.js","../../packages/block-editor/src/hooks/use-cached-truthy.js","../../packages/block-editor/src/hooks/use-zoom-out.js","../../packages/block-editor/src/hooks/index.js","../../packages/block-editor/src/components/colors/with-colors.js","../../packages/block-editor/src/components/font-sizes/font-size-picker.js","../../packages/block-editor/src/components/font-sizes/with-font-sizes.js","../../packages/icons/src/library/align-left.js","../../packages/icons/src/library/align-center.js","../../packages/icons/src/library/align-right.js","../../packages/block-editor/src/components/alignment-control/ui.js","../../packages/block-editor/src/components/alignment-control/index.js","webpack://wp/./node_modules/lower-case/src/index.ts","webpack://wp/./node_modules/no-case/src/index.ts","../../packages/block-editor/src/components/inserter/search-items.js","../../packages/block-editor/src/components/inserter/hooks/use-block-types-state.js","../../packages/block-editor/src/utils/order-inserter-block-items.js","../../packages/block-editor/src/autocompleters/block.js","webpack://wp/external window [\"wp\",\"apiFetch\"]","../../packages/icons/src/library/post.js","../../packages/block-editor/src/autocompleters/link.js","../../packages/block-editor/src/components/autocomplete/index.js","../../packages/icons/src/library/fullscreen.js","../../packages/block-editor/src/components/block-full-height-alignment-control/index.js","../../packages/block-editor/src/components/block-alignment-matrix-control/index.js","../../packages/block-editor/src/components/block-title/use-block-display-title.js","../../packages/block-editor/src/components/block-title/index.js","../../packages/block-editor/src/components/block-breadcrumb/index.js","../../packages/block-editor/src/components/block-content-overlay/index.js","../../packages/block-editor/src/components/block-context/index.js","../../packages/block-editor/src/components/block-edit/edit.js","../../packages/block-editor/src/components/block-edit/index.js","../../packages/icons/src/library/more-vertical.js","../../packages/block-editor/src/components/warning/index.js","../../packages/block-editor/src/components/block-compare/block-view.js","../../packages/block-editor/src/components/block-compare/index.js","../../packages/block-editor/src/components/block-list/block-invalid-warning.js","../../packages/block-editor/src/components/block-list/block-crash-warning.js","../../packages/block-editor/src/components/block-list/block-crash-boundary.js","../../packages/block-editor/src/components/block-list/block-html.js","webpack://wp/./node_modules/@react-spring/rafz/dist/react-spring-rafz.esm.js","webpack://wp/./node_modules/@react-spring/shared/dist/react-spring-shared.esm.js","webpack://wp/./node_modules/@react-spring/animated/dist/react-spring-animated.esm.js","webpack://wp/./node_modules/@react-spring/core/dist/react-spring-core.esm.js","webpack://wp/external window \"ReactDOM\"","webpack://wp/./node_modules/@react-spring/web/dist/react-spring-web.esm.js","../../packages/block-editor/src/components/use-moving-animation/index.js","../../packages/block-editor/src/components/block-list/private-block-context.js","../../packages/block-editor/src/utils/dom.js","../../packages/block-editor/src/components/block-list/use-block-props/use-focus-first-element.js","../../packages/block-editor/src/components/block-list/use-block-props/use-is-hovered.js","../../packages/block-editor/src/components/block-list/use-block-props/use-focus-handler.js","../../packages/block-editor/src/components/block-list/use-block-props/use-selected-block-event-handlers.js","../../packages/block-editor/src/components/block-list/use-block-props/use-nav-mode-exit.js","../../packages/block-editor/src/components/block-list/use-block-props/use-intersection-observer.js","../../packages/block-editor/src/components/use-flash-editable-blocks/index.js","../../packages/block-editor/src/components/block-list/use-block-props/index.js","../../packages/block-editor/src/components/block-list/block.js","webpack://wp/external window [\"wp\",\"htmlEntities\"]","../../packages/block-editor/src/components/inserter/tips.js","../../packages/icons/src/library/chevron-right.js","../../packages/icons/src/library/chevron-left.js","../../packages/block-editor/src/components/block-card/index.js","../../packages/block-editor/src/components/provider/with-registry-provider.js","../../packages/block-editor/src/components/provider/use-block-sync.js","webpack://wp/external window [\"wp\",\"keyboardShortcuts\"]","../../packages/block-editor/src/components/keyboard-shortcuts/index.js","../../packages/block-editor/src/components/provider/index.js","../../packages/block-editor/src/components/block-selection-clearer/index.js","../../packages/block-editor/src/components/writing-flow/use-multi-selection.js","../../packages/block-editor/src/components/writing-flow/use-arrow-nav.js","../../packages/block-editor/src/components/writing-flow/use-select-all.js","../../packages/block-editor/src/components/writing-flow/use-drag-selection.js","../../packages/block-editor/src/components/writing-flow/use-selection-observer.js","../../packages/block-editor/src/components/writing-flow/use-click-selection.js","../../packages/block-editor/src/components/writing-flow/use-input.js","../../packages/block-editor/src/utils/use-notify-copy.js","../../packages/block-editor/src/utils/pasting.js","../../packages/block-editor/src/components/writing-flow/utils.js","../../packages/block-editor/src/components/writing-flow/use-clipboard-handler.js","../../packages/block-editor/src/components/writing-flow/index.js","../../packages/block-editor/src/components/writing-flow/use-tab-nav.js","../../packages/block-editor/src/components/iframe/get-compatibility-styles.js","../../packages/block-editor/src/components/iframe/index.js","webpack://wp/./packages/block-editor/node_modules/postcss/lib/postcss.mjs","../../packages/block-editor/src/utils/transform-styles/index.js","../../packages/block-editor/src/components/editor-styles/index.js","../../packages/block-editor/src/components/block-preview/auto.js","../../packages/block-editor/src/components/block-preview/index.js","../../packages/block-editor/src/components/inserter/preview-panel.js","../../packages/block-editor/src/components/inserter-listbox/item.js","../../packages/icons/src/library/drag-handle.js","../../packages/block-editor/src/components/block-draggable/draggable-chip.js","../../packages/block-editor/src/components/inserter-draggable-blocks/index.js","../../packages/block-editor/src/components/inserter-list-item/index.js","../../packages/block-editor/src/components/inserter-listbox/group.js","../../packages/block-editor/src/components/inserter-listbox/row.js","../../packages/block-editor/src/components/block-types-list/index.js","../../packages/block-editor/src/components/inserter/panel.js","../../packages/block-editor/src/components/inserter-listbox/index.js","../../packages/block-editor/src/components/inserter/block-types-tab.js","../../packages/block-editor/src/components/inserter/block-patterns-explorer/pattern-explorer-sidebar.js","../../packages/block-editor/src/components/block-patterns-paging/index.js","../../packages/block-editor/src/components/block-patterns-list/index.js","../../packages/block-editor/src/components/inserter/hooks/use-insertion-point.js","../../packages/block-editor/src/components/inserter/hooks/use-patterns-state.js","../../packages/block-editor/src/components/inserter/hooks/use-patterns-paging.js","../../packages/block-editor/src/components/inserter/block-patterns-explorer/pattern-list.js","../../packages/block-editor/src/components/inserter/block-patterns-tab/use-pattern-categories.js","../../packages/block-editor/src/components/inserter/block-patterns-explorer/index.js","../../packages/block-editor/src/components/inserter/mobile-tab-navigation.js","../../packages/block-editor/src/components/inserter/block-patterns-tab/patterns-filter.js","../../packages/block-editor/src/components/inserter/block-patterns-tab/pattern-category-previews.js","../../packages/block-editor/src/components/inserter/block-patterns-tab/index.js","../../packages/block-editor/src/components/inserter/block-patterns-tab/pattern-category-preview-panel.js","../../packages/block-editor/src/components/inserter/media-tab/hooks.js","../../packages/icons/src/library/external.js","../../packages/block-editor/src/components/inserter/media-tab/utils.js","../../packages/block-editor/src/components/inserter/media-tab/media-preview.js","../../packages/block-editor/src/components/inserter/media-tab/media-list.js","../../packages/block-editor/src/components/inserter/no-results.js","../../packages/block-editor/src/components/inserter/media-tab/media-panel.js","../../packages/block-editor/src/components/inserter/media-tab/media-tab.js","../../packages/block-editor/src/components/inserter-menu-extension/index.js","../../packages/block-editor/src/components/inserter/search-results.js","../../packages/block-editor/src/components/inserter/tabs.js","../../packages/block-editor/src/components/inserter/menu.js","../../packages/block-editor/src/components/inserter/quick-inserter.js","../../packages/block-editor/src/components/inserter/index.js","../../packages/block-editor/src/components/default-block-appender/index.js","../../packages/block-editor/src/components/button-block-appender/index.js","../../packages/block-editor/src/components/block-list-appender/index.js","../../packages/block-editor/src/components/block-popover/inbetween.js","../../packages/block-editor/src/components/block-popover/drop-zone.js","../../packages/block-editor/src/components/block-tools/insertion-point.js","../../packages/block-editor/src/components/block-list/use-in-between-inserter.js","../../packages/block-editor/src/components/inner-blocks/with-client-id.js","../../packages/block-editor/src/components/inner-blocks/button-block-appender.js","../../packages/block-editor/src/components/inner-blocks/default-block-appender.js","../../packages/block-editor/src/components/inner-blocks/use-nested-settings-update.js","../../packages/block-editor/src/components/use-on-block-drop/index.js","../../packages/block-editor/src/utils/math.js","../../packages/block-editor/src/components/use-block-drop-zone/index.js","../../packages/block-editor/src/components/inner-blocks/index.js","../../packages/block-editor/src/components/inner-blocks/use-block-context.js","../../packages/block-editor/src/components/inner-blocks/use-inner-block-template-sync.js","../../packages/block-editor/src/components/observe-typing/index.js","../../packages/block-editor/src/components/block-list/index.js","../../packages/block-editor/src/components/block-tools/use-block-toolbar-popover-props.js","../../packages/block-editor/src/components/block-tools/use-selected-block-tool-props.js","../../packages/block-editor/src/components/block-tools/empty-block-inserter.js","../../packages/block-editor/src/components/block-draggable/index.js","../../packages/block-editor/src/components/block-draggable/use-scroll-when-dragging.js","../../packages/icons/src/library/chevron-up.js","../../packages/icons/src/library/chevron-down.js","../../packages/block-editor/src/components/block-mover/mover-description.js","../../packages/block-editor/src/components/block-mover/button.js","../../packages/block-editor/src/components/block-mover/index.js","../../packages/block-editor/src/components/block-toolbar/utils.js","../../packages/block-editor/src/components/block-parent-selector/index.js","../../packages/icons/src/library/copy.js","../../packages/block-editor/src/components/block-switcher/preview-block-popover.js","../../packages/block-editor/src/components/block-switcher/block-variation-transformations.js","../../packages/block-editor/src/components/block-switcher/block-transformations-menu.js","../../packages/block-editor/src/components/block-styles/utils.js","../../packages/block-editor/src/components/block-styles/use-styles-for-block.js","../../packages/block-editor/src/components/block-styles/menu-items.js","../../packages/block-editor/src/components/block-switcher/block-styles-menu.js","../../packages/block-editor/src/components/block-switcher/utils.js","../../packages/block-editor/src/components/block-switcher/use-transformed-patterns.js","../../packages/block-editor/src/components/block-switcher/pattern-transformations-menu.js","../../packages/block-editor/src/components/block-switcher/index.js","../../packages/block-editor/src/components/block-toolbar/block-toolbar-last-item.js","../../packages/block-editor/src/hooks/supports.js","../../packages/block-editor/src/components/use-paste-styles/index.js","../../packages/block-editor/src/components/block-actions/index.js","../../packages/block-editor/src/components/block-settings-menu/block-html-convert-button.js","../../packages/block-editor/src/components/block-settings-menu/block-settings-menu-first-item.js","../../packages/block-editor/src/components/block-settings-menu/block-parent-selector-menu-item.js","../../packages/block-editor/src/components/block-settings-menu/block-settings-dropdown.js","../../packages/block-editor/src/components/block-settings-menu/index.js","../../packages/block-editor/src/components/block-lock/toolbar.js","../../packages/icons/src/library/group.js","../../packages/icons/src/library/row.js","../../packages/icons/src/library/stack.js","../../packages/icons/src/library/grid.js","../../packages/block-editor/src/components/convert-to-group-buttons/toolbar.js","../../packages/block-editor/src/components/block-edit-visually-button/index.js","../../packages/block-editor/src/components/block-toolbar/block-name-context.js","../../packages/block-editor/src/components/navigable-toolbar/index.js","../../packages/icons/src/library/shuffle.js","../../packages/block-editor/src/components/block-toolbar/shuffle.js","../../packages/icons/src/library/connection.js","../../packages/block-editor/src/components/block-bindings-toolbar-indicator/index.js","../../packages/block-editor/src/components/block-controls/use-has-block-controls.js","../../packages/block-editor/src/components/block-toolbar/use-has-block-toolbar.js","../../packages/block-editor/src/components/block-toolbar/index.js","../../packages/block-editor/src/components/block-tools/block-toolbar-popover.js","../../packages/icons/src/library/trash.js","../../packages/block-editor/src/components/block-tools/block-selection-button.js","../../packages/block-editor/src/components/block-tools/block-toolbar-breadcrumb.js","../../packages/block-editor/src/components/block-tools/zoom-out-mode-inserters.js","../../packages/block-editor/src/components/block-tools/use-show-block-tools.js","../../packages/block-editor/src/components/block-tools/index.js","webpack://wp/external window [\"wp\",\"commands\"]","../../packages/icons/src/library/move-to.js","../../packages/icons/src/library/ungroup.js","../../packages/block-editor/src/components/use-block-commands/index.js","../../packages/block-editor/src/components/block-canvas/index.js","../../packages/block-editor/src/components/color-style-selector/index.js","../../packages/icons/src/library/list-view.js","../../packages/block-editor/src/components/list-view/context.js","../../packages/block-editor/src/components/list-view/aria-referenced-text.js","../../packages/block-editor/src/components/list-view/appender.js","../../packages/block-editor/src/components/list-view/leaf.js","../../packages/icons/src/library/pin-small.js","../../packages/icons/src/library/lock-small.js","../../packages/block-editor/src/components/list-view/expander.js","../../packages/block-editor/src/components/list-view/use-list-view-images.js","../../packages/block-editor/src/components/list-view/block-select-button.js","../../packages/block-editor/src/components/list-view/block-contents.js","../../packages/block-editor/src/components/list-view/utils.js","../../packages/block-editor/src/components/list-view/block.js","../../packages/block-editor/src/components/list-view/use-list-view-scroll-into-view.js","../../packages/block-editor/src/components/list-view/branch.js","../../packages/block-editor/src/components/list-view/drop-indicator.js","../../packages/block-editor/src/components/list-view/use-list-view-drop-zone.js","../../packages/block-editor/src/components/list-view/index.js","../../packages/block-editor/src/components/list-view/use-list-view-client-ids.js","../../packages/block-editor/src/components/list-view/use-list-view-block-indexes.js","../../packages/block-editor/src/components/list-view/use-block-selection.js","../../packages/block-editor/src/components/list-view/use-list-view-expand-selected-item.js","../../packages/block-editor/src/components/list-view/use-clipboard-handler.js","../../packages/block-editor/src/components/list-view/use-list-view-collapse-items.js","../../packages/block-editor/src/components/block-navigation/dropdown.js","../../packages/block-editor/src/components/block-styles/preview-panel.js","../../packages/block-editor/src/components/block-styles/index.js","../../packages/block-editor/src/components/block-heading-level-dropdown/heading-level-icon.js","../../packages/icons/src/library/paragraph.js","../../packages/icons/src/library/heading-level-1.js","../../packages/icons/src/library/heading-level-2.js","../../packages/icons/src/library/heading-level-3.js","../../packages/icons/src/library/heading-level-4.js","../../packages/icons/src/library/heading-level-5.js","../../packages/icons/src/library/heading-level-6.js","../../packages/block-editor/src/components/block-heading-level-dropdown/index.js","../../packages/icons/src/library/layout.js","../../packages/block-editor/src/components/block-variation-picker/index.js","../../packages/block-editor/src/components/block-pattern-setup/constants.js","../../packages/block-editor/src/components/block-pattern-setup/setup-toolbar.js","../../packages/block-editor/src/components/block-pattern-setup/index.js","../../packages/block-editor/src/components/block-pattern-setup/use-patterns-setup.js","../../packages/block-editor/src/components/block-variation-transforms/index.js","../../packages/block-editor/src/components/color-palette/with-color-context.js","../../packages/block-editor/src/components/color-palette/index.js","../../packages/block-editor/src/components/color-palette/control.js","webpack://wp/external window [\"wp\",\"date\"]","../../packages/block-editor/src/components/date-format-picker/index.js","../../packages/block-editor/src/components/colors-gradients/dropdown.js","../../packages/block-editor/src/components/colors-gradients/panel-color-gradient-settings.js","../../packages/block-editor/src/components/image-editor/context.js","../../packages/block-editor/src/components/image-editor/use-transform-image.js","../../packages/block-editor/src/components/image-editor/use-save-image.js","webpack://wp/./node_modules/react-easy-crop/node_modules/tslib/tslib.es6.js","webpack://wp/./node_modules/src/helpers.ts","webpack://wp/./node_modules/src/Cropper.tsx","../../packages/block-editor/src/components/image-editor/constants.js","../../packages/block-editor/src/components/image-editor/cropper.js","../../packages/icons/src/library/search.js","../../packages/block-editor/src/components/image-editor/zoom-dropdown.js","../../packages/icons/src/library/aspect-ratio.js","../../packages/block-editor/src/components/image-editor/aspect-ratio-dropdown.js","../../packages/icons/src/library/rotate-right.js","../../packages/block-editor/src/components/image-editor/rotation-button.js","../../packages/block-editor/src/components/image-editor/form-controls.js","../../packages/block-editor/src/components/image-editor/index.js","../../packages/block-editor/src/components/image-size-control/index.js","../../packages/block-editor/src/components/image-size-control/use-dimension-handler.js","../../packages/block-editor/src/components/url-popover/link-viewer-url.js","../../packages/block-editor/src/components/url-popover/index.js","../../packages/block-editor/src/components/url-popover/link-editor.js","../../packages/block-editor/src/components/url-popover/link-viewer.js","../../packages/block-editor/src/components/media-placeholder/index.js","../../packages/block-editor/src/components/panel-color-settings/index.js","../../packages/block-editor/src/components/rich-text/format-toolbar/index.js","../../packages/block-editor/src/components/rich-text/format-toolbar-container.js","../../packages/block-editor/src/components/rich-text/use-undo-automatic-change.js","../../packages/block-editor/src/components/rich-text/utils.js","../../packages/block-editor/src/components/rich-text/split-value.js","../../packages/block-editor/src/components/rich-text/use-paste-handler.js","../../packages/block-editor/src/components/rich-text/use-before-input-rules.js","../../packages/block-editor/src/components/rich-text/use-input-rules.js","../../packages/block-editor/src/components/rich-text/prevent-event-discovery.js","../../packages/block-editor/src/components/rich-text/use-delete.js","../../packages/block-editor/src/components/rich-text/use-enter.js","../../packages/block-editor/src/components/rich-text/use-format-types.js","../../packages/block-editor/src/components/rich-text/use-shortcuts.js","../../packages/block-editor/src/components/rich-text/use-input-events.js","../../packages/block-editor/src/components/rich-text/use-insert-replacement-text.js","../../packages/block-editor/src/components/rich-text/use-firefox-compat.js","../../packages/block-editor/src/components/rich-text/format-edit.js","../../packages/block-editor/src/components/rich-text/content.js","../../packages/block-editor/src/components/rich-text/multiline.js","../../packages/block-editor/src/components/rich-text/index.js","../../packages/block-editor/src/components/rich-text/use-mark-persistent.js","../../packages/block-editor/src/components/rich-text/use-remove-browser-shortcuts.js","../../packages/block-editor/src/components/rich-text/with-deprecations.js","../../packages/block-editor/src/components/editable-text/index.js","../../packages/block-editor/src/components/plain-text/index.js","../../packages/block-editor/src/components/responsive-block-control/label.js","../../packages/block-editor/src/components/responsive-block-control/index.js","../../packages/block-editor/src/components/rich-text/shortcut.js","../../packages/block-editor/src/components/rich-text/toolbar-button.js","../../packages/block-editor/src/components/rich-text/input-event.js","../../packages/block-editor/src/components/tool-selector/index.js","../../packages/block-editor/src/components/unit-control/index.js","../../packages/icons/src/library/arrow-left.js","../../packages/block-editor/src/components/url-input/button.js","../../packages/icons/src/library/image.js","../../packages/block-editor/src/components/url-popover/image-url-input-ui.js","../../packages/block-editor/src/components/preview-options/index.js","../../packages/block-editor/src/components/use-resize-canvas/index.js","../../packages/block-editor/src/components/skip-to-selected-block/index.js","webpack://wp/external window [\"wp\",\"wordcount\"]","../../packages/block-editor/src/components/multi-selection-inspector/index.js","../../packages/icons/src/library/cog.js","../../packages/icons/src/library/styles.js","../../packages/block-editor/src/components/inspector-controls-tabs/utils.js","../../packages/block-editor/src/components/inspector-controls-tabs/advanced-controls-panel.js","../../packages/block-editor/src/components/inspector-controls-tabs/position-controls-panel.js","../../packages/icons/src/library/close.js","../../packages/block-editor/src/components/inspector-controls-tabs/settings-tab-hint.js","../../packages/block-editor/src/components/inspector-controls-tabs/settings-tab.js","../../packages/block-editor/src/components/inspector-controls-tabs/styles-tab.js","../../packages/block-editor/src/components/inspector-controls-tabs/use-is-list-view-tab-disabled.js","../../packages/block-editor/src/components/inspector-controls-tabs/index.js","../../packages/block-editor/src/components/inspector-controls-tabs/use-inspector-controls-tabs.js","../../packages/block-editor/src/components/block-info-slot-fill/index.js","../../packages/block-editor/src/components/block-quick-navigation/index.js","../../packages/block-editor/src/components/block-inspector/index.js","../../packages/block-editor/src/components/block-inspector/useBlockInspectorAnimationSettings.js","../../packages/block-editor/src/components/copy-handler/index.js","../../packages/block-editor/src/components/inserter/library.js","../../packages/block-editor/src/components/selection-scroll-into-view/index.js","../../packages/block-editor/src/components/typewriter/index.js","../../packages/block-editor/src/components/recursion-provider/index.js","../../packages/icons/src/library/close-small.js","../../packages/block-editor/src/components/inspector-popover-header/index.js","../../packages/block-editor/src/components/publish-date-time-picker/index.js","../../packages/block-editor/src/components/inserter/reusable-block-rename-hint.js","../../packages/block-editor/src/elements/index.js","../../packages/block-editor/src/utils/get-px-from-css-unit.js","../../packages/block-editor/src/components/global-styles/use-global-styles-output.js","../../packages/block-editor/src/components/global-styles/image-settings-panel.js","../../packages/block-editor/src/components/global-styles/advanced-panel.js","../../packages/block-editor/src/components/global-styles/get-global-styles-changes.js","webpack://wp/./node_modules/memize/dist/index.js","../../packages/block-editor/src/components/rich-text/get-rich-text-values.js","../../packages/block-editor/src/components/dimensions-tool/scale-tool.js","webpack://wp/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://wp/./node_modules/@emotion/styled/node_modules/@emotion/memoize/dist/emotion-memoize.esm.js","webpack://wp/./node_modules/@emotion/styled/node_modules/@emotion/is-prop-valid/dist/emotion-is-prop-valid.esm.js","webpack://wp/./node_modules/@emotion/sheet/dist/emotion-sheet.browser.esm.js","webpack://wp/./node_modules/stylis/src/Utility.js","webpack://wp/./node_modules/stylis/src/Tokenizer.js","webpack://wp/./node_modules/stylis/src/Enum.js","webpack://wp/./node_modules/stylis/src/Serializer.js","webpack://wp/./node_modules/stylis/src/Prefixer.js","webpack://wp/./node_modules/stylis/src/Parser.js","webpack://wp/./node_modules/@emotion/cache/dist/emotion-cache.browser.esm.js","webpack://wp/./node_modules/stylis/src/Middleware.js","webpack://wp/./node_modules/@emotion/unitless/dist/emotion-unitless.esm.js","webpack://wp/./node_modules/@emotion/serialize/node_modules/@emotion/memoize/dist/emotion-memoize.esm.js","webpack://wp/./node_modules/@emotion/serialize/dist/emotion-serialize.browser.esm.js","webpack://wp/./node_modules/@emotion/react/dist/emotion-element-699e6908.browser.esm.js","webpack://wp/./node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js","webpack://wp/./node_modules/@emotion/utils/dist/emotion-utils.browser.esm.js","webpack://wp/./node_modules/@emotion/serialize/node_modules/@emotion/hash/dist/emotion-hash.esm.js","../../packages/block-editor/src/components/dimensions-tool/width-height-tool.js","../../packages/block-editor/src/components/dimensions-tool/index.js","../../packages/block-editor/src/components/resolution-tool/index.js","../../packages/block-editor/src/private-apis.js","../../packages/block-editor/src/components/resizable-box-popover/index.js","../../packages/block-editor/src/components/block-removal-warning-modal/index.js"],"sourcesContent":["/*!\n\tautosize 4.0.2\n\tlicense: MIT\n\thttp://www.jacklmoore.com/autosize\n*/\n(function (global, factory) {\n\tif (typeof define === \"function\" && define.amd) {\n\t\tdefine(['module', 'exports'], factory);\n\t} else if (typeof exports !== \"undefined\") {\n\t\tfactory(module, exports);\n\t} else {\n\t\tvar mod = {\n\t\t\texports: {}\n\t\t};\n\t\tfactory(mod, mod.exports);\n\t\tglobal.autosize = mod.exports;\n\t}\n})(this, function (module, exports) {\n\t'use strict';\n\n\tvar map = typeof Map === \"function\" ? new Map() : function () {\n\t\tvar keys = [];\n\t\tvar values = [];\n\n\t\treturn {\n\t\t\thas: function has(key) {\n\t\t\t\treturn keys.indexOf(key) > -1;\n\t\t\t},\n\t\t\tget: function get(key) {\n\t\t\t\treturn values[keys.indexOf(key)];\n\t\t\t},\n\t\t\tset: function set(key, value) {\n\t\t\t\tif (keys.indexOf(key) === -1) {\n\t\t\t\t\tkeys.push(key);\n\t\t\t\t\tvalues.push(value);\n\t\t\t\t}\n\t\t\t},\n\t\t\tdelete: function _delete(key) {\n\t\t\t\tvar index = keys.indexOf(key);\n\t\t\t\tif (index > -1) {\n\t\t\t\t\tkeys.splice(index, 1);\n\t\t\t\t\tvalues.splice(index, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}();\n\n\tvar createEvent = function createEvent(name) {\n\t\treturn new Event(name, { bubbles: true });\n\t};\n\ttry {\n\t\tnew Event('test');\n\t} catch (e) {\n\t\t// IE does not support `new Event()`\n\t\tcreateEvent = function createEvent(name) {\n\t\t\tvar evt = document.createEvent('Event');\n\t\t\tevt.initEvent(name, true, false);\n\t\t\treturn evt;\n\t\t};\n\t}\n\n\tfunction assign(ta) {\n\t\tif (!ta || !ta.nodeName || ta.nodeName !== 'TEXTAREA' || map.has(ta)) return;\n\n\t\tvar heightOffset = null;\n\t\tvar clientWidth = null;\n\t\tvar cachedHeight = null;\n\n\t\tfunction init() {\n\t\t\tvar style = window.getComputedStyle(ta, null);\n\n\t\t\tif (style.resize === 'vertical') {\n\t\t\t\tta.style.resize = 'none';\n\t\t\t} else if (style.resize === 'both') {\n\t\t\t\tta.style.resize = 'horizontal';\n\t\t\t}\n\n\t\t\tif (style.boxSizing === 'content-box') {\n\t\t\t\theightOffset = -(parseFloat(style.paddingTop) + parseFloat(style.paddingBottom));\n\t\t\t} else {\n\t\t\t\theightOffset = parseFloat(style.borderTopWidth) + parseFloat(style.borderBottomWidth);\n\t\t\t}\n\t\t\t// Fix when a textarea is not on document body and heightOffset is Not a Number\n\t\t\tif (isNaN(heightOffset)) {\n\t\t\t\theightOffset = 0;\n\t\t\t}\n\n\t\t\tupdate();\n\t\t}\n\n\t\tfunction changeOverflow(value) {\n\t\t\t{\n\t\t\t\t// Chrome/Safari-specific fix:\n\t\t\t\t// When the textarea y-overflow is hidden, Chrome/Safari do not reflow the text to account for the space\n\t\t\t\t// made available by removing the scrollbar. The following forces the necessary text reflow.\n\t\t\t\tvar width = ta.style.width;\n\t\t\t\tta.style.width = '0px';\n\t\t\t\t// Force reflow:\n\t\t\t\t/* jshint ignore:start */\n\t\t\t\tta.offsetWidth;\n\t\t\t\t/* jshint ignore:end */\n\t\t\t\tta.style.width = width;\n\t\t\t}\n\n\t\t\tta.style.overflowY = value;\n\t\t}\n\n\t\tfunction getParentOverflows(el) {\n\t\t\tvar arr = [];\n\n\t\t\twhile (el && el.parentNode && el.parentNode instanceof Element) {\n\t\t\t\tif (el.parentNode.scrollTop) {\n\t\t\t\t\tarr.push({\n\t\t\t\t\t\tnode: el.parentNode,\n\t\t\t\t\t\tscrollTop: el.parentNode.scrollTop\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tel = el.parentNode;\n\t\t\t}\n\n\t\t\treturn arr;\n\t\t}\n\n\t\tfunction resize() {\n\t\t\tif (ta.scrollHeight === 0) {\n\t\t\t\t// If the scrollHeight is 0, then the element probably has display:none or is detached from the DOM.\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar overflows = getParentOverflows(ta);\n\t\t\tvar docTop = document.documentElement && document.documentElement.scrollTop; // Needed for Mobile IE (ticket #240)\n\n\t\t\tta.style.height = '';\n\t\t\tta.style.height = ta.scrollHeight + heightOffset + 'px';\n\n\t\t\t// used to check if an update is actually necessary on window.resize\n\t\t\tclientWidth = ta.clientWidth;\n\n\t\t\t// prevents scroll-position jumping\n\t\t\toverflows.forEach(function (el) {\n\t\t\t\tel.node.scrollTop = el.scrollTop;\n\t\t\t});\n\n\t\t\tif (docTop) {\n\t\t\t\tdocument.documentElement.scrollTop = docTop;\n\t\t\t}\n\t\t}\n\n\t\tfunction update() {\n\t\t\tresize();\n\n\t\t\tvar styleHeight = Math.round(parseFloat(ta.style.height));\n\t\t\tvar computed = window.getComputedStyle(ta, null);\n\n\t\t\t// Using offsetHeight as a replacement for computed.height in IE, because IE does not account use of border-box\n\t\t\tvar actualHeight = computed.boxSizing === 'content-box' ? Math.round(parseFloat(computed.height)) : ta.offsetHeight;\n\n\t\t\t// The actual height not matching the style height (set via the resize method) indicates that \n\t\t\t// the max-height has been exceeded, in which case the overflow should be allowed.\n\t\t\tif (actualHeight < styleHeight) {\n\t\t\t\tif (computed.overflowY === 'hidden') {\n\t\t\t\t\tchangeOverflow('scroll');\n\t\t\t\t\tresize();\n\t\t\t\t\tactualHeight = computed.boxSizing === 'content-box' ? Math.round(parseFloat(window.getComputedStyle(ta, null).height)) : ta.offsetHeight;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Normally keep overflow set to hidden, to avoid flash of scrollbar as the textarea expands.\n\t\t\t\tif (computed.overflowY !== 'hidden') {\n\t\t\t\t\tchangeOverflow('hidden');\n\t\t\t\t\tresize();\n\t\t\t\t\tactualHeight = computed.boxSizing === 'content-box' ? Math.round(parseFloat(window.getComputedStyle(ta, null).height)) : ta.offsetHeight;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (cachedHeight !== actualHeight) {\n\t\t\t\tcachedHeight = actualHeight;\n\t\t\t\tvar evt = createEvent('autosize:resized');\n\t\t\t\ttry {\n\t\t\t\t\tta.dispatchEvent(evt);\n\t\t\t\t} catch (err) {\n\t\t\t\t\t// Firefox will throw an error on dispatchEvent for a detached element\n\t\t\t\t\t// https://bugzilla.mozilla.org/show_bug.cgi?id=889376\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar pageResize = function pageResize() {\n\t\t\tif (ta.clientWidth !== clientWidth) {\n\t\t\t\tupdate();\n\t\t\t}\n\t\t};\n\n\t\tvar destroy = function (style) {\n\t\t\twindow.removeEventListener('resize', pageResize, false);\n\t\t\tta.removeEventListener('input', update, false);\n\t\t\tta.removeEventListener('keyup', update, false);\n\t\t\tta.removeEventListener('autosize:destroy', destroy, false);\n\t\t\tta.removeEventListener('autosize:update', update, false);\n\n\t\t\tObject.keys(style).forEach(function (key) {\n\t\t\t\tta.style[key] = style[key];\n\t\t\t});\n\n\t\t\tmap.delete(ta);\n\t\t}.bind(ta, {\n\t\t\theight: ta.style.height,\n\t\t\tresize: ta.style.resize,\n\t\t\toverflowY: ta.style.overflowY,\n\t\t\toverflowX: ta.style.overflowX,\n\t\t\twordWrap: ta.style.wordWrap\n\t\t});\n\n\t\tta.addEventListener('autosize:destroy', destroy, false);\n\n\t\t// IE9 does not fire onpropertychange or oninput for deletions,\n\t\t// so binding to onkeyup to catch most of those events.\n\t\t// There is no way that I know of to detect something like 'cut' in IE9.\n\t\tif ('onpropertychange' in ta && 'oninput' in ta) {\n\t\t\tta.addEventListener('keyup', update, false);\n\t\t}\n\n\t\twindow.addEventListener('resize', pageResize, false);\n\t\tta.addEventListener('input', update, false);\n\t\tta.addEventListener('autosize:update', update, false);\n\t\tta.style.overflowX = 'hidden';\n\t\tta.style.wordWrap = 'break-word';\n\n\t\tmap.set(ta, {\n\t\t\tdestroy: destroy,\n\t\t\tupdate: update\n\t\t});\n\n\t\tinit();\n\t}\n\n\tfunction destroy(ta) {\n\t\tvar methods = map.get(ta);\n\t\tif (methods) {\n\t\t\tmethods.destroy();\n\t\t}\n\t}\n\n\tfunction update(ta) {\n\t\tvar methods = map.get(ta);\n\t\tif (methods) {\n\t\t\tmethods.update();\n\t\t}\n\t}\n\n\tvar autosize = null;\n\n\t// Do nothing in Node.js environment and IE8 (or lower)\n\tif (typeof window === 'undefined' || typeof window.getComputedStyle !== 'function') {\n\t\tautosize = function autosize(el) {\n\t\t\treturn el;\n\t\t};\n\t\tautosize.destroy = function (el) {\n\t\t\treturn el;\n\t\t};\n\t\tautosize.update = function (el) {\n\t\t\treturn el;\n\t\t};\n\t} else {\n\t\tautosize = function autosize(el, options) {\n\t\t\tif (el) {\n\t\t\t\tArray.prototype.forEach.call(el.length ? el : [el], function (x) {\n\t\t\t\t\treturn assign(x, options);\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn el;\n\t\t};\n\t\tautosize.destroy = function (el) {\n\t\t\tif (el) {\n\t\t\t\tArray.prototype.forEach.call(el.length ? el : [el], destroy);\n\t\t\t}\n\t\t\treturn el;\n\t\t};\n\t\tautosize.update = function (el) {\n\t\t\tif (el) {\n\t\t\t\tArray.prototype.forEach.call(el.length ? el : [el], update);\n\t\t\t}\n\t\t\treturn el;\n\t\t};\n\t}\n\n\texports.default = autosize;\n\tmodule.exports = exports['default'];\n});","/*!\n  Copyright (c) 2018 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames() {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg)) {\n\t\t\t\tif (arg.length) {\n\t\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\t\tif (inner) {\n\t\t\t\t\t\tclasses.push(inner);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tif (arg.toString === Object.prototype.toString) {\n\t\t\t\t\tfor (var key in arg) {\n\t\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tclasses.push(arg.toString());\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","// This code has been refactored for 140 bytes\n// You can see the original here: https://github.com/twolfson/computedStyle/blob/04cd1da2e30fa45844f95f5cb1ac898e9b9ef050/lib/computedStyle.js\nvar computedStyle = function (el, prop, getComputedStyle) {\n  getComputedStyle = window.getComputedStyle;\n\n  // In one fell swoop\n  return (\n    // If we have getComputedStyle\n    getComputedStyle ?\n      // Query it\n      // TODO: From CSS-Query notes, we might need (node, null) for FF\n      getComputedStyle(el) :\n\n    // Otherwise, we are in IE and use currentStyle\n      el.currentStyle\n  )[\n    // Switch to camelCase for CSSOM\n    // DEV: Grabbed from jQuery\n    // https://github.com/jquery/jquery/blob/1.9-stable/src/css.js#L191-L194\n    // https://github.com/jquery/jquery/blob/1.9-stable/src/core.js#L593-L597\n    prop.replace(/-(\\w)/gi, function (word, letter) {\n      return letter.toUpperCase();\n    })\n  ];\n};\n\nmodule.exports = computedStyle;\n","export default function Diff() {}\n\nDiff.prototype = {\n  diff(oldString, newString, options = {}) {\n    let callback = options.callback;\n    if (typeof options === 'function') {\n      callback = options;\n      options = {};\n    }\n    this.options = options;\n\n    let self = this;\n\n    function done(value) {\n      if (callback) {\n        setTimeout(function() { callback(undefined, value); }, 0);\n        return true;\n      } else {\n        return value;\n      }\n    }\n\n    // Allow subclasses to massage the input prior to running\n    oldString = this.castInput(oldString);\n    newString = this.castInput(newString);\n\n    oldString = this.removeEmpty(this.tokenize(oldString));\n    newString = this.removeEmpty(this.tokenize(newString));\n\n    let newLen = newString.length, oldLen = oldString.length;\n    let editLength = 1;\n    let maxEditLength = newLen + oldLen;\n    let bestPath = [{ newPos: -1, components: [] }];\n\n    // Seed editLength = 0, i.e. the content starts with the same values\n    let oldPos = this.extractCommon(bestPath[0], newString, oldString, 0);\n    if (bestPath[0].newPos + 1 >= newLen && oldPos + 1 >= oldLen) {\n      // Identity per the equality and tokenizer\n      return done([{value: this.join(newString), count: newString.length}]);\n    }\n\n    // Main worker method. checks all permutations of a given edit length for acceptance.\n    function execEditLength() {\n      for (let diagonalPath = -1 * editLength; diagonalPath <= editLength; diagonalPath += 2) {\n        let basePath;\n        let addPath = bestPath[diagonalPath - 1],\n            removePath = bestPath[diagonalPath + 1],\n            oldPos = (removePath ? removePath.newPos : 0) - diagonalPath;\n        if (addPath) {\n          // No one else is going to attempt to use this value, clear it\n          bestPath[diagonalPath - 1] = undefined;\n        }\n\n        let canAdd = addPath && addPath.newPos + 1 < newLen,\n            canRemove = removePath && 0 <= oldPos && oldPos < oldLen;\n        if (!canAdd && !canRemove) {\n          // If this path is a terminal then prune\n          bestPath[diagonalPath] = undefined;\n          continue;\n        }\n\n        // Select the diagonal that we want to branch from. We select the prior\n        // path whose position in the new string is the farthest from the origin\n        // and does not pass the bounds of the diff graph\n        if (!canAdd || (canRemove && addPath.newPos < removePath.newPos)) {\n          basePath = clonePath(removePath);\n          self.pushComponent(basePath.components, undefined, true);\n        } else {\n          basePath = addPath; // No need to clone, we've pulled it from the list\n          basePath.newPos++;\n          self.pushComponent(basePath.components, true, undefined);\n        }\n\n        oldPos = self.extractCommon(basePath, newString, oldString, diagonalPath);\n\n        // If we have hit the end of both strings, then we are done\n        if (basePath.newPos + 1 >= newLen && oldPos + 1 >= oldLen) {\n          return done(buildValues(self, basePath.components, newString, oldString, self.useLongestToken));\n        } else {\n          // Otherwise track this path as a potential candidate and continue.\n          bestPath[diagonalPath] = basePath;\n        }\n      }\n\n      editLength++;\n    }\n\n    // Performs the length of edit iteration. Is a bit fugly as this has to support the\n    // sync and async mode which is never fun. Loops over execEditLength until a value\n    // is produced.\n    if (callback) {\n      (function exec() {\n        setTimeout(function() {\n          // This should not happen, but we want to be safe.\n          /* istanbul ignore next */\n          if (editLength > maxEditLength) {\n            return callback();\n          }\n\n          if (!execEditLength()) {\n            exec();\n          }\n        }, 0);\n      }());\n    } else {\n      while (editLength <= maxEditLength) {\n        let ret = execEditLength();\n        if (ret) {\n          return ret;\n        }\n      }\n    }\n  },\n\n  pushComponent(components, added, removed) {\n    let last = components[components.length - 1];\n    if (last && last.added === added && last.removed === removed) {\n      // We need to clone here as the component clone operation is just\n      // as shallow array clone\n      components[components.length - 1] = {count: last.count + 1, added: added, removed: removed };\n    } else {\n      components.push({count: 1, added: added, removed: removed });\n    }\n  },\n  extractCommon(basePath, newString, oldString, diagonalPath) {\n    let newLen = newString.length,\n        oldLen = oldString.length,\n        newPos = basePath.newPos,\n        oldPos = newPos - diagonalPath,\n\n        commonCount = 0;\n    while (newPos + 1 < newLen && oldPos + 1 < oldLen && this.equals(newString[newPos + 1], oldString[oldPos + 1])) {\n      newPos++;\n      oldPos++;\n      commonCount++;\n    }\n\n    if (commonCount) {\n      basePath.components.push({count: commonCount});\n    }\n\n    basePath.newPos = newPos;\n    return oldPos;\n  },\n\n  equals(left, right) {\n    if (this.options.comparator) {\n      return this.options.comparator(left, right);\n    } else {\n      return left === right\n        || (this.options.ignoreCase && left.toLowerCase() === right.toLowerCase());\n    }\n  },\n  removeEmpty(array) {\n    let ret = [];\n    for (let i = 0; i < array.length; i++) {\n      if (array[i]) {\n        ret.push(array[i]);\n      }\n    }\n    return ret;\n  },\n  castInput(value) {\n    return value;\n  },\n  tokenize(value) {\n    return value.split('');\n  },\n  join(chars) {\n    return chars.join('');\n  }\n};\n\nfunction buildValues(diff, components, newString, oldString, useLongestToken) {\n  let componentPos = 0,\n      componentLen = components.length,\n      newPos = 0,\n      oldPos = 0;\n\n  for (; componentPos < componentLen; componentPos++) {\n    let component = components[componentPos];\n    if (!component.removed) {\n      if (!component.added && useLongestToken) {\n        let value = newString.slice(newPos, newPos + component.count);\n        value = value.map(function(value, i) {\n          let oldValue = oldString[oldPos + i];\n          return oldValue.length > value.length ? oldValue : value;\n        });\n\n        component.value = diff.join(value);\n      } else {\n        component.value = diff.join(newString.slice(newPos, newPos + component.count));\n      }\n      newPos += component.count;\n\n      // Common case\n      if (!component.added) {\n        oldPos += component.count;\n      }\n    } else {\n      component.value = diff.join(oldString.slice(oldPos, oldPos + component.count));\n      oldPos += component.count;\n\n      // Reverse add and remove so removes are output first to match common convention\n      // The diffing algorithm is tied to add then remove output and this is the simplest\n      // route to get the desired output with minimal overhead.\n      if (componentPos && components[componentPos - 1].added) {\n        let tmp = components[componentPos - 1];\n        components[componentPos - 1] = components[componentPos];\n        components[componentPos] = tmp;\n      }\n    }\n  }\n\n  // Special case handle for when one terminal is ignored (i.e. whitespace).\n  // For this case we merge the terminal into the prior string and drop the change.\n  // This is only available for string mode.\n  let lastComponent = components[componentLen - 1];\n  if (componentLen > 1\n      && typeof lastComponent.value === 'string'\n      && (lastComponent.added || lastComponent.removed)\n      && diff.equals('', lastComponent.value)) {\n    components[componentLen - 2].value += lastComponent.value;\n    components.pop();\n  }\n\n  return components;\n}\n\nfunction clonePath(path) {\n  return { newPos: path.newPos, components: path.components.slice(0) };\n}\n","import Diff from './base';\n\nexport const characterDiff = new Diff();\nexport function diffChars(oldStr, newStr, options) { return characterDiff.diff(oldStr, newStr, options); }\n","'use strict';\n\n// do not edit .js files directly - edit src/index.jst\n\n\n  var envHasBigInt64Array = typeof BigInt64Array !== 'undefined';\n\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n\n    if ((a instanceof Map) && (b instanceof Map)) {\n      if (a.size !== b.size) return false;\n      for (i of a.entries())\n        if (!b.has(i[0])) return false;\n      for (i of a.entries())\n        if (!equal(i[1], b.get(i[0]))) return false;\n      return true;\n    }\n\n    if ((a instanceof Set) && (b instanceof Set)) {\n      if (a.size !== b.size) return false;\n      for (i of a.entries())\n        if (!b.has(i[0])) return false;\n      return true;\n    }\n\n    if (ArrayBuffer.isView(a) && ArrayBuffer.isView(b)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (a[i] !== b[i]) return false;\n      return true;\n    }\n\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a!==a && b!==b;\n};\n","'use strict';\n\n// do not edit .js files directly - edit src/index.jst\n\n\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a!==a && b!==b;\n};\n","// Load in dependencies\nvar computedStyle = require('computed-style');\n\n/**\n * Calculate the `line-height` of a given node\n * @param {HTMLElement} node Element to calculate line height of. Must be in the DOM.\n * @returns {Number} `line-height` of the element in pixels\n */\nfunction lineHeight(node) {\n  // Grab the line-height via style\n  var lnHeightStr = computedStyle(node, 'line-height');\n  var lnHeight = parseFloat(lnHeightStr, 10);\n\n  // If the lineHeight did not contain a unit (i.e. it was numeric), convert it to ems (e.g. '2.3' === '2.3em')\n  if (lnHeightStr === lnHeight + '') {\n    // Save the old lineHeight style and update the em unit to the element\n    var _lnHeightStyle = node.style.lineHeight;\n    node.style.lineHeight = lnHeightStr + 'em';\n\n    // Calculate the em based height\n    lnHeightStr = computedStyle(node, 'line-height');\n    lnHeight = parseFloat(lnHeightStr, 10);\n\n    // Revert the lineHeight style\n    if (_lnHeightStyle) {\n      node.style.lineHeight = _lnHeightStyle;\n    } else {\n      delete node.style.lineHeight;\n    }\n  }\n\n  // If the lineHeight is in `pt`, convert it to pixels (4px for 3pt)\n  // DEV: `em` units are converted to `pt` in IE6\n  // Conversion ratio from https://developer.mozilla.org/en-US/docs/Web/CSS/length\n  if (lnHeightStr.indexOf('pt') !== -1) {\n    lnHeight *= 4;\n    lnHeight /= 3;\n  // Otherwise, if the lineHeight is in `mm`, convert it to pixels (96px for 25.4mm)\n  } else if (lnHeightStr.indexOf('mm') !== -1) {\n    lnHeight *= 96;\n    lnHeight /= 25.4;\n  // Otherwise, if the lineHeight is in `cm`, convert it to pixels (96px for 2.54cm)\n  } else if (lnHeightStr.indexOf('cm') !== -1) {\n    lnHeight *= 96;\n    lnHeight /= 2.54;\n  // Otherwise, if the lineHeight is in `in`, convert it to pixels (96px for 1in)\n  } else if (lnHeightStr.indexOf('in') !== -1) {\n    lnHeight *= 96;\n  // Otherwise, if the lineHeight is in `pc`, convert it to pixels (12pt for 1pc)\n  } else if (lnHeightStr.indexOf('pc') !== -1) {\n    lnHeight *= 16;\n  }\n\n  // Continue our computation\n  lnHeight = Math.round(lnHeight);\n\n  // If the line-height is \"normal\", calculate by font-size\n  if (lnHeightStr === 'normal') {\n    // Create a temporary node\n    var nodeName = node.nodeName;\n    var _node = document.createElement(nodeName);\n    _node.innerHTML = '&nbsp;';\n\n    // If we have a text area, reset it to only 1 row\n    // https://github.com/twolfson/line-height/issues/4\n    if (nodeName.toUpperCase() === 'TEXTAREA') {\n      _node.setAttribute('rows', '1');\n    }\n\n    // Set the font-size of the element\n    var fontSizeStr = computedStyle(node, 'font-size');\n    _node.style.fontSize = fontSizeStr;\n\n    // Remove default padding/border which can affect offset height\n    // https://github.com/twolfson/line-height/issues/4\n    // https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/offsetHeight\n    _node.style.padding = '0px';\n    _node.style.border = '0px';\n\n    // Append it to the body\n    var body = document.body;\n    body.appendChild(_node);\n\n    // Assume the line height of the element is the height\n    var height = _node.offsetHeight;\n    lnHeight = height;\n\n    // Remove our child from the DOM\n    body.removeChild(_node);\n  }\n\n  // Return the calculated height\n  return lnHeight;\n}\n\n// Export lineHeight\nmodule.exports = lineHeight;\n","module.exports = require('./src/normalizeWheel.js');\n","/**\n * Copyright (c) 2015, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule ExecutionEnvironment\n */\n\n/*jslint evil: true */\n\n'use strict';\n\nvar canUseDOM = !!(\n  typeof window !== 'undefined' &&\n  window.document &&\n  window.document.createElement\n);\n\n/**\n * Simple, lightweight module assisting with the detection and context of\n * Worker. Helps avoid circular dependencies and allows code to reason about\n * whether or not they are in a Worker, even if they never include the main\n * `ReactWorker` dependency.\n */\nvar ExecutionEnvironment = {\n\n  canUseDOM: canUseDOM,\n\n  canUseWorkers: typeof Worker !== 'undefined',\n\n  canUseEventListeners:\n    canUseDOM && !!(window.addEventListener || window.attachEvent),\n\n  canUseViewport: canUseDOM && !!window.screen,\n\n  isInWorker: !canUseDOM // For now, this is true - might change in the future.\n\n};\n\nmodule.exports = ExecutionEnvironment;\n","/**\n * Copyright 2004-present Facebook. All Rights Reserved.\n *\n * @providesModule UserAgent_DEPRECATED\n */\n\n/**\n *  Provides entirely client-side User Agent and OS detection. You should prefer\n *  the non-deprecated UserAgent module when possible, which exposes our\n *  authoritative server-side PHP-based detection to the client.\n *\n *  Usage is straightforward:\n *\n *    if (UserAgent_DEPRECATED.ie()) {\n *      //  IE\n *    }\n *\n *  You can also do version checks:\n *\n *    if (UserAgent_DEPRECATED.ie() >= 7) {\n *      //  IE7 or better\n *    }\n *\n *  The browser functions will return NaN if the browser does not match, so\n *  you can also do version compares the other way:\n *\n *    if (UserAgent_DEPRECATED.ie() < 7) {\n *      //  IE6 or worse\n *    }\n *\n *  Note that the version is a float and may include a minor version number,\n *  so you should always use range operators to perform comparisons, not\n *  strict equality.\n *\n *  **Note:** You should **strongly** prefer capability detection to browser\n *  version detection where it's reasonable:\n *\n *    http://www.quirksmode.org/js/support.html\n *\n *  Further, we have a large number of mature wrapper functions and classes\n *  which abstract away many browser irregularities. Check the documentation,\n *  grep for things, or ask on javascript@lists.facebook.com before writing yet\n *  another copy of \"event || window.event\".\n *\n */\n\nvar _populated = false;\n\n// Browsers\nvar _ie, _firefox, _opera, _webkit, _chrome;\n\n// Actual IE browser for compatibility mode\nvar _ie_real_version;\n\n// Platforms\nvar _osx, _windows, _linux, _android;\n\n// Architectures\nvar _win64;\n\n// Devices\nvar _iphone, _ipad, _native;\n\nvar _mobile;\n\nfunction _populate() {\n  if (_populated) {\n    return;\n  }\n\n  _populated = true;\n\n  // To work around buggy JS libraries that can't handle multi-digit\n  // version numbers, Opera 10's user agent string claims it's Opera\n  // 9, then later includes a Version/X.Y field:\n  //\n  // Opera/9.80 (foo) Presto/2.2.15 Version/10.10\n  var uas = navigator.userAgent;\n  var agent = /(?:MSIE.(\\d+\\.\\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\\d+\\.\\d+))|(?:Opera(?:.+Version.|.)(\\d+\\.\\d+))|(?:AppleWebKit.(\\d+(?:\\.\\d+)?))|(?:Trident\\/\\d+\\.\\d+.*rv:(\\d+\\.\\d+))/.exec(uas);\n  var os    = /(Mac OS X)|(Windows)|(Linux)/.exec(uas);\n\n  _iphone = /\\b(iPhone|iP[ao]d)/.exec(uas);\n  _ipad = /\\b(iP[ao]d)/.exec(uas);\n  _android = /Android/i.exec(uas);\n  _native = /FBAN\\/\\w+;/i.exec(uas);\n  _mobile = /Mobile/i.exec(uas);\n\n  // Note that the IE team blog would have you believe you should be checking\n  // for 'Win64; x64'.  But MSDN then reveals that you can actually be coming\n  // from either x64 or ia64;  so ultimately, you should just check for Win64\n  // as in indicator of whether you're in 64-bit IE.  32-bit IE on 64-bit\n  // Windows will send 'WOW64' instead.\n  _win64 = !!(/Win64/.exec(uas));\n\n  if (agent) {\n    _ie = agent[1] ? parseFloat(agent[1]) : (\n          agent[5] ? parseFloat(agent[5]) : NaN);\n    // IE compatibility mode\n    if (_ie && document && document.documentMode) {\n      _ie = document.documentMode;\n    }\n    // grab the \"true\" ie version from the trident token if available\n    var trident = /(?:Trident\\/(\\d+.\\d+))/.exec(uas);\n    _ie_real_version = trident ? parseFloat(trident[1]) + 4 : _ie;\n\n    _firefox = agent[2] ? parseFloat(agent[2]) : NaN;\n    _opera   = agent[3] ? parseFloat(agent[3]) : NaN;\n    _webkit  = agent[4] ? parseFloat(agent[4]) : NaN;\n    if (_webkit) {\n      // We do not add the regexp to the above test, because it will always\n      // match 'safari' only since 'AppleWebKit' appears before 'Chrome' in\n      // the userAgent string.\n      agent = /(?:Chrome\\/(\\d+\\.\\d+))/.exec(uas);\n      _chrome = agent && agent[1] ? parseFloat(agent[1]) : NaN;\n    } else {\n      _chrome = NaN;\n    }\n  } else {\n    _ie = _firefox = _opera = _chrome = _webkit = NaN;\n  }\n\n  if (os) {\n    if (os[1]) {\n      // Detect OS X version.  If no version number matches, set _osx to true.\n      // Version examples:  10, 10_6_1, 10.7\n      // Parses version number as a float, taking only first two sets of\n      // digits.  If only one set of digits is found, returns just the major\n      // version number.\n      var ver = /(?:Mac OS X (\\d+(?:[._]\\d+)?))/.exec(uas);\n\n      _osx = ver ? parseFloat(ver[1].replace('_', '.')) : true;\n    } else {\n      _osx = false;\n    }\n    _windows = !!os[2];\n    _linux   = !!os[3];\n  } else {\n    _osx = _windows = _linux = false;\n  }\n}\n\nvar UserAgent_DEPRECATED = {\n\n  /**\n   *  Check if the UA is Internet Explorer.\n   *\n   *\n   *  @return float|NaN Version number (if match) or NaN.\n   */\n  ie: function() {\n    return _populate() || _ie;\n  },\n\n  /**\n   * Check if we're in Internet Explorer compatibility mode.\n   *\n   * @return bool true if in compatibility mode, false if\n   * not compatibility mode or not ie\n   */\n  ieCompatibilityMode: function() {\n    return _populate() || (_ie_real_version > _ie);\n  },\n\n\n  /**\n   * Whether the browser is 64-bit IE.  Really, this is kind of weak sauce;  we\n   * only need this because Skype can't handle 64-bit IE yet.  We need to remove\n   * this when we don't need it -- tracked by #601957.\n   */\n  ie64: function() {\n    return UserAgent_DEPRECATED.ie() && _win64;\n  },\n\n  /**\n   *  Check if the UA is Firefox.\n   *\n   *\n   *  @return float|NaN Version number (if match) or NaN.\n   */\n  firefox: function() {\n    return _populate() || _firefox;\n  },\n\n\n  /**\n   *  Check if the UA is Opera.\n   *\n   *\n   *  @return float|NaN Version number (if match) or NaN.\n   */\n  opera: function() {\n    return _populate() || _opera;\n  },\n\n\n  /**\n   *  Check if the UA is WebKit.\n   *\n   *\n   *  @return float|NaN Version number (if match) or NaN.\n   */\n  webkit: function() {\n    return _populate() || _webkit;\n  },\n\n  /**\n   *  For Push\n   *  WILL BE REMOVED VERY SOON. Use UserAgent_DEPRECATED.webkit\n   */\n  safari: function() {\n    return UserAgent_DEPRECATED.webkit();\n  },\n\n  /**\n   *  Check if the UA is a Chrome browser.\n   *\n   *\n   *  @return float|NaN Version number (if match) or NaN.\n   */\n  chrome : function() {\n    return _populate() || _chrome;\n  },\n\n\n  /**\n   *  Check if the user is running Windows.\n   *\n   *  @return bool `true' if the user's OS is Windows.\n   */\n  windows: function() {\n    return _populate() || _windows;\n  },\n\n\n  /**\n   *  Check if the user is running Mac OS X.\n   *\n   *  @return float|bool   Returns a float if a version number is detected,\n   *                       otherwise true/false.\n   */\n  osx: function() {\n    return _populate() || _osx;\n  },\n\n  /**\n   * Check if the user is running Linux.\n   *\n   * @return bool `true' if the user's OS is some flavor of Linux.\n   */\n  linux: function() {\n    return _populate() || _linux;\n  },\n\n  /**\n   * Check if the user is running on an iPhone or iPod platform.\n   *\n   * @return bool `true' if the user is running some flavor of the\n   *    iPhone OS.\n   */\n  iphone: function() {\n    return _populate() || _iphone;\n  },\n\n  mobile: function() {\n    return _populate() || (_iphone || _ipad || _android || _mobile);\n  },\n\n  nativeApp: function() {\n    // webviews inside of the native apps\n    return _populate() || _native;\n  },\n\n  android: function() {\n    return _populate() || _android;\n  },\n\n  ipad: function() {\n    return _populate() || _ipad;\n  }\n};\n\nmodule.exports = UserAgent_DEPRECATED;\n","/**\n * Copyright 2013-2015, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule isEventSupported\n */\n\n'use strict';\n\nvar ExecutionEnvironment = require('./ExecutionEnvironment');\n\nvar useHasFeature;\nif (ExecutionEnvironment.canUseDOM) {\n  useHasFeature =\n    document.implementation &&\n    document.implementation.hasFeature &&\n    // always returns true in newer browsers as per the standard.\n    // @see http://dom.spec.whatwg.org/#dom-domimplementation-hasfeature\n    document.implementation.hasFeature('', '') !== true;\n}\n\n/**\n * Checks if an event is supported in the current execution environment.\n *\n * NOTE: This will not work correctly for non-generic events such as `change`,\n * `reset`, `load`, `error`, and `select`.\n *\n * Borrows from Modernizr.\n *\n * @param {string} eventNameSuffix Event name, e.g. \"click\".\n * @param {?boolean} capture Check if the capture phase is supported.\n * @return {boolean} True if the event is supported.\n * @internal\n * @license Modernizr 3.0.0pre (Custom Build) | MIT\n */\nfunction isEventSupported(eventNameSuffix, capture) {\n  if (!ExecutionEnvironment.canUseDOM ||\n      capture && !('addEventListener' in document)) {\n    return false;\n  }\n\n  var eventName = 'on' + eventNameSuffix;\n  var isSupported = eventName in document;\n\n  if (!isSupported) {\n    var element = document.createElement('div');\n    element.setAttribute(eventName, 'return;');\n    isSupported = typeof element[eventName] === 'function';\n  }\n\n  if (!isSupported && useHasFeature && eventNameSuffix === 'wheel') {\n    // This is the only way to test support for the `wheel` event in IE9+.\n    isSupported = document.implementation.hasFeature('Events.wheel', '3.0');\n  }\n\n  return isSupported;\n}\n\nmodule.exports = isEventSupported;\n","/**\n * Copyright (c) 2015, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule normalizeWheel\n * @typechecks\n */\n\n'use strict';\n\nvar UserAgent_DEPRECATED = require('./UserAgent_DEPRECATED');\n\nvar isEventSupported = require('./isEventSupported');\n\n\n// Reasonable defaults\nvar PIXEL_STEP  = 10;\nvar LINE_HEIGHT = 40;\nvar PAGE_HEIGHT = 800;\n\n/**\n * Mouse wheel (and 2-finger trackpad) support on the web sucks.  It is\n * complicated, thus this doc is long and (hopefully) detailed enough to answer\n * your questions.\n *\n * If you need to react to the mouse wheel in a predictable way, this code is\n * like your bestest friend. * hugs *\n *\n * As of today, there are 4 DOM event types you can listen to:\n *\n *   'wheel'                -- Chrome(31+), FF(17+), IE(9+)\n *   'mousewheel'           -- Chrome, IE(6+), Opera, Safari\n *   'MozMousePixelScroll'  -- FF(3.5 only!) (2010-2013) -- don't bother!\n *   'DOMMouseScroll'       -- FF(0.9.7+) since 2003\n *\n * So what to do?  The is the best:\n *\n *   normalizeWheel.getEventType();\n *\n * In your event callback, use this code to get sane interpretation of the\n * deltas.  This code will return an object with properties:\n *\n *   spinX   -- normalized spin speed (use for zoom) - x plane\n *   spinY   -- \" - y plane\n *   pixelX  -- normalized distance (to pixels) - x plane\n *   pixelY  -- \" - y plane\n *\n * Wheel values are provided by the browser assuming you are using the wheel to\n * scroll a web page by a number of lines or pixels (or pages).  Values can vary\n * significantly on different platforms and browsers, forgetting that you can\n * scroll at different speeds.  Some devices (like trackpads) emit more events\n * at smaller increments with fine granularity, and some emit massive jumps with\n * linear speed or acceleration.\n *\n * This code does its best to normalize the deltas for you:\n *\n *   - spin is trying to normalize how far the wheel was spun (or trackpad\n *     dragged).  This is super useful for zoom support where you want to\n *     throw away the chunky scroll steps on the PC and make those equal to\n *     the slow and smooth tiny steps on the Mac. Key data: This code tries to\n *     resolve a single slow step on a wheel to 1.\n *\n *   - pixel is normalizing the desired scroll delta in pixel units.  You'll\n *     get the crazy differences between browsers, but at least it'll be in\n *     pixels!\n *\n *   - positive value indicates scrolling DOWN/RIGHT, negative UP/LEFT.  This\n *     should translate to positive value zooming IN, negative zooming OUT.\n *     This matches the newer 'wheel' event.\n *\n * Why are there spinX, spinY (or pixels)?\n *\n *   - spinX is a 2-finger side drag on the trackpad, and a shift + wheel turn\n *     with a mouse.  It results in side-scrolling in the browser by default.\n *\n *   - spinY is what you expect -- it's the classic axis of a mouse wheel.\n *\n *   - I dropped spinZ/pixelZ.  It is supported by the DOM 3 'wheel' event and\n *     probably is by browsers in conjunction with fancy 3D controllers .. but\n *     you know.\n *\n * Implementation info:\n *\n * Examples of 'wheel' event if you scroll slowly (down) by one step with an\n * average mouse:\n *\n *   OS X + Chrome  (mouse)     -    4   pixel delta  (wheelDelta -120)\n *   OS X + Safari  (mouse)     -  N/A   pixel delta  (wheelDelta  -12)\n *   OS X + Firefox (mouse)     -    0.1 line  delta  (wheelDelta  N/A)\n *   Win8 + Chrome  (mouse)     -  100   pixel delta  (wheelDelta -120)\n *   Win8 + Firefox (mouse)     -    3   line  delta  (wheelDelta -120)\n *\n * On the trackpad:\n *\n *   OS X + Chrome  (trackpad)  -    2   pixel delta  (wheelDelta   -6)\n *   OS X + Firefox (trackpad)  -    1   pixel delta  (wheelDelta  N/A)\n *\n * On other/older browsers.. it's more complicated as there can be multiple and\n * also missing delta values.\n *\n * The 'wheel' event is more standard:\n *\n * http://www.w3.org/TR/DOM-Level-3-Events/#events-wheelevents\n *\n * The basics is that it includes a unit, deltaMode (pixels, lines, pages), and\n * deltaX, deltaY and deltaZ.  Some browsers provide other values to maintain\n * backward compatibility with older events.  Those other values help us\n * better normalize spin speed.  Example of what the browsers provide:\n *\n *                          | event.wheelDelta | event.detail\n *        ------------------+------------------+--------------\n *          Safari v5/OS X  |       -120       |       0\n *          Safari v5/Win7  |       -120       |       0\n *         Chrome v17/OS X  |       -120       |       0\n *         Chrome v17/Win7  |       -120       |       0\n *                IE9/Win7  |       -120       |   undefined\n *         Firefox v4/OS X  |     undefined    |       1\n *         Firefox v4/Win7  |     undefined    |       3\n *\n */\nfunction normalizeWheel(/*object*/ event) /*object*/ {\n  var sX = 0, sY = 0,       // spinX, spinY\n      pX = 0, pY = 0;       // pixelX, pixelY\n\n  // Legacy\n  if ('detail'      in event) { sY = event.detail; }\n  if ('wheelDelta'  in event) { sY = -event.wheelDelta / 120; }\n  if ('wheelDeltaY' in event) { sY = -event.wheelDeltaY / 120; }\n  if ('wheelDeltaX' in event) { sX = -event.wheelDeltaX / 120; }\n\n  // side scrolling on FF with DOMMouseScroll\n  if ( 'axis' in event && event.axis === event.HORIZONTAL_AXIS ) {\n    sX = sY;\n    sY = 0;\n  }\n\n  pX = sX * PIXEL_STEP;\n  pY = sY * PIXEL_STEP;\n\n  if ('deltaY' in event) { pY = event.deltaY; }\n  if ('deltaX' in event) { pX = event.deltaX; }\n\n  if ((pX || pY) && event.deltaMode) {\n    if (event.deltaMode == 1) {          // delta in LINE units\n      pX *= LINE_HEIGHT;\n      pY *= LINE_HEIGHT;\n    } else {                             // delta in PAGE units\n      pX *= PAGE_HEIGHT;\n      pY *= PAGE_HEIGHT;\n    }\n  }\n\n  // Fall-back if spin cannot be determined\n  if (pX && !sX) { sX = (pX < 1) ? -1 : 1; }\n  if (pY && !sY) { sY = (pY < 1) ? -1 : 1; }\n\n  return { spinX  : sX,\n           spinY  : sY,\n           pixelX : pX,\n           pixelY : pY };\n}\n\n\n/**\n * The best combination if you prefer spinX + spinY normalization.  It favors\n * the older DOMMouseScroll for Firefox, as FF does not include wheelDelta with\n * 'wheel' event, making spin speed determination impossible.\n */\nnormalizeWheel.getEventType = function() /*string*/ {\n  return (UserAgent_DEPRECATED.firefox())\n           ? 'DOMMouseScroll'\n           : (isEventSupported('wheel'))\n               ? 'wheel'\n               : 'mousewheel';\n};\n\nmodule.exports = normalizeWheel;\n","var x=String;\nvar create=function() {return {isColorSupported:false,reset:x,bold:x,dim:x,italic:x,underline:x,inverse:x,hidden:x,strikethrough:x,black:x,red:x,green:x,yellow:x,blue:x,magenta:x,cyan:x,white:x,gray:x,bgBlack:x,bgRed:x,bgGreen:x,bgYellow:x,bgBlue:x,bgMagenta:x,bgCyan:x,bgWhite:x}};\nmodule.exports=create();\nmodule.exports.createColors = create;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nrequire(\"./Types\");\nconst postcss_1 = __importDefault(require(\"postcss\"));\nconst PostCSSPlugin_1 = __importDefault(require(\"./plugin/PostCSSPlugin\"));\nmodule.exports = (0, PostCSSPlugin_1.default)(postcss_1.default);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.prefixWrapCSSSelector = exports.prefixWrapCSSRule = void 0;\nconst CSSSelector_1 = require(\"./CSSSelector\");\nconst prefixWrapCSSRule = (cssRule, nested, ignoredSelectors, prefixSelector, prefixRootTags) => {\n    // Check each rule to see if it exactly matches our prefix selector, when\n    // this happens, don't try to prefix that selector.\n    const rules = cssRule.selector\n        .split(\",\")\n        .filter((selector) => !(0, CSSSelector_1.cssRuleMatchesPrefixSelector)({ selector: selector }, prefixSelector));\n    if (rules.length === 0) {\n        return;\n    }\n    cssRule.selector = rules\n        .map((cssSelector) => (0, exports.prefixWrapCSSSelector)(cssSelector, cssRule, nested, ignoredSelectors, prefixSelector, prefixRootTags))\n        .filter(CSSSelector_1.isValidCSSSelector)\n        .join(\", \");\n};\nexports.prefixWrapCSSRule = prefixWrapCSSRule;\nconst prefixWrapCSSSelector = (cssSelector, cssRule, nested, ignoredSelectors, prefixSelector, prefixRootTags) => {\n    const cleanedSelector = (0, CSSSelector_1.cleanSelector)(cssSelector);\n    if (cleanedSelector === \"\") {\n        return null;\n    }\n    // Don't prefix nested selected.\n    if (nested !== null && cleanedSelector.startsWith(nested, 0)) {\n        return cleanedSelector;\n    }\n    // Do not prefix keyframes rules.\n    if ((0, CSSSelector_1.isKeyframes)(cssRule)) {\n        return cleanedSelector;\n    }\n    // Check for matching ignored selectors\n    if (ignoredSelectors.some((currentValue) => cleanedSelector.match(currentValue))) {\n        return cleanedSelector;\n    }\n    // Anything other than a root tag is always prefixed.\n    if ((0, CSSSelector_1.isNotRootTag)(cleanedSelector)) {\n        return prefixSelector + \" \" + cleanedSelector;\n    }\n    // Handle special case where root tags should be converted into classes\n    // rather than being replaced.\n    if (prefixRootTags) {\n        return prefixSelector + \" .\" + cleanedSelector;\n    }\n    // HTML and Body elements cannot be contained within our container so lets\n    // extract their styles.\n    return cleanedSelector.replace(/^(body|html|:root)/, prefixSelector);\n};\nexports.prefixWrapCSSSelector = prefixWrapCSSSelector;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.cssRuleMatchesPrefixSelector = exports.isNotRootTag = exports.isKeyframes = exports.cleanSelector = exports.isValidCSSSelector = void 0;\nconst ANY_WHITESPACE_AT_BEGINNING_OR_END = /(^\\s*|\\s*$)/g;\nconst IS_ROOT_TAG = /^(body|html|:root).*$/;\nconst isValidCSSSelector = (cssSelector) => {\n    return cssSelector !== null;\n};\nexports.isValidCSSSelector = isValidCSSSelector;\nconst cleanSelector = (cssSelector) => {\n    return cssSelector.replace(ANY_WHITESPACE_AT_BEGINNING_OR_END, \"\");\n};\nexports.cleanSelector = cleanSelector;\nconst isKeyframes = (cssRule) => {\n    const { parent } = cssRule;\n    const parentReal = parent;\n    // @see https://developer.mozilla.org/en-US/docs/Web/CSS/At-rule\n    return (parent !== undefined &&\n        parentReal.type === \"atrule\" &&\n        parentReal.name !== undefined &&\n        parentReal.name.match(/keyframes$/) !== null);\n};\nexports.isKeyframes = isKeyframes;\nconst isNotRootTag = (cleanSelector) => {\n    return !cleanSelector.match(IS_ROOT_TAG);\n};\nexports.isNotRootTag = isNotRootTag;\nconst cssRuleMatchesPrefixSelector = (cssRule, prefixSelector) => {\n    const escapedPrefixSelector = prefixSelector.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\");\n    // eslint-disable-next-line security-node/non-literal-reg-expr\n    const isPrefixSelector = new RegExp(`^${escapedPrefixSelector}$`);\n    return isPrefixSelector.test(cssRule.selector);\n};\nexports.cssRuleMatchesPrefixSelector = cssRuleMatchesPrefixSelector;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.shouldIncludeFilePath = void 0;\nconst shouldIncludeFilePath = (filePath, whitelist, blacklist) => {\n    // If whitelist exists, check if rule is contained within it.\n    if (whitelist.length > 0) {\n        return (filePath != undefined &&\n            whitelist.some((currentValue) => filePath.match(currentValue)));\n    }\n    // If blacklist exists, check if rule is not contained within it.\n    if (blacklist.length > 0) {\n        return !(filePath != undefined &&\n            blacklist.some((currentValue) => filePath.match(currentValue)));\n    }\n    // In all other cases, presume rule should be prefixed.\n    return true;\n};\nexports.shouldIncludeFilePath = shouldIncludeFilePath;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.asPostCSSv7PluginGenerator = void 0;\nconst PostCSSPrefixWrap_1 = __importStar(require(\"./PostCSSPrefixWrap\"));\nconst asPostCSSv7PluginGenerator = (postcss) => {\n    return postcss.plugin(PostCSSPrefixWrap_1.PLUGIN_NAME, (prefixSelector, options) => {\n        return new PostCSSPrefixWrap_1.default(prefixSelector, options).prefix();\n    });\n};\nexports.asPostCSSv7PluginGenerator = asPostCSSv7PluginGenerator;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.asPostCSSv8PluginGenerator = exports.isPostCSSv8 = void 0;\nconst PostCSSPrefixWrap_1 = __importStar(require(\"./PostCSSPrefixWrap\"));\nconst isPostCSSv8 = (postcss) => postcss.Root !== undefined;\nexports.isPostCSSv8 = isPostCSSv8;\nconst asPostCSSv8PluginGenerator = () => {\n    return (prefixSelector, options) => {\n        const plugin = new PostCSSPrefixWrap_1.default(prefixSelector, options);\n        return {\n            postcssPlugin: PostCSSPrefixWrap_1.PLUGIN_NAME,\n            Once(root) {\n                plugin.prefixRoot(root);\n            },\n        };\n    };\n};\nexports.asPostCSSv8PluginGenerator = asPostCSSv8PluginGenerator;\n","\"use strict\";\nconst PostCSS8Plugin_1 = require(\"./PostCSS8Plugin\");\nconst PostCSS7Plugin_1 = require(\"./PostCSS7Plugin\");\nmodule.exports = (postcss) => {\n    if ((0, PostCSS8Plugin_1.isPostCSSv8)(postcss)) {\n        return (0, PostCSS8Plugin_1.asPostCSSv8PluginGenerator)();\n    }\n    else {\n        return (0, PostCSS7Plugin_1.asPostCSSv7PluginGenerator)(postcss);\n    }\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PLUGIN_NAME = void 0;\nconst CSSRuleWrapper_1 = require(\"../internal/domain/CSSRuleWrapper\");\nconst FileIncludeList_1 = require(\"../internal/domain/FileIncludeList\");\nexports.PLUGIN_NAME = \"postcss-prefixwrap\";\nclass PostCSSPrefixWrap {\n    constructor(prefixSelector, options = {}) {\n        this.blacklist = options.blacklist ?? [];\n        this.ignoredSelectors = options.ignoredSelectors ?? [];\n        this.isPrefixSelector = new RegExp(\n        // eslint-disable-next-line security-node/non-literal-reg-expr\n        `^${prefixSelector.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\")}$`);\n        this.prefixRootTags = options.prefixRootTags ?? false;\n        this.prefixSelector = prefixSelector;\n        this.whitelist = options.whitelist ?? [];\n        this.nested = options.nested ?? null;\n    }\n    prefixRoot(css) {\n        if ((0, FileIncludeList_1.shouldIncludeFilePath)(css.source?.input?.file, this.whitelist, this.blacklist)) {\n            css.walkRules((cssRule) => {\n                (0, CSSRuleWrapper_1.prefixWrapCSSRule)(cssRule, this.nested, this.ignoredSelectors, this.prefixSelector, this.prefixRootTags);\n            });\n        }\n    }\n    prefix() {\n        return (css) => {\n            this.prefixRoot(css);\n        };\n    }\n}\nexports.default = PostCSSPrefixWrap;\n","const CSSValueParser = require('postcss-value-parser')\n\n/**\n * @type {import('postcss').PluginCreator}\n */\nmodule.exports = (opts) => {\n\n  const DEFAULTS = {\n    skipHostRelativeUrls: true,\n  }\n  const config = Object.assign(DEFAULTS, opts)\n\n  return {\n    postcssPlugin: 'rebaseUrl',\n\n    Declaration(decl) {\n      // The faster way to find Declaration node\n      const parsedValue = CSSValueParser(decl.value)\n\n      let valueChanged = false\n      parsedValue.walk(node => {\n        if (node.type !== 'function' || node.value !== 'url') {\n          return\n        }\n\n        const urlVal = node.nodes[0].value\n\n        // bases relative URLs with rootUrl\n        const basedUrl = new URL(urlVal, opts.rootUrl)\n\n        // skip host-relative, already normalized URLs (e.g. `/images/image.jpg`, without `..`s)\n        if ((basedUrl.pathname === urlVal) && config.skipHostRelativeUrls) {\n          return false // skip this value\n        }\n\n        node.nodes[0].value = basedUrl.toString()\n        valueChanged = true\n\n        return false // do not walk deeper\n      })\n\n      if (valueChanged) {\n        decl.value = CSSValueParser.stringify(parsedValue)\n      }\n\n    }\n  }\n}\n\nmodule.exports.postcss = true\n","var parse = require(\"./parse\");\nvar walk = require(\"./walk\");\nvar stringify = require(\"./stringify\");\n\nfunction ValueParser(value) {\n  if (this instanceof ValueParser) {\n    this.nodes = parse(value);\n    return this;\n  }\n  return new ValueParser(value);\n}\n\nValueParser.prototype.toString = function() {\n  return Array.isArray(this.nodes) ? stringify(this.nodes) : \"\";\n};\n\nValueParser.prototype.walk = function(cb, bubble) {\n  walk(this.nodes, cb, bubble);\n  return this;\n};\n\nValueParser.unit = require(\"./unit\");\n\nValueParser.walk = walk;\n\nValueParser.stringify = stringify;\n\nmodule.exports = ValueParser;\n","var openParentheses = \"(\".charCodeAt(0);\nvar closeParentheses = \")\".charCodeAt(0);\nvar singleQuote = \"'\".charCodeAt(0);\nvar doubleQuote = '\"'.charCodeAt(0);\nvar backslash = \"\\\\\".charCodeAt(0);\nvar slash = \"/\".charCodeAt(0);\nvar comma = \",\".charCodeAt(0);\nvar colon = \":\".charCodeAt(0);\nvar star = \"*\".charCodeAt(0);\nvar uLower = \"u\".charCodeAt(0);\nvar uUpper = \"U\".charCodeAt(0);\nvar plus = \"+\".charCodeAt(0);\nvar isUnicodeRange = /^[a-f0-9?-]+$/i;\n\nmodule.exports = function(input) {\n  var tokens = [];\n  var value = input;\n\n  var next,\n    quote,\n    prev,\n    token,\n    escape,\n    escapePos,\n    whitespacePos,\n    parenthesesOpenPos;\n  var pos = 0;\n  var code = value.charCodeAt(pos);\n  var max = value.length;\n  var stack = [{ nodes: tokens }];\n  var balanced = 0;\n  var parent;\n\n  var name = \"\";\n  var before = \"\";\n  var after = \"\";\n\n  while (pos < max) {\n    // Whitespaces\n    if (code <= 32) {\n      next = pos;\n      do {\n        next += 1;\n        code = value.charCodeAt(next);\n      } while (code <= 32);\n      token = value.slice(pos, next);\n\n      prev = tokens[tokens.length - 1];\n      if (code === closeParentheses && balanced) {\n        after = token;\n      } else if (prev && prev.type === \"div\") {\n        prev.after = token;\n        prev.sourceEndIndex += token.length;\n      } else if (\n        code === comma ||\n        code === colon ||\n        (code === slash &&\n          value.charCodeAt(next + 1) !== star &&\n          (!parent ||\n            (parent && parent.type === \"function\" && parent.value !== \"calc\")))\n      ) {\n        before = token;\n      } else {\n        tokens.push({\n          type: \"space\",\n          sourceIndex: pos,\n          sourceEndIndex: next,\n          value: token\n        });\n      }\n\n      pos = next;\n\n      // Quotes\n    } else if (code === singleQuote || code === doubleQuote) {\n      next = pos;\n      quote = code === singleQuote ? \"'\" : '\"';\n      token = {\n        type: \"string\",\n        sourceIndex: pos,\n        quote: quote\n      };\n      do {\n        escape = false;\n        next = value.indexOf(quote, next + 1);\n        if (~next) {\n          escapePos = next;\n          while (value.charCodeAt(escapePos - 1) === backslash) {\n            escapePos -= 1;\n            escape = !escape;\n          }\n        } else {\n          value += quote;\n          next = value.length - 1;\n          token.unclosed = true;\n        }\n      } while (escape);\n      token.value = value.slice(pos + 1, next);\n      token.sourceEndIndex = token.unclosed ? next : next + 1;\n      tokens.push(token);\n      pos = next + 1;\n      code = value.charCodeAt(pos);\n\n      // Comments\n    } else if (code === slash && value.charCodeAt(pos + 1) === star) {\n      next = value.indexOf(\"*/\", pos);\n\n      token = {\n        type: \"comment\",\n        sourceIndex: pos,\n        sourceEndIndex: next + 2\n      };\n\n      if (next === -1) {\n        token.unclosed = true;\n        next = value.length;\n        token.sourceEndIndex = next;\n      }\n\n      token.value = value.slice(pos + 2, next);\n      tokens.push(token);\n\n      pos = next + 2;\n      code = value.charCodeAt(pos);\n\n      // Operation within calc\n    } else if (\n      (code === slash || code === star) &&\n      parent &&\n      parent.type === \"function\" &&\n      parent.value === \"calc\"\n    ) {\n      token = value[pos];\n      tokens.push({\n        type: \"word\",\n        sourceIndex: pos - before.length,\n        sourceEndIndex: pos + token.length,\n        value: token\n      });\n      pos += 1;\n      code = value.charCodeAt(pos);\n\n      // Dividers\n    } else if (code === slash || code === comma || code === colon) {\n      token = value[pos];\n\n      tokens.push({\n        type: \"div\",\n        sourceIndex: pos - before.length,\n        sourceEndIndex: pos + token.length,\n        value: token,\n        before: before,\n        after: \"\"\n      });\n      before = \"\";\n\n      pos += 1;\n      code = value.charCodeAt(pos);\n\n      // Open parentheses\n    } else if (openParentheses === code) {\n      // Whitespaces after open parentheses\n      next = pos;\n      do {\n        next += 1;\n        code = value.charCodeAt(next);\n      } while (code <= 32);\n      parenthesesOpenPos = pos;\n      token = {\n        type: \"function\",\n        sourceIndex: pos - name.length,\n        value: name,\n        before: value.slice(parenthesesOpenPos + 1, next)\n      };\n      pos = next;\n\n      if (name === \"url\" && code !== singleQuote && code !== doubleQuote) {\n        next -= 1;\n        do {\n          escape = false;\n          next = value.indexOf(\")\", next + 1);\n          if (~next) {\n            escapePos = next;\n            while (value.charCodeAt(escapePos - 1) === backslash) {\n              escapePos -= 1;\n              escape = !escape;\n            }\n          } else {\n            value += \")\";\n            next = value.length - 1;\n            token.unclosed = true;\n          }\n        } while (escape);\n        // Whitespaces before closed\n        whitespacePos = next;\n        do {\n          whitespacePos -= 1;\n          code = value.charCodeAt(whitespacePos);\n        } while (code <= 32);\n        if (parenthesesOpenPos < whitespacePos) {\n          if (pos !== whitespacePos + 1) {\n            token.nodes = [\n              {\n                type: \"word\",\n                sourceIndex: pos,\n                sourceEndIndex: whitespacePos + 1,\n                value: value.slice(pos, whitespacePos + 1)\n              }\n            ];\n          } else {\n            token.nodes = [];\n          }\n          if (token.unclosed && whitespacePos + 1 !== next) {\n            token.after = \"\";\n            token.nodes.push({\n              type: \"space\",\n              sourceIndex: whitespacePos + 1,\n              sourceEndIndex: next,\n              value: value.slice(whitespacePos + 1, next)\n            });\n          } else {\n            token.after = value.slice(whitespacePos + 1, next);\n            token.sourceEndIndex = next;\n          }\n        } else {\n          token.after = \"\";\n          token.nodes = [];\n        }\n        pos = next + 1;\n        token.sourceEndIndex = token.unclosed ? next : pos;\n        code = value.charCodeAt(pos);\n        tokens.push(token);\n      } else {\n        balanced += 1;\n        token.after = \"\";\n        token.sourceEndIndex = pos + 1;\n        tokens.push(token);\n        stack.push(token);\n        tokens = token.nodes = [];\n        parent = token;\n      }\n      name = \"\";\n\n      // Close parentheses\n    } else if (closeParentheses === code && balanced) {\n      pos += 1;\n      code = value.charCodeAt(pos);\n\n      parent.after = after;\n      parent.sourceEndIndex += after.length;\n      after = \"\";\n      balanced -= 1;\n      stack[stack.length - 1].sourceEndIndex = pos;\n      stack.pop();\n      parent = stack[balanced];\n      tokens = parent.nodes;\n\n      // Words\n    } else {\n      next = pos;\n      do {\n        if (code === backslash) {\n          next += 1;\n        }\n        next += 1;\n        code = value.charCodeAt(next);\n      } while (\n        next < max &&\n        !(\n          code <= 32 ||\n          code === singleQuote ||\n          code === doubleQuote ||\n          code === comma ||\n          code === colon ||\n          code === slash ||\n          code === openParentheses ||\n          (code === star &&\n            parent &&\n            parent.type === \"function\" &&\n            parent.value === \"calc\") ||\n          (code === slash &&\n            parent.type === \"function\" &&\n            parent.value === \"calc\") ||\n          (code === closeParentheses && balanced)\n        )\n      );\n      token = value.slice(pos, next);\n\n      if (openParentheses === code) {\n        name = token;\n      } else if (\n        (uLower === token.charCodeAt(0) || uUpper === token.charCodeAt(0)) &&\n        plus === token.charCodeAt(1) &&\n        isUnicodeRange.test(token.slice(2))\n      ) {\n        tokens.push({\n          type: \"unicode-range\",\n          sourceIndex: pos,\n          sourceEndIndex: next,\n          value: token\n        });\n      } else {\n        tokens.push({\n          type: \"word\",\n          sourceIndex: pos,\n          sourceEndIndex: next,\n          value: token\n        });\n      }\n\n      pos = next;\n    }\n  }\n\n  for (pos = stack.length - 1; pos; pos -= 1) {\n    stack[pos].unclosed = true;\n    stack[pos].sourceEndIndex = value.length;\n  }\n\n  return stack[0].nodes;\n};\n","function stringifyNode(node, custom) {\n  var type = node.type;\n  var value = node.value;\n  var buf;\n  var customResult;\n\n  if (custom && (customResult = custom(node)) !== undefined) {\n    return customResult;\n  } else if (type === \"word\" || type === \"space\") {\n    return value;\n  } else if (type === \"string\") {\n    buf = node.quote || \"\";\n    return buf + value + (node.unclosed ? \"\" : buf);\n  } else if (type === \"comment\") {\n    return \"/*\" + value + (node.unclosed ? \"\" : \"*/\");\n  } else if (type === \"div\") {\n    return (node.before || \"\") + value + (node.after || \"\");\n  } else if (Array.isArray(node.nodes)) {\n    buf = stringify(node.nodes, custom);\n    if (type !== \"function\") {\n      return buf;\n    }\n    return (\n      value +\n      \"(\" +\n      (node.before || \"\") +\n      buf +\n      (node.after || \"\") +\n      (node.unclosed ? \"\" : \")\")\n    );\n  }\n  return value;\n}\n\nfunction stringify(nodes, custom) {\n  var result, i;\n\n  if (Array.isArray(nodes)) {\n    result = \"\";\n    for (i = nodes.length - 1; ~i; i -= 1) {\n      result = stringifyNode(nodes[i], custom) + result;\n    }\n    return result;\n  }\n  return stringifyNode(nodes, custom);\n}\n\nmodule.exports = stringify;\n","var minus = \"-\".charCodeAt(0);\nvar plus = \"+\".charCodeAt(0);\nvar dot = \".\".charCodeAt(0);\nvar exp = \"e\".charCodeAt(0);\nvar EXP = \"E\".charCodeAt(0);\n\n// Check if three code points would start a number\n// https://www.w3.org/TR/css-syntax-3/#starts-with-a-number\nfunction likeNumber(value) {\n  var code = value.charCodeAt(0);\n  var nextCode;\n\n  if (code === plus || code === minus) {\n    nextCode = value.charCodeAt(1);\n\n    if (nextCode >= 48 && nextCode <= 57) {\n      return true;\n    }\n\n    var nextNextCode = value.charCodeAt(2);\n\n    if (nextCode === dot && nextNextCode >= 48 && nextNextCode <= 57) {\n      return true;\n    }\n\n    return false;\n  }\n\n  if (code === dot) {\n    nextCode = value.charCodeAt(1);\n\n    if (nextCode >= 48 && nextCode <= 57) {\n      return true;\n    }\n\n    return false;\n  }\n\n  if (code >= 48 && code <= 57) {\n    return true;\n  }\n\n  return false;\n}\n\n// Consume a number\n// https://www.w3.org/TR/css-syntax-3/#consume-number\nmodule.exports = function(value) {\n  var pos = 0;\n  var length = value.length;\n  var code;\n  var nextCode;\n  var nextNextCode;\n\n  if (length === 0 || !likeNumber(value)) {\n    return false;\n  }\n\n  code = value.charCodeAt(pos);\n\n  if (code === plus || code === minus) {\n    pos++;\n  }\n\n  while (pos < length) {\n    code = value.charCodeAt(pos);\n\n    if (code < 48 || code > 57) {\n      break;\n    }\n\n    pos += 1;\n  }\n\n  code = value.charCodeAt(pos);\n  nextCode = value.charCodeAt(pos + 1);\n\n  if (code === dot && nextCode >= 48 && nextCode <= 57) {\n    pos += 2;\n\n    while (pos < length) {\n      code = value.charCodeAt(pos);\n\n      if (code < 48 || code > 57) {\n        break;\n      }\n\n      pos += 1;\n    }\n  }\n\n  code = value.charCodeAt(pos);\n  nextCode = value.charCodeAt(pos + 1);\n  nextNextCode = value.charCodeAt(pos + 2);\n\n  if (\n    (code === exp || code === EXP) &&\n    ((nextCode >= 48 && nextCode <= 57) ||\n      ((nextCode === plus || nextCode === minus) &&\n        nextNextCode >= 48 &&\n        nextNextCode <= 57))\n  ) {\n    pos += nextCode === plus || nextCode === minus ? 3 : 2;\n\n    while (pos < length) {\n      code = value.charCodeAt(pos);\n\n      if (code < 48 || code > 57) {\n        break;\n      }\n\n      pos += 1;\n    }\n  }\n\n  return {\n    number: value.slice(0, pos),\n    unit: value.slice(pos)\n  };\n};\n","module.exports = function walk(nodes, cb, bubble) {\n  var i, max, node, result;\n\n  for (i = 0, max = nodes.length; i < max; i += 1) {\n    node = nodes[i];\n    if (!bubble) {\n      result = cb(node, i, nodes);\n    }\n\n    if (\n      result !== false &&\n      node.type === \"function\" &&\n      Array.isArray(node.nodes)\n    ) {\n      walk(node.nodes, cb, bubble);\n    }\n\n    if (bubble) {\n      cb(node, i, nodes);\n    }\n  }\n};\n","'use strict'\n\nlet Container = require('./container')\n\nclass AtRule extends Container {\n  constructor(defaults) {\n    super(defaults)\n    this.type = 'atrule'\n  }\n\n  append(...children) {\n    if (!this.proxyOf.nodes) this.nodes = []\n    return super.append(...children)\n  }\n\n  prepend(...children) {\n    if (!this.proxyOf.nodes) this.nodes = []\n    return super.prepend(...children)\n  }\n}\n\nmodule.exports = AtRule\nAtRule.default = AtRule\n\nContainer.registerAtRule(AtRule)\n","'use strict'\n\nlet Node = require('./node')\n\nclass Comment extends Node {\n  constructor(defaults) {\n    super(defaults)\n    this.type = 'comment'\n  }\n}\n\nmodule.exports = Comment\nComment.default = Comment\n","'use strict'\n\nlet { isClean, my } = require('./symbols')\nlet Declaration = require('./declaration')\nlet Comment = require('./comment')\nlet Node = require('./node')\n\nlet parse, Rule, AtRule, Root\n\nfunction cleanSource(nodes) {\n  return nodes.map(i => {\n    if (i.nodes) i.nodes = cleanSource(i.nodes)\n    delete i.source\n    return i\n  })\n}\n\nfunction markDirtyUp(node) {\n  node[isClean] = false\n  if (node.proxyOf.nodes) {\n    for (let i of node.proxyOf.nodes) {\n      markDirtyUp(i)\n    }\n  }\n}\n\nclass Container extends Node {\n  push(child) {\n    child.parent = this\n    this.proxyOf.nodes.push(child)\n    return this\n  }\n\n  each(callback) {\n    if (!this.proxyOf.nodes) return undefined\n    let iterator = this.getIterator()\n\n    let index, result\n    while (this.indexes[iterator] < this.proxyOf.nodes.length) {\n      index = this.indexes[iterator]\n      result = callback(this.proxyOf.nodes[index], index)\n      if (result === false) break\n\n      this.indexes[iterator] += 1\n    }\n\n    delete this.indexes[iterator]\n    return result\n  }\n\n  walk(callback) {\n    return this.each((child, i) => {\n      let result\n      try {\n        result = callback(child, i)\n      } catch (e) {\n        throw child.addToError(e)\n      }\n      if (result !== false && child.walk) {\n        result = child.walk(callback)\n      }\n\n      return result\n    })\n  }\n\n  walkDecls(prop, callback) {\n    if (!callback) {\n      callback = prop\n      return this.walk((child, i) => {\n        if (child.type === 'decl') {\n          return callback(child, i)\n        }\n      })\n    }\n    if (prop instanceof RegExp) {\n      return this.walk((child, i) => {\n        if (child.type === 'decl' && prop.test(child.prop)) {\n          return callback(child, i)\n        }\n      })\n    }\n    return this.walk((child, i) => {\n      if (child.type === 'decl' && child.prop === prop) {\n        return callback(child, i)\n      }\n    })\n  }\n\n  walkRules(selector, callback) {\n    if (!callback) {\n      callback = selector\n\n      return this.walk((child, i) => {\n        if (child.type === 'rule') {\n          return callback(child, i)\n        }\n      })\n    }\n    if (selector instanceof RegExp) {\n      return this.walk((child, i) => {\n        if (child.type === 'rule' && selector.test(child.selector)) {\n          return callback(child, i)\n        }\n      })\n    }\n    return this.walk((child, i) => {\n      if (child.type === 'rule' && child.selector === selector) {\n        return callback(child, i)\n      }\n    })\n  }\n\n  walkAtRules(name, callback) {\n    if (!callback) {\n      callback = name\n      return this.walk((child, i) => {\n        if (child.type === 'atrule') {\n          return callback(child, i)\n        }\n      })\n    }\n    if (name instanceof RegExp) {\n      return this.walk((child, i) => {\n        if (child.type === 'atrule' && name.test(child.name)) {\n          return callback(child, i)\n        }\n      })\n    }\n    return this.walk((child, i) => {\n      if (child.type === 'atrule' && child.name === name) {\n        return callback(child, i)\n      }\n    })\n  }\n\n  walkComments(callback) {\n    return this.walk((child, i) => {\n      if (child.type === 'comment') {\n        return callback(child, i)\n      }\n    })\n  }\n\n  append(...children) {\n    for (let child of children) {\n      let nodes = this.normalize(child, this.last)\n      for (let node of nodes) this.proxyOf.nodes.push(node)\n    }\n\n    this.markDirty()\n\n    return this\n  }\n\n  prepend(...children) {\n    children = children.reverse()\n    for (let child of children) {\n      let nodes = this.normalize(child, this.first, 'prepend').reverse()\n      for (let node of nodes) this.proxyOf.nodes.unshift(node)\n      for (let id in this.indexes) {\n        this.indexes[id] = this.indexes[id] + nodes.length\n      }\n    }\n\n    this.markDirty()\n\n    return this\n  }\n\n  cleanRaws(keepBetween) {\n    super.cleanRaws(keepBetween)\n    if (this.nodes) {\n      for (let node of this.nodes) node.cleanRaws(keepBetween)\n    }\n  }\n\n  insertBefore(exist, add) {\n    exist = this.index(exist)\n\n    let type = exist === 0 ? 'prepend' : false\n    let nodes = this.normalize(add, this.proxyOf.nodes[exist], type).reverse()\n    for (let node of nodes) this.proxyOf.nodes.splice(exist, 0, node)\n\n    let index\n    for (let id in this.indexes) {\n      index = this.indexes[id]\n      if (exist <= index) {\n        this.indexes[id] = index + nodes.length\n      }\n    }\n\n    this.markDirty()\n\n    return this\n  }\n\n  insertAfter(exist, add) {\n    exist = this.index(exist)\n\n    let nodes = this.normalize(add, this.proxyOf.nodes[exist]).reverse()\n    for (let node of nodes) this.proxyOf.nodes.splice(exist + 1, 0, node)\n\n    let index\n    for (let id in this.indexes) {\n      index = this.indexes[id]\n      if (exist < index) {\n        this.indexes[id] = index + nodes.length\n      }\n    }\n\n    this.markDirty()\n\n    return this\n  }\n\n  removeChild(child) {\n    child = this.index(child)\n    this.proxyOf.nodes[child].parent = undefined\n    this.proxyOf.nodes.splice(child, 1)\n\n    let index\n    for (let id in this.indexes) {\n      index = this.indexes[id]\n      if (index >= child) {\n        this.indexes[id] = index - 1\n      }\n    }\n\n    this.markDirty()\n\n    return this\n  }\n\n  removeAll() {\n    for (let node of this.proxyOf.nodes) node.parent = undefined\n    this.proxyOf.nodes = []\n\n    this.markDirty()\n\n    return this\n  }\n\n  replaceValues(pattern, opts, callback) {\n    if (!callback) {\n      callback = opts\n      opts = {}\n    }\n\n    this.walkDecls(decl => {\n      if (opts.props && !opts.props.includes(decl.prop)) return\n      if (opts.fast && !decl.value.includes(opts.fast)) return\n\n      decl.value = decl.value.replace(pattern, callback)\n    })\n\n    this.markDirty()\n\n    return this\n  }\n\n  every(condition) {\n    return this.nodes.every(condition)\n  }\n\n  some(condition) {\n    return this.nodes.some(condition)\n  }\n\n  index(child) {\n    if (typeof child === 'number') return child\n    if (child.proxyOf) child = child.proxyOf\n    return this.proxyOf.nodes.indexOf(child)\n  }\n\n  get first() {\n    if (!this.proxyOf.nodes) return undefined\n    return this.proxyOf.nodes[0]\n  }\n\n  get last() {\n    if (!this.proxyOf.nodes) return undefined\n    return this.proxyOf.nodes[this.proxyOf.nodes.length - 1]\n  }\n\n  normalize(nodes, sample) {\n    if (typeof nodes === 'string') {\n      nodes = cleanSource(parse(nodes).nodes)\n    } else if (Array.isArray(nodes)) {\n      nodes = nodes.slice(0)\n      for (let i of nodes) {\n        if (i.parent) i.parent.removeChild(i, 'ignore')\n      }\n    } else if (nodes.type === 'root' && this.type !== 'document') {\n      nodes = nodes.nodes.slice(0)\n      for (let i of nodes) {\n        if (i.parent) i.parent.removeChild(i, 'ignore')\n      }\n    } else if (nodes.type) {\n      nodes = [nodes]\n    } else if (nodes.prop) {\n      if (typeof nodes.value === 'undefined') {\n        throw new Error('Value field is missed in node creation')\n      } else if (typeof nodes.value !== 'string') {\n        nodes.value = String(nodes.value)\n      }\n      nodes = [new Declaration(nodes)]\n    } else if (nodes.selector) {\n      nodes = [new Rule(nodes)]\n    } else if (nodes.name) {\n      nodes = [new AtRule(nodes)]\n    } else if (nodes.text) {\n      nodes = [new Comment(nodes)]\n    } else {\n      throw new Error('Unknown node type in node creation')\n    }\n\n    let processed = nodes.map(i => {\n      /* c8 ignore next */\n      if (!i[my]) Container.rebuild(i)\n      i = i.proxyOf\n      if (i.parent) i.parent.removeChild(i)\n      if (i[isClean]) markDirtyUp(i)\n      if (typeof i.raws.before === 'undefined') {\n        if (sample && typeof sample.raws.before !== 'undefined') {\n          i.raws.before = sample.raws.before.replace(/\\S/g, '')\n        }\n      }\n      i.parent = this.proxyOf\n      return i\n    })\n\n    return processed\n  }\n\n  getProxyProcessor() {\n    return {\n      set(node, prop, value) {\n        if (node[prop] === value) return true\n        node[prop] = value\n        if (prop === 'name' || prop === 'params' || prop === 'selector') {\n          node.markDirty()\n        }\n        return true\n      },\n\n      get(node, prop) {\n        if (prop === 'proxyOf') {\n          return node\n        } else if (!node[prop]) {\n          return node[prop]\n        } else if (\n          prop === 'each' ||\n          (typeof prop === 'string' && prop.startsWith('walk'))\n        ) {\n          return (...args) => {\n            return node[prop](\n              ...args.map(i => {\n                if (typeof i === 'function') {\n                  return (child, index) => i(child.toProxy(), index)\n                } else {\n                  return i\n                }\n              })\n            )\n          }\n        } else if (prop === 'every' || prop === 'some') {\n          return cb => {\n            return node[prop]((child, ...other) =>\n              cb(child.toProxy(), ...other)\n            )\n          }\n        } else if (prop === 'root') {\n          return () => node.root().toProxy()\n        } else if (prop === 'nodes') {\n          return node.nodes.map(i => i.toProxy())\n        } else if (prop === 'first' || prop === 'last') {\n          return node[prop].toProxy()\n        } else {\n          return node[prop]\n        }\n      }\n    }\n  }\n\n  getIterator() {\n    if (!this.lastEach) this.lastEach = 0\n    if (!this.indexes) this.indexes = {}\n\n    this.lastEach += 1\n    let iterator = this.lastEach\n    this.indexes[iterator] = 0\n\n    return iterator\n  }\n}\n\nContainer.registerParse = dependant => {\n  parse = dependant\n}\n\nContainer.registerRule = dependant => {\n  Rule = dependant\n}\n\nContainer.registerAtRule = dependant => {\n  AtRule = dependant\n}\n\nContainer.registerRoot = dependant => {\n  Root = dependant\n}\n\nmodule.exports = Container\nContainer.default = Container\n\n/* c8 ignore start */\nContainer.rebuild = node => {\n  if (node.type === 'atrule') {\n    Object.setPrototypeOf(node, AtRule.prototype)\n  } else if (node.type === 'rule') {\n    Object.setPrototypeOf(node, Rule.prototype)\n  } else if (node.type === 'decl') {\n    Object.setPrototypeOf(node, Declaration.prototype)\n  } else if (node.type === 'comment') {\n    Object.setPrototypeOf(node, Comment.prototype)\n  } else if (node.type === 'root') {\n    Object.setPrototypeOf(node, Root.prototype)\n  }\n\n  node[my] = true\n\n  if (node.nodes) {\n    node.nodes.forEach(child => {\n      Container.rebuild(child)\n    })\n  }\n}\n/* c8 ignore stop */\n","'use strict'\n\nlet pico = require('picocolors')\n\nlet terminalHighlight = require('./terminal-highlight')\n\nclass CssSyntaxError extends Error {\n  constructor(message, line, column, source, file, plugin) {\n    super(message)\n    this.name = 'CssSyntaxError'\n    this.reason = message\n\n    if (file) {\n      this.file = file\n    }\n    if (source) {\n      this.source = source\n    }\n    if (plugin) {\n      this.plugin = plugin\n    }\n    if (typeof line !== 'undefined' && typeof column !== 'undefined') {\n      if (typeof line === 'number') {\n        this.line = line\n        this.column = column\n      } else {\n        this.line = line.line\n        this.column = line.column\n        this.endLine = column.line\n        this.endColumn = column.column\n      }\n    }\n\n    this.setMessage()\n\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, CssSyntaxError)\n    }\n  }\n\n  setMessage() {\n    this.message = this.plugin ? this.plugin + ': ' : ''\n    this.message += this.file ? this.file : '<css input>'\n    if (typeof this.line !== 'undefined') {\n      this.message += ':' + this.line + ':' + this.column\n    }\n    this.message += ': ' + this.reason\n  }\n\n  showSourceCode(color) {\n    if (!this.source) return ''\n\n    let css = this.source\n    if (color == null) color = pico.isColorSupported\n    if (terminalHighlight) {\n      if (color) css = terminalHighlight(css)\n    }\n\n    let lines = css.split(/\\r?\\n/)\n    let start = Math.max(this.line - 3, 0)\n    let end = Math.min(this.line + 2, lines.length)\n\n    let maxWidth = String(end).length\n\n    let mark, aside\n    if (color) {\n      let { bold, red, gray } = pico.createColors(true)\n      mark = text => bold(red(text))\n      aside = text => gray(text)\n    } else {\n      mark = aside = str => str\n    }\n\n    return lines\n      .slice(start, end)\n      .map((line, index) => {\n        let number = start + 1 + index\n        let gutter = ' ' + (' ' + number).slice(-maxWidth) + ' | '\n        if (number === this.line) {\n          let spacing =\n            aside(gutter.replace(/\\d/g, ' ')) +\n            line.slice(0, this.column - 1).replace(/[^\\t]/g, ' ')\n          return mark('>') + aside(gutter) + line + '\\n ' + spacing + mark('^')\n        }\n        return ' ' + aside(gutter) + line\n      })\n      .join('\\n')\n  }\n\n  toString() {\n    let code = this.showSourceCode()\n    if (code) {\n      code = '\\n\\n' + code + '\\n'\n    }\n    return this.name + ': ' + this.message + code\n  }\n}\n\nmodule.exports = CssSyntaxError\nCssSyntaxError.default = CssSyntaxError\n","'use strict'\n\nlet Node = require('./node')\n\nclass Declaration extends Node {\n  constructor(defaults) {\n    if (\n      defaults &&\n      typeof defaults.value !== 'undefined' &&\n      typeof defaults.value !== 'string'\n    ) {\n      defaults = { ...defaults, value: String(defaults.value) }\n    }\n    super(defaults)\n    this.type = 'decl'\n  }\n\n  get variable() {\n    return this.prop.startsWith('--') || this.prop[0] === '$'\n  }\n}\n\nmodule.exports = Declaration\nDeclaration.default = Declaration\n","'use strict'\n\nlet Container = require('./container')\n\nlet LazyResult, Processor\n\nclass Document extends Container {\n  constructor(defaults) {\n    // type needs to be passed to super, otherwise child roots won't be normalized correctly\n    super({ type: 'document', ...defaults })\n\n    if (!this.nodes) {\n      this.nodes = []\n    }\n  }\n\n  toResult(opts = {}) {\n    let lazy = new LazyResult(new Processor(), this, opts)\n\n    return lazy.stringify()\n  }\n}\n\nDocument.registerLazyResult = dependant => {\n  LazyResult = dependant\n}\n\nDocument.registerProcessor = dependant => {\n  Processor = dependant\n}\n\nmodule.exports = Document\nDocument.default = Document\n","'use strict'\n\nlet Declaration = require('./declaration')\nlet PreviousMap = require('./previous-map')\nlet Comment = require('./comment')\nlet AtRule = require('./at-rule')\nlet Input = require('./input')\nlet Root = require('./root')\nlet Rule = require('./rule')\n\nfunction fromJSON(json, inputs) {\n  if (Array.isArray(json)) return json.map(n => fromJSON(n))\n\n  let { inputs: ownInputs, ...defaults } = json\n  if (ownInputs) {\n    inputs = []\n    for (let input of ownInputs) {\n      let inputHydrated = { ...input, __proto__: Input.prototype }\n      if (inputHydrated.map) {\n        inputHydrated.map = {\n          ...inputHydrated.map,\n          __proto__: PreviousMap.prototype\n        }\n      }\n      inputs.push(inputHydrated)\n    }\n  }\n  if (defaults.nodes) {\n    defaults.nodes = json.nodes.map(n => fromJSON(n, inputs))\n  }\n  if (defaults.source) {\n    let { inputId, ...source } = defaults.source\n    defaults.source = source\n    if (inputId != null) {\n      defaults.source.input = inputs[inputId]\n    }\n  }\n  if (defaults.type === 'root') {\n    return new Root(defaults)\n  } else if (defaults.type === 'decl') {\n    return new Declaration(defaults)\n  } else if (defaults.type === 'rule') {\n    return new Rule(defaults)\n  } else if (defaults.type === 'comment') {\n    return new Comment(defaults)\n  } else if (defaults.type === 'atrule') {\n    return new AtRule(defaults)\n  } else {\n    throw new Error('Unknown node type: ' + json.type)\n  }\n}\n\nmodule.exports = fromJSON\nfromJSON.default = fromJSON\n","'use strict'\n\nlet { SourceMapConsumer, SourceMapGenerator } = require('source-map-js')\nlet { fileURLToPath, pathToFileURL } = require('url')\nlet { resolve, isAbsolute } = require('path')\nlet { nanoid } = require('nanoid/non-secure')\n\nlet terminalHighlight = require('./terminal-highlight')\nlet CssSyntaxError = require('./css-syntax-error')\nlet PreviousMap = require('./previous-map')\n\nlet fromOffsetCache = Symbol('fromOffsetCache')\n\nlet sourceMapAvailable = Boolean(SourceMapConsumer && SourceMapGenerator)\nlet pathAvailable = Boolean(resolve && isAbsolute)\n\nclass Input {\n  constructor(css, opts = {}) {\n    if (\n      css === null ||\n      typeof css === 'undefined' ||\n      (typeof css === 'object' && !css.toString)\n    ) {\n      throw new Error(`PostCSS received ${css} instead of CSS string`)\n    }\n\n    this.css = css.toString()\n\n    if (this.css[0] === '\\uFEFF' || this.css[0] === '\\uFFFE') {\n      this.hasBOM = true\n      this.css = this.css.slice(1)\n    } else {\n      this.hasBOM = false\n    }\n\n    if (opts.from) {\n      if (\n        !pathAvailable ||\n        /^\\w+:\\/\\//.test(opts.from) ||\n        isAbsolute(opts.from)\n      ) {\n        this.file = opts.from\n      } else {\n        this.file = resolve(opts.from)\n      }\n    }\n\n    if (pathAvailable && sourceMapAvailable) {\n      let map = new PreviousMap(this.css, opts)\n      if (map.text) {\n        this.map = map\n        let file = map.consumer().file\n        if (!this.file && file) this.file = this.mapResolve(file)\n      }\n    }\n\n    if (!this.file) {\n      this.id = '<input css ' + nanoid(6) + '>'\n    }\n    if (this.map) this.map.file = this.from\n  }\n\n  fromOffset(offset) {\n    let lastLine, lineToIndex\n    if (!this[fromOffsetCache]) {\n      let lines = this.css.split('\\n')\n      lineToIndex = new Array(lines.length)\n      let prevIndex = 0\n\n      for (let i = 0, l = lines.length; i < l; i++) {\n        lineToIndex[i] = prevIndex\n        prevIndex += lines[i].length + 1\n      }\n\n      this[fromOffsetCache] = lineToIndex\n    } else {\n      lineToIndex = this[fromOffsetCache]\n    }\n    lastLine = lineToIndex[lineToIndex.length - 1]\n\n    let min = 0\n    if (offset >= lastLine) {\n      min = lineToIndex.length - 1\n    } else {\n      let max = lineToIndex.length - 2\n      let mid\n      while (min < max) {\n        mid = min + ((max - min) >> 1)\n        if (offset < lineToIndex[mid]) {\n          max = mid - 1\n        } else if (offset >= lineToIndex[mid + 1]) {\n          min = mid + 1\n        } else {\n          min = mid\n          break\n        }\n      }\n    }\n    return {\n      line: min + 1,\n      col: offset - lineToIndex[min] + 1\n    }\n  }\n\n  error(message, line, column, opts = {}) {\n    let result, endLine, endColumn\n\n    if (line && typeof line === 'object') {\n      let start = line\n      let end = column\n      if (typeof line.offset === 'number') {\n        let pos = this.fromOffset(start.offset)\n        line = pos.line\n        column = pos.col\n      } else {\n        line = start.line\n        column = start.column\n      }\n      if (typeof end.offset === 'number') {\n        let pos = this.fromOffset(end.offset)\n        endLine = pos.line\n        endColumn = pos.col\n      } else {\n        endLine = end.line\n        endColumn = end.column\n      }\n    } else if (!column) {\n      let pos = this.fromOffset(line)\n      line = pos.line\n      column = pos.col\n    }\n\n    let origin = this.origin(line, column, endLine, endColumn)\n    if (origin) {\n      result = new CssSyntaxError(\n        message,\n        origin.endLine === undefined\n          ? origin.line\n          : { line: origin.line, column: origin.column },\n        origin.endLine === undefined\n          ? origin.column\n          : { line: origin.endLine, column: origin.endColumn },\n        origin.source,\n        origin.file,\n        opts.plugin\n      )\n    } else {\n      result = new CssSyntaxError(\n        message,\n        endLine === undefined ? line : { line, column },\n        endLine === undefined ? column : { line: endLine, column: endColumn },\n        this.css,\n        this.file,\n        opts.plugin\n      )\n    }\n\n    result.input = { line, column, endLine, endColumn, source: this.css }\n    if (this.file) {\n      if (pathToFileURL) {\n        result.input.url = pathToFileURL(this.file).toString()\n      }\n      result.input.file = this.file\n    }\n\n    return result\n  }\n\n  origin(line, column, endLine, endColumn) {\n    if (!this.map) return false\n    let consumer = this.map.consumer()\n\n    let from = consumer.originalPositionFor({ line, column })\n    if (!from.source) return false\n\n    let to\n    if (typeof endLine === 'number') {\n      to = consumer.originalPositionFor({ line: endLine, column: endColumn })\n    }\n\n    let fromUrl\n\n    if (isAbsolute(from.source)) {\n      fromUrl = pathToFileURL(from.source)\n    } else {\n      fromUrl = new URL(\n        from.source,\n        this.map.consumer().sourceRoot || pathToFileURL(this.map.mapFile)\n      )\n    }\n\n    let result = {\n      url: fromUrl.toString(),\n      line: from.line,\n      column: from.column,\n      endLine: to && to.line,\n      endColumn: to && to.column\n    }\n\n    if (fromUrl.protocol === 'file:') {\n      if (fileURLToPath) {\n        result.file = fileURLToPath(fromUrl)\n      } else {\n        /* c8 ignore next 2 */\n        throw new Error(`file: protocol is not available in this PostCSS build`)\n      }\n    }\n\n    let source = consumer.sourceContentFor(from.source)\n    if (source) result.source = source\n\n    return result\n  }\n\n  mapResolve(file) {\n    if (/^\\w+:\\/\\//.test(file)) {\n      return file\n    }\n    return resolve(this.map.consumer().sourceRoot || this.map.root || '.', file)\n  }\n\n  get from() {\n    return this.file || this.id\n  }\n\n  toJSON() {\n    let json = {}\n    for (let name of ['hasBOM', 'css', 'file', 'id']) {\n      if (this[name] != null) {\n        json[name] = this[name]\n      }\n    }\n    if (this.map) {\n      json.map = { ...this.map }\n      if (json.map.consumerCache) {\n        json.map.consumerCache = undefined\n      }\n    }\n    return json\n  }\n}\n\nmodule.exports = Input\nInput.default = Input\n\nif (terminalHighlight && terminalHighlight.registerInput) {\n  terminalHighlight.registerInput(Input)\n}\n","'use strict'\n\nlet { isClean, my } = require('./symbols')\nlet MapGenerator = require('./map-generator')\nlet stringify = require('./stringify')\nlet Container = require('./container')\nlet Document = require('./document')\nlet warnOnce = require('./warn-once')\nlet Result = require('./result')\nlet parse = require('./parse')\nlet Root = require('./root')\n\nconst TYPE_TO_CLASS_NAME = {\n  document: 'Document',\n  root: 'Root',\n  atrule: 'AtRule',\n  rule: 'Rule',\n  decl: 'Declaration',\n  comment: 'Comment'\n}\n\nconst PLUGIN_PROPS = {\n  postcssPlugin: true,\n  prepare: true,\n  Once: true,\n  Document: true,\n  Root: true,\n  Declaration: true,\n  Rule: true,\n  AtRule: true,\n  Comment: true,\n  DeclarationExit: true,\n  RuleExit: true,\n  AtRuleExit: true,\n  CommentExit: true,\n  RootExit: true,\n  DocumentExit: true,\n  OnceExit: true\n}\n\nconst NOT_VISITORS = {\n  postcssPlugin: true,\n  prepare: true,\n  Once: true\n}\n\nconst CHILDREN = 0\n\nfunction isPromise(obj) {\n  return typeof obj === 'object' && typeof obj.then === 'function'\n}\n\nfunction getEvents(node) {\n  let key = false\n  let type = TYPE_TO_CLASS_NAME[node.type]\n  if (node.type === 'decl') {\n    key = node.prop.toLowerCase()\n  } else if (node.type === 'atrule') {\n    key = node.name.toLowerCase()\n  }\n\n  if (key && node.append) {\n    return [\n      type,\n      type + '-' + key,\n      CHILDREN,\n      type + 'Exit',\n      type + 'Exit-' + key\n    ]\n  } else if (key) {\n    return [type, type + '-' + key, type + 'Exit', type + 'Exit-' + key]\n  } else if (node.append) {\n    return [type, CHILDREN, type + 'Exit']\n  } else {\n    return [type, type + 'Exit']\n  }\n}\n\nfunction toStack(node) {\n  let events\n  if (node.type === 'document') {\n    events = ['Document', CHILDREN, 'DocumentExit']\n  } else if (node.type === 'root') {\n    events = ['Root', CHILDREN, 'RootExit']\n  } else {\n    events = getEvents(node)\n  }\n\n  return {\n    node,\n    events,\n    eventIndex: 0,\n    visitors: [],\n    visitorIndex: 0,\n    iterator: 0\n  }\n}\n\nfunction cleanMarks(node) {\n  node[isClean] = false\n  if (node.nodes) node.nodes.forEach(i => cleanMarks(i))\n  return node\n}\n\nlet postcss = {}\n\nclass LazyResult {\n  constructor(processor, css, opts) {\n    this.stringified = false\n    this.processed = false\n\n    let root\n    if (\n      typeof css === 'object' &&\n      css !== null &&\n      (css.type === 'root' || css.type === 'document')\n    ) {\n      root = cleanMarks(css)\n    } else if (css instanceof LazyResult || css instanceof Result) {\n      root = cleanMarks(css.root)\n      if (css.map) {\n        if (typeof opts.map === 'undefined') opts.map = {}\n        if (!opts.map.inline) opts.map.inline = false\n        opts.map.prev = css.map\n      }\n    } else {\n      let parser = parse\n      if (opts.syntax) parser = opts.syntax.parse\n      if (opts.parser) parser = opts.parser\n      if (parser.parse) parser = parser.parse\n\n      try {\n        root = parser(css, opts)\n      } catch (error) {\n        this.processed = true\n        this.error = error\n      }\n\n      if (root && !root[my]) {\n        /* c8 ignore next 2 */\n        Container.rebuild(root)\n      }\n    }\n\n    this.result = new Result(processor, root, opts)\n    this.helpers = { ...postcss, result: this.result, postcss }\n    this.plugins = this.processor.plugins.map(plugin => {\n      if (typeof plugin === 'object' && plugin.prepare) {\n        return { ...plugin, ...plugin.prepare(this.result) }\n      } else {\n        return plugin\n      }\n    })\n  }\n\n  get [Symbol.toStringTag]() {\n    return 'LazyResult'\n  }\n\n  get processor() {\n    return this.result.processor\n  }\n\n  get opts() {\n    return this.result.opts\n  }\n\n  get css() {\n    return this.stringify().css\n  }\n\n  get content() {\n    return this.stringify().content\n  }\n\n  get map() {\n    return this.stringify().map\n  }\n\n  get root() {\n    return this.sync().root\n  }\n\n  get messages() {\n    return this.sync().messages\n  }\n\n  warnings() {\n    return this.sync().warnings()\n  }\n\n  toString() {\n    return this.css\n  }\n\n  then(onFulfilled, onRejected) {\n    if (process.env.NODE_ENV !== 'production') {\n      if (!('from' in this.opts)) {\n        warnOnce(\n          'Without `from` option PostCSS could generate wrong source map ' +\n            'and will not find Browserslist config. Set it to CSS file path ' +\n            'or to `undefined` to prevent this warning.'\n        )\n      }\n    }\n    return this.async().then(onFulfilled, onRejected)\n  }\n\n  catch(onRejected) {\n    return this.async().catch(onRejected)\n  }\n\n  finally(onFinally) {\n    return this.async().then(onFinally, onFinally)\n  }\n\n  async() {\n    if (this.error) return Promise.reject(this.error)\n    if (this.processed) return Promise.resolve(this.result)\n    if (!this.processing) {\n      this.processing = this.runAsync()\n    }\n    return this.processing\n  }\n\n  sync() {\n    if (this.error) throw this.error\n    if (this.processed) return this.result\n    this.processed = true\n\n    if (this.processing) {\n      throw this.getAsyncError()\n    }\n\n    for (let plugin of this.plugins) {\n      let promise = this.runOnRoot(plugin)\n      if (isPromise(promise)) {\n        throw this.getAsyncError()\n      }\n    }\n\n    this.prepareVisitors()\n    if (this.hasListener) {\n      let root = this.result.root\n      while (!root[isClean]) {\n        root[isClean] = true\n        this.walkSync(root)\n      }\n      if (this.listeners.OnceExit) {\n        if (root.type === 'document') {\n          for (let subRoot of root.nodes) {\n            this.visitSync(this.listeners.OnceExit, subRoot)\n          }\n        } else {\n          this.visitSync(this.listeners.OnceExit, root)\n        }\n      }\n    }\n\n    return this.result\n  }\n\n  stringify() {\n    if (this.error) throw this.error\n    if (this.stringified) return this.result\n    this.stringified = true\n\n    this.sync()\n\n    let opts = this.result.opts\n    let str = stringify\n    if (opts.syntax) str = opts.syntax.stringify\n    if (opts.stringifier) str = opts.stringifier\n    if (str.stringify) str = str.stringify\n\n    let map = new MapGenerator(str, this.result.root, this.result.opts)\n    let data = map.generate()\n    this.result.css = data[0]\n    this.result.map = data[1]\n\n    return this.result\n  }\n\n  walkSync(node) {\n    node[isClean] = true\n    let events = getEvents(node)\n    for (let event of events) {\n      if (event === CHILDREN) {\n        if (node.nodes) {\n          node.each(child => {\n            if (!child[isClean]) this.walkSync(child)\n          })\n        }\n      } else {\n        let visitors = this.listeners[event]\n        if (visitors) {\n          if (this.visitSync(visitors, node.toProxy())) return\n        }\n      }\n    }\n  }\n\n  visitSync(visitors, node) {\n    for (let [plugin, visitor] of visitors) {\n      this.result.lastPlugin = plugin\n      let promise\n      try {\n        promise = visitor(node, this.helpers)\n      } catch (e) {\n        throw this.handleError(e, node.proxyOf)\n      }\n      if (node.type !== 'root' && node.type !== 'document' && !node.parent) {\n        return true\n      }\n      if (isPromise(promise)) {\n        throw this.getAsyncError()\n      }\n    }\n  }\n\n  runOnRoot(plugin) {\n    this.result.lastPlugin = plugin\n    try {\n      if (typeof plugin === 'object' && plugin.Once) {\n        if (this.result.root.type === 'document') {\n          let roots = this.result.root.nodes.map(root =>\n            plugin.Once(root, this.helpers)\n          )\n\n          if (isPromise(roots[0])) {\n            return Promise.all(roots)\n          }\n\n          return roots\n        }\n\n        return plugin.Once(this.result.root, this.helpers)\n      } else if (typeof plugin === 'function') {\n        return plugin(this.result.root, this.result)\n      }\n    } catch (error) {\n      throw this.handleError(error)\n    }\n  }\n\n  getAsyncError() {\n    throw new Error('Use process(css).then(cb) to work with async plugins')\n  }\n\n  handleError(error, node) {\n    let plugin = this.result.lastPlugin\n    try {\n      if (node) node.addToError(error)\n      this.error = error\n      if (error.name === 'CssSyntaxError' && !error.plugin) {\n        error.plugin = plugin.postcssPlugin\n        error.setMessage()\n      } else if (plugin.postcssVersion) {\n        if (process.env.NODE_ENV !== 'production') {\n          let pluginName = plugin.postcssPlugin\n          let pluginVer = plugin.postcssVersion\n          let runtimeVer = this.result.processor.version\n          let a = pluginVer.split('.')\n          let b = runtimeVer.split('.')\n\n          if (a[0] !== b[0] || parseInt(a[1]) > parseInt(b[1])) {\n            // eslint-disable-next-line no-console\n            console.error(\n              'Unknown error from PostCSS plugin. Your current PostCSS ' +\n                'version is ' +\n                runtimeVer +\n                ', but ' +\n                pluginName +\n                ' uses ' +\n                pluginVer +\n                '. Perhaps this is the source of the error below.'\n            )\n          }\n        }\n      }\n    } catch (err) {\n      /* c8 ignore next 3 */\n      // eslint-disable-next-line no-console\n      if (console && console.error) console.error(err)\n    }\n    return error\n  }\n\n  async runAsync() {\n    this.plugin = 0\n    for (let i = 0; i < this.plugins.length; i++) {\n      let plugin = this.plugins[i]\n      let promise = this.runOnRoot(plugin)\n      if (isPromise(promise)) {\n        try {\n          await promise\n        } catch (error) {\n          throw this.handleError(error)\n        }\n      }\n    }\n\n    this.prepareVisitors()\n    if (this.hasListener) {\n      let root = this.result.root\n      while (!root[isClean]) {\n        root[isClean] = true\n        let stack = [toStack(root)]\n        while (stack.length > 0) {\n          let promise = this.visitTick(stack)\n          if (isPromise(promise)) {\n            try {\n              await promise\n            } catch (e) {\n              let node = stack[stack.length - 1].node\n              throw this.handleError(e, node)\n            }\n          }\n        }\n      }\n\n      if (this.listeners.OnceExit) {\n        for (let [plugin, visitor] of this.listeners.OnceExit) {\n          this.result.lastPlugin = plugin\n          try {\n            if (root.type === 'document') {\n              let roots = root.nodes.map(subRoot =>\n                visitor(subRoot, this.helpers)\n              )\n\n              await Promise.all(roots)\n            } else {\n              await visitor(root, this.helpers)\n            }\n          } catch (e) {\n            throw this.handleError(e)\n          }\n        }\n      }\n    }\n\n    this.processed = true\n    return this.stringify()\n  }\n\n  prepareVisitors() {\n    this.listeners = {}\n    let add = (plugin, type, cb) => {\n      if (!this.listeners[type]) this.listeners[type] = []\n      this.listeners[type].push([plugin, cb])\n    }\n    for (let plugin of this.plugins) {\n      if (typeof plugin === 'object') {\n        for (let event in plugin) {\n          if (!PLUGIN_PROPS[event] && /^[A-Z]/.test(event)) {\n            throw new Error(\n              `Unknown event ${event} in ${plugin.postcssPlugin}. ` +\n                `Try to update PostCSS (${this.processor.version} now).`\n            )\n          }\n          if (!NOT_VISITORS[event]) {\n            if (typeof plugin[event] === 'object') {\n              for (let filter in plugin[event]) {\n                if (filter === '*') {\n                  add(plugin, event, plugin[event][filter])\n                } else {\n                  add(\n                    plugin,\n                    event + '-' + filter.toLowerCase(),\n                    plugin[event][filter]\n                  )\n                }\n              }\n            } else if (typeof plugin[event] === 'function') {\n              add(plugin, event, plugin[event])\n            }\n          }\n        }\n      }\n    }\n    this.hasListener = Object.keys(this.listeners).length > 0\n  }\n\n  visitTick(stack) {\n    let visit = stack[stack.length - 1]\n    let { node, visitors } = visit\n\n    if (node.type !== 'root' && node.type !== 'document' && !node.parent) {\n      stack.pop()\n      return\n    }\n\n    if (visitors.length > 0 && visit.visitorIndex < visitors.length) {\n      let [plugin, visitor] = visitors[visit.visitorIndex]\n      visit.visitorIndex += 1\n      if (visit.visitorIndex === visitors.length) {\n        visit.visitors = []\n        visit.visitorIndex = 0\n      }\n      this.result.lastPlugin = plugin\n      try {\n        return visitor(node.toProxy(), this.helpers)\n      } catch (e) {\n        throw this.handleError(e, node)\n      }\n    }\n\n    if (visit.iterator !== 0) {\n      let iterator = visit.iterator\n      let child\n      while ((child = node.nodes[node.indexes[iterator]])) {\n        node.indexes[iterator] += 1\n        if (!child[isClean]) {\n          child[isClean] = true\n          stack.push(toStack(child))\n          return\n        }\n      }\n      visit.iterator = 0\n      delete node.indexes[iterator]\n    }\n\n    let events = visit.events\n    while (visit.eventIndex < events.length) {\n      let event = events[visit.eventIndex]\n      visit.eventIndex += 1\n      if (event === CHILDREN) {\n        if (node.nodes && node.nodes.length) {\n          node[isClean] = true\n          visit.iterator = node.getIterator()\n        }\n        return\n      } else if (this.listeners[event]) {\n        visit.visitors = this.listeners[event]\n        return\n      }\n    }\n    stack.pop()\n  }\n}\n\nLazyResult.registerPostcss = dependant => {\n  postcss = dependant\n}\n\nmodule.exports = LazyResult\nLazyResult.default = LazyResult\n\nRoot.registerLazyResult(LazyResult)\nDocument.registerLazyResult(LazyResult)\n","'use strict'\n\nlet list = {\n  split(string, separators, last) {\n    let array = []\n    let current = ''\n    let split = false\n\n    let func = 0\n    let inQuote = false\n    let prevQuote = ''\n    let escape = false\n\n    for (let letter of string) {\n      if (escape) {\n        escape = false\n      } else if (letter === '\\\\') {\n        escape = true\n      } else if (inQuote) {\n        if (letter === prevQuote) {\n          inQuote = false\n        }\n      } else if (letter === '\"' || letter === \"'\") {\n        inQuote = true\n        prevQuote = letter\n      } else if (letter === '(') {\n        func += 1\n      } else if (letter === ')') {\n        if (func > 0) func -= 1\n      } else if (func === 0) {\n        if (separators.includes(letter)) split = true\n      }\n\n      if (split) {\n        if (current !== '') array.push(current.trim())\n        current = ''\n        split = false\n      } else {\n        current += letter\n      }\n    }\n\n    if (last || current !== '') array.push(current.trim())\n    return array\n  },\n\n  space(string) {\n    let spaces = [' ', '\\n', '\\t']\n    return list.split(string, spaces)\n  },\n\n  comma(string) {\n    return list.split(string, [','], true)\n  }\n}\n\nmodule.exports = list\nlist.default = list\n","'use strict'\n\nlet { SourceMapConsumer, SourceMapGenerator } = require('source-map-js')\nlet { dirname, resolve, relative, sep } = require('path')\nlet { pathToFileURL } = require('url')\n\nlet Input = require('./input')\n\nlet sourceMapAvailable = Boolean(SourceMapConsumer && SourceMapGenerator)\nlet pathAvailable = Boolean(dirname && resolve && relative && sep)\n\nclass MapGenerator {\n  constructor(stringify, root, opts, cssString) {\n    this.stringify = stringify\n    this.mapOpts = opts.map || {}\n    this.root = root\n    this.opts = opts\n    this.css = cssString\n  }\n\n  isMap() {\n    if (typeof this.opts.map !== 'undefined') {\n      return !!this.opts.map\n    }\n    return this.previous().length > 0\n  }\n\n  previous() {\n    if (!this.previousMaps) {\n      this.previousMaps = []\n      if (this.root) {\n        this.root.walk(node => {\n          if (node.source && node.source.input.map) {\n            let map = node.source.input.map\n            if (!this.previousMaps.includes(map)) {\n              this.previousMaps.push(map)\n            }\n          }\n        })\n      } else {\n        let input = new Input(this.css, this.opts)\n        if (input.map) this.previousMaps.push(input.map)\n      }\n    }\n\n    return this.previousMaps\n  }\n\n  isInline() {\n    if (typeof this.mapOpts.inline !== 'undefined') {\n      return this.mapOpts.inline\n    }\n\n    let annotation = this.mapOpts.annotation\n    if (typeof annotation !== 'undefined' && annotation !== true) {\n      return false\n    }\n\n    if (this.previous().length) {\n      return this.previous().some(i => i.inline)\n    }\n    return true\n  }\n\n  isSourcesContent() {\n    if (typeof this.mapOpts.sourcesContent !== 'undefined') {\n      return this.mapOpts.sourcesContent\n    }\n    if (this.previous().length) {\n      return this.previous().some(i => i.withContent())\n    }\n    return true\n  }\n\n  clearAnnotation() {\n    if (this.mapOpts.annotation === false) return\n\n    if (this.root) {\n      let node\n      for (let i = this.root.nodes.length - 1; i >= 0; i--) {\n        node = this.root.nodes[i]\n        if (node.type !== 'comment') continue\n        if (node.text.indexOf('# sourceMappingURL=') === 0) {\n          this.root.removeChild(i)\n        }\n      }\n    } else if (this.css) {\n      this.css = this.css.replace(/(\\n)?\\/\\*#[\\S\\s]*?\\*\\/$/gm, '')\n    }\n  }\n\n  setSourcesContent() {\n    let already = {}\n    if (this.root) {\n      this.root.walk(node => {\n        if (node.source) {\n          let from = node.source.input.from\n          if (from && !already[from]) {\n            already[from] = true\n            this.map.setSourceContent(\n              this.toUrl(this.path(from)),\n              node.source.input.css\n            )\n          }\n        }\n      })\n    } else if (this.css) {\n      let from = this.opts.from\n        ? this.toUrl(this.path(this.opts.from))\n        : '<no source>'\n      this.map.setSourceContent(from, this.css)\n    }\n  }\n\n  applyPrevMaps() {\n    for (let prev of this.previous()) {\n      let from = this.toUrl(this.path(prev.file))\n      let root = prev.root || dirname(prev.file)\n      let map\n\n      if (this.mapOpts.sourcesContent === false) {\n        map = new SourceMapConsumer(prev.text)\n        if (map.sourcesContent) {\n          map.sourcesContent = map.sourcesContent.map(() => null)\n        }\n      } else {\n        map = prev.consumer()\n      }\n\n      this.map.applySourceMap(map, from, this.toUrl(this.path(root)))\n    }\n  }\n\n  isAnnotation() {\n    if (this.isInline()) {\n      return true\n    }\n    if (typeof this.mapOpts.annotation !== 'undefined') {\n      return this.mapOpts.annotation\n    }\n    if (this.previous().length) {\n      return this.previous().some(i => i.annotation)\n    }\n    return true\n  }\n\n  toBase64(str) {\n    if (Buffer) {\n      return Buffer.from(str).toString('base64')\n    } else {\n      return window.btoa(unescape(encodeURIComponent(str)))\n    }\n  }\n\n  addAnnotation() {\n    let content\n\n    if (this.isInline()) {\n      content =\n        'data:application/json;base64,' + this.toBase64(this.map.toString())\n    } else if (typeof this.mapOpts.annotation === 'string') {\n      content = this.mapOpts.annotation\n    } else if (typeof this.mapOpts.annotation === 'function') {\n      content = this.mapOpts.annotation(this.opts.to, this.root)\n    } else {\n      content = this.outputFile() + '.map'\n    }\n    let eol = '\\n'\n    if (this.css.includes('\\r\\n')) eol = '\\r\\n'\n\n    this.css += eol + '/*# sourceMappingURL=' + content + ' */'\n  }\n\n  outputFile() {\n    if (this.opts.to) {\n      return this.path(this.opts.to)\n    } else if (this.opts.from) {\n      return this.path(this.opts.from)\n    } else {\n      return 'to.css'\n    }\n  }\n\n  generateMap() {\n    if (this.root) {\n      this.generateString()\n    } else if (this.previous().length === 1) {\n      let prev = this.previous()[0].consumer()\n      prev.file = this.outputFile()\n      this.map = SourceMapGenerator.fromSourceMap(prev)\n    } else {\n      this.map = new SourceMapGenerator({ file: this.outputFile() })\n      this.map.addMapping({\n        source: this.opts.from\n          ? this.toUrl(this.path(this.opts.from))\n          : '<no source>',\n        generated: { line: 1, column: 0 },\n        original: { line: 1, column: 0 }\n      })\n    }\n\n    if (this.isSourcesContent()) this.setSourcesContent()\n    if (this.root && this.previous().length > 0) this.applyPrevMaps()\n    if (this.isAnnotation()) this.addAnnotation()\n\n    if (this.isInline()) {\n      return [this.css]\n    } else {\n      return [this.css, this.map]\n    }\n  }\n\n  path(file) {\n    if (file.indexOf('<') === 0) return file\n    if (/^\\w+:\\/\\//.test(file)) return file\n    if (this.mapOpts.absolute) return file\n\n    let from = this.opts.to ? dirname(this.opts.to) : '.'\n\n    if (typeof this.mapOpts.annotation === 'string') {\n      from = dirname(resolve(from, this.mapOpts.annotation))\n    }\n\n    file = relative(from, file)\n    return file\n  }\n\n  toUrl(path) {\n    if (sep === '\\\\') {\n      path = path.replace(/\\\\/g, '/')\n    }\n    return encodeURI(path).replace(/[#?]/g, encodeURIComponent)\n  }\n\n  sourcePath(node) {\n    if (this.mapOpts.from) {\n      return this.toUrl(this.mapOpts.from)\n    } else if (this.mapOpts.absolute) {\n      if (pathToFileURL) {\n        return pathToFileURL(node.source.input.from).toString()\n      } else {\n        throw new Error(\n          '`map.absolute` option is not available in this PostCSS build'\n        )\n      }\n    } else {\n      return this.toUrl(this.path(node.source.input.from))\n    }\n  }\n\n  generateString() {\n    this.css = ''\n    this.map = new SourceMapGenerator({ file: this.outputFile() })\n\n    let line = 1\n    let column = 1\n\n    let noSource = '<no source>'\n    let mapping = {\n      source: '',\n      generated: { line: 0, column: 0 },\n      original: { line: 0, column: 0 }\n    }\n\n    let lines, last\n    this.stringify(this.root, (str, node, type) => {\n      this.css += str\n\n      if (node && type !== 'end') {\n        mapping.generated.line = line\n        mapping.generated.column = column - 1\n        if (node.source && node.source.start) {\n          mapping.source = this.sourcePath(node)\n          mapping.original.line = node.source.start.line\n          mapping.original.column = node.source.start.column - 1\n          this.map.addMapping(mapping)\n        } else {\n          mapping.source = noSource\n          mapping.original.line = 1\n          mapping.original.column = 0\n          this.map.addMapping(mapping)\n        }\n      }\n\n      lines = str.match(/\\n/g)\n      if (lines) {\n        line += lines.length\n        last = str.lastIndexOf('\\n')\n        column = str.length - last\n      } else {\n        column += str.length\n      }\n\n      if (node && type !== 'start') {\n        let p = node.parent || { raws: {} }\n        if (node.type !== 'decl' || node !== p.last || p.raws.semicolon) {\n          if (node.source && node.source.end) {\n            mapping.source = this.sourcePath(node)\n            mapping.original.line = node.source.end.line\n            mapping.original.column = node.source.end.column - 1\n            mapping.generated.line = line\n            mapping.generated.column = column - 2\n            this.map.addMapping(mapping)\n          } else {\n            mapping.source = noSource\n            mapping.original.line = 1\n            mapping.original.column = 0\n            mapping.generated.line = line\n            mapping.generated.column = column - 1\n            this.map.addMapping(mapping)\n          }\n        }\n      }\n    })\n  }\n\n  generate() {\n    this.clearAnnotation()\n    if (pathAvailable && sourceMapAvailable && this.isMap()) {\n      return this.generateMap()\n    } else {\n      let result = ''\n      this.stringify(this.root, i => {\n        result += i\n      })\n      return [result]\n    }\n  }\n}\n\nmodule.exports = MapGenerator\n","'use strict'\n\nlet MapGenerator = require('./map-generator')\nlet stringify = require('./stringify')\nlet warnOnce = require('./warn-once')\nlet parse = require('./parse')\nconst Result = require('./result')\n\nclass NoWorkResult {\n  constructor(processor, css, opts) {\n    css = css.toString()\n    this.stringified = false\n\n    this._processor = processor\n    this._css = css\n    this._opts = opts\n    this._map = undefined\n    let root\n\n    let str = stringify\n    this.result = new Result(this._processor, root, this._opts)\n    this.result.css = css\n\n    let self = this\n    Object.defineProperty(this.result, 'root', {\n      get() {\n        return self.root\n      }\n    })\n\n    let map = new MapGenerator(str, root, this._opts, css)\n    if (map.isMap()) {\n      let [generatedCSS, generatedMap] = map.generate()\n      if (generatedCSS) {\n        this.result.css = generatedCSS\n      }\n      if (generatedMap) {\n        this.result.map = generatedMap\n      }\n    }\n  }\n\n  get [Symbol.toStringTag]() {\n    return 'NoWorkResult'\n  }\n\n  get processor() {\n    return this.result.processor\n  }\n\n  get opts() {\n    return this.result.opts\n  }\n\n  get css() {\n    return this.result.css\n  }\n\n  get content() {\n    return this.result.css\n  }\n\n  get map() {\n    return this.result.map\n  }\n\n  get root() {\n    if (this._root) {\n      return this._root\n    }\n\n    let root\n    let parser = parse\n\n    try {\n      root = parser(this._css, this._opts)\n    } catch (error) {\n      this.error = error\n    }\n\n    if (this.error) {\n      throw this.error\n    } else {\n      this._root = root\n      return root\n    }\n  }\n\n  get messages() {\n    return []\n  }\n\n  warnings() {\n    return []\n  }\n\n  toString() {\n    return this._css\n  }\n\n  then(onFulfilled, onRejected) {\n    if (process.env.NODE_ENV !== 'production') {\n      if (!('from' in this._opts)) {\n        warnOnce(\n          'Without `from` option PostCSS could generate wrong source map ' +\n            'and will not find Browserslist config. Set it to CSS file path ' +\n            'or to `undefined` to prevent this warning.'\n        )\n      }\n    }\n\n    return this.async().then(onFulfilled, onRejected)\n  }\n\n  catch(onRejected) {\n    return this.async().catch(onRejected)\n  }\n\n  finally(onFinally) {\n    return this.async().then(onFinally, onFinally)\n  }\n\n  async() {\n    if (this.error) return Promise.reject(this.error)\n    return Promise.resolve(this.result)\n  }\n\n  sync() {\n    if (this.error) throw this.error\n    return this.result\n  }\n}\n\nmodule.exports = NoWorkResult\nNoWorkResult.default = NoWorkResult\n","'use strict'\n\nlet { isClean, my } = require('./symbols')\nlet CssSyntaxError = require('./css-syntax-error')\nlet Stringifier = require('./stringifier')\nlet stringify = require('./stringify')\n\nfunction cloneNode(obj, parent) {\n  let cloned = new obj.constructor()\n\n  for (let i in obj) {\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) {\n      /* c8 ignore next 2 */\n      continue\n    }\n    if (i === 'proxyCache') continue\n    let value = obj[i]\n    let type = typeof value\n\n    if (i === 'parent' && type === 'object') {\n      if (parent) cloned[i] = parent\n    } else if (i === 'source') {\n      cloned[i] = value\n    } else if (Array.isArray(value)) {\n      cloned[i] = value.map(j => cloneNode(j, cloned))\n    } else {\n      if (type === 'object' && value !== null) value = cloneNode(value)\n      cloned[i] = value\n    }\n  }\n\n  return cloned\n}\n\nclass Node {\n  constructor(defaults = {}) {\n    this.raws = {}\n    this[isClean] = false\n    this[my] = true\n\n    for (let name in defaults) {\n      if (name === 'nodes') {\n        this.nodes = []\n        for (let node of defaults[name]) {\n          if (typeof node.clone === 'function') {\n            this.append(node.clone())\n          } else {\n            this.append(node)\n          }\n        }\n      } else {\n        this[name] = defaults[name]\n      }\n    }\n  }\n\n  error(message, opts = {}) {\n    if (this.source) {\n      let { start, end } = this.rangeBy(opts)\n      return this.source.input.error(\n        message,\n        { line: start.line, column: start.column },\n        { line: end.line, column: end.column },\n        opts\n      )\n    }\n    return new CssSyntaxError(message)\n  }\n\n  warn(result, text, opts) {\n    let data = { node: this }\n    for (let i in opts) data[i] = opts[i]\n    return result.warn(text, data)\n  }\n\n  remove() {\n    if (this.parent) {\n      this.parent.removeChild(this)\n    }\n    this.parent = undefined\n    return this\n  }\n\n  toString(stringifier = stringify) {\n    if (stringifier.stringify) stringifier = stringifier.stringify\n    let result = ''\n    stringifier(this, i => {\n      result += i\n    })\n    return result\n  }\n\n  assign(overrides = {}) {\n    for (let name in overrides) {\n      this[name] = overrides[name]\n    }\n    return this\n  }\n\n  clone(overrides = {}) {\n    let cloned = cloneNode(this)\n    for (let name in overrides) {\n      cloned[name] = overrides[name]\n    }\n    return cloned\n  }\n\n  cloneBefore(overrides = {}) {\n    let cloned = this.clone(overrides)\n    this.parent.insertBefore(this, cloned)\n    return cloned\n  }\n\n  cloneAfter(overrides = {}) {\n    let cloned = this.clone(overrides)\n    this.parent.insertAfter(this, cloned)\n    return cloned\n  }\n\n  replaceWith(...nodes) {\n    if (this.parent) {\n      let bookmark = this\n      let foundSelf = false\n      for (let node of nodes) {\n        if (node === this) {\n          foundSelf = true\n        } else if (foundSelf) {\n          this.parent.insertAfter(bookmark, node)\n          bookmark = node\n        } else {\n          this.parent.insertBefore(bookmark, node)\n        }\n      }\n\n      if (!foundSelf) {\n        this.remove()\n      }\n    }\n\n    return this\n  }\n\n  next() {\n    if (!this.parent) return undefined\n    let index = this.parent.index(this)\n    return this.parent.nodes[index + 1]\n  }\n\n  prev() {\n    if (!this.parent) return undefined\n    let index = this.parent.index(this)\n    return this.parent.nodes[index - 1]\n  }\n\n  before(add) {\n    this.parent.insertBefore(this, add)\n    return this\n  }\n\n  after(add) {\n    this.parent.insertAfter(this, add)\n    return this\n  }\n\n  root() {\n    let result = this\n    while (result.parent && result.parent.type !== 'document') {\n      result = result.parent\n    }\n    return result\n  }\n\n  raw(prop, defaultType) {\n    let str = new Stringifier()\n    return str.raw(this, prop, defaultType)\n  }\n\n  cleanRaws(keepBetween) {\n    delete this.raws.before\n    delete this.raws.after\n    if (!keepBetween) delete this.raws.between\n  }\n\n  toJSON(_, inputs) {\n    let fixed = {}\n    let emitInputs = inputs == null\n    inputs = inputs || new Map()\n    let inputsNextIndex = 0\n\n    for (let name in this) {\n      if (!Object.prototype.hasOwnProperty.call(this, name)) {\n        /* c8 ignore next 2 */\n        continue\n      }\n      if (name === 'parent' || name === 'proxyCache') continue\n      let value = this[name]\n\n      if (Array.isArray(value)) {\n        fixed[name] = value.map(i => {\n          if (typeof i === 'object' && i.toJSON) {\n            return i.toJSON(null, inputs)\n          } else {\n            return i\n          }\n        })\n      } else if (typeof value === 'object' && value.toJSON) {\n        fixed[name] = value.toJSON(null, inputs)\n      } else if (name === 'source') {\n        let inputId = inputs.get(value.input)\n        if (inputId == null) {\n          inputId = inputsNextIndex\n          inputs.set(value.input, inputsNextIndex)\n          inputsNextIndex++\n        }\n        fixed[name] = {\n          inputId,\n          start: value.start,\n          end: value.end\n        }\n      } else {\n        fixed[name] = value\n      }\n    }\n\n    if (emitInputs) {\n      fixed.inputs = [...inputs.keys()].map(input => input.toJSON())\n    }\n\n    return fixed\n  }\n\n  positionInside(index) {\n    let string = this.toString()\n    let column = this.source.start.column\n    let line = this.source.start.line\n\n    for (let i = 0; i < index; i++) {\n      if (string[i] === '\\n') {\n        column = 1\n        line += 1\n      } else {\n        column += 1\n      }\n    }\n\n    return { line, column }\n  }\n\n  positionBy(opts) {\n    let pos = this.source.start\n    if (opts.index) {\n      pos = this.positionInside(opts.index)\n    } else if (opts.word) {\n      let index = this.toString().indexOf(opts.word)\n      if (index !== -1) pos = this.positionInside(index)\n    }\n    return pos\n  }\n\n  rangeBy(opts) {\n    let start = {\n      line: this.source.start.line,\n      column: this.source.start.column\n    }\n    let end = this.source.end\n      ? {\n          line: this.source.end.line,\n          column: this.source.end.column + 1\n        }\n      : {\n          line: start.line,\n          column: start.column + 1\n        }\n\n    if (opts.word) {\n      let index = this.toString().indexOf(opts.word)\n      if (index !== -1) {\n        start = this.positionInside(index)\n        end = this.positionInside(index + opts.word.length)\n      }\n    } else {\n      if (opts.start) {\n        start = {\n          line: opts.start.line,\n          column: opts.start.column\n        }\n      } else if (opts.index) {\n        start = this.positionInside(opts.index)\n      }\n\n      if (opts.end) {\n        end = {\n          line: opts.end.line,\n          column: opts.end.column\n        }\n      } else if (opts.endIndex) {\n        end = this.positionInside(opts.endIndex)\n      } else if (opts.index) {\n        end = this.positionInside(opts.index + 1)\n      }\n    }\n\n    if (\n      end.line < start.line ||\n      (end.line === start.line && end.column <= start.column)\n    ) {\n      end = { line: start.line, column: start.column + 1 }\n    }\n\n    return { start, end }\n  }\n\n  getProxyProcessor() {\n    return {\n      set(node, prop, value) {\n        if (node[prop] === value) return true\n        node[prop] = value\n        if (\n          prop === 'prop' ||\n          prop === 'value' ||\n          prop === 'name' ||\n          prop === 'params' ||\n          prop === 'important' ||\n          /* c8 ignore next */\n          prop === 'text'\n        ) {\n          node.markDirty()\n        }\n        return true\n      },\n\n      get(node, prop) {\n        if (prop === 'proxyOf') {\n          return node\n        } else if (prop === 'root') {\n          return () => node.root().toProxy()\n        } else {\n          return node[prop]\n        }\n      }\n    }\n  }\n\n  toProxy() {\n    if (!this.proxyCache) {\n      this.proxyCache = new Proxy(this, this.getProxyProcessor())\n    }\n    return this.proxyCache\n  }\n\n  addToError(error) {\n    error.postcssNode = this\n    if (error.stack && this.source && /\\n\\s{4}at /.test(error.stack)) {\n      let s = this.source\n      error.stack = error.stack.replace(\n        /\\n\\s{4}at /,\n        `$&${s.input.from}:${s.start.line}:${s.start.column}$&`\n      )\n    }\n    return error\n  }\n\n  markDirty() {\n    if (this[isClean]) {\n      this[isClean] = false\n      let next = this\n      while ((next = next.parent)) {\n        next[isClean] = false\n      }\n    }\n  }\n\n  get proxyOf() {\n    return this\n  }\n}\n\nmodule.exports = Node\nNode.default = Node\n","'use strict'\n\nlet Container = require('./container')\nlet Parser = require('./parser')\nlet Input = require('./input')\n\nfunction parse(css, opts) {\n  let input = new Input(css, opts)\n  let parser = new Parser(input)\n  try {\n    parser.parse()\n  } catch (e) {\n    if (process.env.NODE_ENV !== 'production') {\n      if (e.name === 'CssSyntaxError' && opts && opts.from) {\n        if (/\\.scss$/i.test(opts.from)) {\n          e.message +=\n            '\\nYou tried to parse SCSS with ' +\n            'the standard CSS parser; ' +\n            'try again with the postcss-scss parser'\n        } else if (/\\.sass/i.test(opts.from)) {\n          e.message +=\n            '\\nYou tried to parse Sass with ' +\n            'the standard CSS parser; ' +\n            'try again with the postcss-sass parser'\n        } else if (/\\.less$/i.test(opts.from)) {\n          e.message +=\n            '\\nYou tried to parse Less with ' +\n            'the standard CSS parser; ' +\n            'try again with the postcss-less parser'\n        }\n      }\n    }\n    throw e\n  }\n\n  return parser.root\n}\n\nmodule.exports = parse\nparse.default = parse\n\nContainer.registerParse(parse)\n","'use strict'\n\nlet Declaration = require('./declaration')\nlet tokenizer = require('./tokenize')\nlet Comment = require('./comment')\nlet AtRule = require('./at-rule')\nlet Root = require('./root')\nlet Rule = require('./rule')\n\nconst SAFE_COMMENT_NEIGHBOR = {\n  empty: true,\n  space: true\n}\n\nfunction findLastWithPosition(tokens) {\n  for (let i = tokens.length - 1; i >= 0; i--) {\n    let token = tokens[i]\n    let pos = token[3] || token[2]\n    if (pos) return pos\n  }\n}\n\nclass Parser {\n  constructor(input) {\n    this.input = input\n\n    this.root = new Root()\n    this.current = this.root\n    this.spaces = ''\n    this.semicolon = false\n    this.customProperty = false\n\n    this.createTokenizer()\n    this.root.source = { input, start: { offset: 0, line: 1, column: 1 } }\n  }\n\n  createTokenizer() {\n    this.tokenizer = tokenizer(this.input)\n  }\n\n  parse() {\n    let token\n    while (!this.tokenizer.endOfFile()) {\n      token = this.tokenizer.nextToken()\n\n      switch (token[0]) {\n        case 'space':\n          this.spaces += token[1]\n          break\n\n        case ';':\n          this.freeSemicolon(token)\n          break\n\n        case '}':\n          this.end(token)\n          break\n\n        case 'comment':\n          this.comment(token)\n          break\n\n        case 'at-word':\n          this.atrule(token)\n          break\n\n        case '{':\n          this.emptyRule(token)\n          break\n\n        default:\n          this.other(token)\n          break\n      }\n    }\n    this.endFile()\n  }\n\n  comment(token) {\n    let node = new Comment()\n    this.init(node, token[2])\n    node.source.end = this.getPosition(token[3] || token[2])\n\n    let text = token[1].slice(2, -2)\n    if (/^\\s*$/.test(text)) {\n      node.text = ''\n      node.raws.left = text\n      node.raws.right = ''\n    } else {\n      let match = text.match(/^(\\s*)([^]*\\S)(\\s*)$/)\n      node.text = match[2]\n      node.raws.left = match[1]\n      node.raws.right = match[3]\n    }\n  }\n\n  emptyRule(token) {\n    let node = new Rule()\n    this.init(node, token[2])\n    node.selector = ''\n    node.raws.between = ''\n    this.current = node\n  }\n\n  other(start) {\n    let end = false\n    let type = null\n    let colon = false\n    let bracket = null\n    let brackets = []\n    let customProperty = start[1].startsWith('--')\n\n    let tokens = []\n    let token = start\n    while (token) {\n      type = token[0]\n      tokens.push(token)\n\n      if (type === '(' || type === '[') {\n        if (!bracket) bracket = token\n        brackets.push(type === '(' ? ')' : ']')\n      } else if (customProperty && colon && type === '{') {\n        if (!bracket) bracket = token\n        brackets.push('}')\n      } else if (brackets.length === 0) {\n        if (type === ';') {\n          if (colon) {\n            this.decl(tokens, customProperty)\n            return\n          } else {\n            break\n          }\n        } else if (type === '{') {\n          this.rule(tokens)\n          return\n        } else if (type === '}') {\n          this.tokenizer.back(tokens.pop())\n          end = true\n          break\n        } else if (type === ':') {\n          colon = true\n        }\n      } else if (type === brackets[brackets.length - 1]) {\n        brackets.pop()\n        if (brackets.length === 0) bracket = null\n      }\n\n      token = this.tokenizer.nextToken()\n    }\n\n    if (this.tokenizer.endOfFile()) end = true\n    if (brackets.length > 0) this.unclosedBracket(bracket)\n\n    if (end && colon) {\n      if (!customProperty) {\n        while (tokens.length) {\n          token = tokens[tokens.length - 1][0]\n          if (token !== 'space' && token !== 'comment') break\n          this.tokenizer.back(tokens.pop())\n        }\n      }\n      this.decl(tokens, customProperty)\n    } else {\n      this.unknownWord(tokens)\n    }\n  }\n\n  rule(tokens) {\n    tokens.pop()\n\n    let node = new Rule()\n    this.init(node, tokens[0][2])\n\n    node.raws.between = this.spacesAndCommentsFromEnd(tokens)\n    this.raw(node, 'selector', tokens)\n    this.current = node\n  }\n\n  decl(tokens, customProperty) {\n    let node = new Declaration()\n    this.init(node, tokens[0][2])\n\n    let last = tokens[tokens.length - 1]\n    if (last[0] === ';') {\n      this.semicolon = true\n      tokens.pop()\n    }\n\n    node.source.end = this.getPosition(\n      last[3] || last[2] || findLastWithPosition(tokens)\n    )\n\n    while (tokens[0][0] !== 'word') {\n      if (tokens.length === 1) this.unknownWord(tokens)\n      node.raws.before += tokens.shift()[1]\n    }\n    node.source.start = this.getPosition(tokens[0][2])\n\n    node.prop = ''\n    while (tokens.length) {\n      let type = tokens[0][0]\n      if (type === ':' || type === 'space' || type === 'comment') {\n        break\n      }\n      node.prop += tokens.shift()[1]\n    }\n\n    node.raws.between = ''\n\n    let token\n    while (tokens.length) {\n      token = tokens.shift()\n\n      if (token[0] === ':') {\n        node.raws.between += token[1]\n        break\n      } else {\n        if (token[0] === 'word' && /\\w/.test(token[1])) {\n          this.unknownWord([token])\n        }\n        node.raws.between += token[1]\n      }\n    }\n\n    if (node.prop[0] === '_' || node.prop[0] === '*') {\n      node.raws.before += node.prop[0]\n      node.prop = node.prop.slice(1)\n    }\n\n    let firstSpaces = []\n    let next\n    while (tokens.length) {\n      next = tokens[0][0]\n      if (next !== 'space' && next !== 'comment') break\n      firstSpaces.push(tokens.shift())\n    }\n\n    this.precheckMissedSemicolon(tokens)\n\n    for (let i = tokens.length - 1; i >= 0; i--) {\n      token = tokens[i]\n      if (token[1].toLowerCase() === '!important') {\n        node.important = true\n        let string = this.stringFrom(tokens, i)\n        string = this.spacesFromEnd(tokens) + string\n        if (string !== ' !important') node.raws.important = string\n        break\n      } else if (token[1].toLowerCase() === 'important') {\n        let cache = tokens.slice(0)\n        let str = ''\n        for (let j = i; j > 0; j--) {\n          let type = cache[j][0]\n          if (str.trim().indexOf('!') === 0 && type !== 'space') {\n            break\n          }\n          str = cache.pop()[1] + str\n        }\n        if (str.trim().indexOf('!') === 0) {\n          node.important = true\n          node.raws.important = str\n          tokens = cache\n        }\n      }\n\n      if (token[0] !== 'space' && token[0] !== 'comment') {\n        break\n      }\n    }\n\n    let hasWord = tokens.some(i => i[0] !== 'space' && i[0] !== 'comment')\n\n    if (hasWord) {\n      node.raws.between += firstSpaces.map(i => i[1]).join('')\n      firstSpaces = []\n    }\n    this.raw(node, 'value', firstSpaces.concat(tokens), customProperty)\n\n    if (node.value.includes(':') && !customProperty) {\n      this.checkMissedSemicolon(tokens)\n    }\n  }\n\n  atrule(token) {\n    let node = new AtRule()\n    node.name = token[1].slice(1)\n    if (node.name === '') {\n      this.unnamedAtrule(node, token)\n    }\n    this.init(node, token[2])\n\n    let type\n    let prev\n    let shift\n    let last = false\n    let open = false\n    let params = []\n    let brackets = []\n\n    while (!this.tokenizer.endOfFile()) {\n      token = this.tokenizer.nextToken()\n      type = token[0]\n\n      if (type === '(' || type === '[') {\n        brackets.push(type === '(' ? ')' : ']')\n      } else if (type === '{' && brackets.length > 0) {\n        brackets.push('}')\n      } else if (type === brackets[brackets.length - 1]) {\n        brackets.pop()\n      }\n\n      if (brackets.length === 0) {\n        if (type === ';') {\n          node.source.end = this.getPosition(token[2])\n          this.semicolon = true\n          break\n        } else if (type === '{') {\n          open = true\n          break\n        } else if (type === '}') {\n          if (params.length > 0) {\n            shift = params.length - 1\n            prev = params[shift]\n            while (prev && prev[0] === 'space') {\n              prev = params[--shift]\n            }\n            if (prev) {\n              node.source.end = this.getPosition(prev[3] || prev[2])\n            }\n          }\n          this.end(token)\n          break\n        } else {\n          params.push(token)\n        }\n      } else {\n        params.push(token)\n      }\n\n      if (this.tokenizer.endOfFile()) {\n        last = true\n        break\n      }\n    }\n\n    node.raws.between = this.spacesAndCommentsFromEnd(params)\n    if (params.length) {\n      node.raws.afterName = this.spacesAndCommentsFromStart(params)\n      this.raw(node, 'params', params)\n      if (last) {\n        token = params[params.length - 1]\n        node.source.end = this.getPosition(token[3] || token[2])\n        this.spaces = node.raws.between\n        node.raws.between = ''\n      }\n    } else {\n      node.raws.afterName = ''\n      node.params = ''\n    }\n\n    if (open) {\n      node.nodes = []\n      this.current = node\n    }\n  }\n\n  end(token) {\n    if (this.current.nodes && this.current.nodes.length) {\n      this.current.raws.semicolon = this.semicolon\n    }\n    this.semicolon = false\n\n    this.current.raws.after = (this.current.raws.after || '') + this.spaces\n    this.spaces = ''\n\n    if (this.current.parent) {\n      this.current.source.end = this.getPosition(token[2])\n      this.current = this.current.parent\n    } else {\n      this.unexpectedClose(token)\n    }\n  }\n\n  endFile() {\n    if (this.current.parent) this.unclosedBlock()\n    if (this.current.nodes && this.current.nodes.length) {\n      this.current.raws.semicolon = this.semicolon\n    }\n    this.current.raws.after = (this.current.raws.after || '') + this.spaces\n  }\n\n  freeSemicolon(token) {\n    this.spaces += token[1]\n    if (this.current.nodes) {\n      let prev = this.current.nodes[this.current.nodes.length - 1]\n      if (prev && prev.type === 'rule' && !prev.raws.ownSemicolon) {\n        prev.raws.ownSemicolon = this.spaces\n        this.spaces = ''\n      }\n    }\n  }\n\n  // Helpers\n\n  getPosition(offset) {\n    let pos = this.input.fromOffset(offset)\n    return {\n      offset,\n      line: pos.line,\n      column: pos.col\n    }\n  }\n\n  init(node, offset) {\n    this.current.push(node)\n    node.source = {\n      start: this.getPosition(offset),\n      input: this.input\n    }\n    node.raws.before = this.spaces\n    this.spaces = ''\n    if (node.type !== 'comment') this.semicolon = false\n  }\n\n  raw(node, prop, tokens, customProperty) {\n    let token, type\n    let length = tokens.length\n    let value = ''\n    let clean = true\n    let next, prev\n\n    for (let i = 0; i < length; i += 1) {\n      token = tokens[i]\n      type = token[0]\n      if (type === 'space' && i === length - 1 && !customProperty) {\n        clean = false\n      } else if (type === 'comment') {\n        prev = tokens[i - 1] ? tokens[i - 1][0] : 'empty'\n        next = tokens[i + 1] ? tokens[i + 1][0] : 'empty'\n        if (!SAFE_COMMENT_NEIGHBOR[prev] && !SAFE_COMMENT_NEIGHBOR[next]) {\n          if (value.slice(-1) === ',') {\n            clean = false\n          } else {\n            value += token[1]\n          }\n        } else {\n          clean = false\n        }\n      } else {\n        value += token[1]\n      }\n    }\n    if (!clean) {\n      let raw = tokens.reduce((all, i) => all + i[1], '')\n      node.raws[prop] = { value, raw }\n    }\n    node[prop] = value\n  }\n\n  spacesAndCommentsFromEnd(tokens) {\n    let lastTokenType\n    let spaces = ''\n    while (tokens.length) {\n      lastTokenType = tokens[tokens.length - 1][0]\n      if (lastTokenType !== 'space' && lastTokenType !== 'comment') break\n      spaces = tokens.pop()[1] + spaces\n    }\n    return spaces\n  }\n\n  spacesAndCommentsFromStart(tokens) {\n    let next\n    let spaces = ''\n    while (tokens.length) {\n      next = tokens[0][0]\n      if (next !== 'space' && next !== 'comment') break\n      spaces += tokens.shift()[1]\n    }\n    return spaces\n  }\n\n  spacesFromEnd(tokens) {\n    let lastTokenType\n    let spaces = ''\n    while (tokens.length) {\n      lastTokenType = tokens[tokens.length - 1][0]\n      if (lastTokenType !== 'space') break\n      spaces = tokens.pop()[1] + spaces\n    }\n    return spaces\n  }\n\n  stringFrom(tokens, from) {\n    let result = ''\n    for (let i = from; i < tokens.length; i++) {\n      result += tokens[i][1]\n    }\n    tokens.splice(from, tokens.length - from)\n    return result\n  }\n\n  colon(tokens) {\n    let brackets = 0\n    let token, type, prev\n    for (let [i, element] of tokens.entries()) {\n      token = element\n      type = token[0]\n\n      if (type === '(') {\n        brackets += 1\n      }\n      if (type === ')') {\n        brackets -= 1\n      }\n      if (brackets === 0 && type === ':') {\n        if (!prev) {\n          this.doubleColon(token)\n        } else if (prev[0] === 'word' && prev[1] === 'progid') {\n          continue\n        } else {\n          return i\n        }\n      }\n\n      prev = token\n    }\n    return false\n  }\n\n  // Errors\n\n  unclosedBracket(bracket) {\n    throw this.input.error(\n      'Unclosed bracket',\n      { offset: bracket[2] },\n      { offset: bracket[2] + 1 }\n    )\n  }\n\n  unknownWord(tokens) {\n    throw this.input.error(\n      'Unknown word',\n      { offset: tokens[0][2] },\n      { offset: tokens[0][2] + tokens[0][1].length }\n    )\n  }\n\n  unexpectedClose(token) {\n    throw this.input.error(\n      'Unexpected }',\n      { offset: token[2] },\n      { offset: token[2] + 1 }\n    )\n  }\n\n  unclosedBlock() {\n    let pos = this.current.source.start\n    throw this.input.error('Unclosed block', pos.line, pos.column)\n  }\n\n  doubleColon(token) {\n    throw this.input.error(\n      'Double colon',\n      { offset: token[2] },\n      { offset: token[2] + token[1].length }\n    )\n  }\n\n  unnamedAtrule(node, token) {\n    throw this.input.error(\n      'At-rule without name',\n      { offset: token[2] },\n      { offset: token[2] + token[1].length }\n    )\n  }\n\n  precheckMissedSemicolon(/* tokens */) {\n    // Hook for Safe Parser\n  }\n\n  checkMissedSemicolon(tokens) {\n    let colon = this.colon(tokens)\n    if (colon === false) return\n\n    let founded = 0\n    let token\n    for (let j = colon - 1; j >= 0; j--) {\n      token = tokens[j]\n      if (token[0] !== 'space') {\n        founded += 1\n        if (founded === 2) break\n      }\n    }\n    // If the token is a word, e.g. `!important`, `red` or any other valid property's value.\n    // Then we need to return the colon after that word token. [3] is the \"end\" colon of that word.\n    // And because we need it after that one we do +1 to get the next one.\n    throw this.input.error(\n      'Missed semicolon',\n      token[0] === 'word' ? token[3] + 1 : token[2]\n    )\n  }\n}\n\nmodule.exports = Parser\n","'use strict'\n\nlet CssSyntaxError = require('./css-syntax-error')\nlet Declaration = require('./declaration')\nlet LazyResult = require('./lazy-result')\nlet Container = require('./container')\nlet Processor = require('./processor')\nlet stringify = require('./stringify')\nlet fromJSON = require('./fromJSON')\nlet Document = require('./document')\nlet Warning = require('./warning')\nlet Comment = require('./comment')\nlet AtRule = require('./at-rule')\nlet Result = require('./result.js')\nlet Input = require('./input')\nlet parse = require('./parse')\nlet list = require('./list')\nlet Rule = require('./rule')\nlet Root = require('./root')\nlet Node = require('./node')\n\nfunction postcss(...plugins) {\n  if (plugins.length === 1 && Array.isArray(plugins[0])) {\n    plugins = plugins[0]\n  }\n  return new Processor(plugins)\n}\n\npostcss.plugin = function plugin(name, initializer) {\n  let warningPrinted = false\n  function creator(...args) {\n    // eslint-disable-next-line no-console\n    if (console && console.warn && !warningPrinted) {\n      warningPrinted = true\n      // eslint-disable-next-line no-console\n      console.warn(\n        name +\n          ': postcss.plugin was deprecated. Migration guide:\\n' +\n          'https://evilmartians.com/chronicles/postcss-8-plugin-migration'\n      )\n      if (process.env.LANG && process.env.LANG.startsWith('cn')) {\n        /* c8 ignore next 7 */\n        // eslint-disable-next-line no-console\n        console.warn(\n          name +\n            ':  postcss.plugin . :\\n' +\n            'https://www.w3ctech.com/topic/2226'\n        )\n      }\n    }\n    let transformer = initializer(...args)\n    transformer.postcssPlugin = name\n    transformer.postcssVersion = new Processor().version\n    return transformer\n  }\n\n  let cache\n  Object.defineProperty(creator, 'postcss', {\n    get() {\n      if (!cache) cache = creator()\n      return cache\n    }\n  })\n\n  creator.process = function (css, processOpts, pluginOpts) {\n    return postcss([creator(pluginOpts)]).process(css, processOpts)\n  }\n\n  return creator\n}\n\npostcss.stringify = stringify\npostcss.parse = parse\npostcss.fromJSON = fromJSON\npostcss.list = list\n\npostcss.comment = defaults => new Comment(defaults)\npostcss.atRule = defaults => new AtRule(defaults)\npostcss.decl = defaults => new Declaration(defaults)\npostcss.rule = defaults => new Rule(defaults)\npostcss.root = defaults => new Root(defaults)\npostcss.document = defaults => new Document(defaults)\n\npostcss.CssSyntaxError = CssSyntaxError\npostcss.Declaration = Declaration\npostcss.Container = Container\npostcss.Processor = Processor\npostcss.Document = Document\npostcss.Comment = Comment\npostcss.Warning = Warning\npostcss.AtRule = AtRule\npostcss.Result = Result\npostcss.Input = Input\npostcss.Rule = Rule\npostcss.Root = Root\npostcss.Node = Node\n\nLazyResult.registerPostcss(postcss)\n\nmodule.exports = postcss\npostcss.default = postcss\n","'use strict'\n\nlet { SourceMapConsumer, SourceMapGenerator } = require('source-map-js')\nlet { existsSync, readFileSync } = require('fs')\nlet { dirname, join } = require('path')\n\nfunction fromBase64(str) {\n  if (Buffer) {\n    return Buffer.from(str, 'base64').toString()\n  } else {\n    /* c8 ignore next 2 */\n    return window.atob(str)\n  }\n}\n\nclass PreviousMap {\n  constructor(css, opts) {\n    if (opts.map === false) return\n    this.loadAnnotation(css)\n    this.inline = this.startWith(this.annotation, 'data:')\n\n    let prev = opts.map ? opts.map.prev : undefined\n    let text = this.loadMap(opts.from, prev)\n    if (!this.mapFile && opts.from) {\n      this.mapFile = opts.from\n    }\n    if (this.mapFile) this.root = dirname(this.mapFile)\n    if (text) this.text = text\n  }\n\n  consumer() {\n    if (!this.consumerCache) {\n      this.consumerCache = new SourceMapConsumer(this.text)\n    }\n    return this.consumerCache\n  }\n\n  withContent() {\n    return !!(\n      this.consumer().sourcesContent &&\n      this.consumer().sourcesContent.length > 0\n    )\n  }\n\n  startWith(string, start) {\n    if (!string) return false\n    return string.substr(0, start.length) === start\n  }\n\n  getAnnotationURL(sourceMapString) {\n    return sourceMapString.replace(/^\\/\\*\\s*# sourceMappingURL=/, '').trim()\n  }\n\n  loadAnnotation(css) {\n    let comments = css.match(/\\/\\*\\s*# sourceMappingURL=/gm)\n    if (!comments) return\n\n    // sourceMappingURLs from comments, strings, etc.\n    let start = css.lastIndexOf(comments.pop())\n    let end = css.indexOf('*/', start)\n\n    if (start > -1 && end > -1) {\n      // Locate the last sourceMappingURL to avoid pickin\n      this.annotation = this.getAnnotationURL(css.substring(start, end))\n    }\n  }\n\n  decodeInline(text) {\n    let baseCharsetUri = /^data:application\\/json;charset=utf-?8;base64,/\n    let baseUri = /^data:application\\/json;base64,/\n    let charsetUri = /^data:application\\/json;charset=utf-?8,/\n    let uri = /^data:application\\/json,/\n\n    if (charsetUri.test(text) || uri.test(text)) {\n      return decodeURIComponent(text.substr(RegExp.lastMatch.length))\n    }\n\n    if (baseCharsetUri.test(text) || baseUri.test(text)) {\n      return fromBase64(text.substr(RegExp.lastMatch.length))\n    }\n\n    let encoding = text.match(/data:application\\/json;([^,]+),/)[1]\n    throw new Error('Unsupported source map encoding ' + encoding)\n  }\n\n  loadFile(path) {\n    this.root = dirname(path)\n    if (existsSync(path)) {\n      this.mapFile = path\n      return readFileSync(path, 'utf-8').toString().trim()\n    }\n  }\n\n  loadMap(file, prev) {\n    if (prev === false) return false\n\n    if (prev) {\n      if (typeof prev === 'string') {\n        return prev\n      } else if (typeof prev === 'function') {\n        let prevPath = prev(file)\n        if (prevPath) {\n          let map = this.loadFile(prevPath)\n          if (!map) {\n            throw new Error(\n              'Unable to load previous source map: ' + prevPath.toString()\n            )\n          }\n          return map\n        }\n      } else if (prev instanceof SourceMapConsumer) {\n        return SourceMapGenerator.fromSourceMap(prev).toString()\n      } else if (prev instanceof SourceMapGenerator) {\n        return prev.toString()\n      } else if (this.isMap(prev)) {\n        return JSON.stringify(prev)\n      } else {\n        throw new Error(\n          'Unsupported previous source map format: ' + prev.toString()\n        )\n      }\n    } else if (this.inline) {\n      return this.decodeInline(this.annotation)\n    } else if (this.annotation) {\n      let map = this.annotation\n      if (file) map = join(dirname(file), map)\n      return this.loadFile(map)\n    }\n  }\n\n  isMap(map) {\n    if (typeof map !== 'object') return false\n    return (\n      typeof map.mappings === 'string' ||\n      typeof map._mappings === 'string' ||\n      Array.isArray(map.sections)\n    )\n  }\n}\n\nmodule.exports = PreviousMap\nPreviousMap.default = PreviousMap\n","'use strict'\n\nlet NoWorkResult = require('./no-work-result')\nlet LazyResult = require('./lazy-result')\nlet Document = require('./document')\nlet Root = require('./root')\n\nclass Processor {\n  constructor(plugins = []) {\n    this.version = '8.4.16'\n    this.plugins = this.normalize(plugins)\n  }\n\n  use(plugin) {\n    this.plugins = this.plugins.concat(this.normalize([plugin]))\n    return this\n  }\n\n  process(css, opts = {}) {\n    if (\n      this.plugins.length === 0 &&\n      typeof opts.parser === 'undefined' &&\n      typeof opts.stringifier === 'undefined' &&\n      typeof opts.syntax === 'undefined'\n    ) {\n      return new NoWorkResult(this, css, opts)\n    } else {\n      return new LazyResult(this, css, opts)\n    }\n  }\n\n  normalize(plugins) {\n    let normalized = []\n    for (let i of plugins) {\n      if (i.postcss === true) {\n        i = i()\n      } else if (i.postcss) {\n        i = i.postcss\n      }\n\n      if (typeof i === 'object' && Array.isArray(i.plugins)) {\n        normalized = normalized.concat(i.plugins)\n      } else if (typeof i === 'object' && i.postcssPlugin) {\n        normalized.push(i)\n      } else if (typeof i === 'function') {\n        normalized.push(i)\n      } else if (typeof i === 'object' && (i.parse || i.stringify)) {\n        if (process.env.NODE_ENV !== 'production') {\n          throw new Error(\n            'PostCSS syntaxes cannot be used as plugins. Instead, please use ' +\n              'one of the syntax/parser/stringifier options as outlined ' +\n              'in your PostCSS runner documentation.'\n          )\n        }\n      } else {\n        throw new Error(i + ' is not a PostCSS plugin')\n      }\n    }\n    return normalized\n  }\n}\n\nmodule.exports = Processor\nProcessor.default = Processor\n\nRoot.registerProcessor(Processor)\nDocument.registerProcessor(Processor)\n","'use strict'\n\nlet Warning = require('./warning')\n\nclass Result {\n  constructor(processor, root, opts) {\n    this.processor = processor\n    this.messages = []\n    this.root = root\n    this.opts = opts\n    this.css = undefined\n    this.map = undefined\n  }\n\n  toString() {\n    return this.css\n  }\n\n  warn(text, opts = {}) {\n    if (!opts.plugin) {\n      if (this.lastPlugin && this.lastPlugin.postcssPlugin) {\n        opts.plugin = this.lastPlugin.postcssPlugin\n      }\n    }\n\n    let warning = new Warning(text, opts)\n    this.messages.push(warning)\n\n    return warning\n  }\n\n  warnings() {\n    return this.messages.filter(i => i.type === 'warning')\n  }\n\n  get content() {\n    return this.css\n  }\n}\n\nmodule.exports = Result\nResult.default = Result\n","'use strict'\n\nlet Container = require('./container')\n\nlet LazyResult, Processor\n\nclass Root extends Container {\n  constructor(defaults) {\n    super(defaults)\n    this.type = 'root'\n    if (!this.nodes) this.nodes = []\n  }\n\n  removeChild(child, ignore) {\n    let index = this.index(child)\n\n    if (!ignore && index === 0 && this.nodes.length > 1) {\n      this.nodes[1].raws.before = this.nodes[index].raws.before\n    }\n\n    return super.removeChild(child)\n  }\n\n  normalize(child, sample, type) {\n    let nodes = super.normalize(child)\n\n    if (sample) {\n      if (type === 'prepend') {\n        if (this.nodes.length > 1) {\n          sample.raws.before = this.nodes[1].raws.before\n        } else {\n          delete sample.raws.before\n        }\n      } else if (this.first !== sample) {\n        for (let node of nodes) {\n          node.raws.before = sample.raws.before\n        }\n      }\n    }\n\n    return nodes\n  }\n\n  toResult(opts = {}) {\n    let lazy = new LazyResult(new Processor(), this, opts)\n    return lazy.stringify()\n  }\n}\n\nRoot.registerLazyResult = dependant => {\n  LazyResult = dependant\n}\n\nRoot.registerProcessor = dependant => {\n  Processor = dependant\n}\n\nmodule.exports = Root\nRoot.default = Root\n\nContainer.registerRoot(Root)\n","'use strict'\n\nlet Container = require('./container')\nlet list = require('./list')\n\nclass Rule extends Container {\n  constructor(defaults) {\n    super(defaults)\n    this.type = 'rule'\n    if (!this.nodes) this.nodes = []\n  }\n\n  get selectors() {\n    return list.comma(this.selector)\n  }\n\n  set selectors(values) {\n    let match = this.selector ? this.selector.match(/,\\s*/) : null\n    let sep = match ? match[0] : ',' + this.raw('between', 'beforeOpen')\n    this.selector = values.join(sep)\n  }\n}\n\nmodule.exports = Rule\nRule.default = Rule\n\nContainer.registerRule(Rule)\n","'use strict'\n\nconst DEFAULT_RAW = {\n  colon: ': ',\n  indent: '    ',\n  beforeDecl: '\\n',\n  beforeRule: '\\n',\n  beforeOpen: ' ',\n  beforeClose: '\\n',\n  beforeComment: '\\n',\n  after: '\\n',\n  emptyBody: '',\n  commentLeft: ' ',\n  commentRight: ' ',\n  semicolon: false\n}\n\nfunction capitalize(str) {\n  return str[0].toUpperCase() + str.slice(1)\n}\n\nclass Stringifier {\n  constructor(builder) {\n    this.builder = builder\n  }\n\n  stringify(node, semicolon) {\n    /* c8 ignore start */\n    if (!this[node.type]) {\n      throw new Error(\n        'Unknown AST node type ' +\n          node.type +\n          '. ' +\n          'Maybe you need to change PostCSS stringifier.'\n      )\n    }\n    /* c8 ignore stop */\n    this[node.type](node, semicolon)\n  }\n\n  document(node) {\n    this.body(node)\n  }\n\n  root(node) {\n    this.body(node)\n    if (node.raws.after) this.builder(node.raws.after)\n  }\n\n  comment(node) {\n    let left = this.raw(node, 'left', 'commentLeft')\n    let right = this.raw(node, 'right', 'commentRight')\n    this.builder('/*' + left + node.text + right + '*/', node)\n  }\n\n  decl(node, semicolon) {\n    let between = this.raw(node, 'between', 'colon')\n    let string = node.prop + between + this.rawValue(node, 'value')\n\n    if (node.important) {\n      string += node.raws.important || ' !important'\n    }\n\n    if (semicolon) string += ';'\n    this.builder(string, node)\n  }\n\n  rule(node) {\n    this.block(node, this.rawValue(node, 'selector'))\n    if (node.raws.ownSemicolon) {\n      this.builder(node.raws.ownSemicolon, node, 'end')\n    }\n  }\n\n  atrule(node, semicolon) {\n    let name = '@' + node.name\n    let params = node.params ? this.rawValue(node, 'params') : ''\n\n    if (typeof node.raws.afterName !== 'undefined') {\n      name += node.raws.afterName\n    } else if (params) {\n      name += ' '\n    }\n\n    if (node.nodes) {\n      this.block(node, name + params)\n    } else {\n      let end = (node.raws.between || '') + (semicolon ? ';' : '')\n      this.builder(name + params + end, node)\n    }\n  }\n\n  body(node) {\n    let last = node.nodes.length - 1\n    while (last > 0) {\n      if (node.nodes[last].type !== 'comment') break\n      last -= 1\n    }\n\n    let semicolon = this.raw(node, 'semicolon')\n    for (let i = 0; i < node.nodes.length; i++) {\n      let child = node.nodes[i]\n      let before = this.raw(child, 'before')\n      if (before) this.builder(before)\n      this.stringify(child, last !== i || semicolon)\n    }\n  }\n\n  block(node, start) {\n    let between = this.raw(node, 'between', 'beforeOpen')\n    this.builder(start + between + '{', node, 'start')\n\n    let after\n    if (node.nodes && node.nodes.length) {\n      this.body(node)\n      after = this.raw(node, 'after')\n    } else {\n      after = this.raw(node, 'after', 'emptyBody')\n    }\n\n    if (after) this.builder(after)\n    this.builder('}', node, 'end')\n  }\n\n  raw(node, own, detect) {\n    let value\n    if (!detect) detect = own\n\n    // Already had\n    if (own) {\n      value = node.raws[own]\n      if (typeof value !== 'undefined') return value\n    }\n\n    let parent = node.parent\n\n    if (detect === 'before') {\n      // Hack for first rule in CSS\n      if (!parent || (parent.type === 'root' && parent.first === node)) {\n        return ''\n      }\n\n      // `root` nodes in `document` should use only their own raws\n      if (parent && parent.type === 'document') {\n        return ''\n      }\n    }\n\n    // Floating child without parent\n    if (!parent) return DEFAULT_RAW[detect]\n\n    // Detect style by other nodes\n    let root = node.root()\n    if (!root.rawCache) root.rawCache = {}\n    if (typeof root.rawCache[detect] !== 'undefined') {\n      return root.rawCache[detect]\n    }\n\n    if (detect === 'before' || detect === 'after') {\n      return this.beforeAfter(node, detect)\n    } else {\n      let method = 'raw' + capitalize(detect)\n      if (this[method]) {\n        value = this[method](root, node)\n      } else {\n        root.walk(i => {\n          value = i.raws[own]\n          if (typeof value !== 'undefined') return false\n        })\n      }\n    }\n\n    if (typeof value === 'undefined') value = DEFAULT_RAW[detect]\n\n    root.rawCache[detect] = value\n    return value\n  }\n\n  rawSemicolon(root) {\n    let value\n    root.walk(i => {\n      if (i.nodes && i.nodes.length && i.last.type === 'decl') {\n        value = i.raws.semicolon\n        if (typeof value !== 'undefined') return false\n      }\n    })\n    return value\n  }\n\n  rawEmptyBody(root) {\n    let value\n    root.walk(i => {\n      if (i.nodes && i.nodes.length === 0) {\n        value = i.raws.after\n        if (typeof value !== 'undefined') return false\n      }\n    })\n    return value\n  }\n\n  rawIndent(root) {\n    if (root.raws.indent) return root.raws.indent\n    let value\n    root.walk(i => {\n      let p = i.parent\n      if (p && p !== root && p.parent && p.parent === root) {\n        if (typeof i.raws.before !== 'undefined') {\n          let parts = i.raws.before.split('\\n')\n          value = parts[parts.length - 1]\n          value = value.replace(/\\S/g, '')\n          return false\n        }\n      }\n    })\n    return value\n  }\n\n  rawBeforeComment(root, node) {\n    let value\n    root.walkComments(i => {\n      if (typeof i.raws.before !== 'undefined') {\n        value = i.raws.before\n        if (value.includes('\\n')) {\n          value = value.replace(/[^\\n]+$/, '')\n        }\n        return false\n      }\n    })\n    if (typeof value === 'undefined') {\n      value = this.raw(node, null, 'beforeDecl')\n    } else if (value) {\n      value = value.replace(/\\S/g, '')\n    }\n    return value\n  }\n\n  rawBeforeDecl(root, node) {\n    let value\n    root.walkDecls(i => {\n      if (typeof i.raws.before !== 'undefined') {\n        value = i.raws.before\n        if (value.includes('\\n')) {\n          value = value.replace(/[^\\n]+$/, '')\n        }\n        return false\n      }\n    })\n    if (typeof value === 'undefined') {\n      value = this.raw(node, null, 'beforeRule')\n    } else if (value) {\n      value = value.replace(/\\S/g, '')\n    }\n    return value\n  }\n\n  rawBeforeRule(root) {\n    let value\n    root.walk(i => {\n      if (i.nodes && (i.parent !== root || root.first !== i)) {\n        if (typeof i.raws.before !== 'undefined') {\n          value = i.raws.before\n          if (value.includes('\\n')) {\n            value = value.replace(/[^\\n]+$/, '')\n          }\n          return false\n        }\n      }\n    })\n    if (value) value = value.replace(/\\S/g, '')\n    return value\n  }\n\n  rawBeforeClose(root) {\n    let value\n    root.walk(i => {\n      if (i.nodes && i.nodes.length > 0) {\n        if (typeof i.raws.after !== 'undefined') {\n          value = i.raws.after\n          if (value.includes('\\n')) {\n            value = value.replace(/[^\\n]+$/, '')\n          }\n          return false\n        }\n      }\n    })\n    if (value) value = value.replace(/\\S/g, '')\n    return value\n  }\n\n  rawBeforeOpen(root) {\n    let value\n    root.walk(i => {\n      if (i.type !== 'decl') {\n        value = i.raws.between\n        if (typeof value !== 'undefined') return false\n      }\n    })\n    return value\n  }\n\n  rawColon(root) {\n    let value\n    root.walkDecls(i => {\n      if (typeof i.raws.between !== 'undefined') {\n        value = i.raws.between.replace(/[^\\s:]/g, '')\n        return false\n      }\n    })\n    return value\n  }\n\n  beforeAfter(node, detect) {\n    let value\n    if (node.type === 'decl') {\n      value = this.raw(node, null, 'beforeDecl')\n    } else if (node.type === 'comment') {\n      value = this.raw(node, null, 'beforeComment')\n    } else if (detect === 'before') {\n      value = this.raw(node, null, 'beforeRule')\n    } else {\n      value = this.raw(node, null, 'beforeClose')\n    }\n\n    let buf = node.parent\n    let depth = 0\n    while (buf && buf.type !== 'root') {\n      depth += 1\n      buf = buf.parent\n    }\n\n    if (value.includes('\\n')) {\n      let indent = this.raw(node, null, 'indent')\n      if (indent.length) {\n        for (let step = 0; step < depth; step++) value += indent\n      }\n    }\n\n    return value\n  }\n\n  rawValue(node, prop) {\n    let value = node[prop]\n    let raw = node.raws[prop]\n    if (raw && raw.value === value) {\n      return raw.raw\n    }\n\n    return value\n  }\n}\n\nmodule.exports = Stringifier\nStringifier.default = Stringifier\n","'use strict'\n\nlet Stringifier = require('./stringifier')\n\nfunction stringify(node, builder) {\n  let str = new Stringifier(builder)\n  str.stringify(node)\n}\n\nmodule.exports = stringify\nstringify.default = stringify\n","'use strict'\n\nmodule.exports.isClean = Symbol('isClean')\n\nmodule.exports.my = Symbol('my')\n","'use strict'\n\nconst SINGLE_QUOTE = \"'\".charCodeAt(0)\nconst DOUBLE_QUOTE = '\"'.charCodeAt(0)\nconst BACKSLASH = '\\\\'.charCodeAt(0)\nconst SLASH = '/'.charCodeAt(0)\nconst NEWLINE = '\\n'.charCodeAt(0)\nconst SPACE = ' '.charCodeAt(0)\nconst FEED = '\\f'.charCodeAt(0)\nconst TAB = '\\t'.charCodeAt(0)\nconst CR = '\\r'.charCodeAt(0)\nconst OPEN_SQUARE = '['.charCodeAt(0)\nconst CLOSE_SQUARE = ']'.charCodeAt(0)\nconst OPEN_PARENTHESES = '('.charCodeAt(0)\nconst CLOSE_PARENTHESES = ')'.charCodeAt(0)\nconst OPEN_CURLY = '{'.charCodeAt(0)\nconst CLOSE_CURLY = '}'.charCodeAt(0)\nconst SEMICOLON = ';'.charCodeAt(0)\nconst ASTERISK = '*'.charCodeAt(0)\nconst COLON = ':'.charCodeAt(0)\nconst AT = '@'.charCodeAt(0)\n\nconst RE_AT_END = /[\\t\\n\\f\\r \"#'()/;[\\\\\\]{}]/g\nconst RE_WORD_END = /[\\t\\n\\f\\r !\"#'():;@[\\\\\\]{}]|\\/(?=\\*)/g\nconst RE_BAD_BRACKET = /.[\\n\"'(/\\\\]/\nconst RE_HEX_ESCAPE = /[\\da-f]/i\n\nmodule.exports = function tokenizer(input, options = {}) {\n  let css = input.css.valueOf()\n  let ignore = options.ignoreErrors\n\n  let code, next, quote, content, escape\n  let escaped, escapePos, prev, n, currentToken\n\n  let length = css.length\n  let pos = 0\n  let buffer = []\n  let returned = []\n\n  function position() {\n    return pos\n  }\n\n  function unclosed(what) {\n    throw input.error('Unclosed ' + what, pos)\n  }\n\n  function endOfFile() {\n    return returned.length === 0 && pos >= length\n  }\n\n  function nextToken(opts) {\n    if (returned.length) return returned.pop()\n    if (pos >= length) return\n\n    let ignoreUnclosed = opts ? opts.ignoreUnclosed : false\n\n    code = css.charCodeAt(pos)\n\n    switch (code) {\n      case NEWLINE:\n      case SPACE:\n      case TAB:\n      case CR:\n      case FEED: {\n        next = pos\n        do {\n          next += 1\n          code = css.charCodeAt(next)\n        } while (\n          code === SPACE ||\n          code === NEWLINE ||\n          code === TAB ||\n          code === CR ||\n          code === FEED\n        )\n\n        currentToken = ['space', css.slice(pos, next)]\n        pos = next - 1\n        break\n      }\n\n      case OPEN_SQUARE:\n      case CLOSE_SQUARE:\n      case OPEN_CURLY:\n      case CLOSE_CURLY:\n      case COLON:\n      case SEMICOLON:\n      case CLOSE_PARENTHESES: {\n        let controlChar = String.fromCharCode(code)\n        currentToken = [controlChar, controlChar, pos]\n        break\n      }\n\n      case OPEN_PARENTHESES: {\n        prev = buffer.length ? buffer.pop()[1] : ''\n        n = css.charCodeAt(pos + 1)\n        if (\n          prev === 'url' &&\n          n !== SINGLE_QUOTE &&\n          n !== DOUBLE_QUOTE &&\n          n !== SPACE &&\n          n !== NEWLINE &&\n          n !== TAB &&\n          n !== FEED &&\n          n !== CR\n        ) {\n          next = pos\n          do {\n            escaped = false\n            next = css.indexOf(')', next + 1)\n            if (next === -1) {\n              if (ignore || ignoreUnclosed) {\n                next = pos\n                break\n              } else {\n                unclosed('bracket')\n              }\n            }\n            escapePos = next\n            while (css.charCodeAt(escapePos - 1) === BACKSLASH) {\n              escapePos -= 1\n              escaped = !escaped\n            }\n          } while (escaped)\n\n          currentToken = ['brackets', css.slice(pos, next + 1), pos, next]\n\n          pos = next\n        } else {\n          next = css.indexOf(')', pos + 1)\n          content = css.slice(pos, next + 1)\n\n          if (next === -1 || RE_BAD_BRACKET.test(content)) {\n            currentToken = ['(', '(', pos]\n          } else {\n            currentToken = ['brackets', content, pos, next]\n            pos = next\n          }\n        }\n\n        break\n      }\n\n      case SINGLE_QUOTE:\n      case DOUBLE_QUOTE: {\n        quote = code === SINGLE_QUOTE ? \"'\" : '\"'\n        next = pos\n        do {\n          escaped = false\n          next = css.indexOf(quote, next + 1)\n          if (next === -1) {\n            if (ignore || ignoreUnclosed) {\n              next = pos + 1\n              break\n            } else {\n              unclosed('string')\n            }\n          }\n          escapePos = next\n          while (css.charCodeAt(escapePos - 1) === BACKSLASH) {\n            escapePos -= 1\n            escaped = !escaped\n          }\n        } while (escaped)\n\n        currentToken = ['string', css.slice(pos, next + 1), pos, next]\n        pos = next\n        break\n      }\n\n      case AT: {\n        RE_AT_END.lastIndex = pos + 1\n        RE_AT_END.test(css)\n        if (RE_AT_END.lastIndex === 0) {\n          next = css.length - 1\n        } else {\n          next = RE_AT_END.lastIndex - 2\n        }\n\n        currentToken = ['at-word', css.slice(pos, next + 1), pos, next]\n\n        pos = next\n        break\n      }\n\n      case BACKSLASH: {\n        next = pos\n        escape = true\n        while (css.charCodeAt(next + 1) === BACKSLASH) {\n          next += 1\n          escape = !escape\n        }\n        code = css.charCodeAt(next + 1)\n        if (\n          escape &&\n          code !== SLASH &&\n          code !== SPACE &&\n          code !== NEWLINE &&\n          code !== TAB &&\n          code !== CR &&\n          code !== FEED\n        ) {\n          next += 1\n          if (RE_HEX_ESCAPE.test(css.charAt(next))) {\n            while (RE_HEX_ESCAPE.test(css.charAt(next + 1))) {\n              next += 1\n            }\n            if (css.charCodeAt(next + 1) === SPACE) {\n              next += 1\n            }\n          }\n        }\n\n        currentToken = ['word', css.slice(pos, next + 1), pos, next]\n\n        pos = next\n        break\n      }\n\n      default: {\n        if (code === SLASH && css.charCodeAt(pos + 1) === ASTERISK) {\n          next = css.indexOf('*/', pos + 2) + 1\n          if (next === 0) {\n            if (ignore || ignoreUnclosed) {\n              next = css.length\n            } else {\n              unclosed('comment')\n            }\n          }\n\n          currentToken = ['comment', css.slice(pos, next + 1), pos, next]\n          pos = next\n        } else {\n          RE_WORD_END.lastIndex = pos + 1\n          RE_WORD_END.test(css)\n          if (RE_WORD_END.lastIndex === 0) {\n            next = css.length - 1\n          } else {\n            next = RE_WORD_END.lastIndex - 2\n          }\n\n          currentToken = ['word', css.slice(pos, next + 1), pos, next]\n          buffer.push(currentToken)\n          pos = next\n        }\n\n        break\n      }\n    }\n\n    pos++\n    return currentToken\n  }\n\n  function back(token) {\n    returned.push(token)\n  }\n\n  return {\n    back,\n    nextToken,\n    endOfFile,\n    position\n  }\n}\n","/* eslint-disable no-console */\n'use strict'\n\nlet printed = {}\n\nmodule.exports = function warnOnce(message) {\n  if (printed[message]) return\n  printed[message] = true\n\n  if (typeof console !== 'undefined' && console.warn) {\n    console.warn(message)\n  }\n}\n","'use strict'\n\nclass Warning {\n  constructor(text, opts = {}) {\n    this.type = 'warning'\n    this.text = text\n\n    if (opts.node && opts.node.source) {\n      let range = opts.node.rangeBy(opts)\n      this.line = range.start.line\n      this.column = range.start.column\n      this.endLine = range.end.line\n      this.endColumn = range.end.column\n    }\n\n    for (let opt in opts) this[opt] = opts[opt]\n  }\n\n  toString() {\n    if (this.node) {\n      return this.node.error(this.text, {\n        plugin: this.plugin,\n        index: this.index,\n        word: this.word\n      }).message\n    }\n\n    if (this.plugin) {\n      return this.plugin + ': ' + this.text\n    }\n\n    return this.text\n  }\n}\n\nmodule.exports = Warning\nWarning.default = Warning\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bigint: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = require('react-is');\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\n            t[p[i]] = s[p[i]];\n    return t;\n};\nexports.__esModule = true;\nvar React = require(\"react\");\nvar PropTypes = require(\"prop-types\");\nvar autosize = require(\"autosize\");\nvar _getLineHeight = require(\"line-height\");\nvar getLineHeight = _getLineHeight;\nvar RESIZED = \"autosize:resized\";\n/**\n * A light replacement for built-in textarea component\n * which automaticaly adjusts its height to match the content\n */\nvar TextareaAutosizeClass = /** @class */ (function (_super) {\n    __extends(TextareaAutosizeClass, _super);\n    function TextareaAutosizeClass() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.state = {\n            lineHeight: null\n        };\n        _this.textarea = null;\n        _this.onResize = function (e) {\n            if (_this.props.onResize) {\n                _this.props.onResize(e);\n            }\n        };\n        _this.updateLineHeight = function () {\n            if (_this.textarea) {\n                _this.setState({\n                    lineHeight: getLineHeight(_this.textarea)\n                });\n            }\n        };\n        _this.onChange = function (e) {\n            var onChange = _this.props.onChange;\n            _this.currentValue = e.currentTarget.value;\n            onChange && onChange(e);\n        };\n        return _this;\n    }\n    TextareaAutosizeClass.prototype.componentDidMount = function () {\n        var _this = this;\n        var _a = this.props, maxRows = _a.maxRows, async = _a.async;\n        if (typeof maxRows === \"number\") {\n            this.updateLineHeight();\n        }\n        if (typeof maxRows === \"number\" || async) {\n            /*\n              the defer is needed to:\n                - force \"autosize\" to activate the scrollbar when this.props.maxRows is passed\n                - support StyledComponents (see #71)\n            */\n            setTimeout(function () { return _this.textarea && autosize(_this.textarea); });\n        }\n        else {\n            this.textarea && autosize(this.textarea);\n        }\n        if (this.textarea) {\n            this.textarea.addEventListener(RESIZED, this.onResize);\n        }\n    };\n    TextareaAutosizeClass.prototype.componentWillUnmount = function () {\n        if (this.textarea) {\n            this.textarea.removeEventListener(RESIZED, this.onResize);\n            autosize.destroy(this.textarea);\n        }\n    };\n    TextareaAutosizeClass.prototype.render = function () {\n        var _this = this;\n        var _a = this, _b = _a.props, onResize = _b.onResize, maxRows = _b.maxRows, onChange = _b.onChange, style = _b.style, innerRef = _b.innerRef, children = _b.children, props = __rest(_b, [\"onResize\", \"maxRows\", \"onChange\", \"style\", \"innerRef\", \"children\"]), lineHeight = _a.state.lineHeight;\n        var maxHeight = maxRows && lineHeight ? lineHeight * maxRows : null;\n        return (React.createElement(\"textarea\", __assign({}, props, { onChange: this.onChange, style: maxHeight ? __assign({}, style, { maxHeight: maxHeight }) : style, ref: function (element) {\n                _this.textarea = element;\n                if (typeof _this.props.innerRef === 'function') {\n                    _this.props.innerRef(element);\n                }\n                else if (_this.props.innerRef) {\n                    _this.props.innerRef.current = element;\n                }\n            } }), children));\n    };\n    TextareaAutosizeClass.prototype.componentDidUpdate = function () {\n        this.textarea && autosize.update(this.textarea);\n    };\n    TextareaAutosizeClass.defaultProps = {\n        rows: 1,\n        async: false\n    };\n    TextareaAutosizeClass.propTypes = {\n        rows: PropTypes.number,\n        maxRows: PropTypes.number,\n        onResize: PropTypes.func,\n        innerRef: PropTypes.any,\n        async: PropTypes.bool\n    };\n    return TextareaAutosizeClass;\n}(React.Component));\nexports.TextareaAutosize = React.forwardRef(function (props, ref) {\n    return React.createElement(TextareaAutosizeClass, __assign({}, props, { innerRef: ref }));\n});\n","\"use strict\";\nexports.__esModule = true;\nvar TextareaAutosize_1 = require(\"./TextareaAutosize\");\nexports[\"default\"] = TextareaAutosize_1.TextareaAutosize;\n","var characterMap = {\n\t\"\": \"A\",\n\t\"\": \"A\",\n\t\"\": \"A\",\n\t\"\": \"A\",\n\t\"\": \"A\",\n\t\"\": \"A\",\n\t\"\": \"A\",\n\t\"\": \"A\",\n\t\"\": \"A\",\n\t\"\": \"A\",\n\t\"\": \"A\",\n\t\"\": \"AE\",\n\t\"\": \"A\",\n\t\"\": \"A\",\n\t\"\": \"A\",\n\t\"\": \"A\",\n\t\"\": \"A\",\n\t\"\": \"A\",\n\t\"\": \"A\",\n\t\"\": \"A\",\n\t\"\": \"C\",\n\t\"\": \"C\",\n\t\"\": \"E\",\n\t\"\": \"E\",\n\t\"\": \"E\",\n\t\"\": \"E\",\n\t\"\": \"E\",\n\t\"\": \"E\",\n\t\"\": \"E\",\n\t\"\": \"E\",\n\t\"\": \"E\",\n\t\"\": \"E\",\n\t\"\": \"E\",\n\t\"\": \"E\",\n\t\"\": \"E\",\n\t\"\": \"E\",\n\t\"\": \"E\",\n\t\"\": \"E\",\n\t\"\": \"I\",\n\t\"\": \"I\",\n\t\"\": \"I\",\n\t\"\": \"I\",\n\t\"\": \"I\",\n\t\"\": \"I\",\n\t\"\": \"I\",\n\t\"\": \"I\",\n\t\"\": \"D\",\n\t\"\": \"N\",\n\t\"\": \"O\",\n\t\"\": \"O\",\n\t\"\": \"O\",\n\t\"\": \"O\",\n\t\"\": \"O\",\n\t\"\": \"O\",\n\t\"\": \"O\",\n\t\"\": \"O\",\n\t\"\": \"O\",\n\t\"\": \"O\",\n\t\"\": \"O\",\n\t\"\": \"O\",\n\t\"\": \"O\",\n\t\"\": \"O\",\n\t\"\": \"O\",\n\t\"\": \"O\",\n\t\"\": \"O\",\n\t\"\": \"O\",\n\t\"\": \"O\",\n\t\"\": \"O\",\n\t\"\": \"U\",\n\t\"\": \"U\",\n\t\"\": \"U\",\n\t\"\": \"U\",\n\t\"\": \"U\",\n\t\"\": \"U\",\n\t\"\": \"U\",\n\t\"\": \"U\",\n\t\"\": \"U\",\n\t\"\": \"Y\",\n\t\"\": \"a\",\n\t\"\": \"a\",\n\t\"\": \"a\",\n\t\"\": \"a\",\n\t\"\": \"a\",\n\t\"\": \"a\",\n\t\"\": \"a\",\n\t\"\": \"a\",\n\t\"\": \"a\",\n\t\"\": \"a\",\n\t\"\": \"a\",\n\t\"\": \"ae\",\n\t\"\": \"a\",\n\t\"\": \"a\",\n\t\"\": \"a\",\n\t\"\": \"a\",\n\t\"\": \"a\",\n\t\"\": \"a\",\n\t\"\": \"a\",\n\t\"\": \"a\",\n\t\"\": \"c\",\n\t\"\": \"c\",\n\t\"\": \"e\",\n\t\"\": \"e\",\n\t\"\": \"e\",\n\t\"\": \"e\",\n\t\"\": \"e\",\n\t\"\": \"e\",\n\t\"\": \"e\",\n\t\"\": \"e\",\n\t\"\": \"e\",\n\t\"\": \"e\",\n\t\"\": \"e\",\n\t\"\": \"e\",\n\t\"\": \"e\",\n\t\"\": \"e\",\n\t\"\": \"e\",\n\t\"\": \"e\",\n\t\"\": \"i\",\n\t\"\": \"i\",\n\t\"\": \"i\",\n\t\"\": \"i\",\n\t\"\": \"i\",\n\t\"\": \"i\",\n\t\"\": \"i\",\n\t\"\": \"i\",\n\t\"\": \"d\",\n\t\"\": \"n\",\n\t\"\": \"o\",\n\t\"\": \"o\",\n\t\"\": \"o\",\n\t\"\": \"o\",\n\t\"\": \"o\",\n\t\"\": \"o\",\n\t\"\": \"o\",\n\t\"\": \"o\",\n\t\"\": \"o\",\n\t\"\": \"o\",\n\t\"\": \"o\",\n\t\"\": \"o\",\n\t\"\": \"o\",\n\t\"\": \"o\",\n\t\"\": \"o\",\n\t\"\": \"o\",\n\t\"\": \"o\",\n\t\"\": \"o\",\n\t\"\": \"o\",\n\t\"\": \"o\",\n\t\"\": \"u\",\n\t\"\": \"u\",\n\t\"\": \"u\",\n\t\"\": \"u\",\n\t\"\": \"u\",\n\t\"\": \"u\",\n\t\"\": \"u\",\n\t\"\": \"u\",\n\t\"\": \"u\",\n\t\"\": \"y\",\n\t\"\": \"y\",\n\t\"\": \"A\",\n\t\"\": \"a\",\n\t\"\": \"A\",\n\t\"\": \"a\",\n\t\"\": \"A\",\n\t\"\": \"a\",\n\t\"\": \"C\",\n\t\"\": \"c\",\n\t\"\": \"C\",\n\t\"\": \"c\",\n\t\"\": \"C\",\n\t\"\": \"c\",\n\t\"\": \"C\",\n\t\"\": \"c\",\n\t\"C\": \"C\",\n\t\"c\": \"c\",\n\t\"\": \"D\",\n\t\"\": \"d\",\n\t\"\": \"D\",\n\t\"\": \"d\",\n\t\"\": \"E\",\n\t\"\": \"e\",\n\t\"\": \"E\",\n\t\"\": \"e\",\n\t\"\": \"E\",\n\t\"\": \"e\",\n\t\"\": \"E\",\n\t\"\": \"e\",\n\t\"\": \"E\",\n\t\"\": \"e\",\n\t\"\": \"G\",\n\t\"\": \"G\",\n\t\"\": \"g\",\n\t\"\": \"g\",\n\t\"\": \"G\",\n\t\"\": \"g\",\n\t\"\": \"G\",\n\t\"\": \"g\",\n\t\"\": \"G\",\n\t\"\": \"g\",\n\t\"\": \"H\",\n\t\"\": \"h\",\n\t\"\": \"H\",\n\t\"\": \"h\",\n\t\"\": \"H\",\n\t\"\": \"h\",\n\t\"\": \"I\",\n\t\"\": \"i\",\n\t\"\": \"I\",\n\t\"\": \"i\",\n\t\"\": \"I\",\n\t\"\": \"i\",\n\t\"\": \"I\",\n\t\"\": \"i\",\n\t\"\": \"I\",\n\t\"\": \"i\",\n\t\"\": \"IJ\",\n\t\"\": \"ij\",\n\t\"\": \"J\",\n\t\"\": \"j\",\n\t\"\": \"K\",\n\t\"\": \"k\",\n\t\"\": \"K\",\n\t\"\": \"k\",\n\t\"K\": \"K\",\n\t\"k\": \"k\",\n\t\"\": \"L\",\n\t\"\": \"l\",\n\t\"\": \"L\",\n\t\"\": \"l\",\n\t\"\": \"L\",\n\t\"\": \"l\",\n\t\"\": \"L\",\n\t\"\": \"l\",\n\t\"\": \"l\",\n\t\"\": \"l\",\n\t\"\": \"M\",\n\t\"\": \"m\",\n\t\"M\": \"M\",\n\t\"m\": \"m\",\n\t\"\": \"N\",\n\t\"\": \"n\",\n\t\"\": \"N\",\n\t\"\": \"n\",\n\t\"\": \"N\",\n\t\"\": \"n\",\n\t\"\": \"n\",\n\t\"N\": \"N\",\n\t\"n\": \"n\",\n\t\"\": \"O\",\n\t\"\": \"o\",\n\t\"\": \"O\",\n\t\"\": \"o\",\n\t\"\": \"O\",\n\t\"\": \"o\",\n\t\"\": \"OE\",\n\t\"\": \"oe\",\n\t\"P\": \"P\",\n\t\"p\": \"p\",\n\t\"\": \"R\",\n\t\"\": \"r\",\n\t\"\": \"R\",\n\t\"\": \"r\",\n\t\"\": \"R\",\n\t\"\": \"r\",\n\t\"R\": \"R\",\n\t\"r\": \"r\",\n\t\"\": \"R\",\n\t\"\": \"r\",\n\t\"\": \"S\",\n\t\"\": \"s\",\n\t\"\": \"S\",\n\t\"\": \"s\",\n\t\"\": \"S\",\n\t\"\": \"S\",\n\t\"\": \"s\",\n\t\"\": \"s\",\n\t\"\": \"S\",\n\t\"\": \"s\",\n\t\"\": \"T\",\n\t\"\": \"t\",\n\t\"\": \"t\",\n\t\"\": \"T\",\n\t\"\": \"T\",\n\t\"\": \"t\",\n\t\"\": \"T\",\n\t\"\": \"t\",\n\t\"T\": \"T\",\n\t\"t\": \"t\",\n\t\"\": \"U\",\n\t\"\": \"u\",\n\t\"\": \"U\",\n\t\"\": \"u\",\n\t\"\": \"U\",\n\t\"\": \"u\",\n\t\"\": \"U\",\n\t\"\": \"u\",\n\t\"\": \"U\",\n\t\"\": \"u\",\n\t\"\": \"U\",\n\t\"\": \"u\",\n\t\"\": \"U\",\n\t\"\": \"u\",\n\t\"V\": \"V\",\n\t\"v\": \"v\",\n\t\"\": \"W\",\n\t\"\": \"w\",\n\t\"\": \"W\",\n\t\"\": \"w\",\n\t\"X\": \"X\",\n\t\"x\": \"x\",\n\t\"\": \"Y\",\n\t\"\": \"y\",\n\t\"\": \"Y\",\n\t\"Y\": \"Y\",\n\t\"y\": \"y\",\n\t\"\": \"Z\",\n\t\"\": \"z\",\n\t\"\": \"Z\",\n\t\"\": \"z\",\n\t\"\": \"Z\",\n\t\"\": \"z\",\n\t\"\": \"s\",\n\t\"\": \"f\",\n\t\"\": \"O\",\n\t\"\": \"o\",\n\t\"\": \"U\",\n\t\"\": \"u\",\n\t\"\": \"A\",\n\t\"\": \"a\",\n\t\"\": \"I\",\n\t\"\": \"i\",\n\t\"\": \"O\",\n\t\"\": \"o\",\n\t\"\": \"U\",\n\t\"\": \"u\",\n\t\"\": \"U\",\n\t\"\": \"u\",\n\t\"\": \"U\",\n\t\"\": \"u\",\n\t\"\": \"U\",\n\t\"\": \"u\",\n\t\"\": \"U\",\n\t\"\": \"u\",\n\t\"\": \"U\",\n\t\"\": \"u\",\n\t\"\": \"U\",\n\t\"\": \"u\",\n\t\"\": \"A\",\n\t\"\": \"a\",\n\t\"\": \"AE\",\n\t\"\": \"ae\",\n\t\"\": \"O\",\n\t\"\": \"o\",\n\t\"\": \"TH\",\n\t\"\": \"th\",\n\t\"\": \"P\",\n\t\"\": \"p\",\n\t\"\": \"S\",\n\t\"\": \"s\",\n\t\"X\": \"X\",\n\t\"x\": \"x\",\n\t\"\": \"\",\n\t\"\": \"\",\n\t\"\": \"\",\n\t\"\": \"\",\n\t\"A\": \"A\",\n\t\"a\": \"a\",\n\t\"E\": \"E\",\n\t\"e\": \"e\",\n\t\"I\": \"I\",\n\t\"i\": \"i\",\n\t\"\": \"N\",\n\t\"\": \"n\",\n\t\"\": \"O\",\n\t\"\": \"o\",\n\t\"\": \"O\",\n\t\"\": \"o\",\n\t\"\": \"U\",\n\t\"\": \"u\",\n\t\"\": \"W\",\n\t\"\": \"w\",\n\t\"\": \"Y\",\n\t\"\": \"y\",\n\t\"\": \"A\",\n\t\"\": \"a\",\n\t\"\": \"E\",\n\t\"\": \"e\",\n\t\"\": \"I\",\n\t\"\": \"i\",\n\t\"\": \"O\",\n\t\"\": \"o\",\n\t\"\": \"R\",\n\t\"\": \"r\",\n\t\"\": \"U\",\n\t\"\": \"u\",\n\t\"B\": \"B\",\n\t\"b\": \"b\",\n\t\"\": \"C\",\n\t\"\": \"c\",\n\t\"\": \"E\",\n\t\"\": \"e\",\n\t\"F\": \"F\",\n\t\"f\": \"f\",\n\t\"\": \"G\",\n\t\"\": \"g\",\n\t\"\": \"H\",\n\t\"\": \"h\",\n\t\"J\": \"J\",\n\t\"\": \"j\",\n\t\"\": \"K\",\n\t\"\": \"k\",\n\t\"M\": \"M\",\n\t\"m\": \"m\",\n\t\"P\": \"P\",\n\t\"p\": \"p\",\n\t\"Q\": \"Q\",\n\t\"q\": \"q\",\n\t\"\": \"R\",\n\t\"\": \"r\",\n\t\"\": \"S\",\n\t\"\": \"s\",\n\t\"V\": \"V\",\n\t\"v\": \"v\",\n\t\"W\": \"W\",\n\t\"w\": \"w\",\n\t\"X\": \"X\",\n\t\"x\": \"x\",\n\t\"Y\": \"Y\",\n\t\"y\": \"y\",\n\t\"A\": \"A\",\n\t\"a\": \"a\",\n\t\"B\": \"B\",\n\t\"b\": \"b\",\n\t\"\": \"D\",\n\t\"\": \"d\",\n\t\"\": \"E\",\n\t\"\": \"e\",\n\t\"\": \"E\",\n\t\"\": \"e\",\n\t\"\": \"H\",\n\t\"\": \"h\",\n\t\"I\": \"I\",\n\t\"i\": \"i\",\n\t\"\": \"I\",\n\t\"\": \"i\",\n\t\"M\": \"M\",\n\t\"m\": \"m\",\n\t\"O\": \"O\",\n\t\"o\": \"o\",\n\t\"Q\": \"Q\",\n\t\"q\": \"q\",\n\t\"U\": \"U\",\n\t\"u\": \"u\",\n\t\"X\": \"X\",\n\t\"x\": \"x\",\n\t\"Z\": \"Z\",\n\t\"z\": \"z\",\n\t\"\":\"\",\n\t\"\":\"\",\n\t\"\":\"\",\n\t\"\":\"\",\n};\n\nvar chars = Object.keys(characterMap).join('|');\nvar allAccents = new RegExp(chars, 'g');\nvar firstAccent = new RegExp(chars, '');\n\nfunction matcher(match) {\n\treturn characterMap[match];\n}\n\nvar removeAccents = function(string) {\n\treturn string.replace(allAccents, matcher);\n};\n\nvar hasAccents = function(string) {\n\treturn !!string.match(firstAccent);\n};\n\nmodule.exports = removeAccents;\nmodule.exports.has = hasAccents;\nmodule.exports.remove = removeAccents;\n","'use strict'\n\nlet Container = require('./container')\n\nclass AtRule extends Container {\n  constructor(defaults) {\n    super(defaults)\n    this.type = 'atrule'\n  }\n\n  append(...children) {\n    if (!this.proxyOf.nodes) this.nodes = []\n    return super.append(...children)\n  }\n\n  prepend(...children) {\n    if (!this.proxyOf.nodes) this.nodes = []\n    return super.prepend(...children)\n  }\n}\n\nmodule.exports = AtRule\nAtRule.default = AtRule\n\nContainer.registerAtRule(AtRule)\n","'use strict'\n\nlet Node = require('./node')\n\nclass Comment extends Node {\n  constructor(defaults) {\n    super(defaults)\n    this.type = 'comment'\n  }\n}\n\nmodule.exports = Comment\nComment.default = Comment\n","'use strict'\n\nlet { isClean, my } = require('./symbols')\nlet Declaration = require('./declaration')\nlet Comment = require('./comment')\nlet Node = require('./node')\n\nlet parse, Rule, AtRule, Root\n\nfunction cleanSource(nodes) {\n  return nodes.map(i => {\n    if (i.nodes) i.nodes = cleanSource(i.nodes)\n    delete i.source\n    return i\n  })\n}\n\nfunction markDirtyUp(node) {\n  node[isClean] = false\n  if (node.proxyOf.nodes) {\n    for (let i of node.proxyOf.nodes) {\n      markDirtyUp(i)\n    }\n  }\n}\n\nclass Container extends Node {\n  append(...children) {\n    for (let child of children) {\n      let nodes = this.normalize(child, this.last)\n      for (let node of nodes) this.proxyOf.nodes.push(node)\n    }\n\n    this.markDirty()\n\n    return this\n  }\n\n  cleanRaws(keepBetween) {\n    super.cleanRaws(keepBetween)\n    if (this.nodes) {\n      for (let node of this.nodes) node.cleanRaws(keepBetween)\n    }\n  }\n\n  each(callback) {\n    if (!this.proxyOf.nodes) return undefined\n    let iterator = this.getIterator()\n\n    let index, result\n    while (this.indexes[iterator] < this.proxyOf.nodes.length) {\n      index = this.indexes[iterator]\n      result = callback(this.proxyOf.nodes[index], index)\n      if (result === false) break\n\n      this.indexes[iterator] += 1\n    }\n\n    delete this.indexes[iterator]\n    return result\n  }\n\n  every(condition) {\n    return this.nodes.every(condition)\n  }\n\n  getIterator() {\n    if (!this.lastEach) this.lastEach = 0\n    if (!this.indexes) this.indexes = {}\n\n    this.lastEach += 1\n    let iterator = this.lastEach\n    this.indexes[iterator] = 0\n\n    return iterator\n  }\n\n  getProxyProcessor() {\n    return {\n      get(node, prop) {\n        if (prop === 'proxyOf') {\n          return node\n        } else if (!node[prop]) {\n          return node[prop]\n        } else if (\n          prop === 'each' ||\n          (typeof prop === 'string' && prop.startsWith('walk'))\n        ) {\n          return (...args) => {\n            return node[prop](\n              ...args.map(i => {\n                if (typeof i === 'function') {\n                  return (child, index) => i(child.toProxy(), index)\n                } else {\n                  return i\n                }\n              })\n            )\n          }\n        } else if (prop === 'every' || prop === 'some') {\n          return cb => {\n            return node[prop]((child, ...other) =>\n              cb(child.toProxy(), ...other)\n            )\n          }\n        } else if (prop === 'root') {\n          return () => node.root().toProxy()\n        } else if (prop === 'nodes') {\n          return node.nodes.map(i => i.toProxy())\n        } else if (prop === 'first' || prop === 'last') {\n          return node[prop].toProxy()\n        } else {\n          return node[prop]\n        }\n      },\n\n      set(node, prop, value) {\n        if (node[prop] === value) return true\n        node[prop] = value\n        if (prop === 'name' || prop === 'params' || prop === 'selector') {\n          node.markDirty()\n        }\n        return true\n      }\n    }\n  }\n\n  index(child) {\n    if (typeof child === 'number') return child\n    if (child.proxyOf) child = child.proxyOf\n    return this.proxyOf.nodes.indexOf(child)\n  }\n\n  insertAfter(exist, add) {\n    let existIndex = this.index(exist)\n    let nodes = this.normalize(add, this.proxyOf.nodes[existIndex]).reverse()\n    existIndex = this.index(exist)\n    for (let node of nodes) this.proxyOf.nodes.splice(existIndex + 1, 0, node)\n\n    let index\n    for (let id in this.indexes) {\n      index = this.indexes[id]\n      if (existIndex < index) {\n        this.indexes[id] = index + nodes.length\n      }\n    }\n\n    this.markDirty()\n\n    return this\n  }\n\n  insertBefore(exist, add) {\n    let existIndex = this.index(exist)\n    let type = existIndex === 0 ? 'prepend' : false\n    let nodes = this.normalize(add, this.proxyOf.nodes[existIndex], type).reverse()\n    existIndex = this.index(exist)\n    for (let node of nodes) this.proxyOf.nodes.splice(existIndex, 0, node)\n\n    let index\n    for (let id in this.indexes) {\n      index = this.indexes[id]\n      if (existIndex <= index) {\n        this.indexes[id] = index + nodes.length\n      }\n    }\n\n    this.markDirty()\n\n    return this\n  }\n\n  normalize(nodes, sample) {\n    if (typeof nodes === 'string') {\n      nodes = cleanSource(parse(nodes).nodes)\n    } else if (typeof nodes === 'undefined') {\n      nodes = []\n    } else if (Array.isArray(nodes)) {\n      nodes = nodes.slice(0)\n      for (let i of nodes) {\n        if (i.parent) i.parent.removeChild(i, 'ignore')\n      }\n    } else if (nodes.type === 'root' && this.type !== 'document') {\n      nodes = nodes.nodes.slice(0)\n      for (let i of nodes) {\n        if (i.parent) i.parent.removeChild(i, 'ignore')\n      }\n    } else if (nodes.type) {\n      nodes = [nodes]\n    } else if (nodes.prop) {\n      if (typeof nodes.value === 'undefined') {\n        throw new Error('Value field is missed in node creation')\n      } else if (typeof nodes.value !== 'string') {\n        nodes.value = String(nodes.value)\n      }\n      nodes = [new Declaration(nodes)]\n    } else if (nodes.selector) {\n      nodes = [new Rule(nodes)]\n    } else if (nodes.name) {\n      nodes = [new AtRule(nodes)]\n    } else if (nodes.text) {\n      nodes = [new Comment(nodes)]\n    } else {\n      throw new Error('Unknown node type in node creation')\n    }\n\n    let processed = nodes.map(i => {\n      /* c8 ignore next */\n      if (!i[my]) Container.rebuild(i)\n      i = i.proxyOf\n      if (i.parent) i.parent.removeChild(i)\n      if (i[isClean]) markDirtyUp(i)\n      if (typeof i.raws.before === 'undefined') {\n        if (sample && typeof sample.raws.before !== 'undefined') {\n          i.raws.before = sample.raws.before.replace(/\\S/g, '')\n        }\n      }\n      i.parent = this.proxyOf\n      return i\n    })\n\n    return processed\n  }\n\n  prepend(...children) {\n    children = children.reverse()\n    for (let child of children) {\n      let nodes = this.normalize(child, this.first, 'prepend').reverse()\n      for (let node of nodes) this.proxyOf.nodes.unshift(node)\n      for (let id in this.indexes) {\n        this.indexes[id] = this.indexes[id] + nodes.length\n      }\n    }\n\n    this.markDirty()\n\n    return this\n  }\n\n  push(child) {\n    child.parent = this\n    this.proxyOf.nodes.push(child)\n    return this\n  }\n\n  removeAll() {\n    for (let node of this.proxyOf.nodes) node.parent = undefined\n    this.proxyOf.nodes = []\n\n    this.markDirty()\n\n    return this\n  }\n\n  removeChild(child) {\n    child = this.index(child)\n    this.proxyOf.nodes[child].parent = undefined\n    this.proxyOf.nodes.splice(child, 1)\n\n    let index\n    for (let id in this.indexes) {\n      index = this.indexes[id]\n      if (index >= child) {\n        this.indexes[id] = index - 1\n      }\n    }\n\n    this.markDirty()\n\n    return this\n  }\n\n  replaceValues(pattern, opts, callback) {\n    if (!callback) {\n      callback = opts\n      opts = {}\n    }\n\n    this.walkDecls(decl => {\n      if (opts.props && !opts.props.includes(decl.prop)) return\n      if (opts.fast && !decl.value.includes(opts.fast)) return\n\n      decl.value = decl.value.replace(pattern, callback)\n    })\n\n    this.markDirty()\n\n    return this\n  }\n\n  some(condition) {\n    return this.nodes.some(condition)\n  }\n\n  walk(callback) {\n    return this.each((child, i) => {\n      let result\n      try {\n        result = callback(child, i)\n      } catch (e) {\n        throw child.addToError(e)\n      }\n      if (result !== false && child.walk) {\n        result = child.walk(callback)\n      }\n\n      return result\n    })\n  }\n\n  walkAtRules(name, callback) {\n    if (!callback) {\n      callback = name\n      return this.walk((child, i) => {\n        if (child.type === 'atrule') {\n          return callback(child, i)\n        }\n      })\n    }\n    if (name instanceof RegExp) {\n      return this.walk((child, i) => {\n        if (child.type === 'atrule' && name.test(child.name)) {\n          return callback(child, i)\n        }\n      })\n    }\n    return this.walk((child, i) => {\n      if (child.type === 'atrule' && child.name === name) {\n        return callback(child, i)\n      }\n    })\n  }\n\n  walkComments(callback) {\n    return this.walk((child, i) => {\n      if (child.type === 'comment') {\n        return callback(child, i)\n      }\n    })\n  }\n\n  walkDecls(prop, callback) {\n    if (!callback) {\n      callback = prop\n      return this.walk((child, i) => {\n        if (child.type === 'decl') {\n          return callback(child, i)\n        }\n      })\n    }\n    if (prop instanceof RegExp) {\n      return this.walk((child, i) => {\n        if (child.type === 'decl' && prop.test(child.prop)) {\n          return callback(child, i)\n        }\n      })\n    }\n    return this.walk((child, i) => {\n      if (child.type === 'decl' && child.prop === prop) {\n        return callback(child, i)\n      }\n    })\n  }\n\n  walkRules(selector, callback) {\n    if (!callback) {\n      callback = selector\n\n      return this.walk((child, i) => {\n        if (child.type === 'rule') {\n          return callback(child, i)\n        }\n      })\n    }\n    if (selector instanceof RegExp) {\n      return this.walk((child, i) => {\n        if (child.type === 'rule' && selector.test(child.selector)) {\n          return callback(child, i)\n        }\n      })\n    }\n    return this.walk((child, i) => {\n      if (child.type === 'rule' && child.selector === selector) {\n        return callback(child, i)\n      }\n    })\n  }\n\n  get first() {\n    if (!this.proxyOf.nodes) return undefined\n    return this.proxyOf.nodes[0]\n  }\n\n  get last() {\n    if (!this.proxyOf.nodes) return undefined\n    return this.proxyOf.nodes[this.proxyOf.nodes.length - 1]\n  }\n}\n\nContainer.registerParse = dependant => {\n  parse = dependant\n}\n\nContainer.registerRule = dependant => {\n  Rule = dependant\n}\n\nContainer.registerAtRule = dependant => {\n  AtRule = dependant\n}\n\nContainer.registerRoot = dependant => {\n  Root = dependant\n}\n\nmodule.exports = Container\nContainer.default = Container\n\n/* c8 ignore start */\nContainer.rebuild = node => {\n  if (node.type === 'atrule') {\n    Object.setPrototypeOf(node, AtRule.prototype)\n  } else if (node.type === 'rule') {\n    Object.setPrototypeOf(node, Rule.prototype)\n  } else if (node.type === 'decl') {\n    Object.setPrototypeOf(node, Declaration.prototype)\n  } else if (node.type === 'comment') {\n    Object.setPrototypeOf(node, Comment.prototype)\n  } else if (node.type === 'root') {\n    Object.setPrototypeOf(node, Root.prototype)\n  }\n\n  node[my] = true\n\n  if (node.nodes) {\n    node.nodes.forEach(child => {\n      Container.rebuild(child)\n    })\n  }\n}\n/* c8 ignore stop */\n","'use strict'\n\nlet pico = require('picocolors')\n\nlet terminalHighlight = require('./terminal-highlight')\n\nclass CssSyntaxError extends Error {\n  constructor(message, line, column, source, file, plugin) {\n    super(message)\n    this.name = 'CssSyntaxError'\n    this.reason = message\n\n    if (file) {\n      this.file = file\n    }\n    if (source) {\n      this.source = source\n    }\n    if (plugin) {\n      this.plugin = plugin\n    }\n    if (typeof line !== 'undefined' && typeof column !== 'undefined') {\n      if (typeof line === 'number') {\n        this.line = line\n        this.column = column\n      } else {\n        this.line = line.line\n        this.column = line.column\n        this.endLine = column.line\n        this.endColumn = column.column\n      }\n    }\n\n    this.setMessage()\n\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, CssSyntaxError)\n    }\n  }\n\n  setMessage() {\n    this.message = this.plugin ? this.plugin + ': ' : ''\n    this.message += this.file ? this.file : '<css input>'\n    if (typeof this.line !== 'undefined') {\n      this.message += ':' + this.line + ':' + this.column\n    }\n    this.message += ': ' + this.reason\n  }\n\n  showSourceCode(color) {\n    if (!this.source) return ''\n\n    let css = this.source\n    if (color == null) color = pico.isColorSupported\n    if (terminalHighlight) {\n      if (color) css = terminalHighlight(css)\n    }\n\n    let lines = css.split(/\\r?\\n/)\n    let start = Math.max(this.line - 3, 0)\n    let end = Math.min(this.line + 2, lines.length)\n\n    let maxWidth = String(end).length\n\n    let mark, aside\n    if (color) {\n      let { bold, gray, red } = pico.createColors(true)\n      mark = text => bold(red(text))\n      aside = text => gray(text)\n    } else {\n      mark = aside = str => str\n    }\n\n    return lines\n      .slice(start, end)\n      .map((line, index) => {\n        let number = start + 1 + index\n        let gutter = ' ' + (' ' + number).slice(-maxWidth) + ' | '\n        if (number === this.line) {\n          let spacing =\n            aside(gutter.replace(/\\d/g, ' ')) +\n            line.slice(0, this.column - 1).replace(/[^\\t]/g, ' ')\n          return mark('>') + aside(gutter) + line + '\\n ' + spacing + mark('^')\n        }\n        return ' ' + aside(gutter) + line\n      })\n      .join('\\n')\n  }\n\n  toString() {\n    let code = this.showSourceCode()\n    if (code) {\n      code = '\\n\\n' + code + '\\n'\n    }\n    return this.name + ': ' + this.message + code\n  }\n}\n\nmodule.exports = CssSyntaxError\nCssSyntaxError.default = CssSyntaxError\n","'use strict'\n\nlet Node = require('./node')\n\nclass Declaration extends Node {\n  constructor(defaults) {\n    if (\n      defaults &&\n      typeof defaults.value !== 'undefined' &&\n      typeof defaults.value !== 'string'\n    ) {\n      defaults = { ...defaults, value: String(defaults.value) }\n    }\n    super(defaults)\n    this.type = 'decl'\n  }\n\n  get variable() {\n    return this.prop.startsWith('--') || this.prop[0] === '$'\n  }\n}\n\nmodule.exports = Declaration\nDeclaration.default = Declaration\n","'use strict'\n\nlet Container = require('./container')\n\nlet LazyResult, Processor\n\nclass Document extends Container {\n  constructor(defaults) {\n    // type needs to be passed to super, otherwise child roots won't be normalized correctly\n    super({ type: 'document', ...defaults })\n\n    if (!this.nodes) {\n      this.nodes = []\n    }\n  }\n\n  toResult(opts = {}) {\n    let lazy = new LazyResult(new Processor(), this, opts)\n\n    return lazy.stringify()\n  }\n}\n\nDocument.registerLazyResult = dependant => {\n  LazyResult = dependant\n}\n\nDocument.registerProcessor = dependant => {\n  Processor = dependant\n}\n\nmodule.exports = Document\nDocument.default = Document\n","'use strict'\n\nlet Declaration = require('./declaration')\nlet PreviousMap = require('./previous-map')\nlet Comment = require('./comment')\nlet AtRule = require('./at-rule')\nlet Input = require('./input')\nlet Root = require('./root')\nlet Rule = require('./rule')\n\nfunction fromJSON(json, inputs) {\n  if (Array.isArray(json)) return json.map(n => fromJSON(n))\n\n  let { inputs: ownInputs, ...defaults } = json\n  if (ownInputs) {\n    inputs = []\n    for (let input of ownInputs) {\n      let inputHydrated = { ...input, __proto__: Input.prototype }\n      if (inputHydrated.map) {\n        inputHydrated.map = {\n          ...inputHydrated.map,\n          __proto__: PreviousMap.prototype\n        }\n      }\n      inputs.push(inputHydrated)\n    }\n  }\n  if (defaults.nodes) {\n    defaults.nodes = json.nodes.map(n => fromJSON(n, inputs))\n  }\n  if (defaults.source) {\n    let { inputId, ...source } = defaults.source\n    defaults.source = source\n    if (inputId != null) {\n      defaults.source.input = inputs[inputId]\n    }\n  }\n  if (defaults.type === 'root') {\n    return new Root(defaults)\n  } else if (defaults.type === 'decl') {\n    return new Declaration(defaults)\n  } else if (defaults.type === 'rule') {\n    return new Rule(defaults)\n  } else if (defaults.type === 'comment') {\n    return new Comment(defaults)\n  } else if (defaults.type === 'atrule') {\n    return new AtRule(defaults)\n  } else {\n    throw new Error('Unknown node type: ' + json.type)\n  }\n}\n\nmodule.exports = fromJSON\nfromJSON.default = fromJSON\n","'use strict'\n\nlet { SourceMapConsumer, SourceMapGenerator } = require('source-map-js')\nlet { fileURLToPath, pathToFileURL } = require('url')\nlet { isAbsolute, resolve } = require('path')\nlet { nanoid } = require('nanoid/non-secure')\n\nlet terminalHighlight = require('./terminal-highlight')\nlet CssSyntaxError = require('./css-syntax-error')\nlet PreviousMap = require('./previous-map')\n\nlet fromOffsetCache = Symbol('fromOffsetCache')\n\nlet sourceMapAvailable = Boolean(SourceMapConsumer && SourceMapGenerator)\nlet pathAvailable = Boolean(resolve && isAbsolute)\n\nclass Input {\n  constructor(css, opts = {}) {\n    if (\n      css === null ||\n      typeof css === 'undefined' ||\n      (typeof css === 'object' && !css.toString)\n    ) {\n      throw new Error(`PostCSS received ${css} instead of CSS string`)\n    }\n\n    this.css = css.toString()\n\n    if (this.css[0] === '\\uFEFF' || this.css[0] === '\\uFFFE') {\n      this.hasBOM = true\n      this.css = this.css.slice(1)\n    } else {\n      this.hasBOM = false\n    }\n\n    if (opts.from) {\n      if (\n        !pathAvailable ||\n        /^\\w+:\\/\\//.test(opts.from) ||\n        isAbsolute(opts.from)\n      ) {\n        this.file = opts.from\n      } else {\n        this.file = resolve(opts.from)\n      }\n    }\n\n    if (pathAvailable && sourceMapAvailable) {\n      let map = new PreviousMap(this.css, opts)\n      if (map.text) {\n        this.map = map\n        let file = map.consumer().file\n        if (!this.file && file) this.file = this.mapResolve(file)\n      }\n    }\n\n    if (!this.file) {\n      this.id = '<input css ' + nanoid(6) + '>'\n    }\n    if (this.map) this.map.file = this.from\n  }\n\n  error(message, line, column, opts = {}) {\n    let result, endLine, endColumn\n\n    if (line && typeof line === 'object') {\n      let start = line\n      let end = column\n      if (typeof start.offset === 'number') {\n        let pos = this.fromOffset(start.offset)\n        line = pos.line\n        column = pos.col\n      } else {\n        line = start.line\n        column = start.column\n      }\n      if (typeof end.offset === 'number') {\n        let pos = this.fromOffset(end.offset)\n        endLine = pos.line\n        endColumn = pos.col\n      } else {\n        endLine = end.line\n        endColumn = end.column\n      }\n    } else if (!column) {\n      let pos = this.fromOffset(line)\n      line = pos.line\n      column = pos.col\n    }\n\n    let origin = this.origin(line, column, endLine, endColumn)\n    if (origin) {\n      result = new CssSyntaxError(\n        message,\n        origin.endLine === undefined\n          ? origin.line\n          : { column: origin.column, line: origin.line },\n        origin.endLine === undefined\n          ? origin.column\n          : { column: origin.endColumn, line: origin.endLine },\n        origin.source,\n        origin.file,\n        opts.plugin\n      )\n    } else {\n      result = new CssSyntaxError(\n        message,\n        endLine === undefined ? line : { column, line },\n        endLine === undefined ? column : { column: endColumn, line: endLine },\n        this.css,\n        this.file,\n        opts.plugin\n      )\n    }\n\n    result.input = { column, endColumn, endLine, line, source: this.css }\n    if (this.file) {\n      if (pathToFileURL) {\n        result.input.url = pathToFileURL(this.file).toString()\n      }\n      result.input.file = this.file\n    }\n\n    return result\n  }\n\n  fromOffset(offset) {\n    let lastLine, lineToIndex\n    if (!this[fromOffsetCache]) {\n      let lines = this.css.split('\\n')\n      lineToIndex = new Array(lines.length)\n      let prevIndex = 0\n\n      for (let i = 0, l = lines.length; i < l; i++) {\n        lineToIndex[i] = prevIndex\n        prevIndex += lines[i].length + 1\n      }\n\n      this[fromOffsetCache] = lineToIndex\n    } else {\n      lineToIndex = this[fromOffsetCache]\n    }\n    lastLine = lineToIndex[lineToIndex.length - 1]\n\n    let min = 0\n    if (offset >= lastLine) {\n      min = lineToIndex.length - 1\n    } else {\n      let max = lineToIndex.length - 2\n      let mid\n      while (min < max) {\n        mid = min + ((max - min) >> 1)\n        if (offset < lineToIndex[mid]) {\n          max = mid - 1\n        } else if (offset >= lineToIndex[mid + 1]) {\n          min = mid + 1\n        } else {\n          min = mid\n          break\n        }\n      }\n    }\n    return {\n      col: offset - lineToIndex[min] + 1,\n      line: min + 1\n    }\n  }\n\n  mapResolve(file) {\n    if (/^\\w+:\\/\\//.test(file)) {\n      return file\n    }\n    return resolve(this.map.consumer().sourceRoot || this.map.root || '.', file)\n  }\n\n  origin(line, column, endLine, endColumn) {\n    if (!this.map) return false\n    let consumer = this.map.consumer()\n\n    let from = consumer.originalPositionFor({ column, line })\n    if (!from.source) return false\n\n    let to\n    if (typeof endLine === 'number') {\n      to = consumer.originalPositionFor({ column: endColumn, line: endLine })\n    }\n\n    let fromUrl\n\n    if (isAbsolute(from.source)) {\n      fromUrl = pathToFileURL(from.source)\n    } else {\n      fromUrl = new URL(\n        from.source,\n        this.map.consumer().sourceRoot || pathToFileURL(this.map.mapFile)\n      )\n    }\n\n    let result = {\n      column: from.column,\n      endColumn: to && to.column,\n      endLine: to && to.line,\n      line: from.line,\n      url: fromUrl.toString()\n    }\n\n    if (fromUrl.protocol === 'file:') {\n      if (fileURLToPath) {\n        result.file = fileURLToPath(fromUrl)\n      } else {\n        /* c8 ignore next 2 */\n        throw new Error(`file: protocol is not available in this PostCSS build`)\n      }\n    }\n\n    let source = consumer.sourceContentFor(from.source)\n    if (source) result.source = source\n\n    return result\n  }\n\n  toJSON() {\n    let json = {}\n    for (let name of ['hasBOM', 'css', 'file', 'id']) {\n      if (this[name] != null) {\n        json[name] = this[name]\n      }\n    }\n    if (this.map) {\n      json.map = { ...this.map }\n      if (json.map.consumerCache) {\n        json.map.consumerCache = undefined\n      }\n    }\n    return json\n  }\n\n  get from() {\n    return this.file || this.id\n  }\n}\n\nmodule.exports = Input\nInput.default = Input\n\nif (terminalHighlight && terminalHighlight.registerInput) {\n  terminalHighlight.registerInput(Input)\n}\n","'use strict'\n\nlet { isClean, my } = require('./symbols')\nlet MapGenerator = require('./map-generator')\nlet stringify = require('./stringify')\nlet Container = require('./container')\nlet Document = require('./document')\nlet warnOnce = require('./warn-once')\nlet Result = require('./result')\nlet parse = require('./parse')\nlet Root = require('./root')\n\nconst TYPE_TO_CLASS_NAME = {\n  atrule: 'AtRule',\n  comment: 'Comment',\n  decl: 'Declaration',\n  document: 'Document',\n  root: 'Root',\n  rule: 'Rule'\n}\n\nconst PLUGIN_PROPS = {\n  AtRule: true,\n  AtRuleExit: true,\n  Comment: true,\n  CommentExit: true,\n  Declaration: true,\n  DeclarationExit: true,\n  Document: true,\n  DocumentExit: true,\n  Once: true,\n  OnceExit: true,\n  postcssPlugin: true,\n  prepare: true,\n  Root: true,\n  RootExit: true,\n  Rule: true,\n  RuleExit: true\n}\n\nconst NOT_VISITORS = {\n  Once: true,\n  postcssPlugin: true,\n  prepare: true\n}\n\nconst CHILDREN = 0\n\nfunction isPromise(obj) {\n  return typeof obj === 'object' && typeof obj.then === 'function'\n}\n\nfunction getEvents(node) {\n  let key = false\n  let type = TYPE_TO_CLASS_NAME[node.type]\n  if (node.type === 'decl') {\n    key = node.prop.toLowerCase()\n  } else if (node.type === 'atrule') {\n    key = node.name.toLowerCase()\n  }\n\n  if (key && node.append) {\n    return [\n      type,\n      type + '-' + key,\n      CHILDREN,\n      type + 'Exit',\n      type + 'Exit-' + key\n    ]\n  } else if (key) {\n    return [type, type + '-' + key, type + 'Exit', type + 'Exit-' + key]\n  } else if (node.append) {\n    return [type, CHILDREN, type + 'Exit']\n  } else {\n    return [type, type + 'Exit']\n  }\n}\n\nfunction toStack(node) {\n  let events\n  if (node.type === 'document') {\n    events = ['Document', CHILDREN, 'DocumentExit']\n  } else if (node.type === 'root') {\n    events = ['Root', CHILDREN, 'RootExit']\n  } else {\n    events = getEvents(node)\n  }\n\n  return {\n    eventIndex: 0,\n    events,\n    iterator: 0,\n    node,\n    visitorIndex: 0,\n    visitors: []\n  }\n}\n\nfunction cleanMarks(node) {\n  node[isClean] = false\n  if (node.nodes) node.nodes.forEach(i => cleanMarks(i))\n  return node\n}\n\nlet postcss = {}\n\nclass LazyResult {\n  constructor(processor, css, opts) {\n    this.stringified = false\n    this.processed = false\n\n    let root\n    if (\n      typeof css === 'object' &&\n      css !== null &&\n      (css.type === 'root' || css.type === 'document')\n    ) {\n      root = cleanMarks(css)\n    } else if (css instanceof LazyResult || css instanceof Result) {\n      root = cleanMarks(css.root)\n      if (css.map) {\n        if (typeof opts.map === 'undefined') opts.map = {}\n        if (!opts.map.inline) opts.map.inline = false\n        opts.map.prev = css.map\n      }\n    } else {\n      let parser = parse\n      if (opts.syntax) parser = opts.syntax.parse\n      if (opts.parser) parser = opts.parser\n      if (parser.parse) parser = parser.parse\n\n      try {\n        root = parser(css, opts)\n      } catch (error) {\n        this.processed = true\n        this.error = error\n      }\n\n      if (root && !root[my]) {\n        /* c8 ignore next 2 */\n        Container.rebuild(root)\n      }\n    }\n\n    this.result = new Result(processor, root, opts)\n    this.helpers = { ...postcss, postcss, result: this.result }\n    this.plugins = this.processor.plugins.map(plugin => {\n      if (typeof plugin === 'object' && plugin.prepare) {\n        return { ...plugin, ...plugin.prepare(this.result) }\n      } else {\n        return plugin\n      }\n    })\n  }\n\n  async() {\n    if (this.error) return Promise.reject(this.error)\n    if (this.processed) return Promise.resolve(this.result)\n    if (!this.processing) {\n      this.processing = this.runAsync()\n    }\n    return this.processing\n  }\n\n  catch(onRejected) {\n    return this.async().catch(onRejected)\n  }\n\n  finally(onFinally) {\n    return this.async().then(onFinally, onFinally)\n  }\n\n  getAsyncError() {\n    throw new Error('Use process(css).then(cb) to work with async plugins')\n  }\n\n  handleError(error, node) {\n    let plugin = this.result.lastPlugin\n    try {\n      if (node) node.addToError(error)\n      this.error = error\n      if (error.name === 'CssSyntaxError' && !error.plugin) {\n        error.plugin = plugin.postcssPlugin\n        error.setMessage()\n      } else if (plugin.postcssVersion) {\n        if (process.env.NODE_ENV !== 'production') {\n          let pluginName = plugin.postcssPlugin\n          let pluginVer = plugin.postcssVersion\n          let runtimeVer = this.result.processor.version\n          let a = pluginVer.split('.')\n          let b = runtimeVer.split('.')\n\n          if (a[0] !== b[0] || parseInt(a[1]) > parseInt(b[1])) {\n            // eslint-disable-next-line no-console\n            console.error(\n              'Unknown error from PostCSS plugin. Your current PostCSS ' +\n                'version is ' +\n                runtimeVer +\n                ', but ' +\n                pluginName +\n                ' uses ' +\n                pluginVer +\n                '. Perhaps this is the source of the error below.'\n            )\n          }\n        }\n      }\n    } catch (err) {\n      /* c8 ignore next 3 */\n      // eslint-disable-next-line no-console\n      if (console && console.error) console.error(err)\n    }\n    return error\n  }\n\n  prepareVisitors() {\n    this.listeners = {}\n    let add = (plugin, type, cb) => {\n      if (!this.listeners[type]) this.listeners[type] = []\n      this.listeners[type].push([plugin, cb])\n    }\n    for (let plugin of this.plugins) {\n      if (typeof plugin === 'object') {\n        for (let event in plugin) {\n          if (!PLUGIN_PROPS[event] && /^[A-Z]/.test(event)) {\n            throw new Error(\n              `Unknown event ${event} in ${plugin.postcssPlugin}. ` +\n                `Try to update PostCSS (${this.processor.version} now).`\n            )\n          }\n          if (!NOT_VISITORS[event]) {\n            if (typeof plugin[event] === 'object') {\n              for (let filter in plugin[event]) {\n                if (filter === '*') {\n                  add(plugin, event, plugin[event][filter])\n                } else {\n                  add(\n                    plugin,\n                    event + '-' + filter.toLowerCase(),\n                    plugin[event][filter]\n                  )\n                }\n              }\n            } else if (typeof plugin[event] === 'function') {\n              add(plugin, event, plugin[event])\n            }\n          }\n        }\n      }\n    }\n    this.hasListener = Object.keys(this.listeners).length > 0\n  }\n\n  async runAsync() {\n    this.plugin = 0\n    for (let i = 0; i < this.plugins.length; i++) {\n      let plugin = this.plugins[i]\n      let promise = this.runOnRoot(plugin)\n      if (isPromise(promise)) {\n        try {\n          await promise\n        } catch (error) {\n          throw this.handleError(error)\n        }\n      }\n    }\n\n    this.prepareVisitors()\n    if (this.hasListener) {\n      let root = this.result.root\n      while (!root[isClean]) {\n        root[isClean] = true\n        let stack = [toStack(root)]\n        while (stack.length > 0) {\n          let promise = this.visitTick(stack)\n          if (isPromise(promise)) {\n            try {\n              await promise\n            } catch (e) {\n              let node = stack[stack.length - 1].node\n              throw this.handleError(e, node)\n            }\n          }\n        }\n      }\n\n      if (this.listeners.OnceExit) {\n        for (let [plugin, visitor] of this.listeners.OnceExit) {\n          this.result.lastPlugin = plugin\n          try {\n            if (root.type === 'document') {\n              let roots = root.nodes.map(subRoot =>\n                visitor(subRoot, this.helpers)\n              )\n\n              await Promise.all(roots)\n            } else {\n              await visitor(root, this.helpers)\n            }\n          } catch (e) {\n            throw this.handleError(e)\n          }\n        }\n      }\n    }\n\n    this.processed = true\n    return this.stringify()\n  }\n\n  runOnRoot(plugin) {\n    this.result.lastPlugin = plugin\n    try {\n      if (typeof plugin === 'object' && plugin.Once) {\n        if (this.result.root.type === 'document') {\n          let roots = this.result.root.nodes.map(root =>\n            plugin.Once(root, this.helpers)\n          )\n\n          if (isPromise(roots[0])) {\n            return Promise.all(roots)\n          }\n\n          return roots\n        }\n\n        return plugin.Once(this.result.root, this.helpers)\n      } else if (typeof plugin === 'function') {\n        return plugin(this.result.root, this.result)\n      }\n    } catch (error) {\n      throw this.handleError(error)\n    }\n  }\n\n  stringify() {\n    if (this.error) throw this.error\n    if (this.stringified) return this.result\n    this.stringified = true\n\n    this.sync()\n\n    let opts = this.result.opts\n    let str = stringify\n    if (opts.syntax) str = opts.syntax.stringify\n    if (opts.stringifier) str = opts.stringifier\n    if (str.stringify) str = str.stringify\n\n    let map = new MapGenerator(str, this.result.root, this.result.opts)\n    let data = map.generate()\n    this.result.css = data[0]\n    this.result.map = data[1]\n\n    return this.result\n  }\n\n  sync() {\n    if (this.error) throw this.error\n    if (this.processed) return this.result\n    this.processed = true\n\n    if (this.processing) {\n      throw this.getAsyncError()\n    }\n\n    for (let plugin of this.plugins) {\n      let promise = this.runOnRoot(plugin)\n      if (isPromise(promise)) {\n        throw this.getAsyncError()\n      }\n    }\n\n    this.prepareVisitors()\n    if (this.hasListener) {\n      let root = this.result.root\n      while (!root[isClean]) {\n        root[isClean] = true\n        this.walkSync(root)\n      }\n      if (this.listeners.OnceExit) {\n        if (root.type === 'document') {\n          for (let subRoot of root.nodes) {\n            this.visitSync(this.listeners.OnceExit, subRoot)\n          }\n        } else {\n          this.visitSync(this.listeners.OnceExit, root)\n        }\n      }\n    }\n\n    return this.result\n  }\n\n  then(onFulfilled, onRejected) {\n    if (process.env.NODE_ENV !== 'production') {\n      if (!('from' in this.opts)) {\n        warnOnce(\n          'Without `from` option PostCSS could generate wrong source map ' +\n            'and will not find Browserslist config. Set it to CSS file path ' +\n            'or to `undefined` to prevent this warning.'\n        )\n      }\n    }\n    return this.async().then(onFulfilled, onRejected)\n  }\n\n  toString() {\n    return this.css\n  }\n\n  visitSync(visitors, node) {\n    for (let [plugin, visitor] of visitors) {\n      this.result.lastPlugin = plugin\n      let promise\n      try {\n        promise = visitor(node, this.helpers)\n      } catch (e) {\n        throw this.handleError(e, node.proxyOf)\n      }\n      if (node.type !== 'root' && node.type !== 'document' && !node.parent) {\n        return true\n      }\n      if (isPromise(promise)) {\n        throw this.getAsyncError()\n      }\n    }\n  }\n\n  visitTick(stack) {\n    let visit = stack[stack.length - 1]\n    let { node, visitors } = visit\n\n    if (node.type !== 'root' && node.type !== 'document' && !node.parent) {\n      stack.pop()\n      return\n    }\n\n    if (visitors.length > 0 && visit.visitorIndex < visitors.length) {\n      let [plugin, visitor] = visitors[visit.visitorIndex]\n      visit.visitorIndex += 1\n      if (visit.visitorIndex === visitors.length) {\n        visit.visitors = []\n        visit.visitorIndex = 0\n      }\n      this.result.lastPlugin = plugin\n      try {\n        return visitor(node.toProxy(), this.helpers)\n      } catch (e) {\n        throw this.handleError(e, node)\n      }\n    }\n\n    if (visit.iterator !== 0) {\n      let iterator = visit.iterator\n      let child\n      while ((child = node.nodes[node.indexes[iterator]])) {\n        node.indexes[iterator] += 1\n        if (!child[isClean]) {\n          child[isClean] = true\n          stack.push(toStack(child))\n          return\n        }\n      }\n      visit.iterator = 0\n      delete node.indexes[iterator]\n    }\n\n    let events = visit.events\n    while (visit.eventIndex < events.length) {\n      let event = events[visit.eventIndex]\n      visit.eventIndex += 1\n      if (event === CHILDREN) {\n        if (node.nodes && node.nodes.length) {\n          node[isClean] = true\n          visit.iterator = node.getIterator()\n        }\n        return\n      } else if (this.listeners[event]) {\n        visit.visitors = this.listeners[event]\n        return\n      }\n    }\n    stack.pop()\n  }\n\n  walkSync(node) {\n    node[isClean] = true\n    let events = getEvents(node)\n    for (let event of events) {\n      if (event === CHILDREN) {\n        if (node.nodes) {\n          node.each(child => {\n            if (!child[isClean]) this.walkSync(child)\n          })\n        }\n      } else {\n        let visitors = this.listeners[event]\n        if (visitors) {\n          if (this.visitSync(visitors, node.toProxy())) return\n        }\n      }\n    }\n  }\n\n  warnings() {\n    return this.sync().warnings()\n  }\n\n  get content() {\n    return this.stringify().content\n  }\n\n  get css() {\n    return this.stringify().css\n  }\n\n  get map() {\n    return this.stringify().map\n  }\n\n  get messages() {\n    return this.sync().messages\n  }\n\n  get opts() {\n    return this.result.opts\n  }\n\n  get processor() {\n    return this.result.processor\n  }\n\n  get root() {\n    return this.sync().root\n  }\n\n  get [Symbol.toStringTag]() {\n    return 'LazyResult'\n  }\n}\n\nLazyResult.registerPostcss = dependant => {\n  postcss = dependant\n}\n\nmodule.exports = LazyResult\nLazyResult.default = LazyResult\n\nRoot.registerLazyResult(LazyResult)\nDocument.registerLazyResult(LazyResult)\n","'use strict'\n\nlet list = {\n  comma(string) {\n    return list.split(string, [','], true)\n  },\n\n  space(string) {\n    let spaces = [' ', '\\n', '\\t']\n    return list.split(string, spaces)\n  },\n\n  split(string, separators, last) {\n    let array = []\n    let current = ''\n    let split = false\n\n    let func = 0\n    let inQuote = false\n    let prevQuote = ''\n    let escape = false\n\n    for (let letter of string) {\n      if (escape) {\n        escape = false\n      } else if (letter === '\\\\') {\n        escape = true\n      } else if (inQuote) {\n        if (letter === prevQuote) {\n          inQuote = false\n        }\n      } else if (letter === '\"' || letter === \"'\") {\n        inQuote = true\n        prevQuote = letter\n      } else if (letter === '(') {\n        func += 1\n      } else if (letter === ')') {\n        if (func > 0) func -= 1\n      } else if (func === 0) {\n        if (separators.includes(letter)) split = true\n      }\n\n      if (split) {\n        if (current !== '') array.push(current.trim())\n        current = ''\n        split = false\n      } else {\n        current += letter\n      }\n    }\n\n    if (last || current !== '') array.push(current.trim())\n    return array\n  }\n}\n\nmodule.exports = list\nlist.default = list\n","'use strict'\n\nlet { SourceMapConsumer, SourceMapGenerator } = require('source-map-js')\nlet { dirname, relative, resolve, sep } = require('path')\nlet { pathToFileURL } = require('url')\n\nlet Input = require('./input')\n\nlet sourceMapAvailable = Boolean(SourceMapConsumer && SourceMapGenerator)\nlet pathAvailable = Boolean(dirname && resolve && relative && sep)\n\nclass MapGenerator {\n  constructor(stringify, root, opts, cssString) {\n    this.stringify = stringify\n    this.mapOpts = opts.map || {}\n    this.root = root\n    this.opts = opts\n    this.css = cssString\n    this.originalCSS = cssString\n    this.usesFileUrls = !this.mapOpts.from && this.mapOpts.absolute\n\n    this.memoizedFileURLs = new Map()\n    this.memoizedPaths = new Map()\n    this.memoizedURLs = new Map()\n  }\n\n  addAnnotation() {\n    let content\n\n    if (this.isInline()) {\n      content =\n        'data:application/json;base64,' + this.toBase64(this.map.toString())\n    } else if (typeof this.mapOpts.annotation === 'string') {\n      content = this.mapOpts.annotation\n    } else if (typeof this.mapOpts.annotation === 'function') {\n      content = this.mapOpts.annotation(this.opts.to, this.root)\n    } else {\n      content = this.outputFile() + '.map'\n    }\n    let eol = '\\n'\n    if (this.css.includes('\\r\\n')) eol = '\\r\\n'\n\n    this.css += eol + '/*# sourceMappingURL=' + content + ' */'\n  }\n\n  applyPrevMaps() {\n    for (let prev of this.previous()) {\n      let from = this.toUrl(this.path(prev.file))\n      let root = prev.root || dirname(prev.file)\n      let map\n\n      if (this.mapOpts.sourcesContent === false) {\n        map = new SourceMapConsumer(prev.text)\n        if (map.sourcesContent) {\n          map.sourcesContent = null\n        }\n      } else {\n        map = prev.consumer()\n      }\n\n      this.map.applySourceMap(map, from, this.toUrl(this.path(root)))\n    }\n  }\n\n  clearAnnotation() {\n    if (this.mapOpts.annotation === false) return\n\n    if (this.root) {\n      let node\n      for (let i = this.root.nodes.length - 1; i >= 0; i--) {\n        node = this.root.nodes[i]\n        if (node.type !== 'comment') continue\n        if (node.text.indexOf('# sourceMappingURL=') === 0) {\n          this.root.removeChild(i)\n        }\n      }\n    } else if (this.css) {\n      this.css = this.css.replace(/\\n*?\\/\\*#[\\S\\s]*?\\*\\/$/gm, '')\n    }\n  }\n\n  generate() {\n    this.clearAnnotation()\n    if (pathAvailable && sourceMapAvailable && this.isMap()) {\n      return this.generateMap()\n    } else {\n      let result = ''\n      this.stringify(this.root, i => {\n        result += i\n      })\n      return [result]\n    }\n  }\n\n  generateMap() {\n    if (this.root) {\n      this.generateString()\n    } else if (this.previous().length === 1) {\n      let prev = this.previous()[0].consumer()\n      prev.file = this.outputFile()\n      this.map = SourceMapGenerator.fromSourceMap(prev)\n    } else {\n      this.map = new SourceMapGenerator({ file: this.outputFile() })\n      this.map.addMapping({\n        generated: { column: 0, line: 1 },\n        original: { column: 0, line: 1 },\n        source: this.opts.from\n          ? this.toUrl(this.path(this.opts.from))\n          : '<no source>'\n      })\n    }\n\n    if (this.isSourcesContent()) this.setSourcesContent()\n    if (this.root && this.previous().length > 0) this.applyPrevMaps()\n    if (this.isAnnotation()) this.addAnnotation()\n\n    if (this.isInline()) {\n      return [this.css]\n    } else {\n      return [this.css, this.map]\n    }\n  }\n\n  generateString() {\n    this.css = ''\n    this.map = new SourceMapGenerator({ file: this.outputFile() })\n\n    let line = 1\n    let column = 1\n\n    let noSource = '<no source>'\n    let mapping = {\n      generated: { column: 0, line: 0 },\n      original: { column: 0, line: 0 },\n      source: ''\n    }\n\n    let lines, last\n    this.stringify(this.root, (str, node, type) => {\n      this.css += str\n\n      if (node && type !== 'end') {\n        mapping.generated.line = line\n        mapping.generated.column = column - 1\n        if (node.source && node.source.start) {\n          mapping.source = this.sourcePath(node)\n          mapping.original.line = node.source.start.line\n          mapping.original.column = node.source.start.column - 1\n          this.map.addMapping(mapping)\n        } else {\n          mapping.source = noSource\n          mapping.original.line = 1\n          mapping.original.column = 0\n          this.map.addMapping(mapping)\n        }\n      }\n\n      lines = str.match(/\\n/g)\n      if (lines) {\n        line += lines.length\n        last = str.lastIndexOf('\\n')\n        column = str.length - last\n      } else {\n        column += str.length\n      }\n\n      if (node && type !== 'start') {\n        let p = node.parent || { raws: {} }\n        let childless =\n          node.type === 'decl' || (node.type === 'atrule' && !node.nodes)\n        if (!childless || node !== p.last || p.raws.semicolon) {\n          if (node.source && node.source.end) {\n            mapping.source = this.sourcePath(node)\n            mapping.original.line = node.source.end.line\n            mapping.original.column = node.source.end.column - 1\n            mapping.generated.line = line\n            mapping.generated.column = column - 2\n            this.map.addMapping(mapping)\n          } else {\n            mapping.source = noSource\n            mapping.original.line = 1\n            mapping.original.column = 0\n            mapping.generated.line = line\n            mapping.generated.column = column - 1\n            this.map.addMapping(mapping)\n          }\n        }\n      }\n    })\n  }\n\n  isAnnotation() {\n    if (this.isInline()) {\n      return true\n    }\n    if (typeof this.mapOpts.annotation !== 'undefined') {\n      return this.mapOpts.annotation\n    }\n    if (this.previous().length) {\n      return this.previous().some(i => i.annotation)\n    }\n    return true\n  }\n\n  isInline() {\n    if (typeof this.mapOpts.inline !== 'undefined') {\n      return this.mapOpts.inline\n    }\n\n    let annotation = this.mapOpts.annotation\n    if (typeof annotation !== 'undefined' && annotation !== true) {\n      return false\n    }\n\n    if (this.previous().length) {\n      return this.previous().some(i => i.inline)\n    }\n    return true\n  }\n\n  isMap() {\n    if (typeof this.opts.map !== 'undefined') {\n      return !!this.opts.map\n    }\n    return this.previous().length > 0\n  }\n\n  isSourcesContent() {\n    if (typeof this.mapOpts.sourcesContent !== 'undefined') {\n      return this.mapOpts.sourcesContent\n    }\n    if (this.previous().length) {\n      return this.previous().some(i => i.withContent())\n    }\n    return true\n  }\n\n  outputFile() {\n    if (this.opts.to) {\n      return this.path(this.opts.to)\n    } else if (this.opts.from) {\n      return this.path(this.opts.from)\n    } else {\n      return 'to.css'\n    }\n  }\n\n  path(file) {\n    if (this.mapOpts.absolute) return file\n    if (file.charCodeAt(0) === 60 /* `<` */) return file\n    if (/^\\w+:\\/\\//.test(file)) return file\n    let cached = this.memoizedPaths.get(file)\n    if (cached) return cached\n\n    let from = this.opts.to ? dirname(this.opts.to) : '.'\n\n    if (typeof this.mapOpts.annotation === 'string') {\n      from = dirname(resolve(from, this.mapOpts.annotation))\n    }\n\n    let path = relative(from, file)\n    this.memoizedPaths.set(file, path)\n\n    return path\n  }\n\n  previous() {\n    if (!this.previousMaps) {\n      this.previousMaps = []\n      if (this.root) {\n        this.root.walk(node => {\n          if (node.source && node.source.input.map) {\n            let map = node.source.input.map\n            if (!this.previousMaps.includes(map)) {\n              this.previousMaps.push(map)\n            }\n          }\n        })\n      } else {\n        let input = new Input(this.originalCSS, this.opts)\n        if (input.map) this.previousMaps.push(input.map)\n      }\n    }\n\n    return this.previousMaps\n  }\n\n  setSourcesContent() {\n    let already = {}\n    if (this.root) {\n      this.root.walk(node => {\n        if (node.source) {\n          let from = node.source.input.from\n          if (from && !already[from]) {\n            already[from] = true\n            let fromUrl = this.usesFileUrls\n              ? this.toFileUrl(from)\n              : this.toUrl(this.path(from))\n            this.map.setSourceContent(fromUrl, node.source.input.css)\n          }\n        }\n      })\n    } else if (this.css) {\n      let from = this.opts.from\n        ? this.toUrl(this.path(this.opts.from))\n        : '<no source>'\n      this.map.setSourceContent(from, this.css)\n    }\n  }\n\n  sourcePath(node) {\n    if (this.mapOpts.from) {\n      return this.toUrl(this.mapOpts.from)\n    } else if (this.usesFileUrls) {\n      return this.toFileUrl(node.source.input.from)\n    } else {\n      return this.toUrl(this.path(node.source.input.from))\n    }\n  }\n\n  toBase64(str) {\n    if (Buffer) {\n      return Buffer.from(str).toString('base64')\n    } else {\n      return window.btoa(unescape(encodeURIComponent(str)))\n    }\n  }\n\n  toFileUrl(path) {\n    let cached = this.memoizedFileURLs.get(path)\n    if (cached) return cached\n\n    if (pathToFileURL) {\n      let fileURL = pathToFileURL(path).toString()\n      this.memoizedFileURLs.set(path, fileURL)\n\n      return fileURL\n    } else {\n      throw new Error(\n        '`map.absolute` option is not available in this PostCSS build'\n      )\n    }\n  }\n\n  toUrl(path) {\n    let cached = this.memoizedURLs.get(path)\n    if (cached) return cached\n\n    if (sep === '\\\\') {\n      path = path.replace(/\\\\/g, '/')\n    }\n\n    let url = encodeURI(path).replace(/[#?]/g, encodeURIComponent)\n    this.memoizedURLs.set(path, url)\n\n    return url\n  }\n}\n\nmodule.exports = MapGenerator\n","'use strict'\n\nlet MapGenerator = require('./map-generator')\nlet stringify = require('./stringify')\nlet warnOnce = require('./warn-once')\nlet parse = require('./parse')\nconst Result = require('./result')\n\nclass NoWorkResult {\n  constructor(processor, css, opts) {\n    css = css.toString()\n    this.stringified = false\n\n    this._processor = processor\n    this._css = css\n    this._opts = opts\n    this._map = undefined\n    let root\n\n    let str = stringify\n    this.result = new Result(this._processor, root, this._opts)\n    this.result.css = css\n\n    let self = this\n    Object.defineProperty(this.result, 'root', {\n      get() {\n        return self.root\n      }\n    })\n\n    let map = new MapGenerator(str, root, this._opts, css)\n    if (map.isMap()) {\n      let [generatedCSS, generatedMap] = map.generate()\n      if (generatedCSS) {\n        this.result.css = generatedCSS\n      }\n      if (generatedMap) {\n        this.result.map = generatedMap\n      }\n    } else {\n      map.clearAnnotation()\n      this.result.css = map.css\n    }\n  }\n\n  async() {\n    if (this.error) return Promise.reject(this.error)\n    return Promise.resolve(this.result)\n  }\n\n  catch(onRejected) {\n    return this.async().catch(onRejected)\n  }\n\n  finally(onFinally) {\n    return this.async().then(onFinally, onFinally)\n  }\n\n  sync() {\n    if (this.error) throw this.error\n    return this.result\n  }\n\n  then(onFulfilled, onRejected) {\n    if (process.env.NODE_ENV !== 'production') {\n      if (!('from' in this._opts)) {\n        warnOnce(\n          'Without `from` option PostCSS could generate wrong source map ' +\n            'and will not find Browserslist config. Set it to CSS file path ' +\n            'or to `undefined` to prevent this warning.'\n        )\n      }\n    }\n\n    return this.async().then(onFulfilled, onRejected)\n  }\n\n  toString() {\n    return this._css\n  }\n\n  warnings() {\n    return []\n  }\n\n  get content() {\n    return this.result.css\n  }\n\n  get css() {\n    return this.result.css\n  }\n\n  get map() {\n    return this.result.map\n  }\n\n  get messages() {\n    return []\n  }\n\n  get opts() {\n    return this.result.opts\n  }\n\n  get processor() {\n    return this.result.processor\n  }\n\n  get root() {\n    if (this._root) {\n      return this._root\n    }\n\n    let root\n    let parser = parse\n\n    try {\n      root = parser(this._css, this._opts)\n    } catch (error) {\n      this.error = error\n    }\n\n    if (this.error) {\n      throw this.error\n    } else {\n      this._root = root\n      return root\n    }\n  }\n\n  get [Symbol.toStringTag]() {\n    return 'NoWorkResult'\n  }\n}\n\nmodule.exports = NoWorkResult\nNoWorkResult.default = NoWorkResult\n","'use strict'\n\nlet { isClean, my } = require('./symbols')\nlet CssSyntaxError = require('./css-syntax-error')\nlet Stringifier = require('./stringifier')\nlet stringify = require('./stringify')\n\nfunction cloneNode(obj, parent) {\n  let cloned = new obj.constructor()\n\n  for (let i in obj) {\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) {\n      /* c8 ignore next 2 */\n      continue\n    }\n    if (i === 'proxyCache') continue\n    let value = obj[i]\n    let type = typeof value\n\n    if (i === 'parent' && type === 'object') {\n      if (parent) cloned[i] = parent\n    } else if (i === 'source') {\n      cloned[i] = value\n    } else if (Array.isArray(value)) {\n      cloned[i] = value.map(j => cloneNode(j, cloned))\n    } else {\n      if (type === 'object' && value !== null) value = cloneNode(value)\n      cloned[i] = value\n    }\n  }\n\n  return cloned\n}\n\nclass Node {\n  constructor(defaults = {}) {\n    this.raws = {}\n    this[isClean] = false\n    this[my] = true\n\n    for (let name in defaults) {\n      if (name === 'nodes') {\n        this.nodes = []\n        for (let node of defaults[name]) {\n          if (typeof node.clone === 'function') {\n            this.append(node.clone())\n          } else {\n            this.append(node)\n          }\n        }\n      } else {\n        this[name] = defaults[name]\n      }\n    }\n  }\n\n  addToError(error) {\n    error.postcssNode = this\n    if (error.stack && this.source && /\\n\\s{4}at /.test(error.stack)) {\n      let s = this.source\n      error.stack = error.stack.replace(\n        /\\n\\s{4}at /,\n        `$&${s.input.from}:${s.start.line}:${s.start.column}$&`\n      )\n    }\n    return error\n  }\n\n  after(add) {\n    this.parent.insertAfter(this, add)\n    return this\n  }\n\n  assign(overrides = {}) {\n    for (let name in overrides) {\n      this[name] = overrides[name]\n    }\n    return this\n  }\n\n  before(add) {\n    this.parent.insertBefore(this, add)\n    return this\n  }\n\n  cleanRaws(keepBetween) {\n    delete this.raws.before\n    delete this.raws.after\n    if (!keepBetween) delete this.raws.between\n  }\n\n  clone(overrides = {}) {\n    let cloned = cloneNode(this)\n    for (let name in overrides) {\n      cloned[name] = overrides[name]\n    }\n    return cloned\n  }\n\n  cloneAfter(overrides = {}) {\n    let cloned = this.clone(overrides)\n    this.parent.insertAfter(this, cloned)\n    return cloned\n  }\n\n  cloneBefore(overrides = {}) {\n    let cloned = this.clone(overrides)\n    this.parent.insertBefore(this, cloned)\n    return cloned\n  }\n\n  error(message, opts = {}) {\n    if (this.source) {\n      let { end, start } = this.rangeBy(opts)\n      return this.source.input.error(\n        message,\n        { column: start.column, line: start.line },\n        { column: end.column, line: end.line },\n        opts\n      )\n    }\n    return new CssSyntaxError(message)\n  }\n\n  getProxyProcessor() {\n    return {\n      get(node, prop) {\n        if (prop === 'proxyOf') {\n          return node\n        } else if (prop === 'root') {\n          return () => node.root().toProxy()\n        } else {\n          return node[prop]\n        }\n      },\n\n      set(node, prop, value) {\n        if (node[prop] === value) return true\n        node[prop] = value\n        if (\n          prop === 'prop' ||\n          prop === 'value' ||\n          prop === 'name' ||\n          prop === 'params' ||\n          prop === 'important' ||\n          /* c8 ignore next */\n          prop === 'text'\n        ) {\n          node.markDirty()\n        }\n        return true\n      }\n    }\n  }\n\n  markDirty() {\n    if (this[isClean]) {\n      this[isClean] = false\n      let next = this\n      while ((next = next.parent)) {\n        next[isClean] = false\n      }\n    }\n  }\n\n  next() {\n    if (!this.parent) return undefined\n    let index = this.parent.index(this)\n    return this.parent.nodes[index + 1]\n  }\n\n  positionBy(opts, stringRepresentation) {\n    let pos = this.source.start\n    if (opts.index) {\n      pos = this.positionInside(opts.index, stringRepresentation)\n    } else if (opts.word) {\n      stringRepresentation = this.toString()\n      let index = stringRepresentation.indexOf(opts.word)\n      if (index !== -1) pos = this.positionInside(index, stringRepresentation)\n    }\n    return pos\n  }\n\n  positionInside(index, stringRepresentation) {\n    let string = stringRepresentation || this.toString()\n    let column = this.source.start.column\n    let line = this.source.start.line\n\n    for (let i = 0; i < index; i++) {\n      if (string[i] === '\\n') {\n        column = 1\n        line += 1\n      } else {\n        column += 1\n      }\n    }\n\n    return { column, line }\n  }\n\n  prev() {\n    if (!this.parent) return undefined\n    let index = this.parent.index(this)\n    return this.parent.nodes[index - 1]\n  }\n\n  rangeBy(opts) {\n    let start = {\n      column: this.source.start.column,\n      line: this.source.start.line\n    }\n    let end = this.source.end\n      ? {\n        column: this.source.end.column + 1,\n        line: this.source.end.line\n      }\n      : {\n        column: start.column + 1,\n        line: start.line\n      }\n\n    if (opts.word) {\n      let stringRepresentation = this.toString()\n      let index = stringRepresentation.indexOf(opts.word)\n      if (index !== -1) {\n        start = this.positionInside(index, stringRepresentation)\n        end = this.positionInside(index + opts.word.length, stringRepresentation)\n      }\n    } else {\n      if (opts.start) {\n        start = {\n          column: opts.start.column,\n          line: opts.start.line\n        }\n      } else if (opts.index) {\n        start = this.positionInside(opts.index)\n      }\n\n      if (opts.end) {\n        end = {\n          column: opts.end.column,\n          line: opts.end.line\n        }\n      } else if (opts.endIndex) {\n        end = this.positionInside(opts.endIndex)\n      } else if (opts.index) {\n        end = this.positionInside(opts.index + 1)\n      }\n    }\n\n    if (\n      end.line < start.line ||\n      (end.line === start.line && end.column <= start.column)\n    ) {\n      end = { column: start.column + 1, line: start.line }\n    }\n\n    return { end, start }\n  }\n\n  raw(prop, defaultType) {\n    let str = new Stringifier()\n    return str.raw(this, prop, defaultType)\n  }\n\n  remove() {\n    if (this.parent) {\n      this.parent.removeChild(this)\n    }\n    this.parent = undefined\n    return this\n  }\n\n  replaceWith(...nodes) {\n    if (this.parent) {\n      let bookmark = this\n      let foundSelf = false\n      for (let node of nodes) {\n        if (node === this) {\n          foundSelf = true\n        } else if (foundSelf) {\n          this.parent.insertAfter(bookmark, node)\n          bookmark = node\n        } else {\n          this.parent.insertBefore(bookmark, node)\n        }\n      }\n\n      if (!foundSelf) {\n        this.remove()\n      }\n    }\n\n    return this\n  }\n\n  root() {\n    let result = this\n    while (result.parent && result.parent.type !== 'document') {\n      result = result.parent\n    }\n    return result\n  }\n\n  toJSON(_, inputs) {\n    let fixed = {}\n    let emitInputs = inputs == null\n    inputs = inputs || new Map()\n    let inputsNextIndex = 0\n\n    for (let name in this) {\n      if (!Object.prototype.hasOwnProperty.call(this, name)) {\n        /* c8 ignore next 2 */\n        continue\n      }\n      if (name === 'parent' || name === 'proxyCache') continue\n      let value = this[name]\n\n      if (Array.isArray(value)) {\n        fixed[name] = value.map(i => {\n          if (typeof i === 'object' && i.toJSON) {\n            return i.toJSON(null, inputs)\n          } else {\n            return i\n          }\n        })\n      } else if (typeof value === 'object' && value.toJSON) {\n        fixed[name] = value.toJSON(null, inputs)\n      } else if (name === 'source') {\n        let inputId = inputs.get(value.input)\n        if (inputId == null) {\n          inputId = inputsNextIndex\n          inputs.set(value.input, inputsNextIndex)\n          inputsNextIndex++\n        }\n        fixed[name] = {\n          end: value.end,\n          inputId,\n          start: value.start\n        }\n      } else {\n        fixed[name] = value\n      }\n    }\n\n    if (emitInputs) {\n      fixed.inputs = [...inputs.keys()].map(input => input.toJSON())\n    }\n\n    return fixed\n  }\n\n  toProxy() {\n    if (!this.proxyCache) {\n      this.proxyCache = new Proxy(this, this.getProxyProcessor())\n    }\n    return this.proxyCache\n  }\n\n  toString(stringifier = stringify) {\n    if (stringifier.stringify) stringifier = stringifier.stringify\n    let result = ''\n    stringifier(this, i => {\n      result += i\n    })\n    return result\n  }\n\n  warn(result, text, opts) {\n    let data = { node: this }\n    for (let i in opts) data[i] = opts[i]\n    return result.warn(text, data)\n  }\n\n  get proxyOf() {\n    return this\n  }\n}\n\nmodule.exports = Node\nNode.default = Node\n","'use strict'\n\nlet Container = require('./container')\nlet Parser = require('./parser')\nlet Input = require('./input')\n\nfunction parse(css, opts) {\n  let input = new Input(css, opts)\n  let parser = new Parser(input)\n  try {\n    parser.parse()\n  } catch (e) {\n    if (process.env.NODE_ENV !== 'production') {\n      if (e.name === 'CssSyntaxError' && opts && opts.from) {\n        if (/\\.scss$/i.test(opts.from)) {\n          e.message +=\n            '\\nYou tried to parse SCSS with ' +\n            'the standard CSS parser; ' +\n            'try again with the postcss-scss parser'\n        } else if (/\\.sass/i.test(opts.from)) {\n          e.message +=\n            '\\nYou tried to parse Sass with ' +\n            'the standard CSS parser; ' +\n            'try again with the postcss-sass parser'\n        } else if (/\\.less$/i.test(opts.from)) {\n          e.message +=\n            '\\nYou tried to parse Less with ' +\n            'the standard CSS parser; ' +\n            'try again with the postcss-less parser'\n        }\n      }\n    }\n    throw e\n  }\n\n  return parser.root\n}\n\nmodule.exports = parse\nparse.default = parse\n\nContainer.registerParse(parse)\n","'use strict'\n\nlet Declaration = require('./declaration')\nlet tokenizer = require('./tokenize')\nlet Comment = require('./comment')\nlet AtRule = require('./at-rule')\nlet Root = require('./root')\nlet Rule = require('./rule')\n\nconst SAFE_COMMENT_NEIGHBOR = {\n  empty: true,\n  space: true\n}\n\nfunction findLastWithPosition(tokens) {\n  for (let i = tokens.length - 1; i >= 0; i--) {\n    let token = tokens[i]\n    let pos = token[3] || token[2]\n    if (pos) return pos\n  }\n}\n\nclass Parser {\n  constructor(input) {\n    this.input = input\n\n    this.root = new Root()\n    this.current = this.root\n    this.spaces = ''\n    this.semicolon = false\n\n    this.createTokenizer()\n    this.root.source = { input, start: { column: 1, line: 1, offset: 0 } }\n  }\n\n  atrule(token) {\n    let node = new AtRule()\n    node.name = token[1].slice(1)\n    if (node.name === '') {\n      this.unnamedAtrule(node, token)\n    }\n    this.init(node, token[2])\n\n    let type\n    let prev\n    let shift\n    let last = false\n    let open = false\n    let params = []\n    let brackets = []\n\n    while (!this.tokenizer.endOfFile()) {\n      token = this.tokenizer.nextToken()\n      type = token[0]\n\n      if (type === '(' || type === '[') {\n        brackets.push(type === '(' ? ')' : ']')\n      } else if (type === '{' && brackets.length > 0) {\n        brackets.push('}')\n      } else if (type === brackets[brackets.length - 1]) {\n        brackets.pop()\n      }\n\n      if (brackets.length === 0) {\n        if (type === ';') {\n          node.source.end = this.getPosition(token[2])\n          node.source.end.offset++\n          this.semicolon = true\n          break\n        } else if (type === '{') {\n          open = true\n          break\n        } else if (type === '}') {\n          if (params.length > 0) {\n            shift = params.length - 1\n            prev = params[shift]\n            while (prev && prev[0] === 'space') {\n              prev = params[--shift]\n            }\n            if (prev) {\n              node.source.end = this.getPosition(prev[3] || prev[2])\n              node.source.end.offset++\n            }\n          }\n          this.end(token)\n          break\n        } else {\n          params.push(token)\n        }\n      } else {\n        params.push(token)\n      }\n\n      if (this.tokenizer.endOfFile()) {\n        last = true\n        break\n      }\n    }\n\n    node.raws.between = this.spacesAndCommentsFromEnd(params)\n    if (params.length) {\n      node.raws.afterName = this.spacesAndCommentsFromStart(params)\n      this.raw(node, 'params', params)\n      if (last) {\n        token = params[params.length - 1]\n        node.source.end = this.getPosition(token[3] || token[2])\n        node.source.end.offset++\n        this.spaces = node.raws.between\n        node.raws.between = ''\n      }\n    } else {\n      node.raws.afterName = ''\n      node.params = ''\n    }\n\n    if (open) {\n      node.nodes = []\n      this.current = node\n    }\n  }\n\n  checkMissedSemicolon(tokens) {\n    let colon = this.colon(tokens)\n    if (colon === false) return\n\n    let founded = 0\n    let token\n    for (let j = colon - 1; j >= 0; j--) {\n      token = tokens[j]\n      if (token[0] !== 'space') {\n        founded += 1\n        if (founded === 2) break\n      }\n    }\n    // If the token is a word, e.g. `!important`, `red` or any other valid property's value.\n    // Then we need to return the colon after that word token. [3] is the \"end\" colon of that word.\n    // And because we need it after that one we do +1 to get the next one.\n    throw this.input.error(\n      'Missed semicolon',\n      token[0] === 'word' ? token[3] + 1 : token[2]\n    )\n  }\n\n  colon(tokens) {\n    let brackets = 0\n    let token, type, prev\n    for (let [i, element] of tokens.entries()) {\n      token = element\n      type = token[0]\n\n      if (type === '(') {\n        brackets += 1\n      }\n      if (type === ')') {\n        brackets -= 1\n      }\n      if (brackets === 0 && type === ':') {\n        if (!prev) {\n          this.doubleColon(token)\n        } else if (prev[0] === 'word' && prev[1] === 'progid') {\n          continue\n        } else {\n          return i\n        }\n      }\n\n      prev = token\n    }\n    return false\n  }\n\n  comment(token) {\n    let node = new Comment()\n    this.init(node, token[2])\n    node.source.end = this.getPosition(token[3] || token[2])\n    node.source.end.offset++\n\n    let text = token[1].slice(2, -2)\n    if (/^\\s*$/.test(text)) {\n      node.text = ''\n      node.raws.left = text\n      node.raws.right = ''\n    } else {\n      let match = text.match(/^(\\s*)([^]*\\S)(\\s*)$/)\n      node.text = match[2]\n      node.raws.left = match[1]\n      node.raws.right = match[3]\n    }\n  }\n\n  createTokenizer() {\n    this.tokenizer = tokenizer(this.input)\n  }\n\n  decl(tokens, customProperty) {\n    let node = new Declaration()\n    this.init(node, tokens[0][2])\n\n    let last = tokens[tokens.length - 1]\n    if (last[0] === ';') {\n      this.semicolon = true\n      tokens.pop()\n    }\n\n    node.source.end = this.getPosition(\n      last[3] || last[2] || findLastWithPosition(tokens)\n    )\n    node.source.end.offset++\n\n    while (tokens[0][0] !== 'word') {\n      if (tokens.length === 1) this.unknownWord(tokens)\n      node.raws.before += tokens.shift()[1]\n    }\n    node.source.start = this.getPosition(tokens[0][2])\n\n    node.prop = ''\n    while (tokens.length) {\n      let type = tokens[0][0]\n      if (type === ':' || type === 'space' || type === 'comment') {\n        break\n      }\n      node.prop += tokens.shift()[1]\n    }\n\n    node.raws.between = ''\n\n    let token\n    while (tokens.length) {\n      token = tokens.shift()\n\n      if (token[0] === ':') {\n        node.raws.between += token[1]\n        break\n      } else {\n        if (token[0] === 'word' && /\\w/.test(token[1])) {\n          this.unknownWord([token])\n        }\n        node.raws.between += token[1]\n      }\n    }\n\n    if (node.prop[0] === '_' || node.prop[0] === '*') {\n      node.raws.before += node.prop[0]\n      node.prop = node.prop.slice(1)\n    }\n\n    let firstSpaces = []\n    let next\n    while (tokens.length) {\n      next = tokens[0][0]\n      if (next !== 'space' && next !== 'comment') break\n      firstSpaces.push(tokens.shift())\n    }\n\n    this.precheckMissedSemicolon(tokens)\n\n    for (let i = tokens.length - 1; i >= 0; i--) {\n      token = tokens[i]\n      if (token[1].toLowerCase() === '!important') {\n        node.important = true\n        let string = this.stringFrom(tokens, i)\n        string = this.spacesFromEnd(tokens) + string\n        if (string !== ' !important') node.raws.important = string\n        break\n      } else if (token[1].toLowerCase() === 'important') {\n        let cache = tokens.slice(0)\n        let str = ''\n        for (let j = i; j > 0; j--) {\n          let type = cache[j][0]\n          if (str.trim().indexOf('!') === 0 && type !== 'space') {\n            break\n          }\n          str = cache.pop()[1] + str\n        }\n        if (str.trim().indexOf('!') === 0) {\n          node.important = true\n          node.raws.important = str\n          tokens = cache\n        }\n      }\n\n      if (token[0] !== 'space' && token[0] !== 'comment') {\n        break\n      }\n    }\n\n    let hasWord = tokens.some(i => i[0] !== 'space' && i[0] !== 'comment')\n\n    if (hasWord) {\n      node.raws.between += firstSpaces.map(i => i[1]).join('')\n      firstSpaces = []\n    }\n    this.raw(node, 'value', firstSpaces.concat(tokens), customProperty)\n\n    if (node.value.includes(':') && !customProperty) {\n      this.checkMissedSemicolon(tokens)\n    }\n  }\n\n  doubleColon(token) {\n    throw this.input.error(\n      'Double colon',\n      { offset: token[2] },\n      { offset: token[2] + token[1].length }\n    )\n  }\n\n  emptyRule(token) {\n    let node = new Rule()\n    this.init(node, token[2])\n    node.selector = ''\n    node.raws.between = ''\n    this.current = node\n  }\n\n  end(token) {\n    if (this.current.nodes && this.current.nodes.length) {\n      this.current.raws.semicolon = this.semicolon\n    }\n    this.semicolon = false\n\n    this.current.raws.after = (this.current.raws.after || '') + this.spaces\n    this.spaces = ''\n\n    if (this.current.parent) {\n      this.current.source.end = this.getPosition(token[2])\n      this.current.source.end.offset++\n      this.current = this.current.parent\n    } else {\n      this.unexpectedClose(token)\n    }\n  }\n\n  endFile() {\n    if (this.current.parent) this.unclosedBlock()\n    if (this.current.nodes && this.current.nodes.length) {\n      this.current.raws.semicolon = this.semicolon\n    }\n    this.current.raws.after = (this.current.raws.after || '') + this.spaces\n    this.root.source.end = this.getPosition(this.tokenizer.position())\n  }\n\n  freeSemicolon(token) {\n    this.spaces += token[1]\n    if (this.current.nodes) {\n      let prev = this.current.nodes[this.current.nodes.length - 1]\n      if (prev && prev.type === 'rule' && !prev.raws.ownSemicolon) {\n        prev.raws.ownSemicolon = this.spaces\n        this.spaces = ''\n      }\n    }\n  }\n\n  // Helpers\n\n  getPosition(offset) {\n    let pos = this.input.fromOffset(offset)\n    return {\n      column: pos.col,\n      line: pos.line,\n      offset\n    }\n  }\n\n  init(node, offset) {\n    this.current.push(node)\n    node.source = {\n      input: this.input,\n      start: this.getPosition(offset)\n    }\n    node.raws.before = this.spaces\n    this.spaces = ''\n    if (node.type !== 'comment') this.semicolon = false\n  }\n\n  other(start) {\n    let end = false\n    let type = null\n    let colon = false\n    let bracket = null\n    let brackets = []\n    let customProperty = start[1].startsWith('--')\n\n    let tokens = []\n    let token = start\n    while (token) {\n      type = token[0]\n      tokens.push(token)\n\n      if (type === '(' || type === '[') {\n        if (!bracket) bracket = token\n        brackets.push(type === '(' ? ')' : ']')\n      } else if (customProperty && colon && type === '{') {\n        if (!bracket) bracket = token\n        brackets.push('}')\n      } else if (brackets.length === 0) {\n        if (type === ';') {\n          if (colon) {\n            this.decl(tokens, customProperty)\n            return\n          } else {\n            break\n          }\n        } else if (type === '{') {\n          this.rule(tokens)\n          return\n        } else if (type === '}') {\n          this.tokenizer.back(tokens.pop())\n          end = true\n          break\n        } else if (type === ':') {\n          colon = true\n        }\n      } else if (type === brackets[brackets.length - 1]) {\n        brackets.pop()\n        if (brackets.length === 0) bracket = null\n      }\n\n      token = this.tokenizer.nextToken()\n    }\n\n    if (this.tokenizer.endOfFile()) end = true\n    if (brackets.length > 0) this.unclosedBracket(bracket)\n\n    if (end && colon) {\n      if (!customProperty) {\n        while (tokens.length) {\n          token = tokens[tokens.length - 1][0]\n          if (token !== 'space' && token !== 'comment') break\n          this.tokenizer.back(tokens.pop())\n        }\n      }\n      this.decl(tokens, customProperty)\n    } else {\n      this.unknownWord(tokens)\n    }\n  }\n\n  parse() {\n    let token\n    while (!this.tokenizer.endOfFile()) {\n      token = this.tokenizer.nextToken()\n\n      switch (token[0]) {\n        case 'space':\n          this.spaces += token[1]\n          break\n\n        case ';':\n          this.freeSemicolon(token)\n          break\n\n        case '}':\n          this.end(token)\n          break\n\n        case 'comment':\n          this.comment(token)\n          break\n\n        case 'at-word':\n          this.atrule(token)\n          break\n\n        case '{':\n          this.emptyRule(token)\n          break\n\n        default:\n          this.other(token)\n          break\n      }\n    }\n    this.endFile()\n  }\n\n  precheckMissedSemicolon(/* tokens */) {\n    // Hook for Safe Parser\n  }\n\n  raw(node, prop, tokens, customProperty) {\n    let token, type\n    let length = tokens.length\n    let value = ''\n    let clean = true\n    let next, prev\n\n    for (let i = 0; i < length; i += 1) {\n      token = tokens[i]\n      type = token[0]\n      if (type === 'space' && i === length - 1 && !customProperty) {\n        clean = false\n      } else if (type === 'comment') {\n        prev = tokens[i - 1] ? tokens[i - 1][0] : 'empty'\n        next = tokens[i + 1] ? tokens[i + 1][0] : 'empty'\n        if (!SAFE_COMMENT_NEIGHBOR[prev] && !SAFE_COMMENT_NEIGHBOR[next]) {\n          if (value.slice(-1) === ',') {\n            clean = false\n          } else {\n            value += token[1]\n          }\n        } else {\n          clean = false\n        }\n      } else {\n        value += token[1]\n      }\n    }\n    if (!clean) {\n      let raw = tokens.reduce((all, i) => all + i[1], '')\n      node.raws[prop] = { raw, value }\n    }\n    node[prop] = value\n  }\n\n  rule(tokens) {\n    tokens.pop()\n\n    let node = new Rule()\n    this.init(node, tokens[0][2])\n\n    node.raws.between = this.spacesAndCommentsFromEnd(tokens)\n    this.raw(node, 'selector', tokens)\n    this.current = node\n  }\n\n  spacesAndCommentsFromEnd(tokens) {\n    let lastTokenType\n    let spaces = ''\n    while (tokens.length) {\n      lastTokenType = tokens[tokens.length - 1][0]\n      if (lastTokenType !== 'space' && lastTokenType !== 'comment') break\n      spaces = tokens.pop()[1] + spaces\n    }\n    return spaces\n  }\n\n  // Errors\n\n  spacesAndCommentsFromStart(tokens) {\n    let next\n    let spaces = ''\n    while (tokens.length) {\n      next = tokens[0][0]\n      if (next !== 'space' && next !== 'comment') break\n      spaces += tokens.shift()[1]\n    }\n    return spaces\n  }\n\n  spacesFromEnd(tokens) {\n    let lastTokenType\n    let spaces = ''\n    while (tokens.length) {\n      lastTokenType = tokens[tokens.length - 1][0]\n      if (lastTokenType !== 'space') break\n      spaces = tokens.pop()[1] + spaces\n    }\n    return spaces\n  }\n\n  stringFrom(tokens, from) {\n    let result = ''\n    for (let i = from; i < tokens.length; i++) {\n      result += tokens[i][1]\n    }\n    tokens.splice(from, tokens.length - from)\n    return result\n  }\n\n  unclosedBlock() {\n    let pos = this.current.source.start\n    throw this.input.error('Unclosed block', pos.line, pos.column)\n  }\n\n  unclosedBracket(bracket) {\n    throw this.input.error(\n      'Unclosed bracket',\n      { offset: bracket[2] },\n      { offset: bracket[2] + 1 }\n    )\n  }\n\n  unexpectedClose(token) {\n    throw this.input.error(\n      'Unexpected }',\n      { offset: token[2] },\n      { offset: token[2] + 1 }\n    )\n  }\n\n  unknownWord(tokens) {\n    throw this.input.error(\n      'Unknown word',\n      { offset: tokens[0][2] },\n      { offset: tokens[0][2] + tokens[0][1].length }\n    )\n  }\n\n  unnamedAtrule(node, token) {\n    throw this.input.error(\n      'At-rule without name',\n      { offset: token[2] },\n      { offset: token[2] + token[1].length }\n    )\n  }\n}\n\nmodule.exports = Parser\n","'use strict'\n\nlet CssSyntaxError = require('./css-syntax-error')\nlet Declaration = require('./declaration')\nlet LazyResult = require('./lazy-result')\nlet Container = require('./container')\nlet Processor = require('./processor')\nlet stringify = require('./stringify')\nlet fromJSON = require('./fromJSON')\nlet Document = require('./document')\nlet Warning = require('./warning')\nlet Comment = require('./comment')\nlet AtRule = require('./at-rule')\nlet Result = require('./result.js')\nlet Input = require('./input')\nlet parse = require('./parse')\nlet list = require('./list')\nlet Rule = require('./rule')\nlet Root = require('./root')\nlet Node = require('./node')\n\nfunction postcss(...plugins) {\n  if (plugins.length === 1 && Array.isArray(plugins[0])) {\n    plugins = plugins[0]\n  }\n  return new Processor(plugins)\n}\n\npostcss.plugin = function plugin(name, initializer) {\n  let warningPrinted = false\n  function creator(...args) {\n    // eslint-disable-next-line no-console\n    if (console && console.warn && !warningPrinted) {\n      warningPrinted = true\n      // eslint-disable-next-line no-console\n      console.warn(\n        name +\n          ': postcss.plugin was deprecated. Migration guide:\\n' +\n          'https://evilmartians.com/chronicles/postcss-8-plugin-migration'\n      )\n      if (process.env.LANG && process.env.LANG.startsWith('cn')) {\n        /* c8 ignore next 7 */\n        // eslint-disable-next-line no-console\n        console.warn(\n          name +\n            ':  postcss.plugin . :\\n' +\n            'https://www.w3ctech.com/topic/2226'\n        )\n      }\n    }\n    let transformer = initializer(...args)\n    transformer.postcssPlugin = name\n    transformer.postcssVersion = new Processor().version\n    return transformer\n  }\n\n  let cache\n  Object.defineProperty(creator, 'postcss', {\n    get() {\n      if (!cache) cache = creator()\n      return cache\n    }\n  })\n\n  creator.process = function (css, processOpts, pluginOpts) {\n    return postcss([creator(pluginOpts)]).process(css, processOpts)\n  }\n\n  return creator\n}\n\npostcss.stringify = stringify\npostcss.parse = parse\npostcss.fromJSON = fromJSON\npostcss.list = list\n\npostcss.comment = defaults => new Comment(defaults)\npostcss.atRule = defaults => new AtRule(defaults)\npostcss.decl = defaults => new Declaration(defaults)\npostcss.rule = defaults => new Rule(defaults)\npostcss.root = defaults => new Root(defaults)\npostcss.document = defaults => new Document(defaults)\n\npostcss.CssSyntaxError = CssSyntaxError\npostcss.Declaration = Declaration\npostcss.Container = Container\npostcss.Processor = Processor\npostcss.Document = Document\npostcss.Comment = Comment\npostcss.Warning = Warning\npostcss.AtRule = AtRule\npostcss.Result = Result\npostcss.Input = Input\npostcss.Rule = Rule\npostcss.Root = Root\npostcss.Node = Node\n\nLazyResult.registerPostcss(postcss)\n\nmodule.exports = postcss\npostcss.default = postcss\n","'use strict'\n\nlet { SourceMapConsumer, SourceMapGenerator } = require('source-map-js')\nlet { existsSync, readFileSync } = require('fs')\nlet { dirname, join } = require('path')\n\nfunction fromBase64(str) {\n  if (Buffer) {\n    return Buffer.from(str, 'base64').toString()\n  } else {\n    /* c8 ignore next 2 */\n    return window.atob(str)\n  }\n}\n\nclass PreviousMap {\n  constructor(css, opts) {\n    if (opts.map === false) return\n    this.loadAnnotation(css)\n    this.inline = this.startWith(this.annotation, 'data:')\n\n    let prev = opts.map ? opts.map.prev : undefined\n    let text = this.loadMap(opts.from, prev)\n    if (!this.mapFile && opts.from) {\n      this.mapFile = opts.from\n    }\n    if (this.mapFile) this.root = dirname(this.mapFile)\n    if (text) this.text = text\n  }\n\n  consumer() {\n    if (!this.consumerCache) {\n      this.consumerCache = new SourceMapConsumer(this.text)\n    }\n    return this.consumerCache\n  }\n\n  decodeInline(text) {\n    let baseCharsetUri = /^data:application\\/json;charset=utf-?8;base64,/\n    let baseUri = /^data:application\\/json;base64,/\n    let charsetUri = /^data:application\\/json;charset=utf-?8,/\n    let uri = /^data:application\\/json,/\n\n    if (charsetUri.test(text) || uri.test(text)) {\n      return decodeURIComponent(text.substr(RegExp.lastMatch.length))\n    }\n\n    if (baseCharsetUri.test(text) || baseUri.test(text)) {\n      return fromBase64(text.substr(RegExp.lastMatch.length))\n    }\n\n    let encoding = text.match(/data:application\\/json;([^,]+),/)[1]\n    throw new Error('Unsupported source map encoding ' + encoding)\n  }\n\n  getAnnotationURL(sourceMapString) {\n    return sourceMapString.replace(/^\\/\\*\\s*# sourceMappingURL=/, '').trim()\n  }\n\n  isMap(map) {\n    if (typeof map !== 'object') return false\n    return (\n      typeof map.mappings === 'string' ||\n      typeof map._mappings === 'string' ||\n      Array.isArray(map.sections)\n    )\n  }\n\n  loadAnnotation(css) {\n    let comments = css.match(/\\/\\*\\s*# sourceMappingURL=/gm)\n    if (!comments) return\n\n    // sourceMappingURLs from comments, strings, etc.\n    let start = css.lastIndexOf(comments.pop())\n    let end = css.indexOf('*/', start)\n\n    if (start > -1 && end > -1) {\n      // Locate the last sourceMappingURL to avoid pickin\n      this.annotation = this.getAnnotationURL(css.substring(start, end))\n    }\n  }\n\n  loadFile(path) {\n    this.root = dirname(path)\n    if (existsSync(path)) {\n      this.mapFile = path\n      return readFileSync(path, 'utf-8').toString().trim()\n    }\n  }\n\n  loadMap(file, prev) {\n    if (prev === false) return false\n\n    if (prev) {\n      if (typeof prev === 'string') {\n        return prev\n      } else if (typeof prev === 'function') {\n        let prevPath = prev(file)\n        if (prevPath) {\n          let map = this.loadFile(prevPath)\n          if (!map) {\n            throw new Error(\n              'Unable to load previous source map: ' + prevPath.toString()\n            )\n          }\n          return map\n        }\n      } else if (prev instanceof SourceMapConsumer) {\n        return SourceMapGenerator.fromSourceMap(prev).toString()\n      } else if (prev instanceof SourceMapGenerator) {\n        return prev.toString()\n      } else if (this.isMap(prev)) {\n        return JSON.stringify(prev)\n      } else {\n        throw new Error(\n          'Unsupported previous source map format: ' + prev.toString()\n        )\n      }\n    } else if (this.inline) {\n      return this.decodeInline(this.annotation)\n    } else if (this.annotation) {\n      let map = this.annotation\n      if (file) map = join(dirname(file), map)\n      return this.loadFile(map)\n    }\n  }\n\n  startWith(string, start) {\n    if (!string) return false\n    return string.substr(0, start.length) === start\n  }\n\n  withContent() {\n    return !!(\n      this.consumer().sourcesContent &&\n      this.consumer().sourcesContent.length > 0\n    )\n  }\n}\n\nmodule.exports = PreviousMap\nPreviousMap.default = PreviousMap\n","'use strict'\n\nlet NoWorkResult = require('./no-work-result')\nlet LazyResult = require('./lazy-result')\nlet Document = require('./document')\nlet Root = require('./root')\n\nclass Processor {\n  constructor(plugins = []) {\n    this.version = '8.4.35'\n    this.plugins = this.normalize(plugins)\n  }\n\n  normalize(plugins) {\n    let normalized = []\n    for (let i of plugins) {\n      if (i.postcss === true) {\n        i = i()\n      } else if (i.postcss) {\n        i = i.postcss\n      }\n\n      if (typeof i === 'object' && Array.isArray(i.plugins)) {\n        normalized = normalized.concat(i.plugins)\n      } else if (typeof i === 'object' && i.postcssPlugin) {\n        normalized.push(i)\n      } else if (typeof i === 'function') {\n        normalized.push(i)\n      } else if (typeof i === 'object' && (i.parse || i.stringify)) {\n        if (process.env.NODE_ENV !== 'production') {\n          throw new Error(\n            'PostCSS syntaxes cannot be used as plugins. Instead, please use ' +\n              'one of the syntax/parser/stringifier options as outlined ' +\n              'in your PostCSS runner documentation.'\n          )\n        }\n      } else {\n        throw new Error(i + ' is not a PostCSS plugin')\n      }\n    }\n    return normalized\n  }\n\n  process(css, opts = {}) {\n    if (\n      !this.plugins.length &&\n      !opts.parser &&\n      !opts.stringifier &&\n      !opts.syntax\n    ) {\n      return new NoWorkResult(this, css, opts)\n    } else {\n      return new LazyResult(this, css, opts)\n    }\n  }\n\n  use(plugin) {\n    this.plugins = this.plugins.concat(this.normalize([plugin]))\n    return this\n  }\n}\n\nmodule.exports = Processor\nProcessor.default = Processor\n\nRoot.registerProcessor(Processor)\nDocument.registerProcessor(Processor)\n","'use strict'\n\nlet Warning = require('./warning')\n\nclass Result {\n  constructor(processor, root, opts) {\n    this.processor = processor\n    this.messages = []\n    this.root = root\n    this.opts = opts\n    this.css = undefined\n    this.map = undefined\n  }\n\n  toString() {\n    return this.css\n  }\n\n  warn(text, opts = {}) {\n    if (!opts.plugin) {\n      if (this.lastPlugin && this.lastPlugin.postcssPlugin) {\n        opts.plugin = this.lastPlugin.postcssPlugin\n      }\n    }\n\n    let warning = new Warning(text, opts)\n    this.messages.push(warning)\n\n    return warning\n  }\n\n  warnings() {\n    return this.messages.filter(i => i.type === 'warning')\n  }\n\n  get content() {\n    return this.css\n  }\n}\n\nmodule.exports = Result\nResult.default = Result\n","'use strict'\n\nlet Container = require('./container')\n\nlet LazyResult, Processor\n\nclass Root extends Container {\n  constructor(defaults) {\n    super(defaults)\n    this.type = 'root'\n    if (!this.nodes) this.nodes = []\n  }\n\n  normalize(child, sample, type) {\n    let nodes = super.normalize(child)\n\n    if (sample) {\n      if (type === 'prepend') {\n        if (this.nodes.length > 1) {\n          sample.raws.before = this.nodes[1].raws.before\n        } else {\n          delete sample.raws.before\n        }\n      } else if (this.first !== sample) {\n        for (let node of nodes) {\n          node.raws.before = sample.raws.before\n        }\n      }\n    }\n\n    return nodes\n  }\n\n  removeChild(child, ignore) {\n    let index = this.index(child)\n\n    if (!ignore && index === 0 && this.nodes.length > 1) {\n      this.nodes[1].raws.before = this.nodes[index].raws.before\n    }\n\n    return super.removeChild(child)\n  }\n\n  toResult(opts = {}) {\n    let lazy = new LazyResult(new Processor(), this, opts)\n    return lazy.stringify()\n  }\n}\n\nRoot.registerLazyResult = dependant => {\n  LazyResult = dependant\n}\n\nRoot.registerProcessor = dependant => {\n  Processor = dependant\n}\n\nmodule.exports = Root\nRoot.default = Root\n\nContainer.registerRoot(Root)\n","'use strict'\n\nlet Container = require('./container')\nlet list = require('./list')\n\nclass Rule extends Container {\n  constructor(defaults) {\n    super(defaults)\n    this.type = 'rule'\n    if (!this.nodes) this.nodes = []\n  }\n\n  get selectors() {\n    return list.comma(this.selector)\n  }\n\n  set selectors(values) {\n    let match = this.selector ? this.selector.match(/,\\s*/) : null\n    let sep = match ? match[0] : ',' + this.raw('between', 'beforeOpen')\n    this.selector = values.join(sep)\n  }\n}\n\nmodule.exports = Rule\nRule.default = Rule\n\nContainer.registerRule(Rule)\n","'use strict'\n\nconst DEFAULT_RAW = {\n  after: '\\n',\n  beforeClose: '\\n',\n  beforeComment: '\\n',\n  beforeDecl: '\\n',\n  beforeOpen: ' ',\n  beforeRule: '\\n',\n  colon: ': ',\n  commentLeft: ' ',\n  commentRight: ' ',\n  emptyBody: '',\n  indent: '    ',\n  semicolon: false\n}\n\nfunction capitalize(str) {\n  return str[0].toUpperCase() + str.slice(1)\n}\n\nclass Stringifier {\n  constructor(builder) {\n    this.builder = builder\n  }\n\n  atrule(node, semicolon) {\n    let name = '@' + node.name\n    let params = node.params ? this.rawValue(node, 'params') : ''\n\n    if (typeof node.raws.afterName !== 'undefined') {\n      name += node.raws.afterName\n    } else if (params) {\n      name += ' '\n    }\n\n    if (node.nodes) {\n      this.block(node, name + params)\n    } else {\n      let end = (node.raws.between || '') + (semicolon ? ';' : '')\n      this.builder(name + params + end, node)\n    }\n  }\n\n  beforeAfter(node, detect) {\n    let value\n    if (node.type === 'decl') {\n      value = this.raw(node, null, 'beforeDecl')\n    } else if (node.type === 'comment') {\n      value = this.raw(node, null, 'beforeComment')\n    } else if (detect === 'before') {\n      value = this.raw(node, null, 'beforeRule')\n    } else {\n      value = this.raw(node, null, 'beforeClose')\n    }\n\n    let buf = node.parent\n    let depth = 0\n    while (buf && buf.type !== 'root') {\n      depth += 1\n      buf = buf.parent\n    }\n\n    if (value.includes('\\n')) {\n      let indent = this.raw(node, null, 'indent')\n      if (indent.length) {\n        for (let step = 0; step < depth; step++) value += indent\n      }\n    }\n\n    return value\n  }\n\n  block(node, start) {\n    let between = this.raw(node, 'between', 'beforeOpen')\n    this.builder(start + between + '{', node, 'start')\n\n    let after\n    if (node.nodes && node.nodes.length) {\n      this.body(node)\n      after = this.raw(node, 'after')\n    } else {\n      after = this.raw(node, 'after', 'emptyBody')\n    }\n\n    if (after) this.builder(after)\n    this.builder('}', node, 'end')\n  }\n\n  body(node) {\n    let last = node.nodes.length - 1\n    while (last > 0) {\n      if (node.nodes[last].type !== 'comment') break\n      last -= 1\n    }\n\n    let semicolon = this.raw(node, 'semicolon')\n    for (let i = 0; i < node.nodes.length; i++) {\n      let child = node.nodes[i]\n      let before = this.raw(child, 'before')\n      if (before) this.builder(before)\n      this.stringify(child, last !== i || semicolon)\n    }\n  }\n\n  comment(node) {\n    let left = this.raw(node, 'left', 'commentLeft')\n    let right = this.raw(node, 'right', 'commentRight')\n    this.builder('/*' + left + node.text + right + '*/', node)\n  }\n\n  decl(node, semicolon) {\n    let between = this.raw(node, 'between', 'colon')\n    let string = node.prop + between + this.rawValue(node, 'value')\n\n    if (node.important) {\n      string += node.raws.important || ' !important'\n    }\n\n    if (semicolon) string += ';'\n    this.builder(string, node)\n  }\n\n  document(node) {\n    this.body(node)\n  }\n\n  raw(node, own, detect) {\n    let value\n    if (!detect) detect = own\n\n    // Already had\n    if (own) {\n      value = node.raws[own]\n      if (typeof value !== 'undefined') return value\n    }\n\n    let parent = node.parent\n\n    if (detect === 'before') {\n      // Hack for first rule in CSS\n      if (!parent || (parent.type === 'root' && parent.first === node)) {\n        return ''\n      }\n\n      // `root` nodes in `document` should use only their own raws\n      if (parent && parent.type === 'document') {\n        return ''\n      }\n    }\n\n    // Floating child without parent\n    if (!parent) return DEFAULT_RAW[detect]\n\n    // Detect style by other nodes\n    let root = node.root()\n    if (!root.rawCache) root.rawCache = {}\n    if (typeof root.rawCache[detect] !== 'undefined') {\n      return root.rawCache[detect]\n    }\n\n    if (detect === 'before' || detect === 'after') {\n      return this.beforeAfter(node, detect)\n    } else {\n      let method = 'raw' + capitalize(detect)\n      if (this[method]) {\n        value = this[method](root, node)\n      } else {\n        root.walk(i => {\n          value = i.raws[own]\n          if (typeof value !== 'undefined') return false\n        })\n      }\n    }\n\n    if (typeof value === 'undefined') value = DEFAULT_RAW[detect]\n\n    root.rawCache[detect] = value\n    return value\n  }\n\n  rawBeforeClose(root) {\n    let value\n    root.walk(i => {\n      if (i.nodes && i.nodes.length > 0) {\n        if (typeof i.raws.after !== 'undefined') {\n          value = i.raws.after\n          if (value.includes('\\n')) {\n            value = value.replace(/[^\\n]+$/, '')\n          }\n          return false\n        }\n      }\n    })\n    if (value) value = value.replace(/\\S/g, '')\n    return value\n  }\n\n  rawBeforeComment(root, node) {\n    let value\n    root.walkComments(i => {\n      if (typeof i.raws.before !== 'undefined') {\n        value = i.raws.before\n        if (value.includes('\\n')) {\n          value = value.replace(/[^\\n]+$/, '')\n        }\n        return false\n      }\n    })\n    if (typeof value === 'undefined') {\n      value = this.raw(node, null, 'beforeDecl')\n    } else if (value) {\n      value = value.replace(/\\S/g, '')\n    }\n    return value\n  }\n\n  rawBeforeDecl(root, node) {\n    let value\n    root.walkDecls(i => {\n      if (typeof i.raws.before !== 'undefined') {\n        value = i.raws.before\n        if (value.includes('\\n')) {\n          value = value.replace(/[^\\n]+$/, '')\n        }\n        return false\n      }\n    })\n    if (typeof value === 'undefined') {\n      value = this.raw(node, null, 'beforeRule')\n    } else if (value) {\n      value = value.replace(/\\S/g, '')\n    }\n    return value\n  }\n\n  rawBeforeOpen(root) {\n    let value\n    root.walk(i => {\n      if (i.type !== 'decl') {\n        value = i.raws.between\n        if (typeof value !== 'undefined') return false\n      }\n    })\n    return value\n  }\n\n  rawBeforeRule(root) {\n    let value\n    root.walk(i => {\n      if (i.nodes && (i.parent !== root || root.first !== i)) {\n        if (typeof i.raws.before !== 'undefined') {\n          value = i.raws.before\n          if (value.includes('\\n')) {\n            value = value.replace(/[^\\n]+$/, '')\n          }\n          return false\n        }\n      }\n    })\n    if (value) value = value.replace(/\\S/g, '')\n    return value\n  }\n\n  rawColon(root) {\n    let value\n    root.walkDecls(i => {\n      if (typeof i.raws.between !== 'undefined') {\n        value = i.raws.between.replace(/[^\\s:]/g, '')\n        return false\n      }\n    })\n    return value\n  }\n\n  rawEmptyBody(root) {\n    let value\n    root.walk(i => {\n      if (i.nodes && i.nodes.length === 0) {\n        value = i.raws.after\n        if (typeof value !== 'undefined') return false\n      }\n    })\n    return value\n  }\n\n  rawIndent(root) {\n    if (root.raws.indent) return root.raws.indent\n    let value\n    root.walk(i => {\n      let p = i.parent\n      if (p && p !== root && p.parent && p.parent === root) {\n        if (typeof i.raws.before !== 'undefined') {\n          let parts = i.raws.before.split('\\n')\n          value = parts[parts.length - 1]\n          value = value.replace(/\\S/g, '')\n          return false\n        }\n      }\n    })\n    return value\n  }\n\n  rawSemicolon(root) {\n    let value\n    root.walk(i => {\n      if (i.nodes && i.nodes.length && i.last.type === 'decl') {\n        value = i.raws.semicolon\n        if (typeof value !== 'undefined') return false\n      }\n    })\n    return value\n  }\n\n  rawValue(node, prop) {\n    let value = node[prop]\n    let raw = node.raws[prop]\n    if (raw && raw.value === value) {\n      return raw.raw\n    }\n\n    return value\n  }\n\n  root(node) {\n    this.body(node)\n    if (node.raws.after) this.builder(node.raws.after)\n  }\n\n  rule(node) {\n    this.block(node, this.rawValue(node, 'selector'))\n    if (node.raws.ownSemicolon) {\n      this.builder(node.raws.ownSemicolon, node, 'end')\n    }\n  }\n\n  stringify(node, semicolon) {\n    /* c8 ignore start */\n    if (!this[node.type]) {\n      throw new Error(\n        'Unknown AST node type ' +\n          node.type +\n          '. ' +\n          'Maybe you need to change PostCSS stringifier.'\n      )\n    }\n    /* c8 ignore stop */\n    this[node.type](node, semicolon)\n  }\n}\n\nmodule.exports = Stringifier\nStringifier.default = Stringifier\n","'use strict'\n\nlet Stringifier = require('./stringifier')\n\nfunction stringify(node, builder) {\n  let str = new Stringifier(builder)\n  str.stringify(node)\n}\n\nmodule.exports = stringify\nstringify.default = stringify\n","'use strict'\n\nmodule.exports.isClean = Symbol('isClean')\n\nmodule.exports.my = Symbol('my')\n","'use strict'\n\nconst SINGLE_QUOTE = \"'\".charCodeAt(0)\nconst DOUBLE_QUOTE = '\"'.charCodeAt(0)\nconst BACKSLASH = '\\\\'.charCodeAt(0)\nconst SLASH = '/'.charCodeAt(0)\nconst NEWLINE = '\\n'.charCodeAt(0)\nconst SPACE = ' '.charCodeAt(0)\nconst FEED = '\\f'.charCodeAt(0)\nconst TAB = '\\t'.charCodeAt(0)\nconst CR = '\\r'.charCodeAt(0)\nconst OPEN_SQUARE = '['.charCodeAt(0)\nconst CLOSE_SQUARE = ']'.charCodeAt(0)\nconst OPEN_PARENTHESES = '('.charCodeAt(0)\nconst CLOSE_PARENTHESES = ')'.charCodeAt(0)\nconst OPEN_CURLY = '{'.charCodeAt(0)\nconst CLOSE_CURLY = '}'.charCodeAt(0)\nconst SEMICOLON = ';'.charCodeAt(0)\nconst ASTERISK = '*'.charCodeAt(0)\nconst COLON = ':'.charCodeAt(0)\nconst AT = '@'.charCodeAt(0)\n\nconst RE_AT_END = /[\\t\\n\\f\\r \"#'()/;[\\\\\\]{}]/g\nconst RE_WORD_END = /[\\t\\n\\f\\r !\"#'():;@[\\\\\\]{}]|\\/(?=\\*)/g\nconst RE_BAD_BRACKET = /.[\\r\\n\"'(/\\\\]/\nconst RE_HEX_ESCAPE = /[\\da-f]/i\n\nmodule.exports = function tokenizer(input, options = {}) {\n  let css = input.css.valueOf()\n  let ignore = options.ignoreErrors\n\n  let code, next, quote, content, escape\n  let escaped, escapePos, prev, n, currentToken\n\n  let length = css.length\n  let pos = 0\n  let buffer = []\n  let returned = []\n\n  function position() {\n    return pos\n  }\n\n  function unclosed(what) {\n    throw input.error('Unclosed ' + what, pos)\n  }\n\n  function endOfFile() {\n    return returned.length === 0 && pos >= length\n  }\n\n  function nextToken(opts) {\n    if (returned.length) return returned.pop()\n    if (pos >= length) return\n\n    let ignoreUnclosed = opts ? opts.ignoreUnclosed : false\n\n    code = css.charCodeAt(pos)\n\n    switch (code) {\n      case NEWLINE:\n      case SPACE:\n      case TAB:\n      case CR:\n      case FEED: {\n        next = pos\n        do {\n          next += 1\n          code = css.charCodeAt(next)\n        } while (\n          code === SPACE ||\n          code === NEWLINE ||\n          code === TAB ||\n          code === CR ||\n          code === FEED\n        )\n\n        currentToken = ['space', css.slice(pos, next)]\n        pos = next - 1\n        break\n      }\n\n      case OPEN_SQUARE:\n      case CLOSE_SQUARE:\n      case OPEN_CURLY:\n      case CLOSE_CURLY:\n      case COLON:\n      case SEMICOLON:\n      case CLOSE_PARENTHESES: {\n        let controlChar = String.fromCharCode(code)\n        currentToken = [controlChar, controlChar, pos]\n        break\n      }\n\n      case OPEN_PARENTHESES: {\n        prev = buffer.length ? buffer.pop()[1] : ''\n        n = css.charCodeAt(pos + 1)\n        if (\n          prev === 'url' &&\n          n !== SINGLE_QUOTE &&\n          n !== DOUBLE_QUOTE &&\n          n !== SPACE &&\n          n !== NEWLINE &&\n          n !== TAB &&\n          n !== FEED &&\n          n !== CR\n        ) {\n          next = pos\n          do {\n            escaped = false\n            next = css.indexOf(')', next + 1)\n            if (next === -1) {\n              if (ignore || ignoreUnclosed) {\n                next = pos\n                break\n              } else {\n                unclosed('bracket')\n              }\n            }\n            escapePos = next\n            while (css.charCodeAt(escapePos - 1) === BACKSLASH) {\n              escapePos -= 1\n              escaped = !escaped\n            }\n          } while (escaped)\n\n          currentToken = ['brackets', css.slice(pos, next + 1), pos, next]\n\n          pos = next\n        } else {\n          next = css.indexOf(')', pos + 1)\n          content = css.slice(pos, next + 1)\n\n          if (next === -1 || RE_BAD_BRACKET.test(content)) {\n            currentToken = ['(', '(', pos]\n          } else {\n            currentToken = ['brackets', content, pos, next]\n            pos = next\n          }\n        }\n\n        break\n      }\n\n      case SINGLE_QUOTE:\n      case DOUBLE_QUOTE: {\n        quote = code === SINGLE_QUOTE ? \"'\" : '\"'\n        next = pos\n        do {\n          escaped = false\n          next = css.indexOf(quote, next + 1)\n          if (next === -1) {\n            if (ignore || ignoreUnclosed) {\n              next = pos + 1\n              break\n            } else {\n              unclosed('string')\n            }\n          }\n          escapePos = next\n          while (css.charCodeAt(escapePos - 1) === BACKSLASH) {\n            escapePos -= 1\n            escaped = !escaped\n          }\n        } while (escaped)\n\n        currentToken = ['string', css.slice(pos, next + 1), pos, next]\n        pos = next\n        break\n      }\n\n      case AT: {\n        RE_AT_END.lastIndex = pos + 1\n        RE_AT_END.test(css)\n        if (RE_AT_END.lastIndex === 0) {\n          next = css.length - 1\n        } else {\n          next = RE_AT_END.lastIndex - 2\n        }\n\n        currentToken = ['at-word', css.slice(pos, next + 1), pos, next]\n\n        pos = next\n        break\n      }\n\n      case BACKSLASH: {\n        next = pos\n        escape = true\n        while (css.charCodeAt(next + 1) === BACKSLASH) {\n          next += 1\n          escape = !escape\n        }\n        code = css.charCodeAt(next + 1)\n        if (\n          escape &&\n          code !== SLASH &&\n          code !== SPACE &&\n          code !== NEWLINE &&\n          code !== TAB &&\n          code !== CR &&\n          code !== FEED\n        ) {\n          next += 1\n          if (RE_HEX_ESCAPE.test(css.charAt(next))) {\n            while (RE_HEX_ESCAPE.test(css.charAt(next + 1))) {\n              next += 1\n            }\n            if (css.charCodeAt(next + 1) === SPACE) {\n              next += 1\n            }\n          }\n        }\n\n        currentToken = ['word', css.slice(pos, next + 1), pos, next]\n\n        pos = next\n        break\n      }\n\n      default: {\n        if (code === SLASH && css.charCodeAt(pos + 1) === ASTERISK) {\n          next = css.indexOf('*/', pos + 2) + 1\n          if (next === 0) {\n            if (ignore || ignoreUnclosed) {\n              next = css.length\n            } else {\n              unclosed('comment')\n            }\n          }\n\n          currentToken = ['comment', css.slice(pos, next + 1), pos, next]\n          pos = next\n        } else {\n          RE_WORD_END.lastIndex = pos + 1\n          RE_WORD_END.test(css)\n          if (RE_WORD_END.lastIndex === 0) {\n            next = css.length - 1\n          } else {\n            next = RE_WORD_END.lastIndex - 2\n          }\n\n          currentToken = ['word', css.slice(pos, next + 1), pos, next]\n          buffer.push(currentToken)\n          pos = next\n        }\n\n        break\n      }\n    }\n\n    pos++\n    return currentToken\n  }\n\n  function back(token) {\n    returned.push(token)\n  }\n\n  return {\n    back,\n    endOfFile,\n    nextToken,\n    position\n  }\n}\n","/* eslint-disable no-console */\n'use strict'\n\nlet printed = {}\n\nmodule.exports = function warnOnce(message) {\n  if (printed[message]) return\n  printed[message] = true\n\n  if (typeof console !== 'undefined' && console.warn) {\n    console.warn(message)\n  }\n}\n","'use strict'\n\nclass Warning {\n  constructor(text, opts = {}) {\n    this.type = 'warning'\n    this.text = text\n\n    if (opts.node && opts.node.source) {\n      let range = opts.node.rangeBy(opts)\n      this.line = range.start.line\n      this.column = range.start.column\n      this.endLine = range.end.line\n      this.endColumn = range.end.column\n    }\n\n    for (let opt in opts) this[opt] = opts[opt]\n  }\n\n  toString() {\n    if (this.node) {\n      return this.node.error(this.text, {\n        index: this.index,\n        plugin: this.plugin,\n        word: this.word\n      }).message\n    }\n\n    if (this.plugin) {\n      return this.plugin + ': ' + this.text\n    }\n\n    return this.text\n  }\n}\n\nmodule.exports = Warning\nWarning.default = Warning\n","module.exports = window[\"React\"];","let urlAlphabet =\n  'useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict'\nlet customAlphabet = (alphabet, defaultSize = 21) => {\n  return (size = defaultSize) => {\n    let id = ''\n    let i = size\n    while (i--) {\n      id += alphabet[(Math.random() * alphabet.length) | 0]\n    }\n    return id\n  }\n}\nlet nanoid = (size = 21) => {\n  let id = ''\n  let i = size\n  while (i--) {\n    id += urlAlphabet[(Math.random() * 64) | 0]\n  }\n  return id\n}\nmodule.exports = { nanoid, customAlphabet }\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"blocks\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"element\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"data\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"compose\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"hooks\"];","/**\n * WordPress dependencies\n */\nimport { createContext, useContext } from '@wordpress/element';\n\nexport const mayDisplayControlsKey = Symbol( 'mayDisplayControls' );\nexport const mayDisplayParentControlsKey = Symbol( 'mayDisplayParentControls' );\nexport const blockEditingModeKey = Symbol( 'blockEditingMode' );\nexport const blockBindingsKey = Symbol( 'blockBindings' );\n\nexport const DEFAULT_BLOCK_EDIT_CONTEXT = {\n\tname: '',\n\tisSelected: false,\n};\n\nconst Context = createContext( DEFAULT_BLOCK_EDIT_CONTEXT );\nconst { Provider } = Context;\n\nexport { Provider as BlockEditContextProvider };\n\n/**\n * A hook that returns the block edit context.\n *\n * @return {Object} Block edit context\n */\nexport function useBlockEditContext() {\n\treturn useContext( Context );\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"deprecated\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"i18n\"];","/**\r\n * WordPress dependencies\r\n */\r\nimport { __, _x } from '@wordpress/i18n';\r\n\r\nexport const PREFERENCES_DEFAULTS = {\r\n\tinsertUsage: {},\r\n};\r\n\r\n/**\r\n * The default editor settings\r\n *\r\n * @typedef {Object} SETTINGS_DEFAULT\r\n * @property {boolean}       alignWide                              Enable/Disable Wide/Full Alignments\r\n * @property {boolean}       supportsLayout                         Enable/disable layouts support in container blocks.\r\n * @property {boolean}       imageEditing                           Image Editing settings set to false to disable.\r\n * @property {Array}         imageSizes                             Available image sizes\r\n * @property {number}        maxWidth                               Max width to constraint resizing\r\n * @property {boolean|Array} allowedBlockTypes                      Allowed block types\r\n * @property {boolean}       hasFixedToolbar                        Whether or not the editor toolbar is fixed\r\n * @property {boolean}       distractionFree                        Whether or not the editor UI is distraction free\r\n * @property {boolean}       focusMode                              Whether the focus mode is enabled or not\r\n * @property {Array}         styles                                 Editor Styles\r\n * @property {boolean}       keepCaretInsideBlock                   Whether caret should move between blocks in edit mode\r\n * @property {string}        bodyPlaceholder                        Empty post placeholder\r\n * @property {string}        titlePlaceholder                       Empty title placeholder\r\n * @property {boolean}       canLockBlocks                          Whether the user can manage Block Lock state\r\n * @property {boolean}       codeEditingEnabled                     Whether or not the user can switch to the code editor\r\n * @property {boolean}       generateAnchors                        Enable/Disable auto anchor generation for Heading blocks\r\n * @property {boolean}       enableOpenverseMediaCategory           Enable/Disable the Openverse media category in the inserter.\r\n * @property {boolean}       clearBlockSelection                    Whether the block editor should clear selection on mousedown when a block is not clicked.\r\n * @property {boolean}       __experimentalCanUserUseUnfilteredHTML Whether the user should be able to use unfiltered HTML or the HTML should be filtered e.g., to remove elements considered insecure like iframes.\r\n * @property {boolean}       __experimentalBlockDirectory           Whether the user has enabled the Block Directory\r\n * @property {Array}         __experimentalBlockPatterns            Array of objects representing the block patterns\r\n * @property {Array}         __experimentalBlockPatternCategories   Array of objects representing the block pattern categories\r\n * @property {boolean}       __unstableGalleryWithImageBlocks       Whether the user has enabled the refactored gallery block which uses InnerBlocks\r\n */\r\nexport const SETTINGS_DEFAULTS = {\r\n\talignWide: false,\r\n\tsupportsLayout: true,\r\n\r\n\t// colors setting is not used anymore now defaults are passed from theme.json on the server and core has its own defaults.\r\n\t// The setting is only kept for backward compatibility purposes.\r\n\tcolors: [\r\n\t\t{\r\n\t\t\tname: __( 'Black' ),\r\n\t\t\tslug: 'black',\r\n\t\t\tcolor: '#000000',\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: __( 'Cyan bluish gray' ),\r\n\t\t\tslug: 'cyan-bluish-gray',\r\n\t\t\tcolor: '#abb8c3',\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: __( 'White' ),\r\n\t\t\tslug: 'white',\r\n\t\t\tcolor: '#ffffff',\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: __( 'Pale pink' ),\r\n\t\t\tslug: 'pale-pink',\r\n\t\t\tcolor: '#f78da7',\r\n\t\t},\r\n\t\t{ name: __( 'Vivid red' ), slug: 'vivid-red', color: '#cf2e2e' },\r\n\t\t{\r\n\t\t\tname: __( 'Luminous vivid orange' ),\r\n\t\t\tslug: 'luminous-vivid-orange',\r\n\t\t\tcolor: '#ff6900',\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: __( 'Luminous vivid amber' ),\r\n\t\t\tslug: 'luminous-vivid-amber',\r\n\t\t\tcolor: '#fcb900',\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: __( 'Light green cyan' ),\r\n\t\t\tslug: 'light-green-cyan',\r\n\t\t\tcolor: '#7bdcb5',\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: __( 'Vivid green cyan' ),\r\n\t\t\tslug: 'vivid-green-cyan',\r\n\t\t\tcolor: '#00d084',\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: __( 'Pale cyan blue' ),\r\n\t\t\tslug: 'pale-cyan-blue',\r\n\t\t\tcolor: '#8ed1fc',\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: __( 'Vivid cyan blue' ),\r\n\t\t\tslug: 'vivid-cyan-blue',\r\n\t\t\tcolor: '#0693e3',\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: __( 'Vivid purple' ),\r\n\t\t\tslug: 'vivid-purple',\r\n\t\t\tcolor: '#9b51e0',\r\n\t\t},\r\n\t],\r\n\t// fontSizes setting is not used anymore now defaults are passed from theme.json on the server and core has its own defaults.\r\n\t// The setting is only kept for backward compatibility purposes.\r\n\tfontSizes: [\r\n\t\t{\r\n\t\t\tname: _x( 'Small', 'font size name' ),\r\n\t\t\tsize: 13,\r\n\t\t\tslug: 'small',\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: _x( 'Normal', 'font size name' ),\r\n\t\t\tsize: 16,\r\n\t\t\tslug: 'normal',\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: _x( 'Medium', 'font size name' ),\r\n\t\t\tsize: 20,\r\n\t\t\tslug: 'medium',\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: _x( 'Large', 'font size name' ),\r\n\t\t\tsize: 36,\r\n\t\t\tslug: 'large',\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: _x( 'Huge', 'font size name' ),\r\n\t\t\tsize: 42,\r\n\t\t\tslug: 'huge',\r\n\t\t},\r\n\t],\r\n\r\n\t// Image default size slug.\r\n\timageDefaultSize: 'large',\r\n\r\n\timageSizes: [\r\n\t\t{ slug: 'thumbnail', name: __( 'Thumbnail' ) },\r\n\t\t{ slug: 'medium', name: __( 'Medium' ) },\r\n\t\t{ slug: 'large', name: __( 'Large' ) },\r\n\t\t{ slug: 'full', name: __( 'Full Size' ) },\r\n\t],\r\n\r\n\t// Allow plugin to disable Image Editor if need be.\r\n\timageEditing: true,\r\n\r\n\t// This is current max width of the block inner area\r\n\t// It's used to constraint image resizing and this value could be overridden later by themes\r\n\tmaxWidth: 580,\r\n\r\n\t// Allowed block types for the editor, defaulting to true (all supported).\r\n\tallowedBlockTypes: true,\r\n\r\n\t// Maximum upload size in bytes allowed for the site.\r\n\tmaxUploadFileSize: 0,\r\n\r\n\t// List of allowed mime types and file extensions.\r\n\tallowedMimeTypes: null,\r\n\r\n\t// Allows to disable block locking interface.\r\n\tcanLockBlocks: true,\r\n\r\n\t// Allows to disable Openverse media category in the inserter.\r\n\tenableOpenverseMediaCategory: true,\r\n\r\n\tclearBlockSelection: true,\r\n\r\n\t__experimentalCanUserUseUnfilteredHTML: false,\r\n\t__experimentalBlockDirectory: false,\r\n\t__mobileEnablePageTemplates: false,\r\n\t__experimentalBlockPatterns: [],\r\n\t__experimentalBlockPatternCategories: [],\r\n\t__unstableGalleryWithImageBlocks: false,\r\n\t__unstableIsPreviewMode: false,\r\n\r\n\t// These settings will be completely revamped in the future.\r\n\t// The goal is to evolve this into an API which will instruct\r\n\t// the block inspector to animate transitions between what it\r\n\t// displays based on the relationship between the selected block\r\n\t// and its parent, and only enable it if the parent is controlling\r\n\t// its children blocks.\r\n\tblockInspectorAnimation: {\r\n\t\tanimationParent: 'core/navigation',\r\n\t\t'core/navigation': { enterDirection: 'leftToRight' },\r\n\t\t'core/navigation-submenu': { enterDirection: 'rightToLeft' },\r\n\t\t'core/navigation-link': { enterDirection: 'rightToLeft' },\r\n\t\t'core/search': { enterDirection: 'rightToLeft' },\r\n\t\t'core/social-links': { enterDirection: 'rightToLeft' },\r\n\t\t'core/page-list': { enterDirection: 'rightToLeft' },\r\n\t\t'core/spacer': { enterDirection: 'rightToLeft' },\r\n\t\t'core/home-link': { enterDirection: 'rightToLeft' },\r\n\t\t'core/site-title': { enterDirection: 'rightToLeft' },\r\n\t\t'core/site-logo': { enterDirection: 'rightToLeft' },\r\n\t},\r\n\r\n\tgenerateAnchors: false,\r\n\t// gradients setting is not used anymore now defaults are passed from theme.json on the server and core has its own defaults.\r\n\t// The setting is only kept for backward compatibility purposes.\r\n\tgradients: [\r\n\t\t{\r\n\t\t\tname: __( 'Vivid cyan blue to vivid purple' ),\r\n\t\t\tgradient:\r\n\t\t\t\t'linear-gradient(135deg,rgba(6,147,227,1) 0%,rgb(155,81,224) 100%)',\r\n\t\t\tslug: 'vivid-cyan-blue-to-vivid-purple',\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: __( 'Light green cyan to vivid green cyan' ),\r\n\t\t\tgradient:\r\n\t\t\t\t'linear-gradient(135deg,rgb(122,220,180) 0%,rgb(0,208,130) 100%)',\r\n\t\t\tslug: 'light-green-cyan-to-vivid-green-cyan',\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: __( 'Luminous vivid amber to luminous vivid orange' ),\r\n\t\t\tgradient:\r\n\t\t\t\t'linear-gradient(135deg,rgba(252,185,0,1) 0%,rgba(255,105,0,1) 100%)',\r\n\t\t\tslug: 'luminous-vivid-amber-to-luminous-vivid-orange',\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: __( 'Luminous vivid orange to vivid red' ),\r\n\t\t\tgradient:\r\n\t\t\t\t'linear-gradient(135deg,rgba(255,105,0,1) 0%,rgb(207,46,46) 100%)',\r\n\t\t\tslug: 'luminous-vivid-orange-to-vivid-red',\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: __( 'Very light gray to cyan bluish gray' ),\r\n\t\t\tgradient:\r\n\t\t\t\t'linear-gradient(135deg,rgb(238,238,238) 0%,rgb(169,184,195) 100%)',\r\n\t\t\tslug: 'very-light-gray-to-cyan-bluish-gray',\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: __( 'Cool to warm spectrum' ),\r\n\t\t\tgradient:\r\n\t\t\t\t'linear-gradient(135deg,rgb(74,234,220) 0%,rgb(151,120,209) 20%,rgb(207,42,186) 40%,rgb(238,44,130) 60%,rgb(251,105,98) 80%,rgb(254,248,76) 100%)',\r\n\t\t\tslug: 'cool-to-warm-spectrum',\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: __( 'Blush light purple' ),\r\n\t\t\tgradient:\r\n\t\t\t\t'linear-gradient(135deg,rgb(255,206,236) 0%,rgb(152,150,240) 100%)',\r\n\t\t\tslug: 'blush-light-purple',\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: __( 'Blush bordeaux' ),\r\n\t\t\tgradient:\r\n\t\t\t\t'linear-gradient(135deg,rgb(254,205,165) 0%,rgb(254,45,45) 50%,rgb(107,0,62) 100%)',\r\n\t\t\tslug: 'blush-bordeaux',\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: __( 'Luminous dusk' ),\r\n\t\t\tgradient:\r\n\t\t\t\t'linear-gradient(135deg,rgb(255,203,112) 0%,rgb(199,81,192) 50%,rgb(65,88,208) 100%)',\r\n\t\t\tslug: 'luminous-dusk',\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: __( 'Pale ocean' ),\r\n\t\t\tgradient:\r\n\t\t\t\t'linear-gradient(135deg,rgb(255,245,203) 0%,rgb(182,227,212) 50%,rgb(51,167,181) 100%)',\r\n\t\t\tslug: 'pale-ocean',\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: __( 'Electric grass' ),\r\n\t\t\tgradient:\r\n\t\t\t\t'linear-gradient(135deg,rgb(202,248,128) 0%,rgb(113,206,126) 100%)',\r\n\t\t\tslug: 'electric-grass',\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: __( 'Midnight' ),\r\n\t\t\tgradient:\r\n\t\t\t\t'linear-gradient(135deg,rgb(2,3,129) 0%,rgb(40,116,252) 100%)',\r\n\t\t\tslug: 'midnight',\r\n\t\t},\r\n\t],\r\n\r\n\t__unstableResolvedAssets: { styles: [], scripts: [] },\r\n};\r\n","/**\r\n * Insert one or multiple elements into a given position of an array.\r\n *\r\n * @param {Array}  array    Source array.\r\n * @param {*}      elements Elements to insert.\r\n * @param {number} index    Insert Position.\r\n *\r\n * @return {Array} Result.\r\n */\r\nexport function insertAt( array, elements, index ) {\r\n\treturn [\r\n\t\t...array.slice( 0, index ),\r\n\t\t...( Array.isArray( elements ) ? elements : [ elements ] ),\r\n\t\t...array.slice( index ),\r\n\t];\r\n}\r\n\r\n/**\r\n * Moves an element in an array.\r\n *\r\n * @param {Array}  array Source array.\r\n * @param {number} from  Source index.\r\n * @param {number} to    Destination index.\r\n * @param {number} count Number of elements to move.\r\n *\r\n * @return {Array} Result.\r\n */\r\nexport function moveTo( array, from, to, count = 1 ) {\r\n\tconst withoutMovedElements = [ ...array ];\r\n\twithoutMovedElements.splice( from, count );\r\n\treturn insertAt(\r\n\t\twithoutMovedElements,\r\n\t\tarray.slice( from, from + count ),\r\n\t\tto\r\n\t);\r\n}\r\n","/**\n * External dependencies\n */\nimport fastDeepEqual from 'fast-deep-equal/es6';\n\n/**\n * WordPress dependencies\n */\nimport { pipe } from '@wordpress/compose';\nimport { combineReducers, select } from '@wordpress/data';\nimport { store as blocksStore } from '@wordpress/blocks';\n/**\n * Internal dependencies\n */\nimport { PREFERENCES_DEFAULTS, SETTINGS_DEFAULTS } from './defaults';\nimport { insertAt, moveTo } from './array';\n\nconst identity = ( x ) => x;\n\n/**\n * Given an array of blocks, returns an object where each key is a nesting\n * context, the value of which is an array of block client IDs existing within\n * that nesting context.\n *\n * @param {Array}   blocks       Blocks to map.\n * @param {?string} rootClientId Assumed root client ID.\n *\n * @return {Object} Block order map object.\n */\nfunction mapBlockOrder( blocks, rootClientId = '' ) {\n\tconst result = new Map();\n\tconst current = [];\n\tresult.set( rootClientId, current );\n\tblocks.forEach( ( block ) => {\n\t\tconst { clientId, innerBlocks } = block;\n\t\tcurrent.push( clientId );\n\t\tmapBlockOrder( innerBlocks, clientId ).forEach(\n\t\t\t( order, subClientId ) => {\n\t\t\t\tresult.set( subClientId, order );\n\t\t\t}\n\t\t);\n\t} );\n\treturn result;\n}\n\n/**\n * Given an array of blocks, returns an object where each key contains\n * the clientId of the block and the value is the parent of the block.\n *\n * @param {Array}   blocks       Blocks to map.\n * @param {?string} rootClientId Assumed root client ID.\n *\n * @return {Object} Block order map object.\n */\nfunction mapBlockParents( blocks, rootClientId = '' ) {\n\tconst result = [];\n\tconst stack = [ [ rootClientId, blocks ] ];\n\twhile ( stack.length ) {\n\t\tconst [ parent, currentBlocks ] = stack.shift();\n\t\tcurrentBlocks.forEach( ( { innerBlocks, ...block } ) => {\n\t\t\tresult.push( [ block.clientId, parent ] );\n\t\t\tif ( innerBlocks?.length ) {\n\t\t\t\tstack.push( [ block.clientId, innerBlocks ] );\n\t\t\t}\n\t\t} );\n\t}\n\treturn result;\n}\n\n/**\n * Helper method to iterate through all blocks, recursing into inner blocks,\n * applying a transformation function to each one.\n * Returns a flattened object with the transformed blocks.\n *\n * @param {Array}    blocks    Blocks to flatten.\n * @param {Function} transform Transforming function to be applied to each block.\n *\n * @return {Array} Flattened object.\n */\nfunction flattenBlocks( blocks, transform = identity ) {\n\tconst result = [];\n\n\tconst stack = [ ...blocks ];\n\twhile ( stack.length ) {\n\t\tconst { innerBlocks, ...block } = stack.shift();\n\t\tstack.push( ...innerBlocks );\n\t\tresult.push( [ block.clientId, transform( block ) ] );\n\t}\n\n\treturn result;\n}\n\nfunction getFlattenedClientIds( blocks ) {\n\tconst result = {};\n\tconst stack = [ ...blocks ];\n\twhile ( stack.length ) {\n\t\tconst { innerBlocks, ...block } = stack.shift();\n\t\tstack.push( ...innerBlocks );\n\t\tresult[ block.clientId ] = true;\n\t}\n\n\treturn result;\n}\n\n/**\n * Given an array of blocks, returns an object containing all blocks, without\n * attributes, recursing into inner blocks. Keys correspond to the block client\n * ID, the value of which is the attributes object.\n *\n * @param {Array} blocks Blocks to flatten.\n *\n * @return {Array} Flattened block attributes object.\n */\nfunction getFlattenedBlocksWithoutAttributes( blocks ) {\n\treturn flattenBlocks( blocks, ( block ) => {\n\t\tconst { attributes, ...restBlock } = block;\n\t\treturn restBlock;\n\t} );\n}\n\n/**\n * Given an array of blocks, returns an object containing all block attributes,\n * recursing into inner blocks. Keys correspond to the block client ID, the\n * value of which is the attributes object.\n *\n * @param {Array} blocks Blocks to flatten.\n *\n * @return {Array} Flattened block attributes object.\n */\nfunction getFlattenedBlockAttributes( blocks ) {\n\treturn flattenBlocks( blocks, ( block ) => block.attributes );\n}\n\n/**\n * Returns true if the two object arguments have the same keys, or false\n * otherwise.\n *\n * @param {Object} a First object.\n * @param {Object} b Second object.\n *\n * @return {boolean} Whether the two objects have the same keys.\n */\nexport function hasSameKeys( a, b ) {\n\treturn fastDeepEqual( Object.keys( a ), Object.keys( b ) );\n}\n\n/**\n * Returns true if, given the currently dispatching action and the previously\n * dispatched action, the two actions are updating the same block attribute, or\n * false otherwise.\n *\n * @param {Object} action     Currently dispatching action.\n * @param {Object} lastAction Previously dispatched action.\n *\n * @return {boolean} Whether actions are updating the same block attribute.\n */\nexport function isUpdatingSameBlockAttribute( action, lastAction ) {\n\treturn (\n\t\taction.type === 'UPDATE_BLOCK_ATTRIBUTES' &&\n\t\tlastAction !== undefined &&\n\t\tlastAction.type === 'UPDATE_BLOCK_ATTRIBUTES' &&\n\t\tfastDeepEqual( action.clientIds, lastAction.clientIds ) &&\n\t\thasSameKeys( action.attributes, lastAction.attributes )\n\t);\n}\n\nfunction updateBlockTreeForBlocks( state, blocks ) {\n\tconst treeToUpdate = state.tree;\n\tconst stack = [ ...blocks ];\n\tconst flattenedBlocks = [ ...blocks ];\n\twhile ( stack.length ) {\n\t\tconst block = stack.shift();\n\t\tstack.push( ...block.innerBlocks );\n\t\tflattenedBlocks.push( ...block.innerBlocks );\n\t}\n\t// Create objects before mutating them, that way it's always defined.\n\tfor ( const block of flattenedBlocks ) {\n\t\ttreeToUpdate.set( block.clientId, {} );\n\t}\n\tfor ( const block of flattenedBlocks ) {\n\t\ttreeToUpdate.set(\n\t\t\tblock.clientId,\n\t\t\tObject.assign( treeToUpdate.get( block.clientId ), {\n\t\t\t\t...state.byClientId.get( block.clientId ),\n\t\t\t\tattributes: state.attributes.get( block.clientId ),\n\t\t\t\tinnerBlocks: block.innerBlocks.map( ( subBlock ) =>\n\t\t\t\t\ttreeToUpdate.get( subBlock.clientId )\n\t\t\t\t),\n\t\t\t} )\n\t\t);\n\t}\n}\n\nfunction updateParentInnerBlocksInTree(\n\tstate,\n\tupdatedClientIds,\n\tupdateChildrenOfUpdatedClientIds = false\n) {\n\tconst treeToUpdate = state.tree;\n\tconst uncontrolledParents = new Set( [] );\n\tconst controlledParents = new Set();\n\tfor ( const clientId of updatedClientIds ) {\n\t\tlet current = updateChildrenOfUpdatedClientIds\n\t\t\t? clientId\n\t\t\t: state.parents.get( clientId );\n\t\tdo {\n\t\t\tif ( state.controlledInnerBlocks[ current ] ) {\n\t\t\t\t// Should stop on controlled blocks.\n\t\t\t\t// If we reach a controlled parent, break out of the loop.\n\t\t\t\tcontrolledParents.add( current );\n\t\t\t\tbreak;\n\t\t\t} else {\n\t\t\t\t// Else continue traversing up through parents.\n\t\t\t\tuncontrolledParents.add( current );\n\t\t\t\tcurrent = state.parents.get( current );\n\t\t\t}\n\t\t} while ( current !== undefined );\n\t}\n\n\t// To make sure the order of assignments doesn't matter,\n\t// we first create empty objects and mutates the inner blocks later.\n\tfor ( const clientId of uncontrolledParents ) {\n\t\ttreeToUpdate.set( clientId, { ...treeToUpdate.get( clientId ) } );\n\t}\n\tfor ( const clientId of uncontrolledParents ) {\n\t\ttreeToUpdate.get( clientId ).innerBlocks = (\n\t\t\tstate.order.get( clientId ) || []\n\t\t).map( ( subClientId ) => treeToUpdate.get( subClientId ) );\n\t}\n\n\t// Controlled parent blocks, need a dedicated key for their inner blocks\n\t// to be used when doing getBlocks( controlledBlockClientId ).\n\tfor ( const clientId of controlledParents ) {\n\t\ttreeToUpdate.set( 'controlled||' + clientId, {\n\t\t\tinnerBlocks: ( state.order.get( clientId ) || [] ).map(\n\t\t\t\t( subClientId ) => treeToUpdate.get( subClientId )\n\t\t\t),\n\t\t} );\n\t}\n}\n\n/**\n * Higher-order reducer intended to compute full block objects key for each block in the post.\n * This is a denormalization to optimize the performance of the getBlock selectors and avoid\n * recomputing the block objects and avoid heavy memoization.\n *\n * @param {Function} reducer Original reducer function.\n *\n * @return {Function} Enhanced reducer function.\n */\nconst withBlockTree =\n\t( reducer ) =>\n\t( state = {}, action ) => {\n\t\tconst newState = reducer( state, action );\n\n\t\tif ( newState === state ) {\n\t\t\treturn state;\n\t\t}\n\n\t\tnewState.tree = state.tree ? state.tree : new Map();\n\t\tswitch ( action.type ) {\n\t\t\tcase 'RECEIVE_BLOCKS':\n\t\t\tcase 'INSERT_BLOCKS': {\n\t\t\t\tnewState.tree = new Map( newState.tree );\n\t\t\t\tupdateBlockTreeForBlocks( newState, action.blocks );\n\t\t\t\tupdateParentInnerBlocksInTree(\n\t\t\t\t\tnewState,\n\t\t\t\t\taction.rootClientId ? [ action.rootClientId ] : [ '' ],\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'UPDATE_BLOCK':\n\t\t\t\tnewState.tree = new Map( newState.tree );\n\t\t\t\tnewState.tree.set( action.clientId, {\n\t\t\t\t\t...newState.tree.get( action.clientId ),\n\t\t\t\t\t...newState.byClientId.get( action.clientId ),\n\t\t\t\t\tattributes: newState.attributes.get( action.clientId ),\n\t\t\t\t} );\n\t\t\t\tupdateParentInnerBlocksInTree(\n\t\t\t\t\tnewState,\n\t\t\t\t\t[ action.clientId ],\n\t\t\t\t\tfalse\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase 'SYNC_DERIVED_BLOCK_ATTRIBUTES':\n\t\t\tcase 'UPDATE_BLOCK_ATTRIBUTES': {\n\t\t\t\tnewState.tree = new Map( newState.tree );\n\t\t\t\taction.clientIds.forEach( ( clientId ) => {\n\t\t\t\t\tnewState.tree.set( clientId, {\n\t\t\t\t\t\t...newState.tree.get( clientId ),\n\t\t\t\t\t\tattributes: newState.attributes.get( clientId ),\n\t\t\t\t\t} );\n\t\t\t\t} );\n\t\t\t\tupdateParentInnerBlocksInTree(\n\t\t\t\t\tnewState,\n\t\t\t\t\taction.clientIds,\n\t\t\t\t\tfalse\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'REPLACE_BLOCKS_AUGMENTED_WITH_CHILDREN': {\n\t\t\t\tconst inserterClientIds = getFlattenedClientIds(\n\t\t\t\t\taction.blocks\n\t\t\t\t);\n\t\t\t\tnewState.tree = new Map( newState.tree );\n\t\t\t\taction.replacedClientIds\n\t\t\t\t\t.concat(\n\t\t\t\t\t\t// Controlled inner blocks are only removed\n\t\t\t\t\t\t// if the block doesn't move to another position\n\t\t\t\t\t\t// otherwise their content will be lost.\n\t\t\t\t\t\taction.replacedClientIds\n\t\t\t\t\t\t\t.filter(\n\t\t\t\t\t\t\t\t( clientId ) => ! inserterClientIds[ clientId ]\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.map( ( clientId ) => 'controlled||' + clientId )\n\t\t\t\t\t)\n\t\t\t\t\t.forEach( ( key ) => {\n\t\t\t\t\t\tnewState.tree.delete( key );\n\t\t\t\t\t} );\n\n\t\t\t\tupdateBlockTreeForBlocks( newState, action.blocks );\n\t\t\t\tupdateParentInnerBlocksInTree(\n\t\t\t\t\tnewState,\n\t\t\t\t\taction.blocks.map( ( b ) => b.clientId ),\n\t\t\t\t\tfalse\n\t\t\t\t);\n\n\t\t\t\t// If there are no replaced blocks, it means we're removing blocks so we need to update their parent.\n\t\t\t\tconst parentsOfRemovedBlocks = [];\n\t\t\t\tfor ( const clientId of action.clientIds ) {\n\t\t\t\t\tconst parentId = state.parents.get( clientId );\n\t\t\t\t\tif (\n\t\t\t\t\t\tparentId !== undefined &&\n\t\t\t\t\t\t( parentId === '' ||\n\t\t\t\t\t\t\tnewState.byClientId.get( parentId ) )\n\t\t\t\t\t) {\n\t\t\t\t\t\tparentsOfRemovedBlocks.push( parentId );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tupdateParentInnerBlocksInTree(\n\t\t\t\t\tnewState,\n\t\t\t\t\tparentsOfRemovedBlocks,\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'REMOVE_BLOCKS_AUGMENTED_WITH_CHILDREN':\n\t\t\t\tconst parentsOfRemovedBlocks = [];\n\t\t\t\tfor ( const clientId of action.clientIds ) {\n\t\t\t\t\tconst parentId = state.parents.get( clientId );\n\t\t\t\t\tif (\n\t\t\t\t\t\tparentId !== undefined &&\n\t\t\t\t\t\t( parentId === '' ||\n\t\t\t\t\t\t\tnewState.byClientId.get( parentId ) )\n\t\t\t\t\t) {\n\t\t\t\t\t\tparentsOfRemovedBlocks.push( parentId );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tnewState.tree = new Map( newState.tree );\n\t\t\t\taction.removedClientIds\n\t\t\t\t\t.concat(\n\t\t\t\t\t\taction.removedClientIds.map(\n\t\t\t\t\t\t\t( clientId ) => 'controlled||' + clientId\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t\t.forEach( ( key ) => {\n\t\t\t\t\t\tnewState.tree.delete( key );\n\t\t\t\t\t} );\n\t\t\t\tupdateParentInnerBlocksInTree(\n\t\t\t\t\tnewState,\n\t\t\t\t\tparentsOfRemovedBlocks,\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase 'MOVE_BLOCKS_TO_POSITION': {\n\t\t\t\tconst updatedBlockUids = [];\n\t\t\t\tif ( action.fromRootClientId ) {\n\t\t\t\t\tupdatedBlockUids.push( action.fromRootClientId );\n\t\t\t\t} else {\n\t\t\t\t\tupdatedBlockUids.push( '' );\n\t\t\t\t}\n\t\t\t\tif ( action.toRootClientId ) {\n\t\t\t\t\tupdatedBlockUids.push( action.toRootClientId );\n\t\t\t\t}\n\t\t\t\tnewState.tree = new Map( newState.tree );\n\t\t\t\tupdateParentInnerBlocksInTree(\n\t\t\t\t\tnewState,\n\t\t\t\t\tupdatedBlockUids,\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'MOVE_BLOCKS_UP':\n\t\t\tcase 'MOVE_BLOCKS_DOWN': {\n\t\t\t\tconst updatedBlockUids = [\n\t\t\t\t\taction.rootClientId ? action.rootClientId : '',\n\t\t\t\t];\n\t\t\t\tnewState.tree = new Map( newState.tree );\n\t\t\t\tupdateParentInnerBlocksInTree(\n\t\t\t\t\tnewState,\n\t\t\t\t\tupdatedBlockUids,\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase 'SAVE_REUSABLE_BLOCK_SUCCESS': {\n\t\t\t\tconst updatedBlockUids = [];\n\t\t\t\tnewState.attributes.forEach( ( attributes, clientId ) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\tnewState.byClientId.get( clientId ).name ===\n\t\t\t\t\t\t\t'core/block' &&\n\t\t\t\t\t\tattributes.ref === action.updatedId\n\t\t\t\t\t) {\n\t\t\t\t\t\tupdatedBlockUids.push( clientId );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t\tnewState.tree = new Map( newState.tree );\n\t\t\t\tupdatedBlockUids.forEach( ( clientId ) => {\n\t\t\t\t\tnewState.tree.set( clientId, {\n\t\t\t\t\t\t...newState.byClientId.get( clientId ),\n\t\t\t\t\t\tattributes: newState.attributes.get( clientId ),\n\t\t\t\t\t\tinnerBlocks: newState.tree.get( clientId ).innerBlocks,\n\t\t\t\t\t} );\n\t\t\t\t} );\n\t\t\t\tupdateParentInnerBlocksInTree(\n\t\t\t\t\tnewState,\n\t\t\t\t\tupdatedBlockUids,\n\t\t\t\t\tfalse\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\treturn newState;\n\t};\n\n/**\n * Higher-order reducer intended to augment the blocks reducer, assigning an\n * `isPersistentChange` property value corresponding to whether a change in\n * state can be considered as persistent. All changes are considered persistent\n * except when updating the same block attribute as in the previous action.\n *\n * @param {Function} reducer Original reducer function.\n *\n * @return {Function} Enhanced reducer function.\n */\nfunction withPersistentBlockChange( reducer ) {\n\tlet lastAction;\n\tlet markNextChangeAsNotPersistent = false;\n\tlet explicitPersistent;\n\n\treturn ( state, action ) => {\n\t\tlet nextState = reducer( state, action );\n\n\t\tlet nextIsPersistentChange;\n\t\tif ( action.type === 'SET_EXPLICIT_PERSISTENT' ) {\n\t\t\texplicitPersistent = action.isPersistentChange;\n\t\t\tnextIsPersistentChange = state.isPersistentChange ?? true;\n\t\t}\n\n\t\tif ( explicitPersistent !== undefined ) {\n\t\t\tnextIsPersistentChange = explicitPersistent;\n\t\t\treturn nextIsPersistentChange === nextState.isPersistentChange\n\t\t\t\t? nextState\n\t\t\t\t: {\n\t\t\t\t\t\t...nextState,\n\t\t\t\t\t\tisPersistentChange: nextIsPersistentChange,\n\t\t\t\t  };\n\t\t}\n\n\t\tconst isExplicitPersistentChange =\n\t\t\taction.type === 'MARK_LAST_CHANGE_AS_PERSISTENT' ||\n\t\t\tmarkNextChangeAsNotPersistent;\n\n\t\t// Defer to previous state value (or default) unless changing or\n\t\t// explicitly marking as persistent.\n\t\tif ( state === nextState && ! isExplicitPersistentChange ) {\n\t\t\tmarkNextChangeAsNotPersistent =\n\t\t\t\taction.type === 'MARK_NEXT_CHANGE_AS_NOT_PERSISTENT';\n\n\t\t\tnextIsPersistentChange = state?.isPersistentChange ?? true;\n\t\t\tif ( state.isPersistentChange === nextIsPersistentChange ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...nextState,\n\t\t\t\tisPersistentChange: nextIsPersistentChange,\n\t\t\t};\n\t\t}\n\n\t\tnextState = {\n\t\t\t...nextState,\n\t\t\tisPersistentChange: isExplicitPersistentChange\n\t\t\t\t? ! markNextChangeAsNotPersistent\n\t\t\t\t: ! isUpdatingSameBlockAttribute( action, lastAction ),\n\t\t};\n\n\t\t// In comparing against the previous action, consider only those which\n\t\t// would have qualified as one which would have been ignored or not\n\t\t// have resulted in a changed state.\n\t\tlastAction = action;\n\t\tmarkNextChangeAsNotPersistent =\n\t\t\taction.type === 'MARK_NEXT_CHANGE_AS_NOT_PERSISTENT';\n\n\t\treturn nextState;\n\t};\n}\n\n/**\n * Higher-order reducer intended to augment the blocks reducer, assigning an\n * `isIgnoredChange` property value corresponding to whether a change in state\n * can be considered as ignored. A change is considered ignored when the result\n * of an action not incurred by direct user interaction.\n *\n * @param {Function} reducer Original reducer function.\n *\n * @return {Function} Enhanced reducer function.\n */\nfunction withIgnoredBlockChange( reducer ) {\n\t/**\n\t * Set of action types for which a blocks state change should be ignored.\n\t *\n\t * @type {Set}\n\t */\n\tconst IGNORED_ACTION_TYPES = new Set( [ 'RECEIVE_BLOCKS' ] );\n\n\treturn ( state, action ) => {\n\t\tconst nextState = reducer( state, action );\n\n\t\tif ( nextState !== state ) {\n\t\t\tnextState.isIgnoredChange = IGNORED_ACTION_TYPES.has( action.type );\n\t\t}\n\n\t\treturn nextState;\n\t};\n}\n\n/**\n * Higher-order reducer targeting the combined blocks reducer, augmenting\n * block client IDs in remove action to include cascade of inner blocks.\n *\n * @param {Function} reducer Original reducer function.\n *\n * @return {Function} Enhanced reducer function.\n */\nconst withInnerBlocksRemoveCascade = ( reducer ) => ( state, action ) => {\n\t// Gets all children which need to be removed.\n\tconst getAllChildren = ( clientIds ) => {\n\t\tlet result = clientIds;\n\t\tfor ( let i = 0; i < result.length; i++ ) {\n\t\t\tif (\n\t\t\t\t! state.order.get( result[ i ] ) ||\n\t\t\t\t( action.keepControlledInnerBlocks &&\n\t\t\t\t\taction.keepControlledInnerBlocks[ result[ i ] ] )\n\t\t\t) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif ( result === clientIds ) {\n\t\t\t\tresult = [ ...result ];\n\t\t\t}\n\n\t\t\tresult.push( ...state.order.get( result[ i ] ) );\n\t\t}\n\t\treturn result;\n\t};\n\n\tif ( state ) {\n\t\tswitch ( action.type ) {\n\t\t\tcase 'REMOVE_BLOCKS':\n\t\t\t\taction = {\n\t\t\t\t\t...action,\n\t\t\t\t\ttype: 'REMOVE_BLOCKS_AUGMENTED_WITH_CHILDREN',\n\t\t\t\t\tremovedClientIds: getAllChildren( action.clientIds ),\n\t\t\t\t};\n\t\t\t\tbreak;\n\t\t\tcase 'REPLACE_BLOCKS':\n\t\t\t\taction = {\n\t\t\t\t\t...action,\n\t\t\t\t\ttype: 'REPLACE_BLOCKS_AUGMENTED_WITH_CHILDREN',\n\t\t\t\t\treplacedClientIds: getAllChildren( action.clientIds ),\n\t\t\t\t};\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\treturn reducer( state, action );\n};\n\n/**\n * Higher-order reducer which targets the combined blocks reducer and handles\n * the `RESET_BLOCKS` action. When dispatched, this action will replace all\n * blocks that exist in the post, leaving blocks that exist only in state (e.g.\n * reusable blocks and blocks controlled by inner blocks controllers) alone.\n *\n * @param {Function} reducer Original reducer function.\n *\n * @return {Function} Enhanced reducer function.\n */\nconst withBlockReset = ( reducer ) => ( state, action ) => {\n\tif ( action.type === 'RESET_BLOCKS' ) {\n\t\tconst newState = {\n\t\t\t...state,\n\t\t\tbyClientId: new Map(\n\t\t\t\tgetFlattenedBlocksWithoutAttributes( action.blocks )\n\t\t\t),\n\t\t\tattributes: new Map( getFlattenedBlockAttributes( action.blocks ) ),\n\t\t\torder: mapBlockOrder( action.blocks ),\n\t\t\tparents: new Map( mapBlockParents( action.blocks ) ),\n\t\t\tcontrolledInnerBlocks: {},\n\t\t};\n\n\t\tnewState.tree = new Map( state?.tree );\n\t\tupdateBlockTreeForBlocks( newState, action.blocks );\n\t\tnewState.tree.set( '', {\n\t\t\tinnerBlocks: action.blocks.map( ( subBlock ) =>\n\t\t\t\tnewState.tree.get( subBlock.clientId )\n\t\t\t),\n\t\t} );\n\n\t\treturn newState;\n\t}\n\n\treturn reducer( state, action );\n};\n\n/**\n * Higher-order reducer which targets the combined blocks reducer and handles\n * the `REPLACE_INNER_BLOCKS` action. When dispatched, this action the state\n * should become equivalent to the execution of a `REMOVE_BLOCKS` action\n * containing all the child's of the root block followed by the execution of\n * `INSERT_BLOCKS` with the new blocks.\n *\n * @param {Function} reducer Original reducer function.\n *\n * @return {Function} Enhanced reducer function.\n */\nconst withReplaceInnerBlocks = ( reducer ) => ( state, action ) => {\n\tif ( action.type !== 'REPLACE_INNER_BLOCKS' ) {\n\t\treturn reducer( state, action );\n\t}\n\n\t// Finds every nested inner block controller. We must check the action blocks\n\t// and not just the block parent state because some inner block controllers\n\t// should be deleted if specified, whereas others should not be deleted. If\n\t// a controlled should not be deleted, then we need to avoid deleting its\n\t// inner blocks from the block state because its inner blocks will not be\n\t// attached to the block in the action.\n\tconst nestedControllers = {};\n\tif ( Object.keys( state.controlledInnerBlocks ).length ) {\n\t\tconst stack = [ ...action.blocks ];\n\t\twhile ( stack.length ) {\n\t\t\tconst { innerBlocks, ...block } = stack.shift();\n\t\t\tstack.push( ...innerBlocks );\n\t\t\tif ( !! state.controlledInnerBlocks[ block.clientId ] ) {\n\t\t\t\tnestedControllers[ block.clientId ] = true;\n\t\t\t}\n\t\t}\n\t}\n\n\t// The `keepControlledInnerBlocks` prop will keep the inner blocks of the\n\t// marked block in the block state so that they can be reattached to the\n\t// marked block when we re-insert everything a few lines below.\n\tlet stateAfterBlocksRemoval = state;\n\tif ( state.order.get( action.rootClientId ) ) {\n\t\tstateAfterBlocksRemoval = reducer( stateAfterBlocksRemoval, {\n\t\t\ttype: 'REMOVE_BLOCKS',\n\t\t\tkeepControlledInnerBlocks: nestedControllers,\n\t\t\tclientIds: state.order.get( action.rootClientId ),\n\t\t} );\n\t}\n\tlet stateAfterInsert = stateAfterBlocksRemoval;\n\tif ( action.blocks.length ) {\n\t\tstateAfterInsert = reducer( stateAfterInsert, {\n\t\t\t...action,\n\t\t\ttype: 'INSERT_BLOCKS',\n\t\t\tindex: 0,\n\t\t} );\n\n\t\t// We need to re-attach the controlled inner blocks to the blocks tree and\n\t\t// preserve their block order. Otherwise, an inner block controller's blocks\n\t\t// will be deleted entirely from its entity.\n\t\tconst stateAfterInsertOrder = new Map( stateAfterInsert.order );\n\t\tObject.keys( nestedControllers ).forEach( ( key ) => {\n\t\t\tif ( state.order.get( key ) ) {\n\t\t\t\tstateAfterInsertOrder.set( key, state.order.get( key ) );\n\t\t\t}\n\t\t} );\n\t\tstateAfterInsert.order = stateAfterInsertOrder;\n\t\tstateAfterInsert.tree = new Map( stateAfterInsert.tree );\n\t\tObject.keys( nestedControllers ).forEach( ( _key ) => {\n\t\t\tconst key = `controlled||${ _key }`;\n\t\t\tif ( state.tree.has( key ) ) {\n\t\t\t\tstateAfterInsert.tree.set( key, state.tree.get( key ) );\n\t\t\t}\n\t\t} );\n\t}\n\treturn stateAfterInsert;\n};\n\n/**\n * Higher-order reducer which targets the combined blocks reducer and handles\n * the `SAVE_REUSABLE_BLOCK_SUCCESS` action. This action can't be handled by\n * regular reducers and needs a higher-order reducer since it needs access to\n * both `byClientId` and `attributes` simultaneously.\n *\n * @param {Function} reducer Original reducer function.\n *\n * @return {Function} Enhanced reducer function.\n */\nconst withSaveReusableBlock = ( reducer ) => ( state, action ) => {\n\tif ( state && action.type === 'SAVE_REUSABLE_BLOCK_SUCCESS' ) {\n\t\tconst { id, updatedId } = action;\n\n\t\t// If a temporary reusable block is saved, we swap the temporary id with the final one.\n\t\tif ( id === updatedId ) {\n\t\t\treturn state;\n\t\t}\n\n\t\tstate = { ...state };\n\t\tstate.attributes = new Map( state.attributes );\n\t\tstate.attributes.forEach( ( attributes, clientId ) => {\n\t\t\tconst { name } = state.byClientId.get( clientId );\n\t\t\tif ( name === 'core/block' && attributes.ref === id ) {\n\t\t\t\tstate.attributes.set( clientId, {\n\t\t\t\t\t...attributes,\n\t\t\t\t\tref: updatedId,\n\t\t\t\t} );\n\t\t\t}\n\t\t} );\n\t}\n\n\treturn reducer( state, action );\n};\n/**\n * Higher-order reducer which removes blocks from state when switching parent block controlled state.\n *\n * @param {Function} reducer Original reducer function.\n *\n * @return {Function} Enhanced reducer function.\n */\nconst withResetControlledBlocks = ( reducer ) => ( state, action ) => {\n\tif ( action.type === 'SET_HAS_CONTROLLED_INNER_BLOCKS' ) {\n\t\t// when switching a block from controlled to uncontrolled or inverse,\n\t\t// we need to remove its content first.\n\t\tconst tempState = reducer( state, {\n\t\t\ttype: 'REPLACE_INNER_BLOCKS',\n\t\t\trootClientId: action.clientId,\n\t\t\tblocks: [],\n\t\t} );\n\t\treturn reducer( tempState, action );\n\t}\n\n\treturn reducer( state, action );\n};\n\n/**\n * Reducer returning the blocks state.\n *\n * @param {Object} state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {Object} Updated state.\n */\nexport const blocks = pipe(\n\tcombineReducers,\n\twithSaveReusableBlock, // Needs to be before withBlockCache.\n\twithBlockTree, // Needs to be before withInnerBlocksRemoveCascade.\n\twithInnerBlocksRemoveCascade,\n\twithReplaceInnerBlocks, // Needs to be after withInnerBlocksRemoveCascade.\n\twithBlockReset,\n\twithPersistentBlockChange,\n\twithIgnoredBlockChange,\n\twithResetControlledBlocks\n)( {\n\t// The state is using a Map instead of a plain object for performance reasons.\n\t// You can run the \"./test/performance.js\" unit test to check the impact\n\t// code changes can have on this reducer.\n\tbyClientId( state = new Map(), action ) {\n\t\tswitch ( action.type ) {\n\t\t\tcase 'RECEIVE_BLOCKS':\n\t\t\tcase 'INSERT_BLOCKS': {\n\t\t\t\tconst newState = new Map( state );\n\t\t\t\tgetFlattenedBlocksWithoutAttributes( action.blocks ).forEach(\n\t\t\t\t\t( [ key, value ] ) => {\n\t\t\t\t\t\tnewState.set( key, value );\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\treturn newState;\n\t\t\t}\n\t\t\tcase 'UPDATE_BLOCK': {\n\t\t\t\t// Ignore updates if block isn't known.\n\t\t\t\tif ( ! state.has( action.clientId ) ) {\n\t\t\t\t\treturn state;\n\t\t\t\t}\n\n\t\t\t\t// Do nothing if only attributes change.\n\t\t\t\tconst { attributes, ...changes } = action.updates;\n\t\t\t\tif ( Object.values( changes ).length === 0 ) {\n\t\t\t\t\treturn state;\n\t\t\t\t}\n\n\t\t\t\tconst newState = new Map( state );\n\t\t\t\tnewState.set( action.clientId, {\n\t\t\t\t\t...state.get( action.clientId ),\n\t\t\t\t\t...changes,\n\t\t\t\t} );\n\t\t\t\treturn newState;\n\t\t\t}\n\n\t\t\tcase 'REPLACE_BLOCKS_AUGMENTED_WITH_CHILDREN': {\n\t\t\t\tif ( ! action.blocks ) {\n\t\t\t\t\treturn state;\n\t\t\t\t}\n\n\t\t\t\tconst newState = new Map( state );\n\t\t\t\taction.replacedClientIds.forEach( ( clientId ) => {\n\t\t\t\t\tnewState.delete( clientId );\n\t\t\t\t} );\n\n\t\t\t\tgetFlattenedBlocksWithoutAttributes( action.blocks ).forEach(\n\t\t\t\t\t( [ key, value ] ) => {\n\t\t\t\t\t\tnewState.set( key, value );\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\treturn newState;\n\t\t\t}\n\n\t\t\tcase 'REMOVE_BLOCKS_AUGMENTED_WITH_CHILDREN': {\n\t\t\t\tconst newState = new Map( state );\n\t\t\t\taction.removedClientIds.forEach( ( clientId ) => {\n\t\t\t\t\tnewState.delete( clientId );\n\t\t\t\t} );\n\t\t\t\treturn newState;\n\t\t\t}\n\t\t}\n\n\t\treturn state;\n\t},\n\n\t// The state is using a Map instead of a plain object for performance reasons.\n\t// You can run the \"./test/performance.js\" unit test to check the impact\n\t// code changes can have on this reducer.\n\tattributes( state = new Map(), action ) {\n\t\tswitch ( action.type ) {\n\t\t\tcase 'RECEIVE_BLOCKS':\n\t\t\tcase 'INSERT_BLOCKS': {\n\t\t\t\tconst newState = new Map( state );\n\t\t\t\tgetFlattenedBlockAttributes( action.blocks ).forEach(\n\t\t\t\t\t( [ key, value ] ) => {\n\t\t\t\t\t\tnewState.set( key, value );\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\treturn newState;\n\t\t\t}\n\n\t\t\tcase 'UPDATE_BLOCK': {\n\t\t\t\t// Ignore updates if block isn't known or there are no attribute changes.\n\t\t\t\tif (\n\t\t\t\t\t! state.get( action.clientId ) ||\n\t\t\t\t\t! action.updates.attributes\n\t\t\t\t) {\n\t\t\t\t\treturn state;\n\t\t\t\t}\n\n\t\t\t\tconst newState = new Map( state );\n\t\t\t\tnewState.set( action.clientId, {\n\t\t\t\t\t...state.get( action.clientId ),\n\t\t\t\t\t...action.updates.attributes,\n\t\t\t\t} );\n\t\t\t\treturn newState;\n\t\t\t}\n\n\t\t\tcase 'SYNC_DERIVED_BLOCK_ATTRIBUTES':\n\t\t\tcase 'UPDATE_BLOCK_ATTRIBUTES': {\n\t\t\t\t// Avoid a state change if none of the block IDs are known.\n\t\t\t\tif ( action.clientIds.every( ( id ) => ! state.get( id ) ) ) {\n\t\t\t\t\treturn state;\n\t\t\t\t}\n\n\t\t\t\tlet hasChange = false;\n\t\t\t\tconst newState = new Map( state );\n\t\t\t\tfor ( const clientId of action.clientIds ) {\n\t\t\t\t\tconst updatedAttributeEntries = Object.entries(\n\t\t\t\t\t\taction.uniqueByBlock\n\t\t\t\t\t\t\t? action.attributes[ clientId ]\n\t\t\t\t\t\t\t: action.attributes ?? {}\n\t\t\t\t\t);\n\t\t\t\t\tif ( updatedAttributeEntries.length === 0 ) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tlet hasUpdatedAttributes = false;\n\t\t\t\t\tconst existingAttributes = state.get( clientId );\n\t\t\t\t\tconst newAttributes = {};\n\t\t\t\t\tupdatedAttributeEntries.forEach( ( [ key, value ] ) => {\n\t\t\t\t\t\tif ( existingAttributes[ key ] !== value ) {\n\t\t\t\t\t\t\thasUpdatedAttributes = true;\n\t\t\t\t\t\t\tnewAttributes[ key ] = value;\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t\thasChange = hasChange || hasUpdatedAttributes;\n\t\t\t\t\tif ( hasUpdatedAttributes ) {\n\t\t\t\t\t\tnewState.set( clientId, {\n\t\t\t\t\t\t\t...existingAttributes,\n\t\t\t\t\t\t\t...newAttributes,\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn hasChange ? newState : state;\n\t\t\t}\n\n\t\t\tcase 'REPLACE_BLOCKS_AUGMENTED_WITH_CHILDREN': {\n\t\t\t\tif ( ! action.blocks ) {\n\t\t\t\t\treturn state;\n\t\t\t\t}\n\n\t\t\t\tconst newState = new Map( state );\n\t\t\t\taction.replacedClientIds.forEach( ( clientId ) => {\n\t\t\t\t\tnewState.delete( clientId );\n\t\t\t\t} );\n\t\t\t\tgetFlattenedBlockAttributes( action.blocks ).forEach(\n\t\t\t\t\t( [ key, value ] ) => {\n\t\t\t\t\t\tnewState.set( key, value );\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\treturn newState;\n\t\t\t}\n\n\t\t\tcase 'REMOVE_BLOCKS_AUGMENTED_WITH_CHILDREN': {\n\t\t\t\tconst newState = new Map( state );\n\t\t\t\taction.removedClientIds.forEach( ( clientId ) => {\n\t\t\t\t\tnewState.delete( clientId );\n\t\t\t\t} );\n\t\t\t\treturn newState;\n\t\t\t}\n\t\t}\n\n\t\treturn state;\n\t},\n\n\t// The state is using a Map instead of a plain object for performance reasons.\n\t// You can run the \"./test/performance.js\" unit test to check the impact\n\t// code changes can have on this reducer.\n\torder( state = new Map(), action ) {\n\t\tswitch ( action.type ) {\n\t\t\tcase 'RECEIVE_BLOCKS': {\n\t\t\t\tconst blockOrder = mapBlockOrder( action.blocks );\n\t\t\t\tconst newState = new Map( state );\n\t\t\t\tblockOrder.forEach( ( order, clientId ) => {\n\t\t\t\t\tif ( clientId !== '' ) {\n\t\t\t\t\t\tnewState.set( clientId, order );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t\tnewState.set(\n\t\t\t\t\t'',\n\t\t\t\t\t( state.get( '' ) ?? [] ).concat( blockOrder[ '' ] )\n\t\t\t\t);\n\t\t\t\treturn newState;\n\t\t\t}\n\t\t\tcase 'INSERT_BLOCKS': {\n\t\t\t\tconst { rootClientId = '' } = action;\n\t\t\t\tconst subState = state.get( rootClientId ) || [];\n\t\t\t\tconst mappedBlocks = mapBlockOrder(\n\t\t\t\t\taction.blocks,\n\t\t\t\t\trootClientId\n\t\t\t\t);\n\t\t\t\tconst { index = subState.length } = action;\n\t\t\t\tconst newState = new Map( state );\n\t\t\t\tmappedBlocks.forEach( ( order, clientId ) => {\n\t\t\t\t\tnewState.set( clientId, order );\n\t\t\t\t} );\n\t\t\t\tnewState.set(\n\t\t\t\t\trootClientId,\n\t\t\t\t\tinsertAt(\n\t\t\t\t\t\tsubState,\n\t\t\t\t\t\tmappedBlocks.get( rootClientId ),\n\t\t\t\t\t\tindex\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t\treturn newState;\n\t\t\t}\n\n\t\t\tcase 'MOVE_BLOCKS_TO_POSITION': {\n\t\t\t\tconst {\n\t\t\t\t\tfromRootClientId = '',\n\t\t\t\t\ttoRootClientId = '',\n\t\t\t\t\tclientIds,\n\t\t\t\t} = action;\n\t\t\t\tconst { index = state.get( toRootClientId ).length } = action;\n\n\t\t\t\t// Moving inside the same parent block.\n\t\t\t\tif ( fromRootClientId === toRootClientId ) {\n\t\t\t\t\tconst subState = state.get( toRootClientId );\n\t\t\t\t\tconst fromIndex = subState.indexOf( clientIds[ 0 ] );\n\t\t\t\t\tconst newState = new Map( state );\n\t\t\t\t\tnewState.set(\n\t\t\t\t\t\ttoRootClientId,\n\t\t\t\t\t\tmoveTo(\n\t\t\t\t\t\t\tstate.get( toRootClientId ),\n\t\t\t\t\t\t\tfromIndex,\n\t\t\t\t\t\t\tindex,\n\t\t\t\t\t\t\tclientIds.length\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\t\t\t\t\treturn newState;\n\t\t\t\t}\n\n\t\t\t\t// Moving from a parent block to another.\n\t\t\t\tconst newState = new Map( state );\n\t\t\t\tnewState.set(\n\t\t\t\t\tfromRootClientId,\n\t\t\t\t\tstate\n\t\t\t\t\t\t.get( fromRootClientId )\n\t\t\t\t\t\t?.filter( ( id ) => ! clientIds.includes( id ) ) ?? []\n\t\t\t\t);\n\t\t\t\tnewState.set(\n\t\t\t\t\ttoRootClientId,\n\t\t\t\t\tinsertAt( state.get( toRootClientId ), clientIds, index )\n\t\t\t\t);\n\t\t\t\treturn newState;\n\t\t\t}\n\n\t\t\tcase 'MOVE_BLOCKS_UP': {\n\t\t\t\tconst { clientIds, rootClientId = '' } = action;\n\t\t\t\tconst firstClientId = clientIds[ 0 ];\n\t\t\t\tconst subState = state.get( rootClientId );\n\n\t\t\t\tif ( ! subState.length || firstClientId === subState[ 0 ] ) {\n\t\t\t\t\treturn state;\n\t\t\t\t}\n\n\t\t\t\tconst firstIndex = subState.indexOf( firstClientId );\n\t\t\t\tconst newState = new Map( state );\n\t\t\t\tnewState.set(\n\t\t\t\t\trootClientId,\n\t\t\t\t\tmoveTo(\n\t\t\t\t\t\tsubState,\n\t\t\t\t\t\tfirstIndex,\n\t\t\t\t\t\tfirstIndex - 1,\n\t\t\t\t\t\tclientIds.length\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t\treturn newState;\n\t\t\t}\n\n\t\t\tcase 'MOVE_BLOCKS_DOWN': {\n\t\t\t\tconst { clientIds, rootClientId = '' } = action;\n\t\t\t\tconst firstClientId = clientIds[ 0 ];\n\t\t\t\tconst lastClientId = clientIds[ clientIds.length - 1 ];\n\t\t\t\tconst subState = state.get( rootClientId );\n\n\t\t\t\tif (\n\t\t\t\t\t! subState.length ||\n\t\t\t\t\tlastClientId === subState[ subState.length - 1 ]\n\t\t\t\t) {\n\t\t\t\t\treturn state;\n\t\t\t\t}\n\n\t\t\t\tconst firstIndex = subState.indexOf( firstClientId );\n\t\t\t\tconst newState = new Map( state );\n\t\t\t\tnewState.set(\n\t\t\t\t\trootClientId,\n\t\t\t\t\tmoveTo(\n\t\t\t\t\t\tsubState,\n\t\t\t\t\t\tfirstIndex,\n\t\t\t\t\t\tfirstIndex + 1,\n\t\t\t\t\t\tclientIds.length\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t\treturn newState;\n\t\t\t}\n\n\t\t\tcase 'REPLACE_BLOCKS_AUGMENTED_WITH_CHILDREN': {\n\t\t\t\tconst { clientIds } = action;\n\t\t\t\tif ( ! action.blocks ) {\n\t\t\t\t\treturn state;\n\t\t\t\t}\n\n\t\t\t\tconst mappedBlocks = mapBlockOrder( action.blocks );\n\t\t\t\tconst newState = new Map( state );\n\t\t\t\taction.replacedClientIds.forEach( ( clientId ) => {\n\t\t\t\t\tnewState.delete( clientId );\n\t\t\t\t} );\n\t\t\t\tmappedBlocks.forEach( ( order, clientId ) => {\n\t\t\t\t\tif ( clientId !== '' ) {\n\t\t\t\t\t\tnewState.set( clientId, order );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t\tnewState.forEach( ( order, clientId ) => {\n\t\t\t\t\tconst newSubOrder = Object.values( order ).reduce(\n\t\t\t\t\t\t( result, subClientId ) => {\n\t\t\t\t\t\t\tif ( subClientId === clientIds[ 0 ] ) {\n\t\t\t\t\t\t\t\treturn [ ...result, ...mappedBlocks.get( '' ) ];\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( clientIds.indexOf( subClientId ) === -1 ) {\n\t\t\t\t\t\t\t\tresult.push( subClientId );\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t},\n\t\t\t\t\t\t[]\n\t\t\t\t\t);\n\t\t\t\t\tnewState.set( clientId, newSubOrder );\n\t\t\t\t} );\n\t\t\t\treturn newState;\n\t\t\t}\n\n\t\t\tcase 'REMOVE_BLOCKS_AUGMENTED_WITH_CHILDREN': {\n\t\t\t\tconst newState = new Map( state );\n\t\t\t\t// Remove inner block ordering for removed blocks.\n\t\t\t\taction.removedClientIds.forEach( ( clientId ) => {\n\t\t\t\t\tnewState.delete( clientId );\n\t\t\t\t} );\n\t\t\t\tnewState.forEach( ( order, clientId ) => {\n\t\t\t\t\tconst newSubOrder =\n\t\t\t\t\t\torder?.filter(\n\t\t\t\t\t\t\t( id ) => ! action.removedClientIds.includes( id )\n\t\t\t\t\t\t) ?? [];\n\t\t\t\t\tif ( newSubOrder.length !== order.length ) {\n\t\t\t\t\t\tnewState.set( clientId, newSubOrder );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t\treturn newState;\n\t\t\t}\n\t\t}\n\n\t\treturn state;\n\t},\n\n\t// While technically redundant data as the inverse of `order`, it serves as\n\t// an optimization for the selectors which derive the ancestry of a block.\n\tparents( state = new Map(), action ) {\n\t\tswitch ( action.type ) {\n\t\t\tcase 'RECEIVE_BLOCKS': {\n\t\t\t\tconst newState = new Map( state );\n\t\t\t\tmapBlockParents( action.blocks ).forEach(\n\t\t\t\t\t( [ key, value ] ) => {\n\t\t\t\t\t\tnewState.set( key, value );\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\treturn newState;\n\t\t\t}\n\t\t\tcase 'INSERT_BLOCKS': {\n\t\t\t\tconst newState = new Map( state );\n\t\t\t\tmapBlockParents(\n\t\t\t\t\taction.blocks,\n\t\t\t\t\taction.rootClientId || ''\n\t\t\t\t).forEach( ( [ key, value ] ) => {\n\t\t\t\t\tnewState.set( key, value );\n\t\t\t\t} );\n\t\t\t\treturn newState;\n\t\t\t}\n\t\t\tcase 'MOVE_BLOCKS_TO_POSITION': {\n\t\t\t\tconst newState = new Map( state );\n\t\t\t\taction.clientIds.forEach( ( id ) => {\n\t\t\t\t\tnewState.set( id, action.toRootClientId || '' );\n\t\t\t\t} );\n\t\t\t\treturn newState;\n\t\t\t}\n\n\t\t\tcase 'REPLACE_BLOCKS_AUGMENTED_WITH_CHILDREN': {\n\t\t\t\tconst newState = new Map( state );\n\t\t\t\taction.replacedClientIds.forEach( ( clientId ) => {\n\t\t\t\t\tnewState.delete( clientId );\n\t\t\t\t} );\n\t\t\t\tmapBlockParents(\n\t\t\t\t\taction.blocks,\n\t\t\t\t\tstate.get( action.clientIds[ 0 ] )\n\t\t\t\t).forEach( ( [ key, value ] ) => {\n\t\t\t\t\tnewState.set( key, value );\n\t\t\t\t} );\n\t\t\t\treturn newState;\n\t\t\t}\n\t\t\tcase 'REMOVE_BLOCKS_AUGMENTED_WITH_CHILDREN': {\n\t\t\t\tconst newState = new Map( state );\n\t\t\t\taction.removedClientIds.forEach( ( clientId ) => {\n\t\t\t\t\tnewState.delete( clientId );\n\t\t\t\t} );\n\t\t\t\treturn newState;\n\t\t\t}\n\t\t}\n\n\t\treturn state;\n\t},\n\n\tcontrolledInnerBlocks(\n\t\tstate = {},\n\t\t{ type, clientId, hasControlledInnerBlocks }\n\t) {\n\t\tif ( type === 'SET_HAS_CONTROLLED_INNER_BLOCKS' ) {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[ clientId ]: hasControlledInnerBlocks,\n\t\t\t};\n\t\t}\n\t\treturn state;\n\t},\n} );\n\n/**\n * Reducer returning visibility status of block interface.\n *\n * @param {boolean} state  Current state.\n * @param {Object}  action Dispatched action.\n *\n * @return {boolean} Updated state.\n */\nexport function isBlockInterfaceHidden( state = false, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'HIDE_BLOCK_INTERFACE':\n\t\t\treturn true;\n\n\t\tcase 'SHOW_BLOCK_INTERFACE':\n\t\t\treturn false;\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer returning typing state.\n *\n * @param {boolean} state  Current state.\n * @param {Object}  action Dispatched action.\n *\n * @return {boolean} Updated state.\n */\nexport function isTyping( state = false, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'START_TYPING':\n\t\t\treturn true;\n\n\t\tcase 'STOP_TYPING':\n\t\t\treturn false;\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer returning dragging state. It is possible for a user to be dragging\n * data from outside of the editor, so this state is separate from `draggedBlocks`.\n *\n * @param {boolean} state  Current state.\n * @param {Object}  action Dispatched action.\n *\n * @return {boolean} Updated state.\n */\nexport function isDragging( state = false, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'START_DRAGGING':\n\t\t\treturn true;\n\n\t\tcase 'STOP_DRAGGING':\n\t\t\treturn false;\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer returning dragged block client id.\n *\n * @param {string[]} state  Current state.\n * @param {Object}   action Dispatched action.\n *\n * @return {string[]} Updated state.\n */\nexport function draggedBlocks( state = [], action ) {\n\tswitch ( action.type ) {\n\t\tcase 'START_DRAGGING_BLOCKS':\n\t\t\treturn action.clientIds;\n\n\t\tcase 'STOP_DRAGGING_BLOCKS':\n\t\t\treturn [];\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer tracking the visible blocks.\n *\n * @param {Record<string,boolean>} state  Current state.\n * @param {Object}                 action Dispatched action.\n *\n * @return {Record<string,boolean>} Block visibility.\n */\nexport function blockVisibility( state = {}, action ) {\n\tif ( action.type === 'SET_BLOCK_VISIBILITY' ) {\n\t\treturn {\n\t\t\t...state,\n\t\t\t...action.updates,\n\t\t};\n\t}\n\n\treturn state;\n}\n\n/**\n * Internal helper reducer for selectionStart and selectionEnd. Can hold a block\n * selection, represented by an object with property clientId.\n *\n * @param {Object} state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {Object} Updated state.\n */\nfunction selectionHelper( state = {}, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'CLEAR_SELECTED_BLOCK': {\n\t\t\tif ( state.clientId ) {\n\t\t\t\treturn {};\n\t\t\t}\n\n\t\t\treturn state;\n\t\t}\n\t\tcase 'SELECT_BLOCK':\n\t\t\tif ( action.clientId === state.clientId ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn { clientId: action.clientId };\n\t\tcase 'REPLACE_INNER_BLOCKS':\n\t\tcase 'INSERT_BLOCKS': {\n\t\t\tif ( ! action.updateSelection || ! action.blocks.length ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn { clientId: action.blocks[ 0 ].clientId };\n\t\t}\n\t\tcase 'REMOVE_BLOCKS':\n\t\t\tif (\n\t\t\t\t! action.clientIds ||\n\t\t\t\t! action.clientIds.length ||\n\t\t\t\taction.clientIds.indexOf( state.clientId ) === -1\n\t\t\t) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn {};\n\t\tcase 'REPLACE_BLOCKS': {\n\t\t\tif ( action.clientIds.indexOf( state.clientId ) === -1 ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\tconst blockToSelect =\n\t\t\t\taction.blocks[ action.indexToSelect ] ||\n\t\t\t\taction.blocks[ action.blocks.length - 1 ];\n\n\t\t\tif ( ! blockToSelect ) {\n\t\t\t\treturn {};\n\t\t\t}\n\n\t\t\tif ( blockToSelect.clientId === state.clientId ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn { clientId: blockToSelect.clientId };\n\t\t}\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer returning the selection state.\n *\n * @param {boolean} state  Current state.\n * @param {Object}  action Dispatched action.\n *\n * @return {boolean} Updated state.\n */\nexport function selection( state = {}, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'SELECTION_CHANGE':\n\t\t\tif ( action.clientId ) {\n\t\t\t\treturn {\n\t\t\t\t\tselectionStart: {\n\t\t\t\t\t\tclientId: action.clientId,\n\t\t\t\t\t\tattributeKey: action.attributeKey,\n\t\t\t\t\t\toffset: action.startOffset,\n\t\t\t\t\t},\n\t\t\t\t\tselectionEnd: {\n\t\t\t\t\t\tclientId: action.clientId,\n\t\t\t\t\t\tattributeKey: action.attributeKey,\n\t\t\t\t\t\toffset: action.endOffset,\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tselectionStart: action.start || state.selectionStart,\n\t\t\t\tselectionEnd: action.end || state.selectionEnd,\n\t\t\t};\n\t\tcase 'RESET_SELECTION':\n\t\t\tconst { selectionStart, selectionEnd } = action;\n\t\t\treturn {\n\t\t\t\tselectionStart,\n\t\t\t\tselectionEnd,\n\t\t\t};\n\t\tcase 'MULTI_SELECT':\n\t\t\tconst { start, end } = action;\n\n\t\t\tif (\n\t\t\t\tstart === state.selectionStart?.clientId &&\n\t\t\t\tend === state.selectionEnd?.clientId\n\t\t\t) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tselectionStart: { clientId: start },\n\t\t\t\tselectionEnd: { clientId: end },\n\t\t\t};\n\t\tcase 'RESET_BLOCKS':\n\t\t\tconst startClientId = state?.selectionStart?.clientId;\n\t\t\tconst endClientId = state?.selectionEnd?.clientId;\n\n\t\t\t// Do nothing if there's no selected block.\n\t\t\tif ( ! startClientId && ! endClientId ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\t// If the start of the selection won't exist after reset, remove selection.\n\t\t\tif (\n\t\t\t\t! action.blocks.some(\n\t\t\t\t\t( block ) => block.clientId === startClientId\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\treturn {\n\t\t\t\t\tselectionStart: {},\n\t\t\t\t\tselectionEnd: {},\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t// If the end of the selection won't exist after reset, collapse selection.\n\t\t\tif (\n\t\t\t\t! action.blocks.some(\n\t\t\t\t\t( block ) => block.clientId === endClientId\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tselectionEnd: state.selectionStart,\n\t\t\t\t};\n\t\t\t}\n\t}\n\n\tconst selectionStart = selectionHelper( state.selectionStart, action );\n\tconst selectionEnd = selectionHelper( state.selectionEnd, action );\n\n\tif (\n\t\tselectionStart === state.selectionStart &&\n\t\tselectionEnd === state.selectionEnd\n\t) {\n\t\treturn state;\n\t}\n\n\treturn {\n\t\tselectionStart,\n\t\tselectionEnd,\n\t};\n}\n\n/**\n * Reducer returning whether the user is multi-selecting.\n *\n * @param {boolean} state  Current state.\n * @param {Object}  action Dispatched action.\n *\n * @return {boolean} Updated state.\n */\nexport function isMultiSelecting( state = false, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'START_MULTI_SELECT':\n\t\t\treturn true;\n\n\t\tcase 'STOP_MULTI_SELECT':\n\t\t\treturn false;\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer returning whether selection is enabled.\n *\n * @param {boolean} state  Current state.\n * @param {Object}  action Dispatched action.\n *\n * @return {boolean} Updated state.\n */\nexport function isSelectionEnabled( state = true, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'TOGGLE_SELECTION':\n\t\t\treturn action.isSelectionEnabled;\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer returning the data needed to display a prompt when certain blocks\n * are removed, or `false` if no such prompt is requested.\n *\n * @param {boolean} state  Current state.\n * @param {Object}  action Dispatched action.\n *\n * @return {Object|false} Data for removal prompt display, if any.\n */\nfunction removalPromptData( state = false, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'DISPLAY_BLOCK_REMOVAL_PROMPT':\n\t\t\tconst { clientIds, selectPrevious, message } = action;\n\t\t\treturn {\n\t\t\t\tclientIds,\n\t\t\t\tselectPrevious,\n\t\t\t\tmessage,\n\t\t\t};\n\t\tcase 'CLEAR_BLOCK_REMOVAL_PROMPT':\n\t\t\treturn false;\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer returning any rules that a block editor may provide in order to\n * prevent a user from accidentally removing certain blocks. These rules are\n * then used to display a confirmation prompt to the user. For instance, in the\n * Site Editor, the Query Loop block is important enough to warrant such\n * confirmation.\n *\n * The data is a record whose keys are block types (e.g. 'core/query') and\n * whose values are the explanation to be shown to users (e.g. 'Query Loop\n * displays a list of posts or pages.').\n *\n * @param {boolean} state  Current state.\n * @param {Object}  action Dispatched action.\n *\n * @return {Record<string,string>} Updated state.\n */\nfunction blockRemovalRules( state = false, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'SET_BLOCK_REMOVAL_RULES':\n\t\t\treturn action.rules;\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer returning the initial block selection.\n *\n * Currently this in only used to restore the selection after block deletion and\n * pasting new content.This reducer should eventually be removed in favour of setting\n * selection directly.\n *\n * @param {boolean} state  Current state.\n * @param {Object}  action Dispatched action.\n *\n * @return {number|null} Initial position: 0, -1 or null.\n */\nexport function initialPosition( state = null, action ) {\n\tif (\n\t\taction.type === 'REPLACE_BLOCKS' &&\n\t\taction.initialPosition !== undefined\n\t) {\n\t\treturn action.initialPosition;\n\t} else if (\n\t\t[\n\t\t\t'MULTI_SELECT',\n\t\t\t'SELECT_BLOCK',\n\t\t\t'RESET_SELECTION',\n\t\t\t'INSERT_BLOCKS',\n\t\t\t'REPLACE_INNER_BLOCKS',\n\t\t].includes( action.type )\n\t) {\n\t\treturn action.initialPosition;\n\t}\n\n\treturn state;\n}\n\nexport function blocksMode( state = {}, action ) {\n\tif ( action.type === 'TOGGLE_BLOCK_MODE' ) {\n\t\tconst { clientId } = action;\n\t\treturn {\n\t\t\t...state,\n\t\t\t[ clientId ]:\n\t\t\t\tstate[ clientId ] && state[ clientId ] === 'html'\n\t\t\t\t\t? 'visual'\n\t\t\t\t\t: 'html',\n\t\t};\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer returning the block insertion point visibility, either null if there\n * is not an explicit insertion point assigned, or an object of its `index` and\n * `rootClientId`.\n *\n * @param {Object} state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {Object} Updated state.\n */\nexport function insertionPoint( state = null, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'SHOW_INSERTION_POINT': {\n\t\t\tconst {\n\t\t\t\trootClientId,\n\t\t\t\tindex,\n\t\t\t\t__unstableWithInserter,\n\t\t\t\toperation,\n\t\t\t\tnearestSide,\n\t\t\t} = action;\n\t\t\tconst nextState = {\n\t\t\t\trootClientId,\n\t\t\t\tindex,\n\t\t\t\t__unstableWithInserter,\n\t\t\t\toperation,\n\t\t\t\tnearestSide,\n\t\t\t};\n\n\t\t\t// Bail out updates if the states are the same.\n\t\t\treturn fastDeepEqual( state, nextState ) ? state : nextState;\n\t\t}\n\n\t\tcase 'HIDE_INSERTION_POINT':\n\t\t\treturn null;\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer returning whether the post blocks match the defined template or not.\n *\n * @param {Object} state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {boolean} Updated state.\n */\nexport function template( state = { isValid: true }, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'SET_TEMPLATE_VALIDITY':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisValid: action.isValid,\n\t\t\t};\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer returning the editor setting.\n *\n * @param {Object} state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {Object} Updated state.\n */\nexport function settings( state = SETTINGS_DEFAULTS, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'UPDATE_SETTINGS':\n\t\t\tif ( action.reset ) {\n\t\t\t\treturn {\n\t\t\t\t\t...SETTINGS_DEFAULTS,\n\t\t\t\t\t...action.settings,\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t...action.settings,\n\t\t\t};\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer returning the user preferences.\n *\n * @param {Object} state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {string} Updated state.\n */\nexport function preferences( state = PREFERENCES_DEFAULTS, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'INSERT_BLOCKS':\n\t\tcase 'REPLACE_BLOCKS': {\n\t\t\tconst nextInsertUsage = action.blocks.reduce(\n\t\t\t\t( prevUsage, block ) => {\n\t\t\t\t\tconst { attributes, name: blockName } = block;\n\t\t\t\t\tlet id = blockName;\n\t\t\t\t\t// If a block variation match is found change the name to be the same with the\n\t\t\t\t\t// one that is used for block variations in the Inserter (`getItemFromVariation`).\n\t\t\t\t\tconst match = select( blocksStore ).getActiveBlockVariation(\n\t\t\t\t\t\tblockName,\n\t\t\t\t\t\tattributes\n\t\t\t\t\t);\n\t\t\t\t\tif ( match?.name ) {\n\t\t\t\t\t\tid += '/' + match.name;\n\t\t\t\t\t}\n\t\t\t\t\tif ( blockName === 'core/block' ) {\n\t\t\t\t\t\tid += '/' + attributes.ref;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...prevUsage,\n\t\t\t\t\t\t[ id ]: {\n\t\t\t\t\t\t\ttime: action.time,\n\t\t\t\t\t\t\tcount: prevUsage[ id ]\n\t\t\t\t\t\t\t\t? prevUsage[ id ].count + 1\n\t\t\t\t\t\t\t\t: 1,\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t\tstate.insertUsage\n\t\t\t);\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tinsertUsage: nextInsertUsage,\n\t\t\t};\n\t\t}\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer returning an object where each key is a block client ID, its value\n * representing the settings for its nested blocks.\n *\n * @param {Object} state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {Object} Updated state.\n */\nexport const blockListSettings = ( state = {}, action ) => {\n\tswitch ( action.type ) {\n\t\t// Even if the replaced blocks have the same client ID, our logic\n\t\t// should correct the state.\n\t\tcase 'REPLACE_BLOCKS':\n\t\tcase 'REMOVE_BLOCKS': {\n\t\t\treturn Object.fromEntries(\n\t\t\t\tObject.entries( state ).filter(\n\t\t\t\t\t( [ id ] ) => ! action.clientIds.includes( id )\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t\tcase 'UPDATE_BLOCK_LIST_SETTINGS': {\n\t\t\tconst { clientId } = action;\n\t\t\tif ( ! action.settings ) {\n\t\t\t\tif ( state.hasOwnProperty( clientId ) ) {\n\t\t\t\t\tconst { [ clientId ]: removedBlock, ...restBlocks } = state;\n\t\t\t\t\treturn restBlocks;\n\t\t\t\t}\n\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\tif ( fastDeepEqual( state[ clientId ], action.settings ) ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[ clientId ]: action.settings,\n\t\t\t};\n\t\t}\n\t}\n\treturn state;\n};\n\n/**\n * Reducer returning which mode is enabled.\n *\n * @param {string} state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {string} Updated state.\n */\nexport function editorMode( state = 'edit', action ) {\n\t// Let inserting block in navigation mode always trigger Edit mode.\n\tif ( action.type === 'INSERT_BLOCKS' && state === 'navigation' ) {\n\t\treturn 'edit';\n\t}\n\n\tif ( action.type === 'SET_EDITOR_MODE' ) {\n\t\treturn action.mode;\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer returning whether the block moving mode is enabled or not.\n *\n * @param {string|null} state  Current state.\n * @param {Object}      action Dispatched action.\n *\n * @return {string|null} Updated state.\n */\nexport function hasBlockMovingClientId( state = null, action ) {\n\tif ( action.type === 'SET_BLOCK_MOVING_MODE' ) {\n\t\treturn action.hasBlockMovingClientId;\n\t}\n\n\tif ( action.type === 'SET_EDITOR_MODE' ) {\n\t\treturn null;\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer return an updated state representing the most recent block attribute\n * update. The state is structured as an object where the keys represent the\n * client IDs of blocks, the values a subset of attributes from the most recent\n * block update. The state is always reset to null if the last action is\n * anything other than an attributes update.\n *\n * @param {Object<string,Object>} state  Current state.\n * @param {Object}                action Action object.\n *\n * @return {[string,Object]} Updated state.\n */\nexport function lastBlockAttributesChange( state = null, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'UPDATE_BLOCK':\n\t\t\tif ( ! action.updates.attributes ) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\treturn { [ action.clientId ]: action.updates.attributes };\n\n\t\tcase 'UPDATE_BLOCK_ATTRIBUTES':\n\t\t\treturn action.clientIds.reduce(\n\t\t\t\t( accumulator, id ) => ( {\n\t\t\t\t\t...accumulator,\n\t\t\t\t\t[ id ]: action.uniqueByBlock\n\t\t\t\t\t\t? action.attributes[ id ]\n\t\t\t\t\t\t: action.attributes,\n\t\t\t\t} ),\n\t\t\t\t{}\n\t\t\t);\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer returning current highlighted block.\n *\n * @param {boolean} state  Current highlighted block.\n * @param {Object}  action Dispatched action.\n *\n * @return {string} Updated state.\n */\nexport function highlightedBlock( state, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'TOGGLE_BLOCK_HIGHLIGHT':\n\t\t\tconst { clientId, isHighlighted } = action;\n\n\t\t\tif ( isHighlighted ) {\n\t\t\t\treturn clientId;\n\t\t\t} else if ( state === clientId ) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn state;\n\t\tcase 'SELECT_BLOCK':\n\t\t\tif ( action.clientId !== state ) {\n\t\t\t\treturn null;\n\t\t\t}\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer returning current expanded block in the list view.\n *\n * @param {string|null} state  Current expanded block.\n * @param {Object}      action Dispatched action.\n *\n * @return {string|null} Updated state.\n */\nexport function expandedBlock( state = null, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'SET_BLOCK_EXPANDED_IN_LIST_VIEW':\n\t\t\treturn action.clientId;\n\t\tcase 'SELECT_BLOCK':\n\t\t\tif ( action.clientId !== state ) {\n\t\t\t\treturn null;\n\t\t\t}\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer returning the block insertion event list state.\n *\n * @param {Object} state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {Object} Updated state.\n */\nexport function lastBlockInserted( state = {}, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'INSERT_BLOCKS':\n\t\tcase 'REPLACE_BLOCKS':\n\t\t\tif ( ! action.blocks.length ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\tconst clientIds = action.blocks.map( ( block ) => {\n\t\t\t\treturn block.clientId;\n\t\t\t} );\n\n\t\t\tconst source = action.meta?.source;\n\n\t\t\treturn { clientIds, source };\n\t\tcase 'RESET_BLOCKS':\n\t\t\treturn {};\n\t}\n\treturn state;\n}\n\n/**\n * Reducer returning the block that is eding temporarily edited as blocks.\n *\n * @param {Object} state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {Object} Updated state.\n */\nexport function temporarilyEditingAsBlocks( state = '', action ) {\n\tif ( action.type === 'SET_TEMPORARILY_EDITING_AS_BLOCKS' ) {\n\t\treturn action.temporarilyEditingAsBlocks;\n\t}\n\treturn state;\n}\n\n/**\n * Reducer returning the focus mode that should be used when temporarily edit as blocks finishes.\n *\n * @param {Object} state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {Object} Updated state.\n */\nexport function temporarilyEditingFocusModeRevert( state = '', action ) {\n\tif ( action.type === 'SET_TEMPORARILY_EDITING_AS_BLOCKS' ) {\n\t\treturn action.focusModeToRevert;\n\t}\n\treturn state;\n}\n\n/**\n * Reducer returning a map of block client IDs to block editing modes.\n *\n * @param {Map}    state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {Map} Updated state.\n */\nexport function blockEditingModes( state = new Map(), action ) {\n\tswitch ( action.type ) {\n\t\tcase 'SET_BLOCK_EDITING_MODE':\n\t\t\treturn new Map( state ).set( action.clientId, action.mode );\n\t\tcase 'UNSET_BLOCK_EDITING_MODE': {\n\t\t\tconst newState = new Map( state );\n\t\t\tnewState.delete( action.clientId );\n\t\t\treturn newState;\n\t\t}\n\t\tcase 'RESET_BLOCKS': {\n\t\t\treturn state.has( '' )\n\t\t\t\t? new Map().set( '', state.get( '' ) )\n\t\t\t\t: state;\n\t\t}\n\t}\n\treturn state;\n}\n\n/**\n * Reducer returning the clientId of the block settings menu that is currently open.\n *\n * @param {string|null} state  Current state.\n * @param {Object}      action Dispatched action.\n *\n * @return {string|null} Updated state.\n */\nexport function openedBlockSettingsMenu( state = null, action ) {\n\tif ( 'SET_OPENED_BLOCK_SETTINGS_MENU' === action.type ) {\n\t\treturn action?.clientId ?? null;\n\t}\n\treturn state;\n}\n\n/**\n * Reducer returning a map of style IDs to style overrides.\n *\n * @param {Map}    state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {Map} Updated state.\n */\nexport function styleOverrides( state = new Map(), action ) {\n\tswitch ( action.type ) {\n\t\tcase 'SET_STYLE_OVERRIDE':\n\t\t\treturn new Map( state ).set( action.id, action.style );\n\t\tcase 'DELETE_STYLE_OVERRIDE': {\n\t\t\tconst newState = new Map( state );\n\t\t\tnewState.delete( action.id );\n\t\t\treturn newState;\n\t\t}\n\t}\n\treturn state;\n}\n\n/**\n * Reducer returning a map of the registered inserter media categories.\n *\n * @param {Array}  state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {Array} Updated state.\n */\nexport function registeredInserterMediaCategories( state = [], action ) {\n\tswitch ( action.type ) {\n\t\tcase 'REGISTER_INSERTER_MEDIA_CATEGORY':\n\t\t\treturn [ ...state, action.category ];\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer setting last focused element\n *\n * @param {boolean} state  Current state.\n * @param {Object}  action Dispatched action.\n *\n * @return {boolean} Updated state.\n */\nexport function lastFocus( state = false, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'LAST_FOCUS':\n\t\t\treturn action.lastFocus;\n\t}\n\n\treturn state;\n}\n\nconst combinedReducers = combineReducers( {\n\tblocks,\n\tisDragging,\n\tisTyping,\n\tisBlockInterfaceHidden,\n\tdraggedBlocks,\n\tselection,\n\tisMultiSelecting,\n\tisSelectionEnabled,\n\tinitialPosition,\n\tblocksMode,\n\tblockListSettings,\n\tinsertionPoint,\n\ttemplate,\n\tsettings,\n\tpreferences,\n\tlastBlockAttributesChange,\n\tlastFocus,\n\teditorMode,\n\thasBlockMovingClientId,\n\texpandedBlock,\n\thighlightedBlock,\n\tlastBlockInserted,\n\ttemporarilyEditingAsBlocks,\n\ttemporarilyEditingFocusModeRevert,\n\tblockVisibility,\n\tblockEditingModes,\n\tstyleOverrides,\n\tremovalPromptData,\n\tblockRemovalRules,\n\topenedBlockSettingsMenu,\n\tregisteredInserterMediaCategories,\n} );\n\nfunction withAutomaticChangeReset( reducer ) {\n\treturn ( state, action ) => {\n\t\tconst nextState = reducer( state, action );\n\n\t\tif ( ! state ) {\n\t\t\treturn nextState;\n\t\t}\n\n\t\t// Take over the last value without creating a new reference.\n\t\tnextState.automaticChangeStatus = state.automaticChangeStatus;\n\n\t\tif ( action.type === 'MARK_AUTOMATIC_CHANGE' ) {\n\t\t\treturn {\n\t\t\t\t...nextState,\n\t\t\t\tautomaticChangeStatus: 'pending',\n\t\t\t};\n\t\t}\n\n\t\tif (\n\t\t\taction.type === 'MARK_AUTOMATIC_CHANGE_FINAL' &&\n\t\t\tstate.automaticChangeStatus === 'pending'\n\t\t) {\n\t\t\treturn {\n\t\t\t\t...nextState,\n\t\t\t\tautomaticChangeStatus: 'final',\n\t\t\t};\n\t\t}\n\n\t\t// If there's a change that doesn't affect blocks or selection, maintain\n\t\t// the current status.\n\t\tif (\n\t\t\tnextState.blocks === state.blocks &&\n\t\t\tnextState.selection === state.selection\n\t\t) {\n\t\t\treturn nextState;\n\t\t}\n\n\t\t// As long as the state is not final, ignore any selection changes.\n\t\tif (\n\t\t\tnextState.automaticChangeStatus !== 'final' &&\n\t\t\tnextState.selection !== state.selection\n\t\t) {\n\t\t\treturn nextState;\n\t\t}\n\n\t\t// Reset the status if blocks change or selection changes (when status is final).\n\t\treturn {\n\t\t\t...nextState,\n\t\t\tautomaticChangeStatus: undefined,\n\t\t};\n\t};\n}\n\nexport default withAutomaticChangeReset( combinedReducers );\n","'use strict';\n\n/** @typedef {(...args: any[]) => *[]} GetDependants */\n\n/** @typedef {() => void} Clear */\n\n/**\n * @typedef {{\n *   getDependants: GetDependants,\n *   clear: Clear\n * }} EnhancedSelector\n */\n\n/**\n * Internal cache entry.\n *\n * @typedef CacheNode\n *\n * @property {?CacheNode|undefined} [prev] Previous node.\n * @property {?CacheNode|undefined} [next] Next node.\n * @property {*[]} args Function arguments for cache entry.\n * @property {*} val Function result.\n */\n\n/**\n * @typedef Cache\n *\n * @property {Clear} clear Function to clear cache.\n * @property {boolean} [isUniqueByDependants] Whether dependants are valid in\n * considering cache uniqueness. A cache is unique if dependents are all arrays\n * or objects.\n * @property {CacheNode?} [head] Cache head.\n * @property {*[]} [lastDependants] Dependants from previous invocation.\n */\n\n/**\n * Arbitrary value used as key for referencing cache object in WeakMap tree.\n *\n * @type {{}}\n */\nvar LEAF_KEY = {};\n\n/**\n * Returns the first argument as the sole entry in an array.\n *\n * @template T\n *\n * @param {T} value Value to return.\n *\n * @return {[T]} Value returned as entry in array.\n */\nfunction arrayOf(value) {\n\treturn [value];\n}\n\n/**\n * Returns true if the value passed is object-like, or false otherwise. A value\n * is object-like if it can support property assignment, e.g. object or array.\n *\n * @param {*} value Value to test.\n *\n * @return {boolean} Whether value is object-like.\n */\nfunction isObjectLike(value) {\n\treturn !!value && 'object' === typeof value;\n}\n\n/**\n * Creates and returns a new cache object.\n *\n * @return {Cache} Cache object.\n */\nfunction createCache() {\n\t/** @type {Cache} */\n\tvar cache = {\n\t\tclear: function () {\n\t\t\tcache.head = null;\n\t\t},\n\t};\n\n\treturn cache;\n}\n\n/**\n * Returns true if entries within the two arrays are strictly equal by\n * reference from a starting index.\n *\n * @param {*[]} a First array.\n * @param {*[]} b Second array.\n * @param {number} fromIndex Index from which to start comparison.\n *\n * @return {boolean} Whether arrays are shallowly equal.\n */\nfunction isShallowEqual(a, b, fromIndex) {\n\tvar i;\n\n\tif (a.length !== b.length) {\n\t\treturn false;\n\t}\n\n\tfor (i = fromIndex; i < a.length; i++) {\n\t\tif (a[i] !== b[i]) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn true;\n}\n\n/**\n * Returns a memoized selector function. The getDependants function argument is\n * called before the memoized selector and is expected to return an immutable\n * reference or array of references on which the selector depends for computing\n * its own return value. The memoize cache is preserved only as long as those\n * dependant references remain the same. If getDependants returns a different\n * reference(s), the cache is cleared and the selector value regenerated.\n *\n * @template {(...args: *[]) => *} S\n *\n * @param {S} selector Selector function.\n * @param {GetDependants=} getDependants Dependant getter returning an array of\n * references used in cache bust consideration.\n */\nexport default function (selector, getDependants) {\n\t/** @type {WeakMap<*,*>} */\n\tvar rootCache;\n\n\t/** @type {GetDependants} */\n\tvar normalizedGetDependants = getDependants ? getDependants : arrayOf;\n\n\t/**\n\t * Returns the cache for a given dependants array. When possible, a WeakMap\n\t * will be used to create a unique cache for each set of dependants. This\n\t * is feasible due to the nature of WeakMap in allowing garbage collection\n\t * to occur on entries where the key object is no longer referenced. Since\n\t * WeakMap requires the key to be an object, this is only possible when the\n\t * dependant is object-like. The root cache is created as a hierarchy where\n\t * each top-level key is the first entry in a dependants set, the value a\n\t * WeakMap where each key is the next dependant, and so on. This continues\n\t * so long as the dependants are object-like. If no dependants are object-\n\t * like, then the cache is shared across all invocations.\n\t *\n\t * @see isObjectLike\n\t *\n\t * @param {*[]} dependants Selector dependants.\n\t *\n\t * @return {Cache} Cache object.\n\t */\n\tfunction getCache(dependants) {\n\t\tvar caches = rootCache,\n\t\t\tisUniqueByDependants = true,\n\t\t\ti,\n\t\t\tdependant,\n\t\t\tmap,\n\t\t\tcache;\n\n\t\tfor (i = 0; i < dependants.length; i++) {\n\t\t\tdependant = dependants[i];\n\n\t\t\t// Can only compose WeakMap from object-like key.\n\t\t\tif (!isObjectLike(dependant)) {\n\t\t\t\tisUniqueByDependants = false;\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t// Does current segment of cache already have a WeakMap?\n\t\t\tif (caches.has(dependant)) {\n\t\t\t\t// Traverse into nested WeakMap.\n\t\t\t\tcaches = caches.get(dependant);\n\t\t\t} else {\n\t\t\t\t// Create, set, and traverse into a new one.\n\t\t\t\tmap = new WeakMap();\n\t\t\t\tcaches.set(dependant, map);\n\t\t\t\tcaches = map;\n\t\t\t}\n\t\t}\n\n\t\t// We use an arbitrary (but consistent) object as key for the last item\n\t\t// in the WeakMap to serve as our running cache.\n\t\tif (!caches.has(LEAF_KEY)) {\n\t\t\tcache = createCache();\n\t\t\tcache.isUniqueByDependants = isUniqueByDependants;\n\t\t\tcaches.set(LEAF_KEY, cache);\n\t\t}\n\n\t\treturn caches.get(LEAF_KEY);\n\t}\n\n\t/**\n\t * Resets root memoization cache.\n\t */\n\tfunction clear() {\n\t\trootCache = new WeakMap();\n\t}\n\n\t/* eslint-disable jsdoc/check-param-names */\n\t/**\n\t * The augmented selector call, considering first whether dependants have\n\t * changed before passing it to underlying memoize function.\n\t *\n\t * @param {*}    source    Source object for derivation.\n\t * @param {...*} extraArgs Additional arguments to pass to selector.\n\t *\n\t * @return {*} Selector result.\n\t */\n\t/* eslint-enable jsdoc/check-param-names */\n\tfunction callSelector(/* source, ...extraArgs */) {\n\t\tvar len = arguments.length,\n\t\t\tcache,\n\t\t\tnode,\n\t\t\ti,\n\t\t\targs,\n\t\t\tdependants;\n\n\t\t// Create copy of arguments (avoid leaking deoptimization).\n\t\targs = new Array(len);\n\t\tfor (i = 0; i < len; i++) {\n\t\t\targs[i] = arguments[i];\n\t\t}\n\n\t\tdependants = normalizedGetDependants.apply(null, args);\n\t\tcache = getCache(dependants);\n\n\t\t// If not guaranteed uniqueness by dependants (primitive type), shallow\n\t\t// compare against last dependants and, if references have changed,\n\t\t// destroy cache to recalculate result.\n\t\tif (!cache.isUniqueByDependants) {\n\t\t\tif (\n\t\t\t\tcache.lastDependants &&\n\t\t\t\t!isShallowEqual(dependants, cache.lastDependants, 0)\n\t\t\t) {\n\t\t\t\tcache.clear();\n\t\t\t}\n\n\t\t\tcache.lastDependants = dependants;\n\t\t}\n\n\t\tnode = cache.head;\n\t\twhile (node) {\n\t\t\t// Check whether node arguments match arguments\n\t\t\tif (!isShallowEqual(node.args, args, 1)) {\n\t\t\t\tnode = node.next;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// At this point we can assume we've found a match\n\n\t\t\t// Surface matched node to head if not already\n\t\t\tif (node !== cache.head) {\n\t\t\t\t// Adjust siblings to point to each other.\n\t\t\t\t/** @type {CacheNode} */ (node.prev).next = node.next;\n\t\t\t\tif (node.next) {\n\t\t\t\t\tnode.next.prev = node.prev;\n\t\t\t\t}\n\n\t\t\t\tnode.next = cache.head;\n\t\t\t\tnode.prev = null;\n\t\t\t\t/** @type {CacheNode} */ (cache.head).prev = node;\n\t\t\t\tcache.head = node;\n\t\t\t}\n\n\t\t\t// Return immediately\n\t\t\treturn node.val;\n\t\t}\n\n\t\t// No cached value found. Continue to insertion phase:\n\n\t\tnode = /** @type {CacheNode} */ ({\n\t\t\t// Generate the result from original function\n\t\t\tval: selector.apply(null, args),\n\t\t});\n\n\t\t// Avoid including the source object in the cache.\n\t\targs[0] = null;\n\t\tnode.args = args;\n\n\t\t// Don't need to check whether node is already head, since it would\n\t\t// have been returned above already if it was\n\n\t\t// Shift existing head down list\n\t\tif (cache.head) {\n\t\t\tcache.head.prev = node;\n\t\t\tnode.next = cache.head;\n\t\t}\n\n\t\tcache.head = node;\n\n\t\treturn node.val;\n\t}\n\n\tcallSelector.getDependants = normalizedGetDependants;\n\tcallSelector.clear = clear;\n\tclear();\n\n\treturn /** @type {S & EnhancedSelector} */ (callSelector);\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"primitives\"];","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst symbol = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M21.3 10.8l-5.6-5.6c-.7-.7-1.8-.7-2.5 0l-5.6 5.6c-.7.7-.7 1.8 0 2.5l5.6 5.6c.3.3.8.5 1.2.5s.9-.2 1.2-.5l5.6-5.6c.8-.7.8-1.9.1-2.5zm-1 1.4l-5.6 5.6c-.1.1-.3.1-.4 0l-5.6-5.6c-.1-.1-.1-.3 0-.4l5.6-5.6s.1-.1.2-.1.1 0 .2.1l5.6 5.6c.1.1.1.3 0 .4zm-16.6-.4L10 5.5l-1-1-6.3 6.3c-.7.7-.7 1.8 0 2.5L9 19.5l1.1-1.1-6.3-6.3c-.2 0-.2-.2-.1-.3z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default symbol;\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"richText\"];","export const selectBlockPatternsKey = Symbol( 'selectBlockPatternsKey' );\nexport const reusableBlocksSelectKey = Symbol( 'reusableBlocksSelect' );\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"privateApis\"];","/**\r\n * WordPress dependencies\r\n */\r\nimport { __dangerousOptInToUnstableAPIsOnlyForCoreModules } from '@wordpress/private-apis';\r\n\r\nexport const { lock, unlock } =\r\n\t__dangerousOptInToUnstableAPIsOnlyForCoreModules(\r\n\t\t'I know using unstable features means my theme or plugin will inevitably break in the next version of WordPress.',\r\n\t\t'@wordpress/block-editor'\r\n\t);\r\n","export const STORE_NAME = 'core/block-editor';\r\n","/**\n * Internal dependencies\n */\nimport { selectBlockPatternsKey } from './private-keys';\nimport { unlock } from '../lock-unlock';\nimport { STORE_NAME } from './constants';\n\nexport const checkAllowList = ( list, item, defaultResult = null ) => {\n\tif ( typeof list === 'boolean' ) {\n\t\treturn list;\n\t}\n\tif ( Array.isArray( list ) ) {\n\t\t// TODO: when there is a canonical way to detect that we are editing a post\n\t\t// the following check should be changed to something like:\n\t\t// if ( list.includes( 'core/post-content' ) && getEditorMode() === 'post-content' && item === null )\n\t\tif ( list.includes( 'core/post-content' ) && item === null ) {\n\t\t\treturn true;\n\t\t}\n\t\treturn list.includes( item );\n\t}\n\treturn defaultResult;\n};\n\nexport const checkAllowListRecursive = ( blocks, allowedBlockTypes ) => {\n\tif ( typeof allowedBlockTypes === 'boolean' ) {\n\t\treturn allowedBlockTypes;\n\t}\n\n\tconst blocksQueue = [ ...blocks ];\n\twhile ( blocksQueue.length > 0 ) {\n\t\tconst block = blocksQueue.shift();\n\n\t\tconst isAllowed = checkAllowList(\n\t\t\tallowedBlockTypes,\n\t\t\tblock.name || block.blockName,\n\t\t\ttrue\n\t\t);\n\t\tif ( ! isAllowed ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tblock.innerBlocks?.forEach( ( innerBlock ) => {\n\t\t\tblocksQueue.push( innerBlock );\n\t\t} );\n\t}\n\n\treturn true;\n};\n\nexport const getAllPatternsDependants = ( select ) => ( state ) => {\n\treturn [\n\t\tstate.settings.__experimentalBlockPatterns,\n\t\tstate.settings.__experimentalUserPatternCategories,\n\t\tstate.settings.__experimentalReusableBlocks,\n\t\tstate.settings[ selectBlockPatternsKey ]?.( select ),\n\t\tstate.blockPatterns,\n\t\tunlock( select( STORE_NAME ) ).getReusableBlocks(),\n\t];\n};\n\nexport function getInsertBlockTypeDependants( state, rootClientId ) {\n\treturn [\n\t\tstate.blockListSettings[ rootClientId ],\n\t\tstate.blocks.byClientId.get( rootClientId ),\n\t\tstate.settings.allowedBlockTypes,\n\t\tstate.settings.templateLock,\n\t\tstate.blockEditingModes,\n\t];\n}\n","/**\r\n * Recursive stable sorting comparator function.\r\n *\r\n * @param {string|Function} field Field to sort by.\r\n * @param {Array}           items Items to sort.\r\n * @param {string}          order Order, 'asc' or 'desc'.\r\n * @return {Function} Comparison function to be used in a `.sort()`.\r\n */\r\nconst comparator = ( field, items, order ) => {\r\n\treturn ( a, b ) => {\r\n\t\tlet cmpA, cmpB;\r\n\r\n\t\tif ( typeof field === 'function' ) {\r\n\t\t\tcmpA = field( a );\r\n\t\t\tcmpB = field( b );\r\n\t\t} else {\r\n\t\t\tcmpA = a[ field ];\r\n\t\t\tcmpB = b[ field ];\r\n\t\t}\r\n\r\n\t\tif ( cmpA > cmpB ) {\r\n\t\t\treturn order === 'asc' ? 1 : -1;\r\n\t\t} else if ( cmpB > cmpA ) {\r\n\t\t\treturn order === 'asc' ? -1 : 1;\r\n\t\t}\r\n\r\n\t\tconst orderA = items.findIndex( ( item ) => item === a );\r\n\t\tconst orderB = items.findIndex( ( item ) => item === b );\r\n\r\n\t\t// Stable sort: maintaining original array order\r\n\t\tif ( orderA > orderB ) {\r\n\t\t\treturn 1;\r\n\t\t} else if ( orderB > orderA ) {\r\n\t\t\treturn -1;\r\n\t\t}\r\n\r\n\t\treturn 0;\r\n\t};\r\n};\r\n\r\n/**\r\n * Order items by a certain key.\r\n * Supports decorator functions that allow complex picking of a comparison field.\r\n * Sorts in ascending order by default, but supports descending as well.\r\n * Stable sort - maintains original order of equal items.\r\n *\r\n * @param {Array}           items Items to order.\r\n * @param {string|Function} field Field to order by.\r\n * @param {string}          order Sorting order, `asc` or `desc`.\r\n * @return {Array} Sorted items.\r\n */\r\nexport function orderBy( items, field, order = 'asc' ) {\r\n\treturn items.concat().sort( comparator( field, items, order ) );\r\n}\r\n","/**\n * External dependencies\n */\nimport createSelector from 'rememo';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tgetBlockType,\n\tgetBlockTypes,\n\tgetBlockVariations,\n\thasBlockSupport,\n\tgetPossibleBlockTransformations,\n\tparse,\n\tswitchToBlockType,\n\tstore as blocksStore,\n} from '@wordpress/blocks';\nimport { Platform } from '@wordpress/element';\nimport { applyFilters } from '@wordpress/hooks';\nimport { symbol } from '@wordpress/icons';\nimport { create, remove, toHTMLString } from '@wordpress/rich-text';\nimport deprecated from '@wordpress/deprecated';\nimport { createRegistrySelector } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport {\n\tcheckAllowListRecursive,\n\tcheckAllowList,\n\tgetAllPatternsDependants,\n\tgetInsertBlockTypeDependants,\n} from './utils';\nimport { orderBy } from '../utils/sorting';\nimport { STORE_NAME } from './constants';\nimport { unlock } from '../lock-unlock';\n\n/**\n * A block selection object.\n *\n * @typedef {Object} WPBlockSelection\n *\n * @property {string} clientId     A block client ID.\n * @property {string} attributeKey A block attribute key.\n * @property {number} offset       An attribute value offset, based on the rich\n *                                 text value. See `wp.richText.create`.\n */\n\n// Module constants.\nconst MILLISECONDS_PER_HOUR = 3600 * 1000;\nconst MILLISECONDS_PER_DAY = 24 * 3600 * 1000;\nconst MILLISECONDS_PER_WEEK = 7 * 24 * 3600 * 1000;\n\n/**\n * Shared reference to an empty array for cases where it is important to avoid\n * returning a new array reference on every invocation, as in a connected or\n * other pure component which performs `shouldComponentUpdate` check on props.\n * This should be used as a last resort, since the normalized data should be\n * maintained by the reducer result in state.\n *\n * @type {Array}\n */\nconst EMPTY_ARRAY = [];\n\n/**\n * Shared reference to an empty Set for cases where it is important to avoid\n * returning a new Set reference on every invocation, as in a connected or\n * other pure component which performs `shouldComponentUpdate` check on props.\n * This should be used as a last resort, since the normalized data should be\n * maintained by the reducer result in state.\n *\n * @type {Set}\n */\nconst EMPTY_SET = new Set();\n\n/**\n * Returns a block's name given its client ID, or null if no block exists with\n * the client ID.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId Block client ID.\n *\n * @return {string} Block name.\n */\nexport function getBlockName( state, clientId ) {\n\tconst block = state.blocks.byClientId.get( clientId );\n\tconst socialLinkName = 'core/social-link';\n\n\tif ( Platform.OS !== 'web' && block?.name === socialLinkName ) {\n\t\tconst attributes = state.blocks.attributes.get( clientId );\n\t\tconst { service } = attributes ?? {};\n\n\t\treturn service ? `${ socialLinkName }-${ service }` : socialLinkName;\n\t}\n\treturn block ? block.name : null;\n}\n\n/**\n * Returns whether a block is valid or not.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId Block client ID.\n *\n * @return {boolean} Is Valid.\n */\nexport function isBlockValid( state, clientId ) {\n\tconst block = state.blocks.byClientId.get( clientId );\n\treturn !! block && block.isValid;\n}\n\n/**\n * Returns a block's attributes given its client ID, or null if no block exists with\n * the client ID.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId Block client ID.\n *\n * @return {Object?} Block attributes.\n */\nexport function getBlockAttributes( state, clientId ) {\n\tconst block = state.blocks.byClientId.get( clientId );\n\tif ( ! block ) {\n\t\treturn null;\n\t}\n\n\treturn state.blocks.attributes.get( clientId );\n}\n\n/**\n * Returns a block given its client ID. This is a parsed copy of the block,\n * containing its `blockName`, `clientId`, and current `attributes` state. This\n * is not the block's registration settings, which must be retrieved from the\n * blocks module registration store.\n *\n * getBlock recurses through its inner blocks until all its children blocks have\n * been retrieved. Note that getBlock will not return the child inner blocks of\n * an inner block controller. This is because an inner block controller syncs\n * itself with its own entity, and should therefore not be included with the\n * blocks of a different entity. For example, say you call `getBlocks( TP )` to\n * get the blocks of a template part. If another template part is a child of TP,\n * then the nested template part's child blocks will not be returned. This way,\n * the template block itself is considered part of the parent, but the children\n * are not.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId Block client ID.\n *\n * @return {Object} Parsed block object.\n */\nexport function getBlock( state, clientId ) {\n\tif ( ! state.blocks.byClientId.has( clientId ) ) {\n\t\treturn null;\n\t}\n\n\treturn state.blocks.tree.get( clientId );\n}\n\nexport const __unstableGetBlockWithoutInnerBlocks = createSelector(\n\t( state, clientId ) => {\n\t\tconst block = state.blocks.byClientId.get( clientId );\n\t\tif ( ! block ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn {\n\t\t\t...block,\n\t\t\tattributes: getBlockAttributes( state, clientId ),\n\t\t};\n\t},\n\t( state, clientId ) => [\n\t\tstate.blocks.byClientId.get( clientId ),\n\t\tstate.blocks.attributes.get( clientId ),\n\t]\n);\n\n/**\n * Returns all block objects for the current post being edited as an array in\n * the order they appear in the post. Note that this will exclude child blocks\n * of nested inner block controllers.\n *\n * @param {Object}  state        Editor state.\n * @param {?string} rootClientId Optional root client ID of block list.\n *\n * @return {Object[]} Post blocks.\n */\nexport function getBlocks( state, rootClientId ) {\n\tconst treeKey =\n\t\t! rootClientId || ! areInnerBlocksControlled( state, rootClientId )\n\t\t\t? rootClientId || ''\n\t\t\t: 'controlled||' + rootClientId;\n\treturn state.blocks.tree.get( treeKey )?.innerBlocks || EMPTY_ARRAY;\n}\n\n/**\n * Returns a stripped down block object containing only its client ID,\n * and its inner blocks' client IDs.\n *\n * @deprecated\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId Client ID of the block to get.\n *\n * @return {Object} Client IDs of the post blocks.\n */\nexport const __unstableGetClientIdWithClientIdsTree = createSelector(\n\t( state, clientId ) => {\n\t\tdeprecated(\n\t\t\t\"wp.data.select( 'core/block-editor' ).__unstableGetClientIdWithClientIdsTree\",\n\t\t\t{\n\t\t\t\tsince: '6.3',\n\t\t\t\tversion: '6.5',\n\t\t\t}\n\t\t);\n\t\treturn {\n\t\t\tclientId,\n\t\t\tinnerBlocks: __unstableGetClientIdsTree( state, clientId ),\n\t\t};\n\t},\n\t( state ) => [ state.blocks.order ]\n);\n\n/**\n * Returns the block tree represented in the block-editor store from the\n * given root, consisting of stripped down block objects containing only\n * their client IDs, and their inner blocks' client IDs.\n *\n * @deprecated\n *\n * @param {Object}  state        Editor state.\n * @param {?string} rootClientId Optional root client ID of block list.\n *\n * @return {Object[]} Client IDs of the post blocks.\n */\nexport const __unstableGetClientIdsTree = createSelector(\n\t( state, rootClientId = '' ) => {\n\t\tdeprecated(\n\t\t\t\"wp.data.select( 'core/block-editor' ).__unstableGetClientIdsTree\",\n\t\t\t{\n\t\t\t\tsince: '6.3',\n\t\t\t\tversion: '6.5',\n\t\t\t}\n\t\t);\n\t\treturn getBlockOrder( state, rootClientId ).map( ( clientId ) =>\n\t\t\t__unstableGetClientIdWithClientIdsTree( state, clientId )\n\t\t);\n\t},\n\t( state ) => [ state.blocks.order ]\n);\n\n/**\n * Returns an array containing the clientIds of all descendants of the blocks\n * given. Returned ids are ordered first by the order of the ids given, then\n * by the order that they appear in the editor.\n *\n * @param {Object}          state   Global application state.\n * @param {string|string[]} rootIds Client ID(s) for which descendant blocks are to be returned.\n *\n * @return {Array} Client IDs of descendants.\n */\nexport const getClientIdsOfDescendants = createSelector(\n\t( state, rootIds ) => {\n\t\trootIds = Array.isArray( rootIds ) ? [ ...rootIds ] : [ rootIds ];\n\t\tconst ids = [];\n\n\t\t// Add the descendants of the root blocks first.\n\t\tfor ( const rootId of rootIds ) {\n\t\t\tconst order = state.blocks.order.get( rootId );\n\t\t\tif ( order ) {\n\t\t\t\tids.push( ...order );\n\t\t\t}\n\t\t}\n\n\t\tlet index = 0;\n\n\t\t// Add the descendants of the descendants, recursively.\n\t\twhile ( index < ids.length ) {\n\t\t\tconst id = ids[ index ];\n\t\t\tconst order = state.blocks.order.get( id );\n\t\t\tif ( order ) {\n\t\t\t\tids.splice( index + 1, 0, ...order );\n\t\t\t}\n\t\t\tindex++;\n\t\t}\n\n\t\treturn ids;\n\t},\n\t( state ) => [ state.blocks.order ]\n);\n\n/**\n * Returns an array containing the clientIds of the top-level blocks and\n * their descendants of any depth (for nested blocks). Ids are returned\n * in the same order that they appear in the editor.\n *\n * @param {Object} state Global application state.\n *\n * @return {Array} ids of top-level and descendant blocks.\n */\nexport const getClientIdsWithDescendants = ( state ) =>\n\tgetClientIdsOfDescendants( state, '' );\n\n/**\n * Returns the total number of blocks, or the total number of blocks with a specific name in a post.\n * The number returned includes nested blocks.\n *\n * @param {Object}  state     Global application state.\n * @param {?string} blockName Optional block name, if specified only blocks of that type will be counted.\n *\n * @return {number} Number of blocks in the post, or number of blocks with name equal to blockName.\n */\nexport const getGlobalBlockCount = createSelector(\n\t( state, blockName ) => {\n\t\tconst clientIds = getClientIdsWithDescendants( state );\n\t\tif ( ! blockName ) {\n\t\t\treturn clientIds.length;\n\t\t}\n\t\tlet count = 0;\n\t\tfor ( const clientId of clientIds ) {\n\t\t\tconst block = state.blocks.byClientId.get( clientId );\n\t\t\tif ( block.name === blockName ) {\n\t\t\t\tcount++;\n\t\t\t}\n\t\t}\n\t\treturn count;\n\t},\n\t( state ) => [ state.blocks.order, state.blocks.byClientId ]\n);\n\n/**\n * Returns all blocks that match a blockName. Results include nested blocks.\n *\n * @param {Object}  state     Global application state.\n * @param {?string} blockName Optional block name, if not specified, returns an empty array.\n *\n * @return {Array} Array of clientIds of blocks with name equal to blockName.\n */\nexport const getBlocksByName = createSelector(\n\t( state, blockName ) => {\n\t\tif ( ! blockName ) {\n\t\t\treturn EMPTY_ARRAY;\n\t\t}\n\t\tconst blockNames = Array.isArray( blockName )\n\t\t\t? blockName\n\t\t\t: [ blockName ];\n\t\tconst clientIds = getClientIdsWithDescendants( state );\n\t\tconst foundBlocks = clientIds.filter( ( clientId ) => {\n\t\t\tconst block = state.blocks.byClientId.get( clientId );\n\t\t\treturn blockNames.includes( block.name );\n\t\t} );\n\t\treturn foundBlocks.length > 0 ? foundBlocks : EMPTY_ARRAY;\n\t},\n\t( state ) => [ state.blocks.order, state.blocks.byClientId ]\n);\n\n/**\n * Returns all global blocks that match a blockName. Results include nested blocks.\n *\n * @deprecated\n *\n * @param {Object}  state     Global application state.\n * @param {?string} blockName Optional block name, if not specified, returns an empty array.\n *\n * @return {Array} Array of clientIds of blocks with name equal to blockName.\n */\nexport function __experimentalGetGlobalBlocksByName( state, blockName ) {\n\tdeprecated(\n\t\t\"wp.data.select( 'core/block-editor' ).__experimentalGetGlobalBlocksByName\",\n\t\t{\n\t\t\tsince: '6.5',\n\t\t\talternative: `wp.data.select( 'core/block-editor' ).getBlocksByName`,\n\t\t}\n\t);\n\treturn getBlocksByName( state, blockName );\n}\n\n/**\n * Given an array of block client IDs, returns the corresponding array of block\n * objects.\n *\n * @param {Object}   state     Editor state.\n * @param {string[]} clientIds Client IDs for which blocks are to be returned.\n *\n * @return {WPBlock[]} Block objects.\n */\nexport const getBlocksByClientId = createSelector(\n\t( state, clientIds ) =>\n\t\t( Array.isArray( clientIds ) ? clientIds : [ clientIds ] ).map(\n\t\t\t( clientId ) => getBlock( state, clientId )\n\t\t),\n\t( state, clientIds ) =>\n\t\t( Array.isArray( clientIds ) ? clientIds : [ clientIds ] ).map(\n\t\t\t( clientId ) => state.blocks.tree.get( clientId )\n\t\t)\n);\n\n/**\n * Given an array of block client IDs, returns the corresponding array of block\n * names.\n *\n * @param {Object}   state     Editor state.\n * @param {string[]} clientIds Client IDs for which block names are to be returned.\n *\n * @return {string[]} Block names.\n */\nexport const getBlockNamesByClientId = createSelector(\n\t( state, clientIds ) =>\n\t\tgetBlocksByClientId( state, clientIds )\n\t\t\t.filter( Boolean )\n\t\t\t.map( ( block ) => block.name ),\n\t( state, clientIds ) => getBlocksByClientId( state, clientIds )\n);\n\n/**\n * Returns the number of blocks currently present in the post.\n *\n * @param {Object}  state        Editor state.\n * @param {?string} rootClientId Optional root client ID of block list.\n *\n * @return {number} Number of blocks in the post.\n */\nexport function getBlockCount( state, rootClientId ) {\n\treturn getBlockOrder( state, rootClientId ).length;\n}\n\n/**\n * Returns the current selection start block client ID, attribute key and text\n * offset.\n *\n * @param {Object} state Block editor state.\n *\n * @return {WPBlockSelection} Selection start information.\n */\nexport function getSelectionStart( state ) {\n\treturn state.selection.selectionStart;\n}\n\n/**\n * Returns the current selection end block client ID, attribute key and text\n * offset.\n *\n * @param {Object} state Block editor state.\n *\n * @return {WPBlockSelection} Selection end information.\n */\nexport function getSelectionEnd( state ) {\n\treturn state.selection.selectionEnd;\n}\n\n/**\n * Returns the current block selection start. This value may be null, and it\n * may represent either a singular block selection or multi-selection start.\n * A selection is singular if its start and end match.\n *\n * @param {Object} state Global application state.\n *\n * @return {?string} Client ID of block selection start.\n */\nexport function getBlockSelectionStart( state ) {\n\treturn state.selection.selectionStart.clientId;\n}\n\n/**\n * Returns the current block selection end. This value may be null, and it\n * may represent either a singular block selection or multi-selection end.\n * A selection is singular if its start and end match.\n *\n * @param {Object} state Global application state.\n *\n * @return {?string} Client ID of block selection end.\n */\nexport function getBlockSelectionEnd( state ) {\n\treturn state.selection.selectionEnd.clientId;\n}\n\n/**\n * Returns the number of blocks currently selected in the post.\n *\n * @param {Object} state Global application state.\n *\n * @return {number} Number of blocks selected in the post.\n */\nexport function getSelectedBlockCount( state ) {\n\tconst multiSelectedBlockCount =\n\t\tgetMultiSelectedBlockClientIds( state ).length;\n\n\tif ( multiSelectedBlockCount ) {\n\t\treturn multiSelectedBlockCount;\n\t}\n\n\treturn state.selection.selectionStart.clientId ? 1 : 0;\n}\n\n/**\n * Returns true if there is a single selected block, or false otherwise.\n *\n * @param {Object} state Editor state.\n *\n * @return {boolean} Whether a single block is selected.\n */\nexport function hasSelectedBlock( state ) {\n\tconst { selectionStart, selectionEnd } = state.selection;\n\treturn (\n\t\t!! selectionStart.clientId &&\n\t\tselectionStart.clientId === selectionEnd.clientId\n\t);\n}\n\n/**\n * Returns the currently selected block client ID, or null if there is no\n * selected block.\n *\n * @param {Object} state Editor state.\n *\n * @return {?string} Selected block client ID.\n */\nexport function getSelectedBlockClientId( state ) {\n\tconst { selectionStart, selectionEnd } = state.selection;\n\tconst { clientId } = selectionStart;\n\n\tif ( ! clientId || clientId !== selectionEnd.clientId ) {\n\t\treturn null;\n\t}\n\n\treturn clientId;\n}\n\n/**\n * Returns the currently selected block, or null if there is no selected block.\n *\n * @param {Object} state Global application state.\n *\n * @return {?Object} Selected block.\n */\nexport function getSelectedBlock( state ) {\n\tconst clientId = getSelectedBlockClientId( state );\n\treturn clientId ? getBlock( state, clientId ) : null;\n}\n\n/**\n * Given a block client ID, returns the root block from which the block is\n * nested, an empty string for top-level blocks, or null if the block does not\n * exist.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId Block from which to find root client ID.\n *\n * @return {?string} Root client ID, if exists\n */\nexport function getBlockRootClientId( state, clientId ) {\n\treturn state.blocks.parents.get( clientId ) ?? null;\n}\n\n/**\n * Given a block client ID, returns the list of all its parents from top to bottom.\n *\n * @param {Object}  state     Editor state.\n * @param {string}  clientId  Block from which to find root client ID.\n * @param {boolean} ascending Order results from bottom to top (true) or top to bottom (false).\n *\n * @return {Array} ClientIDs of the parent blocks.\n */\nexport const getBlockParents = createSelector(\n\t( state, clientId, ascending = false ) => {\n\t\tconst parents = [];\n\t\tlet current = clientId;\n\t\twhile ( ( current = state.blocks.parents.get( current ) ) ) {\n\t\t\tparents.push( current );\n\t\t}\n\n\t\tif ( ! parents.length ) {\n\t\t\treturn EMPTY_ARRAY;\n\t\t}\n\n\t\treturn ascending ? parents : parents.reverse();\n\t},\n\t( state ) => [ state.blocks.parents ]\n);\n\n/**\n * Given a block client ID and a block name, returns the list of all its parents\n * from top to bottom, filtered by the given name(s). For example, if passed\n * 'core/group' as the blockName, it will only return parents which are group\n * blocks. If passed `[ 'core/group', 'core/cover']`, as the blockName, it will\n * return parents which are group blocks and parents which are cover blocks.\n *\n * @param {Object}          state     Editor state.\n * @param {string}          clientId  Block from which to find root client ID.\n * @param {string|string[]} blockName Block name(s) to filter.\n * @param {boolean}         ascending Order results from bottom to top (true) or top to bottom (false).\n *\n * @return {Array} ClientIDs of the parent blocks.\n */\nexport const getBlockParentsByBlockName = createSelector(\n\t( state, clientId, blockName, ascending = false ) => {\n\t\tconst parents = getBlockParents( state, clientId, ascending );\n\t\tconst hasName = Array.isArray( blockName )\n\t\t\t? ( name ) => blockName.includes( name )\n\t\t\t: ( name ) => blockName === name;\n\t\treturn parents.filter( ( id ) => hasName( getBlockName( state, id ) ) );\n\t},\n\t( state ) => [ state.blocks.parents ]\n);\n/**\n * Given a block client ID, returns the root of the hierarchy from which the block is nested, return the block itself for root level blocks.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId Block from which to find root client ID.\n *\n * @return {string} Root client ID\n */\nexport function getBlockHierarchyRootClientId( state, clientId ) {\n\tlet current = clientId;\n\tlet parent;\n\tdo {\n\t\tparent = current;\n\t\tcurrent = state.blocks.parents.get( current );\n\t} while ( current );\n\treturn parent;\n}\n\n/**\n * Given a block client ID, returns the lowest common ancestor with selected client ID.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId Block from which to find common ancestor client ID.\n *\n * @return {string} Common ancestor client ID or undefined\n */\nexport function getLowestCommonAncestorWithSelectedBlock( state, clientId ) {\n\tconst selectedId = getSelectedBlockClientId( state );\n\tconst clientParents = [ ...getBlockParents( state, clientId ), clientId ];\n\tconst selectedParents = [\n\t\t...getBlockParents( state, selectedId ),\n\t\tselectedId,\n\t];\n\n\tlet lowestCommonAncestor;\n\n\tconst maxDepth = Math.min( clientParents.length, selectedParents.length );\n\tfor ( let index = 0; index < maxDepth; index++ ) {\n\t\tif ( clientParents[ index ] === selectedParents[ index ] ) {\n\t\t\tlowestCommonAncestor = clientParents[ index ];\n\t\t} else {\n\t\t\tbreak;\n\t\t}\n\t}\n\n\treturn lowestCommonAncestor;\n}\n\n/**\n * Returns the client ID of the block adjacent one at the given reference\n * startClientId and modifier directionality. Defaults start startClientId to\n * the selected block, and direction as next block. Returns null if there is no\n * adjacent block.\n *\n * @param {Object}  state         Editor state.\n * @param {?string} startClientId Optional client ID of block from which to\n *                                search.\n * @param {?number} modifier      Directionality multiplier (1 next, -1\n *                                previous).\n *\n * @return {?string} Return the client ID of the block, or null if none exists.\n */\nexport function getAdjacentBlockClientId( state, startClientId, modifier = 1 ) {\n\t// Default to selected block.\n\tif ( startClientId === undefined ) {\n\t\tstartClientId = getSelectedBlockClientId( state );\n\t}\n\n\t// Try multi-selection starting at extent based on modifier.\n\tif ( startClientId === undefined ) {\n\t\tif ( modifier < 0 ) {\n\t\t\tstartClientId = getFirstMultiSelectedBlockClientId( state );\n\t\t} else {\n\t\t\tstartClientId = getLastMultiSelectedBlockClientId( state );\n\t\t}\n\t}\n\n\t// Validate working start client ID.\n\tif ( ! startClientId ) {\n\t\treturn null;\n\t}\n\n\t// Retrieve start block root client ID, being careful to allow the falsey\n\t// empty string top-level root by explicitly testing against null.\n\tconst rootClientId = getBlockRootClientId( state, startClientId );\n\tif ( rootClientId === null ) {\n\t\treturn null;\n\t}\n\n\tconst { order } = state.blocks;\n\tconst orderSet = order.get( rootClientId );\n\tconst index = orderSet.indexOf( startClientId );\n\tconst nextIndex = index + 1 * modifier;\n\n\t// Block was first in set and we're attempting to get previous.\n\tif ( nextIndex < 0 ) {\n\t\treturn null;\n\t}\n\n\t// Block was last in set and we're attempting to get next.\n\tif ( nextIndex === orderSet.length ) {\n\t\treturn null;\n\t}\n\n\t// Assume incremented index is within the set.\n\treturn orderSet[ nextIndex ];\n}\n\n/**\n * Returns the previous block's client ID from the given reference start ID.\n * Defaults start to the selected block. Returns null if there is no previous\n * block.\n *\n * @param {Object}  state         Editor state.\n * @param {?string} startClientId Optional client ID of block from which to\n *                                search.\n *\n * @return {?string} Adjacent block's client ID, or null if none exists.\n */\nexport function getPreviousBlockClientId( state, startClientId ) {\n\treturn getAdjacentBlockClientId( state, startClientId, -1 );\n}\n\n/**\n * Returns the next block's client ID from the given reference start ID.\n * Defaults start to the selected block. Returns null if there is no next\n * block.\n *\n * @param {Object}  state         Editor state.\n * @param {?string} startClientId Optional client ID of block from which to\n *                                search.\n *\n * @return {?string} Adjacent block's client ID, or null if none exists.\n */\nexport function getNextBlockClientId( state, startClientId ) {\n\treturn getAdjacentBlockClientId( state, startClientId, 1 );\n}\n\n/* eslint-disable jsdoc/valid-types */\n/**\n * Returns the initial caret position for the selected block.\n * This position is to used to position the caret properly when the selected block changes.\n * If the current block is not a RichText, having initial position set to 0 means \"focus block\"\n *\n * @param {Object} state Global application state.\n *\n * @return {0|-1|null} Initial position.\n */\nexport function getSelectedBlocksInitialCaretPosition( state ) {\n\t/* eslint-enable jsdoc/valid-types */\n\treturn state.initialPosition;\n}\n\n/**\n * Returns the current selection set of block client IDs (multiselection or single selection).\n *\n * @param {Object} state Editor state.\n *\n * @return {Array} Multi-selected block client IDs.\n */\nexport const getSelectedBlockClientIds = createSelector(\n\t( state ) => {\n\t\tconst { selectionStart, selectionEnd } = state.selection;\n\n\t\tif ( ! selectionStart.clientId || ! selectionEnd.clientId ) {\n\t\t\treturn EMPTY_ARRAY;\n\t\t}\n\n\t\tif ( selectionStart.clientId === selectionEnd.clientId ) {\n\t\t\treturn [ selectionStart.clientId ];\n\t\t}\n\n\t\t// Retrieve root client ID to aid in retrieving relevant nested block\n\t\t// order, being careful to allow the falsey empty string top-level root\n\t\t// by explicitly testing against null.\n\t\tconst rootClientId = getBlockRootClientId(\n\t\t\tstate,\n\t\t\tselectionStart.clientId\n\t\t);\n\n\t\tif ( rootClientId === null ) {\n\t\t\treturn EMPTY_ARRAY;\n\t\t}\n\n\t\tconst blockOrder = getBlockOrder( state, rootClientId );\n\t\tconst startIndex = blockOrder.indexOf( selectionStart.clientId );\n\t\tconst endIndex = blockOrder.indexOf( selectionEnd.clientId );\n\n\t\tif ( startIndex > endIndex ) {\n\t\t\treturn blockOrder.slice( endIndex, startIndex + 1 );\n\t\t}\n\n\t\treturn blockOrder.slice( startIndex, endIndex + 1 );\n\t},\n\t( state ) => [\n\t\tstate.blocks.order,\n\t\tstate.selection.selectionStart.clientId,\n\t\tstate.selection.selectionEnd.clientId,\n\t]\n);\n\n/**\n * Returns the current multi-selection set of block client IDs, or an empty\n * array if there is no multi-selection.\n *\n * @param {Object} state Editor state.\n *\n * @return {Array} Multi-selected block client IDs.\n */\nexport function getMultiSelectedBlockClientIds( state ) {\n\tconst { selectionStart, selectionEnd } = state.selection;\n\n\tif ( selectionStart.clientId === selectionEnd.clientId ) {\n\t\treturn EMPTY_ARRAY;\n\t}\n\n\treturn getSelectedBlockClientIds( state );\n}\n\n/**\n * Returns the current multi-selection set of blocks, or an empty array if\n * there is no multi-selection.\n *\n * @param {Object} state Editor state.\n *\n * @return {Array} Multi-selected block objects.\n */\nexport const getMultiSelectedBlocks = createSelector(\n\t( state ) => {\n\t\tconst multiSelectedBlockClientIds =\n\t\t\tgetMultiSelectedBlockClientIds( state );\n\t\tif ( ! multiSelectedBlockClientIds.length ) {\n\t\t\treturn EMPTY_ARRAY;\n\t\t}\n\n\t\treturn multiSelectedBlockClientIds.map( ( clientId ) =>\n\t\t\tgetBlock( state, clientId )\n\t\t);\n\t},\n\t( state ) => [\n\t\t...getSelectedBlockClientIds.getDependants( state ),\n\t\tstate.blocks.byClientId,\n\t\tstate.blocks.order,\n\t\tstate.blocks.attributes,\n\t]\n);\n\n/**\n * Returns the client ID of the first block in the multi-selection set, or null\n * if there is no multi-selection.\n *\n * @param {Object} state Editor state.\n *\n * @return {?string} First block client ID in the multi-selection set.\n */\nexport function getFirstMultiSelectedBlockClientId( state ) {\n\treturn getMultiSelectedBlockClientIds( state )[ 0 ] || null;\n}\n\n/**\n * Returns the client ID of the last block in the multi-selection set, or null\n * if there is no multi-selection.\n *\n * @param {Object} state Editor state.\n *\n * @return {?string} Last block client ID in the multi-selection set.\n */\nexport function getLastMultiSelectedBlockClientId( state ) {\n\tconst selectedClientIds = getMultiSelectedBlockClientIds( state );\n\treturn selectedClientIds[ selectedClientIds.length - 1 ] || null;\n}\n\n/**\n * Returns true if a multi-selection exists, and the block corresponding to the\n * specified client ID is the first block of the multi-selection set, or false\n * otherwise.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId Block client ID.\n *\n * @return {boolean} Whether block is first in multi-selection.\n */\nexport function isFirstMultiSelectedBlock( state, clientId ) {\n\treturn getFirstMultiSelectedBlockClientId( state ) === clientId;\n}\n\n/**\n * Returns true if the client ID occurs within the block multi-selection, or\n * false otherwise.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId Block client ID.\n *\n * @return {boolean} Whether block is in multi-selection set.\n */\nexport function isBlockMultiSelected( state, clientId ) {\n\treturn getMultiSelectedBlockClientIds( state ).indexOf( clientId ) !== -1;\n}\n\n/**\n * Returns true if an ancestor of the block is multi-selected, or false\n * otherwise.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId Block client ID.\n *\n * @return {boolean} Whether an ancestor of the block is in multi-selection\n *                   set.\n */\nexport const isAncestorMultiSelected = createSelector(\n\t( state, clientId ) => {\n\t\tlet ancestorClientId = clientId;\n\t\tlet isMultiSelected = false;\n\t\twhile ( ancestorClientId && ! isMultiSelected ) {\n\t\t\tancestorClientId = getBlockRootClientId( state, ancestorClientId );\n\t\t\tisMultiSelected = isBlockMultiSelected( state, ancestorClientId );\n\t\t}\n\t\treturn isMultiSelected;\n\t},\n\t( state ) => [\n\t\tstate.blocks.order,\n\t\tstate.selection.selectionStart.clientId,\n\t\tstate.selection.selectionEnd.clientId,\n\t]\n);\n\n/**\n * Returns the client ID of the block which begins the multi-selection set, or\n * null if there is no multi-selection.\n *\n * This is not necessarily the first client ID in the selection.\n *\n * @see getFirstMultiSelectedBlockClientId\n *\n * @param {Object} state Editor state.\n *\n * @return {?string} Client ID of block beginning multi-selection.\n */\nexport function getMultiSelectedBlocksStartClientId( state ) {\n\tconst { selectionStart, selectionEnd } = state.selection;\n\n\tif ( selectionStart.clientId === selectionEnd.clientId ) {\n\t\treturn null;\n\t}\n\n\treturn selectionStart.clientId || null;\n}\n\n/**\n * Returns the client ID of the block which ends the multi-selection set, or\n * null if there is no multi-selection.\n *\n * This is not necessarily the last client ID in the selection.\n *\n * @see getLastMultiSelectedBlockClientId\n *\n * @param {Object} state Editor state.\n *\n * @return {?string} Client ID of block ending multi-selection.\n */\nexport function getMultiSelectedBlocksEndClientId( state ) {\n\tconst { selectionStart, selectionEnd } = state.selection;\n\n\tif ( selectionStart.clientId === selectionEnd.clientId ) {\n\t\treturn null;\n\t}\n\n\treturn selectionEnd.clientId || null;\n}\n\n/**\n * Returns true if the selection is not partial.\n *\n * @param {Object} state Editor state.\n *\n * @return {boolean} Whether the selection is mergeable.\n */\nexport function __unstableIsFullySelected( state ) {\n\tconst selectionAnchor = getSelectionStart( state );\n\tconst selectionFocus = getSelectionEnd( state );\n\treturn (\n\t\t! selectionAnchor.attributeKey &&\n\t\t! selectionFocus.attributeKey &&\n\t\ttypeof selectionAnchor.offset === 'undefined' &&\n\t\ttypeof selectionFocus.offset === 'undefined'\n\t);\n}\n\n/**\n * Returns true if the selection is collapsed.\n *\n * @param {Object} state Editor state.\n *\n * @return {boolean} Whether the selection is collapsed.\n */\nexport function __unstableIsSelectionCollapsed( state ) {\n\tconst selectionAnchor = getSelectionStart( state );\n\tconst selectionFocus = getSelectionEnd( state );\n\treturn (\n\t\t!! selectionAnchor &&\n\t\t!! selectionFocus &&\n\t\tselectionAnchor.clientId === selectionFocus.clientId &&\n\t\tselectionAnchor.attributeKey === selectionFocus.attributeKey &&\n\t\tselectionAnchor.offset === selectionFocus.offset\n\t);\n}\n\nexport function __unstableSelectionHasUnmergeableBlock( state ) {\n\treturn getSelectedBlockClientIds( state ).some( ( clientId ) => {\n\t\tconst blockName = getBlockName( state, clientId );\n\t\tconst blockType = getBlockType( blockName );\n\t\treturn ! blockType.merge;\n\t} );\n}\n\n/**\n * Check whether the selection is mergeable.\n *\n * @param {Object}  state     Editor state.\n * @param {boolean} isForward Whether to merge forwards.\n *\n * @return {boolean} Whether the selection is mergeable.\n */\nexport function __unstableIsSelectionMergeable( state, isForward ) {\n\tconst selectionAnchor = getSelectionStart( state );\n\tconst selectionFocus = getSelectionEnd( state );\n\n\t// It's not mergeable if the start and end are within the same block.\n\tif ( selectionAnchor.clientId === selectionFocus.clientId ) return false;\n\n\t// It's not mergeable if there's no rich text selection.\n\tif (\n\t\t! selectionAnchor.attributeKey ||\n\t\t! selectionFocus.attributeKey ||\n\t\ttypeof selectionAnchor.offset === 'undefined' ||\n\t\ttypeof selectionFocus.offset === 'undefined'\n\t)\n\t\treturn false;\n\n\tconst anchorRootClientId = getBlockRootClientId(\n\t\tstate,\n\t\tselectionAnchor.clientId\n\t);\n\tconst focusRootClientId = getBlockRootClientId(\n\t\tstate,\n\t\tselectionFocus.clientId\n\t);\n\n\t// It's not mergeable if the selection doesn't start and end in the same\n\t// block list. Maybe in the future it should be allowed.\n\tif ( anchorRootClientId !== focusRootClientId ) {\n\t\treturn false;\n\t}\n\n\tconst blockOrder = getBlockOrder( state, anchorRootClientId );\n\tconst anchorIndex = blockOrder.indexOf( selectionAnchor.clientId );\n\tconst focusIndex = blockOrder.indexOf( selectionFocus.clientId );\n\n\t// Reassign selection start and end based on order.\n\tlet selectionStart, selectionEnd;\n\n\tif ( anchorIndex > focusIndex ) {\n\t\tselectionStart = selectionFocus;\n\t\tselectionEnd = selectionAnchor;\n\t} else {\n\t\tselectionStart = selectionAnchor;\n\t\tselectionEnd = selectionFocus;\n\t}\n\n\tconst targetBlockClientId = isForward\n\t\t? selectionEnd.clientId\n\t\t: selectionStart.clientId;\n\tconst blockToMergeClientId = isForward\n\t\t? selectionStart.clientId\n\t\t: selectionEnd.clientId;\n\n\tconst targetBlockName = getBlockName( state, targetBlockClientId );\n\tconst targetBlockType = getBlockType( targetBlockName );\n\n\tif ( ! targetBlockType.merge ) return false;\n\n\tconst blockToMerge = getBlock( state, blockToMergeClientId );\n\n\t// It's mergeable if the blocks are of the same type.\n\tif ( blockToMerge.name === targetBlockName ) return true;\n\n\t// If the blocks are of a different type, try to transform the block being\n\t// merged into the same type of block.\n\tconst blocksToMerge = switchToBlockType( blockToMerge, targetBlockName );\n\n\treturn blocksToMerge && blocksToMerge.length;\n}\n\n/**\n * Get partial selected blocks with their content updated\n * based on the selection.\n *\n * @param {Object} state Editor state.\n *\n * @return {Object[]} Updated partial selected blocks.\n */\nexport const __unstableGetSelectedBlocksWithPartialSelection = ( state ) => {\n\tconst selectionAnchor = getSelectionStart( state );\n\tconst selectionFocus = getSelectionEnd( state );\n\n\tif ( selectionAnchor.clientId === selectionFocus.clientId ) {\n\t\treturn EMPTY_ARRAY;\n\t}\n\n\t// Can't split if the selection is not set.\n\tif (\n\t\t! selectionAnchor.attributeKey ||\n\t\t! selectionFocus.attributeKey ||\n\t\ttypeof selectionAnchor.offset === 'undefined' ||\n\t\ttypeof selectionFocus.offset === 'undefined'\n\t) {\n\t\treturn EMPTY_ARRAY;\n\t}\n\n\tconst anchorRootClientId = getBlockRootClientId(\n\t\tstate,\n\t\tselectionAnchor.clientId\n\t);\n\tconst focusRootClientId = getBlockRootClientId(\n\t\tstate,\n\t\tselectionFocus.clientId\n\t);\n\n\t// It's not splittable if the selection doesn't start and end in the same\n\t// block list. Maybe in the future it should be allowed.\n\tif ( anchorRootClientId !== focusRootClientId ) {\n\t\treturn EMPTY_ARRAY;\n\t}\n\n\tconst blockOrder = getBlockOrder( state, anchorRootClientId );\n\tconst anchorIndex = blockOrder.indexOf( selectionAnchor.clientId );\n\tconst focusIndex = blockOrder.indexOf( selectionFocus.clientId );\n\n\t// Reassign selection start and end based on order.\n\tconst [ selectionStart, selectionEnd ] =\n\t\tanchorIndex > focusIndex\n\t\t\t? [ selectionFocus, selectionAnchor ]\n\t\t\t: [ selectionAnchor, selectionFocus ];\n\n\tconst blockA = getBlock( state, selectionStart.clientId );\n\tconst blockB = getBlock( state, selectionEnd.clientId );\n\n\tconst htmlA = blockA.attributes[ selectionStart.attributeKey ];\n\tconst htmlB = blockB.attributes[ selectionEnd.attributeKey ];\n\n\tlet valueA = create( { html: htmlA } );\n\tlet valueB = create( { html: htmlB } );\n\n\tvalueA = remove( valueA, 0, selectionStart.offset );\n\tvalueB = remove( valueB, selectionEnd.offset, valueB.text.length );\n\n\treturn [\n\t\t{\n\t\t\t...blockA,\n\t\t\tattributes: {\n\t\t\t\t...blockA.attributes,\n\t\t\t\t[ selectionStart.attributeKey ]: toHTMLString( {\n\t\t\t\t\tvalue: valueA,\n\t\t\t\t} ),\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\t...blockB,\n\t\t\tattributes: {\n\t\t\t\t...blockB.attributes,\n\t\t\t\t[ selectionEnd.attributeKey ]: toHTMLString( {\n\t\t\t\t\tvalue: valueB,\n\t\t\t\t} ),\n\t\t\t},\n\t\t},\n\t];\n};\n\n/**\n * Returns an array containing all block client IDs in the editor in the order\n * they appear. Optionally accepts a root client ID of the block list for which\n * the order should be returned, defaulting to the top-level block order.\n *\n * @param {Object}  state        Editor state.\n * @param {?string} rootClientId Optional root client ID of block list.\n *\n * @return {Array} Ordered client IDs of editor blocks.\n */\nexport function getBlockOrder( state, rootClientId ) {\n\treturn state.blocks.order.get( rootClientId || '' ) || EMPTY_ARRAY;\n}\n\n/**\n * Returns the index at which the block corresponding to the specified client\n * ID occurs within the block order, or `-1` if the block does not exist.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId Block client ID.\n *\n * @return {number} Index at which block exists in order.\n */\nexport function getBlockIndex( state, clientId ) {\n\tconst rootClientId = getBlockRootClientId( state, clientId );\n\treturn getBlockOrder( state, rootClientId ).indexOf( clientId );\n}\n\n/**\n * Returns true if the block corresponding to the specified client ID is\n * currently selected and no multi-selection exists, or false otherwise.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId Block client ID.\n *\n * @return {boolean} Whether block is selected and multi-selection exists.\n */\nexport function isBlockSelected( state, clientId ) {\n\tconst { selectionStart, selectionEnd } = state.selection;\n\n\tif ( selectionStart.clientId !== selectionEnd.clientId ) {\n\t\treturn false;\n\t}\n\n\treturn selectionStart.clientId === clientId;\n}\n\n/**\n * Returns true if one of the block's inner blocks is selected.\n *\n * @param {Object}  state    Editor state.\n * @param {string}  clientId Block client ID.\n * @param {boolean} deep     Perform a deep check.\n *\n * @return {boolean} Whether the block has an inner block selected\n */\nexport function hasSelectedInnerBlock( state, clientId, deep = false ) {\n\tconst selectedBlockClientIds = getSelectedBlockClientIds( state );\n\n\tif ( ! selectedBlockClientIds.length ) {\n\t\treturn false;\n\t}\n\n\tif ( deep ) {\n\t\treturn selectedBlockClientIds.some( ( id ) =>\n\t\t\t// Pass true because we don't care about order and it's more\n\t\t\t// performant.\n\t\t\tgetBlockParents( state, id, true ).includes( clientId )\n\t\t);\n\t}\n\n\treturn selectedBlockClientIds.some(\n\t\t( id ) => getBlockRootClientId( state, id ) === clientId\n\t);\n}\n\n/**\n * Returns true if one of the block's inner blocks is dragged.\n *\n * @param {Object}  state    Editor state.\n * @param {string}  clientId Block client ID.\n * @param {boolean} deep     Perform a deep check.\n *\n * @return {boolean} Whether the block has an inner block dragged\n */\nexport function hasDraggedInnerBlock( state, clientId, deep = false ) {\n\treturn getBlockOrder( state, clientId ).some(\n\t\t( innerClientId ) =>\n\t\t\tisBlockBeingDragged( state, innerClientId ) ||\n\t\t\t( deep && hasDraggedInnerBlock( state, innerClientId, deep ) )\n\t);\n}\n\n/**\n * Returns true if the block corresponding to the specified client ID is\n * currently selected but isn't the last of the selected blocks. Here \"last\"\n * refers to the block sequence in the document, _not_ the sequence of\n * multi-selection, which is why `state.selectionEnd` isn't used.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId Block client ID.\n *\n * @return {boolean} Whether block is selected and not the last in the\n *                   selection.\n */\nexport function isBlockWithinSelection( state, clientId ) {\n\tif ( ! clientId ) {\n\t\treturn false;\n\t}\n\n\tconst clientIds = getMultiSelectedBlockClientIds( state );\n\tconst index = clientIds.indexOf( clientId );\n\treturn index > -1 && index < clientIds.length - 1;\n}\n\n/**\n * Returns true if a multi-selection has been made, or false otherwise.\n *\n * @param {Object} state Editor state.\n *\n * @return {boolean} Whether multi-selection has been made.\n */\nexport function hasMultiSelection( state ) {\n\tconst { selectionStart, selectionEnd } = state.selection;\n\treturn selectionStart.clientId !== selectionEnd.clientId;\n}\n\n/**\n * Whether in the process of multi-selecting or not. This flag is only true\n * while the multi-selection is being selected (by mouse move), and is false\n * once the multi-selection has been settled.\n *\n * @see hasMultiSelection\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} True if multi-selecting, false if not.\n */\nexport function isMultiSelecting( state ) {\n\treturn state.isMultiSelecting;\n}\n\n/**\n * Selector that returns if multi-selection is enabled or not.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} True if it should be possible to multi-select blocks, false if multi-selection is disabled.\n */\nexport function isSelectionEnabled( state ) {\n\treturn state.isSelectionEnabled;\n}\n\n/**\n * Returns the block's editing mode, defaulting to \"visual\" if not explicitly\n * assigned.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId Block client ID.\n *\n * @return {Object} Block editing mode.\n */\nexport function getBlockMode( state, clientId ) {\n\treturn state.blocksMode[ clientId ] || 'visual';\n}\n\n/**\n * Returns true if the user is typing, or false otherwise.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} Whether user is typing.\n */\nexport function isTyping( state ) {\n\treturn state.isTyping;\n}\n\n/**\n * Returns true if the user is dragging blocks, or false otherwise.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} Whether user is dragging blocks.\n */\nexport function isDraggingBlocks( state ) {\n\treturn !! state.draggedBlocks.length;\n}\n\n/**\n * Returns the client ids of any blocks being directly dragged.\n *\n * This does not include children of a parent being dragged.\n *\n * @param {Object} state Global application state.\n *\n * @return {string[]} Array of dragged block client ids.\n */\nexport function getDraggedBlockClientIds( state ) {\n\treturn state.draggedBlocks;\n}\n\n/**\n * Returns whether the block is being dragged.\n *\n * Only returns true if the block is being directly dragged,\n * not if the block is a child of a parent being dragged.\n * See `isAncestorBeingDragged` for child blocks.\n *\n * @param {Object} state    Global application state.\n * @param {string} clientId Client id for block to check.\n *\n * @return {boolean} Whether the block is being dragged.\n */\nexport function isBlockBeingDragged( state, clientId ) {\n\treturn state.draggedBlocks.includes( clientId );\n}\n\n/**\n * Returns whether a parent/ancestor of the block is being dragged.\n *\n * @param {Object} state    Global application state.\n * @param {string} clientId Client id for block to check.\n *\n * @return {boolean} Whether the block's ancestor is being dragged.\n */\nexport function isAncestorBeingDragged( state, clientId ) {\n\t// Return early if no blocks are being dragged rather than\n\t// the more expensive check for parents.\n\tif ( ! isDraggingBlocks( state ) ) {\n\t\treturn false;\n\t}\n\n\tconst parents = getBlockParents( state, clientId );\n\treturn parents.some( ( parentClientId ) =>\n\t\tisBlockBeingDragged( state, parentClientId )\n\t);\n}\n\n/**\n * Returns true if the caret is within formatted text, or false otherwise.\n *\n * @deprecated\n *\n * @return {boolean} Whether the caret is within formatted text.\n */\nexport function isCaretWithinFormattedText() {\n\tdeprecated(\n\t\t'wp.data.select( \"core/block-editor\" ).isCaretWithinFormattedText',\n\t\t{\n\t\t\tsince: '6.1',\n\t\t\tversion: '6.3',\n\t\t}\n\t);\n\n\treturn false;\n}\n\n/**\n * Returns the insertion point, the index at which the new inserted block would\n * be placed. Defaults to the last index.\n *\n * @param {Object} state Editor state.\n *\n * @return {Object} Insertion point object with `rootClientId`, `index`.\n */\nexport const getBlockInsertionPoint = createSelector(\n\t( state ) => {\n\t\tlet rootClientId, index;\n\n\t\tconst {\n\t\t\tinsertionPoint,\n\t\t\tselection: { selectionEnd },\n\t\t} = state;\n\t\tif ( insertionPoint !== null ) {\n\t\t\treturn insertionPoint;\n\t\t}\n\n\t\tconst { clientId } = selectionEnd;\n\n\t\tif ( clientId ) {\n\t\t\trootClientId = getBlockRootClientId( state, clientId ) || undefined;\n\t\t\tindex = getBlockIndex( state, selectionEnd.clientId ) + 1;\n\t\t} else {\n\t\t\tindex = getBlockOrder( state ).length;\n\t\t}\n\n\t\treturn { rootClientId, index };\n\t},\n\t( state ) => [\n\t\tstate.insertionPoint,\n\t\tstate.selection.selectionEnd.clientId,\n\t\tstate.blocks.parents,\n\t\tstate.blocks.order,\n\t]\n);\n\n/**\n * Returns true if we should show the block insertion point.\n *\n * @param {Object} state Global application state.\n *\n * @return {?boolean} Whether the insertion point is visible or not.\n */\nexport function isBlockInsertionPointVisible( state ) {\n\treturn state.insertionPoint !== null;\n}\n\n/**\n * Returns whether the blocks matches the template or not.\n *\n * @param {boolean} state\n * @return {?boolean} Whether the template is valid or not.\n */\nexport function isValidTemplate( state ) {\n\treturn state.template.isValid;\n}\n\n/**\n * Returns the defined block template\n *\n * @param {boolean} state\n *\n * @return {?Array} Block Template.\n */\nexport function getTemplate( state ) {\n\treturn state.settings.template;\n}\n\n/**\n * Returns the defined block template lock. Optionally accepts a root block\n * client ID as context, otherwise defaulting to the global context.\n *\n * @param {Object}  state        Editor state.\n * @param {?string} rootClientId Optional block root client ID.\n *\n * @return {string|false} Block Template Lock\n */\nexport function getTemplateLock( state, rootClientId ) {\n\tif ( ! rootClientId ) {\n\t\treturn state.settings.templateLock ?? false;\n\t}\n\n\treturn getBlockListSettings( state, rootClientId )?.templateLock ?? false;\n}\n\n/**\n * Determines if the given block type is allowed to be inserted into the block list.\n * This function is not exported and not memoized because using a memoized selector\n * inside another memoized selector is just a waste of time.\n *\n * @param {Object}        state        Editor state.\n * @param {string|Object} blockName    The block type object, e.g., the response\n *                                     from the block directory; or a string name of\n *                                     an installed block type, e.g.' core/paragraph'.\n * @param {?string}       rootClientId Optional root client ID of block list.\n *\n * @return {boolean} Whether the given block type is allowed to be inserted.\n */\nconst canInsertBlockTypeUnmemoized = (\n\tstate,\n\tblockName,\n\trootClientId = null\n) => {\n\tlet blockType;\n\tif ( blockName && 'object' === typeof blockName ) {\n\t\tblockType = blockName;\n\t\tblockName = blockType.name;\n\t} else {\n\t\tblockType = getBlockType( blockName );\n\t}\n\tif ( ! blockType ) {\n\t\treturn false;\n\t}\n\n\tconst { allowedBlockTypes } = getSettings( state );\n\n\tconst isBlockAllowedInEditor = checkAllowList(\n\t\tallowedBlockTypes,\n\t\tblockName,\n\t\ttrue\n\t);\n\tif ( ! isBlockAllowedInEditor ) {\n\t\treturn false;\n\t}\n\n\tconst isLocked = !! getTemplateLock( state, rootClientId );\n\tif ( isLocked ) {\n\t\treturn false;\n\t}\n\n\tif ( getBlockEditingMode( state, rootClientId ?? '' ) === 'disabled' ) {\n\t\treturn false;\n\t}\n\n\tconst parentBlockListSettings = getBlockListSettings( state, rootClientId );\n\n\t// The parent block doesn't have settings indicating it doesn't support\n\t// inner blocks, return false.\n\tif ( rootClientId && parentBlockListSettings === undefined ) {\n\t\treturn false;\n\t}\n\n\tconst parentName = getBlockName( state, rootClientId );\n\tconst parentBlockType = getBlockType( parentName );\n\n\t// Look at the `blockType.allowedBlocks` field to determine whether this is an allowed child block.\n\tconst parentAllowedChildBlocks = parentBlockType?.allowedBlocks;\n\tlet hasParentAllowedBlock = checkAllowList(\n\t\tparentAllowedChildBlocks,\n\t\tblockName\n\t);\n\n\t// The `allowedBlocks` block list setting can further limit which blocks are allowed children.\n\tif ( hasParentAllowedBlock !== false ) {\n\t\tconst parentAllowedBlocks = parentBlockListSettings?.allowedBlocks;\n\t\tconst hasParentListAllowedBlock = checkAllowList(\n\t\t\tparentAllowedBlocks,\n\t\t\tblockName\n\t\t);\n\t\t// Never downgrade the result from `true` to `null`\n\t\tif ( hasParentListAllowedBlock !== null ) {\n\t\t\thasParentAllowedBlock = hasParentListAllowedBlock;\n\t\t}\n\t}\n\n\tconst blockAllowedParentBlocks = blockType.parent;\n\tconst hasBlockAllowedParent = checkAllowList(\n\t\tblockAllowedParentBlocks,\n\t\tparentName\n\t);\n\n\tlet hasBlockAllowedAncestor = true;\n\tconst blockAllowedAncestorBlocks = blockType.ancestor;\n\tif ( blockAllowedAncestorBlocks ) {\n\t\tconst ancestors = [\n\t\t\trootClientId,\n\t\t\t...getBlockParents( state, rootClientId ),\n\t\t];\n\n\t\thasBlockAllowedAncestor = ancestors.some( ( ancestorClientId ) =>\n\t\t\tcheckAllowList(\n\t\t\t\tblockAllowedAncestorBlocks,\n\t\t\t\tgetBlockName( state, ancestorClientId )\n\t\t\t)\n\t\t);\n\t}\n\n\tconst canInsert =\n\t\thasBlockAllowedAncestor &&\n\t\t( ( hasParentAllowedBlock === null &&\n\t\t\thasBlockAllowedParent === null ) ||\n\t\t\thasParentAllowedBlock === true ||\n\t\t\thasBlockAllowedParent === true );\n\n\tif ( ! canInsert ) {\n\t\treturn canInsert;\n\t}\n\n\t/**\n\t * This filter is an ad-hoc solution to prevent adding template parts inside post content.\n\t * Conceptually, having a filter inside a selector is bad pattern so this code will be\n\t * replaced by a declarative API that doesn't the following drawbacks:\n\t *\n\t * Filters are not reactive: Upon switching between \"template mode\" and non \"template mode\",\n\t * the filter and selector won't necessarily be executed again. For now, it doesn't matter much\n\t * because you can't switch between the two modes while the inserter stays open.\n\t *\n\t * Filters are global: Once they're defined, they will affect all editor instances and all registries.\n\t * An ideal API would only affect specific editor instances.\n\t */\n\treturn applyFilters(\n\t\t'blockEditor.__unstableCanInsertBlockType',\n\t\tcanInsert,\n\t\tblockType,\n\t\trootClientId,\n\t\t{\n\t\t\t// Pass bound selectors of the current registry. If we're in a nested\n\t\t\t// context, the data will differ from the one selected from the root\n\t\t\t// registry.\n\t\t\tgetBlock: getBlock.bind( null, state ),\n\t\t\tgetBlockParentsByBlockName: getBlockParentsByBlockName.bind(\n\t\t\t\tnull,\n\t\t\t\tstate\n\t\t\t),\n\t\t}\n\t);\n};\n\n/**\n * Determines if the given block type is allowed to be inserted into the block list.\n *\n * @param {Object}  state        Editor state.\n * @param {string}  blockName    The name of the block type, e.g.' core/paragraph'.\n * @param {?string} rootClientId Optional root client ID of block list.\n *\n * @return {boolean} Whether the given block type is allowed to be inserted.\n */\nexport const canInsertBlockType = createSelector(\n\tcanInsertBlockTypeUnmemoized,\n\t( state, blockName, rootClientId ) =>\n\t\tgetInsertBlockTypeDependants( state, rootClientId )\n);\n\n/**\n * Determines if the given blocks are allowed to be inserted into the block\n * list.\n *\n * @param {Object}  state        Editor state.\n * @param {string}  clientIds    The block client IDs to be inserted.\n * @param {?string} rootClientId Optional root client ID of block list.\n *\n * @return {boolean} Whether the given blocks are allowed to be inserted.\n */\nexport function canInsertBlocks( state, clientIds, rootClientId = null ) {\n\treturn clientIds.every( ( id ) =>\n\t\tcanInsertBlockType( state, getBlockName( state, id ), rootClientId )\n\t);\n}\n\n/**\n * Determines if the given block is allowed to be deleted.\n *\n * @param {Object}  state        Editor state.\n * @param {string}  clientId     The block client Id.\n * @param {?string} rootClientId Optional root client ID of block list.\n *\n * @return {boolean} Whether the given block is allowed to be removed.\n */\nexport function canRemoveBlock( state, clientId, rootClientId = null ) {\n\tconst attributes = getBlockAttributes( state, clientId );\n\tif ( attributes === null ) {\n\t\treturn true;\n\t}\n\tif ( attributes.lock?.remove !== undefined ) {\n\t\treturn ! attributes.lock.remove;\n\t}\n\tif ( getTemplateLock( state, rootClientId ) ) {\n\t\treturn false;\n\t}\n\n\treturn getBlockEditingMode( state, rootClientId ) !== 'disabled';\n}\n\n/**\n * Determines if the given blocks are allowed to be removed.\n *\n * @param {Object}  state        Editor state.\n * @param {string}  clientIds    The block client IDs to be removed.\n * @param {?string} rootClientId Optional root client ID of block list.\n *\n * @return {boolean} Whether the given blocks are allowed to be removed.\n */\nexport function canRemoveBlocks( state, clientIds, rootClientId = null ) {\n\treturn clientIds.every( ( clientId ) =>\n\t\tcanRemoveBlock( state, clientId, rootClientId )\n\t);\n}\n\n/**\n * Determines if the given block is allowed to be moved.\n *\n * @param {Object}  state        Editor state.\n * @param {string}  clientId     The block client Id.\n * @param {?string} rootClientId Optional root client ID of block list.\n *\n * @return {boolean | undefined} Whether the given block is allowed to be moved.\n */\nexport function canMoveBlock( state, clientId, rootClientId = null ) {\n\tconst attributes = getBlockAttributes( state, clientId );\n\tif ( attributes === null ) {\n\t\treturn true;\n\t}\n\tif ( attributes.lock?.move !== undefined ) {\n\t\treturn ! attributes.lock.move;\n\t}\n\tif ( getTemplateLock( state, rootClientId ) === 'all' ) {\n\t\treturn false;\n\t}\n\n\treturn getBlockEditingMode( state, rootClientId ) !== 'disabled';\n}\n\n/**\n * Determines if the given blocks are allowed to be moved.\n *\n * @param {Object}  state        Editor state.\n * @param {string}  clientIds    The block client IDs to be moved.\n * @param {?string} rootClientId Optional root client ID of block list.\n *\n * @return {boolean} Whether the given blocks are allowed to be moved.\n */\nexport function canMoveBlocks( state, clientIds, rootClientId = null ) {\n\treturn clientIds.every( ( clientId ) =>\n\t\tcanMoveBlock( state, clientId, rootClientId )\n\t);\n}\n\n/**\n * Determines if the given block is allowed to be edited.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId The block client Id.\n *\n * @return {boolean} Whether the given block is allowed to be edited.\n */\nexport function canEditBlock( state, clientId ) {\n\tconst attributes = getBlockAttributes( state, clientId );\n\tif ( attributes === null ) {\n\t\treturn true;\n\t}\n\n\tconst { lock } = attributes;\n\n\t// When the edit is true, we cannot edit the block.\n\treturn ! lock?.edit;\n}\n\n/**\n * Determines if the given block type can be locked/unlocked by a user.\n *\n * @param {Object}          state      Editor state.\n * @param {(string|Object)} nameOrType Block name or type object.\n *\n * @return {boolean} Whether a given block type can be locked/unlocked.\n */\nexport function canLockBlockType( state, nameOrType ) {\n\tif ( ! hasBlockSupport( nameOrType, 'lock', true ) ) {\n\t\treturn false;\n\t}\n\n\t// Use block editor settings as the default value.\n\treturn !! state.settings?.canLockBlocks;\n}\n\n/**\n * Returns information about how recently and frequently a block has been inserted.\n *\n * @param {Object} state Global application state.\n * @param {string} id    A string which identifies the insert, e.g. 'core/block/12'\n *\n * @return {?{ time: number, count: number }} An object containing `time` which is when the last\n *                                            insert occurred as a UNIX epoch, and `count` which is\n *                                            the number of inserts that have occurred.\n */\nfunction getInsertUsage( state, id ) {\n\treturn state.preferences.insertUsage?.[ id ] ?? null;\n}\n\n/**\n * Returns whether we can show a block type in the inserter\n *\n * @param {Object}  state        Global State\n * @param {Object}  blockType    BlockType\n * @param {?string} rootClientId Optional root client ID of block list.\n *\n * @return {boolean} Whether the given block type is allowed to be shown in the inserter.\n */\nconst canIncludeBlockTypeInInserter = ( state, blockType, rootClientId ) => {\n\tif ( ! hasBlockSupport( blockType, 'inserter', true ) ) {\n\t\treturn false;\n\t}\n\n\treturn canInsertBlockTypeUnmemoized( state, blockType.name, rootClientId );\n};\n\n/**\n * Return a function to be used to tranform a block variation to an inserter item\n *\n * @param {Object} state Global State\n * @param {Object} item  Denormalized inserter item\n * @return {Function} Function to transform a block variation to inserter item\n */\nconst getItemFromVariation = ( state, item ) => ( variation ) => {\n\tconst variationId = `${ item.id }/${ variation.name }`;\n\tconst { time, count = 0 } = getInsertUsage( state, variationId ) || {};\n\treturn {\n\t\t...item,\n\t\tid: variationId,\n\t\ticon: variation.icon || item.icon,\n\t\ttitle: variation.title || item.title,\n\t\tdescription: variation.description || item.description,\n\t\tcategory: variation.category || item.category,\n\t\t// If `example` is explicitly undefined for the variation, the preview will not be shown.\n\t\texample: variation.hasOwnProperty( 'example' )\n\t\t\t? variation.example\n\t\t\t: item.example,\n\t\tinitialAttributes: {\n\t\t\t...item.initialAttributes,\n\t\t\t...variation.attributes,\n\t\t},\n\t\tinnerBlocks: variation.innerBlocks,\n\t\tkeywords: variation.keywords || item.keywords,\n\t\tfrecency: calculateFrecency( time, count ),\n\t};\n};\n\n/**\n * Returns the calculated frecency.\n *\n * 'frecency' is a heuristic (https://en.wikipedia.org/wiki/Frecency)\n * that combines block usage frequenty and recency.\n *\n * @param {number} time  When the last insert occurred as a UNIX epoch\n * @param {number} count The number of inserts that have occurred.\n *\n * @return {number} The calculated frecency.\n */\nconst calculateFrecency = ( time, count ) => {\n\tif ( ! time ) {\n\t\treturn count;\n\t}\n\t// The selector is cached, which means Date.now() is the last time that the\n\t// relevant state changed. This suits our needs.\n\tconst duration = Date.now() - time;\n\tswitch ( true ) {\n\t\tcase duration < MILLISECONDS_PER_HOUR:\n\t\t\treturn count * 4;\n\t\tcase duration < MILLISECONDS_PER_DAY:\n\t\t\treturn count * 2;\n\t\tcase duration < MILLISECONDS_PER_WEEK:\n\t\t\treturn count / 2;\n\t\tdefault:\n\t\t\treturn count / 4;\n\t}\n};\n\n/**\n * Returns a function that accepts a block type and builds an item to be shown\n * in a specific context. It's used for building items for Inserter and available\n * block Transfroms list.\n *\n * @param {Object} state              Editor state.\n * @param {Object} options            Options object for handling the building of a block type.\n * @param {string} options.buildScope The scope for which the item is going to be used.\n * @return {Function} Function returns an item to be shown in a specific context (Inserter|Transforms list).\n */\nconst buildBlockTypeItem =\n\t( state, { buildScope = 'inserter' } ) =>\n\t( blockType ) => {\n\t\tconst id = blockType.name;\n\n\t\tlet isDisabled = false;\n\t\tif ( ! hasBlockSupport( blockType.name, 'multiple', true ) ) {\n\t\t\tisDisabled = getBlocksByClientId(\n\t\t\t\tstate,\n\t\t\t\tgetClientIdsWithDescendants( state )\n\t\t\t).some( ( { name } ) => name === blockType.name );\n\t\t}\n\n\t\tconst { time, count = 0 } = getInsertUsage( state, id ) || {};\n\t\tconst blockItemBase = {\n\t\t\tid,\n\t\t\tname: blockType.name,\n\t\t\ttitle: blockType.title,\n\t\t\ticon: blockType.icon,\n\t\t\tisDisabled,\n\t\t\tfrecency: calculateFrecency( time, count ),\n\t\t};\n\t\tif ( buildScope === 'transform' ) return blockItemBase;\n\n\t\tconst inserterVariations = getBlockVariations(\n\t\t\tblockType.name,\n\t\t\t'inserter'\n\t\t);\n\t\treturn {\n\t\t\t...blockItemBase,\n\t\t\tinitialAttributes: {},\n\t\t\tdescription: blockType.description,\n\t\t\tcategory: blockType.category,\n\t\t\tkeywords: blockType.keywords,\n\t\t\tvariations: inserterVariations,\n\t\t\texample: blockType.example,\n\t\t\tutility: 1, // Deprecated.\n\t\t};\n\t};\n\n/**\n * Determines the items that appear in the inserter. Includes both static\n * items (e.g. a regular block type) and dynamic items (e.g. a reusable block).\n *\n * Each item object contains what's necessary to display a button in the\n * inserter and handle its selection.\n *\n * The 'frecency' property is a heuristic (https://en.wikipedia.org/wiki/Frecency)\n * that combines block usage frequenty and recency.\n *\n * Items are returned ordered descendingly by their 'utility' and 'frecency'.\n *\n * @param    {Object}   state             Editor state.\n * @param    {?string}  rootClientId      Optional root client ID of block list.\n *\n * @return {WPEditorInserterItem[]} Items that appear in inserter.\n *\n * @typedef {Object} WPEditorInserterItem\n * @property {string}   id                Unique identifier for the item.\n * @property {string}   name              The type of block to create.\n * @property {Object}   initialAttributes Attributes to pass to the newly created block.\n * @property {string}   title             Title of the item, as it appears in the inserter.\n * @property {string}   icon              Dashicon for the item, as it appears in the inserter.\n * @property {string}   category          Block category that the item is associated with.\n * @property {string[]} keywords          Keywords that can be searched to find this item.\n * @property {boolean}  isDisabled        Whether or not the user should be prevented from inserting\n *                                        this item.\n * @property {number}   frecency          Heuristic that combines frequency and recency.\n */\nexport const getInserterItems = createRegistrySelector( ( select ) =>\n\tcreateSelector(\n\t\t( state, rootClientId = null ) => {\n\t\t\tconst buildReusableBlockInserterItem = ( reusableBlock ) => {\n\t\t\t\tconst icon = ! reusableBlock.wp_pattern_sync_status\n\t\t\t\t\t? {\n\t\t\t\t\t\t\tsrc: symbol,\n\t\t\t\t\t\t\tforeground: 'var(--wp-block-synced-color)',\n\t\t\t\t\t  }\n\t\t\t\t\t: symbol;\n\t\t\t\tconst id = `core/block/${ reusableBlock.id }`;\n\t\t\t\tconst { time, count = 0 } = getInsertUsage( state, id ) || {};\n\t\t\t\tconst frecency = calculateFrecency( time, count );\n\n\t\t\t\treturn {\n\t\t\t\t\tid,\n\t\t\t\t\tname: 'core/block',\n\t\t\t\t\tinitialAttributes: { ref: reusableBlock.id },\n\t\t\t\t\ttitle: reusableBlock.title?.raw,\n\t\t\t\t\ticon,\n\t\t\t\t\tcategory: 'reusable',\n\t\t\t\t\tkeywords: [ 'reusable' ],\n\t\t\t\t\tisDisabled: false,\n\t\t\t\t\tutility: 1, // Deprecated.\n\t\t\t\t\tfrecency,\n\t\t\t\t\tcontent: reusableBlock.content?.raw,\n\t\t\t\t\tsyncStatus: reusableBlock.wp_pattern_sync_status,\n\t\t\t\t};\n\t\t\t};\n\n\t\t\tconst syncedPatternInserterItems = canInsertBlockTypeUnmemoized(\n\t\t\t\tstate,\n\t\t\t\t'core/block',\n\t\t\t\trootClientId\n\t\t\t)\n\t\t\t\t? unlock( select( STORE_NAME ) )\n\t\t\t\t\t\t.getReusableBlocks()\n\t\t\t\t\t\t.map( buildReusableBlockInserterItem )\n\t\t\t\t: [];\n\n\t\t\tconst buildBlockTypeInserterItem = buildBlockTypeItem( state, {\n\t\t\t\tbuildScope: 'inserter',\n\t\t\t} );\n\n\t\t\tconst blockTypeInserterItems = getBlockTypes()\n\t\t\t\t.filter( ( blockType ) =>\n\t\t\t\t\tcanIncludeBlockTypeInInserter(\n\t\t\t\t\t\tstate,\n\t\t\t\t\t\tblockType,\n\t\t\t\t\t\trootClientId\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t\t.map( buildBlockTypeInserterItem );\n\n\t\t\tconst items = blockTypeInserterItems.reduce(\n\t\t\t\t( accumulator, item ) => {\n\t\t\t\t\tconst { variations = [] } = item;\n\t\t\t\t\t// Exclude any block type item that is to be replaced by a default variation.\n\t\t\t\t\tif ( ! variations.some( ( { isDefault } ) => isDefault ) ) {\n\t\t\t\t\t\taccumulator.push( item );\n\t\t\t\t\t}\n\t\t\t\t\tif ( variations.length ) {\n\t\t\t\t\t\tconst variationMapper = getItemFromVariation(\n\t\t\t\t\t\t\tstate,\n\t\t\t\t\t\t\titem\n\t\t\t\t\t\t);\n\t\t\t\t\t\taccumulator.push(\n\t\t\t\t\t\t\t...variations.map( variationMapper )\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\treturn accumulator;\n\t\t\t\t},\n\t\t\t\t[]\n\t\t\t);\n\n\t\t\t// Ensure core blocks are prioritized in the returned results,\n\t\t\t// because third party blocks can be registered earlier than\n\t\t\t// the core blocks (usually by using the `init` action),\n\t\t\t// thus affecting the display order.\n\t\t\t// We don't sort reusable blocks as they are handled differently.\n\t\t\tconst groupByType = ( blocks, block ) => {\n\t\t\t\tconst { core, noncore } = blocks;\n\t\t\t\tconst type = block.name.startsWith( 'core/' ) ? core : noncore;\n\n\t\t\t\ttype.push( block );\n\t\t\t\treturn blocks;\n\t\t\t};\n\t\t\tconst { core: coreItems, noncore: nonCoreItems } = items.reduce(\n\t\t\t\tgroupByType,\n\t\t\t\t{ core: [], noncore: [] }\n\t\t\t);\n\t\t\tconst sortedBlockTypes = [ ...coreItems, ...nonCoreItems ];\n\t\t\treturn [ ...sortedBlockTypes, ...syncedPatternInserterItems ];\n\t\t},\n\t\t( state, rootClientId ) => [\n\t\t\tgetBlockTypes(),\n\t\t\tunlock( select( STORE_NAME ) ).getReusableBlocks(),\n\t\t\tstate.blocks.order,\n\t\t\tstate.preferences.insertUsage,\n\t\t\t...getInsertBlockTypeDependants( state, rootClientId ),\n\t\t]\n\t)\n);\n\n/**\n * Determines the items that appear in the available block transforms list.\n *\n * Each item object contains what's necessary to display a menu item in the\n * transform list and handle its selection.\n *\n * The 'frecency' property is a heuristic (https://en.wikipedia.org/wiki/Frecency)\n * that combines block usage frequenty and recency.\n *\n * Items are returned ordered descendingly by their 'frecency'.\n *\n * @param    {Object}          state        Editor state.\n * @param    {Object|Object[]} blocks       Block object or array objects.\n * @param    {?string}         rootClientId Optional root client ID of block list.\n *\n * @return {WPEditorTransformItem[]} Items that appear in inserter.\n *\n * @typedef {Object} WPEditorTransformItem\n * @property {string}          id           Unique identifier for the item.\n * @property {string}          name         The type of block to create.\n * @property {string}          title        Title of the item, as it appears in the inserter.\n * @property {string}          icon         Dashicon for the item, as it appears in the inserter.\n * @property {boolean}         isDisabled   Whether or not the user should be prevented from inserting\n *                                          this item.\n * @property {number}          frecency     Heuristic that combines frequency and recency.\n */\nexport const getBlockTransformItems = createSelector(\n\t( state, blocks, rootClientId = null ) => {\n\t\tconst normalizedBlocks = Array.isArray( blocks ) ? blocks : [ blocks ];\n\t\tconst buildBlockTypeTransformItem = buildBlockTypeItem( state, {\n\t\t\tbuildScope: 'transform',\n\t\t} );\n\t\tconst blockTypeTransformItems = getBlockTypes()\n\t\t\t.filter( ( blockType ) =>\n\t\t\t\tcanIncludeBlockTypeInInserter( state, blockType, rootClientId )\n\t\t\t)\n\t\t\t.map( buildBlockTypeTransformItem );\n\n\t\tconst itemsByName = Object.fromEntries(\n\t\t\tObject.entries( blockTypeTransformItems ).map( ( [ , value ] ) => [\n\t\t\t\tvalue.name,\n\t\t\t\tvalue,\n\t\t\t] )\n\t\t);\n\n\t\tconst possibleTransforms = getPossibleBlockTransformations(\n\t\t\tnormalizedBlocks\n\t\t).reduce( ( accumulator, block ) => {\n\t\t\tif ( itemsByName[ block?.name ] ) {\n\t\t\t\taccumulator.push( itemsByName[ block.name ] );\n\t\t\t}\n\t\t\treturn accumulator;\n\t\t}, [] );\n\t\treturn orderBy(\n\t\t\tpossibleTransforms,\n\t\t\t( block ) => itemsByName[ block.name ].frecency,\n\t\t\t'desc'\n\t\t);\n\t},\n\t( state, blocks, rootClientId ) => [\n\t\tgetBlockTypes(),\n\t\tstate.preferences.insertUsage,\n\t\t...getInsertBlockTypeDependants( state, rootClientId ),\n\t]\n);\n\n/**\n * Determines whether there are items to show in the inserter.\n *\n * @param {Object}  state        Editor state.\n * @param {?string} rootClientId Optional root client ID of block list.\n *\n * @return {boolean} Items that appear in inserter.\n */\nexport const hasInserterItems = createRegistrySelector(\n\t( select ) =>\n\t\t( state, rootClientId = null ) => {\n\t\t\tconst hasBlockType = getBlockTypes().some( ( blockType ) =>\n\t\t\t\tcanIncludeBlockTypeInInserter( state, blockType, rootClientId )\n\t\t\t);\n\t\t\tif ( hasBlockType ) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tconst hasReusableBlock =\n\t\t\t\tcanInsertBlockTypeUnmemoized(\n\t\t\t\t\tstate,\n\t\t\t\t\t'core/block',\n\t\t\t\t\trootClientId\n\t\t\t\t) &&\n\t\t\t\tunlock( select( STORE_NAME ) ).getReusableBlocks().length > 0;\n\n\t\t\treturn hasReusableBlock;\n\t\t}\n);\n\n/**\n * Returns the list of allowed inserter blocks for inner blocks children.\n *\n * @param {Object}  state        Editor state.\n * @param {?string} rootClientId Optional root client ID of block list.\n *\n * @return {Array?} The list of allowed block types.\n */\nexport const getAllowedBlocks = createRegistrySelector( ( select ) =>\n\tcreateSelector(\n\t\t( state, rootClientId = null ) => {\n\t\t\tif ( ! rootClientId ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst blockTypes = getBlockTypes().filter( ( blockType ) =>\n\t\t\t\tcanIncludeBlockTypeInInserter( state, blockType, rootClientId )\n\t\t\t);\n\n\t\t\tconst hasReusableBlock =\n\t\t\t\tcanInsertBlockTypeUnmemoized(\n\t\t\t\t\tstate,\n\t\t\t\t\t'core/block',\n\t\t\t\t\trootClientId\n\t\t\t\t) &&\n\t\t\t\tunlock( select( STORE_NAME ) ).getReusableBlocks().length > 0;\n\n\t\t\tif ( hasReusableBlock ) {\n\t\t\t\tblockTypes.push( 'core/block' );\n\t\t\t}\n\n\t\t\treturn blockTypes;\n\t\t},\n\t\t( state, rootClientId ) => [\n\t\t\tgetBlockTypes(),\n\t\t\tunlock( select( STORE_NAME ) ).getReusableBlocks(),\n\t\t\t...getInsertBlockTypeDependants( state, rootClientId ),\n\t\t]\n\t)\n);\n\nexport const __experimentalGetAllowedBlocks = createSelector(\n\t( state, rootClientId = null ) => {\n\t\tdeprecated(\n\t\t\t'wp.data.select( \"core/block-editor\" ).__experimentalGetAllowedBlocks',\n\t\t\t{\n\t\t\t\talternative:\n\t\t\t\t\t'wp.data.select( \"core/block-editor\" ).getAllowedBlocks',\n\t\t\t\tsince: '6.2',\n\t\t\t\tversion: '6.4',\n\t\t\t}\n\t\t);\n\t\treturn getAllowedBlocks( state, rootClientId );\n\t},\n\t( state, rootClientId ) =>\n\t\tgetAllowedBlocks.getDependants( state, rootClientId )\n);\n\n/**\n * Returns the block to be directly inserted by the block appender.\n *\n * @param    {Object}         state            Editor state.\n * @param    {?string}        rootClientId     Optional root client ID of block list.\n *\n * @return {WPDirectInsertBlock|undefined}              The block type to be directly inserted.\n *\n * @typedef {Object} WPDirectInsertBlock\n * @property {string}         name             The type of block.\n * @property {?Object}        attributes       Attributes to pass to the newly created block.\n * @property {?Array<string>} attributesToCopy Attributes to be copied from adjecent blocks when inserted.\n */\nexport function getDirectInsertBlock( state, rootClientId = null ) {\n\tif ( ! rootClientId ) {\n\t\treturn;\n\t}\n\tconst { defaultBlock, directInsert } =\n\t\tstate.blockListSettings[ rootClientId ] ?? {};\n\tif ( ! defaultBlock || ! directInsert ) {\n\t\treturn;\n\t}\n\n\treturn defaultBlock;\n}\n\nexport function __experimentalGetDirectInsertBlock(\n\tstate,\n\trootClientId = null\n) {\n\tdeprecated(\n\t\t'wp.data.select( \"core/block-editor\" ).__experimentalGetDirectInsertBlock',\n\t\t{\n\t\t\talternative:\n\t\t\t\t'wp.data.select( \"core/block-editor\" ).getDirectInsertBlock',\n\t\t\tsince: '6.3',\n\t\t\tversion: '6.4',\n\t\t}\n\t);\n\treturn getDirectInsertBlock( state, rootClientId );\n}\n\nexport const __experimentalGetParsedPattern = createRegistrySelector(\n\t( select ) =>\n\t\tcreateSelector( ( state, patternName ) => {\n\t\t\tconst { getAllPatterns } = unlock( select( STORE_NAME ) );\n\t\t\tconst patterns = getAllPatterns();\n\t\t\tconst pattern = patterns.find(\n\t\t\t\t( { name } ) => name === patternName\n\t\t\t);\n\t\t\tif ( ! pattern ) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tconst blocks = parse( pattern.content, {\n\t\t\t\t__unstableSkipMigrationLogs: true,\n\t\t\t} );\n\t\t\tif ( blocks.length === 1 ) {\n\t\t\t\tblocks[ 0 ].attributes = {\n\t\t\t\t\t...blocks[ 0 ].attributes,\n\t\t\t\t\tmetadata: {\n\t\t\t\t\t\t...( blocks[ 0 ].attributes.metadata || {} ),\n\t\t\t\t\t\tcategories: pattern.categories,\n\t\t\t\t\t\tpatternName: pattern.name,\n\t\t\t\t\t\tname:\n\t\t\t\t\t\t\tblocks[ 0 ].attributes.metadata?.name ||\n\t\t\t\t\t\t\tpattern.title,\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn {\n\t\t\t\t...pattern,\n\t\t\t\tblocks,\n\t\t\t};\n\t\t}, getAllPatternsDependants( select ) )\n);\n\nconst getAllowedPatternsDependants = ( select ) => ( state, rootClientId ) => [\n\t...getAllPatternsDependants( select )( state ),\n\t...getInsertBlockTypeDependants( state, rootClientId ),\n];\n\n/**\n * Returns the list of allowed patterns for inner blocks children.\n *\n * @param {Object}  state        Editor state.\n * @param {?string} rootClientId Optional target root client ID.\n *\n * @return {Array?} The list of allowed patterns.\n */\nexport const __experimentalGetAllowedPatterns = createRegistrySelector(\n\t( select ) => {\n\t\treturn createSelector( ( state, rootClientId = null ) => {\n\t\t\tconst {\n\t\t\t\tgetAllPatterns,\n\t\t\t\t__experimentalGetParsedPattern: getParsedPattern,\n\t\t\t} = unlock( select( STORE_NAME ) );\n\t\t\tconst patterns = getAllPatterns();\n\t\t\tconst { allowedBlockTypes } = getSettings( state );\n\n\t\t\tconst parsedPatterns = patterns\n\t\t\t\t.filter( ( { inserter = true } ) => !! inserter )\n\t\t\t\t.map( ( { name } ) => getParsedPattern( name ) );\n\t\t\tconst availableParsedPatterns = parsedPatterns.filter(\n\t\t\t\t( { blocks } ) =>\n\t\t\t\t\tcheckAllowListRecursive( blocks, allowedBlockTypes )\n\t\t\t);\n\t\t\tconst patternsAllowed = availableParsedPatterns.filter(\n\t\t\t\t( { blocks } ) =>\n\t\t\t\t\tblocks.every( ( { name } ) =>\n\t\t\t\t\t\tcanInsertBlockType( state, name, rootClientId )\n\t\t\t\t\t)\n\t\t\t);\n\n\t\t\treturn patternsAllowed;\n\t\t}, getAllowedPatternsDependants( select ) );\n\t}\n);\n\n/**\n * Returns the list of patterns based on their declared `blockTypes`\n * and a block's name.\n * Patterns can use `blockTypes` to integrate in work flows like\n * suggesting appropriate patterns in a Placeholder state(during insertion)\n * or blocks transformations.\n *\n * @param {Object}          state        Editor state.\n * @param {string|string[]} blockNames   Block's name or array of block names to find matching pattens.\n * @param {?string}         rootClientId Optional target root client ID.\n *\n * @return {Array} The list of matched block patterns based on declared `blockTypes` and block name.\n */\nexport const getPatternsByBlockTypes = createRegistrySelector( ( select ) =>\n\tcreateSelector(\n\t\t( state, blockNames, rootClientId = null ) => {\n\t\t\tif ( ! blockNames ) return EMPTY_ARRAY;\n\t\t\tconst patterns =\n\t\t\t\tselect( STORE_NAME ).__experimentalGetAllowedPatterns(\n\t\t\t\t\trootClientId\n\t\t\t\t);\n\t\t\tconst normalizedBlockNames = Array.isArray( blockNames )\n\t\t\t\t? blockNames\n\t\t\t\t: [ blockNames ];\n\t\t\tconst filteredPatterns = patterns.filter( ( pattern ) =>\n\t\t\t\tpattern?.blockTypes?.some?.( ( blockName ) =>\n\t\t\t\t\tnormalizedBlockNames.includes( blockName )\n\t\t\t\t)\n\t\t\t);\n\t\t\tif ( filteredPatterns.length === 0 ) {\n\t\t\t\treturn EMPTY_ARRAY;\n\t\t\t}\n\t\t\treturn filteredPatterns;\n\t\t},\n\t\t( state, blockNames, rootClientId ) =>\n\t\t\tgetAllowedPatternsDependants( select )( state, rootClientId )\n\t)\n);\n\nexport const __experimentalGetPatternsByBlockTypes = createRegistrySelector(\n\t( select ) => {\n\t\tdeprecated(\n\t\t\t'wp.data.select( \"core/block-editor\" ).__experimentalGetPatternsByBlockTypes',\n\t\t\t{\n\t\t\t\talternative:\n\t\t\t\t\t'wp.data.select( \"core/block-editor\" ).getPatternsByBlockTypes',\n\t\t\t\tsince: '6.2',\n\t\t\t\tversion: '6.4',\n\t\t\t}\n\t\t);\n\t\treturn select( STORE_NAME ).getPatternsByBlockTypes;\n\t}\n);\n\n/**\n * Determines the items that appear in the available pattern transforms list.\n *\n * For now we only handle blocks without InnerBlocks and take into account\n * the `__experimentalRole` property of blocks' attributes for the transformation.\n *\n * We return the first set of possible eligible block patterns,\n * by checking the `blockTypes` property. We still have to recurse through\n * block pattern's blocks and try to find matches from the selected blocks.\n * Now this happens in the consumer to avoid heavy operations in the selector.\n *\n * @param {Object}   state        Editor state.\n * @param {Object[]} blocks       The selected blocks.\n * @param {?string}  rootClientId Optional root client ID of block list.\n *\n * @return {WPBlockPattern[]} Items that are eligible for a pattern transformation.\n */\nexport const __experimentalGetPatternTransformItems = createRegistrySelector(\n\t( select ) =>\n\t\tcreateSelector(\n\t\t\t( state, blocks, rootClientId = null ) => {\n\t\t\t\tif ( ! blocks ) return EMPTY_ARRAY;\n\t\t\t\t/**\n\t\t\t\t * For now we only handle blocks without InnerBlocks and take into account\n\t\t\t\t * the `__experimentalRole` property of blocks' attributes for the transformation.\n\t\t\t\t * Note that the blocks have been retrieved through `getBlock`, which doesn't\n\t\t\t\t * return the inner blocks of an inner block controller, so we still need\n\t\t\t\t * to check for this case too.\n\t\t\t\t */\n\t\t\t\tif (\n\t\t\t\t\tblocks.some(\n\t\t\t\t\t\t( { clientId, innerBlocks } ) =>\n\t\t\t\t\t\t\tinnerBlocks.length ||\n\t\t\t\t\t\t\tareInnerBlocksControlled( state, clientId )\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\treturn EMPTY_ARRAY;\n\t\t\t\t}\n\n\t\t\t\t// Create a Set of the selected block names that is used in patterns filtering.\n\t\t\t\tconst selectedBlockNames = Array.from(\n\t\t\t\t\tnew Set( blocks.map( ( { name } ) => name ) )\n\t\t\t\t);\n\t\t\t\t/**\n\t\t\t\t * Here we will return first set of possible eligible block patterns,\n\t\t\t\t * by checking the `blockTypes` property. We still have to recurse through\n\t\t\t\t * block pattern's blocks and try to find matches from the selected blocks.\n\t\t\t\t * Now this happens in the consumer to avoid heavy operations in the selector.\n\t\t\t\t */\n\t\t\t\treturn select( STORE_NAME ).getPatternsByBlockTypes(\n\t\t\t\t\tselectedBlockNames,\n\t\t\t\t\trootClientId\n\t\t\t\t);\n\t\t\t},\n\t\t\t( state, blocks, rootClientId ) =>\n\t\t\t\tgetAllowedPatternsDependants( select )( state, rootClientId )\n\t\t)\n);\n\n/**\n * Returns the Block List settings of a block, if any exist.\n *\n * @param {Object}  state    Editor state.\n * @param {?string} clientId Block client ID.\n *\n * @return {?Object} Block settings of the block if set.\n */\nexport function getBlockListSettings( state, clientId ) {\n\treturn state.blockListSettings[ clientId ];\n}\n\n/**\n * Returns the editor settings.\n *\n * @param {Object} state Editor state.\n *\n * @return {Object} The editor settings object.\n */\nexport function getSettings( state ) {\n\treturn state.settings;\n}\n\n/**\n * Returns true if the most recent block change is be considered persistent, or\n * false otherwise. A persistent change is one committed by BlockEditorProvider\n * via its `onChange` callback, in addition to `onInput`.\n *\n * @param {Object} state Block editor state.\n *\n * @return {boolean} Whether the most recent block change was persistent.\n */\nexport function isLastBlockChangePersistent( state ) {\n\treturn state.blocks.isPersistentChange;\n}\n\n/**\n * Returns the block list settings for an array of blocks, if any exist.\n *\n * @param {Object} state     Editor state.\n * @param {Array}  clientIds Block client IDs.\n *\n * @return {Object} An object where the keys are client ids and the values are\n *                  a block list setting object.\n */\nexport const __experimentalGetBlockListSettingsForBlocks = createSelector(\n\t( state, clientIds = [] ) => {\n\t\treturn clientIds.reduce( ( blockListSettingsForBlocks, clientId ) => {\n\t\t\tif ( ! state.blockListSettings[ clientId ] ) {\n\t\t\t\treturn blockListSettingsForBlocks;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...blockListSettingsForBlocks,\n\t\t\t\t[ clientId ]: state.blockListSettings[ clientId ],\n\t\t\t};\n\t\t}, {} );\n\t},\n\t( state ) => [ state.blockListSettings ]\n);\n\n/**\n * Returns the title of a given reusable block\n *\n * @param {Object}        state Global application state.\n * @param {number|string} ref   The shared block's ID.\n *\n * @return {string} The reusable block saved title.\n */\nexport const __experimentalGetReusableBlockTitle = createRegistrySelector(\n\t( select ) =>\n\t\tcreateSelector(\n\t\t\t( state, ref ) => {\n\t\t\t\tdeprecated(\n\t\t\t\t\t\"wp.data.select( 'core/block-editor' ).__experimentalGetReusableBlockTitle\",\n\t\t\t\t\t{\n\t\t\t\t\t\tsince: '6.6',\n\t\t\t\t\t\tversion: '6.8',\n\t\t\t\t\t}\n\t\t\t\t);\n\n\t\t\t\tconst reusableBlock = unlock( select( STORE_NAME ) )\n\t\t\t\t\t.getReusableBlocks()\n\t\t\t\t\t.find( ( block ) => block.id === ref );\n\t\t\t\tif ( ! reusableBlock ) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\treturn reusableBlock.title?.raw;\n\t\t\t},\n\t\t\t() => [ unlock( select( STORE_NAME ) ).getReusableBlocks() ]\n\t\t)\n);\n\n/**\n * Returns true if the most recent block change is be considered ignored, or\n * false otherwise. An ignored change is one not to be committed by\n * BlockEditorProvider, neither via `onChange` nor `onInput`.\n *\n * @param {Object} state Block editor state.\n *\n * @return {boolean} Whether the most recent block change was ignored.\n */\nexport function __unstableIsLastBlockChangeIgnored( state ) {\n\t// TODO: Removal Plan: Changes incurred by RECEIVE_BLOCKS should not be\n\t// ignored if in-fact they result in a change in blocks state. The current\n\t// need to ignore changes not a result of user interaction should be\n\t// accounted for in the refactoring of reusable blocks as occurring within\n\t// their own separate block editor / state (#7119).\n\treturn state.blocks.isIgnoredChange;\n}\n\n/**\n * Returns the block attributes changed as a result of the last dispatched\n * action.\n *\n * @param {Object} state Block editor state.\n *\n * @return {Object<string,Object>} Subsets of block attributes changed, keyed\n *                                 by block client ID.\n */\nexport function __experimentalGetLastBlockAttributeChanges( state ) {\n\treturn state.lastBlockAttributesChange;\n}\n\n/**\n * Returns whether the navigation mode is enabled.\n *\n * @param {Object} state Editor state.\n *\n * @return {boolean} Is navigation mode enabled.\n */\nexport function isNavigationMode( state ) {\n\treturn state.editorMode === 'navigation';\n}\n\n/**\n * Returns the current editor mode.\n *\n * @param {Object} state Editor state.\n *\n * @return {string} the editor mode.\n */\nexport function __unstableGetEditorMode( state ) {\n\treturn state.editorMode;\n}\n\n/**\n * Returns whether block moving mode is enabled.\n *\n * @param {Object} state Editor state.\n *\n * @return {string} Client Id of moving block.\n */\nexport function hasBlockMovingClientId( state ) {\n\treturn state.hasBlockMovingClientId;\n}\n\n/**\n * Returns true if the last change was an automatic change, false otherwise.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} Whether the last change was automatic.\n */\nexport function didAutomaticChange( state ) {\n\treturn !! state.automaticChangeStatus;\n}\n\n/**\n * Returns true if the current highlighted block matches the block clientId.\n *\n * @param {Object} state    Global application state.\n * @param {string} clientId The block to check.\n *\n * @return {boolean} Whether the block is currently highlighted.\n */\nexport function isBlockHighlighted( state, clientId ) {\n\treturn state.highlightedBlock === clientId;\n}\n\n/**\n * Checks if a given block has controlled inner blocks.\n *\n * @param {Object} state    Global application state.\n * @param {string} clientId The block to check.\n *\n * @return {boolean} True if the block has controlled inner blocks.\n */\nexport function areInnerBlocksControlled( state, clientId ) {\n\treturn !! state.blocks.controlledInnerBlocks[ clientId ];\n}\n\n/**\n * Returns the clientId for the first 'active' block of a given array of block names.\n * A block is 'active' if it (or a child) is the selected block.\n * Returns the first match moving up the DOM from the selected block.\n *\n * @param {Object}   state            Global application state.\n * @param {string[]} validBlocksNames The names of block types to check for.\n *\n * @return {string} The matching block's clientId.\n */\nexport const __experimentalGetActiveBlockIdByBlockNames = createSelector(\n\t( state, validBlockNames ) => {\n\t\tif ( ! validBlockNames.length ) {\n\t\t\treturn null;\n\t\t}\n\t\t// Check if selected block is a valid entity area.\n\t\tconst selectedBlockClientId = getSelectedBlockClientId( state );\n\t\tif (\n\t\t\tvalidBlockNames.includes(\n\t\t\t\tgetBlockName( state, selectedBlockClientId )\n\t\t\t)\n\t\t) {\n\t\t\treturn selectedBlockClientId;\n\t\t}\n\t\t// Check if first selected block is a child of a valid entity area.\n\t\tconst multiSelectedBlockClientIds =\n\t\t\tgetMultiSelectedBlockClientIds( state );\n\t\tconst entityAreaParents = getBlockParentsByBlockName(\n\t\t\tstate,\n\t\t\tselectedBlockClientId || multiSelectedBlockClientIds[ 0 ],\n\t\t\tvalidBlockNames\n\t\t);\n\t\tif ( entityAreaParents ) {\n\t\t\t// Last parent closest/most interior.\n\t\t\treturn entityAreaParents[ entityAreaParents.length - 1 ];\n\t\t}\n\t\treturn null;\n\t},\n\t( state, validBlockNames ) => [\n\t\tstate.selection.selectionStart.clientId,\n\t\tstate.selection.selectionEnd.clientId,\n\t\tvalidBlockNames,\n\t]\n);\n\n/**\n * Tells if the block with the passed clientId was just inserted.\n *\n * @param {Object}  state    Global application state.\n * @param {Object}  clientId Client Id of the block.\n * @param {?string} source   Optional insertion source of the block.\n * @return {boolean} True if the block matches the last block inserted from the specified source.\n */\nexport function wasBlockJustInserted( state, clientId, source ) {\n\tconst { lastBlockInserted } = state;\n\treturn (\n\t\tlastBlockInserted.clientIds?.includes( clientId ) &&\n\t\tlastBlockInserted.source === source\n\t);\n}\n\n/**\n * Tells if the block is visible on the canvas or not.\n *\n * @param {Object} state    Global application state.\n * @param {Object} clientId Client Id of the block.\n * @return {boolean} True if the block is visible.\n */\nexport function isBlockVisible( state, clientId ) {\n\treturn state.blockVisibility?.[ clientId ] ?? true;\n}\n\n/**\n * Returns the list of all hidden blocks.\n *\n * @param {Object} state Global application state.\n * @return {[string]} List of hidden blocks.\n */\nexport const __unstableGetVisibleBlocks = createSelector(\n\t( state ) => {\n\t\tconst visibleBlocks = new Set(\n\t\t\tObject.keys( state.blockVisibility ).filter(\n\t\t\t\t( key ) => state.blockVisibility[ key ]\n\t\t\t)\n\t\t);\n\t\tif ( visibleBlocks.size === 0 ) {\n\t\t\treturn EMPTY_SET;\n\t\t}\n\t\treturn visibleBlocks;\n\t},\n\t( state ) => [ state.blockVisibility ]\n);\n\n/**\n * DO-NOT-USE in production.\n * This selector is created for internal/experimental only usage and may be\n * removed anytime without any warning, causing breakage on any plugin or theme invoking it.\n */\nexport const __unstableGetContentLockingParent = createSelector(\n\t( state, clientId ) => {\n\t\tlet current = clientId;\n\t\tlet result;\n\t\twhile ( ( current = state.blocks.parents.get( current ) ) ) {\n\t\t\tif (\n\t\t\t\tgetBlockName( state, current ) === 'core/block' ||\n\t\t\t\tgetTemplateLock( state, current ) === 'contentOnly'\n\t\t\t) {\n\t\t\t\tresult = current;\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t},\n\t( state ) => [ state.blocks.parents, state.blockListSettings ]\n);\n\n/**\n * DO-NOT-USE in production.\n * This selector is created for internal/experimental only usage and may be\n * removed anytime without any warning, causing breakage on any plugin or theme invoking it.\n *\n * @param {Object} state Global application state.\n */\nexport function __unstableGetTemporarilyEditingAsBlocks( state ) {\n\treturn state.temporarilyEditingAsBlocks;\n}\n\n/**\n * DO-NOT-USE in production.\n * This selector is created for internal/experimental only usage and may be\n * removed anytime without any warning, causing breakage on any plugin or theme invoking it.\n *\n * @param {Object} state Global application state.\n */\nexport function __unstableGetTemporarilyEditingFocusModeToRevert( state ) {\n\treturn state.temporarilyEditingFocusModeRevert;\n}\n\nexport function __unstableHasActiveBlockOverlayActive( state, clientId ) {\n\t// Prevent overlay on blocks with a non-default editing mode. If the mdoe is\n\t// 'disabled' then the overlay is redundant since the block can't be\n\t// selected. If the mode is 'contentOnly' then the overlay is redundant\n\t// since there will be no controls to interact with once selected.\n\tif ( getBlockEditingMode( state, clientId ) !== 'default' ) {\n\t\treturn false;\n\t}\n\n\t// If the block editing is locked, the block overlay is always active.\n\tif ( ! canEditBlock( state, clientId ) ) {\n\t\treturn true;\n\t}\n\n\tconst editorMode = __unstableGetEditorMode( state );\n\n\t// In zoom-out mode, the block overlay is always active for top level blocks.\n\tif (\n\t\teditorMode === 'zoom-out' &&\n\t\tclientId &&\n\t\t! getBlockRootClientId( state, clientId )\n\t) {\n\t\treturn true;\n\t}\n\n\t// In navigation mode, the block overlay is active when the block is not\n\t// selected (and doesn't contain a selected child). The same behavior is\n\t// also enabled in all modes for blocks that have controlled children\n\t// (reusable block, template part, navigation), unless explicitly disabled\n\t// with `supports.__experimentalDisableBlockOverlay`.\n\tconst blockSupportDisable = hasBlockSupport(\n\t\tgetBlockName( state, clientId ),\n\t\t'__experimentalDisableBlockOverlay',\n\t\tfalse\n\t);\n\tconst shouldEnableIfUnselected =\n\t\teditorMode === 'navigation' ||\n\t\t( blockSupportDisable\n\t\t\t? false\n\t\t\t: areInnerBlocksControlled( state, clientId ) );\n\n\treturn (\n\t\tshouldEnableIfUnselected &&\n\t\t! isBlockSelected( state, clientId ) &&\n\t\t! hasSelectedInnerBlock( state, clientId, true )\n\t);\n}\n\nexport function __unstableIsWithinBlockOverlay( state, clientId ) {\n\tlet parent = state.blocks.parents.get( clientId );\n\twhile ( !! parent ) {\n\t\tif ( __unstableHasActiveBlockOverlayActive( state, parent ) ) {\n\t\t\treturn true;\n\t\t}\n\t\tparent = state.blocks.parents.get( parent );\n\t}\n\treturn false;\n}\n\n/**\n * @typedef {import('../components/block-editing-mode').BlockEditingMode} BlockEditingMode\n */\n\n/**\n * Returns the block editing mode for a given block.\n *\n * The mode can be one of three options:\n *\n * - `'disabled'`: Prevents editing the block entirely, i.e. it cannot be\n *   selected.\n * - `'contentOnly'`: Hides all non-content UI, e.g. auxiliary controls in the\n *   toolbar, the block movers, block settings.\n * - `'default'`: Allows editing the block as normal.\n *\n * Blocks can set a mode using the `useBlockEditingMode` hook.\n *\n * The mode is inherited by all of the block's inner blocks, unless they have\n * their own mode.\n *\n * A template lock can also set a mode. If the template lock is `'contentOnly'`,\n * the block's mode is overridden to `'contentOnly'` if the block has a content\n * role attribute, or `'disabled'` otherwise.\n *\n * @see useBlockEditingMode\n *\n * @param {Object} state    Global application state.\n * @param {string} clientId The block client ID, or `''` for the root container.\n *\n * @return {BlockEditingMode} The block editing mode. One of `'disabled'`,\n *                            `'contentOnly'`, or `'default'`.\n */\nexport const getBlockEditingMode = createRegistrySelector(\n\t( select ) =>\n\t\t( state, clientId = '' ) => {\n\t\t\tconst blockEditingMode = state.blockEditingModes.get( clientId );\n\t\t\tif ( blockEditingMode ) {\n\t\t\t\treturn blockEditingMode;\n\t\t\t}\n\t\t\tif ( ! clientId ) {\n\t\t\t\treturn 'default';\n\t\t\t}\n\t\t\tconst rootClientId = getBlockRootClientId( state, clientId );\n\t\t\tconst templateLock = getTemplateLock( state, rootClientId );\n\t\t\tif ( templateLock === 'contentOnly' ) {\n\t\t\t\tconst name = getBlockName( state, clientId );\n\t\t\t\tconst isContent =\n\t\t\t\t\tselect( blocksStore ).__experimentalHasContentRoleAttribute(\n\t\t\t\t\t\tname\n\t\t\t\t\t);\n\t\t\t\treturn isContent ? 'contentOnly' : 'disabled';\n\t\t\t}\n\t\t\tconst parentMode = getBlockEditingMode( state, rootClientId );\n\t\t\treturn parentMode === 'contentOnly' ? 'default' : parentMode;\n\t\t}\n);\n\n/**\n * Indicates if a block is ungroupable.\n * A block is ungroupable if it is a single grouping block with inner blocks.\n * If a block has an `ungroup` transform, it is also ungroupable, without the\n * requirement of being the default grouping block.\n * Additionally a block can only be ungrouped if it has inner blocks and can\n * be removed.\n *\n * @param {Object} state    Global application state.\n * @param {string} clientId Client Id of the block. If not passed the selected block's client id will be used.\n * @return {boolean} True if the block is ungroupable.\n */\nexport const isUngroupable = createRegistrySelector(\n\t( select ) =>\n\t\t( state, clientId = '' ) => {\n\t\t\tconst _clientId = clientId || getSelectedBlockClientId( state );\n\t\t\tif ( ! _clientId ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tconst { getGroupingBlockName } = select( blocksStore );\n\t\t\tconst block = getBlock( state, _clientId );\n\t\t\tconst groupingBlockName = getGroupingBlockName();\n\t\t\tconst _isUngroupable =\n\t\t\t\tblock &&\n\t\t\t\t( block.name === groupingBlockName ||\n\t\t\t\t\tgetBlockType( block.name )?.transforms?.ungroup ) &&\n\t\t\t\t!! block.innerBlocks.length;\n\n\t\t\treturn _isUngroupable && canRemoveBlock( state, _clientId );\n\t\t}\n);\n\n/**\n * Indicates if the provided blocks(by client ids) are groupable.\n * We need to have at least one block, have a grouping block name set and\n * be able to remove these blocks.\n *\n * @param {Object}   state     Global application state.\n * @param {string[]} clientIds Block client ids. If not passed the selected blocks client ids will be used.\n * @return {boolean} True if the blocks are groupable.\n */\nexport const isGroupable = createRegistrySelector(\n\t( select ) =>\n\t\t( state, clientIds = EMPTY_ARRAY ) => {\n\t\t\tconst { getGroupingBlockName } = select( blocksStore );\n\t\t\tconst groupingBlockName = getGroupingBlockName();\n\t\t\tconst _clientIds = clientIds?.length\n\t\t\t\t? clientIds\n\t\t\t\t: getSelectedBlockClientIds( state );\n\t\t\tconst rootClientId = _clientIds?.length\n\t\t\t\t? getBlockRootClientId( state, _clientIds[ 0 ] )\n\t\t\t\t: undefined;\n\t\t\tconst groupingBlockAvailable = canInsertBlockType(\n\t\t\t\tstate,\n\t\t\t\tgroupingBlockName,\n\t\t\t\trootClientId\n\t\t\t);\n\t\t\tconst _isGroupable = groupingBlockAvailable && _clientIds.length;\n\t\t\treturn (\n\t\t\t\t_isGroupable &&\n\t\t\t\tcanRemoveBlocks( state, _clientIds, rootClientId )\n\t\t\t);\n\t\t}\n);\n","// Keep track of the blocks that should not be pushing an additional\r\n// undo stack when editing the entity.\r\n// See the implementation of `syncDerivedUpdates` and `useBlockSync`.\r\nexport const undoIgnoreBlocks = new WeakSet();\r\n","/**\n * WordPress dependencies\n */\nimport { Platform } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { undoIgnoreBlocks } from './undo-ignore';\n\nconst castArray = ( maybeArray ) =>\n\tArray.isArray( maybeArray ) ? maybeArray : [ maybeArray ];\n\n/**\n * A list of private/experimental block editor settings that\n * should not become a part of the WordPress public API.\n * BlockEditorProvider will remove these settings from the\n * settings object it receives.\n *\n * @see https://github.com/WordPress/gutenberg/pull/46131\n */\nconst privateSettings = [\n\t'inserterMediaCategories',\n\t'blockInspectorAnimation',\n];\n\n/**\n * Action that updates the block editor settings and\n * conditionally preserves the experimental ones.\n *\n * @param {Object}  settings                          Updated settings\n * @param {Object}  options                           Options object.\n * @param {boolean} options.stripExperimentalSettings Whether to strip experimental settings.\n * @param {boolean} options.reset                     Whether to reset the settings.\n * @return {Object} Action object\n */\nexport function __experimentalUpdateSettings(\n\tsettings,\n\t{ stripExperimentalSettings = false, reset = false } = {}\n) {\n\tlet cleanSettings = settings;\n\t// There are no plugins in the mobile apps, so there is no\n\t// need to strip the experimental settings:\n\tif ( stripExperimentalSettings && Platform.OS === 'web' ) {\n\t\tcleanSettings = {};\n\t\tfor ( const key in settings ) {\n\t\t\tif ( ! privateSettings.includes( key ) ) {\n\t\t\t\tcleanSettings[ key ] = settings[ key ];\n\t\t\t}\n\t\t}\n\t}\n\treturn {\n\t\ttype: 'UPDATE_SETTINGS',\n\t\tsettings: cleanSettings,\n\t\treset,\n\t};\n}\n\n/**\n * Hides the block interface (eg. toolbar, outline, etc.)\n *\n * @return {Object} Action object.\n */\nexport function hideBlockInterface() {\n\treturn {\n\t\ttype: 'HIDE_BLOCK_INTERFACE',\n\t};\n}\n\n/**\n * Shows the block interface (eg. toolbar, outline, etc.)\n *\n * @return {Object} Action object.\n */\nexport function showBlockInterface() {\n\treturn {\n\t\ttype: 'SHOW_BLOCK_INTERFACE',\n\t};\n}\n\n/**\n * Yields action objects used in signalling that the blocks corresponding to\n * the set of specified client IDs are to be removed.\n *\n * Compared to `removeBlocks`, this private interface exposes an additional\n * parameter; see `forceRemove`.\n *\n * @param {string|string[]} clientIds      Client IDs of blocks to remove.\n * @param {boolean}         selectPrevious True if the previous block\n *                                         or the immediate parent\n *                                         (if no previous block exists)\n *                                         should be selected\n *                                         when a block is removed.\n * @param {boolean}         forceRemove    Whether to force the operation,\n *                                         bypassing any checks for certain\n *                                         block types.\n */\nexport const privateRemoveBlocks =\n\t( clientIds, selectPrevious = true, forceRemove = false ) =>\n\t( { select, dispatch, registry } ) => {\n\t\tif ( ! clientIds || ! clientIds.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tclientIds = castArray( clientIds );\n\t\tconst rootClientId = select.getBlockRootClientId( clientIds[ 0 ] );\n\t\tconst canRemoveBlocks = select.canRemoveBlocks(\n\t\t\tclientIds,\n\t\t\trootClientId\n\t\t);\n\n\t\tif ( ! canRemoveBlocks ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// In certain editing contexts, we'd like to prevent accidental removal\n\t\t// of important blocks. For example, in the site editor, the Query Loop\n\t\t// block is deemed important. In such cases, we'll ask the user for\n\t\t// confirmation that they intended to remove such block(s). However,\n\t\t// the editor instance is responsible for presenting those confirmation\n\t\t// prompts to the user. Any instance opting into removal prompts must\n\t\t// register using `setBlockRemovalRules()`.\n\t\t//\n\t\t// @see https://github.com/WordPress/gutenberg/pull/51145\n\t\tconst rules = ! forceRemove && select.getBlockRemovalRules();\n\n\t\tif ( rules ) {\n\t\t\tfunction flattenBlocks( blocks ) {\n\t\t\t\tconst result = [];\n\t\t\t\tconst stack = [ ...blocks ];\n\t\t\t\twhile ( stack.length ) {\n\t\t\t\t\tconst { innerBlocks, ...block } = stack.shift();\n\t\t\t\t\tstack.push( ...innerBlocks );\n\t\t\t\t\tresult.push( block );\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t}\n\n\t\t\tconst blockList = clientIds.map( select.getBlock );\n\t\t\tconst flattenedBlocks = flattenBlocks( blockList );\n\n\t\t\t// Find the first message and use it.\n\t\t\tlet message;\n\t\t\tfor ( const rule of rules ) {\n\t\t\t\tmessage = rule.callback( flattenedBlocks );\n\t\t\t\tif ( message ) {\n\t\t\t\t\tdispatch(\n\t\t\t\t\t\tdisplayBlockRemovalPrompt(\n\t\t\t\t\t\t\tclientIds,\n\t\t\t\t\t\t\tselectPrevious,\n\t\t\t\t\t\t\tmessage\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ( selectPrevious ) {\n\t\t\tdispatch.selectPreviousBlock( clientIds[ 0 ], selectPrevious );\n\t\t}\n\n\t\t// We're batching these two actions because an extra `undo/redo` step can\n\t\t// be created, based on whether we insert a default block or not.\n\t\tregistry.batch( () => {\n\t\t\tdispatch( { type: 'REMOVE_BLOCKS', clientIds } );\n\t\t\t// To avoid a focus loss when removing the last block, assure there is\n\t\t\t// always a default block if the last of the blocks have been removed.\n\t\t\tdispatch( ensureDefaultBlock() );\n\t\t} );\n\t};\n\n/**\n * Action which will insert a default block insert action if there\n * are no other blocks at the root of the editor. This action should be used\n * in actions which may result in no blocks remaining in the editor (removal,\n * replacement, etc).\n */\nexport const ensureDefaultBlock =\n\t() =>\n\t( { select, dispatch } ) => {\n\t\t// To avoid a focus loss when removing the last block, assure there is\n\t\t// always a default block if the last of the blocks have been removed.\n\t\tconst count = select.getBlockCount();\n\t\tif ( count > 0 ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If there's an custom appender, don't insert default block.\n\t\t// We have to remember to manually move the focus elsewhere to\n\t\t// prevent it from being lost though.\n\t\tconst { __unstableHasCustomAppender } = select.getSettings();\n\t\tif ( __unstableHasCustomAppender ) {\n\t\t\treturn;\n\t\t}\n\n\t\tdispatch.insertDefaultBlock();\n\t};\n\n/**\n * Returns an action object used in signalling that a block removal prompt must\n * be displayed.\n *\n * Contrast with `setBlockRemovalRules`.\n *\n * @param {string|string[]} clientIds      Client IDs of blocks to remove.\n * @param {boolean}         selectPrevious True if the previous block or the\n *                                         immediate parent (if no previous\n *                                         block exists) should be selected\n *                                         when a block is removed.\n * @param {string}          message        Message to display in the prompt.\n *\n * @return {Object} Action object.\n */\nfunction displayBlockRemovalPrompt( clientIds, selectPrevious, message ) {\n\treturn {\n\t\ttype: 'DISPLAY_BLOCK_REMOVAL_PROMPT',\n\t\tclientIds,\n\t\tselectPrevious,\n\t\tmessage,\n\t};\n}\n\n/**\n * Returns an action object used in signalling that a block removal prompt must\n * be cleared, either be cause the user has confirmed or canceled the request\n * for removal.\n *\n * @return {Object} Action object.\n */\nexport function clearBlockRemovalPrompt() {\n\treturn {\n\t\ttype: 'CLEAR_BLOCK_REMOVAL_PROMPT',\n\t};\n}\n\n/**\n * Returns an action object used to set up any rules that a block editor may\n * provide in order to prevent a user from accidentally removing certain\n * blocks. These rules are then used to display a confirmation prompt to the\n * user. For instance, in the Site Editor, the Query Loop block is important\n * enough to warrant such confirmation.\n *\n * IMPORTANT: Registering rules implicitly signals to the `privateRemoveBlocks`\n * action that the editor will be responsible for displaying block removal\n * prompts and confirming deletions. This action is meant to be used by\n * component `BlockRemovalWarningModal` only.\n *\n * The data is a record whose keys are block types (e.g. 'core/query') and\n * whose values are the explanation to be shown to users (e.g. 'Query Loop\n * displays a list of posts or pages.').\n *\n * Contrast with `displayBlockRemovalPrompt`.\n *\n * @param {Record<string,string>|false} rules Block removal rules.\n * @return {Object} Action object.\n */\nexport function setBlockRemovalRules( rules = false ) {\n\treturn {\n\t\ttype: 'SET_BLOCK_REMOVAL_RULES',\n\t\trules,\n\t};\n}\n\n/**\n * Sets the client ID of the block settings menu that is currently open.\n *\n * @param {?string} clientId The block client ID.\n * @return {Object} Action object.\n */\nexport function setOpenedBlockSettingsMenu( clientId ) {\n\treturn {\n\t\ttype: 'SET_OPENED_BLOCK_SETTINGS_MENU',\n\t\tclientId,\n\t};\n}\n\nexport function setStyleOverride( id, style ) {\n\treturn {\n\t\ttype: 'SET_STYLE_OVERRIDE',\n\t\tid,\n\t\tstyle,\n\t};\n}\n\nexport function deleteStyleOverride( id ) {\n\treturn {\n\t\ttype: 'DELETE_STYLE_OVERRIDE',\n\t\tid,\n\t};\n}\n\n/**\n * A higher-order action that mark every change inside a callback as \"non-persistent\"\n * and ignore pushing to the undo history stack. It's primarily used for synchronized\n * derived updates from the block editor without affecting the undo history.\n *\n * @param {() => void} callback The synchronous callback to derive updates.\n */\nexport function syncDerivedUpdates( callback ) {\n\treturn ( { dispatch, select, registry } ) => {\n\t\tregistry.batch( () => {\n\t\t\t// Mark every change in the `callback` as non-persistent.\n\t\t\tdispatch( {\n\t\t\t\ttype: 'SET_EXPLICIT_PERSISTENT',\n\t\t\t\tisPersistentChange: false,\n\t\t\t} );\n\t\t\tcallback();\n\t\t\tdispatch( {\n\t\t\t\ttype: 'SET_EXPLICIT_PERSISTENT',\n\t\t\t\tisPersistentChange: undefined,\n\t\t\t} );\n\n\t\t\t// Ignore pushing undo stack for the updated blocks.\n\t\t\tconst updatedBlocks = select.getBlocks();\n\t\t\tundoIgnoreBlocks.add( updatedBlocks );\n\t\t} );\n\t};\n}\n\n/**\n * Action that sets the element that had focus when focus leaves the editor canvas.\n *\n * @param {Object} lastFocus The last focused element.\n *\n *\n * @return {Object} Action object.\n */\nexport function setLastFocus( lastFocus = null ) {\n\treturn {\n\t\ttype: 'LAST_FOCUS',\n\t\tlastFocus,\n\t};\n}\n\n/**\n * Action that stops temporarily editing as blocks.\n *\n * @param {string} clientId The block's clientId.\n */\nexport function stopEditingAsBlocks( clientId ) {\n\treturn ( { select, dispatch } ) => {\n\t\tconst focusModeToRevert =\n\t\t\tselect.__unstableGetTemporarilyEditingFocusModeToRevert();\n\t\tdispatch.__unstableMarkNextChangeAsNotPersistent();\n\t\tdispatch.updateBlockAttributes( clientId, {\n\t\t\ttemplateLock: 'contentOnly',\n\t\t} );\n\t\tdispatch.updateBlockListSettings( clientId, {\n\t\t\t...select.getBlockListSettings( clientId ),\n\t\t\ttemplateLock: 'contentOnly',\n\t\t} );\n\t\tdispatch.updateSettings( { focusMode: focusModeToRevert } );\n\t\tdispatch.__unstableSetTemporarilyEditingAsBlocks();\n\t};\n}\n\n/**\n * Returns an action object used in signalling that the user has begun to drag.\n *\n * @return {Object} Action object.\n */\nexport function startDragging() {\n\treturn {\n\t\ttype: 'START_DRAGGING',\n\t};\n}\n\n/**\n * Returns an action object used in signalling that the user has stopped dragging.\n *\n * @return {Object} Action object.\n */\nexport function stopDragging() {\n\treturn {\n\t\ttype: 'STOP_DRAGGING',\n\t};\n}\n\n/**\n * @param {string|null} clientId The block's clientId, or `null` to clear.\n *\n * @return  {Object} Action object.\n */\nexport function expandBlock( clientId ) {\n\treturn {\n\t\ttype: 'SET_BLOCK_EXPANDED_IN_LIST_VIEW',\n\t\tclientId,\n\t};\n}\n","/**\n * WordPress dependencies\n */\n\nimport { __, _x } from '@wordpress/i18n';\n\nexport const INSERTER_PATTERN_TYPES = {\n\tuser: 'user',\n\ttheme: 'theme',\n\tdirectory: 'directory',\n};\n\nexport const INSERTER_SYNC_TYPES = {\n\tfull: 'fully',\n\tunsynced: 'unsynced',\n};\n\nexport const allPatternsCategory = {\n\tname: 'allPatterns',\n\tlabel: _x( 'All', 'patterns' ),\n};\n\nexport const myPatternsCategory = {\n\tname: 'myPatterns',\n\tlabel: __( 'My patterns' ),\n};\n\nexport function isPatternFiltered( pattern, sourceFilter, syncFilter ) {\n\tconst isUserPattern = pattern.name.startsWith( 'core/block' );\n\tconst isDirectoryPattern =\n\t\tpattern.source === 'core' ||\n\t\tpattern.source?.startsWith( 'pattern-directory' );\n\n\t// If theme source selected, filter out user created patterns and those from\n\t// the core patterns directory.\n\tif (\n\t\tsourceFilter === INSERTER_PATTERN_TYPES.theme &&\n\t\t( isUserPattern || isDirectoryPattern )\n\t) {\n\t\treturn true;\n\t}\n\n\t// If the directory source is selected, filter out user created patterns\n\t// and those bundled with the theme.\n\tif (\n\t\tsourceFilter === INSERTER_PATTERN_TYPES.directory &&\n\t\t( isUserPattern || ! isDirectoryPattern )\n\t) {\n\t\treturn true;\n\t}\n\n\t// If user source selected, filter out theme patterns.\n\tif (\n\t\tsourceFilter === INSERTER_PATTERN_TYPES.user &&\n\t\tpattern.type !== INSERTER_PATTERN_TYPES.user\n\t) {\n\t\treturn true;\n\t}\n\n\t// Filter by sync status.\n\tif (\n\t\tsyncFilter === INSERTER_SYNC_TYPES.full &&\n\t\tpattern.syncStatus !== ''\n\t) {\n\t\treturn true;\n\t}\n\n\tif (\n\t\tsyncFilter === INSERTER_SYNC_TYPES.unsynced &&\n\t\tpattern.syncStatus !== 'unsynced' &&\n\t\tisUserPattern\n\t) {\n\t\treturn true;\n\t}\n\n\treturn false;\n}\n","/**\n * Immutably sets a value inside an object. Like `lodash#set`, but returning a\n * new object. Treats nullish initial values as empty objects. Clones any\n * nested objects. Supports arrays, too.\n *\n * @param {Object}              object Object to set a value in.\n * @param {number|string|Array} path   Path in the object to modify.\n * @param {*}                   value  New value to set.\n * @return {Object} Cloned object with the new value set.\n */\nexport function setImmutably( object, path, value ) {\n\t// Normalize path\n\tpath = Array.isArray( path ) ? [ ...path ] : [ path ];\n\n\t// Shallowly clone the base of the object\n\tobject = Array.isArray( object ) ? [ ...object ] : { ...object };\n\n\tconst leaf = path.pop();\n\n\t// Traverse object from root to leaf, shallowly cloning at each level\n\tlet prev = object;\n\tfor ( const key of path ) {\n\t\tconst lvl = prev[ key ];\n\t\tprev = prev[ key ] = Array.isArray( lvl ) ? [ ...lvl ] : { ...lvl };\n\t}\n\n\tprev[ leaf ] = value;\n\n\treturn object;\n}\n\n/**\n * Helper util to return a value from a certain path of the object.\n * Path is specified as either:\n * - a string of properties, separated by dots, for example: \"x.y\".\n * - an array of properties, for example `[ 'x', 'y' ]`.\n * You can also specify a default value in case the result is nullish.\n *\n * @param {Object}       object       Input object.\n * @param {string|Array} path         Path to the object property.\n * @param {*}            defaultValue Default value if the value at the specified path is nullish.\n * @return {*} Value of the object property at the specified path.\n */\nexport const getValueFromObjectPath = ( object, path, defaultValue ) => {\n\tconst arrayPath = Array.isArray( path ) ? path : path.split( '.' );\n\tlet value = object;\n\tarrayPath.forEach( ( fieldName ) => {\n\t\tvalue = value?.[ fieldName ];\n\t} );\n\treturn value ?? defaultValue;\n};\n","/**\n * WordPress dependencies\n */\nimport {\n\t__EXPERIMENTAL_PATHS_WITH_OVERRIDE as PATHS_WITH_OVERRIDE,\n\thasBlockSupport,\n} from '@wordpress/blocks';\nimport { applyFilters } from '@wordpress/hooks';\n\n/**\n * Internal dependencies\n */\nimport { getValueFromObjectPath } from '../utils/object';\nimport { getBlockName, getSettings, getBlockAttributes } from './selectors';\n\nconst blockedPaths = [\n\t'color',\n\t'border',\n\t'dimensions',\n\t'typography',\n\t'spacing',\n];\n\nconst deprecatedFlags = {\n\t'color.palette': ( settings ) => settings.colors,\n\t'color.gradients': ( settings ) => settings.gradients,\n\t'color.custom': ( settings ) =>\n\t\tsettings.disableCustomColors === undefined\n\t\t\t? undefined\n\t\t\t: ! settings.disableCustomColors,\n\t'color.customGradient': ( settings ) =>\n\t\tsettings.disableCustomGradients === undefined\n\t\t\t? undefined\n\t\t\t: ! settings.disableCustomGradients,\n\t'typography.fontSizes': ( settings ) => settings.fontSizes,\n\t'typography.customFontSize': ( settings ) =>\n\t\tsettings.disableCustomFontSizes === undefined\n\t\t\t? undefined\n\t\t\t: ! settings.disableCustomFontSizes,\n\t'typography.lineHeight': ( settings ) => settings.enableCustomLineHeight,\n\t'spacing.units': ( settings ) => {\n\t\tif ( settings.enableCustomUnits === undefined ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( settings.enableCustomUnits === true ) {\n\t\t\treturn [ 'px', 'em', 'rem', 'vh', 'vw', '%' ];\n\t\t}\n\n\t\treturn settings.enableCustomUnits;\n\t},\n\t'spacing.padding': ( settings ) => settings.enableCustomSpacing,\n};\n\nconst prefixedFlags = {\n\t/*\n\t * These were only available in the plugin\n\t * and can be removed when the minimum WordPress version\n\t * for the plugin is 5.9.\n\t */\n\t'border.customColor': 'border.color',\n\t'border.customStyle': 'border.style',\n\t'border.customWidth': 'border.width',\n\t'typography.customFontStyle': 'typography.fontStyle',\n\t'typography.customFontWeight': 'typography.fontWeight',\n\t'typography.customLetterSpacing': 'typography.letterSpacing',\n\t'typography.customTextDecorations': 'typography.textDecoration',\n\t'typography.customTextTransforms': 'typography.textTransform',\n\t/*\n\t * These were part of WordPress 5.8 and we need to keep them.\n\t */\n\t'border.customRadius': 'border.radius',\n\t'spacing.customMargin': 'spacing.margin',\n\t'spacing.customPadding': 'spacing.padding',\n\t'typography.customLineHeight': 'typography.lineHeight',\n};\n\n/**\n * Remove `custom` prefixes for flags that did not land in 5.8.\n *\n * This provides continued support for `custom` prefixed properties. It will\n * be removed once third party devs have had sufficient time to update themes,\n * plugins, etc.\n *\n * @see https://github.com/WordPress/gutenberg/pull/34485\n *\n * @param {string} path Path to desired value in settings.\n * @return {string}     The value for defined setting.\n */\nconst removeCustomPrefixes = ( path ) => {\n\treturn prefixedFlags[ path ] || path;\n};\n\n/**\n * For settings like `color.palette`, which have a value that is an object\n * with `default`, `theme`, `custom`, with field values that are arrays of\n * items, merge these three arrays into one and return it. The calculation\n * is memoized so that identical input values produce identical output.\n * @param {Object} value Object to merge\n * @return {Array} Array of merged items\n */\nexport function mergeOrigins( value ) {\n\tlet result = mergeCache.get( value );\n\tif ( ! result ) {\n\t\tresult = [ 'default', 'theme', 'custom' ].flatMap(\n\t\t\t( key ) => value[ key ] ?? []\n\t\t);\n\t\tmergeCache.set( value, result );\n\t}\n\treturn result;\n}\nconst mergeCache = new WeakMap();\n\n/**\n * For settings like `color.palette`, which have a value that is an object\n * with `default`, `theme`, `custom`, with field values that are arrays of\n * items, returns the one with the highest priority among these three arrays.\n * @param {Object} value Object to extract from\n * @return {Array} Array of items extracted from the three origins\n */\nexport function overrideOrigins( value ) {\n\treturn value.custom ?? value.theme ?? value.default;\n}\n\n/**\n * For settings like `color.palette`, which have a value that is an object\n * with `default`, `theme`, `custom`, with field values that are arrays of\n * items, see if any of the three origins have values.\n *\n * @param {Object} value Object to check\n * @return {boolean} Whether the object has values in any of the three origins\n */\nexport function hasOriginValue( value ) {\n\treturn [ 'default', 'theme', 'custom' ].some(\n\t\t( key ) => value?.[ key ]?.length\n\t);\n}\n\nexport function getBlockSettings( state, clientId, ...paths ) {\n\tconst blockName = getBlockName( state, clientId );\n\tconst candidates = [];\n\n\tif ( clientId ) {\n\t\tlet id = clientId;\n\t\tdo {\n\t\t\tconst name = getBlockName( state, id );\n\t\t\tif ( hasBlockSupport( name, '__experimentalSettings', false ) ) {\n\t\t\t\tcandidates.push( id );\n\t\t\t}\n\t\t} while ( ( id = state.blocks.parents.get( id ) ) );\n\t}\n\n\treturn paths.map( ( path ) => {\n\t\tif ( blockedPaths.includes( path ) ) {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.warn(\n\t\t\t\t'Top level useSetting paths are disabled. Please use a subpath to query the information needed.'\n\t\t\t);\n\t\t\treturn undefined;\n\t\t}\n\n\t\t// 0. Allow third parties to filter the block's settings at runtime.\n\t\tlet result = applyFilters(\n\t\t\t'blockEditor.useSetting.before',\n\t\t\tundefined,\n\t\t\tpath,\n\t\t\tclientId,\n\t\t\tblockName\n\t\t);\n\n\t\tif ( undefined !== result ) {\n\t\t\treturn result;\n\t\t}\n\n\t\tconst normalizedPath = removeCustomPrefixes( path );\n\n\t\t// 1. Take settings from the block instance or its ancestors.\n\t\t// Start from the current block and work our way up the ancestors.\n\t\tfor ( const candidateClientId of candidates ) {\n\t\t\tconst candidateAtts = getBlockAttributes(\n\t\t\t\tstate,\n\t\t\t\tcandidateClientId\n\t\t\t);\n\t\t\tresult =\n\t\t\t\tgetValueFromObjectPath(\n\t\t\t\t\tcandidateAtts.settings?.blocks?.[ blockName ],\n\t\t\t\t\tnormalizedPath\n\t\t\t\t) ??\n\t\t\t\tgetValueFromObjectPath(\n\t\t\t\t\tcandidateAtts.settings,\n\t\t\t\t\tnormalizedPath\n\t\t\t\t);\n\t\t\tif ( result !== undefined ) {\n\t\t\t\t// Stop the search for more distant ancestors and move on.\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\t// 2. Fall back to the settings from the block editor store (__experimentalFeatures).\n\t\tconst settings = getSettings( state );\n\t\tif ( result === undefined && blockName ) {\n\t\t\tresult = getValueFromObjectPath(\n\t\t\t\tsettings.__experimentalFeatures?.blocks?.[ blockName ],\n\t\t\t\tnormalizedPath\n\t\t\t);\n\t\t}\n\n\t\tif ( result === undefined ) {\n\t\t\tresult = getValueFromObjectPath(\n\t\t\t\tsettings.__experimentalFeatures,\n\t\t\t\tnormalizedPath\n\t\t\t);\n\t\t}\n\n\t\t// Return if the setting was found in either the block instance or the store.\n\t\tif ( result !== undefined ) {\n\t\t\tif ( PATHS_WITH_OVERRIDE[ normalizedPath ] ) {\n\t\t\t\treturn overrideOrigins( result );\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\n\t\t// 3. Otherwise, use deprecated settings.\n\t\tconst deprecatedSettingsValue =\n\t\t\tdeprecatedFlags[ normalizedPath ]?.( settings );\n\t\tif ( deprecatedSettingsValue !== undefined ) {\n\t\t\treturn deprecatedSettingsValue;\n\t\t}\n\n\t\t// 4. Fallback for typography.dropCap:\n\t\t// This is only necessary to support typography.dropCap.\n\t\t// when __experimentalFeatures are not present (core without plugin).\n\t\t// To remove when __experimentalFeatures are ported to core.\n\t\treturn normalizedPath === 'typography.dropCap' ? true : undefined;\n\t} );\n}\n","/**\n * External dependencies\n */\nimport createSelector from 'rememo';\n\n/**\n * WordPress dependencies\n */\nimport { createRegistrySelector } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport {\n\tgetBlockOrder,\n\tgetBlockParents,\n\tgetBlockEditingMode,\n\tgetSettings,\n\tcanInsertBlockType,\n} from './selectors';\nimport {\n\tcheckAllowListRecursive,\n\tgetAllPatternsDependants,\n\tgetInsertBlockTypeDependants,\n} from './utils';\nimport { INSERTER_PATTERN_TYPES } from '../components/inserter/block-patterns-tab/utils';\nimport { STORE_NAME } from './constants';\nimport { unlock } from '../lock-unlock';\nimport {\n\tselectBlockPatternsKey,\n\treusableBlocksSelectKey,\n} from './private-keys';\n\nexport { getBlockSettings } from './get-block-settings';\n\n/**\n * Returns true if the block interface is hidden, or false otherwise.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} Whether the block toolbar is hidden.\n */\nexport function isBlockInterfaceHidden( state ) {\n\treturn state.isBlockInterfaceHidden;\n}\n\n/**\n * Gets the client ids of the last inserted blocks.\n *\n * @param {Object} state Global application state.\n * @return {Array|undefined} Client Ids of the last inserted block(s).\n */\nexport function getLastInsertedBlocksClientIds( state ) {\n\treturn state?.lastBlockInserted?.clientIds;\n}\n\nexport function getBlockWithoutAttributes( state, clientId ) {\n\treturn state.blocks.byClientId.get( clientId );\n}\n\n/**\n * Returns true if all of the descendants of a block with the given client ID\n * have an editing mode of 'disabled', or false otherwise.\n *\n * @param {Object} state    Global application state.\n * @param {string} clientId The block client ID.\n *\n * @return {boolean} Whether the block descendants are disabled.\n */\nexport const isBlockSubtreeDisabled = ( state, clientId ) => {\n\tconst isChildSubtreeDisabled = ( childClientId ) => {\n\t\treturn (\n\t\t\tgetBlockEditingMode( state, childClientId ) === 'disabled' &&\n\t\t\tgetBlockOrder( state, childClientId ).every(\n\t\t\t\tisChildSubtreeDisabled\n\t\t\t)\n\t\t);\n\t};\n\treturn getBlockOrder( state, clientId ).every( isChildSubtreeDisabled );\n};\n\nfunction getEnabledClientIdsTreeUnmemoized( state, rootClientId ) {\n\tconst blockOrder = getBlockOrder( state, rootClientId );\n\tconst result = [];\n\n\tfor ( const clientId of blockOrder ) {\n\t\tconst innerBlocks = getEnabledClientIdsTreeUnmemoized(\n\t\t\tstate,\n\t\t\tclientId\n\t\t);\n\t\tif ( getBlockEditingMode( state, clientId ) !== 'disabled' ) {\n\t\t\tresult.push( { clientId, innerBlocks } );\n\t\t} else {\n\t\t\tresult.push( ...innerBlocks );\n\t\t}\n\t}\n\n\treturn result;\n}\n\n/**\n * Returns a tree of block objects with only clientID and innerBlocks set.\n * Blocks with a 'disabled' editing mode are not included.\n *\n * @param {Object}  state        Global application state.\n * @param {?string} rootClientId Optional root client ID of block list.\n *\n * @return {Object[]} Tree of block objects with only clientID and innerBlocks set.\n */\nexport const getEnabledClientIdsTree = createSelector(\n\tgetEnabledClientIdsTreeUnmemoized,\n\t( state ) => [\n\t\tstate.blocks.order,\n\t\tstate.blockEditingModes,\n\t\tstate.settings.templateLock,\n\t\tstate.blockListSettings,\n\t]\n);\n\n/**\n * Returns a list of a given block's ancestors, from top to bottom. Blocks with\n * a 'disabled' editing mode are excluded.\n *\n * @see getBlockParents\n *\n * @param {Object}  state     Global application state.\n * @param {string}  clientId  The block client ID.\n * @param {boolean} ascending Order results from bottom to top (true) or top\n *                            to bottom (false).\n */\nexport const getEnabledBlockParents = createSelector(\n\t( state, clientId, ascending = false ) => {\n\t\treturn getBlockParents( state, clientId, ascending ).filter(\n\t\t\t( parent ) => getBlockEditingMode( state, parent ) !== 'disabled'\n\t\t);\n\t},\n\t( state ) => [\n\t\tstate.blocks.parents,\n\t\tstate.blockEditingModes,\n\t\tstate.settings.templateLock,\n\t\tstate.blockListSettings,\n\t]\n);\n\n/**\n * Selector that returns the data needed to display a prompt when certain\n * blocks are removed, or `false` if no such prompt is requested.\n *\n * @param {Object} state Global application state.\n *\n * @return {Object|false} Data for removal prompt display, if any.\n */\nexport function getRemovalPromptData( state ) {\n\treturn state.removalPromptData;\n}\n\n/**\n * Returns true if removal prompt exists, or false otherwise.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} Whether removal prompt exists.\n */\nexport function getBlockRemovalRules( state ) {\n\treturn state.blockRemovalRules;\n}\n\n/**\n * Returns the client ID of the block settings menu that is currently open.\n *\n * @param {Object} state Global application state.\n * @return {string|null} The client ID of the block menu that is currently open.\n */\nexport function getOpenedBlockSettingsMenu( state ) {\n\treturn state.openedBlockSettingsMenu;\n}\n\n/**\n * Returns all style overrides, intended to be merged with global editor styles.\n *\n * @param {Object} state Global application state.\n *\n * @return {Map} A map of style IDs to style overrides.\n */\nexport function getStyleOverrides( state ) {\n\treturn state.styleOverrides;\n}\n\n/** @typedef {import('./actions').InserterMediaCategory} InserterMediaCategory */\n/**\n * Returns the registered inserter media categories through the public API.\n *\n * @param {Object} state Editor state.\n *\n * @return {InserterMediaCategory[]} Inserter media categories.\n */\nexport function getRegisteredInserterMediaCategories( state ) {\n\treturn state.registeredInserterMediaCategories;\n}\n\n/**\n * Returns an array containing the allowed inserter media categories.\n * It merges the registered media categories from extenders with the\n * core ones. It also takes into account the allowed `mime_types`, which\n * can be altered by `upload_mimes` filter and restrict some of them.\n *\n * @param {Object} state Global application state.\n *\n * @return {InserterMediaCategory[]} Client IDs of descendants.\n */\nexport const getInserterMediaCategories = createSelector(\n\t( state ) => {\n\t\tconst {\n\t\t\tsettings: {\n\t\t\t\tinserterMediaCategories,\n\t\t\t\tallowedMimeTypes,\n\t\t\t\tenableOpenverseMediaCategory,\n\t\t\t},\n\t\t\tregisteredInserterMediaCategories,\n\t\t} = state;\n\t\t// The allowed `mime_types` can be altered by `upload_mimes` filter and restrict\n\t\t// some of them. In this case we shouldn't add the category to the available media\n\t\t// categories list in the inserter.\n\t\tif (\n\t\t\t( ! inserterMediaCategories &&\n\t\t\t\t! registeredInserterMediaCategories.length ) ||\n\t\t\t! allowedMimeTypes\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\tconst coreInserterMediaCategoriesNames =\n\t\t\tinserterMediaCategories?.map( ( { name } ) => name ) || [];\n\t\tconst mergedCategories = [\n\t\t\t...( inserterMediaCategories || [] ),\n\t\t\t...( registeredInserterMediaCategories || [] ).filter(\n\t\t\t\t( { name } ) =>\n\t\t\t\t\t! coreInserterMediaCategoriesNames.includes( name )\n\t\t\t),\n\t\t];\n\t\treturn mergedCategories.filter( ( category ) => {\n\t\t\t// Check if Openverse category is enabled.\n\t\t\tif (\n\t\t\t\t! enableOpenverseMediaCategory &&\n\t\t\t\tcategory.name === 'openverse'\n\t\t\t) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn Object.values( allowedMimeTypes ).some( ( mimeType ) =>\n\t\t\t\tmimeType.startsWith( `${ category.mediaType }/` )\n\t\t\t);\n\t\t} );\n\t},\n\t( state ) => [\n\t\tstate.settings.inserterMediaCategories,\n\t\tstate.settings.allowedMimeTypes,\n\t\tstate.settings.enableOpenverseMediaCategory,\n\t\tstate.registeredInserterMediaCategories,\n\t]\n);\n\n/**\n * Returns whether there is at least one allowed pattern for inner blocks children.\n * This is useful for deferring the parsing of all patterns until needed.\n *\n * @param {Object} state               Editor state.\n * @param {string} [rootClientId=null] Target root client ID.\n *\n * @return {boolean} If there is at least one allowed pattern.\n */\nexport const hasAllowedPatterns = createRegistrySelector( ( select ) =>\n\tcreateSelector(\n\t\t( state, rootClientId = null ) => {\n\t\t\tconst { getAllPatterns, __experimentalGetParsedPattern } = unlock(\n\t\t\t\tselect( STORE_NAME )\n\t\t\t);\n\t\t\tconst patterns = getAllPatterns();\n\t\t\tconst { allowedBlockTypes } = getSettings( state );\n\t\t\treturn patterns.some( ( { name, inserter = true } ) => {\n\t\t\t\tif ( ! inserter ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tconst { blocks } = __experimentalGetParsedPattern( name );\n\t\t\t\treturn (\n\t\t\t\t\tcheckAllowListRecursive( blocks, allowedBlockTypes ) &&\n\t\t\t\t\tblocks.every( ( { name: blockName } ) =>\n\t\t\t\t\t\tcanInsertBlockType( state, blockName, rootClientId )\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t} );\n\t\t},\n\t\t( state, rootClientId ) => [\n\t\t\t...getAllPatternsDependants( select )( state ),\n\t\t\t...getInsertBlockTypeDependants( state, rootClientId ),\n\t\t]\n\t)\n);\n\nexport const getAllPatterns = createRegistrySelector( ( select ) =>\n\tcreateSelector( ( state ) => {\n\t\t// This setting is left for back compat.\n\t\tconst {\n\t\t\t__experimentalBlockPatterns = [],\n\t\t\t__experimentalUserPatternCategories = [],\n\t\t\t__experimentalReusableBlocks = [],\n\t\t} = state.settings;\n\t\tconst reusableBlocksSelect = state.settings[ reusableBlocksSelectKey ];\n\t\tconst userPatterns = (\n\t\t\treusableBlocksSelect\n\t\t\t\t? reusableBlocksSelect( select )\n\t\t\t\t: __experimentalReusableBlocks ?? []\n\t\t).map( ( userPattern ) => {\n\t\t\treturn {\n\t\t\t\tname: `core/block/${ userPattern.id }`,\n\t\t\t\tid: userPattern.id,\n\t\t\t\ttype: INSERTER_PATTERN_TYPES.user,\n\t\t\t\ttitle: userPattern.title.raw,\n\t\t\t\tcategories: userPattern.wp_pattern_category.map( ( catId ) => {\n\t\t\t\t\tconst category = (\n\t\t\t\t\t\t__experimentalUserPatternCategories ?? []\n\t\t\t\t\t).find( ( { id } ) => id === catId );\n\t\t\t\t\treturn category ? category.slug : catId;\n\t\t\t\t} ),\n\t\t\t\tcontent: userPattern.content.raw,\n\t\t\t\tsyncStatus: userPattern.wp_pattern_sync_status,\n\t\t\t};\n\t\t} );\n\t\treturn [\n\t\t\t...userPatterns,\n\t\t\t...__experimentalBlockPatterns,\n\t\t\t...( state.settings[ selectBlockPatternsKey ]?.( select ) ?? [] ),\n\t\t].filter(\n\t\t\t( x, index, arr ) =>\n\t\t\t\tindex === arr.findIndex( ( y ) => x.name === y.name )\n\t\t);\n\t}, getAllPatternsDependants( select ) )\n);\n\nconst EMPTY_ARRAY = [];\n\nexport const getReusableBlocks = createRegistrySelector(\n\t( select ) => ( state ) => {\n\t\tconst reusableBlocksSelect = state.settings[ reusableBlocksSelectKey ];\n\t\treturn reusableBlocksSelect\n\t\t\t? reusableBlocksSelect( select )\n\t\t\t: state.settings.__experimentalReusableBlocks ?? EMPTY_ARRAY;\n\t}\n);\n\n/**\n * Returns the element of the last element that had focus when focus left the editor canvas.\n *\n * @param {Object} state Block editor state.\n *\n * @return {Object} Element.\n */\nexport function getLastFocus( state ) {\n\treturn state.lastFocus;\n}\n\n/**\n * Returns true if the user is dragging anything, or false otherwise. It is possible for a\n * user to be dragging data from outside of the editor, so this selector is separate from\n * the `isDraggingBlocks` selector which only returns true if the user is dragging blocks.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} Whether user is dragging.\n */\nexport function isDragging( state ) {\n\treturn state.isDragging;\n}\n\n/**\n * Retrieves the expanded block from the state.\n *\n * @param {Object} state Block editor state.\n *\n * @return {string|null} The client ID of the expanded block, if set.\n */\nexport function getExpandedBlock( state ) {\n\treturn state.expandedBlock;\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"a11y\"];","/**\r\n * WordPress dependencies\r\n */\r\nimport { RichTextData } from '@wordpress/rich-text';\r\n\r\n/**\r\n * A robust way to retain selection position through various\r\n * transforms is to insert a special character at the position and\r\n * then recover it.\r\n */\r\nexport const START_OF_SELECTED_AREA = '\\u0086';\r\n\r\n/**\r\n * Retrieve the block attribute that contains the selection position.\r\n *\r\n * @param {Object} blockAttributes Block attributes.\r\n * @return {string|void} The name of the block attribute that was previously selected.\r\n */\r\nexport function retrieveSelectedAttribute( blockAttributes ) {\r\n\tif ( ! blockAttributes ) {\r\n\t\treturn;\r\n\t}\r\n\r\n\treturn Object.keys( blockAttributes ).find( ( name ) => {\r\n\t\tconst value = blockAttributes[ name ];\r\n\t\treturn (\r\n\t\t\t( typeof value === 'string' || value instanceof RichTextData ) &&\r\n\t\t\t// To do: refactor this to use rich text's selection instead, so we\r\n\t\t\t// no longer have to use on this hack inserting a special character.\r\n\t\t\tvalue.toString().indexOf( START_OF_SELECTED_AREA ) !== -1\r\n\t\t);\r\n\t} );\r\n}\r\n","/* eslint no-console: [ 'error', { allow: [ 'error', 'warn' ] } ] */\n/**\n * WordPress dependencies\n */\nimport {\n\tcloneBlock,\n\t__experimentalCloneSanitizedBlock,\n\tcreateBlock,\n\tdoBlocksMatchTemplate,\n\tgetBlockType,\n\tgetDefaultBlockName,\n\thasBlockSupport,\n\tswitchToBlockType,\n\tsynchronizeBlocksWithTemplate,\n\tgetBlockSupport,\n\tisUnmodifiedDefaultBlock,\n} from '@wordpress/blocks';\nimport { speak } from '@wordpress/a11y';\nimport { __, _n, sprintf } from '@wordpress/i18n';\nimport { create, insert, remove, toHTMLString } from '@wordpress/rich-text';\nimport deprecated from '@wordpress/deprecated';\n\n/**\n * Internal dependencies\n */\nimport {\n\tretrieveSelectedAttribute,\n\tSTART_OF_SELECTED_AREA,\n} from '../utils/selection';\nimport {\n\t__experimentalUpdateSettings,\n\tprivateRemoveBlocks,\n} from './private-actions';\n\n/** @typedef {import('../components/use-on-block-drop/types').WPDropOperation} WPDropOperation */\n\nconst castArray = ( maybeArray ) =>\n\tArray.isArray( maybeArray ) ? maybeArray : [ maybeArray ];\n\n/**\n * Action that resets blocks state to the specified array of blocks, taking precedence\n * over any other content reflected as an edit in state.\n *\n * @param {Array} blocks Array of blocks.\n */\nexport const resetBlocks =\n\t( blocks ) =>\n\t( { dispatch } ) => {\n\t\tdispatch( { type: 'RESET_BLOCKS', blocks } );\n\t\tdispatch( validateBlocksToTemplate( blocks ) );\n\t};\n\n/**\n * Block validity is a function of blocks state (at the point of a\n * reset) and the template setting. As a compromise to its placement\n * across distinct parts of state, it is implemented here as a side\n * effect of the block reset action.\n *\n * @param {Array} blocks Array of blocks.\n */\nexport const validateBlocksToTemplate =\n\t( blocks ) =>\n\t( { select, dispatch } ) => {\n\t\tconst template = select.getTemplate();\n\t\tconst templateLock = select.getTemplateLock();\n\n\t\t// Unlocked templates are considered always valid because they act\n\t\t// as default values only.\n\t\tconst isBlocksValidToTemplate =\n\t\t\t! template ||\n\t\t\ttemplateLock !== 'all' ||\n\t\t\tdoBlocksMatchTemplate( blocks, template );\n\n\t\t// Update if validity has changed.\n\t\tconst isValidTemplate = select.isValidTemplate();\n\n\t\tif ( isBlocksValidToTemplate !== isValidTemplate ) {\n\t\t\tdispatch.setTemplateValidity( isBlocksValidToTemplate );\n\t\t\treturn isBlocksValidToTemplate;\n\t\t}\n\t};\n\n/**\n * A block selection object.\n *\n * @typedef {Object} WPBlockSelection\n *\n * @property {string} clientId     A block client ID.\n * @property {string} attributeKey A block attribute key.\n * @property {number} offset       An attribute value offset, based on the rich\n *                                 text value. See `wp.richText.create`.\n */\n\n/**\n * A selection object.\n *\n * @typedef {Object} WPSelection\n *\n * @property {WPBlockSelection} start The selection start.\n * @property {WPBlockSelection} end   The selection end.\n */\n\n/* eslint-disable jsdoc/valid-types */\n/**\n * Returns an action object used in signalling that selection state should be\n * reset to the specified selection.\n *\n * @param {WPBlockSelection} selectionStart  The selection start.\n * @param {WPBlockSelection} selectionEnd    The selection end.\n * @param {0|-1|null}        initialPosition Initial block position.\n *\n * @return {Object} Action object.\n */\nexport function resetSelection(\n\tselectionStart,\n\tselectionEnd,\n\tinitialPosition\n) {\n\t/* eslint-enable jsdoc/valid-types */\n\treturn {\n\t\ttype: 'RESET_SELECTION',\n\t\tselectionStart,\n\t\tselectionEnd,\n\t\tinitialPosition,\n\t};\n}\n\n/**\n * Returns an action object used in signalling that blocks have been received.\n * Unlike resetBlocks, these should be appended to the existing known set, not\n * replacing.\n *\n * @deprecated\n *\n * @param {Object[]} blocks Array of block objects.\n *\n * @return {Object} Action object.\n */\nexport function receiveBlocks( blocks ) {\n\tdeprecated( 'wp.data.dispatch( \"core/block-editor\" ).receiveBlocks', {\n\t\tsince: '5.9',\n\t\talternative: 'resetBlocks or insertBlocks',\n\t} );\n\n\treturn {\n\t\ttype: 'RECEIVE_BLOCKS',\n\t\tblocks,\n\t};\n}\n\n/**\n * Action that updates attributes of multiple blocks with the specified client IDs.\n *\n * @param {string|string[]} clientIds     Block client IDs.\n * @param {Object}          attributes    Block attributes to be merged. Should be keyed by clientIds if\n *                                        uniqueByBlock is true.\n * @param {boolean}         uniqueByBlock true if each block in clientIds array has a unique set of attributes\n * @return {Object} Action object.\n */\nexport function updateBlockAttributes(\n\tclientIds,\n\tattributes,\n\tuniqueByBlock = false\n) {\n\treturn {\n\t\ttype: 'UPDATE_BLOCK_ATTRIBUTES',\n\t\tclientIds: castArray( clientIds ),\n\t\tattributes,\n\t\tuniqueByBlock,\n\t};\n}\n\n/**\n * Action that updates the block with the specified client ID.\n *\n * @param {string} clientId Block client ID.\n * @param {Object} updates  Block attributes to be merged.\n *\n * @return {Object} Action object.\n */\nexport function updateBlock( clientId, updates ) {\n\treturn {\n\t\ttype: 'UPDATE_BLOCK',\n\t\tclientId,\n\t\tupdates,\n\t};\n}\n\n/* eslint-disable jsdoc/valid-types */\n/**\n * Returns an action object used in signalling that the block with the\n * specified client ID has been selected, optionally accepting a position\n * value reflecting its selection directionality. An initialPosition of -1\n * reflects a reverse selection.\n *\n * @param {string}    clientId        Block client ID.\n * @param {0|-1|null} initialPosition Optional initial position. Pass as -1 to\n *                                    reflect reverse selection.\n *\n * @return {Object} Action object.\n */\nexport function selectBlock( clientId, initialPosition = 0 ) {\n\t/* eslint-enable jsdoc/valid-types */\n\treturn {\n\t\ttype: 'SELECT_BLOCK',\n\t\tinitialPosition,\n\t\tclientId,\n\t};\n}\n\n/**\n * Yields action objects used in signalling that the block preceding the given\n * clientId (or optionally, its first parent from bottom to top)\n * should be selected.\n *\n * @param {string}  clientId         Block client ID.\n * @param {boolean} fallbackToParent If true, select the first parent if there is no previous block.\n */\nexport const selectPreviousBlock =\n\t( clientId, fallbackToParent = false ) =>\n\t( { select, dispatch } ) => {\n\t\tconst previousBlockClientId =\n\t\t\tselect.getPreviousBlockClientId( clientId );\n\t\tif ( previousBlockClientId ) {\n\t\t\tdispatch.selectBlock( previousBlockClientId, -1 );\n\t\t} else if ( fallbackToParent ) {\n\t\t\tconst firstParentClientId = select.getBlockRootClientId( clientId );\n\t\t\tif ( firstParentClientId ) {\n\t\t\t\tdispatch.selectBlock( firstParentClientId, -1 );\n\t\t\t}\n\t\t}\n\t};\n\n/**\n * Yields action objects used in signalling that the block following the given\n * clientId should be selected.\n *\n * @param {string} clientId Block client ID.\n */\nexport const selectNextBlock =\n\t( clientId ) =>\n\t( { select, dispatch } ) => {\n\t\tconst nextBlockClientId = select.getNextBlockClientId( clientId );\n\t\tif ( nextBlockClientId ) {\n\t\t\tdispatch.selectBlock( nextBlockClientId );\n\t\t}\n\t};\n\n/**\n * Action that starts block multi-selection.\n *\n * @return {Object} Action object.\n */\nexport function startMultiSelect() {\n\treturn {\n\t\ttype: 'START_MULTI_SELECT',\n\t};\n}\n\n/**\n * Action that stops block multi-selection.\n *\n * @return {Object} Action object.\n */\nexport function stopMultiSelect() {\n\treturn {\n\t\ttype: 'STOP_MULTI_SELECT',\n\t};\n}\n\n/**\n * Action that changes block multi-selection.\n *\n * @param {string}      start                         First block of the multi selection.\n * @param {string}      end                           Last block of the multiselection.\n * @param {number|null} __experimentalInitialPosition Optional initial position. Pass as null to skip focus within editor canvas.\n */\nexport const multiSelect =\n\t( start, end, __experimentalInitialPosition = 0 ) =>\n\t( { select, dispatch } ) => {\n\t\tconst startBlockRootClientId = select.getBlockRootClientId( start );\n\t\tconst endBlockRootClientId = select.getBlockRootClientId( end );\n\n\t\t// Only allow block multi-selections at the same level.\n\t\tif ( startBlockRootClientId !== endBlockRootClientId ) {\n\t\t\treturn;\n\t\t}\n\n\t\tdispatch( {\n\t\t\ttype: 'MULTI_SELECT',\n\t\t\tstart,\n\t\t\tend,\n\t\t\tinitialPosition: __experimentalInitialPosition,\n\t\t} );\n\n\t\tconst blockCount = select.getSelectedBlockCount();\n\n\t\tspeak(\n\t\t\tsprintf(\n\t\t\t\t/* translators: %s: number of selected blocks */\n\t\t\t\t_n( '%s block selected.', '%s blocks selected.', blockCount ),\n\t\t\t\tblockCount\n\t\t\t),\n\t\t\t'assertive'\n\t\t);\n\t};\n\n/**\n * Action that clears the block selection.\n *\n * @return {Object} Action object.\n */\nexport function clearSelectedBlock() {\n\treturn {\n\t\ttype: 'CLEAR_SELECTED_BLOCK',\n\t};\n}\n\n/**\n * Action that enables or disables block selection.\n *\n * @param {boolean} [isSelectionEnabled=true] Whether block selection should\n *                                            be enabled.\n *\n * @return {Object} Action object.\n */\nexport function toggleSelection( isSelectionEnabled = true ) {\n\treturn {\n\t\ttype: 'TOGGLE_SELECTION',\n\t\tisSelectionEnabled,\n\t};\n}\n\n/* eslint-disable jsdoc/valid-types */\n/**\n * Action that replaces given blocks with one or more replacement blocks.\n *\n * @param {(string|string[])} clientIds       Block client ID(s) to replace.\n * @param {(Object|Object[])} blocks          Replacement block(s).\n * @param {number}            indexToSelect   Index of replacement block to select.\n * @param {0|-1|null}         initialPosition Index of caret after in the selected block after the operation.\n * @param {?Object}           meta            Optional Meta values to be passed to the action object.\n *\n * @return {Object} Action object.\n */\nexport const replaceBlocks =\n\t( clientIds, blocks, indexToSelect, initialPosition = 0, meta ) =>\n\t( { select, dispatch, registry } ) => {\n\t\t/* eslint-enable jsdoc/valid-types */\n\t\tclientIds = castArray( clientIds );\n\t\tblocks = castArray( blocks );\n\t\tconst rootClientId = select.getBlockRootClientId( clientIds[ 0 ] );\n\t\t// Replace is valid if the new blocks can be inserted in the root block.\n\t\tfor ( let index = 0; index < blocks.length; index++ ) {\n\t\t\tconst block = blocks[ index ];\n\t\t\tconst canInsertBlock = select.canInsertBlockType(\n\t\t\t\tblock.name,\n\t\t\t\trootClientId\n\t\t\t);\n\t\t\tif ( ! canInsertBlock ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\t// We're batching these two actions because an extra `undo/redo` step can\n\t\t// be created, based on whether we insert a default block or not.\n\t\tregistry.batch( () => {\n\t\t\tdispatch( {\n\t\t\t\ttype: 'REPLACE_BLOCKS',\n\t\t\t\tclientIds,\n\t\t\t\tblocks,\n\t\t\t\ttime: Date.now(),\n\t\t\t\tindexToSelect,\n\t\t\t\tinitialPosition,\n\t\t\t\tmeta,\n\t\t\t} );\n\t\t\t// To avoid a focus loss when removing the last block, assure there is\n\t\t\t// always a default block if the last of the blocks have been removed.\n\t\t\tdispatch.ensureDefaultBlock();\n\t\t} );\n\t};\n\n/**\n * Action that replaces a single block with one or more replacement blocks.\n *\n * @param {(string|string[])} clientId Block client ID to replace.\n * @param {(Object|Object[])} block    Replacement block(s).\n *\n * @return {Object} Action object.\n */\nexport function replaceBlock( clientId, block ) {\n\treturn replaceBlocks( clientId, block );\n}\n\n/**\n * Higher-order action creator which, given the action type to dispatch creates\n * an action creator for managing block movement.\n *\n * @param {string} type Action type to dispatch.\n *\n * @return {Function} Action creator.\n */\nconst createOnMove =\n\t( type ) =>\n\t( clientIds, rootClientId ) =>\n\t( { select, dispatch } ) => {\n\t\t// If one of the blocks is locked or the parent is locked, we cannot move any block.\n\t\tconst canMoveBlocks = select.canMoveBlocks( clientIds, rootClientId );\n\t\tif ( ! canMoveBlocks ) {\n\t\t\treturn;\n\t\t}\n\n\t\tdispatch( { type, clientIds: castArray( clientIds ), rootClientId } );\n\t};\n\nexport const moveBlocksDown = createOnMove( 'MOVE_BLOCKS_DOWN' );\nexport const moveBlocksUp = createOnMove( 'MOVE_BLOCKS_UP' );\n\n/**\n * Action that moves given blocks to a new position.\n *\n * @param {?string} clientIds        The client IDs of the blocks.\n * @param {?string} fromRootClientId Root client ID source.\n * @param {?string} toRootClientId   Root client ID destination.\n * @param {number}  index            The index to move the blocks to.\n */\nexport const moveBlocksToPosition =\n\t( clientIds, fromRootClientId = '', toRootClientId = '', index ) =>\n\t( { select, dispatch } ) => {\n\t\tconst canMoveBlocks = select.canMoveBlocks(\n\t\t\tclientIds,\n\t\t\tfromRootClientId\n\t\t);\n\n\t\t// If one of the blocks is locked or the parent is locked, we cannot move any block.\n\t\tif ( ! canMoveBlocks ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If moving inside the same root block the move is always possible.\n\t\tif ( fromRootClientId !== toRootClientId ) {\n\t\t\tconst canRemoveBlocks = select.canRemoveBlocks(\n\t\t\t\tclientIds,\n\t\t\t\tfromRootClientId\n\t\t\t);\n\n\t\t\t// If we're moving to another block, it means we're deleting blocks from\n\t\t\t// the original block, so we need to check if removing is possible.\n\t\t\tif ( ! canRemoveBlocks ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst canInsertBlocks = select.canInsertBlocks(\n\t\t\t\tclientIds,\n\t\t\t\ttoRootClientId\n\t\t\t);\n\n\t\t\t// If moving to other parent block, the move is possible if we can insert a block of the same type inside the new parent block.\n\t\t\tif ( ! canInsertBlocks ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tdispatch( {\n\t\t\ttype: 'MOVE_BLOCKS_TO_POSITION',\n\t\t\tfromRootClientId,\n\t\t\ttoRootClientId,\n\t\t\tclientIds,\n\t\t\tindex,\n\t\t} );\n\t};\n\n/**\n * Action that moves given block to a new position.\n *\n * @param {?string} clientId         The client ID of the block.\n * @param {?string} fromRootClientId Root client ID source.\n * @param {?string} toRootClientId   Root client ID destination.\n * @param {number}  index            The index to move the block to.\n */\nexport function moveBlockToPosition(\n\tclientId,\n\tfromRootClientId = '',\n\ttoRootClientId = '',\n\tindex\n) {\n\treturn moveBlocksToPosition(\n\t\t[ clientId ],\n\t\tfromRootClientId,\n\t\ttoRootClientId,\n\t\tindex\n\t);\n}\n\n/**\n * Action that inserts a single block, optionally at a specific index respective a root block list.\n *\n * Only allowed blocks are inserted. The action may fail silently for blocks that are not allowed or if\n * a templateLock is active on the block list.\n *\n * @param {Object}   block           Block object to insert.\n * @param {?number}  index           Index at which block should be inserted.\n * @param {?string}  rootClientId    Optional root client ID of block list on which to insert.\n * @param {?boolean} updateSelection If true block selection will be updated. If false, block selection will not change. Defaults to true.\n * @param {?Object}  meta            Optional Meta values to be passed to the action object.\n *\n * @return {Object} Action object.\n */\nexport function insertBlock(\n\tblock,\n\tindex,\n\trootClientId,\n\tupdateSelection,\n\tmeta\n) {\n\treturn insertBlocks(\n\t\t[ block ],\n\t\tindex,\n\t\trootClientId,\n\t\tupdateSelection,\n\t\t0,\n\t\tmeta\n\t);\n}\n\n/* eslint-disable jsdoc/valid-types */\n/**\n * Action that inserts an array of blocks, optionally at a specific index respective a root block list.\n *\n * Only allowed blocks are inserted. The action may fail silently for blocks that are not allowed or if\n * a templateLock is active on the block list.\n *\n * @param {Object[]}  blocks          Block objects to insert.\n * @param {?number}   index           Index at which block should be inserted.\n * @param {?string}   rootClientId    Optional root client ID of block list on which to insert.\n * @param {?boolean}  updateSelection If true block selection will be updated.  If false, block selection will not change. Defaults to true.\n * @param {0|-1|null} initialPosition Initial focus position. Setting it to null prevent focusing the inserted block.\n * @param {?Object}   meta            Optional Meta values to be passed to the action object.\n *\n * @return {Object} Action object.\n */\nexport const insertBlocks =\n\t(\n\t\tblocks,\n\t\tindex,\n\t\trootClientId,\n\t\tupdateSelection = true,\n\t\tinitialPosition = 0,\n\t\tmeta\n\t) =>\n\t( { select, dispatch } ) => {\n\t\t/* eslint-enable jsdoc/valid-types */\n\t\tif ( initialPosition !== null && typeof initialPosition === 'object' ) {\n\t\t\tmeta = initialPosition;\n\t\t\tinitialPosition = 0;\n\t\t\tdeprecated(\n\t\t\t\t\"meta argument in wp.data.dispatch('core/block-editor')\",\n\t\t\t\t{\n\t\t\t\t\tsince: '5.8',\n\t\t\t\t\thint: 'The meta argument is now the 6th argument of the function',\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tblocks = castArray( blocks );\n\t\tconst allowedBlocks = [];\n\t\tfor ( const block of blocks ) {\n\t\t\tconst isValid = select.canInsertBlockType(\n\t\t\t\tblock.name,\n\t\t\t\trootClientId\n\t\t\t);\n\t\t\tif ( isValid ) {\n\t\t\t\tallowedBlocks.push( block );\n\t\t\t}\n\t\t}\n\t\tif ( allowedBlocks.length ) {\n\t\t\tdispatch( {\n\t\t\t\ttype: 'INSERT_BLOCKS',\n\t\t\t\tblocks: allowedBlocks,\n\t\t\t\tindex,\n\t\t\t\trootClientId,\n\t\t\t\ttime: Date.now(),\n\t\t\t\tupdateSelection,\n\t\t\t\tinitialPosition: updateSelection ? initialPosition : null,\n\t\t\t\tmeta,\n\t\t\t} );\n\t\t}\n\t};\n\n/**\n * Action that shows the insertion point.\n *\n * @param    {?string}         rootClientId           Optional root client ID of block list on\n *                                                    which to insert.\n * @param    {?number}         index                  Index at which block should be inserted.\n * @param    {?Object}         __unstableOptions      Additional options.\n * @property {boolean}         __unstableWithInserter Whether or not to show an inserter button.\n * @property {WPDropOperation} operation              The operation to perform when applied,\n *                                                    either 'insert' or 'replace' for now.\n *\n * @return {Object} Action object.\n */\nexport function showInsertionPoint(\n\trootClientId,\n\tindex,\n\t__unstableOptions = {}\n) {\n\tconst { __unstableWithInserter, operation, nearestSide } =\n\t\t__unstableOptions;\n\treturn {\n\t\ttype: 'SHOW_INSERTION_POINT',\n\t\trootClientId,\n\t\tindex,\n\t\t__unstableWithInserter,\n\t\toperation,\n\t\tnearestSide,\n\t};\n}\n/**\n * Action that hides the insertion point.\n */\nexport const hideInsertionPoint =\n\t() =>\n\t( { select, dispatch } ) => {\n\t\tif ( ! select.isBlockInsertionPointVisible() ) {\n\t\t\treturn;\n\t\t}\n\t\tdispatch( {\n\t\t\ttype: 'HIDE_INSERTION_POINT',\n\t\t} );\n\t};\n\n/**\n * Action that resets the template validity.\n *\n * @param {boolean} isValid template validity flag.\n *\n * @return {Object} Action object.\n */\nexport function setTemplateValidity( isValid ) {\n\treturn {\n\t\ttype: 'SET_TEMPLATE_VALIDITY',\n\t\tisValid,\n\t};\n}\n\n/**\n * Action that synchronizes the template with the list of blocks.\n *\n * @return {Object} Action object.\n */\nexport const synchronizeTemplate =\n\t() =>\n\t( { select, dispatch } ) => {\n\t\tdispatch( { type: 'SYNCHRONIZE_TEMPLATE' } );\n\t\tconst blocks = select.getBlocks();\n\t\tconst template = select.getTemplate();\n\t\tconst updatedBlockList = synchronizeBlocksWithTemplate(\n\t\t\tblocks,\n\t\t\ttemplate\n\t\t);\n\n\t\tdispatch.resetBlocks( updatedBlockList );\n\t};\n\n/**\n * Delete the current selection.\n *\n * @param {boolean} isForward\n */\nexport const __unstableDeleteSelection =\n\t( isForward ) =>\n\t( { registry, select, dispatch } ) => {\n\t\tconst selectionAnchor = select.getSelectionStart();\n\t\tconst selectionFocus = select.getSelectionEnd();\n\n\t\tif ( selectionAnchor.clientId === selectionFocus.clientId ) return;\n\n\t\t// It's not mergeable if there's no rich text selection.\n\t\tif (\n\t\t\t! selectionAnchor.attributeKey ||\n\t\t\t! selectionFocus.attributeKey ||\n\t\t\ttypeof selectionAnchor.offset === 'undefined' ||\n\t\t\ttypeof selectionFocus.offset === 'undefined'\n\t\t)\n\t\t\treturn false;\n\n\t\tconst anchorRootClientId = select.getBlockRootClientId(\n\t\t\tselectionAnchor.clientId\n\t\t);\n\t\tconst focusRootClientId = select.getBlockRootClientId(\n\t\t\tselectionFocus.clientId\n\t\t);\n\n\t\t// It's not mergeable if the selection doesn't start and end in the same\n\t\t// block list. Maybe in the future it should be allowed.\n\t\tif ( anchorRootClientId !== focusRootClientId ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst blockOrder = select.getBlockOrder( anchorRootClientId );\n\t\tconst anchorIndex = blockOrder.indexOf( selectionAnchor.clientId );\n\t\tconst focusIndex = blockOrder.indexOf( selectionFocus.clientId );\n\n\t\t// Reassign selection start and end based on order.\n\t\tlet selectionStart, selectionEnd;\n\n\t\tif ( anchorIndex > focusIndex ) {\n\t\t\tselectionStart = selectionFocus;\n\t\t\tselectionEnd = selectionAnchor;\n\t\t} else {\n\t\t\tselectionStart = selectionAnchor;\n\t\t\tselectionEnd = selectionFocus;\n\t\t}\n\n\t\tconst targetSelection = isForward ? selectionEnd : selectionStart;\n\t\tconst targetBlock = select.getBlock( targetSelection.clientId );\n\t\tconst targetBlockType = getBlockType( targetBlock.name );\n\n\t\tif ( ! targetBlockType.merge ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst selectionA = selectionStart;\n\t\tconst selectionB = selectionEnd;\n\n\t\tconst blockA = select.getBlock( selectionA.clientId );\n\t\tconst blockB = select.getBlock( selectionB.clientId );\n\n\t\tconst htmlA = blockA.attributes[ selectionA.attributeKey ];\n\t\tconst htmlB = blockB.attributes[ selectionB.attributeKey ];\n\n\t\tlet valueA = create( { html: htmlA } );\n\t\tlet valueB = create( { html: htmlB } );\n\n\t\tvalueA = remove( valueA, selectionA.offset, valueA.text.length );\n\t\tvalueB = insert( valueB, START_OF_SELECTED_AREA, 0, selectionB.offset );\n\n\t\t// Clone the blocks so we don't manipulate the original.\n\t\tconst cloneA = cloneBlock( blockA, {\n\t\t\t[ selectionA.attributeKey ]: toHTMLString( { value: valueA } ),\n\t\t} );\n\t\tconst cloneB = cloneBlock( blockB, {\n\t\t\t[ selectionB.attributeKey ]: toHTMLString( { value: valueB } ),\n\t\t} );\n\n\t\tconst followingBlock = isForward ? cloneA : cloneB;\n\n\t\t// We can only merge blocks with similar types\n\t\t// thus, we transform the block to merge first\n\t\tconst blocksWithTheSameType =\n\t\t\tblockA.name === blockB.name\n\t\t\t\t? [ followingBlock ]\n\t\t\t\t: switchToBlockType( followingBlock, targetBlockType.name );\n\n\t\t// If the block types can not match, do nothing\n\t\tif ( ! blocksWithTheSameType || ! blocksWithTheSameType.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet updatedAttributes;\n\n\t\tif ( isForward ) {\n\t\t\tconst blockToMerge = blocksWithTheSameType.pop();\n\t\t\tupdatedAttributes = targetBlockType.merge(\n\t\t\t\tblockToMerge.attributes,\n\t\t\t\tcloneB.attributes\n\t\t\t);\n\t\t} else {\n\t\t\tconst blockToMerge = blocksWithTheSameType.shift();\n\t\t\tupdatedAttributes = targetBlockType.merge(\n\t\t\t\tcloneA.attributes,\n\t\t\t\tblockToMerge.attributes\n\t\t\t);\n\t\t}\n\n\t\tconst newAttributeKey = retrieveSelectedAttribute( updatedAttributes );\n\n\t\tconst convertedHtml = updatedAttributes[ newAttributeKey ];\n\t\tconst convertedValue = create( { html: convertedHtml } );\n\t\tconst newOffset = convertedValue.text.indexOf( START_OF_SELECTED_AREA );\n\t\tconst newValue = remove( convertedValue, newOffset, newOffset + 1 );\n\t\tconst newHtml = toHTMLString( { value: newValue } );\n\n\t\tupdatedAttributes[ newAttributeKey ] = newHtml;\n\n\t\tconst selectedBlockClientIds = select.getSelectedBlockClientIds();\n\t\tconst replacement = [\n\t\t\t...( isForward ? blocksWithTheSameType : [] ),\n\t\t\t{\n\t\t\t\t// Preserve the original client ID.\n\t\t\t\t...targetBlock,\n\t\t\t\tattributes: {\n\t\t\t\t\t...targetBlock.attributes,\n\t\t\t\t\t...updatedAttributes,\n\t\t\t\t},\n\t\t\t},\n\t\t\t...( isForward ? [] : blocksWithTheSameType ),\n\t\t];\n\n\t\tregistry.batch( () => {\n\t\t\tdispatch.selectionChange(\n\t\t\t\ttargetBlock.clientId,\n\t\t\t\tnewAttributeKey,\n\t\t\t\tnewOffset,\n\t\t\t\tnewOffset\n\t\t\t);\n\n\t\t\tdispatch.replaceBlocks(\n\t\t\t\tselectedBlockClientIds,\n\t\t\t\treplacement,\n\t\t\t\t0, // If we don't pass the `indexToSelect` it will default to the last block.\n\t\t\t\tselect.getSelectedBlocksInitialCaretPosition()\n\t\t\t);\n\t\t} );\n\t};\n\n/**\n * Split the current selection.\n */\nexport const __unstableSplitSelection =\n\t() =>\n\t( { select, dispatch } ) => {\n\t\tconst selectionAnchor = select.getSelectionStart();\n\t\tconst selectionFocus = select.getSelectionEnd();\n\n\t\tif ( selectionAnchor.clientId === selectionFocus.clientId ) return;\n\n\t\t// Can't split if the selection is not set.\n\t\tif (\n\t\t\t! selectionAnchor.attributeKey ||\n\t\t\t! selectionFocus.attributeKey ||\n\t\t\ttypeof selectionAnchor.offset === 'undefined' ||\n\t\t\ttypeof selectionFocus.offset === 'undefined'\n\t\t)\n\t\t\treturn;\n\n\t\tconst anchorRootClientId = select.getBlockRootClientId(\n\t\t\tselectionAnchor.clientId\n\t\t);\n\t\tconst focusRootClientId = select.getBlockRootClientId(\n\t\t\tselectionFocus.clientId\n\t\t);\n\n\t\t// It's not splittable if the selection doesn't start and end in the same\n\t\t// block list. Maybe in the future it should be allowed.\n\t\tif ( anchorRootClientId !== focusRootClientId ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst blockOrder = select.getBlockOrder( anchorRootClientId );\n\t\tconst anchorIndex = blockOrder.indexOf( selectionAnchor.clientId );\n\t\tconst focusIndex = blockOrder.indexOf( selectionFocus.clientId );\n\n\t\t// Reassign selection start and end based on order.\n\t\tlet selectionStart, selectionEnd;\n\n\t\tif ( anchorIndex > focusIndex ) {\n\t\t\tselectionStart = selectionFocus;\n\t\t\tselectionEnd = selectionAnchor;\n\t\t} else {\n\t\t\tselectionStart = selectionAnchor;\n\t\t\tselectionEnd = selectionFocus;\n\t\t}\n\n\t\tconst selectionA = selectionStart;\n\t\tconst selectionB = selectionEnd;\n\n\t\tconst blockA = select.getBlock( selectionA.clientId );\n\t\tconst blockB = select.getBlock( selectionB.clientId );\n\n\t\tconst htmlA = blockA.attributes[ selectionA.attributeKey ];\n\t\tconst htmlB = blockB.attributes[ selectionB.attributeKey ];\n\n\t\tlet valueA = create( { html: htmlA } );\n\t\tlet valueB = create( { html: htmlB } );\n\n\t\tvalueA = remove( valueA, selectionA.offset, valueA.text.length );\n\t\tvalueB = remove( valueB, 0, selectionB.offset );\n\n\t\tdispatch.replaceBlocks( select.getSelectedBlockClientIds(), [\n\t\t\t{\n\t\t\t\t// Preserve the original client ID.\n\t\t\t\t...blockA,\n\t\t\t\tattributes: {\n\t\t\t\t\t...blockA.attributes,\n\t\t\t\t\t[ selectionA.attributeKey ]: toHTMLString( {\n\t\t\t\t\t\tvalue: valueA,\n\t\t\t\t\t} ),\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\t// Preserve the original client ID.\n\t\t\t\t...blockB,\n\t\t\t\tattributes: {\n\t\t\t\t\t...blockB.attributes,\n\t\t\t\t\t[ selectionB.attributeKey ]: toHTMLString( {\n\t\t\t\t\t\tvalue: valueB,\n\t\t\t\t\t} ),\n\t\t\t\t},\n\t\t\t},\n\t\t] );\n\t};\n\n/**\n * Expand the selection to cover the entire blocks, removing partial selection.\n */\nexport const __unstableExpandSelection =\n\t() =>\n\t( { select, dispatch } ) => {\n\t\tconst selectionAnchor = select.getSelectionStart();\n\t\tconst selectionFocus = select.getSelectionEnd();\n\t\tdispatch.selectionChange( {\n\t\t\tstart: { clientId: selectionAnchor.clientId },\n\t\t\tend: { clientId: selectionFocus.clientId },\n\t\t} );\n\t};\n\n/**\n * Action that merges two blocks.\n *\n * @param {string} firstBlockClientId  Client ID of the first block to merge.\n * @param {string} secondBlockClientId Client ID of the second block to merge.\n */\nexport const mergeBlocks =\n\t( firstBlockClientId, secondBlockClientId ) =>\n\t( { registry, select, dispatch } ) => {\n\t\tconst clientIdA = firstBlockClientId;\n\t\tconst clientIdB = secondBlockClientId;\n\t\tconst blockA = select.getBlock( clientIdA );\n\t\tconst blockAType = getBlockType( blockA.name );\n\n\t\tif ( ! blockAType ) return;\n\n\t\tconst blockB = select.getBlock( clientIdB );\n\n\t\tif (\n\t\t\t! blockAType.merge &&\n\t\t\tgetBlockSupport( blockA.name, '__experimentalOnMerge' )\n\t\t) {\n\t\t\t// If there's no merge function defined, attempt merging inner\n\t\t\t// blocks.\n\t\t\tconst blocksWithTheSameType = switchToBlockType(\n\t\t\t\tblockB,\n\t\t\t\tblockAType.name\n\t\t\t);\n\t\t\t// Only focus the previous block if it's not mergeable.\n\t\t\tif ( blocksWithTheSameType?.length !== 1 ) {\n\t\t\t\tdispatch.selectBlock( blockA.clientId );\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst [ blockWithSameType ] = blocksWithTheSameType;\n\t\t\tif ( blockWithSameType.innerBlocks.length < 1 ) {\n\t\t\t\tdispatch.selectBlock( blockA.clientId );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tregistry.batch( () => {\n\t\t\t\tdispatch.insertBlocks(\n\t\t\t\t\tblockWithSameType.innerBlocks,\n\t\t\t\t\tundefined,\n\t\t\t\t\tclientIdA\n\t\t\t\t);\n\t\t\t\tdispatch.removeBlock( clientIdB );\n\t\t\t\tdispatch.selectBlock(\n\t\t\t\t\tblockWithSameType.innerBlocks[ 0 ].clientId\n\t\t\t\t);\n\n\t\t\t\t// Attempt to merge the next block if it's the same type and\n\t\t\t\t// same attributes. This is useful when merging a paragraph into\n\t\t\t\t// a list, and the next block is also a list. If we don't merge,\n\t\t\t\t// it looks like one list, but it's actually two lists. The same\n\t\t\t\t// applies to other blocks such as a group with the same\n\t\t\t\t// attributes.\n\t\t\t\tconst nextBlockClientId =\n\t\t\t\t\tselect.getNextBlockClientId( clientIdA );\n\n\t\t\t\tif (\n\t\t\t\t\tnextBlockClientId &&\n\t\t\t\t\tselect.getBlockName( clientIdA ) ===\n\t\t\t\t\t\tselect.getBlockName( nextBlockClientId )\n\t\t\t\t) {\n\t\t\t\t\tconst rootAttributes =\n\t\t\t\t\t\tselect.getBlockAttributes( clientIdA );\n\t\t\t\t\tconst previousRootAttributes =\n\t\t\t\t\t\tselect.getBlockAttributes( nextBlockClientId );\n\n\t\t\t\t\tif (\n\t\t\t\t\t\tObject.keys( rootAttributes ).every(\n\t\t\t\t\t\t\t( key ) =>\n\t\t\t\t\t\t\t\trootAttributes[ key ] ===\n\t\t\t\t\t\t\t\tpreviousRootAttributes[ key ]\n\t\t\t\t\t\t)\n\t\t\t\t\t) {\n\t\t\t\t\t\tdispatch.moveBlocksToPosition(\n\t\t\t\t\t\t\tselect.getBlockOrder( nextBlockClientId ),\n\t\t\t\t\t\t\tnextBlockClientId,\n\t\t\t\t\t\t\tclientIdA\n\t\t\t\t\t\t);\n\t\t\t\t\t\tdispatch.removeBlock( nextBlockClientId, false );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\t\t\treturn;\n\t\t}\n\n\t\tif ( isUnmodifiedDefaultBlock( blockA ) ) {\n\t\t\tdispatch.removeBlock(\n\t\t\t\tclientIdA,\n\t\t\t\tselect.isBlockSelected( clientIdA )\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\tif ( isUnmodifiedDefaultBlock( blockB ) ) {\n\t\t\tdispatch.removeBlock(\n\t\t\t\tclientIdB,\n\t\t\t\tselect.isBlockSelected( clientIdB )\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\tif ( ! blockAType.merge ) {\n\t\t\tdispatch.selectBlock( blockA.clientId );\n\t\t\treturn;\n\t\t}\n\n\t\tconst blockBType = getBlockType( blockB.name );\n\t\tconst { clientId, attributeKey, offset } = select.getSelectionStart();\n\t\tconst selectedBlockType =\n\t\t\tclientId === clientIdA ? blockAType : blockBType;\n\t\tconst attributeDefinition =\n\t\t\tselectedBlockType.attributes[ attributeKey ];\n\t\tconst canRestoreTextSelection =\n\t\t\t( clientId === clientIdA || clientId === clientIdB ) &&\n\t\t\tattributeKey !== undefined &&\n\t\t\toffset !== undefined &&\n\t\t\t// We cannot restore text selection if the RichText identifier\n\t\t\t// is not a defined block attribute key. This can be the case if the\n\t\t\t// fallback intance ID is used to store selection (and no RichText\n\t\t\t// identifier is set), or when the identifier is wrong.\n\t\t\t!! attributeDefinition;\n\n\t\tif ( ! attributeDefinition ) {\n\t\t\tif ( typeof attributeKey === 'number' ) {\n\t\t\t\twindow.console.error(\n\t\t\t\t\t`RichText needs an identifier prop that is the block attribute key of the attribute it controls. Its type is expected to be a string, but was ${ typeof attributeKey }`\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\twindow.console.error(\n\t\t\t\t\t'The RichText identifier prop does not match any attributes defined by the block.'\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\t// Clone the blocks so we don't insert the character in a \"live\" block.\n\t\tconst cloneA = cloneBlock( blockA );\n\t\tconst cloneB = cloneBlock( blockB );\n\n\t\tif ( canRestoreTextSelection ) {\n\t\t\tconst selectedBlock = clientId === clientIdA ? cloneA : cloneB;\n\t\t\tconst html = selectedBlock.attributes[ attributeKey ];\n\t\t\tconst value = insert(\n\t\t\t\tcreate( { html } ),\n\t\t\t\tSTART_OF_SELECTED_AREA,\n\t\t\t\toffset,\n\t\t\t\toffset\n\t\t\t);\n\n\t\t\tselectedBlock.attributes[ attributeKey ] = toHTMLString( {\n\t\t\t\tvalue,\n\t\t\t} );\n\t\t}\n\n\t\t// We can only merge blocks with similar types\n\t\t// thus, we transform the block to merge first.\n\t\tconst blocksWithTheSameType =\n\t\t\tblockA.name === blockB.name\n\t\t\t\t? [ cloneB ]\n\t\t\t\t: switchToBlockType( cloneB, blockA.name );\n\n\t\t// If the block types can not match, do nothing.\n\t\tif ( ! blocksWithTheSameType || ! blocksWithTheSameType.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Calling the merge to update the attributes and remove the block to be merged.\n\t\tconst updatedAttributes = blockAType.merge(\n\t\t\tcloneA.attributes,\n\t\t\tblocksWithTheSameType[ 0 ].attributes\n\t\t);\n\n\t\tif ( canRestoreTextSelection ) {\n\t\t\tconst newAttributeKey =\n\t\t\t\tretrieveSelectedAttribute( updatedAttributes );\n\t\t\tconst convertedHtml = updatedAttributes[ newAttributeKey ];\n\t\t\tconst convertedValue = create( { html: convertedHtml } );\n\t\t\tconst newOffset = convertedValue.text.indexOf(\n\t\t\t\tSTART_OF_SELECTED_AREA\n\t\t\t);\n\t\t\tconst newValue = remove( convertedValue, newOffset, newOffset + 1 );\n\t\t\tconst newHtml = toHTMLString( { value: newValue } );\n\n\t\t\tupdatedAttributes[ newAttributeKey ] = newHtml;\n\n\t\t\tdispatch.selectionChange(\n\t\t\t\tblockA.clientId,\n\t\t\t\tnewAttributeKey,\n\t\t\t\tnewOffset,\n\t\t\t\tnewOffset\n\t\t\t);\n\t\t}\n\n\t\tdispatch.replaceBlocks(\n\t\t\t[ blockA.clientId, blockB.clientId ],\n\t\t\t[\n\t\t\t\t{\n\t\t\t\t\t...blockA,\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\t...blockA.attributes,\n\t\t\t\t\t\t...updatedAttributes,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t...blocksWithTheSameType.slice( 1 ),\n\t\t\t],\n\t\t\t0 // If we don't pass the `indexToSelect` it will default to the last block.\n\t\t);\n\t};\n\n/**\n * Yields action objects used in signalling that the blocks corresponding to\n * the set of specified client IDs are to be removed.\n *\n * @param {string|string[]} clientIds      Client IDs of blocks to remove.\n * @param {boolean}         selectPrevious True if the previous block\n *                                         or the immediate parent\n *                                         (if no previous block exists)\n *                                         should be selected\n *                                         when a block is removed.\n */\nexport const removeBlocks = ( clientIds, selectPrevious = true ) =>\n\tprivateRemoveBlocks( clientIds, selectPrevious );\n\n/**\n * Returns an action object used in signalling that the block with the\n * specified client ID is to be removed.\n *\n * @param {string}  clientId       Client ID of block to remove.\n * @param {boolean} selectPrevious True if the previous block should be\n *                                 selected when a block is removed.\n *\n * @return {Object} Action object.\n */\nexport function removeBlock( clientId, selectPrevious ) {\n\treturn removeBlocks( [ clientId ], selectPrevious );\n}\n\n/* eslint-disable jsdoc/valid-types */\n/**\n * Returns an action object used in signalling that the inner blocks with the\n * specified client ID should be replaced.\n *\n * @param {string}    rootClientId    Client ID of the block whose InnerBlocks will re replaced.\n * @param {Object[]}  blocks          Block objects to insert as new InnerBlocks\n * @param {?boolean}  updateSelection If true block selection will be updated. If false, block selection will not change. Defaults to false.\n * @param {0|-1|null} initialPosition Initial block position.\n * @return {Object} Action object.\n */\nexport function replaceInnerBlocks(\n\trootClientId,\n\tblocks,\n\tupdateSelection = false,\n\tinitialPosition = 0\n) {\n\t/* eslint-enable jsdoc/valid-types */\n\treturn {\n\t\ttype: 'REPLACE_INNER_BLOCKS',\n\t\trootClientId,\n\t\tblocks,\n\t\tupdateSelection,\n\t\tinitialPosition: updateSelection ? initialPosition : null,\n\t\ttime: Date.now(),\n\t};\n}\n\n/**\n * Returns an action object used to toggle the block editing mode between\n * visual and HTML modes.\n *\n * @param {string} clientId Block client ID.\n *\n * @return {Object} Action object.\n */\nexport function toggleBlockMode( clientId ) {\n\treturn {\n\t\ttype: 'TOGGLE_BLOCK_MODE',\n\t\tclientId,\n\t};\n}\n\n/**\n * Returns an action object used in signalling that the user has begun to type.\n *\n * @return {Object} Action object.\n */\nexport function startTyping() {\n\treturn {\n\t\ttype: 'START_TYPING',\n\t};\n}\n\n/**\n * Returns an action object used in signalling that the user has stopped typing.\n *\n * @return {Object} Action object.\n */\nexport function stopTyping() {\n\treturn {\n\t\ttype: 'STOP_TYPING',\n\t};\n}\n\n/**\n * Returns an action object used in signalling that the user has begun to drag blocks.\n *\n * @param {string[]} clientIds An array of client ids being dragged\n *\n * @return {Object} Action object.\n */\nexport function startDraggingBlocks( clientIds = [] ) {\n\treturn {\n\t\ttype: 'START_DRAGGING_BLOCKS',\n\t\tclientIds,\n\t};\n}\n\n/**\n * Returns an action object used in signalling that the user has stopped dragging blocks.\n *\n * @return {Object} Action object.\n */\nexport function stopDraggingBlocks() {\n\treturn {\n\t\ttype: 'STOP_DRAGGING_BLOCKS',\n\t};\n}\n\n/**\n * Returns an action object used in signalling that the caret has entered formatted text.\n *\n * @deprecated\n *\n * @return {Object} Action object.\n */\nexport function enterFormattedText() {\n\tdeprecated( 'wp.data.dispatch( \"core/block-editor\" ).enterFormattedText', {\n\t\tsince: '6.1',\n\t\tversion: '6.3',\n\t} );\n\treturn {\n\t\ttype: 'DO_NOTHING',\n\t};\n}\n\n/**\n * Returns an action object used in signalling that the user caret has exited formatted text.\n *\n * @deprecated\n *\n * @return {Object} Action object.\n */\nexport function exitFormattedText() {\n\tdeprecated( 'wp.data.dispatch( \"core/block-editor\" ).exitFormattedText', {\n\t\tsince: '6.1',\n\t\tversion: '6.3',\n\t} );\n\treturn {\n\t\ttype: 'DO_NOTHING',\n\t};\n}\n\n/**\n * Action that changes the position of the user caret.\n *\n * @param {string|WPSelection} clientId     The selected block client ID.\n * @param {string}             attributeKey The selected block attribute key.\n * @param {number}             startOffset  The start offset.\n * @param {number}             endOffset    The end offset.\n *\n * @return {Object} Action object.\n */\nexport function selectionChange(\n\tclientId,\n\tattributeKey,\n\tstartOffset,\n\tendOffset\n) {\n\tif ( typeof clientId === 'string' ) {\n\t\treturn {\n\t\t\ttype: 'SELECTION_CHANGE',\n\t\t\tclientId,\n\t\t\tattributeKey,\n\t\t\tstartOffset,\n\t\t\tendOffset,\n\t\t};\n\t}\n\n\treturn { type: 'SELECTION_CHANGE', ...clientId };\n}\n\n/**\n * Action that adds a new block of the default type to the block list.\n *\n * @param {?Object} attributes   Optional attributes of the block to assign.\n * @param {?string} rootClientId Optional root client ID of block list on which\n *                               to append.\n * @param {?number} index        Optional index where to insert the default block.\n */\nexport const insertDefaultBlock =\n\t( attributes, rootClientId, index ) =>\n\t( { dispatch } ) => {\n\t\t// Abort if there is no default block type (if it has been unregistered).\n\t\tconst defaultBlockName = getDefaultBlockName();\n\t\tif ( ! defaultBlockName ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst block = createBlock( defaultBlockName, attributes );\n\n\t\treturn dispatch.insertBlock( block, index, rootClientId );\n\t};\n\n/**\n * Action that changes the nested settings of a given block.\n *\n * @param {string} clientId Client ID of the block whose nested setting are\n *                          being received.\n * @param {Object} settings Object with the new settings for the nested block.\n *\n * @return {Object} Action object\n */\nexport function updateBlockListSettings( clientId, settings ) {\n\treturn {\n\t\ttype: 'UPDATE_BLOCK_LIST_SETTINGS',\n\t\tclientId,\n\t\tsettings,\n\t};\n}\n\n/**\n * Action that updates the block editor settings.\n *\n * @param {Object} settings Updated settings\n *\n * @return {Object} Action object\n */\nexport function updateSettings( settings ) {\n\treturn __experimentalUpdateSettings( settings, {\n\t\tstripExperimentalSettings: true,\n\t} );\n}\n\n/**\n * Action that signals that a temporary reusable block has been saved\n * in order to switch its temporary id with the real id.\n *\n * @param {string} id        Reusable block's id.\n * @param {string} updatedId Updated block's id.\n *\n * @return {Object} Action object.\n */\nexport function __unstableSaveReusableBlock( id, updatedId ) {\n\treturn {\n\t\ttype: 'SAVE_REUSABLE_BLOCK_SUCCESS',\n\t\tid,\n\t\tupdatedId,\n\t};\n}\n\n/**\n * Action that marks the last block change explicitly as persistent.\n *\n * @return {Object} Action object.\n */\nexport function __unstableMarkLastChangeAsPersistent() {\n\treturn { type: 'MARK_LAST_CHANGE_AS_PERSISTENT' };\n}\n\n/**\n * Action that signals that the next block change should be marked explicitly as not persistent.\n *\n * @return {Object} Action object.\n */\nexport function __unstableMarkNextChangeAsNotPersistent() {\n\treturn { type: 'MARK_NEXT_CHANGE_AS_NOT_PERSISTENT' };\n}\n\n/**\n * Action that marks the last block change as an automatic change, meaning it was not\n * performed by the user, and can be undone using the `Escape` and `Backspace` keys.\n * This action must be called after the change was made, and any actions that are a\n * consequence of it, so it is recommended to be called at the next idle period to ensure all\n * selection changes have been recorded.\n */\nexport const __unstableMarkAutomaticChange =\n\t() =>\n\t( { dispatch } ) => {\n\t\tdispatch( { type: 'MARK_AUTOMATIC_CHANGE' } );\n\t\tconst { requestIdleCallback = ( cb ) => setTimeout( cb, 100 ) } =\n\t\t\twindow;\n\t\trequestIdleCallback( () => {\n\t\t\tdispatch( { type: 'MARK_AUTOMATIC_CHANGE_FINAL' } );\n\t\t} );\n\t};\n\n/**\n * Action that enables or disables the navigation mode.\n *\n * @param {boolean} isNavigationMode Enable/Disable navigation mode.\n */\nexport const setNavigationMode =\n\t( isNavigationMode = true ) =>\n\t( { dispatch } ) => {\n\t\tdispatch.__unstableSetEditorMode(\n\t\t\tisNavigationMode ? 'navigation' : 'edit'\n\t\t);\n\t};\n\n/**\n * Action that sets the editor mode\n *\n * @param {string} mode Editor mode\n */\nexport const __unstableSetEditorMode =\n\t( mode ) =>\n\t( { dispatch, select } ) => {\n\t\t// When switching to zoom-out mode, we need to select the root block\n\t\tif ( mode === 'zoom-out' ) {\n\t\t\tconst firstSelectedClientId = select.getBlockSelectionStart();\n\t\t\tif ( firstSelectedClientId ) {\n\t\t\t\tdispatch.selectBlock(\n\t\t\t\t\tselect.getBlockHierarchyRootClientId(\n\t\t\t\t\t\tfirstSelectedClientId\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tdispatch( { type: 'SET_EDITOR_MODE', mode } );\n\n\t\tif ( mode === 'navigation' ) {\n\t\t\tspeak(\n\t\t\t\t__(\n\t\t\t\t\t'You are currently in navigation mode. Navigate blocks using the Tab key and Arrow keys. Use Left and Right Arrow keys to move between nesting levels. To exit navigation mode and edit the selected block, press Enter.'\n\t\t\t\t)\n\t\t\t);\n\t\t} else if ( mode === 'edit' ) {\n\t\t\tspeak(\n\t\t\t\t__(\n\t\t\t\t\t'You are currently in edit mode. To return to the navigation mode, press Escape.'\n\t\t\t\t)\n\t\t\t);\n\t\t} else if ( mode === 'zoom-out' ) {\n\t\t\tspeak( __( 'You are currently in zoom-out mode.' ) );\n\t\t}\n\t};\n\n/**\n * Action that enables or disables the block moving mode.\n *\n * @param {string|null} hasBlockMovingClientId Enable/Disable block moving mode.\n */\nexport const setBlockMovingClientId =\n\t( hasBlockMovingClientId = null ) =>\n\t( { dispatch } ) => {\n\t\tdispatch( { type: 'SET_BLOCK_MOVING_MODE', hasBlockMovingClientId } );\n\n\t\tif ( hasBlockMovingClientId ) {\n\t\t\tspeak(\n\t\t\t\t__(\n\t\t\t\t\t'Use the Tab key and Arrow keys to choose new block location. Use Left and Right Arrow keys to move between nesting levels. Once location is selected press Enter or Space to move the block.'\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t};\n\n/**\n * Action that duplicates a list of blocks.\n *\n * @param {string[]} clientIds\n * @param {boolean}  updateSelection\n */\nexport const duplicateBlocks =\n\t( clientIds, updateSelection = true ) =>\n\t( { select, dispatch } ) => {\n\t\tif ( ! clientIds || ! clientIds.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Return early if blocks don't exist.\n\t\tconst blocks = select.getBlocksByClientId( clientIds );\n\t\tif ( blocks.some( ( block ) => ! block ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Return early if blocks don't support multiple usage.\n\t\tconst blockNames = blocks.map( ( block ) => block.name );\n\t\tif (\n\t\t\tblockNames.some(\n\t\t\t\t( blockName ) =>\n\t\t\t\t\t! hasBlockSupport( blockName, 'multiple', true )\n\t\t\t)\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst rootClientId = select.getBlockRootClientId( clientIds[ 0 ] );\n\t\tconst clientIdsArray = castArray( clientIds );\n\t\tconst lastSelectedIndex = select.getBlockIndex(\n\t\t\tclientIdsArray[ clientIdsArray.length - 1 ]\n\t\t);\n\t\tconst clonedBlocks = blocks.map( ( block ) =>\n\t\t\t__experimentalCloneSanitizedBlock( block )\n\t\t);\n\t\tdispatch.insertBlocks(\n\t\t\tclonedBlocks,\n\t\t\tlastSelectedIndex + 1,\n\t\t\trootClientId,\n\t\t\tupdateSelection\n\t\t);\n\t\tif ( clonedBlocks.length > 1 && updateSelection ) {\n\t\t\tdispatch.multiSelect(\n\t\t\t\tclonedBlocks[ 0 ].clientId,\n\t\t\t\tclonedBlocks[ clonedBlocks.length - 1 ].clientId\n\t\t\t);\n\t\t}\n\t\treturn clonedBlocks.map( ( block ) => block.clientId );\n\t};\n\n/**\n * Action that inserts a default block before a given block.\n *\n * @param {string} clientId\n */\nexport const insertBeforeBlock =\n\t( clientId ) =>\n\t( { select, dispatch } ) => {\n\t\tif ( ! clientId ) {\n\t\t\treturn;\n\t\t}\n\t\tconst rootClientId = select.getBlockRootClientId( clientId );\n\t\tconst isLocked = select.getTemplateLock( rootClientId );\n\t\tif ( isLocked ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst blockIndex = select.getBlockIndex( clientId );\n\t\tconst directInsertBlock = rootClientId\n\t\t\t? select.getDirectInsertBlock( rootClientId )\n\t\t\t: null;\n\n\t\tif ( ! directInsertBlock ) {\n\t\t\treturn dispatch.insertDefaultBlock( {}, rootClientId, blockIndex );\n\t\t}\n\n\t\tconst copiedAttributes = {};\n\t\tif ( directInsertBlock.attributesToCopy ) {\n\t\t\tconst attributes = select.getBlockAttributes( clientId );\n\t\t\tdirectInsertBlock.attributesToCopy.forEach( ( key ) => {\n\t\t\t\tif ( attributes[ key ] ) {\n\t\t\t\t\tcopiedAttributes[ key ] = attributes[ key ];\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\tconst block = createBlock( directInsertBlock.name, {\n\t\t\t...directInsertBlock.attributes,\n\t\t\t...copiedAttributes,\n\t\t} );\n\t\treturn dispatch.insertBlock( block, blockIndex, rootClientId );\n\t};\n\n/**\n * Action that inserts a default block after a given block.\n *\n * @param {string} clientId\n */\nexport const insertAfterBlock =\n\t( clientId ) =>\n\t( { select, dispatch } ) => {\n\t\tif ( ! clientId ) {\n\t\t\treturn;\n\t\t}\n\t\tconst rootClientId = select.getBlockRootClientId( clientId );\n\t\tconst isLocked = select.getTemplateLock( rootClientId );\n\t\tif ( isLocked ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst blockIndex = select.getBlockIndex( clientId );\n\t\tconst directInsertBlock = rootClientId\n\t\t\t? select.getDirectInsertBlock( rootClientId )\n\t\t\t: null;\n\n\t\tif ( ! directInsertBlock ) {\n\t\t\treturn dispatch.insertDefaultBlock(\n\t\t\t\t{},\n\t\t\t\trootClientId,\n\t\t\t\tblockIndex + 1\n\t\t\t);\n\t\t}\n\n\t\tconst copiedAttributes = {};\n\t\tif ( directInsertBlock.attributesToCopy ) {\n\t\t\tconst attributes = select.getBlockAttributes( clientId );\n\t\t\tdirectInsertBlock.attributesToCopy.forEach( ( key ) => {\n\t\t\t\tif ( attributes[ key ] ) {\n\t\t\t\t\tcopiedAttributes[ key ] = attributes[ key ];\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\tconst block = createBlock( directInsertBlock.name, {\n\t\t\t...directInsertBlock.attributes,\n\t\t\t...copiedAttributes,\n\t\t} );\n\t\treturn dispatch.insertBlock( block, blockIndex + 1, rootClientId );\n\t};\n\n/**\n * Action that toggles the highlighted block state.\n *\n * @param {string}  clientId      The block's clientId.\n * @param {boolean} isHighlighted The highlight state.\n */\nexport function toggleBlockHighlight( clientId, isHighlighted ) {\n\treturn {\n\t\ttype: 'TOGGLE_BLOCK_HIGHLIGHT',\n\t\tclientId,\n\t\tisHighlighted,\n\t};\n}\n\n/**\n * Action that \"flashes\" the block with a given `clientId` by rhythmically highlighting it.\n *\n * @param {string} clientId Target block client ID.\n */\nexport const flashBlock =\n\t( clientId ) =>\n\tasync ( { dispatch } ) => {\n\t\tdispatch( toggleBlockHighlight( clientId, true ) );\n\t\tawait new Promise( ( resolve ) => setTimeout( resolve, 150 ) );\n\t\tdispatch( toggleBlockHighlight( clientId, false ) );\n\t};\n\n/**\n * Action that sets whether a block has controlled inner blocks.\n *\n * @param {string}  clientId                 The block's clientId.\n * @param {boolean} hasControlledInnerBlocks True if the block's inner blocks are controlled.\n */\nexport function setHasControlledInnerBlocks(\n\tclientId,\n\thasControlledInnerBlocks\n) {\n\treturn {\n\t\ttype: 'SET_HAS_CONTROLLED_INNER_BLOCKS',\n\t\thasControlledInnerBlocks,\n\t\tclientId,\n\t};\n}\n\n/**\n * Action that sets whether given blocks are visible on the canvas.\n *\n * @param {Record<string,boolean>} updates For each block's clientId, its new visibility setting.\n */\nexport function setBlockVisibility( updates ) {\n\treturn {\n\t\ttype: 'SET_BLOCK_VISIBILITY',\n\t\tupdates,\n\t};\n}\n\n/**\n * Action that sets whether a block is being temporarily edited as blocks.\n *\n * DO-NOT-USE in production.\n * This action is created for internal/experimental only usage and may be\n * removed anytime without any warning, causing breakage on any plugin or theme invoking it.\n *\n * @param {?string} temporarilyEditingAsBlocks The block's clientId being temporarily edited as blocks.\n * @param {?string} focusModeToRevert          The focus mode to revert after temporarily edit as blocks finishes.\n */\nexport function __unstableSetTemporarilyEditingAsBlocks(\n\ttemporarilyEditingAsBlocks,\n\tfocusModeToRevert\n) {\n\treturn {\n\t\ttype: 'SET_TEMPORARILY_EDITING_AS_BLOCKS',\n\t\ttemporarilyEditingAsBlocks,\n\t\tfocusModeToRevert,\n\t};\n}\n\n/**\n * Interface for inserter media requests.\n *\n * @typedef {Object} InserterMediaRequest\n * @property {number} per_page How many items to fetch per page.\n * @property {string} search   The search term to use for filtering the results.\n */\n\n/**\n * Interface for inserter media responses. Any media resource should\n * map their response to this interface, in order to create the core\n * WordPress media blocks (image, video, audio).\n *\n * @typedef {Object} InserterMediaItem\n * @property {string}        title        The title of the media item.\n * @property {string}        url          The source url of the media item.\n * @property {string}        [previewUrl] The preview source url of the media item to display in the media list.\n * @property {number}        [id]         The WordPress id of the media item.\n * @property {number|string} [sourceId]   The id of the media item from external source.\n * @property {string}        [alt]        The alt text of the media item.\n * @property {string}        [caption]    The caption of the media item.\n */\n\n/**\n * Registers a new inserter media category. Once registered, the media category is\n * available in the inserter's media tab.\n *\n * The following interfaces are used:\n *\n * _Type Definition_\n *\n * - _InserterMediaRequest_ `Object`: Interface for inserter media requests.\n *\n * _Properties_\n *\n * - _per_page_ `number`: How many items to fetch per page.\n * - _search_ `string`: The search term to use for filtering the results.\n *\n * _Type Definition_\n *\n * - _InserterMediaItem_ `Object`: Interface for inserter media responses. Any media resource should\n * map their response to this interface, in order to create the core\n * WordPress media blocks (image, video, audio).\n *\n * _Properties_\n *\n * - _title_ `string`: The title of the media item.\n * - _url_ `string: The source url of the media item.\n * - _previewUrl_ `[string]`: The preview source url of the media item to display in the media list.\n * - _id_ `[number]`: The WordPress id of the media item.\n * - _sourceId_ `[number|string]`: The id of the media item from external source.\n * - _alt_ `[string]`: The alt text of the media item.\n * - _caption_ `[string]`: The caption of the media item.\n *\n * @param    {InserterMediaCategory}                                  category                       The inserter media category to register.\n *\n * @example\n * ```js\n *\n * wp.data.dispatch('core/block-editor').registerInserterMediaCategory( {\n * \t name: 'openverse',\n * \t labels: {\n * \t \tname: 'Openverse',\n * \t \tsearch_items: 'Search Openverse',\n * \t },\n * \t mediaType: 'image',\n * \t async fetch( query = {} ) {\n * \t \tconst defaultArgs = {\n * \t \t\tmature: false,\n * \t \t\texcluded_source: 'flickr,inaturalist,wikimedia',\n * \t \t\tlicense: 'pdm,cc0',\n * \t \t};\n * \t \tconst finalQuery = { ...query, ...defaultArgs };\n * \t \t// Sometimes you might need to map the supported request params according to `InserterMediaRequest`.\n * \t \t// interface. In this example the `search` query param is named `q`.\n * \t \tconst mapFromInserterMediaRequest = {\n * \t \t\tper_page: 'page_size',\n * \t \t\tsearch: 'q',\n * \t \t};\n * \t \tconst url = new URL( 'https://api.openverse.engineering/v1/images/' );\n * \t \tObject.entries( finalQuery ).forEach( ( [ key, value ] ) => {\n * \t \t\tconst queryKey = mapFromInserterMediaRequest[ key ] || key;\n * \t \t\turl.searchParams.set( queryKey, value );\n * \t \t} );\n * \t \tconst response = await window.fetch( url, {\n * \t \t\theaders: {\n * \t \t\t\t'User-Agent': 'WordPress/inserter-media-fetch',\n * \t \t\t},\n * \t \t} );\n * \t \tconst jsonResponse = await response.json();\n * \t \tconst results = jsonResponse.results;\n * \t \treturn results.map( ( result ) => ( {\n * \t \t\t...result,\n * \t \t\t// If your response result includes an `id` prop that you want to access later, it should\n * \t \t\t// be mapped to `InserterMediaItem`'s `sourceId` prop. This can be useful if you provide\n * \t \t\t// a report URL getter.\n * \t \t\t// Additionally you should always clear the `id` value of your response results because\n * \t \t\t// it is used to identify WordPress media items.\n * \t \t\tsourceId: result.id,\n * \t \t\tid: undefined,\n * \t \t\tcaption: result.caption,\n * \t \t\tpreviewUrl: result.thumbnail,\n * \t \t} ) );\n * \t },\n * \t getReportUrl: ( { sourceId } ) =>\n * \t \t`https://wordpress.org/openverse/image/${ sourceId }/report/`,\n * \t isExternalResource: true,\n * } );\n * ```\n *\n * @typedef {Object} InserterMediaCategory Interface for inserter media category.\n * @property {string}                                                 name                           The name of the media category, that should be unique among all media categories.\n * @property {Object}                                                 labels                         Labels for the media category.\n * @property {string}                                                 labels.name                    General name of the media category. It's used in the inserter media items list.\n * @property {string}                                                 [labels.search_items='Search'] Label for searching items. Default is Search Posts / Search Pages.\n * @property {('image'|'audio'|'video')}                              mediaType                      The media type of the media category.\n * @property {(InserterMediaRequest) => Promise<InserterMediaItem[]>} fetch                          The function to fetch media items for the category.\n * @property {(InserterMediaItem) => string}                          [getReportUrl]                 If the media category supports reporting media items, this function should return\n *                                                                                                   the report url for the media item. It accepts the `InserterMediaItem` as an argument.\n * @property {boolean}                                                [isExternalResource]           If the media category is an external resource, this should be set to true.\n *                                                                                                   This is used to avoid making a request to the external resource when the user\n */\nexport const registerInserterMediaCategory =\n\t( category ) =>\n\t( { select, dispatch } ) => {\n\t\tif ( ! category || typeof category !== 'object' ) {\n\t\t\tconsole.error(\n\t\t\t\t'Category should be an `InserterMediaCategory` object.'\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\t\tif ( ! category.name ) {\n\t\t\tconsole.error(\n\t\t\t\t'Category should have a `name` that should be unique among all media categories.'\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\t\tif ( ! category.labels?.name ) {\n\t\t\tconsole.error( 'Category should have a `labels.name`.' );\n\t\t\treturn;\n\t\t}\n\t\tif ( ! [ 'image', 'audio', 'video' ].includes( category.mediaType ) ) {\n\t\t\tconsole.error(\n\t\t\t\t'Category should have `mediaType` property that is one of `image|audio|video`.'\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\t\tif ( ! category.fetch || typeof category.fetch !== 'function' ) {\n\t\t\tconsole.error(\n\t\t\t\t'Category should have a `fetch` function defined with the following signature `(InserterMediaRequest) => Promise<InserterMediaItem[]>`.'\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\t\tconst registeredInserterMediaCategories =\n\t\t\tselect.getRegisteredInserterMediaCategories();\n\t\tif (\n\t\t\tregisteredInserterMediaCategories.some(\n\t\t\t\t( { name } ) => name === category.name\n\t\t\t)\n\t\t) {\n\t\t\tconsole.error(\n\t\t\t\t`A category is already registered with the same name: \"${ category.name }\".`\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\t\tif (\n\t\t\tregisteredInserterMediaCategories.some(\n\t\t\t\t( { labels: { name } = {} } ) => name === category.labels?.name\n\t\t\t)\n\t\t) {\n\t\t\tconsole.error(\n\t\t\t\t`A category is already registered with the same labels.name: \"${ category.labels.name }\".`\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\t\t// `inserterMediaCategories` is a private block editor setting, which means it cannot\n\t\t// be updated through the public `updateSettings` action. We preserve this setting as\n\t\t// private, so extenders can only add new inserter media categories and don't have any\n\t\t// control over the core media categories.\n\t\tdispatch( {\n\t\t\ttype: 'REGISTER_INSERTER_MEDIA_CATEGORY',\n\t\t\tcategory: { ...category, isExternalResource: true },\n\t\t} );\n\t};\n\n/**\n * @typedef {import('../components/block-editing-mode').BlockEditingMode} BlockEditingMode\n */\n\n/**\n * Sets the block editing mode for a given block.\n *\n * @see useBlockEditingMode\n *\n * @param {string}           clientId The block client ID, or `''` for the root container.\n * @param {BlockEditingMode} mode     The block editing mode. One of `'disabled'`,\n *                                    `'contentOnly'`, or `'default'`.\n *\n * @return {Object} Action object.\n */\nexport function setBlockEditingMode( clientId = '', mode ) {\n\treturn {\n\t\ttype: 'SET_BLOCK_EDITING_MODE',\n\t\tclientId,\n\t\tmode,\n\t};\n}\n\n/**\n * Clears the block editing mode for a given block.\n *\n * @see useBlockEditingMode\n *\n * @param {string} clientId The block client ID, or `''` for the root container.\n *\n * @return {Object} Action object.\n */\nexport function unsetBlockEditingMode( clientId = '' ) {\n\treturn {\n\t\ttype: 'UNSET_BLOCK_EDITING_MODE',\n\t\tclientId,\n\t};\n}\n","/**\n * WordPress dependencies\n */\nimport { createReduxStore, registerStore } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport reducer from './reducer';\nimport * as selectors from './selectors';\nimport * as privateActions from './private-actions';\nimport * as privateSelectors from './private-selectors';\nimport * as actions from './actions';\nimport { STORE_NAME } from './constants';\nimport { unlock } from '../lock-unlock';\n\n/**\n * Block editor data store configuration.\n *\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/data/README.md#registerStore\n */\nexport const storeConfig = {\n\treducer,\n\tselectors,\n\tactions,\n};\n\n/**\n * Store definition for the block editor namespace.\n *\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/data/README.md#createReduxStore\n */\nexport const store = createReduxStore( STORE_NAME, {\n\t...storeConfig,\n\tpersist: [ 'preferences' ],\n} );\n\n// We will be able to use the `register` function once we switch\n// the \"preferences\" persistence to use the new preferences package.\nconst registeredStore = registerStore( STORE_NAME, {\n\t...storeConfig,\n\tpersist: [ 'preferences' ],\n} );\nunlock( registeredStore ).registerPrivateActions( privateActions );\nunlock( registeredStore ).registerPrivateSelectors( privateSelectors );\n\n// TODO: Remove once we switch to the `register` function (see above).\n//\n// Until then, private functions also need to be attached to the original\n// `store` descriptor in order to avoid unit tests failing, which could happen\n// when tests create new registries in which they register stores.\n//\n// @see https://github.com/WordPress/gutenberg/pull/51145#discussion_r1239999590\nunlock( store ).registerPrivateActions( privateActions );\nunlock( store ).registerPrivateSelectors( privateSelectors );\n","/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport deprecated from '@wordpress/deprecated';\n\n/**\n * Internal dependencies\n */\nimport { useBlockEditContext } from '../block-edit';\nimport { store as blockEditorStore } from '../../store';\nimport { unlock } from '../../lock-unlock';\n\n/**\n * Hook that retrieves the given settings for the block instance in use.\n *\n * It looks up the settings first in the block instance hierarchy.\n * If none are found, it'll look them up in the block editor settings.\n *\n * @param {string[]} paths The paths to the settings.\n * @return {any[]} Returns the values defined for the settings.\n * @example\n * ```js\n * const [ fixed, sticky ] = useSettings( 'position.fixed', 'position.sticky' );\n * ```\n */\nexport function useSettings( ...paths ) {\n\tconst { clientId = null } = useBlockEditContext();\n\treturn useSelect(\n\t\t( select ) =>\n\t\t\tunlock( select( blockEditorStore ) ).getBlockSettings(\n\t\t\t\tclientId,\n\t\t\t\t...paths\n\t\t\t),\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t\t[ clientId, ...paths ]\n\t);\n}\n\n/**\n * Hook that retrieves the given setting for the block instance in use.\n *\n * It looks up the setting first in the block instance hierarchy.\n * If none is found, it'll look it up in the block editor settings.\n *\n * @param {string} path The path to the setting.\n * @return {any} Returns the value defined for the setting.\n * @deprecated 6.5.0 Use useSettings instead.\n * @example\n * ```js\n * const isEnabled = useSetting( 'typography.dropCap' );\n * ```\n */\nexport function useSetting( path ) {\n\tdeprecated( 'wp.blockEditor.useSetting', {\n\t\tsince: '6.5',\n\t\talternative: 'wp.blockEditor.useSettings',\n\t\tnote: 'The new useSettings function can retrieve multiple settings at once, with better performance.',\n\t} );\n\n\tconst [ value ] = useSettings( path );\n\treturn value;\n}\n","/**\r\n * The fluid utilities must match the backend equivalent.\r\n * See: gutenberg_get_typography_font_size_value() in lib/block-supports/typography.php\r\n * ---------------------------------------------------------------\r\n */\r\n\r\n// Defaults.\r\nconst DEFAULT_MAXIMUM_VIEWPORT_WIDTH = '1600px';\r\nconst DEFAULT_MINIMUM_VIEWPORT_WIDTH = '320px';\r\nconst DEFAULT_SCALE_FACTOR = 1;\r\nconst DEFAULT_MINIMUM_FONT_SIZE_FACTOR_MIN = 0.25;\r\nconst DEFAULT_MINIMUM_FONT_SIZE_FACTOR_MAX = 0.75;\r\nconst DEFAULT_MINIMUM_FONT_SIZE_LIMIT = '14px';\r\n\r\n/**\r\n * Computes a fluid font-size value that uses clamp(). A minimum and maximum\r\n * font size OR a single font size can be specified.\r\n *\r\n * If a single font size is specified, it is scaled up and down using a logarithmic scale.\r\n *\r\n * @example\r\n * ```js\r\n * // Calculate fluid font-size value from a minimum and maximum value.\r\n * const fontSize = getComputedFluidTypographyValue( {\r\n *     minimumFontSize: '20px',\r\n *     maximumFontSize: '45px'\r\n * } );\r\n * // Calculate fluid font-size value from a single font size.\r\n * const fontSize = getComputedFluidTypographyValue( {\r\n *     fontSize: '30px',\r\n * } );\r\n * ```\r\n *\r\n * @param {Object}        args\r\n * @param {?string}       args.minimumViewportWidth Minimum viewport size from which type will have fluidity. Optional if fontSize is specified.\r\n * @param {?string}       args.maximumViewportWidth Maximum size up to which type will have fluidity. Optional if fontSize is specified.\r\n * @param {string|number} [args.fontSize]           Size to derive maximumFontSize and minimumFontSize from, if necessary. Optional if minimumFontSize and maximumFontSize are specified.\r\n * @param {?string}       args.maximumFontSize      Maximum font size for any clamp() calculation. Optional.\r\n * @param {?string}       args.minimumFontSize      Minimum font size for any clamp() calculation. Optional.\r\n * @param {?number}       args.scaleFactor          A scale factor to determine how fast a font scales within boundaries. Optional.\r\n * @param {?string}       args.minimumFontSizeLimit The smallest a calculated font size may be. Optional.\r\n *\r\n * @return {string|null} A font-size value using clamp().\r\n */\r\nexport function getComputedFluidTypographyValue( {\r\n\tminimumFontSize,\r\n\tmaximumFontSize,\r\n\tfontSize,\r\n\tminimumViewportWidth = DEFAULT_MINIMUM_VIEWPORT_WIDTH,\r\n\tmaximumViewportWidth = DEFAULT_MAXIMUM_VIEWPORT_WIDTH,\r\n\tscaleFactor = DEFAULT_SCALE_FACTOR,\r\n\tminimumFontSizeLimit,\r\n} ) {\r\n\t// Validate incoming settings and set defaults.\r\n\tminimumFontSizeLimit = !! getTypographyValueAndUnit( minimumFontSizeLimit )\r\n\t\t? minimumFontSizeLimit\r\n\t\t: DEFAULT_MINIMUM_FONT_SIZE_LIMIT;\r\n\r\n\t/*\r\n\t * Calculates missing minimumFontSize and maximumFontSize from\r\n\t * defaultFontSize if provided.\r\n\t */\r\n\tif ( fontSize ) {\r\n\t\t// Parses default font size.\r\n\t\tconst fontSizeParsed = getTypographyValueAndUnit( fontSize );\r\n\r\n\t\t// Protect against invalid units.\r\n\t\tif ( ! fontSizeParsed?.unit ) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\t// Parses the minimum font size limit, so we can perform checks using it.\r\n\t\tconst minimumFontSizeLimitParsed = getTypographyValueAndUnit(\r\n\t\t\tminimumFontSizeLimit,\r\n\t\t\t{\r\n\t\t\t\tcoerceTo: fontSizeParsed.unit,\r\n\t\t\t}\r\n\t\t);\r\n\r\n\t\t// Don't enforce minimum font size if a font size has explicitly set a min and max value.\r\n\t\tif (\r\n\t\t\t!! minimumFontSizeLimitParsed?.value &&\r\n\t\t\t! minimumFontSize &&\r\n\t\t\t! maximumFontSize\r\n\t\t) {\r\n\t\t\t/*\r\n\t\t\t * If a minimum size was not passed to this function\r\n\t\t\t * and the user-defined font size is lower than $minimum_font_size_limit,\r\n\t\t\t * do not calculate a fluid value.\r\n\t\t\t */\r\n\t\t\tif ( fontSizeParsed?.value <= minimumFontSizeLimitParsed?.value ) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// If no fluid max font size is available use the incoming value.\r\n\t\tif ( ! maximumFontSize ) {\r\n\t\t\tmaximumFontSize = `${ fontSizeParsed.value }${ fontSizeParsed.unit }`;\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\t * If no minimumFontSize is provided, create one using\r\n\t\t * the given font size multiplied by the min font size scale factor.\r\n\t\t */\r\n\t\tif ( ! minimumFontSize ) {\r\n\t\t\tconst fontSizeValueInPx =\r\n\t\t\t\tfontSizeParsed.unit === 'px'\r\n\t\t\t\t\t? fontSizeParsed.value\r\n\t\t\t\t\t: fontSizeParsed.value * 16;\r\n\r\n\t\t\t/*\r\n\t\t\t * The scale factor is a multiplier that affects how quickly the curve will move towards the minimum,\r\n\t\t\t * that is, how quickly the size factor reaches 0 given increasing font size values.\r\n\t\t\t * For a - b * log2(), lower values of b will make the curve move towards the minimum faster.\r\n\t\t\t * The scale factor is constrained between min and max values.\r\n\t\t\t */\r\n\t\t\tconst minimumFontSizeFactor = Math.min(\r\n\t\t\t\tMath.max(\r\n\t\t\t\t\t1 - 0.075 * Math.log2( fontSizeValueInPx ),\r\n\t\t\t\t\tDEFAULT_MINIMUM_FONT_SIZE_FACTOR_MIN\r\n\t\t\t\t),\r\n\t\t\t\tDEFAULT_MINIMUM_FONT_SIZE_FACTOR_MAX\r\n\t\t\t);\r\n\r\n\t\t\t// Calculates the minimum font size.\r\n\t\t\tconst calculatedMinimumFontSize = roundToPrecision(\r\n\t\t\t\tfontSizeParsed.value * minimumFontSizeFactor,\r\n\t\t\t\t3\r\n\t\t\t);\r\n\r\n\t\t\t// Only use calculated min font size if it's > $minimum_font_size_limit value.\r\n\t\t\tif (\r\n\t\t\t\t!! minimumFontSizeLimitParsed?.value &&\r\n\t\t\t\tcalculatedMinimumFontSize < minimumFontSizeLimitParsed?.value\r\n\t\t\t) {\r\n\t\t\t\tminimumFontSize = `${ minimumFontSizeLimitParsed.value }${ minimumFontSizeLimitParsed.unit }`;\r\n\t\t\t} else {\r\n\t\t\t\tminimumFontSize = `${ calculatedMinimumFontSize }${ fontSizeParsed.unit }`;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// Grab the minimum font size and normalize it in order to use the value for calculations.\r\n\tconst minimumFontSizeParsed = getTypographyValueAndUnit( minimumFontSize );\r\n\r\n\t// We get a 'preferred' unit to keep units consistent when calculating,\r\n\t// otherwise the result will not be accurate.\r\n\tconst fontSizeUnit = minimumFontSizeParsed?.unit || 'rem';\r\n\r\n\t// Grabs the maximum font size and normalize it in order to use the value for calculations.\r\n\tconst maximumFontSizeParsed = getTypographyValueAndUnit( maximumFontSize, {\r\n\t\tcoerceTo: fontSizeUnit,\r\n\t} );\r\n\r\n\t// Checks for mandatory min and max sizes, and protects against unsupported units.\r\n\tif ( ! minimumFontSizeParsed || ! maximumFontSizeParsed ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\t// Uses rem for accessible fluid target font scaling.\r\n\tconst minimumFontSizeRem = getTypographyValueAndUnit( minimumFontSize, {\r\n\t\tcoerceTo: 'rem',\r\n\t} );\r\n\r\n\t// Viewport widths defined for fluid typography. Normalize units\r\n\tconst maximumViewportWidthParsed = getTypographyValueAndUnit(\r\n\t\tmaximumViewportWidth,\r\n\t\t{ coerceTo: fontSizeUnit }\r\n\t);\r\n\tconst minimumViewportWidthParsed = getTypographyValueAndUnit(\r\n\t\tminimumViewportWidth,\r\n\t\t{ coerceTo: fontSizeUnit }\r\n\t);\r\n\r\n\t// Protect against unsupported units.\r\n\tif (\r\n\t\t! maximumViewportWidthParsed ||\r\n\t\t! minimumViewportWidthParsed ||\r\n\t\t! minimumFontSizeRem\r\n\t) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\t// Calculates the linear factor denominator. If it's 0, we cannot calculate a fluid value.\r\n\tconst linearDenominator =\r\n\t\tmaximumViewportWidthParsed.value - minimumViewportWidthParsed.value;\r\n\tif ( ! linearDenominator ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\t// Build CSS rule.\r\n\t// Borrowed from https://websemantics.uk/tools/responsive-font-calculator/.\r\n\tconst minViewportWidthOffsetValue = roundToPrecision(\r\n\t\tminimumViewportWidthParsed.value / 100,\r\n\t\t3\r\n\t);\r\n\r\n\tconst viewportWidthOffset =\r\n\t\troundToPrecision( minViewportWidthOffsetValue, 3 ) + fontSizeUnit;\r\n\tconst linearFactor =\r\n\t\t100 *\r\n\t\t( ( maximumFontSizeParsed.value - minimumFontSizeParsed.value ) /\r\n\t\t\tlinearDenominator );\r\n\tconst linearFactorScaled = roundToPrecision(\r\n\t\t( linearFactor || 1 ) * scaleFactor,\r\n\t\t3\r\n\t);\r\n\tconst fluidTargetFontSize = `${ minimumFontSizeRem.value }${ minimumFontSizeRem.unit } + ((1vw - ${ viewportWidthOffset }) * ${ linearFactorScaled })`;\r\n\r\n\treturn `clamp(${ minimumFontSize }, ${ fluidTargetFontSize }, ${ maximumFontSize })`;\r\n}\r\n\r\n/**\r\n * Internal method that checks a string for a unit and value and returns an array consisting of `'value'` and `'unit'`, e.g., [ '42', 'rem' ].\r\n * A raw font size of `value + unit` is expected. If the value is an integer, it will convert to `value + 'px'`.\r\n *\r\n * @param {string|number}    rawValue Raw size value from theme.json.\r\n * @param {Object|undefined} options  Calculation options.\r\n *\r\n * @return {{ unit: string, value: number }|null} An object consisting of `'value'` and `'unit'` properties.\r\n */\r\nexport function getTypographyValueAndUnit( rawValue, options = {} ) {\r\n\tif ( typeof rawValue !== 'string' && typeof rawValue !== 'number' ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\t// Converts numeric values to pixel values by default.\r\n\tif ( isFinite( rawValue ) ) {\r\n\t\trawValue = `${ rawValue }px`;\r\n\t}\r\n\r\n\tconst { coerceTo, rootSizeValue, acceptableUnits } = {\r\n\t\tcoerceTo: '',\r\n\t\t// Default browser font size. Later we could inject some JS to compute this `getComputedStyle( document.querySelector( \"html\" ) ).fontSize`.\r\n\t\trootSizeValue: 16,\r\n\t\tacceptableUnits: [ 'rem', 'px', 'em' ],\r\n\t\t...options,\r\n\t};\r\n\r\n\tconst acceptableUnitsGroup = acceptableUnits?.join( '|' );\r\n\tconst regexUnits = new RegExp(\r\n\t\t`^(\\\\d*\\\\.?\\\\d+)(${ acceptableUnitsGroup }){1,1}$`\r\n\t);\r\n\r\n\tconst matches = rawValue.match( regexUnits );\r\n\r\n\t// We need a number value and a unit.\r\n\tif ( ! matches || matches.length < 3 ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tlet [ , value, unit ] = matches;\r\n\r\n\tlet returnValue = parseFloat( value );\r\n\r\n\tif ( 'px' === coerceTo && ( 'em' === unit || 'rem' === unit ) ) {\r\n\t\treturnValue = returnValue * rootSizeValue;\r\n\t\tunit = coerceTo;\r\n\t}\r\n\r\n\tif ( 'px' === unit && ( 'em' === coerceTo || 'rem' === coerceTo ) ) {\r\n\t\treturnValue = returnValue / rootSizeValue;\r\n\t\tunit = coerceTo;\r\n\t}\r\n\r\n\t/*\r\n\t * No calculation is required if swapping between em and rem yet,\r\n\t * since we assume a root size value. Later we might like to differentiate between\r\n\t * :root font size (rem) and parent element font size (em) relativity.\r\n\t */\r\n\tif (\r\n\t\t( 'em' === coerceTo || 'rem' === coerceTo ) &&\r\n\t\t( 'em' === unit || 'rem' === unit )\r\n\t) {\r\n\t\tunit = coerceTo;\r\n\t}\r\n\r\n\treturn {\r\n\t\tvalue: roundToPrecision( returnValue, 3 ),\r\n\t\tunit,\r\n\t};\r\n}\r\n\r\n/**\r\n * Returns a value rounded to defined precision.\r\n * Returns `undefined` if the value is not a valid finite number.\r\n *\r\n * @param {number} value  Raw value.\r\n * @param {number} digits The number of digits to appear after the decimal point\r\n *\r\n * @return {number|undefined} Value rounded to standard precision.\r\n */\r\nexport function roundToPrecision( value, digits = 3 ) {\r\n\tconst base = Math.pow( 10, digits );\r\n\treturn Number.isFinite( value )\r\n\t\t? parseFloat( Math.round( value * base ) / base )\r\n\t\t: undefined;\r\n}\r\n","/**\n * The fluid utilities must match the backend equivalent.\n * See: gutenberg_get_typography_font_size_value() in lib/block-supports/typography.php\n * ---------------------------------------------------------------\n */\n\n/**\n * Internal dependencies\n */\nimport {\n\tgetComputedFluidTypographyValue,\n\tgetTypographyValueAndUnit,\n} from '../font-sizes/fluid-utils';\n\n/**\n * @typedef {Object} FluidPreset\n * @property {string|undefined}  max A maximum font size value.\n * @property {?string|undefined} min A minimum font size value.\n */\n\n/**\n * @typedef {Object} Preset\n * @property {?string|?number}               size  A default font size.\n * @property {string}                        name  A font size name, displayed in the UI.\n * @property {string}                        slug  A font size slug\n * @property {boolean|FluidPreset|undefined} fluid Specifies the minimum and maximum font size value of a fluid font size.\n */\n\n/**\n * @typedef {Object} TypographySettings\n * @property {?string} minViewportWidth  Minimum viewport size from which type will have fluidity. Optional if size is specified.\n * @property {?string} maxViewportWidth  Maximum size up to which type will have fluidity. Optional if size is specified.\n * @property {?number} scaleFactor       A scale factor to determine how fast a font scales within boundaries. Optional.\n * @property {?number} minFontSizeFactor How much to scale defaultFontSize by to derive minimumFontSize. Optional.\n * @property {?string} minFontSize       The smallest a calculated font size may be. Optional.\n */\n\n/**\n * Returns a font-size value based on a given font-size preset.\n * Takes into account fluid typography parameters and attempts to return a css formula depending on available, valid values.\n *\n * @param {Preset}                     preset\n * @param {Object}                     settings\n * @param {boolean|TypographySettings} settings.typography.fluid  Whether fluid typography is enabled, and, optionally, fluid font size options.\n * @param {Object?}                    settings.typography.layout Layout options.\n *\n * @return {string|*} A font-size value or the value of preset.size.\n */\nexport function getTypographyFontSizeValue( preset, settings ) {\n\tconst { size: defaultSize } = preset;\n\n\tif ( ! isFluidTypographyEnabled( settings?.typography ) ) {\n\t\treturn defaultSize;\n\t}\n\t/*\n\t * Checks whether a font size has explicitly bypassed fluid calculations.\n\t * Also catches falsy values and 0/'0'.\n\t * Fluid calculations cannot be performed on `0`.\n\t */\n\tif ( ! defaultSize || '0' === defaultSize || false === preset?.fluid ) {\n\t\treturn defaultSize;\n\t}\n\n\tlet fluidTypographySettings =\n\t\tgetFluidTypographyOptionsFromSettings( settings );\n\tfluidTypographySettings =\n\t\ttypeof fluidTypographySettings?.fluid === 'object'\n\t\t\t? fluidTypographySettings?.fluid\n\t\t\t: {};\n\n\tconst fluidFontSizeValue = getComputedFluidTypographyValue( {\n\t\tminimumFontSize: preset?.fluid?.min,\n\t\tmaximumFontSize: preset?.fluid?.max,\n\t\tfontSize: defaultSize,\n\t\tminimumFontSizeLimit: fluidTypographySettings?.minFontSize,\n\t\tmaximumViewportWidth: fluidTypographySettings?.maxViewportWidth,\n\t\tminimumViewportWidth: fluidTypographySettings?.minViewportWidth,\n\t} );\n\n\tif ( !! fluidFontSizeValue ) {\n\t\treturn fluidFontSizeValue;\n\t}\n\n\treturn defaultSize;\n}\n\nfunction isFluidTypographyEnabled( typographySettings ) {\n\tconst fluidSettings = typographySettings?.fluid;\n\treturn (\n\t\ttrue === fluidSettings ||\n\t\t( fluidSettings &&\n\t\t\ttypeof fluidSettings === 'object' &&\n\t\t\tObject.keys( fluidSettings ).length > 0 )\n\t);\n}\n\n/**\n * Returns fluid typography settings from theme.json setting object.\n *\n * @param {Object} settings            Theme.json settings\n * @param {Object} settings.typography Theme.json typography settings\n * @param {Object} settings.layout     Theme.json layout settings\n * @return {TypographySettings} Fluid typography settings\n */\nexport function getFluidTypographyOptionsFromSettings( settings ) {\n\tconst typographySettings = settings?.typography;\n\tconst layoutSettings = settings?.layout;\n\tconst defaultMaxViewportWidth = getTypographyValueAndUnit(\n\t\tlayoutSettings?.wideSize\n\t)\n\t\t? layoutSettings?.wideSize\n\t\t: null;\n\treturn isFluidTypographyEnabled( typographySettings ) &&\n\t\tdefaultMaxViewportWidth\n\t\t? {\n\t\t\t\tfluid: {\n\t\t\t\t\tmaxViewportWidth: defaultMaxViewportWidth,\n\t\t\t\t\t...typographySettings.fluid,\n\t\t\t\t},\n\t\t  }\n\t\t: {\n\t\t\t\tfluid: typographySettings?.fluid,\n\t\t  };\n}\n","/**\n * External dependencies\n */\nimport fastDeepEqual from 'fast-deep-equal/es6';\n\n/**\n * Internal dependencies\n */\nimport { getTypographyFontSizeValue } from './typography-utils';\nimport { getValueFromObjectPath } from '../../utils/object';\n\n/* Supporting data. */\nexport const ROOT_BLOCK_SELECTOR = 'body';\nexport const ROOT_CSS_PROPERTIES_SELECTOR = ':root';\n\nexport const PRESET_METADATA = [\n\t{\n\t\tpath: [ 'color', 'palette' ],\n\t\tvalueKey: 'color',\n\t\tcssVarInfix: 'color',\n\t\tclasses: [\n\t\t\t{ classSuffix: 'color', propertyName: 'color' },\n\t\t\t{\n\t\t\t\tclassSuffix: 'background-color',\n\t\t\t\tpropertyName: 'background-color',\n\t\t\t},\n\t\t\t{\n\t\t\t\tclassSuffix: 'border-color',\n\t\t\t\tpropertyName: 'border-color',\n\t\t\t},\n\t\t],\n\t},\n\t{\n\t\tpath: [ 'color', 'gradients' ],\n\t\tvalueKey: 'gradient',\n\t\tcssVarInfix: 'gradient',\n\t\tclasses: [\n\t\t\t{\n\t\t\t\tclassSuffix: 'gradient-background',\n\t\t\t\tpropertyName: 'background',\n\t\t\t},\n\t\t],\n\t},\n\t{\n\t\tpath: [ 'color', 'duotone' ],\n\t\tvalueKey: 'colors',\n\t\tcssVarInfix: 'duotone',\n\t\tvalueFunc: ( { slug } ) => `url( '#wp-duotone-${ slug }' )`,\n\t\tclasses: [],\n\t},\n\t{\n\t\tpath: [ 'shadow', 'presets' ],\n\t\tvalueKey: 'shadow',\n\t\tcssVarInfix: 'shadow',\n\t\tclasses: [],\n\t},\n\t{\n\t\tpath: [ 'typography', 'fontSizes' ],\n\t\tvalueFunc: ( preset, settings ) =>\n\t\t\tgetTypographyFontSizeValue( preset, settings ),\n\t\tvalueKey: 'size',\n\t\tcssVarInfix: 'font-size',\n\t\tclasses: [ { classSuffix: 'font-size', propertyName: 'font-size' } ],\n\t},\n\t{\n\t\tpath: [ 'typography', 'fontFamilies' ],\n\t\tvalueKey: 'fontFamily',\n\t\tcssVarInfix: 'font-family',\n\t\tclasses: [\n\t\t\t{ classSuffix: 'font-family', propertyName: 'font-family' },\n\t\t],\n\t},\n\t{\n\t\tpath: [ 'spacing', 'spacingSizes' ],\n\t\tvalueKey: 'size',\n\t\tcssVarInfix: 'spacing',\n\t\tvalueFunc: ( { size } ) => size,\n\t\tclasses: [],\n\t},\n];\n\nexport const STYLE_PATH_TO_CSS_VAR_INFIX = {\n\t'color.background': 'color',\n\t'color.text': 'color',\n\t'filter.duotone': 'duotone',\n\t'elements.link.color.text': 'color',\n\t'elements.link.:hover.color.text': 'color',\n\t'elements.link.typography.fontFamily': 'font-family',\n\t'elements.link.typography.fontSize': 'font-size',\n\t'elements.button.color.text': 'color',\n\t'elements.button.color.background': 'color',\n\t'elements.caption.color.text': 'color',\n\t'elements.button.typography.fontFamily': 'font-family',\n\t'elements.button.typography.fontSize': 'font-size',\n\t'elements.heading.color': 'color',\n\t'elements.heading.color.background': 'color',\n\t'elements.heading.typography.fontFamily': 'font-family',\n\t'elements.heading.gradient': 'gradient',\n\t'elements.heading.color.gradient': 'gradient',\n\t'elements.h1.color': 'color',\n\t'elements.h1.color.background': 'color',\n\t'elements.h1.typography.fontFamily': 'font-family',\n\t'elements.h1.color.gradient': 'gradient',\n\t'elements.h2.color': 'color',\n\t'elements.h2.color.background': 'color',\n\t'elements.h2.typography.fontFamily': 'font-family',\n\t'elements.h2.color.gradient': 'gradient',\n\t'elements.h3.color': 'color',\n\t'elements.h3.color.background': 'color',\n\t'elements.h3.typography.fontFamily': 'font-family',\n\t'elements.h3.color.gradient': 'gradient',\n\t'elements.h4.color': 'color',\n\t'elements.h4.color.background': 'color',\n\t'elements.h4.typography.fontFamily': 'font-family',\n\t'elements.h4.color.gradient': 'gradient',\n\t'elements.h5.color': 'color',\n\t'elements.h5.color.background': 'color',\n\t'elements.h5.typography.fontFamily': 'font-family',\n\t'elements.h5.color.gradient': 'gradient',\n\t'elements.h6.color': 'color',\n\t'elements.h6.color.background': 'color',\n\t'elements.h6.typography.fontFamily': 'font-family',\n\t'elements.h6.color.gradient': 'gradient',\n\t'color.gradient': 'gradient',\n\tshadow: 'shadow',\n\t'typography.fontSize': 'font-size',\n\t'typography.fontFamily': 'font-family',\n};\n\n// A static list of block attributes that store global style preset slugs.\nexport const STYLE_PATH_TO_PRESET_BLOCK_ATTRIBUTE = {\n\t'color.background': 'backgroundColor',\n\t'color.text': 'textColor',\n\t'color.gradient': 'gradient',\n\t'typography.fontSize': 'fontSize',\n\t'typography.fontFamily': 'fontFamily',\n};\n\nexport const TOOLSPANEL_DROPDOWNMENU_PROPS = {\n\tpopoverProps: {\n\t\tplacement: 'left-start',\n\t\toffset: 259, // Inner sidebar width (248px) - button width (24px) - border (1px) + padding (16px) + spacing (20px)\n\t},\n};\n\nfunction findInPresetsBy(\n\tfeatures,\n\tblockName,\n\tpresetPath,\n\tpresetProperty,\n\tpresetValueValue\n) {\n\t// Block presets take priority above root level presets.\n\tconst orderedPresetsByOrigin = [\n\t\tgetValueFromObjectPath( features, [\n\t\t\t'blocks',\n\t\t\tblockName,\n\t\t\t...presetPath,\n\t\t] ),\n\t\tgetValueFromObjectPath( features, presetPath ),\n\t];\n\n\tfor ( const presetByOrigin of orderedPresetsByOrigin ) {\n\t\tif ( presetByOrigin ) {\n\t\t\t// Preset origins ordered by priority.\n\t\t\tconst origins = [ 'custom', 'theme', 'default' ];\n\t\t\tfor ( const origin of origins ) {\n\t\t\t\tconst presets = presetByOrigin[ origin ];\n\t\t\t\tif ( presets ) {\n\t\t\t\t\tconst presetObject = presets.find(\n\t\t\t\t\t\t( preset ) =>\n\t\t\t\t\t\t\tpreset[ presetProperty ] === presetValueValue\n\t\t\t\t\t);\n\t\t\t\t\tif ( presetObject ) {\n\t\t\t\t\t\tif ( presetProperty === 'slug' ) {\n\t\t\t\t\t\t\treturn presetObject;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// If there is a highest priority preset with the same slug but different value the preset we found was overwritten and should be ignored.\n\t\t\t\t\t\tconst highestPresetObjectWithSameSlug = findInPresetsBy(\n\t\t\t\t\t\t\tfeatures,\n\t\t\t\t\t\t\tblockName,\n\t\t\t\t\t\t\tpresetPath,\n\t\t\t\t\t\t\t'slug',\n\t\t\t\t\t\t\tpresetObject.slug\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\thighestPresetObjectWithSameSlug[\n\t\t\t\t\t\t\t\tpresetProperty\n\t\t\t\t\t\t\t] === presetObject[ presetProperty ]\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\treturn presetObject;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function getPresetVariableFromValue(\n\tfeatures,\n\tblockName,\n\tvariableStylePath,\n\tpresetPropertyValue\n) {\n\tif ( ! presetPropertyValue ) {\n\t\treturn presetPropertyValue;\n\t}\n\n\tconst cssVarInfix = STYLE_PATH_TO_CSS_VAR_INFIX[ variableStylePath ];\n\n\tconst metadata = PRESET_METADATA.find(\n\t\t( data ) => data.cssVarInfix === cssVarInfix\n\t);\n\n\tif ( ! metadata ) {\n\t\t// The property doesn't have preset data\n\t\t// so the value should be returned as it is.\n\t\treturn presetPropertyValue;\n\t}\n\tconst { valueKey, path } = metadata;\n\n\tconst presetObject = findInPresetsBy(\n\t\tfeatures,\n\t\tblockName,\n\t\tpath,\n\t\tvalueKey,\n\t\tpresetPropertyValue\n\t);\n\n\tif ( ! presetObject ) {\n\t\t// Value wasn't found in the presets,\n\t\t// so it must be a custom value.\n\t\treturn presetPropertyValue;\n\t}\n\n\treturn `var:preset|${ cssVarInfix }|${ presetObject.slug }`;\n}\n\nfunction getValueFromPresetVariable(\n\tfeatures,\n\tblockName,\n\tvariable,\n\t[ presetType, slug ]\n) {\n\tconst metadata = PRESET_METADATA.find(\n\t\t( data ) => data.cssVarInfix === presetType\n\t);\n\tif ( ! metadata ) {\n\t\treturn variable;\n\t}\n\n\tconst presetObject = findInPresetsBy(\n\t\tfeatures.settings,\n\t\tblockName,\n\t\tmetadata.path,\n\t\t'slug',\n\t\tslug\n\t);\n\n\tif ( presetObject ) {\n\t\tconst { valueKey } = metadata;\n\t\tconst result = presetObject[ valueKey ];\n\t\treturn getValueFromVariable( features, blockName, result );\n\t}\n\n\treturn variable;\n}\n\nfunction getValueFromCustomVariable( features, blockName, variable, path ) {\n\tconst result =\n\t\tgetValueFromObjectPath( features.settings, [\n\t\t\t'blocks',\n\t\t\tblockName,\n\t\t\t'custom',\n\t\t\t...path,\n\t\t] ) ??\n\t\tgetValueFromObjectPath( features.settings, [ 'custom', ...path ] );\n\tif ( ! result ) {\n\t\treturn variable;\n\t}\n\t// A variable may reference another variable so we need recursion until we find the value.\n\treturn getValueFromVariable( features, blockName, result );\n}\n\n/**\n * Attempts to fetch the value of a theme.json CSS variable.\n *\n * @param {Object}   features  GlobalStylesContext config, e.g., user, base or merged. Represents the theme.json tree.\n * @param {string}   blockName The name of a block as represented in the styles property. E.g., 'root' for root-level, and 'core/${blockName}' for blocks.\n * @param {string|*} variable  An incoming style value. A CSS var value is expected, but it could be any value.\n * @return {string|*|{ref}} The value of the CSS var, if found. If not found, the passed variable argument.\n */\nexport function getValueFromVariable( features, blockName, variable ) {\n\tif ( ! variable || typeof variable !== 'string' ) {\n\t\tif ( variable?.ref && typeof variable?.ref === 'string' ) {\n\t\t\tconst refPath = variable.ref.split( '.' );\n\t\t\tvariable = getValueFromObjectPath( features, refPath );\n\t\t\t// Presence of another ref indicates a reference to another dynamic value.\n\t\t\t// Pointing to another dynamic value is not supported.\n\t\t\tif ( ! variable || !! variable?.ref ) {\n\t\t\t\treturn variable;\n\t\t\t}\n\t\t} else {\n\t\t\treturn variable;\n\t\t}\n\t}\n\tconst USER_VALUE_PREFIX = 'var:';\n\tconst THEME_VALUE_PREFIX = 'var(--wp--';\n\tconst THEME_VALUE_SUFFIX = ')';\n\n\tlet parsedVar;\n\n\tif ( variable.startsWith( USER_VALUE_PREFIX ) ) {\n\t\tparsedVar = variable.slice( USER_VALUE_PREFIX.length ).split( '|' );\n\t} else if (\n\t\tvariable.startsWith( THEME_VALUE_PREFIX ) &&\n\t\tvariable.endsWith( THEME_VALUE_SUFFIX )\n\t) {\n\t\tparsedVar = variable\n\t\t\t.slice( THEME_VALUE_PREFIX.length, -THEME_VALUE_SUFFIX.length )\n\t\t\t.split( '--' );\n\t} else {\n\t\t// We don't know how to parse the value: either is raw of uses complex CSS such as `calc(1px * var(--wp--variable) )`\n\t\treturn variable;\n\t}\n\n\tconst [ type, ...path ] = parsedVar;\n\tif ( type === 'preset' ) {\n\t\treturn getValueFromPresetVariable(\n\t\t\tfeatures,\n\t\t\tblockName,\n\t\t\tvariable,\n\t\t\tpath\n\t\t);\n\t}\n\tif ( type === 'custom' ) {\n\t\treturn getValueFromCustomVariable(\n\t\t\tfeatures,\n\t\t\tblockName,\n\t\t\tvariable,\n\t\t\tpath\n\t\t);\n\t}\n\treturn variable;\n}\n\n/**\n * Function that scopes a selector with another one. This works a bit like\n * SCSS nesting except the `&` operator isn't supported.\n *\n * @example\n * ```js\n * const scope = '.a, .b .c';\n * const selector = '> .x, .y';\n * const merged = scopeSelector( scope, selector );\n * // merged is '.a > .x, .a .y, .b .c > .x, .b .c .y'\n * ```\n *\n * @param {string} scope    Selector to scope to.\n * @param {string} selector Original selector.\n *\n * @return {string} Scoped selector.\n */\nexport function scopeSelector( scope, selector ) {\n\tconst scopes = scope.split( ',' );\n\tconst selectors = selector.split( ',' );\n\n\tconst selectorsScoped = [];\n\tscopes.forEach( ( outer ) => {\n\t\tselectors.forEach( ( inner ) => {\n\t\t\tselectorsScoped.push( `${ outer.trim() } ${ inner.trim() }` );\n\t\t} );\n\t} );\n\n\treturn selectorsScoped.join( ', ' );\n}\n\n/**\n * Appends a sub-selector to an existing one.\n *\n * Given the compounded `selector` \"h1, h2, h3\"\n * and the `toAppend` selector \".some-class\" the result will be\n * \"h1.some-class, h2.some-class, h3.some-class\".\n *\n * @param {string} selector Original selector.\n * @param {string} toAppend Selector to append.\n *\n * @return {string} The new selector.\n */\nexport function appendToSelector( selector, toAppend ) {\n\tif ( ! selector.includes( ',' ) ) {\n\t\treturn selector + toAppend;\n\t}\n\tconst selectors = selector.split( ',' );\n\tconst newSelectors = selectors.map( ( sel ) => sel + toAppend );\n\treturn newSelectors.join( ',' );\n}\n\n/**\n * Compares global style variations according to their styles and settings properties.\n *\n * @example\n * ```js\n * const globalStyles = { styles: { typography: { fontSize: '10px' } }, settings: {} };\n * const variation = { styles: { typography: { fontSize: '10000px' } }, settings: {} };\n * const isEqual = areGlobalStyleConfigsEqual( globalStyles, variation );\n * // false\n * ```\n *\n * @param {Object} original  A global styles object.\n * @param {Object} variation A global styles object.\n *\n * @return {boolean} Whether `original` and `variation` match.\n */\nexport function areGlobalStyleConfigsEqual( original, variation ) {\n\tif ( typeof original !== 'object' || typeof variation !== 'object' ) {\n\t\treturn original === variation;\n\t}\n\treturn (\n\t\tfastDeepEqual( original?.styles, variation?.styles ) &&\n\t\tfastDeepEqual( original?.settings, variation?.settings )\n\t);\n}\n\n/**\n * Generates the selector for a block style variation by creating the\n * appropriate CSS class and adding it to the ancestor portion of the block's\n * selector.\n *\n * For example, take the Button block which has a compound selector:\n * `.wp-block-button .wp-block-button__link`. With a variation named 'custom',\n * the class `.is-style-custom` should be added to the `.wp-block-button`\n * ancestor only.\n *\n * This function will take into account comma separated and complex selectors.\n *\n * @param {string} variation     Name for the variation.\n * @param {string} blockSelector CSS selector for the block.\n *\n * @return {string} CSS selector for the block style variation.\n */\nexport function getBlockStyleVariationSelector( variation, blockSelector ) {\n\tconst variationClass = `.is-style-${ variation }`;\n\n\tif ( ! blockSelector ) {\n\t\treturn variationClass;\n\t}\n\n\tconst ancestorRegex = /((?::\\([^)]+\\))?\\s*)([^\\s:]+)/;\n\tconst addVariationClass = ( _match, group1, group2 ) => {\n\t\treturn group1 + group2 + variationClass;\n\t};\n\n\tconst result = blockSelector\n\t\t.split( ',' )\n\t\t.map( ( part ) => part.replace( ancestorRegex, addVariationClass ) );\n\n\treturn result.join( ',' );\n}\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { createContext } from '@wordpress/element';\r\n\r\nexport const DEFAULT_GLOBAL_STYLES_CONTEXT = {\r\n\tuser: {},\r\n\tbase: {},\r\n\tmerged: {},\r\n\tsetUserConfig: () => {},\r\n};\r\n\r\nexport const GlobalStylesContext = createContext(\r\n\tDEFAULT_GLOBAL_STYLES_CONTEXT\r\n);\r\n","/**\n * External dependencies\n */\nimport fastDeepEqual from 'fast-deep-equal/es6';\n\n/**\n * WordPress dependencies\n */\nimport { useContext, useCallback, useMemo } from '@wordpress/element';\nimport { useSelect } from '@wordpress/data';\nimport { store as blocksStore } from '@wordpress/blocks';\nimport { _x } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { getValueFromVariable, getPresetVariableFromValue } from './utils';\nimport { getValueFromObjectPath, setImmutably } from '../../utils/object';\nimport { GlobalStylesContext } from './context';\nimport { unlock } from '../../lock-unlock';\n\nconst EMPTY_CONFIG = { settings: {}, styles: {} };\n\nconst VALID_SETTINGS = [\n\t'appearanceTools',\n\t'useRootPaddingAwareAlignments',\n\t'background.backgroundImage',\n\t'background.backgroundRepeat',\n\t'background.backgroundSize',\n\t'background.backgroundPosition',\n\t'border.color',\n\t'border.radius',\n\t'border.style',\n\t'border.width',\n\t'shadow.presets',\n\t'shadow.defaultPresets',\n\t'color.background',\n\t'color.button',\n\t'color.caption',\n\t'color.custom',\n\t'color.customDuotone',\n\t'color.customGradient',\n\t'color.defaultDuotone',\n\t'color.defaultGradients',\n\t'color.defaultPalette',\n\t'color.duotone',\n\t'color.gradients',\n\t'color.heading',\n\t'color.link',\n\t'color.palette',\n\t'color.text',\n\t'custom',\n\t'dimensions.aspectRatio',\n\t'dimensions.minHeight',\n\t'layout.contentSize',\n\t'layout.definitions',\n\t'layout.wideSize',\n\t'lightbox.enabled',\n\t'lightbox.allowEditing',\n\t'position.fixed',\n\t'position.sticky',\n\t'spacing.customSpacingSize',\n\t'spacing.spacingSizes',\n\t'spacing.spacingScale',\n\t'spacing.blockGap',\n\t'spacing.margin',\n\t'spacing.padding',\n\t'spacing.units',\n\t'typography.fluid',\n\t'typography.customFontSize',\n\t'typography.dropCap',\n\t'typography.fontFamilies',\n\t'typography.fontSizes',\n\t'typography.fontStyle',\n\t'typography.fontWeight',\n\t'typography.letterSpacing',\n\t'typography.lineHeight',\n\t'typography.textColumns',\n\t'typography.textDecoration',\n\t'typography.textTransform',\n\t'typography.writingMode',\n];\n\nexport const useGlobalStylesReset = () => {\n\tconst { user: config, setUserConfig } = useContext( GlobalStylesContext );\n\tconst canReset = !! config && ! fastDeepEqual( config, EMPTY_CONFIG );\n\treturn [\n\t\tcanReset,\n\t\tuseCallback(\n\t\t\t() => setUserConfig( () => EMPTY_CONFIG ),\n\t\t\t[ setUserConfig ]\n\t\t),\n\t];\n};\n\nexport function useGlobalSetting( propertyPath, blockName, source = 'all' ) {\n\tconst { setUserConfig, ...configs } = useContext( GlobalStylesContext );\n\tconst appendedBlockPath = blockName ? '.blocks.' + blockName : '';\n\tconst appendedPropertyPath = propertyPath ? '.' + propertyPath : '';\n\tconst contextualPath = `settings${ appendedBlockPath }${ appendedPropertyPath }`;\n\tconst globalPath = `settings${ appendedPropertyPath }`;\n\tconst sourceKey = source === 'all' ? 'merged' : source;\n\n\tconst settingValue = useMemo( () => {\n\t\tconst configToUse = configs[ sourceKey ];\n\t\tif ( ! configToUse ) {\n\t\t\tthrow 'Unsupported source';\n\t\t}\n\n\t\tif ( propertyPath ) {\n\t\t\treturn (\n\t\t\t\tgetValueFromObjectPath( configToUse, contextualPath ) ??\n\t\t\t\tgetValueFromObjectPath( configToUse, globalPath )\n\t\t\t);\n\t\t}\n\n\t\tlet result = {};\n\t\tVALID_SETTINGS.forEach( ( setting ) => {\n\t\t\tconst value =\n\t\t\t\tgetValueFromObjectPath(\n\t\t\t\t\tconfigToUse,\n\t\t\t\t\t`settings${ appendedBlockPath }.${ setting }`\n\t\t\t\t) ??\n\t\t\t\tgetValueFromObjectPath( configToUse, `settings.${ setting }` );\n\t\t\tif ( value !== undefined ) {\n\t\t\t\tresult = setImmutably( result, setting.split( '.' ), value );\n\t\t\t}\n\t\t} );\n\t\treturn result;\n\t}, [\n\t\tconfigs,\n\t\tsourceKey,\n\t\tpropertyPath,\n\t\tcontextualPath,\n\t\tglobalPath,\n\t\tappendedBlockPath,\n\t] );\n\n\tconst setSetting = ( newValue ) => {\n\t\tsetUserConfig( ( currentConfig ) =>\n\t\t\tsetImmutably( currentConfig, contextualPath.split( '.' ), newValue )\n\t\t);\n\t};\n\treturn [ settingValue, setSetting ];\n}\n\nexport function useGlobalStyle(\n\tpath,\n\tblockName,\n\tsource = 'all',\n\t{ shouldDecodeEncode = true } = {}\n) {\n\tconst {\n\t\tmerged: mergedConfig,\n\t\tbase: baseConfig,\n\t\tuser: userConfig,\n\t\tsetUserConfig,\n\t} = useContext( GlobalStylesContext );\n\tconst appendedPath = path ? '.' + path : '';\n\tconst finalPath = ! blockName\n\t\t? `styles${ appendedPath }`\n\t\t: `styles.blocks.${ blockName }${ appendedPath }`;\n\n\tconst setStyle = ( newValue ) => {\n\t\tsetUserConfig( ( currentConfig ) =>\n\t\t\tsetImmutably(\n\t\t\t\tcurrentConfig,\n\t\t\t\tfinalPath.split( '.' ),\n\t\t\t\tshouldDecodeEncode\n\t\t\t\t\t? getPresetVariableFromValue(\n\t\t\t\t\t\t\tmergedConfig.settings,\n\t\t\t\t\t\t\tblockName,\n\t\t\t\t\t\t\tpath,\n\t\t\t\t\t\t\tnewValue\n\t\t\t\t\t  )\n\t\t\t\t\t: newValue\n\t\t\t)\n\t\t);\n\t};\n\n\tlet rawResult, result;\n\tswitch ( source ) {\n\t\tcase 'all':\n\t\t\trawResult = getValueFromObjectPath( mergedConfig, finalPath );\n\t\t\tresult = shouldDecodeEncode\n\t\t\t\t? getValueFromVariable( mergedConfig, blockName, rawResult )\n\t\t\t\t: rawResult;\n\t\t\tbreak;\n\t\tcase 'user':\n\t\t\trawResult = getValueFromObjectPath( userConfig, finalPath );\n\t\t\tresult = shouldDecodeEncode\n\t\t\t\t? getValueFromVariable( mergedConfig, blockName, rawResult )\n\t\t\t\t: rawResult;\n\t\t\tbreak;\n\t\tcase 'base':\n\t\t\trawResult = getValueFromObjectPath( baseConfig, finalPath );\n\t\t\tresult = shouldDecodeEncode\n\t\t\t\t? getValueFromVariable( baseConfig, blockName, rawResult )\n\t\t\t\t: rawResult;\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tthrow 'Unsupported source';\n\t}\n\n\treturn [ result, setStyle ];\n}\n\n/**\n * React hook that overrides a global settings object with block and element specific settings.\n *\n * @param {Object}     parentSettings Settings object.\n * @param {blockName?} blockName      Block name.\n * @param {element?}   element        Element name.\n *\n * @return {Object} Merge of settings and supports.\n */\nexport function useSettingsForBlockElement(\n\tparentSettings,\n\tblockName,\n\telement\n) {\n\tconst { supportedStyles, supports } = useSelect(\n\t\t( select ) => {\n\t\t\treturn {\n\t\t\t\tsupportedStyles: unlock(\n\t\t\t\t\tselect( blocksStore )\n\t\t\t\t).getSupportedStyles( blockName, element ),\n\t\t\t\tsupports:\n\t\t\t\t\tselect( blocksStore ).getBlockType( blockName )?.supports,\n\t\t\t};\n\t\t},\n\t\t[ blockName, element ]\n\t);\n\n\treturn useMemo( () => {\n\t\tconst updatedSettings = { ...parentSettings };\n\n\t\tif ( ! supportedStyles.includes( 'fontSize' ) ) {\n\t\t\tupdatedSettings.typography = {\n\t\t\t\t...updatedSettings.typography,\n\t\t\t\tfontSizes: {},\n\t\t\t\tcustomFontSize: false,\n\t\t\t};\n\t\t}\n\n\t\tif ( ! supportedStyles.includes( 'fontFamily' ) ) {\n\t\t\tupdatedSettings.typography = {\n\t\t\t\t...updatedSettings.typography,\n\t\t\t\tfontFamilies: {},\n\t\t\t};\n\t\t}\n\n\t\tupdatedSettings.color = {\n\t\t\t...updatedSettings.color,\n\t\t\ttext:\n\t\t\t\tupdatedSettings.color?.text &&\n\t\t\t\tsupportedStyles.includes( 'color' ),\n\t\t\tbackground:\n\t\t\t\tupdatedSettings.color?.background &&\n\t\t\t\t( supportedStyles.includes( 'background' ) ||\n\t\t\t\t\tsupportedStyles.includes( 'backgroundColor' ) ),\n\t\t\tbutton:\n\t\t\t\tupdatedSettings.color?.button &&\n\t\t\t\tsupportedStyles.includes( 'buttonColor' ),\n\t\t\theading:\n\t\t\t\tupdatedSettings.color?.heading &&\n\t\t\t\tsupportedStyles.includes( 'headingColor' ),\n\t\t\tlink:\n\t\t\t\tupdatedSettings.color?.link &&\n\t\t\t\tsupportedStyles.includes( 'linkColor' ),\n\t\t\tcaption:\n\t\t\t\tupdatedSettings.color?.caption &&\n\t\t\t\tsupportedStyles.includes( 'captionColor' ),\n\t\t};\n\n\t\t// Some blocks can enable background colors but disable gradients.\n\t\tif ( ! supportedStyles.includes( 'background' ) ) {\n\t\t\tupdatedSettings.color.gradients = [];\n\t\t\tupdatedSettings.color.customGradient = false;\n\t\t}\n\n\t\t// If filters are not supported by the block/element, disable duotone.\n\t\tif ( ! supportedStyles.includes( 'filter' ) ) {\n\t\t\tupdatedSettings.color.defaultDuotone = false;\n\t\t\tupdatedSettings.color.customDuotone = false;\n\t\t}\n\n\t\t[\n\t\t\t'lineHeight',\n\t\t\t'fontStyle',\n\t\t\t'fontWeight',\n\t\t\t'letterSpacing',\n\t\t\t'textTransform',\n\t\t\t'textDecoration',\n\t\t\t'writingMode',\n\t\t].forEach( ( key ) => {\n\t\t\tif ( ! supportedStyles.includes( key ) ) {\n\t\t\t\tupdatedSettings.typography = {\n\t\t\t\t\t...updatedSettings.typography,\n\t\t\t\t\t[ key ]: false,\n\t\t\t\t};\n\t\t\t}\n\t\t} );\n\n\t\t// The column-count style is named text column to reduce confusion with\n\t\t// the columns block and manage expectations from the support.\n\t\t// See: https://github.com/WordPress/gutenberg/pull/33587\n\t\tif ( ! supportedStyles.includes( 'columnCount' ) ) {\n\t\t\tupdatedSettings.typography = {\n\t\t\t\t...updatedSettings.typography,\n\t\t\t\ttextColumns: false,\n\t\t\t};\n\t\t}\n\n\t\t[ 'contentSize', 'wideSize' ].forEach( ( key ) => {\n\t\t\tif ( ! supportedStyles.includes( key ) ) {\n\t\t\t\tupdatedSettings.layout = {\n\t\t\t\t\t...updatedSettings.layout,\n\t\t\t\t\t[ key ]: false,\n\t\t\t\t};\n\t\t\t}\n\t\t} );\n\n\t\t[ 'padding', 'margin', 'blockGap' ].forEach( ( key ) => {\n\t\t\tif ( ! supportedStyles.includes( key ) ) {\n\t\t\t\tupdatedSettings.spacing = {\n\t\t\t\t\t...updatedSettings.spacing,\n\t\t\t\t\t[ key ]: false,\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tconst sides = Array.isArray( supports?.spacing?.[ key ] )\n\t\t\t\t? supports?.spacing?.[ key ]\n\t\t\t\t: supports?.spacing?.[ key ]?.sides;\n\t\t\t// Check if spacing type is supported before adding sides.\n\t\t\tif ( sides?.length && updatedSettings.spacing?.[ key ] ) {\n\t\t\t\tupdatedSettings.spacing = {\n\t\t\t\t\t...updatedSettings.spacing,\n\t\t\t\t\t[ key ]: {\n\t\t\t\t\t\t...updatedSettings.spacing?.[ key ],\n\t\t\t\t\t\tsides,\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t}\n\t\t} );\n\n\t\t[ 'aspectRatio', 'minHeight' ].forEach( ( key ) => {\n\t\t\tif ( ! supportedStyles.includes( key ) ) {\n\t\t\t\tupdatedSettings.dimensions = {\n\t\t\t\t\t...updatedSettings.dimensions,\n\t\t\t\t\t[ key ]: false,\n\t\t\t\t};\n\t\t\t}\n\t\t} );\n\n\t\t[ 'radius', 'color', 'style', 'width' ].forEach( ( key ) => {\n\t\t\tif (\n\t\t\t\t! supportedStyles.includes(\n\t\t\t\t\t'border' + key.charAt( 0 ).toUpperCase() + key.slice( 1 )\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\tupdatedSettings.border = {\n\t\t\t\t\t...updatedSettings.border,\n\t\t\t\t\t[ key ]: false,\n\t\t\t\t};\n\t\t\t}\n\t\t} );\n\n\t\tupdatedSettings.shadow = supportedStyles.includes( 'shadow' )\n\t\t\t? updatedSettings.shadow\n\t\t\t: false;\n\n\t\treturn updatedSettings;\n\t}, [ parentSettings, supportedStyles, supports ] );\n}\n\nexport function useColorsPerOrigin( settings ) {\n\tconst customColors = settings?.color?.palette?.custom;\n\tconst themeColors = settings?.color?.palette?.theme;\n\tconst defaultColors = settings?.color?.palette?.default;\n\tconst shouldDisplayDefaultColors = settings?.color?.defaultPalette;\n\n\treturn useMemo( () => {\n\t\tconst result = [];\n\t\tif ( themeColors && themeColors.length ) {\n\t\t\tresult.push( {\n\t\t\t\tname: _x(\n\t\t\t\t\t'Theme',\n\t\t\t\t\t'Indicates this palette comes from the theme.'\n\t\t\t\t),\n\t\t\t\tcolors: themeColors,\n\t\t\t} );\n\t\t}\n\t\tif (\n\t\t\tshouldDisplayDefaultColors &&\n\t\t\tdefaultColors &&\n\t\t\tdefaultColors.length\n\t\t) {\n\t\t\tresult.push( {\n\t\t\t\tname: _x(\n\t\t\t\t\t'Default',\n\t\t\t\t\t'Indicates this palette comes from WordPress.'\n\t\t\t\t),\n\t\t\t\tcolors: defaultColors,\n\t\t\t} );\n\t\t}\n\t\tif ( customColors && customColors.length ) {\n\t\t\tresult.push( {\n\t\t\t\tname: _x(\n\t\t\t\t\t'Custom',\n\t\t\t\t\t'Indicates this palette is created by the user.'\n\t\t\t\t),\n\t\t\t\tcolors: customColors,\n\t\t\t} );\n\t\t}\n\t\treturn result;\n\t}, [\n\t\tcustomColors,\n\t\tthemeColors,\n\t\tdefaultColors,\n\t\tshouldDisplayDefaultColors,\n\t] );\n}\n\nexport function useGradientsPerOrigin( settings ) {\n\tconst customGradients = settings?.color?.gradients?.custom;\n\tconst themeGradients = settings?.color?.gradients?.theme;\n\tconst defaultGradients = settings?.color?.gradients?.default;\n\tconst shouldDisplayDefaultGradients = settings?.color?.defaultGradients;\n\n\treturn useMemo( () => {\n\t\tconst result = [];\n\t\tif ( themeGradients && themeGradients.length ) {\n\t\t\tresult.push( {\n\t\t\t\tname: _x(\n\t\t\t\t\t'Theme',\n\t\t\t\t\t'Indicates this palette comes from the theme.'\n\t\t\t\t),\n\t\t\t\tgradients: themeGradients,\n\t\t\t} );\n\t\t}\n\t\tif (\n\t\t\tshouldDisplayDefaultGradients &&\n\t\t\tdefaultGradients &&\n\t\t\tdefaultGradients.length\n\t\t) {\n\t\t\tresult.push( {\n\t\t\t\tname: _x(\n\t\t\t\t\t'Default',\n\t\t\t\t\t'Indicates this palette comes from WordPress.'\n\t\t\t\t),\n\t\t\t\tgradients: defaultGradients,\n\t\t\t} );\n\t\t}\n\t\tif ( customGradients && customGradients.length ) {\n\t\t\tresult.push( {\n\t\t\t\tname: _x(\n\t\t\t\t\t'Custom',\n\t\t\t\t\t'Indicates this palette is created by the user.'\n\t\t\t\t),\n\t\t\t\tgradients: customGradients,\n\t\t\t} );\n\t\t}\n\t\treturn result;\n\t}, [\n\t\tcustomGradients,\n\t\tthemeGradients,\n\t\tdefaultGradients,\n\t\tshouldDisplayDefaultGradients,\n\t] );\n}\n","/**\n * WordPress dependencies\n */\nimport { getBlockSupport } from '@wordpress/blocks';\nimport { memo, useMemo, useEffect, useId, useState } from '@wordpress/element';\nimport { useDispatch } from '@wordpress/data';\nimport { createHigherOrderComponent } from '@wordpress/compose';\nimport { addFilter } from '@wordpress/hooks';\n\n/**\n * Internal dependencies\n */\nimport {\n\tuseBlockEditContext,\n\tmayDisplayControlsKey,\n\tmayDisplayParentControlsKey,\n} from '../components/block-edit/context';\nimport { useSettings } from '../components';\nimport { useSettingsForBlockElement } from '../components/global-styles/hooks';\nimport { getValueFromObjectPath, setImmutably } from '../utils/object';\nimport { store as blockEditorStore } from '../store';\nimport { unlock } from '../lock-unlock';\n/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * Removed falsy values from nested object.\n *\n * @param {*} object\n * @return {*} Object cleaned from falsy values\n */\nexport const cleanEmptyObject = ( object ) => {\n\tif (\n\t\tobject === null ||\n\t\ttypeof object !== 'object' ||\n\t\tArray.isArray( object )\n\t) {\n\t\treturn object;\n\t}\n\n\tconst cleanedNestedObjects = Object.entries( object )\n\t\t.map( ( [ key, value ] ) => [ key, cleanEmptyObject( value ) ] )\n\t\t.filter( ( [ , value ] ) => value !== undefined );\n\treturn ! cleanedNestedObjects.length\n\t\t? undefined\n\t\t: Object.fromEntries( cleanedNestedObjects );\n};\n\nexport function transformStyles(\n\tactiveSupports,\n\tmigrationPaths,\n\tresult,\n\tsource,\n\tindex,\n\tresults\n) {\n\t// If there are no active supports return early.\n\tif (\n\t\tObject.values( activeSupports ?? {} ).every(\n\t\t\t( isActive ) => ! isActive\n\t\t)\n\t) {\n\t\treturn result;\n\t}\n\t// If the condition verifies we are probably in the presence of a wrapping transform\n\t// e.g: nesting paragraphs in a group or columns and in that case the styles should not be transformed.\n\tif ( results.length === 1 && result.innerBlocks.length === source.length ) {\n\t\treturn result;\n\t}\n\t// For cases where we have a transform from one block to multiple blocks\n\t// or multiple blocks to one block we apply the styles of the first source block\n\t// to the result(s).\n\tlet referenceBlockAttributes = source[ 0 ]?.attributes;\n\t// If we are in presence of transform between more than one block in the source\n\t// that has more than one block in the result\n\t// we apply the styles on source N to the result N,\n\t// if source N does not exists we do nothing.\n\tif ( results.length > 1 && source.length > 1 ) {\n\t\tif ( source[ index ] ) {\n\t\t\treferenceBlockAttributes = source[ index ]?.attributes;\n\t\t} else {\n\t\t\treturn result;\n\t\t}\n\t}\n\tlet returnBlock = result;\n\tObject.entries( activeSupports ).forEach( ( [ support, isActive ] ) => {\n\t\tif ( isActive ) {\n\t\t\tmigrationPaths[ support ].forEach( ( path ) => {\n\t\t\t\tconst styleValue = getValueFromObjectPath(\n\t\t\t\t\treferenceBlockAttributes,\n\t\t\t\t\tpath\n\t\t\t\t);\n\t\t\t\tif ( styleValue ) {\n\t\t\t\t\treturnBlock = {\n\t\t\t\t\t\t...returnBlock,\n\t\t\t\t\t\tattributes: setImmutably(\n\t\t\t\t\t\t\treturnBlock.attributes,\n\t\t\t\t\t\t\tpath,\n\t\t\t\t\t\t\tstyleValue\n\t\t\t\t\t\t),\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t} );\n\treturn returnBlock;\n}\n\n/**\n * Check whether serialization of specific block support feature or set should\n * be skipped.\n *\n * @param {string|Object} blockNameOrType Block name or block type object.\n * @param {string}        featureSet      Name of block support feature set.\n * @param {string}        feature         Name of the individual feature to check.\n *\n * @return {boolean} Whether serialization should occur.\n */\nexport function shouldSkipSerialization(\n\tblockNameOrType,\n\tfeatureSet,\n\tfeature\n) {\n\tconst support = getBlockSupport( blockNameOrType, featureSet );\n\tconst skipSerialization = support?.__experimentalSkipSerialization;\n\n\tif ( Array.isArray( skipSerialization ) ) {\n\t\treturn skipSerialization.includes( feature );\n\t}\n\n\treturn skipSerialization;\n}\n\nexport function useStyleOverride( { id, css, assets, __unstableType } = {} ) {\n\tconst { setStyleOverride, deleteStyleOverride } = unlock(\n\t\tuseDispatch( blockEditorStore )\n\t);\n\tconst fallbackId = useId();\n\tuseEffect( () => {\n\t\t// Unmount if there is CSS and assets are empty.\n\t\tif ( ! css && ! assets ) return;\n\t\tconst _id = id || fallbackId;\n\t\tsetStyleOverride( _id, {\n\t\t\tid,\n\t\t\tcss,\n\t\t\tassets,\n\t\t\t__unstableType,\n\t\t} );\n\t\treturn () => {\n\t\t\tdeleteStyleOverride( _id );\n\t\t};\n\t}, [\n\t\tid,\n\t\tcss,\n\t\tassets,\n\t\t__unstableType,\n\t\tfallbackId,\n\t\tsetStyleOverride,\n\t\tdeleteStyleOverride,\n\t] );\n}\n\n/**\n * Based on the block and its context, returns an object of all the block settings.\n * This object can be passed as a prop to all the Styles UI components\n * (TypographyPanel, DimensionsPanel...).\n *\n * @param {string} name         Block name.\n * @param {*}      parentLayout Parent layout.\n *\n * @return {Object} Settings object.\n */\nexport function useBlockSettings( name, parentLayout ) {\n\tconst [\n\t\tbackgroundImage,\n\t\tbackgroundSize,\n\t\tcustomFontFamilies,\n\t\tdefaultFontFamilies,\n\t\tthemeFontFamilies,\n\t\tcustomFontSizes,\n\t\tdefaultFontSizes,\n\t\tthemeFontSizes,\n\t\tcustomFontSize,\n\t\tfontStyle,\n\t\tfontWeight,\n\t\tlineHeight,\n\t\ttextColumns,\n\t\ttextDecoration,\n\t\twritingMode,\n\t\ttextTransform,\n\t\tletterSpacing,\n\t\tpadding,\n\t\tmargin,\n\t\tblockGap,\n\t\tspacingSizes,\n\t\tunits,\n\t\taspectRatio,\n\t\tminHeight,\n\t\tlayout,\n\t\tborderColor,\n\t\tborderRadius,\n\t\tborderStyle,\n\t\tborderWidth,\n\t\tcustomColorsEnabled,\n\t\tcustomColors,\n\t\tcustomDuotone,\n\t\tthemeColors,\n\t\tdefaultColors,\n\t\tdefaultPalette,\n\t\tdefaultDuotone,\n\t\tuserDuotonePalette,\n\t\tthemeDuotonePalette,\n\t\tdefaultDuotonePalette,\n\t\tuserGradientPalette,\n\t\tthemeGradientPalette,\n\t\tdefaultGradientPalette,\n\t\tdefaultGradients,\n\t\tareCustomGradientsEnabled,\n\t\tisBackgroundEnabled,\n\t\tisLinkEnabled,\n\t\tisTextEnabled,\n\t\tisHeadingEnabled,\n\t\tisButtonEnabled,\n\t\tshadow,\n\t] = useSettings(\n\t\t'background.backgroundImage',\n\t\t'background.backgroundSize',\n\t\t'typography.fontFamilies.custom',\n\t\t'typography.fontFamilies.default',\n\t\t'typography.fontFamilies.theme',\n\t\t'typography.fontSizes.custom',\n\t\t'typography.fontSizes.default',\n\t\t'typography.fontSizes.theme',\n\t\t'typography.customFontSize',\n\t\t'typography.fontStyle',\n\t\t'typography.fontWeight',\n\t\t'typography.lineHeight',\n\t\t'typography.textColumns',\n\t\t'typography.textDecoration',\n\t\t'typography.writingMode',\n\t\t'typography.textTransform',\n\t\t'typography.letterSpacing',\n\t\t'spacing.padding',\n\t\t'spacing.margin',\n\t\t'spacing.blockGap',\n\t\t'spacing.spacingSizes',\n\t\t'spacing.units',\n\t\t'dimensions.aspectRatio',\n\t\t'dimensions.minHeight',\n\t\t'layout',\n\t\t'border.color',\n\t\t'border.radius',\n\t\t'border.style',\n\t\t'border.width',\n\t\t'color.custom',\n\t\t'color.palette.custom',\n\t\t'color.customDuotone',\n\t\t'color.palette.theme',\n\t\t'color.palette.default',\n\t\t'color.defaultPalette',\n\t\t'color.defaultDuotone',\n\t\t'color.duotone.custom',\n\t\t'color.duotone.theme',\n\t\t'color.duotone.default',\n\t\t'color.gradients.custom',\n\t\t'color.gradients.theme',\n\t\t'color.gradients.default',\n\t\t'color.defaultGradients',\n\t\t'color.customGradient',\n\t\t'color.background',\n\t\t'color.link',\n\t\t'color.text',\n\t\t'color.heading',\n\t\t'color.button',\n\t\t'shadow'\n\t);\n\n\tconst rawSettings = useMemo( () => {\n\t\treturn {\n\t\t\tbackground: {\n\t\t\t\tbackgroundImage,\n\t\t\t\tbackgroundSize,\n\t\t\t},\n\t\t\tcolor: {\n\t\t\t\tpalette: {\n\t\t\t\t\tcustom: customColors,\n\t\t\t\t\ttheme: themeColors,\n\t\t\t\t\tdefault: defaultColors,\n\t\t\t\t},\n\t\t\t\tgradients: {\n\t\t\t\t\tcustom: userGradientPalette,\n\t\t\t\t\ttheme: themeGradientPalette,\n\t\t\t\t\tdefault: defaultGradientPalette,\n\t\t\t\t},\n\t\t\t\tduotone: {\n\t\t\t\t\tcustom: userDuotonePalette,\n\t\t\t\t\ttheme: themeDuotonePalette,\n\t\t\t\t\tdefault: defaultDuotonePalette,\n\t\t\t\t},\n\t\t\t\tdefaultGradients,\n\t\t\t\tdefaultPalette,\n\t\t\t\tdefaultDuotone,\n\t\t\t\tcustom: customColorsEnabled,\n\t\t\t\tcustomGradient: areCustomGradientsEnabled,\n\t\t\t\tcustomDuotone,\n\t\t\t\tbackground: isBackgroundEnabled,\n\t\t\t\tlink: isLinkEnabled,\n\t\t\t\theading: isHeadingEnabled,\n\t\t\t\tbutton: isButtonEnabled,\n\t\t\t\ttext: isTextEnabled,\n\t\t\t},\n\t\t\ttypography: {\n\t\t\t\tfontFamilies: {\n\t\t\t\t\tcustom: customFontFamilies,\n\t\t\t\t\tdefault: defaultFontFamilies,\n\t\t\t\t\ttheme: themeFontFamilies,\n\t\t\t\t},\n\t\t\t\tfontSizes: {\n\t\t\t\t\tcustom: customFontSizes,\n\t\t\t\t\tdefault: defaultFontSizes,\n\t\t\t\t\ttheme: themeFontSizes,\n\t\t\t\t},\n\t\t\t\tcustomFontSize,\n\t\t\t\tfontStyle,\n\t\t\t\tfontWeight,\n\t\t\t\tlineHeight,\n\t\t\t\ttextColumns,\n\t\t\t\ttextDecoration,\n\t\t\t\ttextTransform,\n\t\t\t\tletterSpacing,\n\t\t\t\twritingMode,\n\t\t\t},\n\t\t\tspacing: {\n\t\t\t\tspacingSizes: {\n\t\t\t\t\tcustom: spacingSizes,\n\t\t\t\t},\n\t\t\t\tpadding,\n\t\t\t\tmargin,\n\t\t\t\tblockGap,\n\t\t\t\tunits,\n\t\t\t},\n\t\t\tborder: {\n\t\t\t\tcolor: borderColor,\n\t\t\t\tradius: borderRadius,\n\t\t\t\tstyle: borderStyle,\n\t\t\t\twidth: borderWidth,\n\t\t\t},\n\t\t\tdimensions: {\n\t\t\t\taspectRatio,\n\t\t\t\tminHeight,\n\t\t\t},\n\t\t\tlayout,\n\t\t\tparentLayout,\n\t\t\tshadow,\n\t\t};\n\t}, [\n\t\tbackgroundImage,\n\t\tbackgroundSize,\n\t\tcustomFontFamilies,\n\t\tdefaultFontFamilies,\n\t\tthemeFontFamilies,\n\t\tcustomFontSizes,\n\t\tdefaultFontSizes,\n\t\tthemeFontSizes,\n\t\tcustomFontSize,\n\t\tfontStyle,\n\t\tfontWeight,\n\t\tlineHeight,\n\t\ttextColumns,\n\t\ttextDecoration,\n\t\ttextTransform,\n\t\tletterSpacing,\n\t\twritingMode,\n\t\tpadding,\n\t\tmargin,\n\t\tblockGap,\n\t\tspacingSizes,\n\t\tunits,\n\t\taspectRatio,\n\t\tminHeight,\n\t\tlayout,\n\t\tparentLayout,\n\t\tborderColor,\n\t\tborderRadius,\n\t\tborderStyle,\n\t\tborderWidth,\n\t\tcustomColorsEnabled,\n\t\tcustomColors,\n\t\tcustomDuotone,\n\t\tthemeColors,\n\t\tdefaultColors,\n\t\tdefaultPalette,\n\t\tdefaultDuotone,\n\t\tuserDuotonePalette,\n\t\tthemeDuotonePalette,\n\t\tdefaultDuotonePalette,\n\t\tuserGradientPalette,\n\t\tthemeGradientPalette,\n\t\tdefaultGradientPalette,\n\t\tdefaultGradients,\n\t\tareCustomGradientsEnabled,\n\t\tisBackgroundEnabled,\n\t\tisLinkEnabled,\n\t\tisTextEnabled,\n\t\tisHeadingEnabled,\n\t\tisButtonEnabled,\n\t\tshadow,\n\t] );\n\n\treturn useSettingsForBlockElement( rawSettings, name );\n}\n\nexport function createBlockEditFilter( features ) {\n\t// We don't want block controls to re-render when typing inside a block.\n\t// `memo` will prevent re-renders unless props change, so only pass the\n\t// needed props and not the whole attributes object.\n\tfeatures = features.map( ( settings ) => {\n\t\treturn { ...settings, Edit: memo( settings.edit ) };\n\t} );\n\tconst withBlockEditHooks = createHigherOrderComponent(\n\t\t( OriginalBlockEdit ) => ( props ) => {\n\t\t\tconst context = useBlockEditContext();\n\t\t\t// CAUTION: code added before this line will be executed for all\n\t\t\t// blocks, not just those that support the feature! Code added\n\t\t\t// above this line should be carefully evaluated for its impact on\n\t\t\t// performance.\n\t\t\treturn [\n\t\t\t\t...features.map( ( feature, i ) => {\n\t\t\t\t\tconst {\n\t\t\t\t\t\tEdit,\n\t\t\t\t\t\thasSupport,\n\t\t\t\t\t\tattributeKeys = [],\n\t\t\t\t\t\tshareWithChildBlocks,\n\t\t\t\t\t} = feature;\n\t\t\t\t\tconst shouldDisplayControls =\n\t\t\t\t\t\tcontext[ mayDisplayControlsKey ] ||\n\t\t\t\t\t\t( context[ mayDisplayParentControlsKey ] &&\n\t\t\t\t\t\t\tshareWithChildBlocks );\n\n\t\t\t\t\tif (\n\t\t\t\t\t\t! shouldDisplayControls ||\n\t\t\t\t\t\t! hasSupport( props.name )\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst neededProps = {};\n\t\t\t\t\tfor ( const key of attributeKeys ) {\n\t\t\t\t\t\tif ( props.attributes[ key ] ) {\n\t\t\t\t\t\t\tneededProps[ key ] = props.attributes[ key ];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Edit\n\t\t\t\t\t\t\t// We can use the index because the array length\n\t\t\t\t\t\t\t// is fixed per page load right now.\n\t\t\t\t\t\t\tkey={ i }\n\t\t\t\t\t\t\tname={ props.name }\n\t\t\t\t\t\t\tisSelected={ props.isSelected }\n\t\t\t\t\t\t\tclientId={ props.clientId }\n\t\t\t\t\t\t\tsetAttributes={ props.setAttributes }\n\t\t\t\t\t\t\t__unstableParentLayout={\n\t\t\t\t\t\t\t\tprops.__unstableParentLayout\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t// This component is pure, so only pass needed\n\t\t\t\t\t\t\t// props!!!\n\t\t\t\t\t\t\t{ ...neededProps }\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t} ),\n\t\t\t\t<OriginalBlockEdit key=\"edit\" { ...props } />,\n\t\t\t];\n\t\t},\n\t\t'withBlockEditHooks'\n\t);\n\taddFilter( 'editor.BlockEdit', 'core/editor/hooks', withBlockEditHooks );\n}\n\nfunction BlockProps( { index, useBlockProps, setAllWrapperProps, ...props } ) {\n\tconst wrapperProps = useBlockProps( props );\n\tconst setWrapperProps = ( next ) =>\n\t\tsetAllWrapperProps( ( prev ) => {\n\t\t\tconst nextAll = [ ...prev ];\n\t\t\tnextAll[ index ] = next;\n\t\t\treturn nextAll;\n\t\t} );\n\t// Setting state after every render is fine because this component is\n\t// pure and will only re-render when needed props change.\n\tuseEffect( () => {\n\t\t// We could shallow compare the props, but since this component only\n\t\t// changes when needed attributes change, the benefit is probably small.\n\t\tsetWrapperProps( wrapperProps );\n\t\treturn () => {\n\t\t\tsetWrapperProps( undefined );\n\t\t};\n\t} );\n\treturn null;\n}\n\nconst BlockPropsPure = memo( BlockProps );\n\nexport function createBlockListBlockFilter( features ) {\n\tconst withBlockListBlockHooks = createHigherOrderComponent(\n\t\t( BlockListBlock ) => ( props ) => {\n\t\t\tconst [ allWrapperProps, setAllWrapperProps ] = useState(\n\t\t\t\tArray( features.length ).fill( undefined )\n\t\t\t);\n\t\t\treturn [\n\t\t\t\t...features.map( ( feature, i ) => {\n\t\t\t\t\tconst {\n\t\t\t\t\t\thasSupport,\n\t\t\t\t\t\tattributeKeys = [],\n\t\t\t\t\t\tuseBlockProps,\n\t\t\t\t\t} = feature;\n\n\t\t\t\t\tconst neededProps = {};\n\t\t\t\t\tfor ( const key of attributeKeys ) {\n\t\t\t\t\t\tif ( props.attributes[ key ] ) {\n\t\t\t\t\t\t\tneededProps[ key ] = props.attributes[ key ];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (\n\t\t\t\t\t\t// Skip rendering if none of the needed attributes are\n\t\t\t\t\t\t// set.\n\t\t\t\t\t\t! Object.keys( neededProps ).length ||\n\t\t\t\t\t\t! hasSupport( props.name )\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<BlockPropsPure\n\t\t\t\t\t\t\t// We can use the index because the array length\n\t\t\t\t\t\t\t// is fixed per page load right now.\n\t\t\t\t\t\t\tkey={ i }\n\t\t\t\t\t\t\tindex={ i }\n\t\t\t\t\t\t\tuseBlockProps={ useBlockProps }\n\t\t\t\t\t\t\t// This component is pure, so we must pass a stable\n\t\t\t\t\t\t\t// function reference.\n\t\t\t\t\t\t\tsetAllWrapperProps={ setAllWrapperProps }\n\t\t\t\t\t\t\tname={ props.name }\n\t\t\t\t\t\t\t// This component is pure, so only pass needed\n\t\t\t\t\t\t\t// props!!!\n\t\t\t\t\t\t\t{ ...neededProps }\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t} ),\n\t\t\t\t<BlockListBlock\n\t\t\t\t\tkey=\"edit\"\n\t\t\t\t\t{ ...props }\n\t\t\t\t\twrapperProps={ allWrapperProps\n\t\t\t\t\t\t.filter( Boolean )\n\t\t\t\t\t\t.reduce( ( acc, wrapperProps ) => {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t...acc,\n\t\t\t\t\t\t\t\t...wrapperProps,\n\t\t\t\t\t\t\t\tclassName: classnames(\n\t\t\t\t\t\t\t\t\tacc.className,\n\t\t\t\t\t\t\t\t\twrapperProps.className\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t\t\t...acc.style,\n\t\t\t\t\t\t\t\t\t...wrapperProps.style,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}, props.wrapperProps || {} ) }\n\t\t\t\t/>,\n\t\t\t];\n\t\t},\n\t\t'withBlockListBlockHooks'\n\t);\n\taddFilter(\n\t\t'editor.BlockListBlock',\n\t\t'core/editor/hooks',\n\t\twithBlockListBlockHooks\n\t);\n}\n\nexport function createBlockSaveFilter( features ) {\n\tfunction extraPropsFromHooks( props, name, attributes ) {\n\t\treturn features.reduce( ( accu, feature ) => {\n\t\t\tconst { hasSupport, attributeKeys = [], addSaveProps } = feature;\n\n\t\t\tconst neededAttributes = {};\n\t\t\tfor ( const key of attributeKeys ) {\n\t\t\t\tif ( attributes[ key ] ) {\n\t\t\t\t\tneededAttributes[ key ] = attributes[ key ];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\t// Skip rendering if none of the needed attributes are\n\t\t\t\t// set.\n\t\t\t\t! Object.keys( neededAttributes ).length ||\n\t\t\t\t! hasSupport( name )\n\t\t\t) {\n\t\t\t\treturn accu;\n\t\t\t}\n\n\t\t\treturn addSaveProps( accu, name, neededAttributes );\n\t\t}, props );\n\t}\n\taddFilter(\n\t\t'blocks.getSaveContent.extraProps',\n\t\t'core/editor/hooks',\n\t\textraPropsFromHooks,\n\t\t0\n\t);\n\taddFilter(\n\t\t'blocks.getSaveContent.extraProps',\n\t\t'core/editor/hooks',\n\t\t( props ) => {\n\t\t\t// Previously we had a filter deleting the className if it was an empty\n\t\t\t// string. That filter is no longer running, so now we need to delete it\n\t\t\t// here.\n\t\t\tif ( props.hasOwnProperty( 'className' ) && ! props.className ) {\n\t\t\t\tdelete props.className;\n\t\t\t}\n\n\t\t\treturn props;\n\t\t}\n\t);\n}\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { hasBlockSupport } from '@wordpress/blocks';\r\nimport { addFilter } from '@wordpress/hooks';\r\n\r\nfunction migrateLightBlockWrapper( settings ) {\r\n\tconst { apiVersion = 1 } = settings;\r\n\tif (\r\n\t\tapiVersion < 2 &&\r\n\t\thasBlockSupport( settings, 'lightBlockWrapper', false )\r\n\t) {\r\n\t\tsettings.apiVersion = 2;\r\n\t}\r\n\r\n\treturn settings;\r\n}\r\n\r\naddFilter(\r\n\t'blocks.registerBlockType',\r\n\t'core/compat/migrateLightBlockWrapper',\r\n\tmigrateLightBlockWrapper\r\n);\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"components\"];","/**\r\n * WordPress dependencies\r\n */\r\nimport { createSlotFill } from '@wordpress/components';\r\n\r\nconst BlockControlsDefault = createSlotFill( 'BlockControls' );\r\nconst BlockControlsBlock = createSlotFill( 'BlockControlsBlock' );\r\nconst BlockControlsInline = createSlotFill( 'BlockFormatControls' );\r\nconst BlockControlsOther = createSlotFill( 'BlockControlsOther' );\r\nconst BlockControlsParent = createSlotFill( 'BlockControlsParent' );\r\n\r\nconst groups = {\r\n\tdefault: BlockControlsDefault,\r\n\tblock: BlockControlsBlock,\r\n\tinline: BlockControlsInline,\r\n\tother: BlockControlsOther,\r\n\tparent: BlockControlsParent,\r\n};\r\n\r\nexport default groups;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\t__experimentalStyleProvider as StyleProvider,\r\n\tToolbarGroup,\r\n} from '@wordpress/components';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport useBlockControlsFill from './hook';\r\n\r\nexport default function BlockControlsFill( {\r\n\tgroup = 'default',\r\n\tcontrols,\r\n\tchildren,\r\n\t__experimentalShareWithChildBlocks = false,\r\n} ) {\r\n\tconst Fill = useBlockControlsFill(\r\n\t\tgroup,\r\n\t\t__experimentalShareWithChildBlocks\r\n\t);\r\n\tif ( ! Fill ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tconst innerMarkup = (\r\n\t\t<>\r\n\t\t\t{ group === 'default' && <ToolbarGroup controls={ controls } /> }\r\n\t\t\t{ children }\r\n\t\t</>\r\n\t);\r\n\r\n\treturn (\r\n\t\t<StyleProvider document={ document }>\r\n\t\t\t<Fill>\r\n\t\t\t\t{ ( fillProps ) => {\r\n\t\t\t\t\t// `fillProps.forwardedContext` is an array of context provider entries, provided by slot,\r\n\t\t\t\t\t// that should wrap the fill markup.\r\n\t\t\t\t\tconst { forwardedContext = [] } = fillProps;\r\n\t\t\t\t\treturn forwardedContext.reduce(\r\n\t\t\t\t\t\t( inner, [ Provider, props ] ) => (\r\n\t\t\t\t\t\t\t<Provider { ...props }>{ inner }</Provider>\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t\tinnerMarkup\r\n\t\t\t\t\t);\r\n\t\t\t\t} }\r\n\t\t\t</Fill>\r\n\t\t</StyleProvider>\r\n\t);\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport groups from './groups';\r\nimport {\r\n\tuseBlockEditContext,\r\n\tmayDisplayControlsKey,\r\n\tmayDisplayParentControlsKey,\r\n} from '../block-edit/context';\r\n\r\nexport default function useBlockControlsFill( group, shareWithChildBlocks ) {\r\n\tconst context = useBlockEditContext();\r\n\tif ( context[ mayDisplayControlsKey ] ) {\r\n\t\treturn groups[ group ]?.Fill;\r\n\t}\r\n\tif ( context[ mayDisplayParentControlsKey ] && shareWithChildBlocks ) {\r\n\t\treturn groups.parent.Fill;\r\n\t}\r\n\treturn null;\r\n}\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"warning\"];","/**\r\n * WordPress dependencies\r\n */\r\nimport { useContext, useMemo } from '@wordpress/element';\r\nimport {\r\n\tprivateApis,\r\n\t__experimentalToolbarContext as ToolbarContext,\r\n\tToolbarGroup,\r\n\t__experimentalUseSlotFills as useSlotFills,\r\n} from '@wordpress/components';\r\nimport warning from '@wordpress/warning';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport groups from './groups';\r\nimport { unlock } from '../../lock-unlock';\r\n\r\nconst { ComponentsContext } = unlock( privateApis );\r\n\r\nexport default function BlockControlsSlot( { group = 'default', ...props } ) {\r\n\tconst toolbarState = useContext( ToolbarContext );\r\n\tconst contextState = useContext( ComponentsContext );\r\n\tconst fillProps = useMemo(\r\n\t\t() => ( {\r\n\t\t\tforwardedContext: [\r\n\t\t\t\t[ ToolbarContext.Provider, { value: toolbarState } ],\r\n\t\t\t\t[ ComponentsContext.Provider, { value: contextState } ],\r\n\t\t\t],\r\n\t\t} ),\r\n\t\t[ toolbarState, contextState ]\r\n\t);\r\n\r\n\tconst Slot = groups[ group ]?.Slot;\r\n\tconst fills = useSlotFills( Slot?.__unstableName );\r\n\tif ( ! Slot ) {\r\n\t\twarning( `Unknown BlockControls group \"${ group }\" provided.` );\r\n\t\treturn null;\r\n\t}\r\n\r\n\tif ( ! fills?.length ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tconst slot = <Slot { ...props } bubblesVirtually fillProps={ fillProps } />;\r\n\r\n\tif ( group === 'default' ) {\r\n\t\treturn slot;\r\n\t}\r\n\r\n\treturn <ToolbarGroup>{ slot }</ToolbarGroup>;\r\n}\r\n","/**\r\n * Internal dependencies\r\n */\r\nimport BlockControlsFill from './fill';\r\nimport BlockControlsSlot from './slot';\r\n\r\nconst BlockControls = BlockControlsFill;\r\n\r\nBlockControls.Slot = BlockControlsSlot;\r\n\r\n// This is just here for backward compatibility.\r\nexport const BlockFormatControls = ( props ) => {\r\n\treturn <BlockControlsFill group=\"inline\" { ...props } />;\r\n};\r\nBlockFormatControls.Slot = ( props ) => {\r\n\treturn <BlockControlsSlot group=\"inline\" { ...props } />;\r\n};\r\n\r\nexport default BlockControls;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst justifyLeft = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M9 9v6h11V9H9zM4 20h1.5V4H4v16z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default justifyLeft;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst justifyCenter = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M12.5 15v5H11v-5H4V9h7V4h1.5v5h7v6h-7Z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default justifyCenter;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst justifyRight = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M4 15h11V9H4v6zM18.5 4v16H20V4h-1.5z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default justifyRight;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst justifySpaceBetween = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M9 15h6V9H9v6zm-5 5h1.5V4H4v16zM18.5 4v16H20V4h-1.5z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default justifySpaceBetween;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst justifyStretch = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M4 4H5.5V20H4V4ZM7 10L17 10V14L7 14V10ZM20 4H18.5V20H20V4Z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default justifyStretch;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst arrowRight = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"m14.5 6.5-1 1 3.7 3.7H4v1.6h13.2l-3.7 3.7 1 1 5.6-5.5z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default arrowRight;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst arrowDown = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"m16.5 13.5-3.7 3.7V4h-1.5v13.2l-3.8-3.7-1 1 5.5 5.6 5.5-5.6z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default arrowDown;\r\n","// Layout definitions keyed by layout type.\n// Provides a common definition of slugs, classnames, base styles, and spacing styles for each layout type.\n// If making changes or additions to layout definitions, be sure to update the corresponding PHP definitions in\n// `block-supports/layout.php` so that the server-side and client-side definitions match.\nexport const LAYOUT_DEFINITIONS = {\n\tdefault: {\n\t\tname: 'default',\n\t\tslug: 'flow',\n\t\tclassName: 'is-layout-flow',\n\t\tbaseStyles: [\n\t\t\t{\n\t\t\t\tselector: ' > .alignleft',\n\t\t\t\trules: {\n\t\t\t\t\tfloat: 'left',\n\t\t\t\t\t'margin-inline-start': '0',\n\t\t\t\t\t'margin-inline-end': '2em',\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tselector: ' > .alignright',\n\t\t\t\trules: {\n\t\t\t\t\tfloat: 'right',\n\t\t\t\t\t'margin-inline-start': '2em',\n\t\t\t\t\t'margin-inline-end': '0',\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tselector: ' > .aligncenter',\n\t\t\t\trules: {\n\t\t\t\t\t'margin-left': 'auto !important',\n\t\t\t\t\t'margin-right': 'auto !important',\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t\tspacingStyles: [\n\t\t\t{\n\t\t\t\tselector: ' > :first-child:first-child',\n\t\t\t\trules: {\n\t\t\t\t\t'margin-block-start': '0',\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tselector: ' > :last-child:last-child',\n\t\t\t\trules: {\n\t\t\t\t\t'margin-block-end': '0',\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tselector: ' > *',\n\t\t\t\trules: {\n\t\t\t\t\t'margin-block-start': null,\n\t\t\t\t\t'margin-block-end': '0',\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t},\n\tconstrained: {\n\t\tname: 'constrained',\n\t\tslug: 'constrained',\n\t\tclassName: 'is-layout-constrained',\n\t\tbaseStyles: [\n\t\t\t{\n\t\t\t\tselector: ' > .alignleft',\n\t\t\t\trules: {\n\t\t\t\t\tfloat: 'left',\n\t\t\t\t\t'margin-inline-start': '0',\n\t\t\t\t\t'margin-inline-end': '2em',\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tselector: ' > .alignright',\n\t\t\t\trules: {\n\t\t\t\t\tfloat: 'right',\n\t\t\t\t\t'margin-inline-start': '2em',\n\t\t\t\t\t'margin-inline-end': '0',\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tselector: ' > .aligncenter',\n\t\t\t\trules: {\n\t\t\t\t\t'margin-left': 'auto !important',\n\t\t\t\t\t'margin-right': 'auto !important',\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tselector:\n\t\t\t\t\t' > :where(:not(.alignleft):not(.alignright):not(.alignfull))',\n\t\t\t\trules: {\n\t\t\t\t\t'max-width': 'var(--wp--style--global--content-size)',\n\t\t\t\t\t'margin-left': 'auto !important',\n\t\t\t\t\t'margin-right': 'auto !important',\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tselector: ' > .alignwide',\n\t\t\t\trules: {\n\t\t\t\t\t'max-width': 'var(--wp--style--global--wide-size)',\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t\tspacingStyles: [\n\t\t\t{\n\t\t\t\tselector: ' > :first-child:first-child',\n\t\t\t\trules: {\n\t\t\t\t\t'margin-block-start': '0',\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tselector: ' > :last-child:last-child',\n\t\t\t\trules: {\n\t\t\t\t\t'margin-block-end': '0',\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tselector: ' > *',\n\t\t\t\trules: {\n\t\t\t\t\t'margin-block-start': null,\n\t\t\t\t\t'margin-block-end': '0',\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t},\n\tflex: {\n\t\tname: 'flex',\n\t\tslug: 'flex',\n\t\tclassName: 'is-layout-flex',\n\t\tdisplayMode: 'flex',\n\t\tbaseStyles: [\n\t\t\t{\n\t\t\t\tselector: '',\n\t\t\t\trules: {\n\t\t\t\t\t'flex-wrap': 'wrap',\n\t\t\t\t\t'align-items': 'center',\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tselector: ' > *',\n\t\t\t\trules: {\n\t\t\t\t\tmargin: '0',\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t\tspacingStyles: [\n\t\t\t{\n\t\t\t\tselector: '',\n\t\t\t\trules: {\n\t\t\t\t\tgap: null,\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t},\n\tgrid: {\n\t\tname: 'grid',\n\t\tslug: 'grid',\n\t\tclassName: 'is-layout-grid',\n\t\tdisplayMode: 'grid',\n\t\tbaseStyles: [\n\t\t\t{\n\t\t\t\tselector: ' > *',\n\t\t\t\trules: {\n\t\t\t\t\tmargin: '0',\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t\tspacingStyles: [\n\t\t\t{\n\t\t\t\tselector: '',\n\t\t\t\trules: {\n\t\t\t\t\tgap: null,\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t},\n};\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { __, sprintf } from '@wordpress/i18n';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { LAYOUT_DEFINITIONS } from './definitions';\r\n\r\n/**\r\n * Utility to generate the proper CSS selector for layout styles.\r\n *\r\n * @param {string} selectors CSS selector, also supports multiple comma-separated selectors.\r\n * @param {string} append    The string to append.\r\n *\r\n * @return {string} - CSS selector.\r\n */\r\nexport function appendSelectors( selectors, append = '' ) {\r\n\t// Ideally we shouldn't need the `.editor-styles-wrapper` increased specificity here\r\n\t// The problem though is that we have a `.editor-styles-wrapper p { margin: reset; }` style\r\n\t// it's used to reset the default margin added by wp-admin to paragraphs\r\n\t// so we need this to be higher speficity otherwise, it won't be applied to paragraphs inside containers\r\n\t// When the post editor is fully iframed, this extra classname could be removed.\r\n\r\n\treturn selectors\r\n\t\t.split( ',' )\r\n\t\t.map(\r\n\t\t\t( subselector ) =>\r\n\t\t\t\t`.editor-styles-wrapper ${ subselector }${\r\n\t\t\t\t\tappend ? ` ${ append }` : ''\r\n\t\t\t\t}`\r\n\t\t)\r\n\t\t.join( ',' );\r\n}\r\n\r\n/**\r\n * Get generated blockGap CSS rules based on layout definitions provided in theme.json\r\n * Falsy values in the layout definition's spacingStyles rules will be swapped out\r\n * with the provided `blockGapValue`.\r\n *\r\n * @param {string} selector          The CSS selector to target for the generated rules.\r\n * @param {Object} layoutDefinitions Layout definitions object.\r\n * @param {string} layoutType        The layout type (e.g. `default` or `flex`).\r\n * @param {string} blockGapValue     The current blockGap value to be applied.\r\n * @return {string} The generated CSS rules.\r\n */\r\nexport function getBlockGapCSS(\r\n\tselector,\r\n\tlayoutDefinitions = LAYOUT_DEFINITIONS,\r\n\tlayoutType,\r\n\tblockGapValue\r\n) {\r\n\tlet output = '';\r\n\tif (\r\n\t\tlayoutDefinitions?.[ layoutType ]?.spacingStyles?.length &&\r\n\t\tblockGapValue\r\n\t) {\r\n\t\tlayoutDefinitions[ layoutType ].spacingStyles.forEach( ( gapStyle ) => {\r\n\t\t\toutput += `${ appendSelectors(\r\n\t\t\t\tselector,\r\n\t\t\t\tgapStyle.selector.trim()\r\n\t\t\t) } { `;\r\n\t\t\toutput += Object.entries( gapStyle.rules )\r\n\t\t\t\t.map(\r\n\t\t\t\t\t( [ cssProperty, value ] ) =>\r\n\t\t\t\t\t\t`${ cssProperty }: ${ value ? value : blockGapValue }`\r\n\t\t\t\t)\r\n\t\t\t\t.join( '; ' );\r\n\t\t\toutput += '; }';\r\n\t\t} );\r\n\t}\r\n\treturn output;\r\n}\r\n\r\n/**\r\n * Helper method to assign contextual info to clarify\r\n * alignment settings.\r\n *\r\n * Besides checking if `contentSize` and `wideSize` have a\r\n * value, we now show this information only if their values\r\n * are not a `css var`. This needs to change when parsing\r\n * css variables land.\r\n *\r\n * @see https://github.com/WordPress/gutenberg/pull/34710#issuecomment-918000752\r\n *\r\n * @param {Object} layout The layout object.\r\n * @return {Object} An object with contextual info per alignment.\r\n */\r\nexport function getAlignmentsInfo( layout ) {\r\n\tconst { contentSize, wideSize, type = 'default' } = layout;\r\n\tconst alignmentInfo = {};\r\n\tconst sizeRegex =\r\n\t\t/^(?!0)\\d+(px|em|rem|vw|vh|%|svw|lvw|dvw|svh|lvh|dvh|vi|svi|lvi|dvi|vb|svb|lvb|dvb|vmin|svmin|lvmin|dvmin|vmax|svmax|lvmax|dvmax)?$/i;\r\n\tif ( sizeRegex.test( contentSize ) && type === 'constrained' ) {\r\n\t\t// translators: %s: container size (i.e. 600px etc)\r\n\t\talignmentInfo.none = sprintf( __( 'Max %s wide' ), contentSize );\r\n\t}\r\n\tif ( sizeRegex.test( wideSize ) ) {\r\n\t\t// translators: %s: container size (i.e. 600px etc)\r\n\t\talignmentInfo.wide = sprintf( __( 'Max %s wide' ), wideSize );\r\n\t}\r\n\treturn alignmentInfo;\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst sidesAll = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"m7.5 6h9v-1.5h-9zm0 13.5h9v-1.5h-9zm-3-3h1.5v-9h-1.5zm13.5-9v9h1.5v-9z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default sidesAll;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst sidesHorizontal = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path\r\n\t\t\td=\"m7.5 6h9v-1.5h-9zm0 13.5h9v-1.5h-9zm-3-3h1.5v-9h-1.5zm13.5-9v9h1.5v-9z\"\r\n\t\t\tstyle={ { opacity: 0.25 } }\r\n\t\t/>\r\n\t\t<Path d=\"m4.5 7.5v9h1.5v-9z\" />\r\n\t\t<Path d=\"m18 7.5v9h1.5v-9z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default sidesHorizontal;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst sidesVertical = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path\r\n\t\t\td=\"m7.5 6h9v-1.5h-9zm0 13.5h9v-1.5h-9zm-3-3h1.5v-9h-1.5zm13.5-9v9h1.5v-9z\"\r\n\t\t\tstyle={ { opacity: 0.25 } }\r\n\t\t/>\r\n\t\t<Path d=\"m7.5 6h9v-1.5h-9z\" />\r\n\t\t<Path d=\"m7.5 19.5h9v-1.5h-9z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default sidesVertical;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst sidesTop = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path\r\n\t\t\td=\"m7.5 6h9v-1.5h-9zm0 13.5h9v-1.5h-9zm-3-3h1.5v-9h-1.5zm13.5-9v9h1.5v-9z\"\r\n\t\t\tstyle={ { opacity: 0.25 } }\r\n\t\t/>\r\n\t\t<Path d=\"m16.5 6h-9v-1.5h9z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default sidesTop;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst sidesRight = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path\r\n\t\t\td=\"m7.5 6h9v-1.5h-9zm0 13.5h9v-1.5h-9zm-3-3h1.5v-9h-1.5zm13.5-9v9h1.5v-9z\"\r\n\t\t\tstyle={ { opacity: 0.25 } }\r\n\t\t/>\r\n\t\t<Path d=\"m18 16.5v-9h1.5v9z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default sidesRight;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst sidesBottom = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path\r\n\t\t\td=\"m7.5 6h9v-1.5h-9zm0 13.5h9v-1.5h-9zm-3-3h1.5v-9h-1.5zm13.5-9v9h1.5v-9z\"\r\n\t\t\tstyle={ { opacity: 0.25 } }\r\n\t\t/>\r\n\t\t<Path d=\"m16.5 19.5h-9v-1.5h9z\" style={ { fill: '#1e1e1e' } } />\r\n\t</SVG>\r\n);\r\n\r\nexport default sidesBottom;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst sidesLeft = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path\r\n\t\t\td=\"m7.5 6h9v-1.5h-9zm0 13.5h9v-1.5h-9zm-3-3h1.5v-9h-1.5zm13.5-9v9h1.5v-9z\"\r\n\t\t\tstyle={ { opacity: 0.25 } }\r\n\t\t/>\r\n\t\t<Path d=\"m4.5 16.5v-9h1.5v9z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default sidesLeft;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { __ } from '@wordpress/i18n';\r\nimport {\r\n\tsidesAll,\r\n\tsidesBottom,\r\n\tsidesHorizontal,\r\n\tsidesLeft,\r\n\tsidesRight,\r\n\tsidesTop,\r\n\tsidesVertical,\r\n} from '@wordpress/icons';\r\n\r\nexport const ALL_SIDES = [ 'top', 'right', 'bottom', 'left' ];\r\n\r\nexport const DEFAULT_VALUES = {\r\n\ttop: undefined,\r\n\tright: undefined,\r\n\tbottom: undefined,\r\n\tleft: undefined,\r\n};\r\n\r\nexport const ICONS = {\r\n\tcustom: sidesAll,\r\n\taxial: sidesAll,\r\n\thorizontal: sidesHorizontal,\r\n\tvertical: sidesVertical,\r\n\ttop: sidesTop,\r\n\tright: sidesRight,\r\n\tbottom: sidesBottom,\r\n\tleft: sidesLeft,\r\n};\r\n\r\nexport const LABELS = {\r\n\tdefault: __( 'Spacing control' ),\r\n\ttop: __( 'Top' ),\r\n\tbottom: __( 'Bottom' ),\r\n\tleft: __( 'Left' ),\r\n\tright: __( 'Right' ),\r\n\tmixed: __( 'Mixed' ),\r\n\tvertical: __( 'Vertical' ),\r\n\thorizontal: __( 'Horizontal' ),\r\n\taxial: __( 'Horizontal & vertical' ),\r\n\tcustom: __( 'Custom' ),\r\n};\r\n\r\nexport const VIEWS = {\r\n\taxial: 'axial',\r\n\ttop: 'top',\r\n\tright: 'right',\r\n\tbottom: 'bottom',\r\n\tleft: 'left',\r\n\tcustom: 'custom',\r\n};\r\n\r\n/**\r\n * Checks is given value is a spacing preset.\r\n *\r\n * @param {string} value Value to check\r\n *\r\n * @return {boolean} Return true if value is string in format var:preset|spacing|.\r\n */\r\nexport function isValueSpacingPreset( value ) {\r\n\tif ( ! value?.includes ) {\r\n\t\treturn false;\r\n\t}\r\n\treturn value === '0' || value.includes( 'var:preset|spacing|' );\r\n}\r\n\r\n/**\r\n * Converts a spacing preset into a custom value.\r\n *\r\n * @param {string} value        Value to convert\r\n * @param {Array}  spacingSizes Array of the current spacing preset objects\r\n *\r\n * @return {string} Mapping of the spacing preset to its equivalent custom value.\r\n */\r\nexport function getCustomValueFromPreset( value, spacingSizes ) {\r\n\tif ( ! isValueSpacingPreset( value ) ) {\r\n\t\treturn value;\r\n\t}\r\n\r\n\tconst slug = getSpacingPresetSlug( value );\r\n\tconst spacingSize = spacingSizes.find(\r\n\t\t( size ) => String( size.slug ) === slug\r\n\t);\r\n\r\n\treturn spacingSize?.size;\r\n}\r\n\r\n/**\r\n * Converts a custom value to preset value if one can be found.\r\n *\r\n * Returns value as-is if no match is found.\r\n *\r\n * @param {string} value        Value to convert\r\n * @param {Array}  spacingSizes Array of the current spacing preset objects\r\n *\r\n * @return {string} The preset value if it can be found.\r\n */\r\nexport function getPresetValueFromCustomValue( value, spacingSizes ) {\r\n\t// Return value as-is if it is undefined or is already a preset, or '0';\r\n\tif ( ! value || isValueSpacingPreset( value ) || value === '0' ) {\r\n\t\treturn value;\r\n\t}\r\n\r\n\tconst spacingMatch = spacingSizes.find(\r\n\t\t( size ) => String( size.size ) === String( value )\r\n\t);\r\n\r\n\tif ( spacingMatch?.slug ) {\r\n\t\treturn `var:preset|spacing|${ spacingMatch.slug }`;\r\n\t}\r\n\r\n\treturn value;\r\n}\r\n\r\n/**\r\n * Converts a spacing preset into a custom value.\r\n *\r\n * @param {string} value Value to convert.\r\n *\r\n * @return {string | undefined} CSS var string for given spacing preset value.\r\n */\r\nexport function getSpacingPresetCssVar( value ) {\r\n\tif ( ! value ) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tconst slug = value.match( /var:preset\\|spacing\\|(.+)/ );\r\n\r\n\tif ( ! slug ) {\r\n\t\treturn value;\r\n\t}\r\n\r\n\treturn `var(--wp--preset--spacing--${ slug[ 1 ] })`;\r\n}\r\n\r\n/**\r\n * Returns the slug section of the given spacing preset string.\r\n *\r\n * @param {string} value Value to extract slug from.\r\n *\r\n * @return {string|undefined} The int value of the slug from given spacing preset.\r\n */\r\nexport function getSpacingPresetSlug( value ) {\r\n\tif ( ! value ) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tif ( value === '0' || value === 'default' ) {\r\n\t\treturn value;\r\n\t}\r\n\r\n\tconst slug = value.match( /var:preset\\|spacing\\|(.+)/ );\r\n\r\n\treturn slug ? slug[ 1 ] : undefined;\r\n}\r\n\r\n/**\r\n * Converts spacing preset value into a Range component value .\r\n *\r\n * @param {string} presetValue  Value to convert to Range value.\r\n * @param {Array}  spacingSizes Array of current spacing preset value objects.\r\n *\r\n * @return {number} The int value for use in Range control.\r\n */\r\nexport function getSliderValueFromPreset( presetValue, spacingSizes ) {\r\n\tif ( presetValue === undefined ) {\r\n\t\treturn 0;\r\n\t}\r\n\tconst slug =\r\n\t\tparseFloat( presetValue, 10 ) === 0\r\n\t\t\t? '0'\r\n\t\t\t: getSpacingPresetSlug( presetValue );\r\n\tconst sliderValue = spacingSizes.findIndex( ( spacingSize ) => {\r\n\t\treturn String( spacingSize.slug ) === slug;\r\n\t} );\r\n\r\n\t// Returning NaN rather than undefined as undefined makes range control thumb sit in center\r\n\treturn sliderValue !== -1 ? sliderValue : NaN;\r\n}\r\n\r\n/**\r\n * Gets an items with the most occurrence within an array\r\n * https://stackoverflow.com/a/20762713\r\n *\r\n * @param {Array<any>} arr Array of items to check.\r\n * @return {any} The item with the most occurrences.\r\n */\r\nfunction mode( arr ) {\r\n\treturn arr\r\n\t\t.sort(\r\n\t\t\t( a, b ) =>\r\n\t\t\t\tarr.filter( ( v ) => v === a ).length -\r\n\t\t\t\tarr.filter( ( v ) => v === b ).length\r\n\t\t)\r\n\t\t.pop();\r\n}\r\n\r\n/**\r\n * Gets the 'all' input value from values data.\r\n *\r\n * @param {Object} values Box spacing values\r\n *\r\n * @return {string} The most common value from all sides of box.\r\n */\r\nexport function getAllRawValue( values = {} ) {\r\n\treturn mode( Object.values( values ) );\r\n}\r\n\r\n/**\r\n * Checks to determine if values are mixed.\r\n *\r\n * @param {Object} values Box values.\r\n * @param {Array}  sides  Sides that values relate to.\r\n *\r\n * @return {boolean} Whether values are mixed.\r\n */\r\nexport function isValuesMixed( values = {}, sides = ALL_SIDES ) {\r\n\treturn (\r\n\t\t( Object.values( values ).length >= 1 &&\r\n\t\t\tObject.values( values ).length < sides.length ) ||\r\n\t\tnew Set( Object.values( values ) ).size > 1\r\n\t);\r\n}\r\n\r\n/**\r\n * Checks to determine if values are defined.\r\n *\r\n * @param {Object} values Box values.\r\n *\r\n * @return {boolean} Whether values are defined.\r\n */\r\nexport function isValuesDefined( values ) {\r\n\tif ( values === undefined || values === null ) {\r\n\t\treturn false;\r\n\t}\r\n\treturn Object.values( values ).filter( ( value ) => !! value ).length > 0;\r\n}\r\n\r\n/**\r\n * Determines whether a particular axis has support. If no axis is\r\n * specified, this function checks if either axis is supported.\r\n *\r\n * @param {Array}  sides Supported sides.\r\n * @param {string} axis  Which axis to check.\r\n *\r\n * @return {boolean} Whether there is support for the specified axis or both axes.\r\n */\r\nexport function hasAxisSupport( sides, axis ) {\r\n\tif ( ! sides || ! sides.length ) {\r\n\t\treturn false;\r\n\t}\r\n\r\n\tconst hasHorizontalSupport =\r\n\t\tsides.includes( 'horizontal' ) ||\r\n\t\t( sides.includes( 'left' ) && sides.includes( 'right' ) );\r\n\r\n\tconst hasVerticalSupport =\r\n\t\tsides.includes( 'vertical' ) ||\r\n\t\t( sides.includes( 'top' ) && sides.includes( 'bottom' ) );\r\n\r\n\tif ( axis === 'horizontal' ) {\r\n\t\treturn hasHorizontalSupport;\r\n\t}\r\n\r\n\tif ( axis === 'vertical' ) {\r\n\t\treturn hasVerticalSupport;\r\n\t}\r\n\r\n\treturn hasHorizontalSupport || hasVerticalSupport;\r\n}\r\n\r\n/**\r\n * Determines which menu options should be included in the SidePicker.\r\n *\r\n * @param {Array} sides Supported sides.\r\n *\r\n * @return {Object} Menu options with each option containing label & icon.\r\n */\r\nexport function getSupportedMenuItems( sides ) {\r\n\tif ( ! sides || ! sides.length ) {\r\n\t\treturn {};\r\n\t}\r\n\r\n\tconst menuItems = {};\r\n\r\n\t// Determine the primary \"side\" menu options.\r\n\tconst hasHorizontalSupport = hasAxisSupport( sides, 'horizontal' );\r\n\tconst hasVerticalSupport = hasAxisSupport( sides, 'vertical' );\r\n\r\n\tif ( hasHorizontalSupport && hasVerticalSupport ) {\r\n\t\tmenuItems.axial = { label: LABELS.axial, icon: ICONS.axial };\r\n\t} else if ( hasHorizontalSupport ) {\r\n\t\tmenuItems.axial = { label: LABELS.horizontal, icon: ICONS.horizontal };\r\n\t} else if ( hasVerticalSupport ) {\r\n\t\tmenuItems.axial = { label: LABELS.vertical, icon: ICONS.vertical };\r\n\t}\r\n\r\n\t// Track whether we have any individual sides so we can omit the custom\r\n\t// option if required.\r\n\tlet numberOfIndividualSides = 0;\r\n\r\n\tALL_SIDES.forEach( ( side ) => {\r\n\t\tif ( sides.includes( side ) ) {\r\n\t\t\tnumberOfIndividualSides += 1;\r\n\t\t\tmenuItems[ side ] = {\r\n\t\t\t\tlabel: LABELS[ side ],\r\n\t\t\t\ticon: ICONS[ side ],\r\n\t\t\t};\r\n\t\t}\r\n\t} );\r\n\r\n\t// Add custom item if there are enough sides to warrant a separated view.\r\n\tif ( numberOfIndividualSides > 1 ) {\r\n\t\tmenuItems.custom = { label: LABELS.custom, icon: ICONS.custom };\r\n\t}\r\n\r\n\treturn menuItems;\r\n}\r\n\r\n/**\r\n * Checks if the supported sides are balanced for each axis.\r\n * - Horizontal - both left and right sides are supported.\r\n * - Vertical - both top and bottom are supported.\r\n *\r\n * @param {Array} sides The supported sides which may be axes as well.\r\n *\r\n * @return {boolean} Whether or not the supported sides are balanced.\r\n */\r\nexport function hasBalancedSidesSupport( sides = [] ) {\r\n\tconst counts = { top: 0, right: 0, bottom: 0, left: 0 };\r\n\tsides.forEach( ( side ) => ( counts[ side ] += 1 ) );\r\n\r\n\treturn (\r\n\t\t( counts.top + counts.bottom ) % 2 === 0 &&\r\n\t\t( counts.left + counts.right ) % 2 === 0\r\n\t);\r\n}\r\n\r\n/**\r\n * Determines which view the SpacingSizesControl should default to on its\r\n * first render; Axial, Custom, or Single side.\r\n *\r\n * @param {Object} values Current side values.\r\n * @param {Array}  sides  Supported sides.\r\n *\r\n * @return {string} View to display.\r\n */\r\nexport function getInitialView( values = {}, sides ) {\r\n\tconst { top, right, bottom, left } = values;\r\n\tconst sideValues = [ top, right, bottom, left ].filter( Boolean );\r\n\r\n\t// Axial ( Horizontal & vertical ).\r\n\t// - Has axial side support\r\n\t// - Has axial side values which match\r\n\t// - Has no values and the supported sides are balanced\r\n\tconst hasMatchingAxialValues =\r\n\t\ttop === bottom && left === right && ( !! top || !! left );\r\n\tconst hasNoValuesAndBalancedSides =\r\n\t\t! sideValues.length && hasBalancedSidesSupport( sides );\r\n\r\n\tif (\r\n\t\thasAxisSupport( sides ) &&\r\n\t\t( hasMatchingAxialValues || hasNoValuesAndBalancedSides )\r\n\t) {\r\n\t\treturn VIEWS.axial;\r\n\t}\r\n\r\n\t// Single side.\r\n\t// - Ensure the side returned is the first side that has a value.\r\n\tif ( sideValues.length === 1 ) {\r\n\t\tlet side;\r\n\r\n\t\tObject.entries( values ).some( ( [ key, value ] ) => {\r\n\t\t\tside = key;\r\n\t\t\treturn value !== undefined;\r\n\t\t} );\r\n\r\n\t\treturn side;\r\n\t}\r\n\r\n\t// Only single side supported and no value defined.\r\n\tif ( sides?.length === 1 && ! sideValues.length ) {\r\n\t\treturn sides[ 0 ];\r\n\t}\r\n\r\n\t// Default to the Custom (separated sides) view.\r\n\treturn VIEWS.custom;\r\n}\r\n","/**\r\n * Internal dependencies\r\n */\r\nimport { getSpacingPresetCssVar } from '../components/spacing-sizes-control/utils';\r\n\r\n/**\r\n * Returns a BoxControl object value from a given blockGap style value.\r\n * The string check is for backwards compatibility before Gutenberg supported\r\n * split gap values (row and column) and the value was a string n + unit.\r\n *\r\n * @param {string? | Object?} blockGapValue A block gap string or axial object value, e.g., '10px' or { top: '10px', left: '10px'}.\r\n * @return {Object|null}                    A value to pass to the BoxControl component.\r\n */\r\nexport function getGapBoxControlValueFromStyle( blockGapValue ) {\r\n\tif ( ! blockGapValue ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tconst isValueString = typeof blockGapValue === 'string';\r\n\treturn {\r\n\t\ttop: isValueString ? blockGapValue : blockGapValue?.top,\r\n\t\tleft: isValueString ? blockGapValue : blockGapValue?.left,\r\n\t};\r\n}\r\n\r\n/**\r\n * Returns a CSS value for the `gap` property from a given blockGap style.\r\n *\r\n * @param {string? | Object?} blockGapValue A block gap string or axial object value, e.g., '10px' or { top: '10px', left: '10px'}.\r\n * @param {string?}           defaultValue  A default gap value.\r\n * @return {string|null}                    The concatenated gap value (row and column).\r\n */\r\nexport function getGapCSSValue( blockGapValue, defaultValue = '0' ) {\r\n\tconst blockGapBoxControlValue =\r\n\t\tgetGapBoxControlValueFromStyle( blockGapValue );\r\n\tif ( ! blockGapBoxControlValue ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tconst row =\r\n\t\tgetSpacingPresetCssVar( blockGapBoxControlValue?.top ) || defaultValue;\r\n\tconst column =\r\n\t\tgetSpacingPresetCssVar( blockGapBoxControlValue?.left ) || defaultValue;\r\n\r\n\treturn row === column ? row : `${ row } ${ column }`;\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { Path, SVG } from '@wordpress/components';\r\n\r\nexport const alignBottom = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M15 4H9v11h6V4zM4 18.5V20h16v-1.5H4z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport const alignCenter = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M20 11h-5V4H9v7H4v1.5h5V20h6v-7.5h5z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport const alignTop = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M9 20h6V9H9v11zM4 4v1.5h16V4H4z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport const alignStretch = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M4 4L20 4L20 5.5L4 5.5L4 4ZM10 7L14 7L14 17L10 17L10 7ZM20 18.5L4 18.5L4 20L20 20L20 18.5Z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport const spaceBetween = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M7 4H17V8L7 8V4ZM7 16L17 16V20L7 20V16ZM20 11.25H4V12.75H20V11.25Z\" />\r\n\t</SVG>\r\n);\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { _x } from '@wordpress/i18n';\r\nimport { ToolbarGroup, ToolbarDropdownMenu } from '@wordpress/components';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport {\r\n\talignTop,\r\n\talignCenter,\r\n\talignBottom,\r\n\talignStretch,\r\n\tspaceBetween,\r\n} from './icons';\r\n\r\nconst BLOCK_ALIGNMENTS_CONTROLS = {\r\n\ttop: {\r\n\t\ticon: alignTop,\r\n\t\ttitle: _x( 'Align top', 'Block vertical alignment setting' ),\r\n\t},\r\n\tcenter: {\r\n\t\ticon: alignCenter,\r\n\t\ttitle: _x( 'Align middle', 'Block vertical alignment setting' ),\r\n\t},\r\n\tbottom: {\r\n\t\ticon: alignBottom,\r\n\t\ttitle: _x( 'Align bottom', 'Block vertical alignment setting' ),\r\n\t},\r\n\tstretch: {\r\n\t\ticon: alignStretch,\r\n\t\ttitle: _x( 'Stretch to fill', 'Block vertical alignment setting' ),\r\n\t},\r\n\t'space-between': {\r\n\t\ticon: spaceBetween,\r\n\t\ttitle: _x( 'Space between', 'Block vertical alignment setting' ),\r\n\t},\r\n};\r\n\r\nconst DEFAULT_CONTROLS = [ 'top', 'center', 'bottom' ];\r\nconst DEFAULT_CONTROL = 'top';\r\n\r\nfunction BlockVerticalAlignmentUI( {\r\n\tvalue,\r\n\tonChange,\r\n\tcontrols = DEFAULT_CONTROLS,\r\n\tisCollapsed = true,\r\n\tisToolbar,\r\n} ) {\r\n\tfunction applyOrUnset( align ) {\r\n\t\treturn () => onChange( value === align ? undefined : align );\r\n\t}\r\n\r\n\tconst activeAlignment = BLOCK_ALIGNMENTS_CONTROLS[ value ];\r\n\tconst defaultAlignmentControl =\r\n\t\tBLOCK_ALIGNMENTS_CONTROLS[ DEFAULT_CONTROL ];\r\n\r\n\tconst UIComponent = isToolbar ? ToolbarGroup : ToolbarDropdownMenu;\r\n\tconst extraProps = isToolbar ? { isCollapsed } : {};\r\n\r\n\treturn (\r\n\t\t<UIComponent\r\n\t\t\ticon={\r\n\t\t\t\tactiveAlignment\r\n\t\t\t\t\t? activeAlignment.icon\r\n\t\t\t\t\t: defaultAlignmentControl.icon\r\n\t\t\t}\r\n\t\t\tlabel={ _x(\r\n\t\t\t\t'Change vertical alignment',\r\n\t\t\t\t'Block vertical alignment setting label'\r\n\t\t\t) }\r\n\t\t\tcontrols={ controls.map( ( control ) => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...BLOCK_ALIGNMENTS_CONTROLS[ control ],\r\n\t\t\t\t\tisActive: value === control,\r\n\t\t\t\t\trole: isCollapsed ? 'menuitemradio' : undefined,\r\n\t\t\t\t\tonClick: applyOrUnset( control ),\r\n\t\t\t\t};\r\n\t\t\t} ) }\r\n\t\t\t{ ...extraProps }\r\n\t\t/>\r\n\t);\r\n}\r\n\r\n/**\r\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/block-vertical-alignment-toolbar/README.md\r\n */\r\nexport default BlockVerticalAlignmentUI;\r\n","/**\r\n * Internal dependencies\r\n */\r\nimport BlockVerticalAlignmentUI from './ui';\r\n\r\nconst BlockVerticalAlignmentControl = ( props ) => {\r\n\treturn <BlockVerticalAlignmentUI { ...props } isToolbar={ false } />;\r\n};\r\n\r\nconst BlockVerticalAlignmentToolbar = ( props ) => {\r\n\treturn <BlockVerticalAlignmentUI { ...props } isToolbar />;\r\n};\r\n\r\n/**\r\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/block-vertical-alignment-control/README.md\r\n */\r\nexport { BlockVerticalAlignmentControl, BlockVerticalAlignmentToolbar };\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { ToolbarDropdownMenu, ToolbarGroup } from '@wordpress/components';\r\nimport {\r\n\tjustifyLeft,\r\n\tjustifyCenter,\r\n\tjustifyRight,\r\n\tjustifySpaceBetween,\r\n\tjustifyStretch,\r\n} from '@wordpress/icons';\r\nimport { __ } from '@wordpress/i18n';\r\n\r\nconst icons = {\r\n\tleft: justifyLeft,\r\n\tcenter: justifyCenter,\r\n\tright: justifyRight,\r\n\t'space-between': justifySpaceBetween,\r\n\tstretch: justifyStretch,\r\n};\r\n\r\nfunction JustifyContentUI( {\r\n\tallowedControls = [ 'left', 'center', 'right', 'space-between' ],\r\n\tisCollapsed = true,\r\n\tonChange,\r\n\tvalue,\r\n\tpopoverProps,\r\n\tisToolbar,\r\n} ) {\r\n\t// If the control is already selected we want a click\r\n\t// again on the control to deselect the item, so we\r\n\t// call onChange( undefined )\r\n\tconst handleClick = ( next ) => {\r\n\t\tif ( next === value ) {\r\n\t\t\tonChange( undefined );\r\n\t\t} else {\r\n\t\t\tonChange( next );\r\n\t\t}\r\n\t};\r\n\r\n\tconst icon = value ? icons[ value ] : icons.left;\r\n\tconst allControls = [\r\n\t\t{\r\n\t\t\tname: 'left',\r\n\t\t\ticon: justifyLeft,\r\n\t\t\ttitle: __( 'Justify items left' ),\r\n\t\t\tisActive: 'left' === value,\r\n\t\t\tonClick: () => handleClick( 'left' ),\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'center',\r\n\t\t\ticon: justifyCenter,\r\n\t\t\ttitle: __( 'Justify items center' ),\r\n\t\t\tisActive: 'center' === value,\r\n\t\t\tonClick: () => handleClick( 'center' ),\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'right',\r\n\t\t\ticon: justifyRight,\r\n\t\t\ttitle: __( 'Justify items right' ),\r\n\t\t\tisActive: 'right' === value,\r\n\t\t\tonClick: () => handleClick( 'right' ),\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'space-between',\r\n\t\t\ticon: justifySpaceBetween,\r\n\t\t\ttitle: __( 'Space between items' ),\r\n\t\t\tisActive: 'space-between' === value,\r\n\t\t\tonClick: () => handleClick( 'space-between' ),\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'stretch',\r\n\t\t\ticon: justifyStretch,\r\n\t\t\ttitle: __( 'Stretch items' ),\r\n\t\t\tisActive: 'stretch' === value,\r\n\t\t\tonClick: () => handleClick( 'stretch' ),\r\n\t\t},\r\n\t];\r\n\r\n\tconst UIComponent = isToolbar ? ToolbarGroup : ToolbarDropdownMenu;\r\n\tconst extraProps = isToolbar ? { isCollapsed } : {};\r\n\r\n\treturn (\r\n\t\t<UIComponent\r\n\t\t\ticon={ icon }\r\n\t\t\tpopoverProps={ popoverProps }\r\n\t\t\tlabel={ __( 'Change items justification' ) }\r\n\t\t\tcontrols={ allControls.filter( ( elem ) =>\r\n\t\t\t\tallowedControls.includes( elem.name )\r\n\t\t\t) }\r\n\t\t\t{ ...extraProps }\r\n\t\t/>\r\n\t);\r\n}\r\n\r\nexport default JustifyContentUI;\r\n","/**\r\n * Internal dependencies\r\n */\r\nimport JustifyContentUI from './ui';\r\n\r\nconst JustifyContentControl = ( props ) => {\r\n\treturn <JustifyContentUI { ...props } isToolbar={ false } />;\r\n};\r\n\r\nconst JustifyToolbar = ( props ) => {\r\n\treturn <JustifyContentUI { ...props } isToolbar />;\r\n};\r\n\r\n/**\r\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/justify-content-control/README.md\r\n */\r\nexport { JustifyContentControl, JustifyToolbar };\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { __ } from '@wordpress/i18n';\r\nimport {\r\n\tjustifyLeft,\r\n\tjustifyCenter,\r\n\tjustifyRight,\r\n\tjustifySpaceBetween,\r\n\tjustifyStretch,\r\n\tarrowRight,\r\n\tarrowDown,\r\n} from '@wordpress/icons';\r\nimport {\r\n\tButton,\r\n\tToggleControl,\r\n\tFlex,\r\n\tFlexItem,\r\n\t__experimentalToggleGroupControl as ToggleGroupControl,\r\n\t__experimentalToggleGroupControlOptionIcon as ToggleGroupControlOptionIcon,\r\n} from '@wordpress/components';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { appendSelectors, getBlockGapCSS } from './utils';\r\nimport { getGapCSSValue } from '../hooks/gap';\r\nimport {\r\n\tBlockControls,\r\n\tJustifyContentControl,\r\n\tBlockVerticalAlignmentControl,\r\n} from '../components';\r\nimport { shouldSkipSerialization } from '../hooks/utils';\r\nimport { LAYOUT_DEFINITIONS } from './definitions';\r\n\r\n// Used with the default, horizontal flex orientation.\r\nconst justifyContentMap = {\r\n\tleft: 'flex-start',\r\n\tright: 'flex-end',\r\n\tcenter: 'center',\r\n\t'space-between': 'space-between',\r\n};\r\n\r\n// Used with the vertical (column) flex orientation.\r\nconst alignItemsMap = {\r\n\tleft: 'flex-start',\r\n\tright: 'flex-end',\r\n\tcenter: 'center',\r\n\tstretch: 'stretch',\r\n};\r\n\r\nconst verticalAlignmentMap = {\r\n\ttop: 'flex-start',\r\n\tcenter: 'center',\r\n\tbottom: 'flex-end',\r\n\tstretch: 'stretch',\r\n\t'space-between': 'space-between',\r\n};\r\n\r\nconst flexWrapOptions = [ 'wrap', 'nowrap' ];\r\n\r\nexport default {\r\n\tname: 'flex',\r\n\tlabel: __( 'Flex' ),\r\n\tinspectorControls: function FlexLayoutInspectorControls( {\r\n\t\tlayout = {},\r\n\t\tonChange,\r\n\t\tlayoutBlockSupport = {},\r\n\t} ) {\r\n\t\tconst { allowOrientation = true } = layoutBlockSupport;\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<Flex>\r\n\t\t\t\t\t<FlexItem>\r\n\t\t\t\t\t\t<FlexLayoutJustifyContentControl\r\n\t\t\t\t\t\t\tlayout={ layout }\r\n\t\t\t\t\t\t\tonChange={ onChange }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</FlexItem>\r\n\t\t\t\t\t<FlexItem>\r\n\t\t\t\t\t\t{ allowOrientation && (\r\n\t\t\t\t\t\t\t<OrientationControl\r\n\t\t\t\t\t\t\t\tlayout={ layout }\r\n\t\t\t\t\t\t\t\tonChange={ onChange }\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t) }\r\n\t\t\t\t\t</FlexItem>\r\n\t\t\t\t</Flex>\r\n\t\t\t\t<FlexWrapControl layout={ layout } onChange={ onChange } />\r\n\t\t\t</>\r\n\t\t);\r\n\t},\r\n\ttoolBarControls: function FlexLayoutToolbarControls( {\r\n\t\tlayout = {},\r\n\t\tonChange,\r\n\t\tlayoutBlockSupport,\r\n\t} ) {\r\n\t\tif ( layoutBlockSupport?.allowSwitching ) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tconst { allowVerticalAlignment = true } = layoutBlockSupport;\r\n\t\treturn (\r\n\t\t\t<BlockControls group=\"block\" __experimentalShareWithChildBlocks>\r\n\t\t\t\t<FlexLayoutJustifyContentControl\r\n\t\t\t\t\tlayout={ layout }\r\n\t\t\t\t\tonChange={ onChange }\r\n\t\t\t\t\tisToolbar\r\n\t\t\t\t/>\r\n\t\t\t\t{ allowVerticalAlignment && (\r\n\t\t\t\t\t<FlexLayoutVerticalAlignmentControl\r\n\t\t\t\t\t\tlayout={ layout }\r\n\t\t\t\t\t\tonChange={ onChange }\r\n\t\t\t\t\t\tisToolbar\r\n\t\t\t\t\t/>\r\n\t\t\t\t) }\r\n\t\t\t</BlockControls>\r\n\t\t);\r\n\t},\r\n\tgetLayoutStyle: function getLayoutStyle( {\r\n\t\tselector,\r\n\t\tlayout,\r\n\t\tstyle,\r\n\t\tblockName,\r\n\t\thasBlockGapSupport,\r\n\t\tlayoutDefinitions = LAYOUT_DEFINITIONS,\r\n\t} ) {\r\n\t\tconst { orientation = 'horizontal' } = layout;\r\n\r\n\t\t// If a block's block.json skips serialization for spacing or spacing.blockGap,\r\n\t\t// don't apply the user-defined value to the styles.\r\n\t\tconst blockGapValue =\r\n\t\t\tstyle?.spacing?.blockGap &&\r\n\t\t\t! shouldSkipSerialization( blockName, 'spacing', 'blockGap' )\r\n\t\t\t\t? getGapCSSValue( style?.spacing?.blockGap, '0.5em' )\r\n\t\t\t\t: undefined;\r\n\t\tconst justifyContent = justifyContentMap[ layout.justifyContent ];\r\n\t\tconst flexWrap = flexWrapOptions.includes( layout.flexWrap )\r\n\t\t\t? layout.flexWrap\r\n\t\t\t: 'wrap';\r\n\t\tconst verticalAlignment =\r\n\t\t\tverticalAlignmentMap[ layout.verticalAlignment ];\r\n\t\tconst alignItems =\r\n\t\t\talignItemsMap[ layout.justifyContent ] || alignItemsMap.left;\r\n\r\n\t\tlet output = '';\r\n\t\tconst rules = [];\r\n\r\n\t\tif ( flexWrap && flexWrap !== 'wrap' ) {\r\n\t\t\trules.push( `flex-wrap: ${ flexWrap }` );\r\n\t\t}\r\n\r\n\t\tif ( orientation === 'horizontal' ) {\r\n\t\t\tif ( verticalAlignment ) {\r\n\t\t\t\trules.push( `align-items: ${ verticalAlignment }` );\r\n\t\t\t}\r\n\t\t\tif ( justifyContent ) {\r\n\t\t\t\trules.push( `justify-content: ${ justifyContent }` );\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif ( verticalAlignment ) {\r\n\t\t\t\trules.push( `justify-content: ${ verticalAlignment }` );\r\n\t\t\t}\r\n\t\t\trules.push( 'flex-direction: column' );\r\n\t\t\trules.push( `align-items: ${ alignItems }` );\r\n\t\t}\r\n\r\n\t\tif ( rules.length ) {\r\n\t\t\toutput = `${ appendSelectors( selector ) } {\r\n\t\t\t\t${ rules.join( '; ' ) };\r\n\t\t\t}`;\r\n\t\t}\r\n\r\n\t\t// Output blockGap styles based on rules contained in layout definitions in theme.json.\r\n\t\tif ( hasBlockGapSupport && blockGapValue ) {\r\n\t\t\toutput += getBlockGapCSS(\r\n\t\t\t\tselector,\r\n\t\t\t\tlayoutDefinitions,\r\n\t\t\t\t'flex',\r\n\t\t\t\tblockGapValue\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn output;\r\n\t},\r\n\tgetOrientation( layout ) {\r\n\t\tconst { orientation = 'horizontal' } = layout;\r\n\t\treturn orientation;\r\n\t},\r\n\tgetAlignments() {\r\n\t\treturn [];\r\n\t},\r\n};\r\n\r\nfunction FlexLayoutVerticalAlignmentControl( {\r\n\tlayout,\r\n\tonChange,\r\n\tisToolbar = false,\r\n} ) {\r\n\tconst { orientation = 'horizontal' } = layout;\r\n\r\n\tconst defaultVerticalAlignment =\r\n\t\torientation === 'horizontal'\r\n\t\t\t? verticalAlignmentMap.center\r\n\t\t\t: verticalAlignmentMap.top;\r\n\r\n\tconst { verticalAlignment = defaultVerticalAlignment } = layout;\r\n\r\n\tconst onVerticalAlignmentChange = ( value ) => {\r\n\t\tonChange( {\r\n\t\t\t...layout,\r\n\t\t\tverticalAlignment: value,\r\n\t\t} );\r\n\t};\r\n\tif ( isToolbar ) {\r\n\t\treturn (\r\n\t\t\t<BlockVerticalAlignmentControl\r\n\t\t\t\tonChange={ onVerticalAlignmentChange }\r\n\t\t\t\tvalue={ verticalAlignment }\r\n\t\t\t\tcontrols={\r\n\t\t\t\t\torientation === 'horizontal'\r\n\t\t\t\t\t\t? [ 'top', 'center', 'bottom', 'stretch' ]\r\n\t\t\t\t\t\t: [ 'top', 'center', 'bottom', 'space-between' ]\r\n\t\t\t\t}\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n\r\n\tconst verticalAlignmentOptions = [\r\n\t\t{\r\n\t\t\tvalue: 'flex-start',\r\n\t\t\tlabel: __( 'Align items top' ),\r\n\t\t},\r\n\t\t{\r\n\t\t\tvalue: 'center',\r\n\t\t\tlabel: __( 'Align items center' ),\r\n\t\t},\r\n\t\t{\r\n\t\t\tvalue: 'flex-end',\r\n\t\t\tlabel: __( 'Align items bottom' ),\r\n\t\t},\r\n\t];\r\n\r\n\treturn (\r\n\t\t<fieldset className=\"block-editor-hooks__flex-layout-vertical-alignment-control\">\r\n\t\t\t<legend>{ __( 'Vertical alignment' ) }</legend>\r\n\t\t\t<div>\r\n\t\t\t\t{ verticalAlignmentOptions.map( ( value, icon, label ) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tkey={ value }\r\n\t\t\t\t\t\t\tlabel={ label }\r\n\t\t\t\t\t\t\ticon={ icon }\r\n\t\t\t\t\t\t\tisPressed={ verticalAlignment === value }\r\n\t\t\t\t\t\t\tonClick={ () => onVerticalAlignmentChange( value ) }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t);\r\n\t\t\t\t} ) }\r\n\t\t\t</div>\r\n\t\t</fieldset>\r\n\t);\r\n}\r\n\r\nconst POPOVER_PROPS = {\r\n\tplacement: 'bottom-start',\r\n};\r\n\r\nfunction FlexLayoutJustifyContentControl( {\r\n\tlayout,\r\n\tonChange,\r\n\tisToolbar = false,\r\n} ) {\r\n\tconst { justifyContent = 'left', orientation = 'horizontal' } = layout;\r\n\tconst onJustificationChange = ( value ) => {\r\n\t\tonChange( {\r\n\t\t\t...layout,\r\n\t\t\tjustifyContent: value,\r\n\t\t} );\r\n\t};\r\n\tconst allowedControls = [ 'left', 'center', 'right' ];\r\n\tif ( orientation === 'horizontal' ) {\r\n\t\tallowedControls.push( 'space-between' );\r\n\t} else {\r\n\t\tallowedControls.push( 'stretch' );\r\n\t}\r\n\tif ( isToolbar ) {\r\n\t\treturn (\r\n\t\t\t<JustifyContentControl\r\n\t\t\t\tallowedControls={ allowedControls }\r\n\t\t\t\tvalue={ justifyContent }\r\n\t\t\t\tonChange={ onJustificationChange }\r\n\t\t\t\tpopoverProps={ POPOVER_PROPS }\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n\r\n\tconst justificationOptions = [\r\n\t\t{\r\n\t\t\tvalue: 'left',\r\n\t\t\ticon: justifyLeft,\r\n\t\t\tlabel: __( 'Justify items left' ),\r\n\t\t},\r\n\t\t{\r\n\t\t\tvalue: 'center',\r\n\t\t\ticon: justifyCenter,\r\n\t\t\tlabel: __( 'Justify items center' ),\r\n\t\t},\r\n\t\t{\r\n\t\t\tvalue: 'right',\r\n\t\t\ticon: justifyRight,\r\n\t\t\tlabel: __( 'Justify items right' ),\r\n\t\t},\r\n\t];\r\n\tif ( orientation === 'horizontal' ) {\r\n\t\tjustificationOptions.push( {\r\n\t\t\tvalue: 'space-between',\r\n\t\t\ticon: justifySpaceBetween,\r\n\t\t\tlabel: __( 'Space between items' ),\r\n\t\t} );\r\n\t} else {\r\n\t\tjustificationOptions.push( {\r\n\t\t\tvalue: 'stretch',\r\n\t\t\ticon: justifyStretch,\r\n\t\t\tlabel: __( 'Stretch items' ),\r\n\t\t} );\r\n\t}\r\n\r\n\treturn (\r\n\t\t<ToggleGroupControl\r\n\t\t\t__nextHasNoMarginBottom\r\n\t\t\tlabel={ __( 'Justification' ) }\r\n\t\t\tvalue={ justifyContent }\r\n\t\t\tonChange={ onJustificationChange }\r\n\t\t\tclassName=\"block-editor-hooks__flex-layout-justification-controls\"\r\n\t\t>\r\n\t\t\t{ justificationOptions.map( ( { value, icon, label } ) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<ToggleGroupControlOptionIcon\r\n\t\t\t\t\t\tkey={ value }\r\n\t\t\t\t\t\tvalue={ value }\r\n\t\t\t\t\t\ticon={ icon }\r\n\t\t\t\t\t\tlabel={ label }\r\n\t\t\t\t\t/>\r\n\t\t\t\t);\r\n\t\t\t} ) }\r\n\t\t</ToggleGroupControl>\r\n\t);\r\n}\r\n\r\nfunction FlexWrapControl( { layout, onChange } ) {\r\n\tconst { flexWrap = 'wrap' } = layout;\r\n\treturn (\r\n\t\t<ToggleControl\r\n\t\t\t__nextHasNoMarginBottom\r\n\t\t\tlabel={ __( 'Allow to wrap to multiple lines' ) }\r\n\t\t\tonChange={ ( value ) => {\r\n\t\t\t\tonChange( {\r\n\t\t\t\t\t...layout,\r\n\t\t\t\t\tflexWrap: value ? 'wrap' : 'nowrap',\r\n\t\t\t\t} );\r\n\t\t\t} }\r\n\t\t\tchecked={ flexWrap === 'wrap' }\r\n\t\t/>\r\n\t);\r\n}\r\n\r\nfunction OrientationControl( { layout, onChange } ) {\r\n\tconst {\r\n\t\torientation = 'horizontal',\r\n\t\tverticalAlignment,\r\n\t\tjustifyContent,\r\n\t} = layout;\r\n\treturn (\r\n\t\t<ToggleGroupControl\r\n\t\t\t__nextHasNoMarginBottom\r\n\t\t\tclassName=\"block-editor-hooks__flex-layout-orientation-controls\"\r\n\t\t\tlabel={ __( 'Orientation' ) }\r\n\t\t\tvalue={ orientation }\r\n\t\t\tonChange={ ( value ) => {\r\n\t\t\t\t// Make sure the vertical alignment and justification are compatible with the new orientation.\r\n\t\t\t\tlet newVerticalAlignment = verticalAlignment;\r\n\t\t\t\tlet newJustification = justifyContent;\r\n\t\t\t\tif ( value === 'horizontal' ) {\r\n\t\t\t\t\tif ( verticalAlignment === 'space-between' ) {\r\n\t\t\t\t\t\tnewVerticalAlignment = 'center';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( justifyContent === 'stretch' ) {\r\n\t\t\t\t\t\tnewJustification = 'left';\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif ( verticalAlignment === 'stretch' ) {\r\n\t\t\t\t\t\tnewVerticalAlignment = 'top';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( justifyContent === 'space-between' ) {\r\n\t\t\t\t\t\tnewJustification = 'left';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn onChange( {\r\n\t\t\t\t\t...layout,\r\n\t\t\t\t\torientation: value,\r\n\t\t\t\t\tverticalAlignment: newVerticalAlignment,\r\n\t\t\t\t\tjustifyContent: newJustification,\r\n\t\t\t\t} );\r\n\t\t\t} }\r\n\t\t>\r\n\t\t\t<ToggleGroupControlOptionIcon\r\n\t\t\t\ticon={ arrowRight }\r\n\t\t\t\tvalue={ 'horizontal' }\r\n\t\t\t\tlabel={ __( 'Horizontal' ) }\r\n\t\t\t/>\r\n\t\t\t<ToggleGroupControlOptionIcon\r\n\t\t\t\ticon={ arrowDown }\r\n\t\t\t\tvalue={ 'vertical' }\r\n\t\t\t\tlabel={ __( 'Vertical' ) }\r\n\t\t\t/>\r\n\t\t</ToggleGroupControl>\r\n\t);\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { __ } from '@wordpress/i18n';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { getBlockGapCSS, getAlignmentsInfo } from './utils';\r\nimport { getGapCSSValue } from '../hooks/gap';\r\nimport { shouldSkipSerialization } from '../hooks/utils';\r\nimport { LAYOUT_DEFINITIONS } from './definitions';\r\n\r\nexport default {\r\n\tname: 'default',\r\n\tlabel: __( 'Flow' ),\r\n\tinspectorControls: function DefaultLayoutInspectorControls() {\r\n\t\treturn null;\r\n\t},\r\n\ttoolBarControls: function DefaultLayoutToolbarControls() {\r\n\t\treturn null;\r\n\t},\r\n\tgetLayoutStyle: function getLayoutStyle( {\r\n\t\tselector,\r\n\t\tstyle,\r\n\t\tblockName,\r\n\t\thasBlockGapSupport,\r\n\t\tlayoutDefinitions = LAYOUT_DEFINITIONS,\r\n\t} ) {\r\n\t\tconst blockGapStyleValue = getGapCSSValue( style?.spacing?.blockGap );\r\n\r\n\t\t// If a block's block.json skips serialization for spacing or\r\n\t\t// spacing.blockGap, don't apply the user-defined value to the styles.\r\n\t\tlet blockGapValue = '';\r\n\t\tif ( ! shouldSkipSerialization( blockName, 'spacing', 'blockGap' ) ) {\r\n\t\t\t// If an object is provided only use the 'top' value for this kind of gap.\r\n\t\t\tif ( blockGapStyleValue?.top ) {\r\n\t\t\t\tblockGapValue = getGapCSSValue( blockGapStyleValue?.top );\r\n\t\t\t} else if ( typeof blockGapStyleValue === 'string' ) {\r\n\t\t\t\tblockGapValue = getGapCSSValue( blockGapStyleValue );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet output = '';\r\n\r\n\t\t// Output blockGap styles based on rules contained in layout definitions in theme.json.\r\n\t\tif ( hasBlockGapSupport && blockGapValue ) {\r\n\t\t\toutput += getBlockGapCSS(\r\n\t\t\t\tselector,\r\n\t\t\t\tlayoutDefinitions,\r\n\t\t\t\t'default',\r\n\t\t\t\tblockGapValue\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn output;\r\n\t},\r\n\tgetOrientation() {\r\n\t\treturn 'vertical';\r\n\t},\r\n\tgetAlignments( layout, isBlockBasedTheme ) {\r\n\t\tconst alignmentInfo = getAlignmentsInfo( layout );\r\n\t\tif ( layout.alignments !== undefined ) {\r\n\t\t\tif ( ! layout.alignments.includes( 'none' ) ) {\r\n\t\t\t\tlayout.alignments.unshift( 'none' );\r\n\t\t\t}\r\n\t\t\treturn layout.alignments.map( ( alignment ) => ( {\r\n\t\t\t\tname: alignment,\r\n\t\t\t\tinfo: alignmentInfo[ alignment ],\r\n\t\t\t} ) );\r\n\t\t}\r\n\r\n\t\tconst alignments = [\r\n\t\t\t{ name: 'left' },\r\n\t\t\t{ name: 'center' },\r\n\t\t\t{ name: 'right' },\r\n\t\t];\r\n\r\n\t\t// This is for backwards compatibility with hybrid themes.\r\n\t\tif ( ! isBlockBasedTheme ) {\r\n\t\t\tconst { contentSize, wideSize } = layout;\r\n\t\t\tif ( contentSize ) {\r\n\t\t\t\talignments.unshift( { name: 'full' } );\r\n\t\t\t}\r\n\r\n\t\t\tif ( wideSize ) {\r\n\t\t\t\talignments.unshift( {\r\n\t\t\t\t\tname: 'wide',\r\n\t\t\t\t\tinfo: alignmentInfo.wide,\r\n\t\t\t\t} );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\talignments.unshift( { name: 'none', info: alignmentInfo.none } );\r\n\r\n\t\treturn alignments;\r\n\t},\r\n};\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { cloneElement, forwardRef } from '@wordpress/element';\r\n\r\n/** @typedef {{icon: JSX.Element, size?: number} & import('@wordpress/primitives').SVGProps} IconProps */\r\n\r\n/**\r\n * Return an SVG icon.\r\n *\r\n * @param {IconProps}                                 props icon is the SVG component to render\r\n *                                                          size is a number specifiying the icon size in pixels\r\n *                                                          Other props will be passed to wrapped SVG component\r\n * @param {import('react').ForwardedRef<HTMLElement>} ref   The forwarded ref to the SVG element.\r\n *\r\n * @return {JSX.Element}  Icon component\r\n */\r\nfunction Icon( { icon, size = 24, ...props }, ref ) {\r\n\treturn cloneElement( icon, {\r\n\t\twidth: size,\r\n\t\theight: size,\r\n\t\t...props,\r\n\t\tref,\r\n\t} );\r\n}\r\n\r\nexport default forwardRef( Icon );\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst positionCenter = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M19 5.5H5V4h14v1.5ZM19 20H5v-1.5h14V20ZM7 9h10v6H7V9Z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default positionCenter;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst stretchWide = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M16 5.5H8V4h8v1.5ZM16 20H8v-1.5h8V20ZM5 9h14v6H5V9Z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default stretchWide;\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"styleEngine\"];","/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\t__experimentalUseCustomUnits as useCustomUnits,\r\n\t__experimentalUnitControl as UnitControl,\r\n\t__experimentalToggleGroupControl as ToggleGroupControl,\r\n\t__experimentalToggleGroupControlOptionIcon as ToggleGroupControlOptionIcon,\r\n} from '@wordpress/components';\r\nimport { __ } from '@wordpress/i18n';\r\nimport {\r\n\tIcon,\r\n\tpositionCenter,\r\n\tstretchWide,\r\n\tjustifyLeft,\r\n\tjustifyCenter,\r\n\tjustifyRight,\r\n} from '@wordpress/icons';\r\nimport { getCSSRules } from '@wordpress/style-engine';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { useSettings } from '../components/use-settings';\r\nimport { appendSelectors, getBlockGapCSS, getAlignmentsInfo } from './utils';\r\nimport { getGapCSSValue } from '../hooks/gap';\r\nimport { shouldSkipSerialization } from '../hooks/utils';\r\nimport { LAYOUT_DEFINITIONS } from './definitions';\r\n\r\nexport default {\r\n\tname: 'constrained',\r\n\tlabel: __( 'Constrained' ),\r\n\tinspectorControls: function DefaultLayoutInspectorControls( {\r\n\t\tlayout,\r\n\t\tonChange,\r\n\t\tlayoutBlockSupport = {},\r\n\t} ) {\r\n\t\tconst { wideSize, contentSize, justifyContent = 'center' } = layout;\r\n\t\tconst {\r\n\t\t\tallowJustification = true,\r\n\t\t\tallowCustomContentAndWideSize = true,\r\n\t\t} = layoutBlockSupport;\r\n\t\tconst onJustificationChange = ( value ) => {\r\n\t\t\tonChange( {\r\n\t\t\t\t...layout,\r\n\t\t\t\tjustifyContent: value,\r\n\t\t\t} );\r\n\t\t};\r\n\t\tconst justificationOptions = [\r\n\t\t\t{\r\n\t\t\t\tvalue: 'left',\r\n\t\t\t\ticon: justifyLeft,\r\n\t\t\t\tlabel: __( 'Justify items left' ),\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tvalue: 'center',\r\n\t\t\t\ticon: justifyCenter,\r\n\t\t\t\tlabel: __( 'Justify items center' ),\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tvalue: 'right',\r\n\t\t\t\ticon: justifyRight,\r\n\t\t\t\tlabel: __( 'Justify items right' ),\r\n\t\t\t},\r\n\t\t];\r\n\t\tconst [ availableUnits ] = useSettings( 'spacing.units' );\r\n\t\tconst units = useCustomUnits( {\r\n\t\t\tavailableUnits: availableUnits || [ '%', 'px', 'em', 'rem', 'vw' ],\r\n\t\t} );\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t{ allowCustomContentAndWideSize && (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<div className=\"block-editor-hooks__layout-controls\">\r\n\t\t\t\t\t\t\t<div className=\"block-editor-hooks__layout-controls-unit\">\r\n\t\t\t\t\t\t\t\t<UnitControl\r\n\t\t\t\t\t\t\t\t\tclassName=\"block-editor-hooks__layout-controls-unit-input\"\r\n\t\t\t\t\t\t\t\t\tlabel={ __( 'Content' ) }\r\n\t\t\t\t\t\t\t\t\tlabelPosition=\"top\"\r\n\t\t\t\t\t\t\t\t\t__unstableInputWidth=\"80px\"\r\n\t\t\t\t\t\t\t\t\tvalue={ contentSize || wideSize || '' }\r\n\t\t\t\t\t\t\t\t\tonChange={ ( nextWidth ) => {\r\n\t\t\t\t\t\t\t\t\t\tnextWidth =\r\n\t\t\t\t\t\t\t\t\t\t\t0 > parseFloat( nextWidth )\r\n\t\t\t\t\t\t\t\t\t\t\t\t? '0'\r\n\t\t\t\t\t\t\t\t\t\t\t\t: nextWidth;\r\n\t\t\t\t\t\t\t\t\t\tonChange( {\r\n\t\t\t\t\t\t\t\t\t\t\t...layout,\r\n\t\t\t\t\t\t\t\t\t\t\tcontentSize: nextWidth,\r\n\t\t\t\t\t\t\t\t\t\t} );\r\n\t\t\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t\t\t\tunits={ units }\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<Icon icon={ positionCenter } />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"block-editor-hooks__layout-controls-unit\">\r\n\t\t\t\t\t\t\t\t<UnitControl\r\n\t\t\t\t\t\t\t\t\tclassName=\"block-editor-hooks__layout-controls-unit-input\"\r\n\t\t\t\t\t\t\t\t\tlabel={ __( 'Wide' ) }\r\n\t\t\t\t\t\t\t\t\tlabelPosition=\"top\"\r\n\t\t\t\t\t\t\t\t\t__unstableInputWidth=\"80px\"\r\n\t\t\t\t\t\t\t\t\tvalue={ wideSize || contentSize || '' }\r\n\t\t\t\t\t\t\t\t\tonChange={ ( nextWidth ) => {\r\n\t\t\t\t\t\t\t\t\t\tnextWidth =\r\n\t\t\t\t\t\t\t\t\t\t\t0 > parseFloat( nextWidth )\r\n\t\t\t\t\t\t\t\t\t\t\t\t? '0'\r\n\t\t\t\t\t\t\t\t\t\t\t\t: nextWidth;\r\n\t\t\t\t\t\t\t\t\t\tonChange( {\r\n\t\t\t\t\t\t\t\t\t\t\t...layout,\r\n\t\t\t\t\t\t\t\t\t\t\twideSize: nextWidth,\r\n\t\t\t\t\t\t\t\t\t\t} );\r\n\t\t\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t\t\t\tunits={ units }\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<Icon icon={ stretchWide } />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<p className=\"block-editor-hooks__layout-controls-helptext\">\r\n\t\t\t\t\t\t\t{ __(\r\n\t\t\t\t\t\t\t\t'Customize the width for all elements that are assigned to the center or wide columns.'\r\n\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</>\r\n\t\t\t\t) }\r\n\t\t\t\t{ allowJustification && (\r\n\t\t\t\t\t<ToggleGroupControl\r\n\t\t\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t\t\t\tlabel={ __( 'Justification' ) }\r\n\t\t\t\t\t\tvalue={ justifyContent }\r\n\t\t\t\t\t\tonChange={ onJustificationChange }\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{ justificationOptions.map(\r\n\t\t\t\t\t\t\t( { value, icon, label } ) => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<ToggleGroupControlOptionIcon\r\n\t\t\t\t\t\t\t\t\t\tkey={ value }\r\n\t\t\t\t\t\t\t\t\t\tvalue={ value }\r\n\t\t\t\t\t\t\t\t\t\ticon={ icon }\r\n\t\t\t\t\t\t\t\t\t\tlabel={ label }\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t) }\r\n\t\t\t\t\t</ToggleGroupControl>\r\n\t\t\t\t) }\r\n\t\t\t</>\r\n\t\t);\r\n\t},\r\n\ttoolBarControls: function DefaultLayoutToolbarControls() {\r\n\t\treturn null;\r\n\t},\r\n\tgetLayoutStyle: function getLayoutStyle( {\r\n\t\tselector,\r\n\t\tlayout = {},\r\n\t\tstyle,\r\n\t\tblockName,\r\n\t\thasBlockGapSupport,\r\n\t\tlayoutDefinitions = LAYOUT_DEFINITIONS,\r\n\t} ) {\r\n\t\tconst { contentSize, wideSize, justifyContent } = layout;\r\n\t\tconst blockGapStyleValue = getGapCSSValue( style?.spacing?.blockGap );\r\n\r\n\t\t// If a block's block.json skips serialization for spacing or\r\n\t\t// spacing.blockGap, don't apply the user-defined value to the styles.\r\n\t\tlet blockGapValue = '';\r\n\t\tif ( ! shouldSkipSerialization( blockName, 'spacing', 'blockGap' ) ) {\r\n\t\t\t// If an object is provided only use the 'top' value for this kind of gap.\r\n\t\t\tif ( blockGapStyleValue?.top ) {\r\n\t\t\t\tblockGapValue = getGapCSSValue( blockGapStyleValue?.top );\r\n\t\t\t} else if ( typeof blockGapStyleValue === 'string' ) {\r\n\t\t\t\tblockGapValue = getGapCSSValue( blockGapStyleValue );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst marginLeft =\r\n\t\t\tjustifyContent === 'left' ? '0 !important' : 'auto !important';\r\n\t\tconst marginRight =\r\n\t\t\tjustifyContent === 'right' ? '0 !important' : 'auto !important';\r\n\r\n\t\tlet output =\r\n\t\t\t!! contentSize || !! wideSize\r\n\t\t\t\t? `\r\n\t\t\t\t\t${ appendSelectors(\r\n\t\t\t\t\t\tselector,\r\n\t\t\t\t\t\t'> :where(:not(.alignleft):not(.alignright):not(.alignfull))'\r\n\t\t\t\t\t) } {\r\n\t\t\t\t\t\tmax-width: ${ contentSize ?? wideSize };\r\n\t\t\t\t\t\tmargin-left: ${ marginLeft };\r\n\t\t\t\t\t\tmargin-right: ${ marginRight };\r\n\t\t\t\t\t}\r\n\t\t\t\t\t${ appendSelectors( selector, '> .alignwide' ) }  {\r\n\t\t\t\t\t\tmax-width: ${ wideSize ?? contentSize };\r\n\t\t\t\t\t}\r\n\t\t\t\t\t${ appendSelectors( selector, '> .alignfull' ) } {\r\n\t\t\t\t\t\tmax-width: none;\r\n\t\t\t\t\t}\r\n\t\t\t\t`\r\n\t\t\t\t: '';\r\n\r\n\t\tif ( justifyContent === 'left' ) {\r\n\t\t\toutput += `${ appendSelectors(\r\n\t\t\t\tselector,\r\n\t\t\t\t'> :where(:not(.alignleft):not(.alignright):not(.alignfull))'\r\n\t\t\t) }\r\n\t\t\t{ margin-left: ${ marginLeft }; }`;\r\n\t\t} else if ( justifyContent === 'right' ) {\r\n\t\t\toutput += `${ appendSelectors(\r\n\t\t\t\tselector,\r\n\t\t\t\t'> :where(:not(.alignleft):not(.alignright):not(.alignfull))'\r\n\t\t\t) }\r\n\t\t\t{ margin-right: ${ marginRight }; }`;\r\n\t\t}\r\n\r\n\t\t// If there is custom padding, add negative margins for alignfull blocks.\r\n\t\tif ( style?.spacing?.padding ) {\r\n\t\t\t// The style object might be storing a preset so we need to make sure we get a usable value.\r\n\t\t\tconst paddingValues = getCSSRules( style );\r\n\t\t\tpaddingValues.forEach( ( rule ) => {\r\n\t\t\t\tif ( rule.key === 'paddingRight' ) {\r\n\t\t\t\t\toutput += `\r\n\t\t\t\t\t${ appendSelectors( selector, '> .alignfull' ) } {\r\n\t\t\t\t\t\tmargin-right: calc(${ rule.value } * -1);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t`;\r\n\t\t\t\t} else if ( rule.key === 'paddingLeft' ) {\r\n\t\t\t\t\toutput += `\r\n\t\t\t\t\t${ appendSelectors( selector, '> .alignfull' ) } {\r\n\t\t\t\t\t\tmargin-left: calc(${ rule.value } * -1);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t`;\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\t\t}\r\n\r\n\t\t// Output blockGap styles based on rules contained in layout definitions in theme.json.\r\n\t\tif ( hasBlockGapSupport && blockGapValue ) {\r\n\t\t\toutput += getBlockGapCSS(\r\n\t\t\t\tselector,\r\n\t\t\t\tlayoutDefinitions,\r\n\t\t\t\t'constrained',\r\n\t\t\t\tblockGapValue\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn output;\r\n\t},\r\n\tgetOrientation() {\r\n\t\treturn 'vertical';\r\n\t},\r\n\tgetAlignments( layout ) {\r\n\t\tconst alignmentInfo = getAlignmentsInfo( layout );\r\n\t\tif ( layout.alignments !== undefined ) {\r\n\t\t\tif ( ! layout.alignments.includes( 'none' ) ) {\r\n\t\t\t\tlayout.alignments.unshift( 'none' );\r\n\t\t\t}\r\n\t\t\treturn layout.alignments.map( ( alignment ) => ( {\r\n\t\t\t\tname: alignment,\r\n\t\t\t\tinfo: alignmentInfo[ alignment ],\r\n\t\t\t} ) );\r\n\t\t}\r\n\t\tconst { contentSize, wideSize } = layout;\r\n\r\n\t\tconst alignments = [\r\n\t\t\t{ name: 'left' },\r\n\t\t\t{ name: 'center' },\r\n\t\t\t{ name: 'right' },\r\n\t\t];\r\n\r\n\t\tif ( contentSize ) {\r\n\t\t\talignments.unshift( { name: 'full' } );\r\n\t\t}\r\n\r\n\t\tif ( wideSize ) {\r\n\t\t\talignments.unshift( { name: 'wide', info: alignmentInfo.wide } );\r\n\t\t}\r\n\r\n\t\talignments.unshift( { name: 'none', info: alignmentInfo.none } );\r\n\r\n\t\treturn alignments;\r\n\t},\r\n};\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { createContext, useMemo } from '@wordpress/element';\r\n\r\nexport const BlockRefs = createContext( {\r\n\trefs: new Map(),\r\n\tcallbacks: new Map(),\r\n} );\r\n\r\nexport function BlockRefsProvider( { children } ) {\r\n\tconst value = useMemo(\r\n\t\t() => ( { refs: new Map(), callbacks: new Map() } ),\r\n\t\t[]\r\n\t);\r\n\treturn (\r\n\t\t<BlockRefs.Provider value={ value }>{ children }</BlockRefs.Provider>\r\n\t);\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\tuseContext,\r\n\tuseLayoutEffect,\r\n\tuseMemo,\r\n\tuseRef,\r\n\tuseState,\r\n} from '@wordpress/element';\r\nimport { useRefEffect } from '@wordpress/compose';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { BlockRefs } from '../../provider/block-refs-provider';\r\n\r\n/** @typedef {import('@wordpress/element').RefCallback} RefCallback */\r\n/** @typedef {import('@wordpress/element').RefObject} RefObject */\r\n\r\n/**\r\n * Provides a ref to the BlockRefs context.\r\n *\r\n * @param {string} clientId The client ID of the element ref.\r\n *\r\n * @return {RefCallback} Ref callback.\r\n */\r\nexport function useBlockRefProvider( clientId ) {\r\n\tconst { refs, callbacks } = useContext( BlockRefs );\r\n\tconst ref = useRef();\r\n\tuseLayoutEffect( () => {\r\n\t\trefs.set( ref, clientId );\r\n\t\treturn () => {\r\n\t\t\trefs.delete( ref );\r\n\t\t};\r\n\t}, [ clientId ] );\r\n\treturn useRefEffect(\r\n\t\t( element ) => {\r\n\t\t\t// Update the ref in the provider.\r\n\t\t\tref.current = element;\r\n\t\t\t// Call any update functions.\r\n\t\t\tcallbacks.forEach( ( id, setElement ) => {\r\n\t\t\t\tif ( clientId === id ) {\r\n\t\t\t\t\tsetElement( element );\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\t\t},\r\n\t\t[ clientId ]\r\n\t);\r\n}\r\n\r\n/**\r\n * Gets a ref pointing to the current block element. Continues to return a\r\n * stable ref even if the block client ID changes.\r\n *\r\n * @param {string} clientId The client ID to get a ref for.\r\n *\r\n * @return {RefObject} A ref containing the element.\r\n */\r\nfunction useBlockRef( clientId ) {\r\n\tconst { refs } = useContext( BlockRefs );\r\n\tconst freshClientId = useRef();\r\n\tfreshClientId.current = clientId;\r\n\t// Always return an object, even if no ref exists for a given client ID, so\r\n\t// that `current` works at a later point.\r\n\treturn useMemo(\r\n\t\t() => ( {\r\n\t\t\tget current() {\r\n\t\t\t\tlet element = null;\r\n\r\n\t\t\t\t// Multiple refs may be created for a single block. Find the\r\n\t\t\t\t// first that has an element set.\r\n\t\t\t\tfor ( const [ ref, id ] of refs.entries() ) {\r\n\t\t\t\t\tif ( id === freshClientId.current && ref.current ) {\r\n\t\t\t\t\t\telement = ref.current;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn element;\r\n\t\t\t},\r\n\t\t} ),\r\n\t\t[]\r\n\t);\r\n}\r\n\r\n/**\r\n * Return the element for a given client ID. Updates whenever the element\r\n * changes, becomes available, or disappears.\r\n *\r\n * @param {string} clientId The client ID to an element for.\r\n *\r\n * @return {Element|null} The block's wrapper element.\r\n */\r\nfunction useBlockElement( clientId ) {\r\n\tconst { callbacks } = useContext( BlockRefs );\r\n\tconst ref = useBlockRef( clientId );\r\n\tconst [ element, setElement ] = useState( null );\r\n\r\n\tuseLayoutEffect( () => {\r\n\t\tif ( ! clientId ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tcallbacks.set( setElement, clientId );\r\n\t\treturn () => {\r\n\t\t\tcallbacks.delete( setElement );\r\n\t\t};\r\n\t}, [ clientId ] );\r\n\r\n\treturn ref.current || element;\r\n}\r\n\r\nexport { useBlockRef as __unstableUseBlockRef };\r\nexport { useBlockElement as __unstableUseBlockElement };\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useRefEffect } from '@wordpress/compose';\r\n\r\n/**\r\n * Allow scrolling \"through\" popovers over the canvas. This is only called for\r\n * as long as the pointer is over a popover. Do not use React events because it\r\n * will bubble through portals.\r\n *\r\n * @param {Object} scrollableRef\r\n */\r\nfunction usePopoverScroll( scrollableRef ) {\r\n\treturn useRefEffect(\r\n\t\t( node ) => {\r\n\t\t\tif ( ! scrollableRef ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tfunction onWheel( event ) {\r\n\t\t\t\tconst { deltaX, deltaY } = event;\r\n\t\t\t\tscrollableRef.current.scrollBy( deltaX, deltaY );\r\n\t\t\t}\r\n\t\t\t// Tell the browser that we do not call event.preventDefault\r\n\t\t\t// See https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener#improving_scrolling_performance_with_passive_listeners\r\n\t\t\tconst options = { passive: true };\r\n\t\t\tnode.addEventListener( 'wheel', onWheel, options );\r\n\t\t\treturn () => {\r\n\t\t\t\tnode.removeEventListener( 'wheel', onWheel, options );\r\n\t\t\t};\r\n\t\t},\r\n\t\t[ scrollableRef ]\r\n\t);\r\n}\r\n\r\nexport default usePopoverScroll;\r\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { useMergeRefs } from '@wordpress/compose';\nimport { Popover } from '@wordpress/components';\nimport {\n\tforwardRef,\n\tuseMemo,\n\tuseReducer,\n\tuseLayoutEffect,\n} from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { __unstableUseBlockElement as useBlockElement } from '../block-list/use-block-props/use-block-refs';\nimport usePopoverScroll from './use-popover-scroll';\n\nconst MAX_POPOVER_RECOMPUTE_COUNTER = Number.MAX_SAFE_INTEGER;\n\nfunction BlockPopover(\n\t{\n\t\tclientId,\n\t\tbottomClientId,\n\t\tchildren,\n\t\t__unstablePopoverSlot,\n\t\t__unstableContentRef,\n\t\tshift = true,\n\t\t...props\n\t},\n\tref\n) {\n\tconst selectedElement = useBlockElement( clientId );\n\tconst lastSelectedElement = useBlockElement( bottomClientId ?? clientId );\n\tconst mergedRefs = useMergeRefs( [\n\t\tref,\n\t\tusePopoverScroll( __unstableContentRef ),\n\t] );\n\n\tconst [\n\t\tpopoverDimensionsRecomputeCounter,\n\t\tforceRecomputePopoverDimensions,\n\t] = useReducer(\n\t\t// Module is there to make sure that the counter doesn't overflow.\n\t\t( s ) => ( s + 1 ) % MAX_POPOVER_RECOMPUTE_COUNTER,\n\t\t0\n\t);\n\n\t// When blocks are moved up/down, they are animated to their new position by\n\t// updating the `transform` property manually (i.e. without using CSS\n\t// transitions or animations). The animation, which can also scroll the block\n\t// editor, can sometimes cause the position of the Popover to get out of sync.\n\t// A MutationObserver is therefore used to make sure that changes to the\n\t// selectedElement's attribute (i.e. `transform`) can be tracked and used to\n\t// trigger the Popover to rerender.\n\tuseLayoutEffect( () => {\n\t\tif ( ! selectedElement ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst observer = new window.MutationObserver(\n\t\t\tforceRecomputePopoverDimensions\n\t\t);\n\t\tobserver.observe( selectedElement, { attributes: true } );\n\n\t\treturn () => {\n\t\t\tobserver.disconnect();\n\t\t};\n\t}, [ selectedElement ] );\n\n\tconst popoverAnchor = useMemo( () => {\n\t\tif (\n\t\t\t// popoverDimensionsRecomputeCounter is by definition always equal or greater\n\t\t\t// than 0. This check is only there to satisfy the correctness of the\n\t\t\t// exhaustive-deps rule for the `useMemo` hook.\n\t\t\tpopoverDimensionsRecomputeCounter < 0 ||\n\t\t\t! selectedElement ||\n\t\t\t( bottomClientId && ! lastSelectedElement )\n\t\t) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn {\n\t\t\tgetBoundingClientRect() {\n\t\t\t\tconst selectedBCR = selectedElement.getBoundingClientRect();\n\t\t\t\tconst lastSelectedBCR =\n\t\t\t\t\tlastSelectedElement?.getBoundingClientRect();\n\n\t\t\t\t// Get the biggest rectangle that encompasses completely the currently\n\t\t\t\t// selected element and the last selected element:\n\t\t\t\t// - for top/left coordinates, use the smaller numbers\n\t\t\t\t// - for the bottom/right coordinates, use the largest numbers\n\t\t\t\tconst left = Math.min(\n\t\t\t\t\tselectedBCR.left,\n\t\t\t\t\tlastSelectedBCR?.left ?? Infinity\n\t\t\t\t);\n\t\t\t\tconst top = Math.min(\n\t\t\t\t\tselectedBCR.top,\n\t\t\t\t\tlastSelectedBCR?.top ?? Infinity\n\t\t\t\t);\n\t\t\t\tconst right = Math.max(\n\t\t\t\t\tselectedBCR.right,\n\t\t\t\t\tlastSelectedBCR.right ?? -Infinity\n\t\t\t\t);\n\t\t\t\tconst bottom = Math.max(\n\t\t\t\t\tselectedBCR.bottom,\n\t\t\t\t\tlastSelectedBCR.bottom ?? -Infinity\n\t\t\t\t);\n\t\t\t\tconst width = right - left;\n\t\t\t\tconst height = bottom - top;\n\n\t\t\t\treturn new window.DOMRect( left, top, width, height );\n\t\t\t},\n\t\t\tcontextElement: selectedElement,\n\t\t};\n\t}, [\n\t\tbottomClientId,\n\t\tlastSelectedElement,\n\t\tselectedElement,\n\t\tpopoverDimensionsRecomputeCounter,\n\t] );\n\n\tif ( ! selectedElement || ( bottomClientId && ! lastSelectedElement ) ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<Popover\n\t\t\tref={ mergedRefs }\n\t\t\tanimate={ false }\n\t\t\tfocusOnMount={ false }\n\t\t\tanchor={ popoverAnchor }\n\t\t\t// Render in the old slot if needed for backward compatibility,\n\t\t\t// otherwise render in place (not in the default popover slot).\n\t\t\t__unstableSlotName={ __unstablePopoverSlot }\n\t\t\tinline={ ! __unstablePopoverSlot }\n\t\t\tplacement=\"top-start\"\n\t\t\tresize={ false }\n\t\t\tflip={ false }\n\t\t\tshift={ shift }\n\t\t\t{ ...props }\n\t\t\tclassName={ classnames(\n\t\t\t\t'block-editor-block-popover',\n\t\t\t\tprops.className\n\t\t\t) }\n\t\t\tvariant=\"unstyled\"\n\t\t>\n\t\t\t{ children }\n\t\t</Popover>\n\t);\n}\n\nexport default forwardRef( BlockPopover );\n","/**\n * WordPress dependencies\n */\nimport { useEffect, useState, useMemo, forwardRef } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { __unstableUseBlockElement as useBlockElement } from '../block-list/use-block-props/use-block-refs';\nimport BlockPopover from '.';\n\nfunction BlockPopoverCover(\n\t{ clientId, bottomClientId, children, shift = false, ...props },\n\tref\n) {\n\tbottomClientId ??= clientId;\n\n\tconst selectedElement = useBlockElement( clientId );\n\n\treturn (\n\t\t<BlockPopover\n\t\t\tref={ ref }\n\t\t\tclientId={ clientId }\n\t\t\tbottomClientId={ bottomClientId }\n\t\t\tshift={ shift }\n\t\t\t{ ...props }\n\t\t>\n\t\t\t{ selectedElement && clientId === bottomClientId ? (\n\t\t\t\t<CoverContainer selectedElement={ selectedElement }>\n\t\t\t\t\t{ children }\n\t\t\t\t</CoverContainer>\n\t\t\t) : (\n\t\t\t\tchildren\n\t\t\t) }\n\t\t</BlockPopover>\n\t);\n}\n\nfunction CoverContainer( { selectedElement, children } ) {\n\tconst [ width, setWidth ] = useState( selectedElement.offsetWidth );\n\tconst [ height, setHeight ] = useState( selectedElement.offsetHeight );\n\n\tuseEffect( () => {\n\t\tconst observer = new window.ResizeObserver( () => {\n\t\t\tsetWidth( selectedElement.offsetWidth );\n\t\t\tsetHeight( selectedElement.offsetHeight );\n\t\t} );\n\t\tobserver.observe( selectedElement, { box: 'border-box' } );\n\t\treturn () => observer.disconnect();\n\t}, [ selectedElement ] );\n\n\tconst style = useMemo( () => {\n\t\treturn {\n\t\t\tposition: 'absolute',\n\t\t\twidth,\n\t\t\theight,\n\t\t};\n\t}, [ width, height ] );\n\n\treturn <div style={ style }>{ children }</div>;\n}\n\nexport default forwardRef( BlockPopoverCover );\n","export function getComputedCSS( element, property ) {\n\treturn element.ownerDocument.defaultView\n\t\t.getComputedStyle( element )\n\t\t.getPropertyValue( property );\n}\n","/**\n * WordPress dependencies\n */\nimport { useState, useEffect } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { __unstableUseBlockElement as useBlockElement } from '../block-list/use-block-props/use-block-refs';\nimport BlockPopoverCover from '../block-popover/cover';\nimport { getComputedCSS } from './utils';\n\nexport function GridVisualizer( { clientId } ) {\n\tconst blockElement = useBlockElement( clientId );\n\tif ( ! blockElement ) {\n\t\treturn null;\n\t}\n\treturn (\n\t\t<BlockPopoverCover\n\t\t\tclassName=\"block-editor-grid-visualizer\"\n\t\t\tclientId={ clientId }\n\t\t\t__unstablePopoverSlot=\"block-toolbar\"\n\t\t>\n\t\t\t<GridVisualizerGrid blockElement={ blockElement } />\n\t\t</BlockPopoverCover>\n\t);\n}\n\nfunction GridVisualizerGrid( { blockElement } ) {\n\tconst [ gridInfo, setGridInfo ] = useState( () =>\n\t\tgetGridInfo( blockElement )\n\t);\n\tuseEffect( () => {\n\t\tconst observers = [];\n\t\tfor ( const element of [ blockElement, ...blockElement.children ] ) {\n\t\t\tconst observer = new window.ResizeObserver( () => {\n\t\t\t\tsetGridInfo( getGridInfo( blockElement ) );\n\t\t\t} );\n\t\t\tobserver.observe( element );\n\t\t\tobservers.push( observer );\n\t\t}\n\t\treturn () => {\n\t\t\tfor ( const observer of observers ) {\n\t\t\t\tobserver.disconnect();\n\t\t\t}\n\t\t};\n\t}, [ blockElement ] );\n\treturn (\n\t\t<div\n\t\t\tclassName=\"block-editor-grid-visualizer__grid\"\n\t\t\tstyle={ gridInfo.style }\n\t\t>\n\t\t\t{ Array.from( { length: gridInfo.numItems }, ( _, i ) => (\n\t\t\t\t<div key={ i } className=\"block-editor-grid-visualizer__item\" />\n\t\t\t) ) }\n\t\t</div>\n\t);\n}\n\nfunction getGridInfo( blockElement ) {\n\tconst gridTemplateColumns = getComputedCSS(\n\t\tblockElement,\n\t\t'grid-template-columns'\n\t);\n\tconst gridTemplateRows = getComputedCSS(\n\t\tblockElement,\n\t\t'grid-template-rows'\n\t);\n\tconst numColumns = gridTemplateColumns.split( ' ' ).length;\n\tconst numRows = gridTemplateRows.split( ' ' ).length;\n\tconst numItems = numColumns * numRows;\n\treturn {\n\t\tnumItems,\n\t\tstyle: {\n\t\t\tgridTemplateColumns,\n\t\t\tgridTemplateRows,\n\t\t\tgap: getComputedCSS( blockElement, 'gap' ),\n\t\t\tpadding: getComputedCSS( blockElement, 'padding' ),\n\t\t},\n\t};\n}\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\n\nimport {\n\tBaseControl,\n\tFlex,\n\tFlexItem,\n\tRangeControl,\n\t__experimentalNumberControl as NumberControl,\n\t__experimentalToggleGroupControl as ToggleGroupControl,\n\t__experimentalToggleGroupControlOption as ToggleGroupControlOption,\n\t__experimentalUnitControl as UnitControl,\n\t__experimentalParseQuantityAndUnitFromRawValue as parseQuantityAndUnitFromRawValue,\n} from '@wordpress/components';\nimport { useState } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { appendSelectors, getBlockGapCSS } from './utils';\nimport { getGapCSSValue } from '../hooks/gap';\nimport { shouldSkipSerialization } from '../hooks/utils';\nimport { LAYOUT_DEFINITIONS } from './definitions';\nimport { GridVisualizer } from '../components/grid-visualizer';\n\nconst RANGE_CONTROL_MAX_VALUES = {\n\tpx: 600,\n\t'%': 100,\n\tvw: 100,\n\tvh: 100,\n\tem: 38,\n\trem: 38,\n\tsvw: 100,\n\tlvw: 100,\n\tdvw: 100,\n\tsvh: 100,\n\tlvh: 100,\n\tdvh: 100,\n\tvi: 100,\n\tsvi: 100,\n\tlvi: 100,\n\tdvi: 100,\n\tvb: 100,\n\tsvb: 100,\n\tlvb: 100,\n\tdvb: 100,\n\tvmin: 100,\n\tsvmin: 100,\n\tlvmin: 100,\n\tdvmin: 100,\n\tvmax: 100,\n\tsvmax: 100,\n\tlvmax: 100,\n\tdvmax: 100,\n};\n\nconst units = [\n\t{ value: 'px', label: 'px', default: 0 },\n\t{ value: 'rem', label: 'rem', default: 0 },\n\t{ value: 'em', label: 'em', default: 0 },\n];\n\nexport default {\n\tname: 'grid',\n\tlabel: __( 'Grid' ),\n\tinspectorControls: function GridLayoutInspectorControls( {\n\t\tlayout = {},\n\t\tonChange,\n\t\tclientId,\n\t} ) {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<GridLayoutTypeControl\n\t\t\t\t\tlayout={ layout }\n\t\t\t\t\tonChange={ onChange }\n\t\t\t\t/>\n\t\t\t\t{ layout?.columnCount ? (\n\t\t\t\t\t<GridLayoutColumnsControl\n\t\t\t\t\t\tlayout={ layout }\n\t\t\t\t\t\tonChange={ onChange }\n\t\t\t\t\t/>\n\t\t\t\t) : (\n\t\t\t\t\t<GridLayoutMinimumWidthControl\n\t\t\t\t\t\tlayout={ layout }\n\t\t\t\t\t\tonChange={ onChange }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t{ window.__experimentalEnableGridInteractivity && (\n\t\t\t\t\t<GridVisualizer clientId={ clientId } />\n\t\t\t\t) }\n\t\t\t</>\n\t\t);\n\t},\n\ttoolBarControls: function GridLayoutToolbarControls() {\n\t\treturn null;\n\t},\n\tgetLayoutStyle: function getLayoutStyle( {\n\t\tselector,\n\t\tlayout,\n\t\tstyle,\n\t\tblockName,\n\t\thasBlockGapSupport,\n\t\tlayoutDefinitions = LAYOUT_DEFINITIONS,\n\t} ) {\n\t\tconst { minimumColumnWidth = '12rem', columnCount = null } = layout;\n\n\t\t// If a block's block.json skips serialization for spacing or spacing.blockGap,\n\t\t// don't apply the user-defined value to the styles.\n\t\tconst blockGapValue =\n\t\t\tstyle?.spacing?.blockGap &&\n\t\t\t! shouldSkipSerialization( blockName, 'spacing', 'blockGap' )\n\t\t\t\t? getGapCSSValue( style?.spacing?.blockGap, '0.5em' )\n\t\t\t\t: undefined;\n\n\t\tlet output = '';\n\t\tconst rules = [];\n\n\t\tif ( columnCount ) {\n\t\t\trules.push(\n\t\t\t\t`grid-template-columns: repeat(${ columnCount }, minmax(0, 1fr))`\n\t\t\t);\n\t\t} else if ( minimumColumnWidth ) {\n\t\t\trules.push(\n\t\t\t\t`grid-template-columns: repeat(auto-fill, minmax(min(${ minimumColumnWidth }, 100%), 1fr))`,\n\t\t\t\t`container-type: inline-size`\n\t\t\t);\n\t\t}\n\n\t\tif ( rules.length ) {\n\t\t\t// Reason to disable: the extra line breaks added by prettier mess with the unit tests.\n\t\t\t// eslint-disable-next-line prettier/prettier\n\t\t\toutput = `${ appendSelectors( selector ) } { ${ rules.join(\n\t\t\t\t'; '\n\t\t\t) }; }`;\n\t\t}\n\n\t\t// Output blockGap styles based on rules contained in layout definitions in theme.json.\n\t\tif ( hasBlockGapSupport && blockGapValue ) {\n\t\t\toutput += getBlockGapCSS(\n\t\t\t\tselector,\n\t\t\t\tlayoutDefinitions,\n\t\t\t\t'grid',\n\t\t\t\tblockGapValue\n\t\t\t);\n\t\t}\n\t\treturn output;\n\t},\n\tgetOrientation() {\n\t\treturn 'horizontal';\n\t},\n\tgetAlignments() {\n\t\treturn [];\n\t},\n};\n\n// Enables setting minimum width of grid items.\nfunction GridLayoutMinimumWidthControl( { layout, onChange } ) {\n\tconst { minimumColumnWidth: value = '12rem' } = layout;\n\tconst [ quantity, unit ] = parseQuantityAndUnitFromRawValue( value );\n\n\tconst handleSliderChange = ( next ) => {\n\t\tonChange( {\n\t\t\t...layout,\n\t\t\tminimumColumnWidth: [ next, unit ].join( '' ),\n\t\t} );\n\t};\n\n\t// Mostly copied from HeightControl.\n\tconst handleUnitChange = ( newUnit ) => {\n\t\t// Attempt to smooth over differences between currentUnit and newUnit.\n\t\t// This should slightly improve the experience of switching between unit types.\n\t\tlet newValue;\n\n\t\tif ( [ 'em', 'rem' ].includes( newUnit ) && unit === 'px' ) {\n\t\t\t// Convert pixel value to an approximate of the new unit, assuming a root size of 16px.\n\t\t\tnewValue = ( quantity / 16 ).toFixed( 2 ) + newUnit;\n\t\t} else if ( [ 'em', 'rem' ].includes( unit ) && newUnit === 'px' ) {\n\t\t\t// Convert to pixel value assuming a root size of 16px.\n\t\t\tnewValue = Math.round( quantity * 16 ) + newUnit;\n\t\t}\n\n\t\tonChange( {\n\t\t\t...layout,\n\t\t\tminimumColumnWidth: newValue,\n\t\t} );\n\t};\n\n\treturn (\n\t\t<fieldset>\n\t\t\t<BaseControl.VisualLabel as=\"legend\">\n\t\t\t\t{ __( 'Minimum column width' ) }\n\t\t\t</BaseControl.VisualLabel>\n\t\t\t<Flex gap={ 4 }>\n\t\t\t\t<FlexItem isBlock>\n\t\t\t\t\t<UnitControl\n\t\t\t\t\t\tsize={ '__unstable-large' }\n\t\t\t\t\t\tonChange={ ( newValue ) => {\n\t\t\t\t\t\t\tonChange( {\n\t\t\t\t\t\t\t\t...layout,\n\t\t\t\t\t\t\t\tminimumColumnWidth: newValue,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tonUnitChange={ handleUnitChange }\n\t\t\t\t\t\tvalue={ value }\n\t\t\t\t\t\tunits={ units }\n\t\t\t\t\t\tmin={ 0 }\n\t\t\t\t\t\tlabel={ __( 'Minimum column width' ) }\n\t\t\t\t\t\thideLabelFromVision\n\t\t\t\t\t/>\n\t\t\t\t</FlexItem>\n\t\t\t\t<FlexItem isBlock>\n\t\t\t\t\t<RangeControl\n\t\t\t\t\t\tonChange={ handleSliderChange }\n\t\t\t\t\t\tvalue={ quantity }\n\t\t\t\t\t\tmin={ 0 }\n\t\t\t\t\t\tmax={ RANGE_CONTROL_MAX_VALUES[ unit ] || 600 }\n\t\t\t\t\t\twithInputField={ false }\n\t\t\t\t\t\tlabel={ __( 'Minimum column width' ) }\n\t\t\t\t\t\thideLabelFromVision\n\t\t\t\t\t/>\n\t\t\t\t</FlexItem>\n\t\t\t</Flex>\n\t\t</fieldset>\n\t);\n}\n\n// Enables setting number of grid columns\nfunction GridLayoutColumnsControl( { layout, onChange } ) {\n\tconst { columnCount = 3 } = layout;\n\n\treturn (\n\t\t<fieldset>\n\t\t\t<BaseControl.VisualLabel as=\"legend\">\n\t\t\t\t{ __( 'Columns' ) }\n\t\t\t</BaseControl.VisualLabel>\n\t\t\t<Flex gap={ 4 }>\n\t\t\t\t<FlexItem isBlock>\n\t\t\t\t\t<NumberControl\n\t\t\t\t\t\tsize={ '__unstable-large' }\n\t\t\t\t\t\tonChange={ ( value ) => {\n\t\t\t\t\t\t\t/**\n\t\t\t\t\t\t\t * If the input is cleared, avoid switching\n\t\t\t\t\t\t\t * back to \"Auto\" by setting a value of \"1\".\n\t\t\t\t\t\t\t */\n\t\t\t\t\t\t\tconst validValue = value !== '' ? value : '1';\n\t\t\t\t\t\t\tonChange( {\n\t\t\t\t\t\t\t\t...layout,\n\t\t\t\t\t\t\t\tcolumnCount: validValue,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tvalue={ columnCount }\n\t\t\t\t\t\tmin={ 1 }\n\t\t\t\t\t\tlabel={ __( 'Columns' ) }\n\t\t\t\t\t\thideLabelFromVision\n\t\t\t\t\t/>\n\t\t\t\t</FlexItem>\n\t\t\t\t<FlexItem isBlock>\n\t\t\t\t\t<RangeControl\n\t\t\t\t\t\tvalue={ parseInt( columnCount, 10 ) } // RangeControl can't deal with strings.\n\t\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\t\tonChange( {\n\t\t\t\t\t\t\t\t...layout,\n\t\t\t\t\t\t\t\tcolumnCount: value,\n\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t}\n\t\t\t\t\t\tmin={ 1 }\n\t\t\t\t\t\tmax={ 16 }\n\t\t\t\t\t\twithInputField={ false }\n\t\t\t\t\t\tlabel={ __( 'Columns' ) }\n\t\t\t\t\t\thideLabelFromVision\n\t\t\t\t\t/>\n\t\t\t\t</FlexItem>\n\t\t\t</Flex>\n\t\t</fieldset>\n\t);\n}\n\n// Enables switching between grid types\nfunction GridLayoutTypeControl( { layout, onChange } ) {\n\tconst { columnCount, minimumColumnWidth } = layout;\n\n\t/**\n\t * When switching, temporarily save any custom values set on the\n\t * previous type so we can switch back without loss.\n\t */\n\tconst [ tempColumnCount, setTempColumnCount ] = useState(\n\t\tcolumnCount || 3\n\t);\n\tconst [ tempMinimumColumnWidth, setTempMinimumColumnWidth ] = useState(\n\t\tminimumColumnWidth || '12rem'\n\t);\n\n\tconst isManual = !! columnCount ? 'manual' : 'auto';\n\n\tconst onChangeType = ( value ) => {\n\t\tif ( value === 'manual' ) {\n\t\t\tsetTempMinimumColumnWidth( minimumColumnWidth || '12rem' );\n\t\t} else {\n\t\t\tsetTempColumnCount( columnCount || 3 );\n\t\t}\n\t\tonChange( {\n\t\t\t...layout,\n\t\t\tcolumnCount: value === 'manual' ? tempColumnCount : null,\n\t\t\tminimumColumnWidth:\n\t\t\t\tvalue === 'auto' ? tempMinimumColumnWidth : null,\n\t\t} );\n\t};\n\n\treturn (\n\t\t<ToggleGroupControl\n\t\t\t__nextHasNoMarginBottom\n\t\t\tlabel={ __( 'Type' ) }\n\t\t\tvalue={ isManual }\n\t\t\tonChange={ onChangeType }\n\t\t\tisBlock\n\t\t>\n\t\t\t<ToggleGroupControlOption\n\t\t\t\tkey={ 'auto' }\n\t\t\t\tvalue=\"auto\"\n\t\t\t\tlabel={ __( 'Auto' ) }\n\t\t\t/>\n\t\t\t<ToggleGroupControlOption\n\t\t\t\tkey={ 'manual' }\n\t\t\t\tvalue=\"manual\"\n\t\t\t\tlabel={ __( 'Manual' ) }\n\t\t\t/>\n\t\t</ToggleGroupControl>\n\t);\n}\n","/**\r\n * Internal dependencies\r\n */\r\nimport flex from './flex';\r\nimport flow from './flow';\r\nimport constrained from './constrained';\r\nimport grid from './grid';\r\n\r\nconst layoutTypes = [ flow, flex, constrained, grid ];\r\n\r\n/**\r\n * Retrieves a layout type by name.\r\n *\r\n * @param {string} name - The name of the layout type.\r\n * @return {Object} Layout type.\r\n */\r\nexport function getLayoutType( name = 'default' ) {\r\n\treturn layoutTypes.find( ( layoutType ) => layoutType.name === name );\r\n}\r\n\r\n/**\r\n * Retrieves the available layout types.\r\n *\r\n * @return {Array} Layout types.\r\n */\r\nexport function getLayoutTypes() {\r\n\treturn layoutTypes;\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { createContext, useContext } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { getLayoutType } from '../../layouts';\r\nimport { useSettings } from '../use-settings';\r\n\r\nexport const defaultLayout = { type: 'default' };\r\n\r\nconst Layout = createContext( defaultLayout );\r\n\r\n/**\r\n * Allows to define the layout.\r\n */\r\nexport const LayoutProvider = Layout.Provider;\r\n\r\n/**\r\n * React hook used to retrieve the layout config.\r\n */\r\nexport function useLayout() {\r\n\treturn useContext( Layout );\r\n}\r\n\r\nexport function LayoutStyle( { layout = {}, css, ...props } ) {\r\n\tconst layoutType = getLayoutType( layout.type );\r\n\tconst [ blockGapSupport ] = useSettings( 'spacing.blockGap' );\r\n\tconst hasBlockGapSupport = blockGapSupport !== null;\r\n\r\n\tif ( layoutType ) {\r\n\t\tif ( css ) {\r\n\t\t\treturn <style>{ css }</style>;\r\n\t\t}\r\n\t\tconst layoutStyle = layoutType.getLayoutStyle?.( {\r\n\t\t\thasBlockGapSupport,\r\n\t\t\tlayout,\r\n\t\t\t...props,\r\n\t\t} );\r\n\t\tif ( layoutStyle ) {\r\n\t\t\treturn <style>{ layoutStyle }</style>;\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useSelect } from '@wordpress/data';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { useLayout } from '../block-list/layout';\r\nimport { store as blockEditorStore } from '../../store';\r\nimport { getLayoutType } from '../../layouts';\r\n\r\nconst EMPTY_ARRAY = [];\r\nconst DEFAULT_CONTROLS = [ 'none', 'left', 'center', 'right', 'wide', 'full' ];\r\nconst WIDE_CONTROLS = [ 'wide', 'full' ];\r\n\r\nexport default function useAvailableAlignments( controls = DEFAULT_CONTROLS ) {\r\n\t// Always add the `none` option if not exists.\r\n\tif ( ! controls.includes( 'none' ) ) {\r\n\t\tcontrols = [ 'none', ...controls ];\r\n\t}\r\n\tconst isNoneOnly = controls.length === 1 && controls[ 0 ] === 'none';\r\n\r\n\tconst [ wideControlsEnabled, themeSupportsLayout, isBlockBasedTheme ] =\r\n\t\tuseSelect(\r\n\t\t\t( select ) => {\r\n\t\t\t\t// If `isNoneOnly` is true, we'll be returning early because there is\r\n\t\t\t\t// nothing to filter on an empty array. We won't need the info from\r\n\t\t\t\t// the `useSelect` but we must call it anyway because Rules of Hooks.\r\n\t\t\t\t// So the callback returns early to avoid block editor subscription.\r\n\t\t\t\tif ( isNoneOnly ) {\r\n\t\t\t\t\treturn [ false, false, false ];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst settings = select( blockEditorStore ).getSettings();\r\n\t\t\t\treturn [\r\n\t\t\t\t\tsettings.alignWide ?? false,\r\n\t\t\t\t\tsettings.supportsLayout,\r\n\t\t\t\t\tsettings.__unstableIsBlockBasedTheme,\r\n\t\t\t\t];\r\n\t\t\t},\r\n\t\t\t[ isNoneOnly ]\r\n\t\t);\r\n\tconst layout = useLayout();\r\n\r\n\tif ( isNoneOnly ) {\r\n\t\treturn EMPTY_ARRAY;\r\n\t}\r\n\r\n\tconst layoutType = getLayoutType( layout?.type );\r\n\r\n\tif ( themeSupportsLayout ) {\r\n\t\tconst layoutAlignments = layoutType.getAlignments(\r\n\t\t\tlayout,\r\n\t\t\tisBlockBasedTheme\r\n\t\t);\r\n\t\tconst alignments = layoutAlignments.filter( ( alignment ) =>\r\n\t\t\tcontrols.includes( alignment.name )\r\n\t\t);\r\n\t\t// While we treat `none` as an alignment, we shouldn't return it if no\r\n\t\t// other alignments exist.\r\n\t\tif ( alignments.length === 1 && alignments[ 0 ].name === 'none' ) {\r\n\t\t\treturn EMPTY_ARRAY;\r\n\t\t}\r\n\t\treturn alignments;\r\n\t}\r\n\r\n\t// Starting here, it's the fallback for themes not supporting the layout config.\r\n\tif ( layoutType.name !== 'default' && layoutType.name !== 'constrained' ) {\r\n\t\treturn EMPTY_ARRAY;\r\n\t}\r\n\r\n\tconst alignments = controls\r\n\t\t.filter( ( control ) => {\r\n\t\t\tif ( layout.alignments ) {\r\n\t\t\t\treturn layout.alignments.includes( control );\r\n\t\t\t}\r\n\r\n\t\t\tif ( ! wideControlsEnabled && WIDE_CONTROLS.includes( control ) ) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\treturn DEFAULT_CONTROLS.includes( control );\r\n\t\t} )\r\n\t\t.map( ( name ) => ( { name } ) );\r\n\r\n\t// While we treat `none` as an alignment, we shouldn't return it if no\r\n\t// other alignments exist.\r\n\tif ( alignments.length === 1 && alignments[ 0 ].name === 'none' ) {\r\n\t\treturn EMPTY_ARRAY;\r\n\t}\r\n\r\n\treturn alignments;\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst alignNone = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M19 5.5H5V4h14v1.5ZM19 20H5v-1.5h14V20ZM5 9h14v6H5V9Z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default alignNone;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst positionLeft = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M5 5.5h8V4H5v1.5ZM5 20h8v-1.5H5V20ZM19 9H5v6h14V9Z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default positionLeft;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst positionRight = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M19 5.5h-8V4h8v1.5ZM19 20h-8v-1.5h8V20ZM5 9h14v6H5V9Z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default positionRight;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst stretchFullWidth = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M5 4h14v11H5V4Zm11 16H8v-1.5h8V20Z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default stretchFullWidth;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { __, _x } from '@wordpress/i18n';\r\nimport {\r\n\talignNone,\r\n\tpositionCenter,\r\n\tpositionLeft,\r\n\tpositionRight,\r\n\tstretchFullWidth,\r\n\tstretchWide,\r\n} from '@wordpress/icons';\r\n\r\nexport const BLOCK_ALIGNMENTS_CONTROLS = {\r\n\tnone: {\r\n\t\ticon: alignNone,\r\n\t\ttitle: _x( 'None', 'Alignment option' ),\r\n\t},\r\n\tleft: {\r\n\t\ticon: positionLeft,\r\n\t\ttitle: __( 'Align left' ),\r\n\t},\r\n\tcenter: {\r\n\t\ticon: positionCenter,\r\n\t\ttitle: __( 'Align center' ),\r\n\t},\r\n\tright: {\r\n\t\ticon: positionRight,\r\n\t\ttitle: __( 'Align right' ),\r\n\t},\r\n\twide: {\r\n\t\ticon: stretchWide,\r\n\t\ttitle: __( 'Wide width' ),\r\n\t},\r\n\tfull: {\r\n\t\ticon: stretchFullWidth,\r\n\t\ttitle: __( 'Full width' ),\r\n\t},\r\n};\r\n\r\nexport const DEFAULT_CONTROL = 'none';\r\n","/**\r\n * External dependencies\r\n */\r\nimport classNames from 'classnames';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { __ } from '@wordpress/i18n';\r\nimport {\r\n\tToolbarDropdownMenu,\r\n\tToolbarGroup,\r\n\tMenuGroup,\r\n\tMenuItem,\r\n} from '@wordpress/components';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport useAvailableAlignments from './use-available-alignments';\r\nimport { BLOCK_ALIGNMENTS_CONTROLS, DEFAULT_CONTROL } from './constants';\r\n\r\nfunction BlockAlignmentUI( {\r\n\tvalue,\r\n\tonChange,\r\n\tcontrols,\r\n\tisToolbar,\r\n\tisCollapsed = true,\r\n} ) {\r\n\tconst enabledControls = useAvailableAlignments( controls );\r\n\tconst hasEnabledControls = !! enabledControls.length;\r\n\r\n\tif ( ! hasEnabledControls ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tfunction onChangeAlignment( align ) {\r\n\t\tonChange( [ value, 'none' ].includes( align ) ? undefined : align );\r\n\t}\r\n\r\n\tconst activeAlignmentControl = BLOCK_ALIGNMENTS_CONTROLS[ value ];\r\n\tconst defaultAlignmentControl =\r\n\t\tBLOCK_ALIGNMENTS_CONTROLS[ DEFAULT_CONTROL ];\r\n\r\n\tconst UIComponent = isToolbar ? ToolbarGroup : ToolbarDropdownMenu;\r\n\tconst commonProps = {\r\n\t\ticon: activeAlignmentControl\r\n\t\t\t? activeAlignmentControl.icon\r\n\t\t\t: defaultAlignmentControl.icon,\r\n\t\tlabel: __( 'Align' ),\r\n\t};\r\n\tconst extraProps = isToolbar\r\n\t\t? {\r\n\t\t\t\tisCollapsed,\r\n\t\t\t\tcontrols: enabledControls.map( ( { name: controlName } ) => {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\t...BLOCK_ALIGNMENTS_CONTROLS[ controlName ],\r\n\t\t\t\t\t\tisActive:\r\n\t\t\t\t\t\t\tvalue === controlName ||\r\n\t\t\t\t\t\t\t( ! value && controlName === 'none' ),\r\n\t\t\t\t\t\trole: isCollapsed ? 'menuitemradio' : undefined,\r\n\t\t\t\t\t\tonClick: () => onChangeAlignment( controlName ),\r\n\t\t\t\t\t};\r\n\t\t\t\t} ),\r\n\t\t  }\r\n\t\t: {\r\n\t\t\t\ttoggleProps: { describedBy: __( 'Change alignment' ) },\r\n\t\t\t\tchildren: ( { onClose } ) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<MenuGroup className=\"block-editor-block-alignment-control__menu-group\">\r\n\t\t\t\t\t\t\t\t{ enabledControls.map(\r\n\t\t\t\t\t\t\t\t\t( { name: controlName, info } ) => {\r\n\t\t\t\t\t\t\t\t\t\tconst { icon, title } =\r\n\t\t\t\t\t\t\t\t\t\t\tBLOCK_ALIGNMENTS_CONTROLS[\r\n\t\t\t\t\t\t\t\t\t\t\t\tcontrolName\r\n\t\t\t\t\t\t\t\t\t\t\t];\r\n\t\t\t\t\t\t\t\t\t\t// If no value is provided, mark as selected the `none` option.\r\n\t\t\t\t\t\t\t\t\t\tconst isSelected =\r\n\t\t\t\t\t\t\t\t\t\t\tcontrolName === value ||\r\n\t\t\t\t\t\t\t\t\t\t\t( ! value &&\r\n\t\t\t\t\t\t\t\t\t\t\t\tcontrolName === 'none' );\r\n\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t<MenuItem\r\n\t\t\t\t\t\t\t\t\t\t\t\tkey={ controlName }\r\n\t\t\t\t\t\t\t\t\t\t\t\ticon={ icon }\r\n\t\t\t\t\t\t\t\t\t\t\t\ticonPosition=\"left\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={ classNames(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t'components-dropdown-menu__menu-item',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'is-active': isSelected,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\t\t\t\t\t\tisSelected={ isSelected }\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={ () => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChangeAlignment(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcontrolName\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClose();\r\n\t\t\t\t\t\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t\t\t\t\t\t\trole=\"menuitemradio\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tinfo={ info }\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{ title }\r\n\t\t\t\t\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\t</MenuGroup>\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t);\r\n\t\t\t\t},\r\n\t\t  };\r\n\r\n\treturn <UIComponent { ...commonProps } { ...extraProps } />;\r\n}\r\n\r\nexport default BlockAlignmentUI;\r\n","/**\r\n * Internal dependencies\r\n */\r\nimport BlockAlignmentUI from './ui';\r\n\r\nconst BlockAlignmentControl = ( props ) => {\r\n\treturn <BlockAlignmentUI { ...props } isToolbar={ false } />;\r\n};\r\n\r\nconst BlockAlignmentToolbar = ( props ) => {\r\n\treturn <BlockAlignmentUI { ...props } isToolbar />;\r\n};\r\n\r\n/**\r\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/block-alignment-control/README.md\r\n */\r\nexport { BlockAlignmentControl, BlockAlignmentToolbar };\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useSelect, useDispatch } from '@wordpress/data';\r\nimport { useEffect } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as blockEditorStore } from '../../store';\r\nimport {\r\n\tuseBlockEditContext,\r\n\tblockEditingModeKey,\r\n} from '../block-edit/context';\r\n\r\n/**\r\n * @typedef {'disabled'|'contentOnly'|'default'} BlockEditingMode\r\n */\r\n\r\n/**\r\n * Allows a block to restrict the user interface that is displayed for editing\r\n * that block and its inner blocks.\r\n *\r\n * @example\r\n * ```js\r\n * function MyBlock( { attributes, setAttributes } ) {\r\n *     useBlockEditingMode( 'disabled' );\r\n *     return <div { ...useBlockProps() }></div>;\r\n * }\r\n * ```\r\n *\r\n * `mode` can be one of three options:\r\n *\r\n * - `'disabled'`: Prevents editing the block entirely, i.e. it cannot be\r\n *   selected.\r\n * - `'contentOnly'`: Hides all non-content UI, e.g. auxiliary controls in the\r\n *   toolbar, the block movers, block settings.\r\n * - `'default'`: Allows editing the block as normal.\r\n *\r\n * The mode is inherited by all of the block's inner blocks, unless they have\r\n * their own mode.\r\n *\r\n * If called outside of a block context, the mode is applied to all blocks.\r\n *\r\n * @param {?BlockEditingMode} mode The editing mode to apply. If undefined, the\r\n *                                 current editing mode is not changed.\r\n *\r\n * @return {BlockEditingMode} The current editing mode.\r\n */\r\nexport function useBlockEditingMode( mode ) {\r\n\tconst context = useBlockEditContext();\r\n\tconst { clientId = '' } = context;\r\n\tconst { setBlockEditingMode, unsetBlockEditingMode } =\r\n\t\tuseDispatch( blockEditorStore );\r\n\tconst globalBlockEditingMode = useSelect(\r\n\t\t( select ) =>\r\n\t\t\t// Avoid adding the subscription if not needed!\r\n\t\t\tclientId ? null : select( blockEditorStore ).getBlockEditingMode(),\r\n\t\t[ clientId ]\r\n\t);\r\n\tuseEffect( () => {\r\n\t\tif ( mode ) {\r\n\t\t\tsetBlockEditingMode( clientId, mode );\r\n\t\t}\r\n\t\treturn () => {\r\n\t\t\tif ( mode ) {\r\n\t\t\t\tunsetBlockEditingMode( clientId );\r\n\t\t\t}\r\n\t\t};\r\n\t}, [ clientId, mode, setBlockEditingMode, unsetBlockEditingMode ] );\r\n\treturn clientId ? context[ blockEditingModeKey ] : globalBlockEditingMode;\r\n}\r\n","/**\r\n * External dependencies\r\n */\r\nimport classnames from 'classnames';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { addFilter } from '@wordpress/hooks';\r\nimport {\r\n\tgetBlockSupport,\r\n\tgetBlockType,\r\n\thasBlockSupport,\r\n} from '@wordpress/blocks';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { BlockControls, BlockAlignmentControl } from '../components';\r\nimport useAvailableAlignments from '../components/block-alignment-control/use-available-alignments';\r\nimport { useBlockEditingMode } from '../components/block-editing-mode';\r\n\r\n/**\r\n * An array which includes all possible valid alignments,\r\n * used to validate if an alignment is valid or not.\r\n *\r\n * @constant\r\n * @type {string[]}\r\n */\r\nconst ALL_ALIGNMENTS = [ 'left', 'center', 'right', 'wide', 'full' ];\r\n\r\n/**\r\n * An array which includes all wide alignments.\r\n * In order for this alignments to be valid they need to be supported by the block,\r\n * and by the theme.\r\n *\r\n * @constant\r\n * @type {string[]}\r\n */\r\nconst WIDE_ALIGNMENTS = [ 'wide', 'full' ];\r\n\r\n/**\r\n * Returns the valid alignments.\r\n * Takes into consideration the aligns supported by a block, if the block supports wide controls or not and if theme supports wide controls or not.\r\n * Exported just for testing purposes, not exported outside the module.\r\n *\r\n * @param {?boolean|string[]} blockAlign          Aligns supported by the block.\r\n * @param {?boolean}          hasWideBlockSupport True if block supports wide alignments. And False otherwise.\r\n * @param {?boolean}          hasWideEnabled      True if theme supports wide alignments. And False otherwise.\r\n *\r\n * @return {string[]} Valid alignments.\r\n */\r\nexport function getValidAlignments(\r\n\tblockAlign,\r\n\thasWideBlockSupport = true,\r\n\thasWideEnabled = true\r\n) {\r\n\tlet validAlignments;\r\n\tif ( Array.isArray( blockAlign ) ) {\r\n\t\tvalidAlignments = ALL_ALIGNMENTS.filter( ( value ) =>\r\n\t\t\tblockAlign.includes( value )\r\n\t\t);\r\n\t} else if ( blockAlign === true ) {\r\n\t\t// `true` includes all alignments...\r\n\t\tvalidAlignments = [ ...ALL_ALIGNMENTS ];\r\n\t} else {\r\n\t\tvalidAlignments = [];\r\n\t}\r\n\r\n\tif (\r\n\t\t! hasWideEnabled ||\r\n\t\t( blockAlign === true && ! hasWideBlockSupport )\r\n\t) {\r\n\t\treturn validAlignments.filter(\r\n\t\t\t( alignment ) => ! WIDE_ALIGNMENTS.includes( alignment )\r\n\t\t);\r\n\t}\r\n\r\n\treturn validAlignments;\r\n}\r\n\r\n/**\r\n * Filters registered block settings, extending attributes to include `align`.\r\n *\r\n * @param {Object} settings Original block settings.\r\n *\r\n * @return {Object} Filtered block settings.\r\n */\r\nexport function addAttribute( settings ) {\r\n\t// Allow blocks to specify their own attribute definition with default values if needed.\r\n\tif ( 'type' in ( settings.attributes?.align ?? {} ) ) {\r\n\t\treturn settings;\r\n\t}\r\n\tif ( hasBlockSupport( settings, 'align' ) ) {\r\n\t\t// Gracefully handle if settings.attributes is undefined.\r\n\t\tsettings.attributes = {\r\n\t\t\t...settings.attributes,\r\n\t\t\talign: {\r\n\t\t\t\ttype: 'string',\r\n\t\t\t\t// Allow for '' since it is used by the `updateAlignment` function\r\n\t\t\t\t// in toolbar controls for special cases with defined default values.\r\n\t\t\t\tenum: [ ...ALL_ALIGNMENTS, '' ],\r\n\t\t\t},\r\n\t\t};\r\n\t}\r\n\r\n\treturn settings;\r\n}\r\n\r\nfunction BlockEditAlignmentToolbarControlsPure( {\r\n\tname: blockName,\r\n\talign,\r\n\tsetAttributes,\r\n} ) {\r\n\t// Compute the block valid alignments by taking into account,\r\n\t// if the theme supports wide alignments or not and the layout's\r\n\t// available alignments. We do that for conditionally rendering\r\n\t// Slot.\r\n\tconst blockAllowedAlignments = getValidAlignments(\r\n\t\tgetBlockSupport( blockName, 'align' ),\r\n\t\thasBlockSupport( blockName, 'alignWide', true )\r\n\t);\r\n\r\n\tconst validAlignments = useAvailableAlignments(\r\n\t\tblockAllowedAlignments\r\n\t).map( ( { name } ) => name );\r\n\tconst blockEditingMode = useBlockEditingMode();\r\n\tif ( ! validAlignments.length || blockEditingMode !== 'default' ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tconst updateAlignment = ( nextAlign ) => {\r\n\t\tif ( ! nextAlign ) {\r\n\t\t\tconst blockType = getBlockType( blockName );\r\n\t\t\tconst blockDefaultAlign = blockType?.attributes?.align?.default;\r\n\t\t\tif ( blockDefaultAlign ) {\r\n\t\t\t\tnextAlign = '';\r\n\t\t\t}\r\n\t\t}\r\n\t\tsetAttributes( { align: nextAlign } );\r\n\t};\r\n\r\n\treturn (\r\n\t\t<BlockControls group=\"block\" __experimentalShareWithChildBlocks>\r\n\t\t\t<BlockAlignmentControl\r\n\t\t\t\tvalue={ align }\r\n\t\t\t\tonChange={ updateAlignment }\r\n\t\t\t\tcontrols={ validAlignments }\r\n\t\t\t/>\r\n\t\t</BlockControls>\r\n\t);\r\n}\r\n\r\nexport default {\r\n\tshareWithChildBlocks: true,\r\n\tedit: BlockEditAlignmentToolbarControlsPure,\r\n\tuseBlockProps,\r\n\taddSaveProps: addAssignedAlign,\r\n\tattributeKeys: [ 'align' ],\r\n\thasSupport( name ) {\r\n\t\treturn hasBlockSupport( name, 'align', false );\r\n\t},\r\n};\r\n\r\nfunction useBlockProps( { name, align } ) {\r\n\tconst blockAllowedAlignments = getValidAlignments(\r\n\t\tgetBlockSupport( name, 'align' ),\r\n\t\thasBlockSupport( name, 'alignWide', true )\r\n\t);\r\n\tconst validAlignments = useAvailableAlignments( blockAllowedAlignments );\r\n\r\n\tif ( validAlignments.some( ( alignment ) => alignment.name === align ) ) {\r\n\t\treturn { 'data-align': align };\r\n\t}\r\n\r\n\treturn {};\r\n}\r\n\r\n/**\r\n * Override props assigned to save component to inject alignment class name if\r\n * block supports it.\r\n *\r\n * @param {Object} props      Additional props applied to save element.\r\n * @param {Object} blockType  Block type.\r\n * @param {Object} attributes Block attributes.\r\n *\r\n * @return {Object} Filtered props applied to save element.\r\n */\r\nexport function addAssignedAlign( props, blockType, attributes ) {\r\n\tconst { align } = attributes;\r\n\tconst blockAlign = getBlockSupport( blockType, 'align' );\r\n\tconst hasWideBlockSupport = hasBlockSupport( blockType, 'alignWide', true );\r\n\r\n\t// Compute valid alignments without taking into account if\r\n\t// the theme supports wide alignments or not.\r\n\t// This way changing themes does not impact the block save.\r\n\tconst isAlignValid = getValidAlignments(\r\n\t\tblockAlign,\r\n\t\thasWideBlockSupport\r\n\t).includes( align );\r\n\tif ( isAlignValid ) {\r\n\t\tprops.className = classnames( `align${ align }`, props.className );\r\n\t}\r\n\r\n\treturn props;\r\n}\r\n\r\naddFilter(\r\n\t'blocks.registerBlockType',\r\n\t'core/editor/align/addAttribute',\r\n\taddAttribute\r\n);\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { createSlotFill } from '@wordpress/components';\r\n\r\nconst InspectorControlsDefault = createSlotFill( 'InspectorControls' );\r\nconst InspectorControlsAdvanced = createSlotFill( 'InspectorAdvancedControls' );\r\nconst InspectorControlsBackground = createSlotFill(\r\n\t'InspectorControlsBackground'\r\n);\r\nconst InspectorControlsBorder = createSlotFill( 'InspectorControlsBorder' );\r\nconst InspectorControlsColor = createSlotFill( 'InspectorControlsColor' );\r\nconst InspectorControlsFilter = createSlotFill( 'InspectorControlsFilter' );\r\nconst InspectorControlsDimensions = createSlotFill(\r\n\t'InspectorControlsDimensions'\r\n);\r\nconst InspectorControlsPosition = createSlotFill( 'InspectorControlsPosition' );\r\nconst InspectorControlsTypography = createSlotFill(\r\n\t'InspectorControlsTypography'\r\n);\r\nconst InspectorControlsListView = createSlotFill( 'InspectorControlsListView' );\r\nconst InspectorControlsStyles = createSlotFill( 'InspectorControlsStyles' );\r\nconst InspectorControlsEffects = createSlotFill( 'InspectorControlsEffects' );\r\n\r\nconst groups = {\r\n\tdefault: InspectorControlsDefault,\r\n\tadvanced: InspectorControlsAdvanced,\r\n\tbackground: InspectorControlsBackground,\r\n\tborder: InspectorControlsBorder,\r\n\tcolor: InspectorControlsColor,\r\n\tdimensions: InspectorControlsDimensions,\r\n\teffects: InspectorControlsEffects,\r\n\tfilter: InspectorControlsFilter,\r\n\tlist: InspectorControlsListView,\r\n\tposition: InspectorControlsPosition,\r\n\tsettings: InspectorControlsDefault, // Alias for default.\r\n\tstyles: InspectorControlsStyles,\r\n\ttypography: InspectorControlsTypography,\r\n};\r\n\r\nexport default groups;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\t__experimentalStyleProvider as StyleProvider,\r\n\t__experimentalToolsPanelContext as ToolsPanelContext,\r\n} from '@wordpress/components';\r\nimport warning from '@wordpress/warning';\r\nimport deprecated from '@wordpress/deprecated';\r\nimport { useEffect, useContext } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport {\r\n\tuseBlockEditContext,\r\n\tmayDisplayControlsKey,\r\n} from '../block-edit/context';\r\nimport groups from './groups';\r\n\r\nexport default function InspectorControlsFill( {\r\n\tchildren,\r\n\tgroup = 'default',\r\n\t__experimentalGroup,\r\n\tresetAllFilter,\r\n} ) {\r\n\tif ( __experimentalGroup ) {\r\n\t\tdeprecated(\r\n\t\t\t'`__experimentalGroup` property in `InspectorControlsFill`',\r\n\t\t\t{\r\n\t\t\t\tsince: '6.2',\r\n\t\t\t\tversion: '6.4',\r\n\t\t\t\talternative: '`group`',\r\n\t\t\t}\r\n\t\t);\r\n\t\tgroup = __experimentalGroup;\r\n\t}\r\n\r\n\tconst context = useBlockEditContext();\r\n\tconst Fill = groups[ group ]?.Fill;\r\n\tif ( ! Fill ) {\r\n\t\twarning( `Unknown InspectorControls group \"${ group }\" provided.` );\r\n\t\treturn null;\r\n\t}\r\n\tif ( ! context[ mayDisplayControlsKey ] ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<StyleProvider document={ document }>\r\n\t\t\t<Fill>\r\n\t\t\t\t{ ( fillProps ) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<ToolsPanelInspectorControl\r\n\t\t\t\t\t\t\tfillProps={ fillProps }\r\n\t\t\t\t\t\t\tchildren={ children }\r\n\t\t\t\t\t\t\tresetAllFilter={ resetAllFilter }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t);\r\n\t\t\t\t} }\r\n\t\t\t</Fill>\r\n\t\t</StyleProvider>\r\n\t);\r\n}\r\n\r\nfunction RegisterResetAll( { resetAllFilter, children } ) {\r\n\tconst { registerResetAllFilter, deregisterResetAllFilter } =\r\n\t\tuseContext( ToolsPanelContext );\r\n\tuseEffect( () => {\r\n\t\tif (\r\n\t\t\tresetAllFilter &&\r\n\t\t\tregisterResetAllFilter &&\r\n\t\t\tderegisterResetAllFilter\r\n\t\t) {\r\n\t\t\tregisterResetAllFilter( resetAllFilter );\r\n\t\t\treturn () => {\r\n\t\t\t\tderegisterResetAllFilter( resetAllFilter );\r\n\t\t\t};\r\n\t\t}\r\n\t}, [ resetAllFilter, registerResetAllFilter, deregisterResetAllFilter ] );\r\n\treturn children;\r\n}\r\n\r\nfunction ToolsPanelInspectorControl( { children, resetAllFilter, fillProps } ) {\r\n\t// `fillProps.forwardedContext` is an array of context provider entries, provided by slot,\r\n\t// that should wrap the fill markup.\r\n\tconst { forwardedContext = [] } = fillProps;\r\n\r\n\t// Children passed to InspectorControlsFill will not have\r\n\t// access to any React Context whose Provider is part of\r\n\t// the InspectorControlsSlot tree. So we re-create the\r\n\t// Provider in this subtree.\r\n\tconst innerMarkup = (\r\n\t\t<RegisterResetAll resetAllFilter={ resetAllFilter }>\r\n\t\t\t{ children }\r\n\t\t</RegisterResetAll>\r\n\t);\r\n\treturn forwardedContext.reduce(\r\n\t\t( inner, [ Provider, props ] ) => (\r\n\t\t\t<Provider { ...props }>{ inner }</Provider>\r\n\t\t),\r\n\t\tinnerMarkup\r\n\t);\r\n}\r\n","/**\n * WordPress dependencies\n */\nimport { __experimentalToolsPanel as ToolsPanel } from '@wordpress/components';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { useCallback } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport { cleanEmptyObject } from '../../hooks/utils';\nimport { TOOLSPANEL_DROPDOWNMENU_PROPS } from '../global-styles/utils';\n\nexport default function BlockSupportToolsPanel( { children, group, label } ) {\n\tconst { updateBlockAttributes } = useDispatch( blockEditorStore );\n\tconst {\n\t\tgetBlockAttributes,\n\t\tgetMultiSelectedBlockClientIds,\n\t\tgetSelectedBlockClientId,\n\t\thasMultiSelection,\n\t} = useSelect( blockEditorStore );\n\n\tconst panelId = getSelectedBlockClientId();\n\tconst resetAll = useCallback(\n\t\t( resetFilters = [] ) => {\n\t\t\tconst newAttributes = {};\n\n\t\t\tconst clientIds = hasMultiSelection()\n\t\t\t\t? getMultiSelectedBlockClientIds()\n\t\t\t\t: [ panelId ];\n\n\t\t\tclientIds.forEach( ( clientId ) => {\n\t\t\t\tconst { style } = getBlockAttributes( clientId );\n\t\t\t\tlet newBlockAttributes = { style };\n\n\t\t\t\tresetFilters.forEach( ( resetFilter ) => {\n\t\t\t\t\tnewBlockAttributes = {\n\t\t\t\t\t\t...newBlockAttributes,\n\t\t\t\t\t\t...resetFilter( newBlockAttributes ),\n\t\t\t\t\t};\n\t\t\t\t} );\n\n\t\t\t\t// Enforce a cleaned style object.\n\t\t\t\tnewBlockAttributes = {\n\t\t\t\t\t...newBlockAttributes,\n\t\t\t\t\tstyle: cleanEmptyObject( newBlockAttributes.style ),\n\t\t\t\t};\n\n\t\t\t\tnewAttributes[ clientId ] = newBlockAttributes;\n\t\t\t} );\n\n\t\t\tupdateBlockAttributes( clientIds, newAttributes, true );\n\t\t},\n\t\t[\n\t\t\tgetBlockAttributes,\n\t\t\tgetMultiSelectedBlockClientIds,\n\t\t\thasMultiSelection,\n\t\t\tpanelId,\n\t\t\tupdateBlockAttributes,\n\t\t]\n\t);\n\n\treturn (\n\t\t<ToolsPanel\n\t\t\tclassName={ `${ group }-block-support-panel` }\n\t\t\tlabel={ label }\n\t\t\tresetAll={ resetAll }\n\t\t\tkey={ panelId }\n\t\t\tpanelId={ panelId }\n\t\t\thasInnerWrapper\n\t\t\tshouldRenderPlaceholderItems // Required to maintain fills ordering.\n\t\t\t__experimentalFirstVisibleItemClass=\"first\"\n\t\t\t__experimentalLastVisibleItemClass=\"last\"\n\t\t\tdropdownMenuProps={ TOOLSPANEL_DROPDOWNMENU_PROPS }\n\t\t>\n\t\t\t{ children }\n\t\t</ToolsPanel>\n\t);\n}\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { __experimentalToolsPanelContext as ToolsPanelContext } from '@wordpress/components';\r\nimport { useContext, useMemo } from '@wordpress/element';\r\n\r\nexport default function BlockSupportSlotContainer( {\r\n\tSlot,\r\n\tfillProps,\r\n\t...props\r\n} ) {\r\n\t// Add the toolspanel context provider and value to existing fill props\r\n\tconst toolsPanelContext = useContext( ToolsPanelContext );\r\n\tconst computedFillProps = useMemo(\r\n\t\t() => ( {\r\n\t\t\t...( fillProps ?? {} ),\r\n\t\t\tforwardedContext: [\r\n\t\t\t\t...( fillProps?.forwardedContext ?? [] ),\r\n\t\t\t\t[ ToolsPanelContext.Provider, { value: toolsPanelContext } ],\r\n\t\t\t],\r\n\t\t} ),\r\n\t\t[ toolsPanelContext, fillProps ]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<Slot { ...props } fillProps={ computedFillProps } bubblesVirtually />\r\n\t);\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\t__experimentalUseSlotFills as useSlotFills,\r\n\t__unstableMotionContext as MotionContext,\r\n} from '@wordpress/components';\r\nimport { useContext, useMemo } from '@wordpress/element';\r\nimport warning from '@wordpress/warning';\r\nimport deprecated from '@wordpress/deprecated';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport BlockSupportToolsPanel from './block-support-tools-panel';\r\nimport BlockSupportSlotContainer from './block-support-slot-container';\r\nimport groups from './groups';\r\n\r\nexport default function InspectorControlsSlot( {\r\n\t__experimentalGroup,\r\n\tgroup = 'default',\r\n\tlabel,\r\n\tfillProps,\r\n\t...props\r\n} ) {\r\n\tif ( __experimentalGroup ) {\r\n\t\tdeprecated(\r\n\t\t\t'`__experimentalGroup` property in `InspectorControlsSlot`',\r\n\t\t\t{\r\n\t\t\t\tsince: '6.2',\r\n\t\t\t\tversion: '6.4',\r\n\t\t\t\talternative: '`group`',\r\n\t\t\t}\r\n\t\t);\r\n\t\tgroup = __experimentalGroup;\r\n\t}\r\n\tconst Slot = groups[ group ]?.Slot;\r\n\tconst fills = useSlotFills( Slot?.__unstableName );\r\n\r\n\tconst motionContextValue = useContext( MotionContext );\r\n\r\n\tconst computedFillProps = useMemo(\r\n\t\t() => ( {\r\n\t\t\t...( fillProps ?? {} ),\r\n\t\t\tforwardedContext: [\r\n\t\t\t\t...( fillProps?.forwardedContext ?? [] ),\r\n\t\t\t\t[ MotionContext.Provider, { value: motionContextValue } ],\r\n\t\t\t],\r\n\t\t} ),\r\n\t\t[ motionContextValue, fillProps ]\r\n\t);\r\n\r\n\tif ( ! Slot ) {\r\n\t\twarning( `Unknown InspectorControls group \"${ group }\" provided.` );\r\n\t\treturn null;\r\n\t}\r\n\r\n\tif ( ! fills?.length ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tif ( label ) {\r\n\t\treturn (\r\n\t\t\t<BlockSupportToolsPanel group={ group } label={ label }>\r\n\t\t\t\t<BlockSupportSlotContainer\r\n\t\t\t\t\t{ ...props }\r\n\t\t\t\t\tfillProps={ computedFillProps }\r\n\t\t\t\t\tSlot={ Slot }\r\n\t\t\t\t/>\r\n\t\t\t</BlockSupportToolsPanel>\r\n\t\t);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Slot { ...props } fillProps={ computedFillProps } bubblesVirtually />\r\n\t);\r\n}\r\n","/**\r\n * Internal dependencies\r\n */\r\nimport InspectorControlsFill from './fill';\r\nimport InspectorControlsSlot from './slot';\r\n\r\nconst InspectorControls = InspectorControlsFill;\r\n\r\nInspectorControls.Slot = InspectorControlsSlot;\r\n\r\n// This is just here for backward compatibility.\r\nexport const InspectorAdvancedControls = ( props ) => {\r\n\treturn <InspectorControlsFill { ...props } group=\"advanced\" />;\r\n};\r\nInspectorAdvancedControls.Slot = ( props ) => {\r\n\treturn <InspectorControlsSlot { ...props } group=\"advanced\" />;\r\n};\r\nInspectorAdvancedControls.slotName = 'InspectorAdvancedControls';\r\n\r\n/**\r\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/inspector-controls/README.md\r\n */\r\nexport default InspectorControls;\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"notices\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"url\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"dom\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"blob\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"keycodes\"];","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst media = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"m7 6.5 4 2.5-4 2.5z\" />\r\n\t\t<Path\r\n\t\t\tfillRule=\"evenodd\"\r\n\t\t\tclipRule=\"evenodd\"\r\n\t\t\td=\"m5 3c-1.10457 0-2 .89543-2 2v14c0 1.1046.89543 2 2 2h14c1.1046 0 2-.8954 2-2v-14c0-1.10457-.8954-2-2-2zm14 1.5h-14c-.27614 0-.5.22386-.5.5v10.7072l3.62953-2.6465c.25108-.1831.58905-.1924.84981-.0234l2.92666 1.8969 3.5712-3.4719c.2911-.2831.7545-.2831 1.0456 0l2.9772 2.8945v-9.3568c0-.27614-.2239-.5-.5-.5zm-14.5 14.5v-1.4364l4.09643-2.987 2.99567 1.9417c.2936.1903.6798.1523.9307-.0917l3.4772-3.3806 3.4772 3.3806.0228-.0234v2.5968c0 .2761-.2239.5-.5.5h-14c-.27614 0-.5-.2239-.5-.5z\"\r\n\t\t/>\r\n\t</SVG>\r\n);\r\n\r\nexport default media;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst upload = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M18.5 15v3.5H13V6.7l4.5 4.1 1-1.1-6.2-5.8-5.8 5.8 1 1.1 4-4v11.7h-6V15H4v5h16v-5z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default upload;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { Path, SVG } from '@wordpress/primitives';\r\n\r\nconst postFeaturedImage = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M19 3H5c-.6 0-1 .4-1 1v7c0 .5.4 1 1 1h14c.5 0 1-.4 1-1V4c0-.6-.4-1-1-1zM5.5 10.5v-.4l1.8-1.3 1.3.8c.3.2.7.2.9-.1L11 8.1l2.4 2.4H5.5zm13 0h-2.9l-4-4c-.3-.3-.8-.3-1.1 0L8.9 8l-1.2-.8c-.3-.2-.6-.2-.9 0l-1.3 1V4.5h13v6zM4 20h9v-1.5H4V20zm0-4h16v-1.5H4V16z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default postFeaturedImage;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { withFilters } from '@wordpress/components';\r\n\r\n/**\r\n * This is a placeholder for the media upload component necessary to make it possible to provide\r\n * an integration with the core blocks that handle media files. By default it renders nothing but\r\n * it provides a way to have it overridden with the `editor.MediaUpload` filter.\r\n *\r\n * @return {Component} The component to be rendered.\r\n */\r\nconst MediaUpload = () => null;\r\n\r\n/**\r\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/media-upload/README.md\r\n */\r\nexport default withFilters( 'editor.MediaUpload' )( MediaUpload );\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useSelect } from '@wordpress/data';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as blockEditorStore } from '../../store';\r\n\r\nexport function MediaUploadCheck( { fallback = null, children } ) {\r\n\tconst hasUploadPermissions = useSelect( ( select ) => {\r\n\t\tconst { getSettings } = select( blockEditorStore );\r\n\t\treturn !! getSettings().mediaUpload;\r\n\t}, [] );\r\n\treturn hasUploadPermissions ? children : fallback;\r\n}\r\n\r\n/**\r\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/media-upload/README.md\r\n */\r\nexport default MediaUploadCheck;\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"isShallowEqual\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"preferences\"];","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst keyboardReturn = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\">\n\t\t<Path d=\"m6.734 16.106 2.176-2.38-1.093-1.028-3.846 4.158 3.846 4.158 1.093-1.028-2.176-2.38h2.811c1.125 0 2.25.03 3.374 0 1.428-.001 3.362-.25 4.963-1.277 1.66-1.065 2.868-2.906 2.868-5.859 0-2.479-1.327-4.896-3.65-5.93-1.82-.813-3.044-.8-4.806-.788l-.567.002v1.5c.184 0 .368 0 .553-.002 1.82-.007 2.704-.014 4.21.657 1.854.827 2.76 2.657 2.76 4.561 0 2.472-.973 3.824-2.178 4.596-1.258.807-2.864 1.04-4.163 1.04h-.02c-1.115.03-2.229 0-3.344 0H6.734Z\" />\n\t</SVG>\n);\n\nexport default keyboardReturn;\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst chevronLeftSmall = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"m13.1 16-3.4-4 3.4-4 1.1 1-2.6 3 2.6 3-1.1 1z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default chevronLeftSmall;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst chevronRightSmall = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M10.8622 8.04053L14.2805 12.0286L10.8622 16.0167L9.72327 15.0405L12.3049 12.0286L9.72327 9.01672L10.8622 8.04053Z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default chevronRightSmall;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\tButton,\r\n\t__unstableMotion as motion,\r\n\t__unstableAnimatePresence as AnimatePresence,\r\n} from '@wordpress/components';\r\nimport { chevronLeftSmall, chevronRightSmall } from '@wordpress/icons';\r\nimport { useReducedMotion, useInstanceId } from '@wordpress/compose';\r\nimport { _x, isRTL } from '@wordpress/i18n';\r\nimport { Fragment } from '@wordpress/element';\r\n\r\nfunction LinkSettingsDrawer( { children, settingsOpen, setSettingsOpen } ) {\r\n\tconst prefersReducedMotion = useReducedMotion();\r\n\tconst MaybeAnimatePresence = prefersReducedMotion\r\n\t\t? Fragment\r\n\t\t: AnimatePresence;\r\n\tconst MaybeMotionDiv = prefersReducedMotion ? 'div' : motion.div;\r\n\r\n\tconst id = useInstanceId( LinkSettingsDrawer );\r\n\r\n\tconst settingsDrawerId = `link-control-settings-drawer-${ id }`;\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Button\r\n\t\t\t\tclassName=\"block-editor-link-control__drawer-toggle\"\r\n\t\t\t\taria-expanded={ settingsOpen }\r\n\t\t\t\tonClick={ () => setSettingsOpen( ! settingsOpen ) }\r\n\t\t\t\ticon={ isRTL() ? chevronLeftSmall : chevronRightSmall }\r\n\t\t\t\taria-controls={ settingsDrawerId }\r\n\t\t\t>\r\n\t\t\t\t{ _x( 'Advanced', 'Additional link settings' ) }\r\n\t\t\t</Button>\r\n\t\t\t<MaybeAnimatePresence>\r\n\t\t\t\t{ settingsOpen && (\r\n\t\t\t\t\t<MaybeMotionDiv\r\n\t\t\t\t\t\tclassName=\"block-editor-link-control__drawer\"\r\n\t\t\t\t\t\thidden={ ! settingsOpen }\r\n\t\t\t\t\t\tid={ settingsDrawerId }\r\n\t\t\t\t\t\tinitial=\"collapsed\"\r\n\t\t\t\t\t\tanimate=\"open\"\r\n\t\t\t\t\t\texit=\"collapsed\"\r\n\t\t\t\t\t\tvariants={ {\r\n\t\t\t\t\t\t\topen: { opacity: 1, height: 'auto' },\r\n\t\t\t\t\t\t\tcollapsed: { opacity: 0, height: 0 },\r\n\t\t\t\t\t\t} }\r\n\t\t\t\t\t\ttransition={ {\r\n\t\t\t\t\t\t\tduration: 0.1,\r\n\t\t\t\t\t\t} }\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<div className=\"block-editor-link-control__drawer-inner\">\r\n\t\t\t\t\t\t\t{ children }\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</MaybeMotionDiv>\r\n\t\t\t\t) }\r\n\t\t\t</MaybeAnimatePresence>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default LinkSettingsDrawer;\r\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport deprecated from '@wordpress/deprecated';\nimport { __, sprintf, _n } from '@wordpress/i18n';\nimport { Component, createRef } from '@wordpress/element';\nimport { UP, DOWN, ENTER, TAB } from '@wordpress/keycodes';\nimport {\n\tBaseControl,\n\tButton,\n\tSpinner,\n\twithSpokenMessages,\n\tPopover,\n} from '@wordpress/components';\nimport {\n\tcompose,\n\tdebounce,\n\twithInstanceId,\n\twithSafeTimeout,\n} from '@wordpress/compose';\nimport { withSelect } from '@wordpress/data';\nimport { isURL } from '@wordpress/url';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\n/**\n * Whether the argument is a function.\n *\n * @param {*} maybeFunc The argument to check.\n * @return {boolean} True if the argument is a function, false otherwise.\n */\nfunction isFunction( maybeFunc ) {\n\treturn typeof maybeFunc === 'function';\n}\n\nclass URLInput extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.onChange = this.onChange.bind( this );\n\t\tthis.onFocus = this.onFocus.bind( this );\n\t\tthis.onKeyDown = this.onKeyDown.bind( this );\n\t\tthis.selectLink = this.selectLink.bind( this );\n\t\tthis.handleOnClick = this.handleOnClick.bind( this );\n\t\tthis.bindSuggestionNode = this.bindSuggestionNode.bind( this );\n\t\tthis.autocompleteRef = props.autocompleteRef || createRef();\n\t\tthis.inputRef = createRef();\n\t\tthis.updateSuggestions = debounce(\n\t\t\tthis.updateSuggestions.bind( this ),\n\t\t\t200\n\t\t);\n\n\t\tthis.suggestionNodes = [];\n\n\t\tthis.suggestionsRequest = null;\n\n\t\tthis.state = {\n\t\t\tsuggestions: [],\n\t\t\tshowSuggestions: false,\n\t\t\tsuggestionsValue: null,\n\t\t\tselectedSuggestion: null,\n\t\t\tsuggestionsListboxId: '',\n\t\t\tsuggestionOptionIdPrefix: '',\n\t\t};\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tconst { showSuggestions, selectedSuggestion } = this.state;\n\t\tconst { value, __experimentalShowInitialSuggestions = false } =\n\t\t\tthis.props;\n\n\t\t// Only have to worry about scrolling selected suggestion into view\n\t\t// when already expanded.\n\t\tif (\n\t\t\tshowSuggestions &&\n\t\t\tselectedSuggestion !== null &&\n\t\t\tthis.suggestionNodes[ selectedSuggestion ]\n\t\t) {\n\t\t\tthis.suggestionNodes[ selectedSuggestion ].scrollIntoView( {\n\t\t\t\tbehavior: 'instant',\n\t\t\t\tblock: 'nearest',\n\t\t\t\tinline: 'nearest',\n\t\t\t} );\n\t\t}\n\n\t\t// Update suggestions when the value changes.\n\t\tif ( prevProps.value !== value && ! this.props.disableSuggestions ) {\n\t\t\tif ( value?.length ) {\n\t\t\t\t// If the new value is not empty we need to update with suggestions for it.\n\t\t\t\tthis.updateSuggestions( value );\n\t\t\t} else if ( __experimentalShowInitialSuggestions ) {\n\t\t\t\t// If the new value is empty and we can show initial suggestions, then show initial suggestions.\n\t\t\t\tthis.updateSuggestions();\n\t\t\t}\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\tif ( this.shouldShowInitialSuggestions() ) {\n\t\t\tthis.updateSuggestions();\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\tthis.suggestionsRequest?.cancel?.();\n\t\tthis.suggestionsRequest = null;\n\t}\n\n\tbindSuggestionNode( index ) {\n\t\treturn ( ref ) => {\n\t\t\tthis.suggestionNodes[ index ] = ref;\n\t\t};\n\t}\n\n\tshouldShowInitialSuggestions() {\n\t\tconst { __experimentalShowInitialSuggestions = false, value } =\n\t\t\tthis.props;\n\t\treturn (\n\t\t\t__experimentalShowInitialSuggestions && ! ( value && value.length )\n\t\t);\n\t}\n\n\tupdateSuggestions( value = '' ) {\n\t\tconst {\n\t\t\t__experimentalFetchLinkSuggestions: fetchLinkSuggestions,\n\t\t\t__experimentalHandleURLSuggestions: handleURLSuggestions,\n\t\t} = this.props;\n\n\t\tif ( ! fetchLinkSuggestions ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Initial suggestions may only show if there is no value\n\t\t// (note: this includes whitespace).\n\t\tconst isInitialSuggestions = ! value?.length;\n\n\t\t// Trim only now we've determined whether or not it originally had a \"length\"\n\t\t// (even if that value was all whitespace).\n\t\tvalue = value.trim();\n\n\t\t// Allow a suggestions request if:\n\t\t// - there are at least 2 characters in the search input (except manual searches where\n\t\t//   search input length is not required to trigger a fetch)\n\t\t// - this is a direct entry (eg: a URL)\n\t\tif (\n\t\t\t! isInitialSuggestions &&\n\t\t\t( value.length < 2 || ( ! handleURLSuggestions && isURL( value ) ) )\n\t\t) {\n\t\t\tthis.suggestionsRequest?.cancel?.();\n\t\t\tthis.suggestionsRequest = null;\n\n\t\t\tthis.setState( {\n\t\t\t\tsuggestions: [],\n\t\t\t\tshowSuggestions: false,\n\t\t\t\tsuggestionsValue: value,\n\t\t\t\tselectedSuggestion: null,\n\t\t\t\tloading: false,\n\t\t\t} );\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis.setState( {\n\t\t\tselectedSuggestion: null,\n\t\t\tloading: true,\n\t\t} );\n\n\t\tconst request = fetchLinkSuggestions( value, {\n\t\t\tisInitialSuggestions,\n\t\t} );\n\n\t\trequest\n\t\t\t.then( ( suggestions ) => {\n\t\t\t\t// A fetch Promise doesn't have an abort option. It's mimicked by\n\t\t\t\t// comparing the request reference in on the instance, which is\n\t\t\t\t// reset or deleted on subsequent requests or unmounting.\n\t\t\t\tif ( this.suggestionsRequest !== request ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.setState( {\n\t\t\t\t\tsuggestions,\n\t\t\t\t\tsuggestionsValue: value,\n\t\t\t\t\tloading: false,\n\t\t\t\t\tshowSuggestions: !! suggestions.length,\n\t\t\t\t} );\n\n\t\t\t\tif ( !! suggestions.length ) {\n\t\t\t\t\tthis.props.debouncedSpeak(\n\t\t\t\t\t\tsprintf(\n\t\t\t\t\t\t\t/* translators: %s: number of results. */\n\t\t\t\t\t\t\t_n(\n\t\t\t\t\t\t\t\t'%d result found, use up and down arrow keys to navigate.',\n\t\t\t\t\t\t\t\t'%d results found, use up and down arrow keys to navigate.',\n\t\t\t\t\t\t\t\tsuggestions.length\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tsuggestions.length\n\t\t\t\t\t\t),\n\t\t\t\t\t\t'assertive'\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tthis.props.debouncedSpeak(\n\t\t\t\t\t\t__( 'No results.' ),\n\t\t\t\t\t\t'assertive'\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t} )\n\t\t\t.catch( () => {\n\t\t\t\tif ( this.suggestionsRequest !== request ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.setState( {\n\t\t\t\t\tloading: false,\n\t\t\t\t} );\n\t\t\t} )\n\t\t\t.finally( () => {\n\t\t\t\t// If this is the current promise then reset the reference\n\t\t\t\t// to allow for checking if a new request is made.\n\t\t\t\tif ( this.suggestionsRequest === request ) {\n\t\t\t\t\tthis.suggestionsRequest = null;\n\t\t\t\t}\n\t\t\t} );\n\n\t\t// Note that this assignment is handled *before* the async search request\n\t\t// as a Promise always resolves on the next tick of the event loop.\n\t\tthis.suggestionsRequest = request;\n\t}\n\n\tonChange( event ) {\n\t\tthis.props.onChange( event.target.value );\n\t}\n\n\tonFocus() {\n\t\tconst { suggestions } = this.state;\n\t\tconst { disableSuggestions, value } = this.props;\n\n\t\t// When opening the link editor, if there's a value present, we want to load the suggestions pane with the results for this input search value\n\t\t// Don't re-run the suggestions on focus if there are already suggestions present (prevents searching again when tabbing between the input and buttons)\n\t\t// or there is already a request in progress.\n\t\tif (\n\t\t\tvalue &&\n\t\t\t! disableSuggestions &&\n\t\t\t! ( suggestions && suggestions.length ) &&\n\t\t\tthis.suggestionsRequest === null\n\t\t) {\n\t\t\t// Ensure the suggestions are updated with the current input value.\n\t\t\tthis.updateSuggestions( value );\n\t\t}\n\t}\n\n\tonKeyDown( event ) {\n\t\tthis.props.onKeyDown?.( event );\n\t\tconst { showSuggestions, selectedSuggestion, suggestions, loading } =\n\t\t\tthis.state;\n\n\t\t// If the suggestions are not shown or loading, we shouldn't handle the arrow keys\n\t\t// We shouldn't preventDefault to allow block arrow keys navigation.\n\t\tif ( ! showSuggestions || ! suggestions.length || loading ) {\n\t\t\t// In the Windows version of Firefox the up and down arrows don't move the caret\n\t\t\t// within an input field like they do for Mac Firefox/Chrome/Safari. This causes\n\t\t\t// a form of focus trapping that is disruptive to the user experience. This disruption\n\t\t\t// only happens if the caret is not in the first or last position in the text input.\n\t\t\t// See: https://github.com/WordPress/gutenberg/issues/5693#issuecomment-436684747\n\t\t\tswitch ( event.keyCode ) {\n\t\t\t\t// When UP is pressed, if the caret is at the start of the text, move it to the 0\n\t\t\t\t// position.\n\t\t\t\tcase UP: {\n\t\t\t\t\tif ( 0 !== event.target.selectionStart ) {\n\t\t\t\t\t\tevent.preventDefault();\n\n\t\t\t\t\t\t// Set the input caret to position 0.\n\t\t\t\t\t\tevent.target.setSelectionRange( 0, 0 );\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t// When DOWN is pressed, if the caret is not at the end of the text, move it to the\n\t\t\t\t// last position.\n\t\t\t\tcase DOWN: {\n\t\t\t\t\tif (\n\t\t\t\t\t\tthis.props.value.length !== event.target.selectionStart\n\t\t\t\t\t) {\n\t\t\t\t\t\tevent.preventDefault();\n\n\t\t\t\t\t\t// Set the input caret to the last position.\n\t\t\t\t\t\tevent.target.setSelectionRange(\n\t\t\t\t\t\t\tthis.props.value.length,\n\t\t\t\t\t\t\tthis.props.value.length\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\t// Submitting while loading should trigger onSubmit.\n\t\t\t\tcase ENTER: {\n\t\t\t\t\tif ( this.props.onSubmit ) {\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\tthis.props.onSubmit( null, event );\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst suggestion =\n\t\t\tthis.state.suggestions[ this.state.selectedSuggestion ];\n\n\t\tswitch ( event.keyCode ) {\n\t\t\tcase UP: {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tconst previousIndex = ! selectedSuggestion\n\t\t\t\t\t? suggestions.length - 1\n\t\t\t\t\t: selectedSuggestion - 1;\n\t\t\t\tthis.setState( {\n\t\t\t\t\tselectedSuggestion: previousIndex,\n\t\t\t\t} );\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase DOWN: {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tconst nextIndex =\n\t\t\t\t\tselectedSuggestion === null ||\n\t\t\t\t\tselectedSuggestion === suggestions.length - 1\n\t\t\t\t\t\t? 0\n\t\t\t\t\t\t: selectedSuggestion + 1;\n\t\t\t\tthis.setState( {\n\t\t\t\t\tselectedSuggestion: nextIndex,\n\t\t\t\t} );\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase TAB: {\n\t\t\t\tif ( this.state.selectedSuggestion !== null ) {\n\t\t\t\t\tthis.selectLink( suggestion );\n\t\t\t\t\t// Announce a link has been selected when tabbing away from the input field.\n\t\t\t\t\tthis.props.speak( __( 'Link selected.' ) );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase ENTER: {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tif ( this.state.selectedSuggestion !== null ) {\n\t\t\t\t\tthis.selectLink( suggestion );\n\n\t\t\t\t\tif ( this.props.onSubmit ) {\n\t\t\t\t\t\tthis.props.onSubmit( suggestion, event );\n\t\t\t\t\t}\n\t\t\t\t} else if ( this.props.onSubmit ) {\n\t\t\t\t\tthis.props.onSubmit( null, event );\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tselectLink( suggestion ) {\n\t\tthis.props.onChange( suggestion.url, suggestion );\n\t\tthis.setState( {\n\t\t\tselectedSuggestion: null,\n\t\t\tshowSuggestions: false,\n\t\t} );\n\t}\n\n\thandleOnClick( suggestion ) {\n\t\tthis.selectLink( suggestion );\n\t\t// Move focus to the input field when a link suggestion is clicked.\n\t\tthis.inputRef.current.focus();\n\t}\n\n\tstatic getDerivedStateFromProps(\n\t\t{\n\t\t\tvalue,\n\t\t\tinstanceId,\n\t\t\tdisableSuggestions,\n\t\t\t__experimentalShowInitialSuggestions = false,\n\t\t},\n\t\t{ showSuggestions }\n\t) {\n\t\tlet shouldShowSuggestions = showSuggestions;\n\n\t\tconst hasValue = value && value.length;\n\n\t\tif ( ! __experimentalShowInitialSuggestions && ! hasValue ) {\n\t\t\tshouldShowSuggestions = false;\n\t\t}\n\n\t\tif ( disableSuggestions === true ) {\n\t\t\tshouldShowSuggestions = false;\n\t\t}\n\n\t\treturn {\n\t\t\tshowSuggestions: shouldShowSuggestions,\n\t\t\tsuggestionsListboxId: `block-editor-url-input-suggestions-${ instanceId }`,\n\t\t\tsuggestionOptionIdPrefix: `block-editor-url-input-suggestion-${ instanceId }`,\n\t\t};\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t{ this.renderControl() }\n\t\t\t\t{ this.renderSuggestions() }\n\t\t\t</>\n\t\t);\n\t}\n\n\trenderControl() {\n\t\tconst {\n\t\t\t/** Start opting into the new margin-free styles that will become the default in a future version. */\n\t\t\t__nextHasNoMarginBottom = false,\n\t\t\tlabel = null,\n\t\t\tclassName,\n\t\t\tisFullWidth,\n\t\t\tinstanceId,\n\t\t\tplaceholder = __( 'Paste URL or type to search' ),\n\t\t\t__experimentalRenderControl: renderControl,\n\t\t\tvalue = '',\n\t\t\thideLabelFromVision = false,\n\t\t} = this.props;\n\n\t\tconst {\n\t\t\tloading,\n\t\t\tshowSuggestions,\n\t\t\tselectedSuggestion,\n\t\t\tsuggestionsListboxId,\n\t\t\tsuggestionOptionIdPrefix,\n\t\t} = this.state;\n\n\t\tconst inputId = `url-input-control-${ instanceId }`;\n\n\t\tconst controlProps = {\n\t\t\tid: inputId, // Passes attribute to label for the for attribute\n\t\t\tlabel,\n\t\t\tclassName: classnames( 'block-editor-url-input', className, {\n\t\t\t\t'is-full-width': isFullWidth,\n\t\t\t} ),\n\t\t\thideLabelFromVision,\n\t\t};\n\n\t\tconst inputProps = {\n\t\t\tid: inputId,\n\t\t\tvalue,\n\t\t\trequired: true,\n\t\t\tclassName: 'block-editor-url-input__input',\n\t\t\ttype: 'text',\n\t\t\tonChange: this.onChange,\n\t\t\tonFocus: this.onFocus,\n\t\t\tplaceholder,\n\t\t\tonKeyDown: this.onKeyDown,\n\t\t\trole: 'combobox',\n\t\t\t'aria-label': label ? undefined : __( 'URL' ), // Ensure input always has an accessible label\n\t\t\t'aria-expanded': showSuggestions,\n\t\t\t'aria-autocomplete': 'list',\n\t\t\t'aria-owns': suggestionsListboxId,\n\t\t\t'aria-activedescendant':\n\t\t\t\tselectedSuggestion !== null\n\t\t\t\t\t? `${ suggestionOptionIdPrefix }-${ selectedSuggestion }`\n\t\t\t\t\t: undefined,\n\t\t\tref: this.inputRef,\n\t\t};\n\n\t\tif ( renderControl ) {\n\t\t\treturn renderControl( controlProps, inputProps, loading );\n\t\t}\n\n\t\tif ( ! __nextHasNoMarginBottom ) {\n\t\t\tdeprecated( 'Bottom margin styles for wp.blockEditor.URLInput', {\n\t\t\t\tsince: '6.2',\n\t\t\t\tversion: '6.5',\n\t\t\t\thint: 'Set the `__nextHasNoMarginBottom` prop to true to start opting into the new styles, which will become the default in a future version',\n\t\t\t} );\n\t\t}\n\n\t\treturn (\n\t\t\t<BaseControl\n\t\t\t\t__nextHasNoMarginBottom={ __nextHasNoMarginBottom }\n\t\t\t\t{ ...controlProps }\n\t\t\t>\n\t\t\t\t<input { ...inputProps } />\n\t\t\t\t{ loading && <Spinner /> }\n\t\t\t</BaseControl>\n\t\t);\n\t}\n\n\trenderSuggestions() {\n\t\tconst {\n\t\t\tclassName,\n\t\t\t__experimentalRenderSuggestions: renderSuggestions,\n\t\t} = this.props;\n\n\t\tconst {\n\t\t\tshowSuggestions,\n\t\t\tsuggestions,\n\t\t\tsuggestionsValue,\n\t\t\tselectedSuggestion,\n\t\t\tsuggestionsListboxId,\n\t\t\tsuggestionOptionIdPrefix,\n\t\t\tloading,\n\t\t} = this.state;\n\n\t\tif ( ! showSuggestions || suggestions.length === 0 ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst suggestionsListProps = {\n\t\t\tid: suggestionsListboxId,\n\t\t\tref: this.autocompleteRef,\n\t\t\trole: 'listbox',\n\t\t};\n\n\t\tconst buildSuggestionItemProps = ( suggestion, index ) => {\n\t\t\treturn {\n\t\t\t\trole: 'option',\n\t\t\t\ttabIndex: '-1',\n\t\t\t\tid: `${ suggestionOptionIdPrefix }-${ index }`,\n\t\t\t\tref: this.bindSuggestionNode( index ),\n\t\t\t\t'aria-selected':\n\t\t\t\t\tindex === selectedSuggestion ? true : undefined,\n\t\t\t};\n\t\t};\n\n\t\tif ( isFunction( renderSuggestions ) ) {\n\t\t\treturn renderSuggestions( {\n\t\t\t\tsuggestions,\n\t\t\t\tselectedSuggestion,\n\t\t\t\tsuggestionsListProps,\n\t\t\t\tbuildSuggestionItemProps,\n\t\t\t\tisLoading: loading,\n\t\t\t\thandleSuggestionClick: this.handleOnClick,\n\t\t\t\tisInitialSuggestions: ! suggestionsValue?.length,\n\t\t\t\tcurrentInputValue: suggestionsValue,\n\t\t\t} );\n\t\t}\n\n\t\treturn (\n\t\t\t<Popover placement=\"bottom\" focusOnMount={ false }>\n\t\t\t\t<div\n\t\t\t\t\t{ ...suggestionsListProps }\n\t\t\t\t\tclassName={ classnames(\n\t\t\t\t\t\t'block-editor-url-input__suggestions',\n\t\t\t\t\t\t`${ className }__suggestions`\n\t\t\t\t\t) }\n\t\t\t\t>\n\t\t\t\t\t{ suggestions.map( ( suggestion, index ) => (\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t{ ...buildSuggestionItemProps( suggestion, index ) }\n\t\t\t\t\t\t\tkey={ suggestion.id }\n\t\t\t\t\t\t\tclassName={ classnames(\n\t\t\t\t\t\t\t\t'block-editor-url-input__suggestion',\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t'is-selected': index === selectedSuggestion,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\tonClick={ () => this.handleOnClick( suggestion ) }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ suggestion.title }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t) ) }\n\t\t\t\t</div>\n\t\t\t</Popover>\n\t\t);\n\t}\n}\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/url-input/README.md\n */\nexport default compose(\n\twithSafeTimeout,\n\twithSpokenMessages,\n\twithInstanceId,\n\twithSelect( ( select, props ) => {\n\t\t// If a link suggestions handler is already provided then\n\t\t// bail.\n\t\tif ( isFunction( props.__experimentalFetchLinkSuggestions ) ) {\n\t\t\treturn;\n\t\t}\n\t\tconst { getSettings } = select( blockEditorStore );\n\t\treturn {\n\t\t\t__experimentalFetchLinkSuggestions:\n\t\t\t\tgetSettings().__experimentalFetchLinkSuggestions,\n\t\t};\n\t} )\n)( URLInput );\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst plus = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M11 12.5V17.5H12.5V12.5H17.5V11H12.5V6H11V11H6V12.5H11Z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default plus;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { __, sprintf } from '@wordpress/i18n';\r\nimport { MenuItem } from '@wordpress/components';\r\nimport { createInterpolateElement } from '@wordpress/element';\r\nimport { plus } from '@wordpress/icons';\r\n\r\nexport const LinkControlSearchCreate = ( {\r\n\tsearchTerm,\r\n\tonClick,\r\n\titemProps,\r\n\tbuttonText,\r\n} ) => {\r\n\tif ( ! searchTerm ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tlet text;\r\n\tif ( buttonText ) {\r\n\t\ttext =\r\n\t\t\ttypeof buttonText === 'function'\r\n\t\t\t\t? buttonText( searchTerm )\r\n\t\t\t\t: buttonText;\r\n\t} else {\r\n\t\ttext = createInterpolateElement(\r\n\t\t\tsprintf(\r\n\t\t\t\t/* translators: %s: search term. */\r\n\t\t\t\t__( 'Create: <mark>%s</mark>' ),\r\n\t\t\t\tsearchTerm\r\n\t\t\t),\r\n\t\t\t{ mark: <mark /> }\r\n\t\t);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<MenuItem\r\n\t\t\t{ ...itemProps }\r\n\t\t\ticonPosition=\"left\"\r\n\t\t\ticon={ plus }\r\n\t\t\tclassName=\"block-editor-link-control__search-item\"\r\n\t\t\tonClick={ onClick }\r\n\t\t>\r\n\t\t\t{ text }\r\n\t\t</MenuItem>\r\n\t);\r\n};\r\n\r\nexport default LinkControlSearchCreate;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { Path, SVG } from '@wordpress/primitives';\r\n\r\nconst postList = (\r\n\t<SVG viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n\t\t<Path d=\"M18 5.5H6a.5.5 0 0 0-.5.5v12a.5.5 0 0 0 .5.5h12a.5.5 0 0 0 .5-.5V6a.5.5 0 0 0-.5-.5ZM6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2Zm1 5h1.5v1.5H7V9Zm1.5 4.5H7V15h1.5v-1.5ZM10 9h7v1.5h-7V9Zm7 4.5h-7V15h7v-1.5Z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default postList;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst page = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M15.5 7.5h-7V9h7V7.5Zm-7 3.5h7v1.5h-7V11Zm7 3.5h-7V16h7v-1.5Z\" />\r\n\t\t<Path d=\"M17 4H7a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2ZM7 5.5h10a.5.5 0 0 1 .5.5v12a.5.5 0 0 1-.5.5H7a.5.5 0 0 1-.5-.5V6a.5.5 0 0 1 .5-.5Z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default page;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst tag = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M4.75 4a.75.75 0 0 0-.75.75v7.826c0 .2.08.39.22.53l6.72 6.716a2.313 2.313 0 0 0 3.276-.001l5.61-5.611-.531-.53.532.528a2.315 2.315 0 0 0 0-3.264L13.104 4.22a.75.75 0 0 0-.53-.22H4.75ZM19 12.576a.815.815 0 0 1-.236.574l-5.61 5.611a.814.814 0 0 1-1.153 0L5.5 12.264V5.5h6.763l6.5 6.502a.816.816 0 0 1 .237.574ZM8.75 9.75a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default tag;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst category = (\r\n\t<SVG viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n\t\t<Path\r\n\t\t\td=\"M6 5.5h3a.5.5 0 01.5.5v3a.5.5 0 01-.5.5H6a.5.5 0 01-.5-.5V6a.5.5 0 01.5-.5zM4 6a2 2 0 012-2h3a2 2 0 012 2v3a2 2 0 01-2 2H6a2 2 0 01-2-2V6zm11-.5h3a.5.5 0 01.5.5v3a.5.5 0 01-.5.5h-3a.5.5 0 01-.5-.5V6a.5.5 0 01.5-.5zM13 6a2 2 0 012-2h3a2 2 0 012 2v3a2 2 0 01-2 2h-3a2 2 0 01-2-2V6zm5 8.5h-3a.5.5 0 00-.5.5v3a.5.5 0 00.5.5h3a.5.5 0 00.5-.5v-3a.5.5 0 00-.5-.5zM15 13a2 2 0 00-2 2v3a2 2 0 002 2h3a2 2 0 002-2v-3a2 2 0 00-2-2h-3zm-9 1.5h3a.5.5 0 01.5.5v3a.5.5 0 01-.5.5H6a.5.5 0 01-.5-.5v-3a.5.5 0 01.5-.5zM4 15a2 2 0 012-2h3a2 2 0 012 2v3a2 2 0 01-2 2H6a2 2 0 01-2-2v-3z\"\r\n\t\t\tfillRule=\"evenodd\"\r\n\t\t\tclipRule=\"evenodd\"\r\n\t\t/>\r\n\t</SVG>\r\n);\r\n\r\nexport default category;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { Path, SVG } from '@wordpress/primitives';\r\n\r\nconst file = (\r\n\t<SVG viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n\t\t<Path\r\n\t\t\tfillRule=\"evenodd\"\r\n\t\t\tclipRule=\"evenodd\"\r\n\t\t\td=\"M12.848 8a1 1 0 0 1-.914-.594l-.723-1.63a.5.5 0 0 0-.447-.276H5a.5.5 0 0 0-.5.5v11.5a.5.5 0 0 0 .5.5h14a.5.5 0 0 0 .5-.5v-9A.5.5 0 0 0 19 8h-6.152Zm.612-1.5a.5.5 0 0 1-.462-.31l-.445-1.084A2 2 0 0 0 10.763 4H5a2 2 0 0 0-2 2v11.5a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-9a2 2 0 0 0-2-2h-5.54Z\"\r\n\t\t/>\r\n\t</SVG>\r\n);\r\n\r\nexport default file;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst globe = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M12 3.3c-4.8 0-8.8 3.9-8.8 8.8 0 4.8 3.9 8.8 8.8 8.8 4.8 0 8.8-3.9 8.8-8.8s-4-8.8-8.8-8.8zm6.5 5.5h-2.6C15.4 7.3 14.8 6 14 5c2 .6 3.6 2 4.5 3.8zm.7 3.2c0 .6-.1 1.2-.2 1.8h-2.9c.1-.6.1-1.2.1-1.8s-.1-1.2-.1-1.8H19c.2.6.2 1.2.2 1.8zM12 18.7c-1-.7-1.8-1.9-2.3-3.5h4.6c-.5 1.6-1.3 2.9-2.3 3.5zm-2.6-4.9c-.1-.6-.1-1.1-.1-1.8 0-.6.1-1.2.1-1.8h5.2c.1.6.1 1.1.1 1.8s-.1 1.2-.1 1.8H9.4zM4.8 12c0-.6.1-1.2.2-1.8h2.9c-.1.6-.1 1.2-.1 1.8 0 .6.1 1.2.1 1.8H5c-.2-.6-.2-1.2-.2-1.8zM12 5.3c1 .7 1.8 1.9 2.3 3.5H9.7c.5-1.6 1.3-2.9 2.3-3.5zM10 5c-.8 1-1.4 2.3-1.8 3.8H5.5C6.4 7 8 5.6 10 5zM5.5 15.3h2.6c.4 1.5 1 2.8 1.8 3.7-1.8-.6-3.5-2-4.4-3.7zM14 19c.8-1 1.4-2.2 1.8-3.7h2.6C17.6 17 16 18.4 14 19z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default globe;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst home = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M12 4L4 7.9V20h16V7.9L12 4zm6.5 14.5H14V13h-4v5.5H5.5V8.8L12 5.7l6.5 3.1v9.7z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default home;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { Path, SVG } from '@wordpress/primitives';\r\n\r\nconst verse = (\r\n\t<SVG viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n\t\t<Path d=\"M17.8 2l-.9.3c-.1 0-3.6 1-5.2 2.1C10 5.5 9.3 6.5 8.9 7.1c-.6.9-1.7 4.7-1.7 6.3l-.9 2.3c-.2.4 0 .8.4 1 .1 0 .2.1.3.1.3 0 .6-.2.7-.5l.6-1.5c.3 0 .7-.1 1.2-.2.7-.1 1.4-.3 2.2-.5.8-.2 1.6-.5 2.4-.8.7-.3 1.4-.7 1.9-1.2s.8-1.2 1-1.9c.2-.7.3-1.6.4-2.4.1-.8.1-1.7.2-2.5 0-.8.1-1.5.2-2.1V2zm-1.9 5.6c-.1.8-.2 1.5-.3 2.1-.2.6-.4 1-.6 1.3-.3.3-.8.6-1.4.9-.7.3-1.4.5-2.2.8-.6.2-1.3.3-1.8.4L15 7.5c.3-.3.6-.7 1-1.1 0 .4 0 .8-.1 1.2zM6 20h8v-1.5H6V20z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default verse;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { __ } from '@wordpress/i18n';\r\nimport { MenuItem, TextHighlight } from '@wordpress/components';\r\nimport {\r\n\tIcon,\r\n\tglobe,\r\n\tpage,\r\n\ttag,\r\n\tpostList,\r\n\tcategory,\r\n\tfile,\r\n\thome,\r\n\tverse,\r\n} from '@wordpress/icons';\r\nimport { __unstableStripHTML as stripHTML } from '@wordpress/dom';\r\nimport { safeDecodeURI, filterURLForDisplay, getPath } from '@wordpress/url';\r\nimport { pipe } from '@wordpress/compose';\r\n\r\nconst ICONS_MAP = {\r\n\tpost: postList,\r\n\tpage,\r\n\tpost_tag: tag,\r\n\tcategory,\r\n\tattachment: file,\r\n};\r\n\r\nfunction SearchItemIcon( { isURL, suggestion } ) {\r\n\tlet icon = null;\r\n\r\n\tif ( isURL ) {\r\n\t\ticon = globe;\r\n\t} else if ( suggestion.type in ICONS_MAP ) {\r\n\t\ticon = ICONS_MAP[ suggestion.type ];\r\n\t\tif ( suggestion.type === 'page' ) {\r\n\t\t\tif ( suggestion.isFrontPage ) {\r\n\t\t\t\ticon = home;\r\n\t\t\t}\r\n\t\t\tif ( suggestion.isBlogHome ) {\r\n\t\t\t\ticon = verse;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tif ( icon ) {\r\n\t\treturn (\r\n\t\t\t<Icon\r\n\t\t\t\tclassName=\"block-editor-link-control__search-item-icon\"\r\n\t\t\t\ticon={ icon }\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n\r\n\treturn null;\r\n}\r\n\r\n/**\r\n * Adds a leading slash to a url if it doesn't already have one.\r\n * @param {string} url the url to add a leading slash to.\r\n * @return {string} the url with a leading slash.\r\n */\r\nfunction addLeadingSlash( url ) {\r\n\tconst trimmedURL = url?.trim();\r\n\r\n\tif ( ! trimmedURL?.length ) return url;\r\n\r\n\treturn url?.replace( /^\\/?/, '/' );\r\n}\r\n\r\nfunction removeTrailingSlash( url ) {\r\n\tconst trimmedURL = url?.trim();\r\n\r\n\tif ( ! trimmedURL?.length ) return url;\r\n\r\n\treturn url?.replace( /\\/$/, '' );\r\n}\r\n\r\nconst partialRight =\r\n\t( fn, ...partialArgs ) =>\r\n\t( ...args ) =>\r\n\t\tfn( ...args, ...partialArgs );\r\n\r\nconst defaultTo = ( d ) => ( v ) => {\r\n\treturn v === null || v === undefined || v !== v ? d : v;\r\n};\r\n\r\n/**\r\n * Prepares a URL for display in the UI.\r\n * - decodes the URL.\r\n * - filters it (removes protocol, www, etc.).\r\n * - truncates it if necessary.\r\n * - adds a leading slash.\r\n * @param {string} url the url.\r\n * @return {string} the processed url to display.\r\n */\r\nfunction getURLForDisplay( url ) {\r\n\tif ( ! url ) return url;\r\n\r\n\treturn pipe(\r\n\t\tsafeDecodeURI,\r\n\t\tgetPath,\r\n\t\tdefaultTo( '' ),\r\n\t\tpartialRight( filterURLForDisplay, 24 ),\r\n\t\tremoveTrailingSlash,\r\n\t\taddLeadingSlash\r\n\t)( url );\r\n}\r\n\r\nexport const LinkControlSearchItem = ( {\r\n\titemProps,\r\n\tsuggestion,\r\n\tsearchTerm,\r\n\tonClick,\r\n\tisURL = false,\r\n\tshouldShowType = false,\r\n} ) => {\r\n\tconst info = isURL\r\n\t\t? __( 'Press ENTER to add this link' )\r\n\t\t: getURLForDisplay( suggestion.url );\r\n\r\n\treturn (\r\n\t\t<MenuItem\r\n\t\t\t{ ...itemProps }\r\n\t\t\tinfo={ info }\r\n\t\t\ticonPosition=\"left\"\r\n\t\t\ticon={\r\n\t\t\t\t<SearchItemIcon suggestion={ suggestion } isURL={ isURL } />\r\n\t\t\t}\r\n\t\t\tonClick={ onClick }\r\n\t\t\tshortcut={ shouldShowType && getVisualTypeName( suggestion ) }\r\n\t\t\tclassName=\"block-editor-link-control__search-item\"\r\n\t\t>\r\n\t\t\t<TextHighlight\r\n\t\t\t\t// The component expects a plain text string.\r\n\t\t\t\ttext={ stripHTML( suggestion.title ) }\r\n\t\t\t\thighlight={ searchTerm }\r\n\t\t\t/>\r\n\t\t</MenuItem>\r\n\t);\r\n};\r\n\r\nfunction getVisualTypeName( suggestion ) {\r\n\tif ( suggestion.isFrontPage ) {\r\n\t\treturn 'front page';\r\n\t}\r\n\r\n\tif ( suggestion.isBlogHome ) {\r\n\t\treturn 'blog home';\r\n\t}\r\n\r\n\t// Rename 'post_tag' to 'tag'. Ideally, the API would return the localised CPT or taxonomy label.\r\n\treturn suggestion.type === 'post_tag' ? 'tag' : suggestion.type;\r\n}\r\n\r\nexport default LinkControlSearchItem;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { __ } from '@wordpress/i18n';\r\n\r\n// Used as a unique identifier for the \"Create\" option within search results.\r\n// Used to help distinguish the \"Create\" suggestion within the search results in\r\n// order to handle it as a unique case.\r\nexport const CREATE_TYPE = '__CREATE__';\r\nexport const TEL_TYPE = 'tel';\r\nexport const URL_TYPE = 'link';\r\nexport const MAILTO_TYPE = 'mailto';\r\nexport const INTERNAL_TYPE = 'internal';\r\n\r\nexport const LINK_ENTRY_TYPES = [\r\n\tURL_TYPE,\r\n\tMAILTO_TYPE,\r\n\tTEL_TYPE,\r\n\tINTERNAL_TYPE,\r\n];\r\n\r\nexport const DEFAULT_LINK_SETTINGS = [\r\n\t{\r\n\t\tid: 'opensInNewTab',\r\n\t\ttitle: __( 'Open in new tab' ),\r\n\t},\r\n];\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { __, sprintf } from '@wordpress/i18n';\r\nimport { VisuallyHidden, MenuGroup } from '@wordpress/components';\r\n\r\n/**\r\n * External dependencies\r\n */\r\nimport classnames from 'classnames';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport LinkControlSearchCreate from './search-create-button';\r\nimport LinkControlSearchItem from './search-item';\r\nimport { CREATE_TYPE, LINK_ENTRY_TYPES } from './constants';\r\n\r\nexport default function LinkControlSearchResults( {\r\n\tinstanceId,\r\n\twithCreateSuggestion,\r\n\tcurrentInputValue,\r\n\thandleSuggestionClick,\r\n\tsuggestionsListProps,\r\n\tbuildSuggestionItemProps,\r\n\tsuggestions,\r\n\tselectedSuggestion,\r\n\tisLoading,\r\n\tisInitialSuggestions,\r\n\tcreateSuggestionButtonText,\r\n\tsuggestionsQuery,\r\n} ) {\r\n\tconst resultsListClasses = classnames(\r\n\t\t'block-editor-link-control__search-results',\r\n\t\t{\r\n\t\t\t'is-loading': isLoading,\r\n\t\t}\r\n\t);\r\n\r\n\tconst isSingleDirectEntryResult =\r\n\t\tsuggestions.length === 1 &&\r\n\t\tLINK_ENTRY_TYPES.includes( suggestions[ 0 ].type );\r\n\tconst shouldShowCreateSuggestion =\r\n\t\twithCreateSuggestion &&\r\n\t\t! isSingleDirectEntryResult &&\r\n\t\t! isInitialSuggestions;\r\n\t// If the query has a specified type, then we can skip showing them in the result. See #24839.\r\n\tconst shouldShowSuggestionsTypes = ! suggestionsQuery?.type;\r\n\r\n\t// According to guidelines aria-label should be added if the label\r\n\t// itself is not visible.\r\n\t// See: https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles/listbox_role\r\n\tconst searchResultsLabelId = `block-editor-link-control-search-results-label-${ instanceId }`;\r\n\tconst labelText = isInitialSuggestions\r\n\t\t? __( 'Suggestions' )\r\n\t\t: sprintf(\r\n\t\t\t\t/* translators: %s: search term. */\r\n\t\t\t\t__( 'Search results for \"%s\"' ),\r\n\t\t\t\tcurrentInputValue\r\n\t\t  );\r\n\tconst searchResultsLabel = (\r\n\t\t<VisuallyHidden id={ searchResultsLabelId }>\r\n\t\t\t{ labelText }\r\n\t\t</VisuallyHidden>\r\n\t);\r\n\r\n\treturn (\r\n\t\t<div className=\"block-editor-link-control__search-results-wrapper\">\r\n\t\t\t{ searchResultsLabel }\r\n\t\t\t<div\r\n\t\t\t\t{ ...suggestionsListProps }\r\n\t\t\t\tclassName={ resultsListClasses }\r\n\t\t\t\taria-labelledby={ searchResultsLabelId }\r\n\t\t\t>\r\n\t\t\t\t<MenuGroup>\r\n\t\t\t\t\t{ suggestions.map( ( suggestion, index ) => {\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tshouldShowCreateSuggestion &&\r\n\t\t\t\t\t\t\tCREATE_TYPE === suggestion.type\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<LinkControlSearchCreate\r\n\t\t\t\t\t\t\t\t\tsearchTerm={ currentInputValue }\r\n\t\t\t\t\t\t\t\t\tbuttonText={ createSuggestionButtonText }\r\n\t\t\t\t\t\t\t\t\tonClick={ () =>\r\n\t\t\t\t\t\t\t\t\t\thandleSuggestionClick( suggestion )\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t// Intentionally only using `type` here as\r\n\t\t\t\t\t\t\t\t\t// the constant is enough to uniquely\r\n\t\t\t\t\t\t\t\t\t// identify the single \"CREATE\" suggestion.\r\n\t\t\t\t\t\t\t\t\tkey={ suggestion.type }\r\n\t\t\t\t\t\t\t\t\titemProps={ buildSuggestionItemProps(\r\n\t\t\t\t\t\t\t\t\t\tsuggestion,\r\n\t\t\t\t\t\t\t\t\t\tindex\r\n\t\t\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\t\t\tisSelected={ index === selectedSuggestion }\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// If we're not handling \"Create\" suggestions above then\r\n\t\t\t\t\t\t// we don't want them in the main results so exit early.\r\n\t\t\t\t\t\tif ( CREATE_TYPE === suggestion.type ) {\r\n\t\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<LinkControlSearchItem\r\n\t\t\t\t\t\t\t\tkey={ `${ suggestion.id }-${ suggestion.type }` }\r\n\t\t\t\t\t\t\t\titemProps={ buildSuggestionItemProps(\r\n\t\t\t\t\t\t\t\t\tsuggestion,\r\n\t\t\t\t\t\t\t\t\tindex\r\n\t\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\t\tsuggestion={ suggestion }\r\n\t\t\t\t\t\t\t\tindex={ index }\r\n\t\t\t\t\t\t\t\tonClick={ () => {\r\n\t\t\t\t\t\t\t\t\thandleSuggestionClick( suggestion );\r\n\t\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t\t\tisSelected={ index === selectedSuggestion }\r\n\t\t\t\t\t\t\t\tisURL={ LINK_ENTRY_TYPES.includes(\r\n\t\t\t\t\t\t\t\t\tsuggestion.type\r\n\t\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\t\tsearchTerm={ currentInputValue }\r\n\t\t\t\t\t\t\t\tshouldShowType={ shouldShowSuggestionsTypes }\r\n\t\t\t\t\t\t\t\tisFrontPage={ suggestion?.isFrontPage }\r\n\t\t\t\t\t\t\t\tisBlogHome={ suggestion?.isBlogHome }\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t} ) }\r\n\t\t\t\t</MenuGroup>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { getProtocol, isValidProtocol, isValidFragment } from '@wordpress/url';\r\n\r\n/**\r\n * Determines whether a given value could be a URL. Note this does not\r\n * guarantee the value is a URL only that it looks like it might be one. For\r\n * example, just because a string has `www.` in it doesn't make it a URL,\r\n * but it does make it highly likely that it will be so in the context of\r\n * creating a link it makes sense to treat it like one.\r\n *\r\n * @param {string} val the candidate for being URL-like (or not).\r\n *\r\n * @return {boolean} whether or not the value is potentially a URL.\r\n */\r\nexport default function isURLLike( val ) {\r\n\tconst hasSpaces = val.includes( ' ' );\r\n\r\n\tif ( hasSpaces ) {\r\n\t\treturn false;\r\n\t}\r\n\r\n\tconst protocol = getProtocol( val );\r\n\tconst protocolIsValid = isValidProtocol( protocol );\r\n\r\n\tconst mayBeTLD = hasPossibleTLD( val );\r\n\r\n\tconst isWWW = val?.startsWith( 'www.' );\r\n\r\n\tconst isInternal = val?.startsWith( '#' ) && isValidFragment( val );\r\n\r\n\treturn protocolIsValid || isWWW || isInternal || mayBeTLD;\r\n}\r\n\r\n/**\r\n * Checks if a given URL has a valid Top-Level Domain (TLD).\r\n *\r\n * @param {string} url       - The URL to check.\r\n * @param {number} maxLength - The maximum length of the TLD.\r\n * @return {boolean} Returns true if the URL has a valid TLD, false otherwise.\r\n */\r\nfunction hasPossibleTLD( url, maxLength = 6 ) {\r\n\t// Clean the URL by removing anything after the first occurrence of \"?\" or \"#\".\r\n\tconst cleanedURL = url.split( /[?#]/ )[ 0 ];\r\n\r\n\t// Regular expression explanation:\r\n\t// - (?<=\\S)                  : Positive lookbehind assertion to ensure there is at least one non-whitespace character before the TLD\r\n\t// - \\.                       : Matches a literal dot (.)\r\n\t// - [a-zA-Z_]{2,maxLength}   : Matches 2 to maxLength letters or underscores, representing the TLD\r\n\t// - (?:\\/|$)                 : Non-capturing group that matches either a forward slash (/) or the end of the string\r\n\tconst regex = new RegExp(\r\n\t\t`(?<=\\\\S)\\\\.(?:[a-zA-Z_]{2,${ maxLength }})(?:\\\\/|$)`\r\n\t);\r\n\r\n\treturn regex.test( cleanedURL );\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { getProtocol, prependHTTP } from '@wordpress/url';\r\nimport { useCallback } from '@wordpress/element';\r\nimport { useSelect } from '@wordpress/data';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport isURLLike from './is-url-like';\r\nimport {\r\n\tCREATE_TYPE,\r\n\tTEL_TYPE,\r\n\tMAILTO_TYPE,\r\n\tINTERNAL_TYPE,\r\n\tURL_TYPE,\r\n} from './constants';\r\nimport { store as blockEditorStore } from '../../store';\r\n\r\nexport const handleNoop = () => Promise.resolve( [] );\r\n\r\nexport const handleDirectEntry = ( val ) => {\r\n\tlet type = URL_TYPE;\r\n\r\n\tconst protocol = getProtocol( val ) || '';\r\n\r\n\tif ( protocol.includes( 'mailto' ) ) {\r\n\t\ttype = MAILTO_TYPE;\r\n\t}\r\n\r\n\tif ( protocol.includes( 'tel' ) ) {\r\n\t\ttype = TEL_TYPE;\r\n\t}\r\n\r\n\tif ( val?.startsWith( '#' ) ) {\r\n\t\ttype = INTERNAL_TYPE;\r\n\t}\r\n\r\n\treturn Promise.resolve( [\r\n\t\t{\r\n\t\t\tid: val,\r\n\t\t\ttitle: val,\r\n\t\t\turl: type === 'URL' ? prependHTTP( val ) : val,\r\n\t\t\ttype,\r\n\t\t},\r\n\t] );\r\n};\r\n\r\nconst handleEntitySearch = async (\r\n\tval,\r\n\tsuggestionsQuery,\r\n\tfetchSearchSuggestions,\r\n\twithCreateSuggestion,\r\n\tpageOnFront,\r\n\tpageForPosts\r\n) => {\r\n\tconst { isInitialSuggestions } = suggestionsQuery;\r\n\r\n\tconst results = await fetchSearchSuggestions( val, suggestionsQuery );\r\n\r\n\t// Identify front page and update type to match.\r\n\tresults.map( ( result ) => {\r\n\t\tif ( Number( result.id ) === pageOnFront ) {\r\n\t\t\tresult.isFrontPage = true;\r\n\t\t\treturn result;\r\n\t\t} else if ( Number( result.id ) === pageForPosts ) {\r\n\t\t\tresult.isBlogHome = true;\r\n\t\t\treturn result;\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t} );\r\n\r\n\t// If displaying initial suggestions just return plain results.\r\n\tif ( isInitialSuggestions ) {\r\n\t\treturn results;\r\n\t}\r\n\r\n\t// Here we append a faux suggestion to represent a \"CREATE\" option. This\r\n\t// is detected in the rendering of the search results and handled as a\r\n\t// special case. This is currently necessary because the suggestions\r\n\t// dropdown will only appear if there are valid suggestions and\r\n\t// therefore unless the create option is a suggestion it will not\r\n\t// display in scenarios where there are no results returned from the\r\n\t// API. In addition promoting CREATE to a first class suggestion affords\r\n\t// the a11y benefits afforded by `URLInput` to all suggestions (eg:\r\n\t// keyboard handling, ARIA roles...etc).\r\n\t//\r\n\t// Note also that the value of the `title` and `url` properties must correspond\r\n\t// to the text value of the `<input>`. This is because `title` is used\r\n\t// when creating the suggestion. Similarly `url` is used when using keyboard to select\r\n\t// the suggestion (the <form> `onSubmit` handler falls-back to `url`).\r\n\treturn isURLLike( val ) || ! withCreateSuggestion\r\n\t\t? results\r\n\t\t: results.concat( {\r\n\t\t\t\t// the `id` prop is intentionally ommitted here because it\r\n\t\t\t\t// is never exposed as part of the component's public API.\r\n\t\t\t\t// see: https://github.com/WordPress/gutenberg/pull/19775#discussion_r378931316.\r\n\t\t\t\ttitle: val, // Must match the existing `<input>`s text value.\r\n\t\t\t\turl: val, // Must match the existing `<input>`s text value.\r\n\t\t\t\ttype: CREATE_TYPE,\r\n\t\t  } );\r\n};\r\n\r\nexport default function useSearchHandler(\r\n\tsuggestionsQuery,\r\n\tallowDirectEntry,\r\n\twithCreateSuggestion\r\n) {\r\n\tconst { fetchSearchSuggestions, pageOnFront, pageForPosts } = useSelect(\r\n\t\t( select ) => {\r\n\t\t\tconst { getSettings } = select( blockEditorStore );\r\n\r\n\t\t\treturn {\r\n\t\t\t\tpageOnFront: getSettings().pageOnFront,\r\n\t\t\t\tpageForPosts: getSettings().pageForPosts,\r\n\t\t\t\tfetchSearchSuggestions:\r\n\t\t\t\t\tgetSettings().__experimentalFetchLinkSuggestions,\r\n\t\t\t};\r\n\t\t},\r\n\t\t[]\r\n\t);\r\n\r\n\tconst directEntryHandler = allowDirectEntry\r\n\t\t? handleDirectEntry\r\n\t\t: handleNoop;\r\n\r\n\treturn useCallback(\r\n\t\t( val, { isInitialSuggestions } ) => {\r\n\t\t\treturn isURLLike( val )\r\n\t\t\t\t? directEntryHandler( val, { isInitialSuggestions } )\r\n\t\t\t\t: handleEntitySearch(\r\n\t\t\t\t\t\tval,\r\n\t\t\t\t\t\t{ ...suggestionsQuery, isInitialSuggestions },\r\n\t\t\t\t\t\tfetchSearchSuggestions,\r\n\t\t\t\t\t\twithCreateSuggestion,\r\n\t\t\t\t\t\tpageOnFront,\r\n\t\t\t\t\t\tpageForPosts\r\n\t\t\t\t  );\r\n\t\t},\r\n\t\t[\r\n\t\t\tdirectEntryHandler,\r\n\t\t\tfetchSearchSuggestions,\r\n\t\t\tpageOnFront,\r\n\t\t\tpageForPosts,\r\n\t\t\tsuggestionsQuery,\r\n\t\t\twithCreateSuggestion,\r\n\t\t]\r\n\t);\r\n}\r\n","/**\n * WordPress dependencies\n */\nimport { useInstanceId } from '@wordpress/compose';\nimport { forwardRef, useState } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { URLInput } from '../';\nimport LinkControlSearchResults from './search-results';\nimport { CREATE_TYPE } from './constants';\nimport useSearchHandler from './use-search-handler';\n\n// Must be a function as otherwise URLInput will default\n// to the fetchLinkSuggestions passed in block editor settings\n// which will cause an unintended http request.\nconst noopSearchHandler = () => Promise.resolve( [] );\n\nconst noop = () => {};\n\nconst LinkControlSearchInput = forwardRef(\n\t(\n\t\t{\n\t\t\tvalue,\n\t\t\tchildren,\n\t\t\tcurrentLink = {},\n\t\t\tclassName = null,\n\t\t\tplaceholder = null,\n\t\t\twithCreateSuggestion = false,\n\t\t\tonCreateSuggestion = noop,\n\t\t\tonChange = noop,\n\t\t\tonSelect = noop,\n\t\t\tshowSuggestions = true,\n\t\t\trenderSuggestions = ( props ) => (\n\t\t\t\t<LinkControlSearchResults { ...props } />\n\t\t\t),\n\t\t\tfetchSuggestions = null,\n\t\t\tallowDirectEntry = true,\n\t\t\tshowInitialSuggestions = false,\n\t\t\tsuggestionsQuery = {},\n\t\t\twithURLSuggestion = true,\n\t\t\tcreateSuggestionButtonText,\n\t\t\thideLabelFromVision = false,\n\t\t},\n\t\tref\n\t) => {\n\t\tconst genericSearchHandler = useSearchHandler(\n\t\t\tsuggestionsQuery,\n\t\t\tallowDirectEntry,\n\t\t\twithCreateSuggestion,\n\t\t\twithURLSuggestion\n\t\t);\n\n\t\tconst searchHandler = showSuggestions\n\t\t\t? fetchSuggestions || genericSearchHandler\n\t\t\t: noopSearchHandler;\n\n\t\tconst instanceId = useInstanceId( LinkControlSearchInput );\n\t\tconst [ focusedSuggestion, setFocusedSuggestion ] = useState();\n\n\t\t/**\n\t\t * Handles the user moving between different suggestions. Does not handle\n\t\t * choosing an individual item.\n\t\t *\n\t\t * @param {string} selection  the url of the selected suggestion.\n\t\t * @param {Object} suggestion the suggestion object.\n\t\t */\n\t\tconst onInputChange = ( selection, suggestion ) => {\n\t\t\tonChange( selection );\n\t\t\tsetFocusedSuggestion( suggestion );\n\t\t};\n\n\t\tconst handleRenderSuggestions = ( props ) =>\n\t\t\trenderSuggestions( {\n\t\t\t\t...props,\n\t\t\t\tinstanceId,\n\t\t\t\twithCreateSuggestion,\n\t\t\t\tcreateSuggestionButtonText,\n\t\t\t\tsuggestionsQuery,\n\t\t\t\thandleSuggestionClick: ( suggestion ) => {\n\t\t\t\t\tif ( props.handleSuggestionClick ) {\n\t\t\t\t\t\tprops.handleSuggestionClick( suggestion );\n\t\t\t\t\t}\n\t\t\t\t\tonSuggestionSelected( suggestion );\n\t\t\t\t},\n\t\t\t} );\n\n\t\tconst onSuggestionSelected = async ( selectedSuggestion ) => {\n\t\t\tlet suggestion = selectedSuggestion;\n\t\t\tif ( CREATE_TYPE === selectedSuggestion.type ) {\n\t\t\t\t// Create a new page and call onSelect with the output from the onCreateSuggestion callback.\n\t\t\t\ttry {\n\t\t\t\t\tsuggestion = await onCreateSuggestion(\n\t\t\t\t\t\tselectedSuggestion.title\n\t\t\t\t\t);\n\t\t\t\t\tif ( suggestion?.url ) {\n\t\t\t\t\t\tonSelect( suggestion );\n\t\t\t\t\t}\n\t\t\t\t} catch ( e ) {}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tallowDirectEntry ||\n\t\t\t\t( suggestion && Object.keys( suggestion ).length >= 1 )\n\t\t\t) {\n\t\t\t\tconst { id, url, ...restLinkProps } = currentLink ?? {};\n\t\t\t\tonSelect(\n\t\t\t\t\t// Some direct entries don't have types or IDs, and we still need to clear the previous ones.\n\t\t\t\t\t{ ...restLinkProps, ...suggestion },\n\t\t\t\t\tsuggestion\n\t\t\t\t);\n\t\t\t}\n\t\t};\n\n\t\treturn (\n\t\t\t<div className=\"block-editor-link-control__search-input-container\">\n\t\t\t\t<URLInput\n\t\t\t\t\tdisableSuggestions={ currentLink?.url === value }\n\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\tlabel={ __( 'Link' ) }\n\t\t\t\t\thideLabelFromVision={ hideLabelFromVision }\n\t\t\t\t\tclassName={ className }\n\t\t\t\t\tvalue={ value }\n\t\t\t\t\tonChange={ onInputChange }\n\t\t\t\t\tplaceholder={ placeholder ?? __( 'Search or type url' ) }\n\t\t\t\t\t__experimentalRenderSuggestions={\n\t\t\t\t\t\tshowSuggestions ? handleRenderSuggestions : null\n\t\t\t\t\t}\n\t\t\t\t\t__experimentalFetchLinkSuggestions={ searchHandler }\n\t\t\t\t\t__experimentalHandleURLSuggestions\n\t\t\t\t\t__experimentalShowInitialSuggestions={\n\t\t\t\t\t\tshowInitialSuggestions\n\t\t\t\t\t}\n\t\t\t\t\tonSubmit={ ( suggestion, event ) => {\n\t\t\t\t\t\tconst hasSuggestion = suggestion || focusedSuggestion;\n\n\t\t\t\t\t\t// If there is no suggestion and the value (ie: any manually entered URL) is empty\n\t\t\t\t\t\t// then don't allow submission otherwise we get empty links.\n\t\t\t\t\t\tif ( ! hasSuggestion && ! value?.trim()?.length ) {\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tonSuggestionSelected(\n\t\t\t\t\t\t\t\thasSuggestion || { url: value }\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t} }\n\t\t\t\t\tref={ ref }\n\t\t\t\t/>\n\t\t\t\t{ children }\n\t\t\t</div>\n\t\t);\n\t}\n);\n\nexport default LinkControlSearchInput;\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst info = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M12 3.2c-4.8 0-8.8 3.9-8.8 8.8 0 4.8 3.9 8.8 8.8 8.8 4.8 0 8.8-3.9 8.8-8.8 0-4.8-4-8.8-8.8-8.8zm0 16c-4 0-7.2-3.3-7.2-7.2C4.8 8 8 4.8 12 4.8s7.2 3.3 7.2 7.2c0 4-3.2 7.2-7.2 7.2zM11 17h2v-6h-2v6zm0-8h2V7h-2v2z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default info;\r\n","/**\r\n * Internal dependencies\r\n */\r\n\r\nimport { default as pencil } from './pencil';\r\nexport default pencil;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst pencil = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"m19 7-3-3-8.5 8.5-1 4 4-1L19 7Zm-7 11.5H5V20h7v-1.5Z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default pencil;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst linkOff = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M17.031 4.703 15.576 4l-1.56 3H14v.03l-2.324 4.47H9.5V13h1.396l-1.502 2.889h-.95a3.694 3.694 0 0 1 0-7.389H10V7H8.444a5.194 5.194 0 1 0 0 10.389h.17L7.5 19.53l1.416.719L15.049 8.5h.507a3.694 3.694 0 0 1 0 7.39H14v1.5h1.556a5.194 5.194 0 0 0 .273-10.383l1.202-2.304Z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default linkOff;\r\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst copySmall = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n\t\t<Path\n\t\t\tfillRule=\"evenodd\"\n\t\t\tclipRule=\"evenodd\"\n\t\t\td=\"M5.625 5.5h9.75c.069 0 .125.056.125.125v9.75a.125.125 0 0 1-.125.125h-9.75a.125.125 0 0 1-.125-.125v-9.75c0-.069.056-.125.125-.125ZM4 5.625C4 4.728 4.728 4 5.625 4h9.75C16.273 4 17 4.728 17 5.625v9.75c0 .898-.727 1.625-1.625 1.625h-9.75A1.625 1.625 0 0 1 4 15.375v-9.75Zm14.5 11.656v-9H20v9C20 18.8 18.77 20 17.251 20H6.25v-1.5h11.001c.69 0 1.249-.528 1.249-1.219Z\"\n\t\t/>\n\t</SVG>\n);\n\nexport default copySmall;\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { createSlotFill } from '@wordpress/components';\r\n\r\nconst { Slot: ViewerSlot, Fill: ViewerFill } = createSlotFill(\r\n\t'BlockEditorLinkControlViewer'\r\n);\r\n\r\nexport { ViewerSlot, ViewerFill };\r\nexport default ViewerSlot;\r\n","/**\r\n * Internal dependencies\r\n */\r\nimport { store as blockEditorStore } from '../../store';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { useSelect } from '@wordpress/data';\r\nimport { useEffect, useReducer } from '@wordpress/element';\r\n\r\nfunction reducer( state, action ) {\r\n\tswitch ( action.type ) {\r\n\t\tcase 'RESOLVED':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tisFetching: false,\r\n\t\t\t\trichData: action.richData,\r\n\t\t\t};\r\n\t\tcase 'ERROR':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tisFetching: false,\r\n\t\t\t\trichData: null,\r\n\t\t\t};\r\n\t\tcase 'LOADING':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tisFetching: true,\r\n\t\t\t};\r\n\t\tdefault:\r\n\t\t\tthrow new Error( `Unexpected action type ${ action.type }` );\r\n\t}\r\n}\r\n\r\nfunction useRemoteUrlData( url ) {\r\n\tconst [ state, dispatch ] = useReducer( reducer, {\r\n\t\trichData: null,\r\n\t\tisFetching: false,\r\n\t} );\r\n\r\n\tconst { fetchRichUrlData } = useSelect( ( select ) => {\r\n\t\tconst { getSettings } = select( blockEditorStore );\r\n\t\treturn {\r\n\t\t\tfetchRichUrlData: getSettings().__experimentalFetchRichUrlData,\r\n\t\t};\r\n\t}, [] );\r\n\r\n\tuseEffect( () => {\r\n\t\t// Only make the request if we have an actual URL\r\n\t\t// and the fetching util is available. In some editors\r\n\t\t// there may not be such a util.\r\n\t\tif (\r\n\t\t\turl?.length &&\r\n\t\t\tfetchRichUrlData &&\r\n\t\t\ttypeof AbortController !== 'undefined'\r\n\t\t) {\r\n\t\t\tdispatch( {\r\n\t\t\t\ttype: 'LOADING',\r\n\t\t\t} );\r\n\r\n\t\t\tconst controller = new window.AbortController();\r\n\r\n\t\t\tconst signal = controller.signal;\r\n\r\n\t\t\tfetchRichUrlData( url, {\r\n\t\t\t\tsignal,\r\n\t\t\t} )\r\n\t\t\t\t.then( ( urlData ) => {\r\n\t\t\t\t\tdispatch( {\r\n\t\t\t\t\t\ttype: 'RESOLVED',\r\n\t\t\t\t\t\trichData: urlData,\r\n\t\t\t\t\t} );\r\n\t\t\t\t} )\r\n\t\t\t\t.catch( () => {\r\n\t\t\t\t\t// Avoid setting state on unmounted component\r\n\t\t\t\t\tif ( ! signal.aborted ) {\r\n\t\t\t\t\t\tdispatch( {\r\n\t\t\t\t\t\t\ttype: 'ERROR',\r\n\t\t\t\t\t\t} );\r\n\t\t\t\t\t}\r\n\t\t\t\t} );\r\n\t\t\t// Cleanup: when the URL changes the abort the current request.\r\n\t\t\treturn () => {\r\n\t\t\t\tcontroller.abort();\r\n\t\t\t};\r\n\t\t}\r\n\t}, [ url ] );\r\n\r\n\treturn state;\r\n}\r\n\r\nexport default useRemoteUrlData;\r\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { __, sprintf } from '@wordpress/i18n';\nimport {\n\tButton,\n\tExternalLink,\n\t__experimentalTruncate as Truncate,\n} from '@wordpress/components';\nimport { useCopyToClipboard } from '@wordpress/compose';\nimport { filterURLForDisplay, safeDecodeURI } from '@wordpress/url';\nimport { Icon, globe, info, linkOff, edit, copySmall } from '@wordpress/icons';\nimport { __unstableStripHTML as stripHTML } from '@wordpress/dom';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { store as noticesStore } from '@wordpress/notices';\nimport { store as preferencesStore } from '@wordpress/preferences';\n\n/**\n * Internal dependencies\n */\nimport { ViewerSlot } from './viewer-slot';\n\nimport useRichUrlData from './use-rich-url-data';\n\nexport default function LinkPreview( {\n\tvalue,\n\tonEditClick,\n\thasRichPreviews = false,\n\thasUnlinkControl = false,\n\tonRemove,\n} ) {\n\tconst showIconLabels = useSelect(\n\t\t( select ) =>\n\t\t\tselect( preferencesStore ).get( 'core', 'showIconLabels' ),\n\t\t[]\n\t);\n\n\t// Avoid fetching if rich previews are not desired.\n\tconst showRichPreviews = hasRichPreviews ? value?.url : null;\n\n\tconst { richData, isFetching } = useRichUrlData( showRichPreviews );\n\n\t// Rich data may be an empty object so test for that.\n\tconst hasRichData = richData && Object.keys( richData ).length;\n\n\tconst displayURL =\n\t\t( value && filterURLForDisplay( safeDecodeURI( value.url ), 24 ) ) ||\n\t\t'';\n\n\t// url can be undefined if the href attribute is unset\n\tconst isEmptyURL = ! value?.url?.length;\n\n\tconst displayTitle =\n\t\t! isEmptyURL &&\n\t\tstripHTML( richData?.title || value?.title || displayURL );\n\n\tlet icon;\n\n\tif ( richData?.icon ) {\n\t\ticon = <img src={ richData?.icon } alt=\"\" />;\n\t} else if ( isEmptyURL ) {\n\t\ticon = <Icon icon={ info } size={ 32 } />;\n\t} else {\n\t\ticon = <Icon icon={ globe } />;\n\t}\n\n\tconst { createNotice } = useDispatch( noticesStore );\n\tconst ref = useCopyToClipboard( value.url, () => {\n\t\tcreateNotice( 'info', __( 'Link copied to clipboard.' ), {\n\t\t\tisDismissible: true,\n\t\t\ttype: 'snackbar',\n\t\t} );\n\t} );\n\n\treturn (\n\t\t<div\n\t\t\taria-label={ __( 'Currently selected' ) }\n\t\t\tclassName={ classnames( 'block-editor-link-control__search-item', {\n\t\t\t\t'is-current': true,\n\t\t\t\t'is-rich': hasRichData,\n\t\t\t\t'is-fetching': !! isFetching,\n\t\t\t\t'is-preview': true,\n\t\t\t\t'is-error': isEmptyURL,\n\t\t\t\t'is-url-title': displayTitle === displayURL,\n\t\t\t} ) }\n\t\t>\n\t\t\t<div className=\"block-editor-link-control__search-item-top\">\n\t\t\t\t<span className=\"block-editor-link-control__search-item-header\">\n\t\t\t\t\t<span\n\t\t\t\t\t\tclassName={ classnames(\n\t\t\t\t\t\t\t'block-editor-link-control__search-item-icon',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t'is-image': richData?.icon,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t) }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ icon }\n\t\t\t\t\t</span>\n\t\t\t\t\t<span className=\"block-editor-link-control__search-item-details\">\n\t\t\t\t\t\t{ ! isEmptyURL ? (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<ExternalLink\n\t\t\t\t\t\t\t\t\tclassName=\"block-editor-link-control__search-item-title\"\n\t\t\t\t\t\t\t\t\thref={ value.url }\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Truncate numberOfLines={ 1 }>\n\t\t\t\t\t\t\t\t\t\t{ displayTitle }\n\t\t\t\t\t\t\t\t\t</Truncate>\n\t\t\t\t\t\t\t\t</ExternalLink>\n\t\t\t\t\t\t\t\t{ value?.url && displayTitle !== displayURL && (\n\t\t\t\t\t\t\t\t\t<span className=\"block-editor-link-control__search-item-info\">\n\t\t\t\t\t\t\t\t\t\t<Truncate numberOfLines={ 1 }>\n\t\t\t\t\t\t\t\t\t\t\t{ displayURL }\n\t\t\t\t\t\t\t\t\t\t</Truncate>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<span className=\"block-editor-link-control__search-item-error-notice\">\n\t\t\t\t\t\t\t\t{ __( 'Link is empty' ) }\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</span>\n\t\t\t\t</span>\n\t\t\t\t<Button\n\t\t\t\t\ticon={ edit }\n\t\t\t\t\tlabel={ __( 'Edit link' ) }\n\t\t\t\t\tonClick={ onEditClick }\n\t\t\t\t\tsize=\"compact\"\n\t\t\t\t/>\n\t\t\t\t{ hasUnlinkControl && (\n\t\t\t\t\t<Button\n\t\t\t\t\t\ticon={ linkOff }\n\t\t\t\t\t\tlabel={ __( 'Remove link' ) }\n\t\t\t\t\t\tonClick={ onRemove }\n\t\t\t\t\t\tsize=\"compact\"\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t<Button\n\t\t\t\t\ticon={ copySmall }\n\t\t\t\t\tlabel={ sprintf(\n\t\t\t\t\t\t// Translators: %s is a placeholder for the link URL and an optional colon, (if a Link URL is present).\n\t\t\t\t\t\t__( 'Copy link%s' ), // Ends up looking like \"Copy link: https://example.com\".\n\t\t\t\t\t\tisEmptyURL || showIconLabels ? '' : ': ' + value.url\n\t\t\t\t\t) }\n\t\t\t\t\tref={ ref }\n\t\t\t\t\tdisabled={ isEmptyURL }\n\t\t\t\t\tsize=\"compact\"\n\t\t\t\t/>\n\t\t\t\t<ViewerSlot fillProps={ value } />\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { __ } from '@wordpress/i18n';\r\nimport { CheckboxControl, VisuallyHidden } from '@wordpress/components';\r\n\r\nconst noop = () => {};\r\n\r\nconst LinkControlSettings = ( { value, onChange = noop, settings } ) => {\r\n\tif ( ! settings || ! settings.length ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tconst handleSettingChange = ( setting ) => ( newValue ) => {\r\n\t\tonChange( {\r\n\t\t\t...value,\r\n\t\t\t[ setting.id ]: newValue,\r\n\t\t} );\r\n\t};\r\n\r\n\tconst theSettings = settings.map( ( setting ) => (\r\n\t\t<CheckboxControl\r\n\t\t\t__nextHasNoMarginBottom\r\n\t\t\tclassName=\"block-editor-link-control__setting\"\r\n\t\t\tkey={ setting.id }\r\n\t\t\tlabel={ setting.title }\r\n\t\t\tonChange={ handleSettingChange( setting ) }\r\n\t\t\tchecked={ value ? !! value[ setting.id ] : false }\r\n\t\t\thelp={ setting?.help }\r\n\t\t/>\r\n\t) );\r\n\r\n\treturn (\r\n\t\t<fieldset className=\"block-editor-link-control__settings\">\r\n\t\t\t<VisuallyHidden as=\"legend\">\r\n\t\t\t\t{ __( 'Currently selected link settings' ) }\r\n\t\t\t</VisuallyHidden>\r\n\t\t\t{ theSettings }\r\n\t\t</fieldset>\r\n\t);\r\n};\r\n\r\nexport default LinkControlSettings;\r\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tButton,\n\tSpinner,\n\tNotice,\n\tTextControl,\n\t__experimentalHStack as HStack,\n} from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { useRef, useState, useEffect } from '@wordpress/element';\nimport { focus } from '@wordpress/dom';\nimport { ENTER } from '@wordpress/keycodes';\nimport { isShallowEqualObjects } from '@wordpress/is-shallow-equal';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { store as preferencesStore } from '@wordpress/preferences';\nimport { keyboardReturn } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport LinkControlSettingsDrawer from './settings-drawer';\nimport LinkControlSearchInput from './search-input';\nimport LinkPreview from './link-preview';\nimport LinkSettings from './settings';\nimport useCreatePage from './use-create-page';\nimport useInternalValue from './use-internal-value';\nimport { ViewerFill } from './viewer-slot';\nimport { DEFAULT_LINK_SETTINGS } from './constants';\n\n/**\n * Default properties associated with a link control value.\n *\n * @typedef WPLinkControlDefaultValue\n *\n * @property {string}   url           Link URL.\n * @property {string=}  title         Link title.\n * @property {boolean=} opensInNewTab Whether link should open in a new browser\n *                                    tab. This value is only assigned if not\n *                                    providing a custom `settings` prop.\n */\n\n/* eslint-disable jsdoc/valid-types */\n/**\n * Custom settings values associated with a link.\n *\n * @typedef {{[setting:string]:any}} WPLinkControlSettingsValue\n */\n/* eslint-enable */\n\n/**\n * Custom settings values associated with a link.\n *\n * @typedef WPLinkControlSetting\n *\n * @property {string} id    Identifier to use as property for setting value.\n * @property {string} title Human-readable label to show in user interface.\n */\n\n/**\n * Properties associated with a link control value, composed as a union of the\n * default properties and any custom settings values.\n *\n * @typedef {WPLinkControlDefaultValue&WPLinkControlSettingsValue} WPLinkControlValue\n */\n\n/** @typedef {(nextValue:WPLinkControlValue)=>void} WPLinkControlOnChangeProp */\n\n/**\n * Properties associated with a search suggestion used within the LinkControl.\n *\n * @typedef WPLinkControlSuggestion\n *\n * @property {string} id    Identifier to use to uniquely identify the suggestion.\n * @property {string} type  Identifies the type of the suggestion (eg: `post`,\n *                          `page`, `url`...etc)\n * @property {string} title Human-readable label to show in user interface.\n * @property {string} url   A URL for the suggestion.\n */\n\n/** @typedef {(title:string)=>WPLinkControlSuggestion} WPLinkControlCreateSuggestionProp */\n\n/**\n * @typedef WPLinkControlProps\n *\n * @property {(WPLinkControlSetting[])=}  settings                   An array of settings objects. Each object will used to\n *                                                                   render a `ToggleControl` for that setting.\n * @property {boolean=}                   forceIsEditingLink         If passed as either `true` or `false`, controls the\n *                                                                   internal editing state of the component to respective\n *                                                                   show or not show the URL input field.\n * @property {WPLinkControlValue=}        value                      Current link value.\n * @property {WPLinkControlOnChangeProp=} onChange                   Value change handler, called with the updated value if\n *                                                                   the user selects a new link or updates settings.\n * @property {boolean=}                   noDirectEntry              Whether to allow turning a URL-like search query directly into a link.\n * @property {boolean=}                   showSuggestions            Whether to present suggestions when typing the URL.\n * @property {boolean=}                   showInitialSuggestions     Whether to present initial suggestions immediately.\n * @property {boolean=}                   withCreateSuggestion       Whether to allow creation of link value from suggestion.\n * @property {Object=}                    suggestionsQuery           Query parameters to pass along to wp.blockEditor.__experimentalFetchLinkSuggestions.\n * @property {boolean=}                   noURLSuggestion            Whether to add a fallback suggestion which treats the search query as a URL.\n * @property {boolean=}                   hasTextControl             Whether to add a text field to the UI to update the value.title.\n * @property {string|Function|undefined}  createSuggestionButtonText The text to use in the button that calls createSuggestion.\n * @property {Function}                   renderControlBottom        Optional controls to be rendered at the bottom of the component.\n */\n\nconst noop = () => {};\n\nconst PREFERENCE_SCOPE = 'core/block-editor';\nconst PREFERENCE_KEY = 'linkControlSettingsDrawer';\n\n/**\n * Renders a link control. A link control is a controlled input which maintains\n * a value associated with a link (HTML anchor element) and relevant settings\n * for how that link is expected to behave.\n *\n * @param {WPLinkControlProps} props Component props.\n */\nfunction LinkControl( {\n\tsearchInputPlaceholder,\n\tvalue,\n\tsettings = DEFAULT_LINK_SETTINGS,\n\tonChange = noop,\n\tonRemove,\n\tonCancel,\n\tnoDirectEntry = false,\n\tshowSuggestions = true,\n\tshowInitialSuggestions,\n\tforceIsEditingLink,\n\tcreateSuggestion,\n\twithCreateSuggestion,\n\tinputValue: propInputValue = '',\n\tsuggestionsQuery = {},\n\tnoURLSuggestion = false,\n\tcreateSuggestionButtonText,\n\thasRichPreviews = false,\n\thasTextControl = false,\n\trenderControlBottom = null,\n} ) {\n\tif ( withCreateSuggestion === undefined && createSuggestion ) {\n\t\twithCreateSuggestion = true;\n\t}\n\n\tconst [ settingsOpen, setSettingsOpen ] = useState( false );\n\n\tconst { advancedSettingsPreference } = useSelect( ( select ) => {\n\t\tconst prefsStore = select( preferencesStore );\n\n\t\treturn {\n\t\t\tadvancedSettingsPreference:\n\t\t\t\tprefsStore.get( PREFERENCE_SCOPE, PREFERENCE_KEY ) ?? false,\n\t\t};\n\t}, [] );\n\n\tconst { set: setPreference } = useDispatch( preferencesStore );\n\n\t/**\n\t * Sets the open/closed state of the Advanced Settings Drawer,\n\t * optionlly persisting the state to the user's preferences.\n\t *\n\t * Note that Block Editor components can be consumed by non-WordPress\n\t * environments which may not have preferences setup.\n\t * Therefore a local state is also  used as a fallback.\n\t *\n\t * @param {boolean} prefVal the open/closed state of the Advanced Settings Drawer.\n\t */\n\tconst setSettingsOpenWithPreference = ( prefVal ) => {\n\t\tif ( setPreference ) {\n\t\t\tsetPreference( PREFERENCE_SCOPE, PREFERENCE_KEY, prefVal );\n\t\t}\n\t\tsetSettingsOpen( prefVal );\n\t};\n\n\t// Block Editor components can be consumed by non-WordPress environments\n\t// which may not have these preferences setup.\n\t// Therefore a local state is used as a fallback.\n\tconst isSettingsOpen = advancedSettingsPreference || settingsOpen;\n\n\tconst isMounting = useRef( true );\n\tconst wrapperNode = useRef();\n\tconst textInputRef = useRef();\n\tconst isEndingEditWithFocus = useRef( false );\n\n\tconst settingsKeys = settings.map( ( { id } ) => id );\n\n\tconst [\n\t\tinternalControlValue,\n\t\tsetInternalControlValue,\n\t\tsetInternalURLInputValue,\n\t\tsetInternalTextInputValue,\n\t\tcreateSetInternalSettingValueHandler,\n\t] = useInternalValue( value );\n\n\tconst valueHasChanges =\n\t\tvalue && ! isShallowEqualObjects( internalControlValue, value );\n\n\tconst [ isEditingLink, setIsEditingLink ] = useState(\n\t\tforceIsEditingLink !== undefined\n\t\t\t? forceIsEditingLink\n\t\t\t: ! value || ! value.url\n\t);\n\n\tconst { createPage, isCreatingPage, errorMessage } =\n\t\tuseCreatePage( createSuggestion );\n\n\tuseEffect( () => {\n\t\tif ( forceIsEditingLink === undefined ) {\n\t\t\treturn;\n\t\t}\n\n\t\tsetIsEditingLink( forceIsEditingLink );\n\t}, [ forceIsEditingLink ] );\n\n\tuseEffect( () => {\n\t\t// We don't auto focus into the Link UI on mount\n\t\t// because otherwise using the keyboard to select text\n\t\t// *within* the link format is not possible.\n\t\tif ( isMounting.current ) {\n\t\t\tisMounting.current = false;\n\t\t\treturn;\n\t\t}\n\n\t\t// Scenario - when:\n\t\t// - switching between editable and non editable LinkControl\n\t\t// - clicking on a link\n\t\t// ...then move focus to the *first* element to avoid focus loss\n\t\t// and to ensure focus is *within* the Link UI.\n\t\tconst nextFocusTarget =\n\t\t\tfocus.focusable.find( wrapperNode.current )[ 0 ] ||\n\t\t\twrapperNode.current;\n\n\t\tnextFocusTarget.focus();\n\n\t\tisEndingEditWithFocus.current = false;\n\t}, [ isEditingLink, isCreatingPage ] );\n\n\tconst hasLinkValue = value?.url?.trim()?.length > 0;\n\n\t/**\n\t * Cancels editing state and marks that focus may need to be restored after\n\t * the next render, if focus was within the wrapper when editing finished.\n\t */\n\tconst stopEditing = () => {\n\t\tisEndingEditWithFocus.current = !! wrapperNode.current?.contains(\n\t\t\twrapperNode.current.ownerDocument.activeElement\n\t\t);\n\n\t\tsetIsEditingLink( false );\n\t};\n\n\tconst handleSelectSuggestion = ( updatedValue ) => {\n\t\t// Suggestions may contains \"settings\" values (e.g. `opensInNewTab`)\n\t\t// which should not overide any existing settings values set by the\n\t\t// user. This filters out any settings values from the suggestion.\n\t\tconst nonSettingsChanges = Object.keys( updatedValue ).reduce(\n\t\t\t( acc, key ) => {\n\t\t\t\tif ( ! settingsKeys.includes( key ) ) {\n\t\t\t\t\tacc[ key ] = updatedValue[ key ];\n\t\t\t\t}\n\t\t\t\treturn acc;\n\t\t\t},\n\t\t\t{}\n\t\t);\n\n\t\tonChange( {\n\t\t\t...internalControlValue,\n\t\t\t...nonSettingsChanges,\n\t\t\t// As title is not a setting, it must be manually applied\n\t\t\t// in such a way as to preserve the users changes over\n\t\t\t// any \"title\" value provided by the \"suggestion\".\n\t\t\ttitle: internalControlValue?.title || updatedValue?.title,\n\t\t} );\n\n\t\tstopEditing();\n\t};\n\n\tconst handleSubmit = () => {\n\t\tif ( valueHasChanges ) {\n\t\t\t// Submit the original value with new stored values applied\n\t\t\t// on top. URL is a special case as it may also be a prop.\n\t\t\tonChange( {\n\t\t\t\t...value,\n\t\t\t\t...internalControlValue,\n\t\t\t\turl: currentUrlInputValue,\n\t\t\t} );\n\t\t}\n\t\tstopEditing();\n\t};\n\n\tconst handleSubmitWithEnter = ( event ) => {\n\t\tconst { keyCode } = event;\n\n\t\tif (\n\t\t\tkeyCode === ENTER &&\n\t\t\t! currentInputIsEmpty // Disallow submitting empty values.\n\t\t) {\n\t\t\tevent.preventDefault();\n\t\t\thandleSubmit();\n\t\t}\n\t};\n\n\tconst resetInternalValues = () => {\n\t\tsetInternalControlValue( value );\n\t};\n\n\tconst handleCancel = ( event ) => {\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\t// Ensure that any unsubmitted input changes are reset.\n\t\tresetInternalValues();\n\n\t\tif ( hasLinkValue ) {\n\t\t\t// If there is a link then exist editing mode and show preview.\n\t\t\tstopEditing();\n\t\t} else {\n\t\t\t// If there is no link value, then remove the link entirely.\n\t\t\tonRemove?.();\n\t\t}\n\n\t\tonCancel?.();\n\t};\n\n\tconst currentUrlInputValue =\n\t\tpropInputValue || internalControlValue?.url || '';\n\n\tconst currentInputIsEmpty = ! currentUrlInputValue?.trim()?.length;\n\n\tconst shownUnlinkControl =\n\t\tonRemove && value && ! isEditingLink && ! isCreatingPage;\n\n\tconst showActions = isEditingLink && hasLinkValue;\n\n\t// Only show text control once a URL value has been committed\n\t// and it isn't just empty whitespace.\n\t// See https://github.com/WordPress/gutenberg/pull/33849/#issuecomment-932194927.\n\tconst showTextControl = hasLinkValue && hasTextControl;\n\n\tconst isEditing = ( isEditingLink || ! value ) && ! isCreatingPage;\n\tconst isDisabled = ! valueHasChanges || currentInputIsEmpty;\n\tconst showSettings = !! settings?.length && isEditingLink && hasLinkValue;\n\n\treturn (\n\t\t<div\n\t\t\ttabIndex={ -1 }\n\t\t\tref={ wrapperNode }\n\t\t\tclassName=\"block-editor-link-control\"\n\t\t>\n\t\t\t{ isCreatingPage && (\n\t\t\t\t<div className=\"block-editor-link-control__loading\">\n\t\t\t\t\t<Spinner /> { __( 'Creating' ) }\n\t\t\t\t</div>\n\t\t\t) }\n\n\t\t\t{ isEditing && (\n\t\t\t\t<>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={ classnames( {\n\t\t\t\t\t\t\t'block-editor-link-control__search-input-wrapper': true,\n\t\t\t\t\t\t\t'has-text-control': showTextControl,\n\t\t\t\t\t\t\t'has-actions': showActions,\n\t\t\t\t\t\t} ) }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ showTextControl && (\n\t\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\t\tref={ textInputRef }\n\t\t\t\t\t\t\t\tclassName=\"block-editor-link-control__field block-editor-link-control__text-content\"\n\t\t\t\t\t\t\t\tlabel={ __( 'Text' ) }\n\t\t\t\t\t\t\t\tvalue={ internalControlValue?.title }\n\t\t\t\t\t\t\t\tonChange={ setInternalTextInputValue }\n\t\t\t\t\t\t\t\tonKeyDown={ handleSubmitWithEnter }\n\t\t\t\t\t\t\t\tsize=\"__unstable-large\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t<LinkControlSearchInput\n\t\t\t\t\t\t\tcurrentLink={ value }\n\t\t\t\t\t\t\tclassName=\"block-editor-link-control__field block-editor-link-control__search-input\"\n\t\t\t\t\t\t\tplaceholder={ searchInputPlaceholder }\n\t\t\t\t\t\t\tvalue={ currentUrlInputValue }\n\t\t\t\t\t\t\twithCreateSuggestion={ withCreateSuggestion }\n\t\t\t\t\t\t\tonCreateSuggestion={ createPage }\n\t\t\t\t\t\t\tonChange={ setInternalURLInputValue }\n\t\t\t\t\t\t\tonSelect={ handleSelectSuggestion }\n\t\t\t\t\t\t\tshowInitialSuggestions={ showInitialSuggestions }\n\t\t\t\t\t\t\tallowDirectEntry={ ! noDirectEntry }\n\t\t\t\t\t\t\tshowSuggestions={ showSuggestions }\n\t\t\t\t\t\t\tsuggestionsQuery={ suggestionsQuery }\n\t\t\t\t\t\t\twithURLSuggestion={ ! noURLSuggestion }\n\t\t\t\t\t\t\tcreateSuggestionButtonText={\n\t\t\t\t\t\t\t\tcreateSuggestionButtonText\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\thideLabelFromVision={ ! showTextControl }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{ ! showActions && (\n\t\t\t\t\t\t\t<div className=\"block-editor-link-control__search-enter\">\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tonClick={ isDisabled ? noop : handleSubmit }\n\t\t\t\t\t\t\t\t\tlabel={ __( 'Submit' ) }\n\t\t\t\t\t\t\t\t\ticon={ keyboardReturn }\n\t\t\t\t\t\t\t\t\tclassName=\"block-editor-link-control__search-submit\"\n\t\t\t\t\t\t\t\t\taria-disabled={ isDisabled }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</div>\n\t\t\t\t\t{ errorMessage && (\n\t\t\t\t\t\t<Notice\n\t\t\t\t\t\t\tclassName=\"block-editor-link-control__search-error\"\n\t\t\t\t\t\t\tstatus=\"error\"\n\t\t\t\t\t\t\tisDismissible={ false }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ errorMessage }\n\t\t\t\t\t\t</Notice>\n\t\t\t\t\t) }\n\t\t\t\t</>\n\t\t\t) }\n\n\t\t\t{ value && ! isEditingLink && ! isCreatingPage && (\n\t\t\t\t<LinkPreview\n\t\t\t\t\tkey={ value?.url } // force remount when URL changes to avoid race conditions for rich previews\n\t\t\t\t\tvalue={ value }\n\t\t\t\t\tonEditClick={ () => setIsEditingLink( true ) }\n\t\t\t\t\thasRichPreviews={ hasRichPreviews }\n\t\t\t\t\thasUnlinkControl={ shownUnlinkControl }\n\t\t\t\t\tonRemove={ () => {\n\t\t\t\t\t\tonRemove();\n\t\t\t\t\t\tsetIsEditingLink( true );\n\t\t\t\t\t} }\n\t\t\t\t/>\n\t\t\t) }\n\n\t\t\t{ showSettings && (\n\t\t\t\t<div className=\"block-editor-link-control__tools\">\n\t\t\t\t\t{ ! currentInputIsEmpty && (\n\t\t\t\t\t\t<LinkControlSettingsDrawer\n\t\t\t\t\t\t\tsettingsOpen={ isSettingsOpen }\n\t\t\t\t\t\t\tsetSettingsOpen={ setSettingsOpenWithPreference }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<LinkSettings\n\t\t\t\t\t\t\t\tvalue={ internalControlValue }\n\t\t\t\t\t\t\t\tsettings={ settings }\n\t\t\t\t\t\t\t\tonChange={ createSetInternalSettingValueHandler(\n\t\t\t\t\t\t\t\t\tsettingsKeys\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</LinkControlSettingsDrawer>\n\t\t\t\t\t) }\n\t\t\t\t</div>\n\t\t\t) }\n\n\t\t\t{ showActions && (\n\t\t\t\t<HStack\n\t\t\t\t\tjustify=\"right\"\n\t\t\t\t\tclassName=\"block-editor-link-control__search-actions\"\n\t\t\t\t>\n\t\t\t\t\t<Button variant=\"tertiary\" onClick={ handleCancel }>\n\t\t\t\t\t\t{ __( 'Cancel' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t\tonClick={ isDisabled ? noop : handleSubmit }\n\t\t\t\t\t\tclassName=\"block-editor-link-control__search-submit\"\n\t\t\t\t\t\taria-disabled={ isDisabled }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Save' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t</HStack>\n\t\t\t) }\n\n\t\t\t{ ! isCreatingPage && renderControlBottom && renderControlBottom() }\n\t\t</div>\n\t);\n}\n\nLinkControl.ViewerFill = ViewerFill;\nLinkControl.DEFAULT_LINK_SETTINGS = DEFAULT_LINK_SETTINGS;\n\nexport default LinkControl;\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useState } from '@wordpress/element';\r\n\r\n/**\r\n * External dependencies\r\n */\r\nimport fastDeepEqual from 'fast-deep-equal';\r\n\r\nexport default function useInternalValue( value ) {\r\n\tconst [ internalValue, setInternalValue ] = useState( value || {} );\r\n\tconst [ previousValue, setPreviousValue ] = useState( value );\r\n\r\n\t// If the value prop changes, update the internal state.\r\n\t// See:\r\n\t// - https://github.com/WordPress/gutenberg/pull/51387#issuecomment-1722927384.\r\n\t// - https://react.dev/reference/react/useState#storing-information-from-previous-renders.\r\n\tif ( ! fastDeepEqual( value, previousValue ) ) {\r\n\t\tsetPreviousValue( value );\r\n\t\tsetInternalValue( value );\r\n\t}\r\n\r\n\tconst setInternalURLInputValue = ( nextValue ) => {\r\n\t\tsetInternalValue( {\r\n\t\t\t...internalValue,\r\n\t\t\turl: nextValue,\r\n\t\t} );\r\n\t};\r\n\r\n\tconst setInternalTextInputValue = ( nextValue ) => {\r\n\t\tsetInternalValue( {\r\n\t\t\t...internalValue,\r\n\t\t\ttitle: nextValue,\r\n\t\t} );\r\n\t};\r\n\r\n\tconst createSetInternalSettingValueHandler =\r\n\t\t( settingsKeys ) => ( nextValue ) => {\r\n\t\t\t// Only apply settings values which are defined in the settings prop.\r\n\t\t\tconst settingsUpdates = Object.keys( nextValue ).reduce(\r\n\t\t\t\t( acc, key ) => {\r\n\t\t\t\t\tif ( settingsKeys.includes( key ) ) {\r\n\t\t\t\t\t\tacc[ key ] = nextValue[ key ];\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn acc;\r\n\t\t\t\t},\r\n\t\t\t\t{}\r\n\t\t\t);\r\n\r\n\t\t\tsetInternalValue( {\r\n\t\t\t\t...internalValue,\r\n\t\t\t\t...settingsUpdates,\r\n\t\t\t} );\r\n\t\t};\r\n\r\n\treturn [\r\n\t\tinternalValue,\r\n\t\tsetInternalValue,\r\n\t\tsetInternalURLInputValue,\r\n\t\tsetInternalTextInputValue,\r\n\t\tcreateSetInternalSettingValueHandler,\r\n\t];\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { __ } from '@wordpress/i18n';\r\nimport { useEffect, useState, useRef } from '@wordpress/element';\r\n\r\nexport default function useCreatePage( handleCreatePage ) {\r\n\tconst cancelableCreateSuggestion = useRef();\r\n\tconst [ isCreatingPage, setIsCreatingPage ] = useState( false );\r\n\tconst [ errorMessage, setErrorMessage ] = useState( null );\r\n\r\n\tconst createPage = async function ( suggestionTitle ) {\r\n\t\tsetIsCreatingPage( true );\r\n\t\tsetErrorMessage( null );\r\n\r\n\t\ttry {\r\n\t\t\t// Make cancellable in order that we can avoid setting State\r\n\t\t\t// if the component unmounts during the call to `createSuggestion`\r\n\t\t\tcancelableCreateSuggestion.current = makeCancelable(\r\n\t\t\t\t// Using Promise.resolve to allow createSuggestion to return a\r\n\t\t\t\t// non-Promise based value.\r\n\t\t\t\tPromise.resolve( handleCreatePage( suggestionTitle ) )\r\n\t\t\t);\r\n\r\n\t\t\treturn await cancelableCreateSuggestion.current.promise;\r\n\t\t} catch ( error ) {\r\n\t\t\tif ( error && error.isCanceled ) {\r\n\t\t\t\treturn; // bail if canceled to avoid setting state\r\n\t\t\t}\r\n\r\n\t\t\tsetErrorMessage(\r\n\t\t\t\terror.message ||\r\n\t\t\t\t\t__(\r\n\t\t\t\t\t\t'An unknown error occurred during creation. Please try again.'\r\n\t\t\t\t\t)\r\n\t\t\t);\r\n\t\t\tthrow error;\r\n\t\t} finally {\r\n\t\t\tsetIsCreatingPage( false );\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Handles cancelling any pending Promises that have been made cancelable.\r\n\t */\r\n\tuseEffect( () => {\r\n\t\treturn () => {\r\n\t\t\t// componentDidUnmount\r\n\t\t\tif ( cancelableCreateSuggestion.current ) {\r\n\t\t\t\tcancelableCreateSuggestion.current.cancel();\r\n\t\t\t}\r\n\t\t};\r\n\t}, [] );\r\n\r\n\treturn {\r\n\t\tcreatePage,\r\n\t\tisCreatingPage,\r\n\t\terrorMessage,\r\n\t};\r\n}\r\n\r\n/**\r\n * Creates a wrapper around a promise which allows it to be programmatically\r\n * cancelled.\r\n * See: https://reactjs.org/blog/2015/12/16/ismounted-antipattern.html\r\n *\r\n * @param {Promise} promise the Promise to make cancelable\r\n */\r\nconst makeCancelable = ( promise ) => {\r\n\tlet hasCanceled_ = false;\r\n\r\n\tconst wrappedPromise = new Promise( ( resolve, reject ) => {\r\n\t\tpromise.then(\r\n\t\t\t( val ) =>\r\n\t\t\t\thasCanceled_ ? reject( { isCanceled: true } ) : resolve( val ),\r\n\t\t\t( error ) =>\r\n\t\t\t\thasCanceled_ ? reject( { isCanceled: true } ) : reject( error )\r\n\t\t);\r\n\t} );\r\n\r\n\treturn {\r\n\t\tpromise: wrappedPromise,\r\n\t\tcancel() {\r\n\t\t\thasCanceled_ = true;\r\n\t\t},\r\n\t};\r\n};\r\n","/**\r\n * External dependencies\r\n */\r\nimport classnames from 'classnames';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { useRef } from '@wordpress/element';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { speak } from '@wordpress/a11y';\r\nimport {\r\n\tFormFileUpload,\r\n\tNavigableMenu,\r\n\tMenuItem,\r\n\tToolbarButton,\r\n\tDropdown,\r\n\twithFilters,\r\n} from '@wordpress/components';\r\nimport { useSelect, withDispatch } from '@wordpress/data';\r\nimport { DOWN } from '@wordpress/keycodes';\r\nimport {\r\n\tpostFeaturedImage,\r\n\tupload,\r\n\tmedia as mediaIcon,\r\n} from '@wordpress/icons';\r\nimport { compose } from '@wordpress/compose';\r\nimport { __unstableStripHTML as stripHTML } from '@wordpress/dom';\r\nimport { store as noticesStore } from '@wordpress/notices';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport MediaUpload from '../media-upload';\r\nimport MediaUploadCheck from '../media-upload/check';\r\nimport LinkControl from '../link-control';\r\nimport { store as blockEditorStore } from '../../store';\r\n\r\nconst noop = () => {};\r\nlet uniqueId = 0;\r\n\r\nconst MediaReplaceFlow = ( {\r\n\tmediaURL,\r\n\tmediaId,\r\n\tmediaIds,\r\n\tallowedTypes,\r\n\taccept,\r\n\tonError,\r\n\tonSelect,\r\n\tonSelectURL,\r\n\tonToggleFeaturedImage,\r\n\tuseFeaturedImage,\r\n\tonFilesUpload = noop,\r\n\tname = __( 'Replace' ),\r\n\tcreateNotice,\r\n\tremoveNotice,\r\n\tchildren,\r\n\tmultiple = false,\r\n\taddToGallery,\r\n\thandleUpload = true,\r\n\tpopoverProps,\r\n} ) => {\r\n\tconst mediaUpload = useSelect( ( select ) => {\r\n\t\treturn select( blockEditorStore ).getSettings().mediaUpload;\r\n\t}, [] );\r\n\tconst canUpload = !! mediaUpload;\r\n\tconst editMediaButtonRef = useRef();\r\n\tconst errorNoticeID = `block-editor/media-replace-flow/error-notice/${ ++uniqueId }`;\r\n\r\n\tconst onUploadError = ( message ) => {\r\n\t\tconst safeMessage = stripHTML( message );\r\n\t\tif ( onError ) {\r\n\t\t\tonError( safeMessage );\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// We need to set a timeout for showing the notice\r\n\t\t// so that VoiceOver and possibly other screen readers\r\n\t\t// can announce the error afer the toolbar button\r\n\t\t// regains focus once the upload dialog closes.\r\n\t\t// Otherwise VO simply skips over the notice and announces\r\n\t\t// the focused element and the open menu.\r\n\t\tsetTimeout( () => {\r\n\t\t\tcreateNotice( 'error', safeMessage, {\r\n\t\t\t\tspeak: true,\r\n\t\t\t\tid: errorNoticeID,\r\n\t\t\t\tisDismissible: true,\r\n\t\t\t} );\r\n\t\t}, 1000 );\r\n\t};\r\n\r\n\tconst selectMedia = ( media, closeMenu ) => {\r\n\t\tif ( useFeaturedImage && onToggleFeaturedImage ) {\r\n\t\t\tonToggleFeaturedImage();\r\n\t\t}\r\n\t\tcloseMenu();\r\n\t\t// Calling `onSelect` after the state update since it might unmount the component.\r\n\t\tonSelect( media );\r\n\t\tspeak( __( 'The media file has been replaced' ) );\r\n\t\tremoveNotice( errorNoticeID );\r\n\t};\r\n\r\n\tconst uploadFiles = ( event, closeMenu ) => {\r\n\t\tconst files = event.target.files;\r\n\t\tif ( ! handleUpload ) {\r\n\t\t\tcloseMenu();\r\n\t\t\treturn onSelect( files );\r\n\t\t}\r\n\t\tonFilesUpload( files );\r\n\t\tmediaUpload( {\r\n\t\t\tallowedTypes,\r\n\t\t\tfilesList: files,\r\n\t\t\tonFileChange: ( [ media ] ) => {\r\n\t\t\t\tselectMedia( media, closeMenu );\r\n\t\t\t},\r\n\t\t\tonError: onUploadError,\r\n\t\t} );\r\n\t};\r\n\r\n\tconst openOnArrowDown = ( event ) => {\r\n\t\tif ( event.keyCode === DOWN ) {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tevent.target.click();\r\n\t\t}\r\n\t};\r\n\r\n\tconst onlyAllowsImages = () => {\r\n\t\tif ( ! allowedTypes || allowedTypes.length === 0 ) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn allowedTypes.every(\r\n\t\t\t( allowedType ) =>\r\n\t\t\t\tallowedType === 'image' || allowedType.startsWith( 'image/' )\r\n\t\t);\r\n\t};\r\n\r\n\tconst gallery = multiple && onlyAllowsImages();\r\n\r\n\treturn (\r\n\t\t<Dropdown\r\n\t\t\tpopoverProps={ popoverProps }\r\n\t\t\tcontentClassName=\"block-editor-media-replace-flow__options\"\r\n\t\t\trenderToggle={ ( { isOpen, onToggle } ) => (\r\n\t\t\t\t<ToolbarButton\r\n\t\t\t\t\tref={ editMediaButtonRef }\r\n\t\t\t\t\taria-expanded={ isOpen }\r\n\t\t\t\t\taria-haspopup=\"true\"\r\n\t\t\t\t\tonClick={ onToggle }\r\n\t\t\t\t\tonKeyDown={ openOnArrowDown }\r\n\t\t\t\t>\r\n\t\t\t\t\t{ name }\r\n\t\t\t\t</ToolbarButton>\r\n\t\t\t) }\r\n\t\t\trenderContent={ ( { onClose } ) => (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<NavigableMenu className=\"block-editor-media-replace-flow__media-upload-menu\">\r\n\t\t\t\t\t\t<MediaUploadCheck>\r\n\t\t\t\t\t\t\t<MediaUpload\r\n\t\t\t\t\t\t\t\tgallery={ gallery }\r\n\t\t\t\t\t\t\t\taddToGallery={ addToGallery }\r\n\t\t\t\t\t\t\t\tmultiple={ multiple }\r\n\t\t\t\t\t\t\t\tvalue={ multiple ? mediaIds : mediaId }\r\n\t\t\t\t\t\t\t\tonSelect={ ( media ) =>\r\n\t\t\t\t\t\t\t\t\tselectMedia( media, onClose )\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tallowedTypes={ allowedTypes }\r\n\t\t\t\t\t\t\t\trender={ ( { open } ) => (\r\n\t\t\t\t\t\t\t\t\t<MenuItem\r\n\t\t\t\t\t\t\t\t\t\ticon={ mediaIcon }\r\n\t\t\t\t\t\t\t\t\t\tonClick={ open }\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{ __( 'Open Media Library' ) }\r\n\t\t\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<FormFileUpload\r\n\t\t\t\t\t\t\t\tonChange={ ( event ) => {\r\n\t\t\t\t\t\t\t\t\tuploadFiles( event, onClose );\r\n\t\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t\t\taccept={ accept }\r\n\t\t\t\t\t\t\t\tmultiple={ !! multiple }\r\n\t\t\t\t\t\t\t\trender={ ( { openFileDialog } ) => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<MenuItem\r\n\t\t\t\t\t\t\t\t\t\t\ticon={ upload }\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={ () => {\r\n\t\t\t\t\t\t\t\t\t\t\t\topenFileDialog();\r\n\t\t\t\t\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t{ __( 'Upload' ) }\r\n\t\t\t\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</MediaUploadCheck>\r\n\t\t\t\t\t\t{ onToggleFeaturedImage && (\r\n\t\t\t\t\t\t\t<MenuItem\r\n\t\t\t\t\t\t\t\ticon={ postFeaturedImage }\r\n\t\t\t\t\t\t\t\tonClick={ onToggleFeaturedImage }\r\n\t\t\t\t\t\t\t\tisPressed={ useFeaturedImage }\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{ __( 'Use featured image' ) }\r\n\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t{ children }\r\n\t\t\t\t\t</NavigableMenu>\r\n\t\t\t\t\t{ onSelectURL && (\r\n\t\t\t\t\t\t// eslint-disable-next-line jsx-a11y/no-noninteractive-element-interactions\r\n\t\t\t\t\t\t<form\r\n\t\t\t\t\t\t\tclassName={ classnames(\r\n\t\t\t\t\t\t\t\t'block-editor-media-flow__url-input',\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t'has-siblings':\r\n\t\t\t\t\t\t\t\t\t\tcanUpload || onToggleFeaturedImage,\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<span className=\"block-editor-media-replace-flow__image-url-label\">\r\n\t\t\t\t\t\t\t\t{ __( 'Current media URL:' ) }\r\n\t\t\t\t\t\t\t</span>\r\n\r\n\t\t\t\t\t\t\t<LinkControl\r\n\t\t\t\t\t\t\t\tvalue={ { url: mediaURL } }\r\n\t\t\t\t\t\t\t\tsettings={ [] }\r\n\t\t\t\t\t\t\t\tshowSuggestions={ false }\r\n\t\t\t\t\t\t\t\tonChange={ ( { url } ) => {\r\n\t\t\t\t\t\t\t\t\tonSelectURL( url );\r\n\t\t\t\t\t\t\t\t\teditMediaButtonRef.current.focus();\r\n\t\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</form>\r\n\t\t\t\t\t) }\r\n\t\t\t\t</>\r\n\t\t\t) }\r\n\t\t/>\r\n\t);\r\n};\r\n\r\n/**\r\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/media-replace-flow/README.md\r\n */\r\nexport default compose( [\r\n\twithDispatch( ( dispatch ) => {\r\n\t\tconst { createNotice, removeNotice } = dispatch( noticesStore );\r\n\t\treturn {\r\n\t\t\tcreateNotice,\r\n\t\t\tremoveNotice,\r\n\t\t};\r\n\t} ),\r\n\twithFilters( 'editor.MediaReplaceFlow' ),\r\n] )( MediaReplaceFlow );\r\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport {\n\t__experimentalToolsPanel as ToolsPanel,\n\t__experimentalToolsPanelItem as ToolsPanelItem,\n\tToggleControl,\n\t__experimentalToggleGroupControl as ToggleGroupControl,\n\t__experimentalToggleGroupControlOption as ToggleGroupControlOption,\n\t__experimentalUnitControl as UnitControl,\n\t__experimentalVStack as VStack,\n\tDropZone,\n\tFlexItem,\n\tFocalPointPicker,\n\tMenuItem,\n\tVisuallyHidden,\n\t__experimentalItemGroup as ItemGroup,\n\t__experimentalHStack as HStack,\n\t__experimentalTruncate as Truncate,\n} from '@wordpress/components';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { store as noticesStore } from '@wordpress/notices';\nimport { getFilename } from '@wordpress/url';\nimport { useCallback, Platform, useRef } from '@wordpress/element';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { focus } from '@wordpress/dom';\nimport { isBlobURL } from '@wordpress/blob';\n\n/**\n * Internal dependencies\n */\nimport { TOOLSPANEL_DROPDOWNMENU_PROPS } from './utils';\nimport { setImmutably } from '../../utils/object';\nimport MediaReplaceFlow from '../media-replace-flow';\nimport { store as blockEditorStore } from '../../store';\n\nconst IMAGE_BACKGROUND_TYPE = 'image';\n\n/**\n * Checks site settings to see if the background panel may be used.\n * `settings.background.backgroundSize` exists also,\n * but can only be used if settings?.background?.backgroundImage is `true`.\n *\n * @param {Object} settings Site settings\n * @return {boolean}        Whether site settings has activated background panel.\n */\nexport function useHasBackgroundPanel( settings ) {\n\treturn Platform.OS === 'web' && settings?.background?.backgroundImage;\n}\n\n/**\n * Checks if there is a current value in the background size block support\n * attributes. Background size values include background size as well\n * as background position.\n *\n * @param {Object} style Style attribute.\n * @return {boolean}     Whether the block has a background size value set.\n */\nexport function hasBackgroundSizeValue( style ) {\n\treturn (\n\t\tstyle?.background?.backgroundPosition !== undefined ||\n\t\tstyle?.background?.backgroundSize !== undefined\n\t);\n}\n\n/**\n * Checks if there is a current value in the background image block support\n * attributes.\n *\n * @param {Object} style Style attribute.\n * @return {boolean}     Whether the block has a background image value set.\n */\nexport function hasBackgroundImageValue( style ) {\n\treturn (\n\t\t!! style?.background?.backgroundImage?.id ||\n\t\t!! style?.background?.backgroundImage?.url\n\t);\n}\n\n/**\n * Get the help text for the background size control.\n *\n * @param {string} value backgroundSize value.\n * @return {string}      Translated help text.\n */\nfunction backgroundSizeHelpText( value ) {\n\tif ( value === 'cover' || value === undefined ) {\n\t\treturn __( 'Image covers the space evenly.' );\n\t}\n\tif ( value === 'contain' ) {\n\t\treturn __( 'Image is contained without distortion.' );\n\t}\n\treturn __( 'Specify a fixed width.' );\n}\n\n/**\n * Converts decimal x and y coords from FocalPointPicker to percentage-based values\n * to use as backgroundPosition value.\n *\n * @param {{x?:number, y?:number}} value FocalPointPicker coords.\n * @return {string}      \t\t\t\t backgroundPosition value.\n */\nexport const coordsToBackgroundPosition = ( value ) => {\n\tif ( ! value || ( isNaN( value.x ) && isNaN( value.y ) ) ) {\n\t\treturn undefined;\n\t}\n\n\tconst x = isNaN( value.x ) ? 0.5 : value.x;\n\tconst y = isNaN( value.y ) ? 0.5 : value.y;\n\n\treturn `${ x * 100 }% ${ y * 100 }%`;\n};\n\n/**\n * Converts backgroundPosition value to x and y coords for FocalPointPicker.\n *\n * @param {string} value backgroundPosition value.\n * @return {{x?:number, y?:number}}       FocalPointPicker coords.\n */\nexport const backgroundPositionToCoords = ( value ) => {\n\tif ( ! value ) {\n\t\treturn { x: undefined, y: undefined };\n\t}\n\n\tlet [ x, y ] = value.split( ' ' ).map( ( v ) => parseFloat( v ) / 100 );\n\tx = isNaN( x ) ? undefined : x;\n\ty = isNaN( y ) ? x : y;\n\n\treturn { x, y };\n};\n\nfunction InspectorImagePreview( { label, filename, url: imgUrl } ) {\n\tconst imgLabel = label || getFilename( imgUrl );\n\treturn (\n\t\t<ItemGroup as=\"span\">\n\t\t\t<HStack justify=\"flex-start\" as=\"span\">\n\t\t\t\t<span\n\t\t\t\t\tclassName={ classnames(\n\t\t\t\t\t\t'block-editor-global-styles-background-panel__inspector-image-indicator-wrapper',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'has-image': imgUrl,\n\t\t\t\t\t\t}\n\t\t\t\t\t) }\n\t\t\t\t\taria-hidden\n\t\t\t\t>\n\t\t\t\t\t{ imgUrl && (\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tclassName=\"block-editor-global-styles-background-panel__inspector-image-indicator\"\n\t\t\t\t\t\t\tstyle={ {\n\t\t\t\t\t\t\t\tbackgroundImage: `url(${ imgUrl })`,\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</span>\n\t\t\t\t<FlexItem as=\"span\">\n\t\t\t\t\t<Truncate\n\t\t\t\t\t\tnumberOfLines={ 1 }\n\t\t\t\t\t\tclassName=\"block-editor-global-styles-background-panel__inspector-media-replace-title\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{ imgLabel }\n\t\t\t\t\t</Truncate>\n\t\t\t\t\t<VisuallyHidden as=\"span\">\n\t\t\t\t\t\t{ filename\n\t\t\t\t\t\t\t? sprintf(\n\t\t\t\t\t\t\t\t\t/* translators: %s: file name */\n\t\t\t\t\t\t\t\t\t__( 'Selected image: %s' ),\n\t\t\t\t\t\t\t\t\tfilename\n\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t: __( 'No image selected' ) }\n\t\t\t\t\t</VisuallyHidden>\n\t\t\t\t</FlexItem>\n\t\t\t</HStack>\n\t\t</ItemGroup>\n\t);\n}\n\nfunction BackgroundImageToolsPanelItem( {\n\tpanelId,\n\tisShownByDefault,\n\tonChange,\n\tstyle,\n\tinheritedValue,\n} ) {\n\tconst mediaUpload = useSelect(\n\t\t( select ) => select( blockEditorStore ).getSettings().mediaUpload,\n\t\t[]\n\t);\n\n\tconst { id, title, url } = style?.background?.backgroundImage || {\n\t\t...inheritedValue?.background?.backgroundImage,\n\t};\n\n\tconst replaceContainerRef = useRef();\n\n\tconst { createErrorNotice } = useDispatch( noticesStore );\n\tconst onUploadError = ( message ) => {\n\t\tcreateErrorNotice( message, { type: 'snackbar' } );\n\t};\n\n\tconst resetBackgroundImage = () =>\n\t\tonChange(\n\t\t\tsetImmutably(\n\t\t\t\tstyle,\n\t\t\t\t[ 'background', 'backgroundImage' ],\n\t\t\t\tundefined\n\t\t\t)\n\t\t);\n\n\tconst onSelectMedia = ( media ) => {\n\t\tif ( ! media || ! media.url ) {\n\t\t\tresetBackgroundImage();\n\t\t\treturn;\n\t\t}\n\n\t\tif ( isBlobURL( media.url ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// For media selections originated from a file upload.\n\t\tif (\n\t\t\t( media.media_type &&\n\t\t\t\tmedia.media_type !== IMAGE_BACKGROUND_TYPE ) ||\n\t\t\t( ! media.media_type &&\n\t\t\t\tmedia.type &&\n\t\t\t\tmedia.type !== IMAGE_BACKGROUND_TYPE )\n\t\t) {\n\t\t\tonUploadError(\n\t\t\t\t__( 'Only images can be used as a background image.' )\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\tonChange(\n\t\t\tsetImmutably( style, [ 'background', 'backgroundImage' ], {\n\t\t\t\turl: media.url,\n\t\t\t\tid: media.id,\n\t\t\t\tsource: 'file',\n\t\t\t\ttitle: media.title || undefined,\n\t\t\t} )\n\t\t);\n\t};\n\n\tconst onFilesDrop = ( filesList ) => {\n\t\tmediaUpload( {\n\t\t\tallowedTypes: [ 'image' ],\n\t\t\tfilesList,\n\t\t\tonFileChange( [ image ] ) {\n\t\t\t\tif ( isBlobURL( image?.url ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tonSelectMedia( image );\n\t\t\t},\n\t\t\tonError: onUploadError,\n\t\t} );\n\t};\n\n\tconst resetAllFilter = useCallback( ( previousValue ) => {\n\t\treturn {\n\t\t\t...previousValue,\n\t\t\tstyle: {\n\t\t\t\t...previousValue.style,\n\t\t\t\tbackground: undefined,\n\t\t\t},\n\t\t};\n\t}, [] );\n\n\tconst hasValue =\n\t\thasBackgroundImageValue( style ) ||\n\t\thasBackgroundImageValue( inheritedValue );\n\n\treturn (\n\t\t<ToolsPanelItem\n\t\t\tclassName=\"single-column\"\n\t\t\thasValue={ () => hasValue }\n\t\t\tlabel={ __( 'Background image' ) }\n\t\t\tonDeselect={ resetBackgroundImage }\n\t\t\tisShownByDefault={ isShownByDefault }\n\t\t\tresetAllFilter={ resetAllFilter }\n\t\t\tpanelId={ panelId }\n\t\t>\n\t\t\t<div\n\t\t\t\tclassName=\"block-editor-global-styles-background-panel__inspector-media-replace-container\"\n\t\t\t\tref={ replaceContainerRef }\n\t\t\t>\n\t\t\t\t<MediaReplaceFlow\n\t\t\t\t\tmediaId={ id }\n\t\t\t\t\tmediaURL={ url }\n\t\t\t\t\tallowedTypes={ [ IMAGE_BACKGROUND_TYPE ] }\n\t\t\t\t\taccept=\"image/*\"\n\t\t\t\t\tonSelect={ onSelectMedia }\n\t\t\t\t\tname={\n\t\t\t\t\t\t<InspectorImagePreview\n\t\t\t\t\t\t\tlabel={ __( 'Background image' ) }\n\t\t\t\t\t\t\tfilename={ title || __( 'Untitled' ) }\n\t\t\t\t\t\t\turl={ url }\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t>\n\t\t\t\t\t{ hasValue && (\n\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\tconst [ toggleButton ] = focus.tabbable.find(\n\t\t\t\t\t\t\t\t\treplaceContainerRef.current\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t// Focus the toggle button and close the dropdown menu.\n\t\t\t\t\t\t\t\t// This ensures similar behaviour as to selecting an image, where the dropdown is\n\t\t\t\t\t\t\t\t// closed and focus is redirected to the dropdown toggle button.\n\t\t\t\t\t\t\t\ttoggleButton?.focus();\n\t\t\t\t\t\t\t\ttoggleButton?.click();\n\t\t\t\t\t\t\t\tresetBackgroundImage();\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Reset ' ) }\n\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t) }\n\t\t\t\t</MediaReplaceFlow>\n\t\t\t\t<DropZone\n\t\t\t\t\tonFilesDrop={ onFilesDrop }\n\t\t\t\t\tlabel={ __( 'Drop to upload' ) }\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</ToolsPanelItem>\n\t);\n}\n\nfunction BackgroundSizeToolsPanelItem( {\n\tpanelId,\n\tisShownByDefault,\n\tonChange,\n\tstyle,\n\tinheritedValue,\n\tdefaultValues,\n} ) {\n\tconst sizeValue =\n\t\tstyle?.background?.backgroundSize ||\n\t\tinheritedValue?.background?.backgroundSize;\n\tconst repeatValue =\n\t\tstyle?.background?.backgroundRepeat ||\n\t\tinheritedValue?.background?.backgroundRepeat;\n\tconst imageValue =\n\t\tstyle?.background?.backgroundImage?.url ||\n\t\tinheritedValue?.background?.backgroundImage?.url;\n\tconst positionValue =\n\t\tstyle?.background?.backgroundPosition ||\n\t\tinheritedValue?.background?.backgroundPosition;\n\n\t/*\n\t * An `undefined` value is replaced with any supplied\n\t * default control value for the toggle group control.\n\t * An empty string is treated as `auto` - this allows a user\n\t * to select \"Size\" and then enter a custom value, with an\n\t * empty value being treated as `auto`.\n\t */\n\tconst currentValueForToggle =\n\t\t( sizeValue !== undefined &&\n\t\t\tsizeValue !== 'cover' &&\n\t\t\tsizeValue !== 'contain' ) ||\n\t\tsizeValue === ''\n\t\t\t? 'auto'\n\t\t\t: sizeValue || defaultValues?.backgroundSize;\n\n\t/*\n\t * If the current value is `cover` and the repeat value is `undefined`, then\n\t * the toggle should be unchecked as the default state. Otherwise, the toggle\n\t * should reflect the current repeat value.\n\t */\n\tconst repeatCheckedValue = ! (\n\t\trepeatValue === 'no-repeat' ||\n\t\t( currentValueForToggle === 'cover' && repeatValue === undefined )\n\t);\n\n\tconst hasValue = hasBackgroundSizeValue( style );\n\n\tconst resetAllFilter = useCallback( ( previousValue ) => {\n\t\treturn {\n\t\t\t...previousValue,\n\t\t\tstyle: {\n\t\t\t\t...previousValue.style,\n\t\t\t\tbackground: {\n\t\t\t\t\t...previousValue.style?.background,\n\t\t\t\t\tbackgroundRepeat: undefined,\n\t\t\t\t\tbackgroundSize: undefined,\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\t}, [] );\n\n\tconst updateBackgroundSize = ( next ) => {\n\t\t// When switching to 'contain' toggle the repeat off.\n\t\tlet nextRepeat = repeatValue;\n\n\t\tif ( next === 'contain' ) {\n\t\t\tnextRepeat = 'no-repeat';\n\t\t}\n\n\t\tif ( next === 'cover' ) {\n\t\t\tnextRepeat = undefined;\n\t\t}\n\n\t\tif (\n\t\t\t( currentValueForToggle === 'cover' ||\n\t\t\t\tcurrentValueForToggle === 'contain' ) &&\n\t\t\tnext === 'auto'\n\t\t) {\n\t\t\tnextRepeat = undefined;\n\t\t}\n\n\t\tonChange(\n\t\t\tsetImmutably( style, [ 'background' ], {\n\t\t\t\t...style?.background,\n\t\t\t\tbackgroundRepeat: nextRepeat,\n\t\t\t\tbackgroundSize: next,\n\t\t\t} )\n\t\t);\n\t};\n\n\tconst updateBackgroundPosition = ( next ) => {\n\t\tonChange(\n\t\t\tsetImmutably(\n\t\t\t\tstyle,\n\t\t\t\t[ 'background', 'backgroundPosition' ],\n\t\t\t\tcoordsToBackgroundPosition( next )\n\t\t\t)\n\t\t);\n\t};\n\n\tconst toggleIsRepeated = () =>\n\t\tonChange(\n\t\t\tsetImmutably(\n\t\t\t\tstyle,\n\t\t\t\t[ 'background', 'backgroundRepeat' ],\n\t\t\t\trepeatCheckedValue === true ? 'no-repeat' : undefined\n\t\t\t)\n\t\t);\n\n\tconst resetBackgroundSize = () =>\n\t\tonChange(\n\t\t\tsetImmutably( style, [ 'background' ], {\n\t\t\t\t...style?.background,\n\t\t\t\tbackgroundPosition: undefined,\n\t\t\t\tbackgroundRepeat: undefined,\n\t\t\t\tbackgroundSize: undefined,\n\t\t\t} )\n\t\t);\n\n\treturn (\n\t\t<VStack\n\t\t\tas={ ToolsPanelItem }\n\t\t\tspacing={ 2 }\n\t\t\tclassName=\"single-column\"\n\t\t\thasValue={ () => hasValue }\n\t\t\tlabel={ __( 'Size' ) }\n\t\t\tonDeselect={ resetBackgroundSize }\n\t\t\tisShownByDefault={ isShownByDefault }\n\t\t\tresetAllFilter={ resetAllFilter }\n\t\t\tpanelId={ panelId }\n\t\t>\n\t\t\t<FocalPointPicker\n\t\t\t\t__next40pxDefaultSize\n\t\t\t\tlabel={ __( 'Position' ) }\n\t\t\t\turl={ imageValue }\n\t\t\t\tvalue={ backgroundPositionToCoords( positionValue ) }\n\t\t\t\tonChange={ updateBackgroundPosition }\n\t\t\t/>\n\t\t\t<ToggleGroupControl\n\t\t\t\tsize={ '__unstable-large' }\n\t\t\t\tlabel={ __( 'Size' ) }\n\t\t\t\tvalue={ currentValueForToggle }\n\t\t\t\tonChange={ updateBackgroundSize }\n\t\t\t\tisBlock\n\t\t\t\thelp={ backgroundSizeHelpText( sizeValue ) }\n\t\t\t>\n\t\t\t\t<ToggleGroupControlOption\n\t\t\t\t\tkey={ 'cover' }\n\t\t\t\t\tvalue={ 'cover' }\n\t\t\t\t\tlabel={ __( 'Cover' ) }\n\t\t\t\t/>\n\t\t\t\t<ToggleGroupControlOption\n\t\t\t\t\tkey={ 'contain' }\n\t\t\t\t\tvalue={ 'contain' }\n\t\t\t\t\tlabel={ __( 'Contain' ) }\n\t\t\t\t/>\n\t\t\t\t<ToggleGroupControlOption\n\t\t\t\t\tkey={ 'fixed' }\n\t\t\t\t\tvalue={ 'auto' }\n\t\t\t\t\tlabel={ __( 'Fixed' ) }\n\t\t\t\t/>\n\t\t\t</ToggleGroupControl>\n\t\t\t{ sizeValue !== undefined &&\n\t\t\tsizeValue !== 'cover' &&\n\t\t\tsizeValue !== 'contain' ? (\n\t\t\t\t<UnitControl\n\t\t\t\t\tsize={ '__unstable-large' }\n\t\t\t\t\tonChange={ updateBackgroundSize }\n\t\t\t\t\tvalue={ sizeValue }\n\t\t\t\t/>\n\t\t\t) : null }\n\t\t\t{ currentValueForToggle !== 'cover' && (\n\t\t\t\t<ToggleControl\n\t\t\t\t\tlabel={ __( 'Repeat' ) }\n\t\t\t\t\tchecked={ repeatCheckedValue }\n\t\t\t\t\tonChange={ toggleIsRepeated }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</VStack>\n\t);\n}\n\nfunction BackgroundToolsPanel( {\n\tresetAllFilter,\n\tonChange,\n\tvalue,\n\tpanelId,\n\tchildren,\n} ) {\n\tconst resetAll = () => {\n\t\tconst updatedValue = resetAllFilter( value );\n\t\tonChange( updatedValue );\n\t};\n\n\treturn (\n\t\t<VStack\n\t\t\tas={ ToolsPanel }\n\t\t\tspacing={ 6 }\n\t\t\tlabel={ __( 'Background' ) }\n\t\t\tresetAll={ resetAll }\n\t\t\tpanelId={ panelId }\n\t\t\tdropdownMenuProps={ TOOLSPANEL_DROPDOWNMENU_PROPS }\n\t\t>\n\t\t\t{ children }\n\t\t</VStack>\n\t);\n}\n\nconst DEFAULT_CONTROLS = {\n\tbackgroundImage: true,\n\tbackgroundSize: true,\n};\n\nexport default function BackgroundPanel( {\n\tas: Wrapper = BackgroundToolsPanel,\n\tvalue,\n\tonChange,\n\tinheritedValue = value,\n\tsettings,\n\tpanelId,\n\tdefaultControls = DEFAULT_CONTROLS,\n\tdefaultValues = {},\n} ) {\n\tconst resetAllFilter = useCallback( ( previousValue ) => {\n\t\treturn {\n\t\t\t...previousValue,\n\t\t\tbackground: {},\n\t\t};\n\t}, [] );\n\tconst shouldShowBackgroundSizeControls =\n\t\tsettings?.background?.backgroundSize;\n\n\treturn (\n\t\t<Wrapper\n\t\t\tresetAllFilter={ resetAllFilter }\n\t\t\tvalue={ value }\n\t\t\tonChange={ onChange }\n\t\t\tpanelId={ panelId }\n\t\t>\n\t\t\t<BackgroundImageToolsPanelItem\n\t\t\t\tonChange={ onChange }\n\t\t\t\tpanelId={ panelId }\n\t\t\t\tisShownByDefault={ defaultControls.backgroundImage }\n\t\t\t\tstyle={ value }\n\t\t\t\tinheritedValue={ inheritedValue }\n\t\t\t/>\n\t\t\t{ shouldShowBackgroundSizeControls && (\n\t\t\t\t<BackgroundSizeToolsPanelItem\n\t\t\t\t\tonChange={ onChange }\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t\tisShownByDefault={ defaultControls.backgroundSize }\n\t\t\t\t\tstyle={ value }\n\t\t\t\t\tinheritedValue={ inheritedValue }\n\t\t\t\t\tdefaultValues={ defaultValues }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</Wrapper>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { getBlockSupport } from '@wordpress/blocks';\nimport { useSelect } from '@wordpress/data';\nimport { useCallback } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport InspectorControls from '../components/inspector-controls';\nimport { cleanEmptyObject } from './utils';\nimport { store as blockEditorStore } from '../store';\nimport {\n\tdefault as StylesBackgroundPanel,\n\tuseHasBackgroundPanel,\n\thasBackgroundImageValue,\n} from '../components/global-styles/background-panel';\n\nexport const BACKGROUND_SUPPORT_KEY = 'background';\n\n// Initial control values where no block style is set.\nconst BACKGROUND_BLOCK_DEFAULT_VALUES = {\n\tbackgroundSize: 'cover',\n};\n\n/**\n * Determine whether there is block support for background.\n *\n * @param {string} blockName Block name.\n * @param {string} feature   Background image feature to check for.\n *\n * @return {boolean} Whether there is support.\n */\nexport function hasBackgroundSupport( blockName, feature = 'any' ) {\n\tconst support = getBlockSupport( blockName, BACKGROUND_SUPPORT_KEY );\n\n\tif ( support === true ) {\n\t\treturn true;\n\t}\n\n\tif ( feature === 'any' ) {\n\t\treturn (\n\t\t\t!! support?.backgroundImage ||\n\t\t\t!! support?.backgroundSize ||\n\t\t\t!! support?.backgroundRepeat\n\t\t);\n\t}\n\n\treturn !! support?.[ feature ];\n}\n\nexport function setBackgroundStyleDefaults( backgroundStyle ) {\n\tif ( ! backgroundStyle ) {\n\t\treturn;\n\t}\n\n\tconst backgroundImage = backgroundStyle?.backgroundImage;\n\tlet backgroundStylesWithDefaults;\n\n\t// Set block background defaults.\n\tif ( backgroundImage?.source === 'file' && !! backgroundImage?.url ) {\n\t\tif ( ! backgroundStyle?.backgroundSize ) {\n\t\t\tbackgroundStylesWithDefaults = {\n\t\t\t\tbackgroundSize: 'cover',\n\t\t\t};\n\t\t}\n\n\t\tif (\n\t\t\t'contain' === backgroundStyle?.backgroundSize &&\n\t\t\t! backgroundStyle?.backgroundPosition\n\t\t) {\n\t\t\tbackgroundStylesWithDefaults = {\n\t\t\t\tbackgroundPosition: 'center',\n\t\t\t};\n\t\t}\n\t}\n\n\treturn backgroundStylesWithDefaults;\n}\n\nfunction useBlockProps( { name, style } ) {\n\tif (\n\t\t! hasBackgroundSupport( name ) ||\n\t\t! style?.background?.backgroundImage\n\t) {\n\t\treturn;\n\t}\n\n\tconst backgroundStyles = setBackgroundStyleDefaults( style?.background );\n\n\tif ( ! backgroundStyles ) {\n\t\treturn;\n\t}\n\n\treturn {\n\t\tstyle: {\n\t\t\t...backgroundStyles,\n\t\t},\n\t};\n}\n\n/**\n * Generates a CSS class name if an background image is set.\n *\n * @param {Object} style A block's style attribute.\n *\n * @return {string} CSS class name.\n */\nexport function getBackgroundImageClasses( style ) {\n\treturn hasBackgroundImageValue( style ) ? 'has-background' : '';\n}\n\nfunction BackgroundInspectorControl( { children } ) {\n\tconst resetAllFilter = useCallback( ( attributes ) => {\n\t\treturn {\n\t\t\t...attributes,\n\t\t\tstyle: {\n\t\t\t\t...attributes.style,\n\t\t\t\tbackground: undefined,\n\t\t\t},\n\t\t};\n\t}, [] );\n\treturn (\n\t\t<InspectorControls group=\"background\" resetAllFilter={ resetAllFilter }>\n\t\t\t{ children }\n\t\t</InspectorControls>\n\t);\n}\n\nexport function BackgroundImagePanel( {\n\tclientId,\n\tname,\n\tsetAttributes,\n\tsettings,\n} ) {\n\tconst style = useSelect(\n\t\t( select ) =>\n\t\t\tselect( blockEditorStore ).getBlockAttributes( clientId )?.style,\n\t\t[ clientId ]\n\t);\n\n\tif (\n\t\t! useHasBackgroundPanel( settings ) ||\n\t\t! hasBackgroundSupport( name, 'backgroundImage' )\n\t) {\n\t\treturn null;\n\t}\n\n\tconst defaultControls = getBlockSupport( name, [\n\t\tBACKGROUND_SUPPORT_KEY,\n\t\t'__experimentalDefaultControls',\n\t] );\n\n\tconst onChange = ( newStyle ) => {\n\t\tsetAttributes( {\n\t\t\tstyle: cleanEmptyObject( newStyle ),\n\t\t} );\n\t};\n\n\tconst updatedSettings = {\n\t\t...settings,\n\t\tbackground: {\n\t\t\t...settings.background,\n\t\t\tbackgroundSize:\n\t\t\t\tsettings?.background?.backgroundSize &&\n\t\t\t\thasBackgroundSupport( name, 'backgroundSize' ),\n\t\t},\n\t};\n\n\treturn (\n\t\t<StylesBackgroundPanel\n\t\t\tas={ BackgroundInspectorControl }\n\t\t\tpanelId={ clientId }\n\t\t\tdefaultControls={ defaultControls }\n\t\t\tdefaultValues={ BACKGROUND_BLOCK_DEFAULT_VALUES }\n\t\t\tsettings={ updatedSettings }\n\t\t\tonChange={ onChange }\n\t\t\tvalue={ style }\n\t\t/>\n\t);\n}\n\nexport default {\n\tuseBlockProps,\n\tattributeKeys: [ 'style' ],\n\thasSupport: hasBackgroundSupport,\n};\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { addFilter } from '@wordpress/hooks';\r\n\r\n/**\r\n * Filters registered block settings, extending attributes to include `lock`.\r\n *\r\n * @param {Object} settings Original block settings.\r\n *\r\n * @return {Object} Filtered block settings.\r\n */\r\nexport function addAttribute( settings ) {\r\n\t// Allow blocks to specify their own attribute definition with default values if needed.\r\n\tif ( 'type' in ( settings.attributes?.lock ?? {} ) ) {\r\n\t\treturn settings;\r\n\t}\r\n\t// Gracefully handle if settings.attributes is undefined.\r\n\tsettings.attributes = {\r\n\t\t...settings.attributes,\r\n\t\tlock: {\r\n\t\t\ttype: 'object',\r\n\t\t},\r\n\t};\r\n\r\n\treturn settings;\r\n}\r\n\r\naddFilter( 'blocks.registerBlockType', 'core/lock/addAttribute', addAttribute );\r\n","/**\n * WordPress dependencies\n */\nimport { addFilter } from '@wordpress/hooks';\nimport { TextControl, ExternalLink } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { hasBlockSupport } from '@wordpress/blocks';\nimport { Platform } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { InspectorControls } from '../components';\nimport { useBlockEditingMode } from '../components/block-editing-mode';\n\n/**\n * Regular expression matching invalid anchor characters for replacement.\n *\n * @type {RegExp}\n */\nconst ANCHOR_REGEX = /[\\s#]/g;\n\nconst ANCHOR_SCHEMA = {\n\ttype: 'string',\n\tsource: 'attribute',\n\tattribute: 'id',\n\tselector: '*',\n};\n\n/**\n * Filters registered block settings, extending attributes with anchor using ID\n * of the first node.\n *\n * @param {Object} settings Original block settings.\n *\n * @return {Object} Filtered block settings.\n */\nexport function addAttribute( settings ) {\n\t// Allow blocks to specify their own attribute definition with default values if needed.\n\tif ( 'type' in ( settings.attributes?.anchor ?? {} ) ) {\n\t\treturn settings;\n\t}\n\tif ( hasBlockSupport( settings, 'anchor' ) ) {\n\t\t// Gracefully handle if settings.attributes is undefined.\n\t\tsettings.attributes = {\n\t\t\t...settings.attributes,\n\t\t\tanchor: ANCHOR_SCHEMA,\n\t\t};\n\t}\n\n\treturn settings;\n}\n\nfunction BlockEditAnchorControlPure( { anchor, setAttributes } ) {\n\tconst blockEditingMode = useBlockEditingMode();\n\n\tif ( blockEditingMode !== 'default' ) {\n\t\treturn null;\n\t}\n\n\tconst isWeb = Platform.OS === 'web';\n\n\treturn (\n\t\t<InspectorControls group=\"advanced\">\n\t\t\t<TextControl\n\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t__next40pxDefaultSize\n\t\t\t\tclassName=\"html-anchor-control\"\n\t\t\t\tlabel={ __( 'HTML anchor' ) }\n\t\t\t\thelp={\n\t\t\t\t\t<>\n\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t'Enter a word or two  without spaces  to make a unique web address just for this block, called an anchor. Then, youll be able to link directly to this section of your page.'\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t{ isWeb && (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t{ ' ' }\n\t\t\t\t\t\t\t\t<ExternalLink\n\t\t\t\t\t\t\t\t\thref={ __(\n\t\t\t\t\t\t\t\t\t\t'https://wordpress.org/documentation/article/page-jumps/'\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ __( 'Learn more about anchors' ) }\n\t\t\t\t\t\t\t\t</ExternalLink>\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</>\n\t\t\t\t}\n\t\t\t\tvalue={ anchor || '' }\n\t\t\t\tplaceholder={ ! isWeb ? __( 'Add an anchor' ) : null }\n\t\t\t\tonChange={ ( nextValue ) => {\n\t\t\t\t\tnextValue = nextValue.replace( ANCHOR_REGEX, '-' );\n\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\tanchor: nextValue,\n\t\t\t\t\t} );\n\t\t\t\t} }\n\t\t\t\tautoCapitalize=\"none\"\n\t\t\t\tautoComplete=\"off\"\n\t\t\t/>\n\t\t</InspectorControls>\n\t);\n}\n\nexport default {\n\taddSaveProps,\n\tedit: BlockEditAnchorControlPure,\n\tattributeKeys: [ 'anchor' ],\n\thasSupport( name ) {\n\t\treturn hasBlockSupport( name, 'anchor' );\n\t},\n};\n\n/**\n * Override props assigned to save component to inject anchor ID, if block\n * supports anchor. This is only applied if the block's save result is an\n * element and not a markup string.\n *\n * @param {Object} extraProps Additional props applied to save element.\n * @param {Object} blockType  Block type.\n * @param {Object} attributes Current block attributes.\n *\n * @return {Object} Filtered props applied to save element.\n */\nexport function addSaveProps( extraProps, blockType, attributes ) {\n\tif ( hasBlockSupport( blockType, 'anchor' ) ) {\n\t\textraProps.id = attributes.anchor === '' ? null : attributes.anchor;\n\t}\n\n\treturn extraProps;\n}\n\naddFilter( 'blocks.registerBlockType', 'core/anchor/attribute', addAttribute );\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { addFilter } from '@wordpress/hooks';\r\nimport { hasBlockSupport } from '@wordpress/blocks';\r\n\r\nconst ARIA_LABEL_SCHEMA = {\r\n\ttype: 'string',\r\n\tsource: 'attribute',\r\n\tattribute: 'aria-label',\r\n\tselector: '*',\r\n};\r\n\r\n/**\r\n * Filters registered block settings, extending attributes with ariaLabel using aria-label\r\n * of the first node.\r\n *\r\n * @param {Object} settings Original block settings.\r\n *\r\n * @return {Object} Filtered block settings.\r\n */\r\nexport function addAttribute( settings ) {\r\n\t// Allow blocks to specify their own attribute definition with default values if needed.\r\n\tif ( settings?.attributes?.ariaLabel?.type ) {\r\n\t\treturn settings;\r\n\t}\r\n\tif ( hasBlockSupport( settings, 'ariaLabel' ) ) {\r\n\t\t// Gracefully handle if settings.attributes is undefined.\r\n\t\tsettings.attributes = {\r\n\t\t\t...settings.attributes,\r\n\t\t\tariaLabel: ARIA_LABEL_SCHEMA,\r\n\t\t};\r\n\t}\r\n\r\n\treturn settings;\r\n}\r\n\r\n/**\r\n * Override props assigned to save component to inject aria-label, if block\r\n * supports ariaLabel. This is only applied if the block's save result is an\r\n * element and not a markup string.\r\n *\r\n * @param {Object} extraProps Additional props applied to save element.\r\n * @param {Object} blockType  Block type.\r\n * @param {Object} attributes Current block attributes.\r\n *\r\n * @return {Object} Filtered props applied to save element.\r\n */\r\nexport function addSaveProps( extraProps, blockType, attributes ) {\r\n\tif ( hasBlockSupport( blockType, 'ariaLabel' ) ) {\r\n\t\textraProps[ 'aria-label' ] =\r\n\t\t\tattributes.ariaLabel === '' ? null : attributes.ariaLabel;\r\n\t}\r\n\r\n\treturn extraProps;\r\n}\r\n\r\nexport default {\r\n\taddSaveProps,\r\n\tattributeKeys: [ 'ariaLabel' ],\r\n\thasSupport( name ) {\r\n\t\treturn hasBlockSupport( name, 'ariaLabel' );\r\n\t},\r\n};\r\n\r\naddFilter(\r\n\t'blocks.registerBlockType',\r\n\t'core/ariaLabel/attribute',\r\n\taddAttribute\r\n);\r\n","/**\r\n * External dependencies\r\n */\r\nimport classnames from 'classnames';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { addFilter } from '@wordpress/hooks';\r\nimport { TextControl } from '@wordpress/components';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { hasBlockSupport } from '@wordpress/blocks';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { InspectorControls } from '../components';\r\nimport { useBlockEditingMode } from '../components/block-editing-mode';\r\n\r\n/**\r\n * Filters registered block settings, extending attributes to include `className`.\r\n *\r\n * @param {Object} settings Original block settings.\r\n *\r\n * @return {Object} Filtered block settings.\r\n */\r\nexport function addAttribute( settings ) {\r\n\tif ( hasBlockSupport( settings, 'customClassName', true ) ) {\r\n\t\t// Gracefully handle if settings.attributes is undefined.\r\n\t\tsettings.attributes = {\r\n\t\t\t...settings.attributes,\r\n\t\t\tclassName: {\r\n\t\t\t\ttype: 'string',\r\n\t\t\t},\r\n\t\t};\r\n\t}\r\n\r\n\treturn settings;\r\n}\r\n\r\nfunction CustomClassNameControlsPure( { className, setAttributes } ) {\r\n\tconst blockEditingMode = useBlockEditingMode();\r\n\tif ( blockEditingMode !== 'default' ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<InspectorControls group=\"advanced\">\r\n\t\t\t<TextControl\r\n\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t\t__next40pxDefaultSize\r\n\t\t\t\tautoComplete=\"off\"\r\n\t\t\t\tlabel={ __( 'Additional CSS class(es)' ) }\r\n\t\t\t\tvalue={ className || '' }\r\n\t\t\t\tonChange={ ( nextValue ) => {\r\n\t\t\t\t\tsetAttributes( {\r\n\t\t\t\t\t\tclassName: nextValue !== '' ? nextValue : undefined,\r\n\t\t\t\t\t} );\r\n\t\t\t\t} }\r\n\t\t\t\thelp={ __( 'Separate multiple classes with spaces.' ) }\r\n\t\t\t/>\r\n\t\t</InspectorControls>\r\n\t);\r\n}\r\n\r\nexport default {\r\n\tedit: CustomClassNameControlsPure,\r\n\taddSaveProps,\r\n\tattributeKeys: [ 'className' ],\r\n\thasSupport( name ) {\r\n\t\treturn hasBlockSupport( name, 'customClassName', true );\r\n\t},\r\n};\r\n\r\n/**\r\n * Override props assigned to save component to inject the className, if block\r\n * supports customClassName. This is only applied if the block's save result is an\r\n * element and not a markup string.\r\n *\r\n * @param {Object} extraProps Additional props applied to save element.\r\n * @param {Object} blockType  Block type.\r\n * @param {Object} attributes Current block attributes.\r\n *\r\n * @return {Object} Filtered props applied to save element.\r\n */\r\nexport function addSaveProps( extraProps, blockType, attributes ) {\r\n\tif (\r\n\t\thasBlockSupport( blockType, 'customClassName', true ) &&\r\n\t\tattributes.className\r\n\t) {\r\n\t\textraProps.className = classnames(\r\n\t\t\textraProps.className,\r\n\t\t\tattributes.className\r\n\t\t);\r\n\t}\r\n\r\n\treturn extraProps;\r\n}\r\n\r\nexport function addTransforms( result, source, index, results ) {\r\n\tif ( ! hasBlockSupport( result.name, 'customClassName', true ) ) {\r\n\t\treturn result;\r\n\t}\r\n\r\n\t// If the condition verifies we are probably in the presence of a wrapping transform\r\n\t// e.g: nesting paragraphs in a group or columns and in that case the class should not be kept.\r\n\tif ( results.length === 1 && result.innerBlocks.length === source.length ) {\r\n\t\treturn result;\r\n\t}\r\n\r\n\t// If we are transforming one block to multiple blocks or multiple blocks to one block,\r\n\t// we ignore the class during the transform.\r\n\tif (\r\n\t\t( results.length === 1 && source.length > 1 ) ||\r\n\t\t( results.length > 1 && source.length === 1 )\r\n\t) {\r\n\t\treturn result;\r\n\t}\r\n\r\n\t// If we are in presence of transform between one or more block in the source\r\n\t// that have one or more blocks in the result\r\n\t// we apply the class on source N to the result N,\r\n\t// if source N does not exists we do nothing.\r\n\tif ( source[ index ] ) {\r\n\t\tconst originClassName = source[ index ]?.attributes.className;\r\n\t\tif ( originClassName ) {\r\n\t\t\treturn {\r\n\t\t\t\t...result,\r\n\t\t\t\tattributes: {\r\n\t\t\t\t\t...result.attributes,\r\n\t\t\t\t\tclassName: originClassName,\r\n\t\t\t\t},\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\treturn result;\r\n}\r\n\r\naddFilter(\r\n\t'blocks.registerBlockType',\r\n\t'core/editor/custom-class-name/attribute',\r\n\taddAttribute\r\n);\r\n\r\naddFilter(\r\n\t'blocks.switchToBlockType.transformedBlock',\r\n\t'core/color/addTransforms',\r\n\taddTransforms\r\n);\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { addFilter } from '@wordpress/hooks';\r\nimport { hasBlockSupport, getBlockDefaultClassName } from '@wordpress/blocks';\r\n\r\n/**\r\n * Override props assigned to save component to inject generated className if\r\n * block supports it. This is only applied if the block's save result is an\r\n * element and not a markup string.\r\n *\r\n * @param {Object} extraProps Additional props applied to save element.\r\n * @param {Object} blockType  Block type.\r\n *\r\n * @return {Object} Filtered props applied to save element.\r\n */\r\nexport function addGeneratedClassName( extraProps, blockType ) {\r\n\t// Adding the generated className.\r\n\tif ( hasBlockSupport( blockType, 'className', true ) ) {\r\n\t\tif ( typeof extraProps.className === 'string' ) {\r\n\t\t\t// We have some extra classes and want to add the default classname\r\n\t\t\t// We use uniq to prevent duplicate classnames.\r\n\r\n\t\t\textraProps.className = [\r\n\t\t\t\t...new Set( [\r\n\t\t\t\t\tgetBlockDefaultClassName( blockType.name ),\r\n\t\t\t\t\t...extraProps.className.split( ' ' ),\r\n\t\t\t\t] ),\r\n\t\t\t]\r\n\t\t\t\t.join( ' ' )\r\n\t\t\t\t.trim();\r\n\t\t} else {\r\n\t\t\t// There is no string in the className variable,\r\n\t\t\t// so we just dump the default name in there.\r\n\t\t\textraProps.className = getBlockDefaultClassName( blockType.name );\r\n\t\t}\r\n\t}\r\n\treturn extraProps;\r\n}\r\n\r\naddFilter(\r\n\t'blocks.getSaveContent.extraProps',\r\n\t'core/generated-class-name/save-props',\r\n\taddGeneratedClassName\r\n);\r\n","var r={grad:.9,turn:360,rad:360/(2*Math.PI)},t=function(r){return\"string\"==typeof r?r.length>0:\"number\"==typeof r},n=function(r,t,n){return void 0===t&&(t=0),void 0===n&&(n=Math.pow(10,t)),Math.round(n*r)/n+0},e=function(r,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),r>n?n:r>t?r:t},u=function(r){return(r=isFinite(r)?r%360:0)>0?r:r+360},a=function(r){return{r:e(r.r,0,255),g:e(r.g,0,255),b:e(r.b,0,255),a:e(r.a)}},o=function(r){return{r:n(r.r),g:n(r.g),b:n(r.b),a:n(r.a,3)}},i=/^#([0-9a-f]{3,8})$/i,s=function(r){var t=r.toString(16);return t.length<2?\"0\"+t:t},h=function(r){var t=r.r,n=r.g,e=r.b,u=r.a,a=Math.max(t,n,e),o=a-Math.min(t,n,e),i=o?a===t?(n-e)/o:a===n?2+(e-t)/o:4+(t-n)/o:0;return{h:60*(i<0?i+6:i),s:a?o/a*100:0,v:a/255*100,a:u}},b=function(r){var t=r.h,n=r.s,e=r.v,u=r.a;t=t/360*6,n/=100,e/=100;var a=Math.floor(t),o=e*(1-n),i=e*(1-(t-a)*n),s=e*(1-(1-t+a)*n),h=a%6;return{r:255*[e,i,o,o,s,e][h],g:255*[s,e,e,i,o,o][h],b:255*[o,o,s,e,e,i][h],a:u}},g=function(r){return{h:u(r.h),s:e(r.s,0,100),l:e(r.l,0,100),a:e(r.a)}},d=function(r){return{h:n(r.h),s:n(r.s),l:n(r.l),a:n(r.a,3)}},f=function(r){return b((n=(t=r).s,{h:t.h,s:(n*=((e=t.l)<50?e:100-e)/100)>0?2*n/(e+n)*100:0,v:e+n,a:t.a}));var t,n,e},c=function(r){return{h:(t=h(r)).h,s:(u=(200-(n=t.s))*(e=t.v)/100)>0&&u<200?n*e/100/(u<=100?u:200-u)*100:0,l:u/2,a:t.a};var t,n,e,u},l=/^hsla?\\(\\s*([+-]?\\d*\\.?\\d+)(deg|rad|grad|turn)?\\s*,\\s*([+-]?\\d*\\.?\\d+)%\\s*,\\s*([+-]?\\d*\\.?\\d+)%\\s*(?:,\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*)?\\)$/i,p=/^hsla?\\(\\s*([+-]?\\d*\\.?\\d+)(deg|rad|grad|turn)?\\s+([+-]?\\d*\\.?\\d+)%\\s+([+-]?\\d*\\.?\\d+)%\\s*(?:\\/\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*)?\\)$/i,v=/^rgba?\\(\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*,\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*,\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*(?:,\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*)?\\)$/i,m=/^rgba?\\(\\s*([+-]?\\d*\\.?\\d+)(%)?\\s+([+-]?\\d*\\.?\\d+)(%)?\\s+([+-]?\\d*\\.?\\d+)(%)?\\s*(?:\\/\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*)?\\)$/i,y={string:[[function(r){var t=i.exec(r);return t?(r=t[1]).length<=4?{r:parseInt(r[0]+r[0],16),g:parseInt(r[1]+r[1],16),b:parseInt(r[2]+r[2],16),a:4===r.length?n(parseInt(r[3]+r[3],16)/255,2):1}:6===r.length||8===r.length?{r:parseInt(r.substr(0,2),16),g:parseInt(r.substr(2,2),16),b:parseInt(r.substr(4,2),16),a:8===r.length?n(parseInt(r.substr(6,2),16)/255,2):1}:null:null},\"hex\"],[function(r){var t=v.exec(r)||m.exec(r);return t?t[2]!==t[4]||t[4]!==t[6]?null:a({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:void 0===t[7]?1:Number(t[7])/(t[8]?100:1)}):null},\"rgb\"],[function(t){var n=l.exec(t)||p.exec(t);if(!n)return null;var e,u,a=g({h:(e=n[1],u=n[2],void 0===u&&(u=\"deg\"),Number(e)*(r[u]||1)),s:Number(n[3]),l:Number(n[4]),a:void 0===n[5]?1:Number(n[5])/(n[6]?100:1)});return f(a)},\"hsl\"]],object:[[function(r){var n=r.r,e=r.g,u=r.b,o=r.a,i=void 0===o?1:o;return t(n)&&t(e)&&t(u)?a({r:Number(n),g:Number(e),b:Number(u),a:Number(i)}):null},\"rgb\"],[function(r){var n=r.h,e=r.s,u=r.l,a=r.a,o=void 0===a?1:a;if(!t(n)||!t(e)||!t(u))return null;var i=g({h:Number(n),s:Number(e),l:Number(u),a:Number(o)});return f(i)},\"hsl\"],[function(r){var n=r.h,a=r.s,o=r.v,i=r.a,s=void 0===i?1:i;if(!t(n)||!t(a)||!t(o))return null;var h=function(r){return{h:u(r.h),s:e(r.s,0,100),v:e(r.v,0,100),a:e(r.a)}}({h:Number(n),s:Number(a),v:Number(o),a:Number(s)});return b(h)},\"hsv\"]]},N=function(r,t){for(var n=0;n<t.length;n++){var e=t[n][0](r);if(e)return[e,t[n][1]]}return[null,void 0]},x=function(r){return\"string\"==typeof r?N(r.trim(),y.string):\"object\"==typeof r&&null!==r?N(r,y.object):[null,void 0]},I=function(r){return x(r)[1]},M=function(r,t){var n=c(r);return{h:n.h,s:e(n.s+100*t,0,100),l:n.l,a:n.a}},H=function(r){return(299*r.r+587*r.g+114*r.b)/1e3/255},$=function(r,t){var n=c(r);return{h:n.h,s:n.s,l:e(n.l+100*t,0,100),a:n.a}},j=function(){function r(r){this.parsed=x(r)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return r.prototype.isValid=function(){return null!==this.parsed},r.prototype.brightness=function(){return n(H(this.rgba),2)},r.prototype.isDark=function(){return H(this.rgba)<.5},r.prototype.isLight=function(){return H(this.rgba)>=.5},r.prototype.toHex=function(){return r=o(this.rgba),t=r.r,e=r.g,u=r.b,i=(a=r.a)<1?s(n(255*a)):\"\",\"#\"+s(t)+s(e)+s(u)+i;var r,t,e,u,a,i},r.prototype.toRgb=function(){return o(this.rgba)},r.prototype.toRgbString=function(){return r=o(this.rgba),t=r.r,n=r.g,e=r.b,(u=r.a)<1?\"rgba(\"+t+\", \"+n+\", \"+e+\", \"+u+\")\":\"rgb(\"+t+\", \"+n+\", \"+e+\")\";var r,t,n,e,u},r.prototype.toHsl=function(){return d(c(this.rgba))},r.prototype.toHslString=function(){return r=d(c(this.rgba)),t=r.h,n=r.s,e=r.l,(u=r.a)<1?\"hsla(\"+t+\", \"+n+\"%, \"+e+\"%, \"+u+\")\":\"hsl(\"+t+\", \"+n+\"%, \"+e+\"%)\";var r,t,n,e,u},r.prototype.toHsv=function(){return r=h(this.rgba),{h:n(r.h),s:n(r.s),v:n(r.v),a:n(r.a,3)};var r},r.prototype.invert=function(){return w({r:255-(r=this.rgba).r,g:255-r.g,b:255-r.b,a:r.a});var r},r.prototype.saturate=function(r){return void 0===r&&(r=.1),w(M(this.rgba,r))},r.prototype.desaturate=function(r){return void 0===r&&(r=.1),w(M(this.rgba,-r))},r.prototype.grayscale=function(){return w(M(this.rgba,-1))},r.prototype.lighten=function(r){return void 0===r&&(r=.1),w($(this.rgba,r))},r.prototype.darken=function(r){return void 0===r&&(r=.1),w($(this.rgba,-r))},r.prototype.rotate=function(r){return void 0===r&&(r=15),this.hue(this.hue()+r)},r.prototype.alpha=function(r){return\"number\"==typeof r?w({r:(t=this.rgba).r,g:t.g,b:t.b,a:r}):n(this.rgba.a,3);var t},r.prototype.hue=function(r){var t=c(this.rgba);return\"number\"==typeof r?w({h:r,s:t.s,l:t.l,a:t.a}):n(t.h)},r.prototype.isEqual=function(r){return this.toHex()===w(r).toHex()},r}(),w=function(r){return r instanceof j?r:new j(r)},S=[],k=function(r){r.forEach(function(r){S.indexOf(r)<0&&(r(j,y),S.push(r))})},E=function(){return new j({r:255*Math.random(),g:255*Math.random(),b:255*Math.random()})};export{j as Colord,w as colord,k as extend,I as getFormat,E as random};\n","export default function(e,f){var a={white:\"#ffffff\",bisque:\"#ffe4c4\",blue:\"#0000ff\",cadetblue:\"#5f9ea0\",chartreuse:\"#7fff00\",chocolate:\"#d2691e\",coral:\"#ff7f50\",antiquewhite:\"#faebd7\",aqua:\"#00ffff\",azure:\"#f0ffff\",whitesmoke:\"#f5f5f5\",papayawhip:\"#ffefd5\",plum:\"#dda0dd\",blanchedalmond:\"#ffebcd\",black:\"#000000\",gold:\"#ffd700\",goldenrod:\"#daa520\",gainsboro:\"#dcdcdc\",cornsilk:\"#fff8dc\",cornflowerblue:\"#6495ed\",burlywood:\"#deb887\",aquamarine:\"#7fffd4\",beige:\"#f5f5dc\",crimson:\"#dc143c\",cyan:\"#00ffff\",darkblue:\"#00008b\",darkcyan:\"#008b8b\",darkgoldenrod:\"#b8860b\",darkkhaki:\"#bdb76b\",darkgray:\"#a9a9a9\",darkgreen:\"#006400\",darkgrey:\"#a9a9a9\",peachpuff:\"#ffdab9\",darkmagenta:\"#8b008b\",darkred:\"#8b0000\",darkorchid:\"#9932cc\",darkorange:\"#ff8c00\",darkslateblue:\"#483d8b\",gray:\"#808080\",darkslategray:\"#2f4f4f\",darkslategrey:\"#2f4f4f\",deeppink:\"#ff1493\",deepskyblue:\"#00bfff\",wheat:\"#f5deb3\",firebrick:\"#b22222\",floralwhite:\"#fffaf0\",ghostwhite:\"#f8f8ff\",darkviolet:\"#9400d3\",magenta:\"#ff00ff\",green:\"#008000\",dodgerblue:\"#1e90ff\",grey:\"#808080\",honeydew:\"#f0fff0\",hotpink:\"#ff69b4\",blueviolet:\"#8a2be2\",forestgreen:\"#228b22\",lawngreen:\"#7cfc00\",indianred:\"#cd5c5c\",indigo:\"#4b0082\",fuchsia:\"#ff00ff\",brown:\"#a52a2a\",maroon:\"#800000\",mediumblue:\"#0000cd\",lightcoral:\"#f08080\",darkturquoise:\"#00ced1\",lightcyan:\"#e0ffff\",ivory:\"#fffff0\",lightyellow:\"#ffffe0\",lightsalmon:\"#ffa07a\",lightseagreen:\"#20b2aa\",linen:\"#faf0e6\",mediumaquamarine:\"#66cdaa\",lemonchiffon:\"#fffacd\",lime:\"#00ff00\",khaki:\"#f0e68c\",mediumseagreen:\"#3cb371\",limegreen:\"#32cd32\",mediumspringgreen:\"#00fa9a\",lightskyblue:\"#87cefa\",lightblue:\"#add8e6\",midnightblue:\"#191970\",lightpink:\"#ffb6c1\",mistyrose:\"#ffe4e1\",moccasin:\"#ffe4b5\",mintcream:\"#f5fffa\",lightslategray:\"#778899\",lightslategrey:\"#778899\",navajowhite:\"#ffdead\",navy:\"#000080\",mediumvioletred:\"#c71585\",powderblue:\"#b0e0e6\",palegoldenrod:\"#eee8aa\",oldlace:\"#fdf5e6\",paleturquoise:\"#afeeee\",mediumturquoise:\"#48d1cc\",mediumorchid:\"#ba55d3\",rebeccapurple:\"#663399\",lightsteelblue:\"#b0c4de\",mediumslateblue:\"#7b68ee\",thistle:\"#d8bfd8\",tan:\"#d2b48c\",orchid:\"#da70d6\",mediumpurple:\"#9370db\",purple:\"#800080\",pink:\"#ffc0cb\",skyblue:\"#87ceeb\",springgreen:\"#00ff7f\",palegreen:\"#98fb98\",red:\"#ff0000\",yellow:\"#ffff00\",slateblue:\"#6a5acd\",lavenderblush:\"#fff0f5\",peru:\"#cd853f\",palevioletred:\"#db7093\",violet:\"#ee82ee\",teal:\"#008080\",slategray:\"#708090\",slategrey:\"#708090\",aliceblue:\"#f0f8ff\",darkseagreen:\"#8fbc8f\",darkolivegreen:\"#556b2f\",greenyellow:\"#adff2f\",seagreen:\"#2e8b57\",seashell:\"#fff5ee\",tomato:\"#ff6347\",silver:\"#c0c0c0\",sienna:\"#a0522d\",lavender:\"#e6e6fa\",lightgreen:\"#90ee90\",orange:\"#ffa500\",orangered:\"#ff4500\",steelblue:\"#4682b4\",royalblue:\"#4169e1\",turquoise:\"#40e0d0\",yellowgreen:\"#9acd32\",salmon:\"#fa8072\",saddlebrown:\"#8b4513\",sandybrown:\"#f4a460\",rosybrown:\"#bc8f8f\",darksalmon:\"#e9967a\",lightgoldenrodyellow:\"#fafad2\",snow:\"#fffafa\",lightgrey:\"#d3d3d3\",lightgray:\"#d3d3d3\",dimgray:\"#696969\",dimgrey:\"#696969\",olivedrab:\"#6b8e23\",olive:\"#808000\"},r={};for(var d in a)r[a[d]]=d;var l={};e.prototype.toName=function(f){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return\"transparent\";var d,i,n=r[this.toHex()];if(n)return n;if(null==f?void 0:f.closest){var o=this.toRgb(),t=1/0,b=\"black\";if(!l.length)for(var c in a)l[c]=new e(a[c]).toRgb();for(var g in a){var u=(d=o,i=l[g],Math.pow(d.r-i.r,2)+Math.pow(d.g-i.g,2)+Math.pow(d.b-i.b,2));u<t&&(t=u,b=g)}return b}};f.string.push([function(f){var r=f.toLowerCase(),d=\"transparent\"===r?\"#0000\":a[r];return d?new e(d).toRgb():null},\"name\"])}\n","var o=function(o){var t=o/255;return t<.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)},t=function(t){return.2126*o(t.r)+.7152*o(t.g)+.0722*o(t.b)};export default function(o){o.prototype.luminance=function(){return o=t(this.rgba),void 0===(r=2)&&(r=0),void 0===n&&(n=Math.pow(10,r)),Math.round(n*o)/n+0;var o,r,n},o.prototype.contrast=function(r){void 0===r&&(r=\"#FFF\");var n,a,i,e,v,u,d,c=r instanceof o?r:new o(r);return e=this.rgba,v=c.toRgb(),u=t(e),d=t(v),n=u>d?(u+.05)/(d+.05):(d+.05)/(u+.05),void 0===(a=2)&&(a=0),void 0===i&&(i=Math.pow(10,a)),Math.floor(i*n)/i+0},o.prototype.isReadable=function(o,t){return void 0===o&&(o=\"#FFF\"),void 0===t&&(t={}),this.contrast(o)>=(e=void 0===(i=(r=t).size)?\"normal\":i,\"AAA\"===(a=void 0===(n=r.level)?\"AA\":n)&&\"normal\"===e?7:\"AA\"===a&&\"large\"===e?3:4.5);var r,n,a,i,e}}\n","/**\r\n * External dependencies\r\n */\r\nimport { colord, extend } from 'colord';\r\nimport namesPlugin from 'colord/plugins/names';\r\nimport a11yPlugin from 'colord/plugins/a11y';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { privateApis as componentsPrivateApis } from '@wordpress/components';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { unlock } from '../../lock-unlock';\r\n\r\nextend( [ namesPlugin, a11yPlugin ] );\r\n\r\n/**\r\n * Provided an array of color objects as set by the theme or by the editor defaults,\r\n * and the values of the defined color or custom color returns a color object describing the color.\r\n *\r\n * @param {Array}   colors       Array of color objects as set by the theme or by the editor defaults.\r\n * @param {?string} definedColor A string containing the color slug.\r\n * @param {?string} customColor  A string containing the customColor value.\r\n *\r\n * @return {?Object} If definedColor is passed and the name is found in colors,\r\n *                   the color object exactly as set by the theme or editor defaults is returned.\r\n *                   Otherwise, an object that just sets the color is defined.\r\n */\r\nexport const getColorObjectByAttributeValues = (\r\n\tcolors,\r\n\tdefinedColor,\r\n\tcustomColor\r\n) => {\r\n\tif ( definedColor ) {\r\n\t\tconst colorObj = colors?.find(\r\n\t\t\t( color ) => color.slug === definedColor\r\n\t\t);\r\n\r\n\t\tif ( colorObj ) {\r\n\t\t\treturn colorObj;\r\n\t\t}\r\n\t}\r\n\treturn {\r\n\t\tcolor: customColor,\r\n\t};\r\n};\r\n\r\n/**\r\n * Provided an array of color objects as set by the theme or by the editor defaults, and a color value returns the color object matching that value or undefined.\r\n *\r\n * @param {Array}   colors     Array of color objects as set by the theme or by the editor defaults.\r\n * @param {?string} colorValue A string containing the color value.\r\n *\r\n * @return {?Object} Color object included in the colors array whose color property equals colorValue.\r\n *                   Returns undefined if no color object matches this requirement.\r\n */\r\nexport const getColorObjectByColorValue = ( colors, colorValue ) => {\r\n\treturn colors?.find( ( color ) => color.color === colorValue );\r\n};\r\n\r\n/**\r\n * Returns a class based on the context a color is being used and its slug.\r\n *\r\n * @param {string} colorContextName Context/place where color is being used e.g: background, text etc...\r\n * @param {string} colorSlug        Slug of the color.\r\n *\r\n * @return {?string} String with the class corresponding to the color in the provided context.\r\n *                   Returns undefined if either colorContextName or colorSlug are not provided.\r\n */\r\nexport function getColorClassName( colorContextName, colorSlug ) {\r\n\tif ( ! colorContextName || ! colorSlug ) {\r\n\t\treturn undefined;\r\n\t}\r\n\r\n\tconst { kebabCase } = unlock( componentsPrivateApis );\r\n\r\n\treturn `has-${ kebabCase( colorSlug ) }-${ colorContextName }`;\r\n}\r\n\r\n/**\r\n * Given an array of color objects and a color value returns the color value of the most readable color in the array.\r\n *\r\n * @param {Array}   colors     Array of color objects as set by the theme or by the editor defaults.\r\n * @param {?string} colorValue A string containing the color value.\r\n *\r\n * @return {string} String with the color value of the most readable color.\r\n */\r\nexport function getMostReadableColor( colors, colorValue ) {\r\n\tconst colordColor = colord( colorValue );\r\n\tconst getColorContrast = ( { color } ) => colordColor.contrast( color );\r\n\r\n\tconst maxContrast = Math.max( ...colors.map( getColorContrast ) );\r\n\treturn colors.find( ( color ) => getColorContrast( color ) === maxContrast )\r\n\t\t.color;\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useMemo } from '@wordpress/element';\r\nimport { _x } from '@wordpress/i18n';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { useSettings } from '../use-settings';\r\n\r\n/**\r\n * Retrieves color and gradient related settings.\r\n *\r\n * The arrays for colors and gradients are made up of color palettes from each\r\n * origin i.e. \"Core\", \"Theme\", and \"User\".\r\n *\r\n * @return {Object} Color and gradient related settings.\r\n */\r\nexport default function useMultipleOriginColorsAndGradients() {\r\n\tconst [\r\n\t\tenableCustomColors,\r\n\t\tcustomColors,\r\n\t\tthemeColors,\r\n\t\tdefaultColors,\r\n\t\tshouldDisplayDefaultColors,\r\n\t\tenableCustomGradients,\r\n\t\tcustomGradients,\r\n\t\tthemeGradients,\r\n\t\tdefaultGradients,\r\n\t\tshouldDisplayDefaultGradients,\r\n\t] = useSettings(\r\n\t\t'color.custom',\r\n\t\t'color.palette.custom',\r\n\t\t'color.palette.theme',\r\n\t\t'color.palette.default',\r\n\t\t'color.defaultPalette',\r\n\t\t'color.customGradient',\r\n\t\t'color.gradients.custom',\r\n\t\t'color.gradients.theme',\r\n\t\t'color.gradients.default',\r\n\t\t'color.defaultGradients'\r\n\t);\r\n\r\n\tconst colorGradientSettings = {\r\n\t\tdisableCustomColors: ! enableCustomColors,\r\n\t\tdisableCustomGradients: ! enableCustomGradients,\r\n\t};\r\n\r\n\tcolorGradientSettings.colors = useMemo( () => {\r\n\t\tconst result = [];\r\n\t\tif ( themeColors && themeColors.length ) {\r\n\t\t\tresult.push( {\r\n\t\t\t\tname: _x(\r\n\t\t\t\t\t'Theme',\r\n\t\t\t\t\t'Indicates this palette comes from the theme.'\r\n\t\t\t\t),\r\n\t\t\t\tcolors: themeColors,\r\n\t\t\t} );\r\n\t\t}\r\n\t\tif (\r\n\t\t\tshouldDisplayDefaultColors &&\r\n\t\t\tdefaultColors &&\r\n\t\t\tdefaultColors.length\r\n\t\t) {\r\n\t\t\tresult.push( {\r\n\t\t\t\tname: _x(\r\n\t\t\t\t\t'Default',\r\n\t\t\t\t\t'Indicates this palette comes from WordPress.'\r\n\t\t\t\t),\r\n\t\t\t\tcolors: defaultColors,\r\n\t\t\t} );\r\n\t\t}\r\n\t\tif ( customColors && customColors.length ) {\r\n\t\t\tresult.push( {\r\n\t\t\t\tname: _x(\r\n\t\t\t\t\t'Custom',\r\n\t\t\t\t\t'Indicates this palette comes from the theme.'\r\n\t\t\t\t),\r\n\t\t\t\tcolors: customColors,\r\n\t\t\t} );\r\n\t\t}\r\n\t\treturn result;\r\n\t}, [\r\n\t\tcustomColors,\r\n\t\tthemeColors,\r\n\t\tdefaultColors,\r\n\t\tshouldDisplayDefaultColors,\r\n\t] );\r\n\r\n\tcolorGradientSettings.gradients = useMemo( () => {\r\n\t\tconst result = [];\r\n\t\tif ( themeGradients && themeGradients.length ) {\r\n\t\t\tresult.push( {\r\n\t\t\t\tname: _x(\r\n\t\t\t\t\t'Theme',\r\n\t\t\t\t\t'Indicates this palette comes from the theme.'\r\n\t\t\t\t),\r\n\t\t\t\tgradients: themeGradients,\r\n\t\t\t} );\r\n\t\t}\r\n\t\tif (\r\n\t\t\tshouldDisplayDefaultGradients &&\r\n\t\t\tdefaultGradients &&\r\n\t\t\tdefaultGradients.length\r\n\t\t) {\r\n\t\t\tresult.push( {\r\n\t\t\t\tname: _x(\r\n\t\t\t\t\t'Default',\r\n\t\t\t\t\t'Indicates this palette comes from WordPress.'\r\n\t\t\t\t),\r\n\t\t\t\tgradients: defaultGradients,\r\n\t\t\t} );\r\n\t\t}\r\n\t\tif ( customGradients && customGradients.length ) {\r\n\t\t\tresult.push( {\r\n\t\t\t\tname: _x(\r\n\t\t\t\t\t'Custom',\r\n\t\t\t\t\t'Indicates this palette is created by the user.'\r\n\t\t\t\t),\r\n\t\t\t\tgradients: customGradients,\r\n\t\t\t} );\r\n\t\t}\r\n\t\treturn result;\r\n\t}, [\r\n\t\tcustomGradients,\r\n\t\tthemeGradients,\r\n\t\tdefaultGradients,\r\n\t\tshouldDisplayDefaultGradients,\r\n\t] );\r\n\r\n\tcolorGradientSettings.hasColorsOrGradients =\r\n\t\t!! colorGradientSettings.colors.length ||\r\n\t\t!! colorGradientSettings.gradients.length;\r\n\r\n\treturn colorGradientSettings;\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { __experimentalParseQuantityAndUnitFromRawValue as parseQuantityAndUnitFromRawValue } from '@wordpress/components';\r\n\r\n/**\r\n * Gets the (non-undefined) item with the highest occurrence within an array\r\n * Based in part on: https://stackoverflow.com/a/20762713\r\n *\r\n * Undefined values are always sorted to the end by `sort`, so this function\r\n * returns the first element, to always prioritize real values over undefined\r\n * values.\r\n *\r\n * See: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort#description\r\n *\r\n * @param {Array<any>} inputArray Array of items to check.\r\n * @return {any}                  The item with the most occurrences.\r\n */\r\nexport function mode( inputArray ) {\r\n\tconst arr = [ ...inputArray ];\r\n\treturn arr\r\n\t\t.sort(\r\n\t\t\t( a, b ) =>\r\n\t\t\t\tinputArray.filter( ( v ) => v === b ).length -\r\n\t\t\t\tinputArray.filter( ( v ) => v === a ).length\r\n\t\t)\r\n\t\t.shift();\r\n}\r\n\r\n/**\r\n * Returns the most common CSS unit from the current CSS unit selections.\r\n *\r\n * - If a single flat border radius is set, its unit will be used\r\n * - If individual corner selections, the most common of those will be used\r\n * - Failing any unit selections a default of 'px' is returned.\r\n *\r\n * @param {Object} selectedUnits Unit selections for flat radius & each corner.\r\n * @return {string} Most common CSS unit from current selections. Default: `px`.\r\n */\r\nexport function getAllUnit( selectedUnits = {} ) {\r\n\tconst { flat, ...cornerUnits } = selectedUnits;\r\n\treturn (\r\n\t\tflat || mode( Object.values( cornerUnits ).filter( Boolean ) ) || 'px'\r\n\t);\r\n}\r\n\r\n/**\r\n * Gets the 'all' input value and unit from values data.\r\n *\r\n * @param {Object|string} values Radius values.\r\n * @return {string}              A value + unit for the 'all' input.\r\n */\r\nexport function getAllValue( values = {} ) {\r\n\t/**\r\n\t * Border radius support was originally a single pixel value.\r\n\t *\r\n\t * To maintain backwards compatibility treat this case as the all value.\r\n\t */\r\n\tif ( typeof values === 'string' ) {\r\n\t\treturn values;\r\n\t}\r\n\r\n\tconst parsedQuantitiesAndUnits = Object.values( values ).map( ( value ) =>\r\n\t\tparseQuantityAndUnitFromRawValue( value )\r\n\t);\r\n\r\n\tconst allValues = parsedQuantitiesAndUnits.map(\r\n\t\t( value ) => value[ 0 ] ?? ''\r\n\t);\r\n\tconst allUnits = parsedQuantitiesAndUnits.map( ( value ) => value[ 1 ] );\r\n\r\n\tconst value = allValues.every( ( v ) => v === allValues[ 0 ] )\r\n\t\t? allValues[ 0 ]\r\n\t\t: '';\r\n\tconst unit = mode( allUnits );\r\n\r\n\tconst allValue = value === 0 || value ? `${ value }${ unit }` : undefined;\r\n\r\n\treturn allValue;\r\n}\r\n\r\n/**\r\n * Checks to determine if values are mixed.\r\n *\r\n * @param {Object} values Radius values.\r\n * @return {boolean}      Whether values are mixed.\r\n */\r\nexport function hasMixedValues( values = {} ) {\r\n\tconst allValue = getAllValue( values );\r\n\tconst isMixed =\r\n\t\ttypeof values === 'string' ? false : isNaN( parseFloat( allValue ) );\r\n\r\n\treturn isMixed;\r\n}\r\n\r\n/**\r\n * Checks to determine if values are defined.\r\n *\r\n * @param {Object} values Radius values.\r\n * @return {boolean}      Whether values are mixed.\r\n */\r\nexport function hasDefinedValues( values ) {\r\n\tif ( ! values ) {\r\n\t\treturn false;\r\n\t}\r\n\r\n\t// A string value represents a shorthand value.\r\n\tif ( typeof values === 'string' ) {\r\n\t\treturn true;\r\n\t}\r\n\r\n\t// An object represents longhand border radius values, if any are set\r\n\t// flag values as being defined.\r\n\tconst filteredValues = Object.values( values ).filter( ( value ) => {\r\n\t\treturn !! value || value === 0;\r\n\t} );\r\n\r\n\treturn !! filteredValues.length;\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { __experimentalUnitControl as UnitControl } from '@wordpress/components';\r\nimport { __ } from '@wordpress/i18n';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport {\r\n\tgetAllValue,\r\n\tgetAllUnit,\r\n\thasMixedValues,\r\n\thasDefinedValues,\r\n} from './utils';\r\n\r\nexport default function AllInputControl( {\r\n\tonChange,\r\n\tselectedUnits,\r\n\tsetSelectedUnits,\r\n\tvalues,\r\n\t...props\r\n} ) {\r\n\tlet allValue = getAllValue( values );\r\n\r\n\tif ( allValue === undefined ) {\r\n\t\t// If we don't have any value set the unit to any current selection\r\n\t\t// or the most common unit from the individual radii values.\r\n\t\tallValue = getAllUnit( selectedUnits );\r\n\t}\r\n\r\n\tconst hasValues = hasDefinedValues( values );\r\n\tconst isMixed = hasValues && hasMixedValues( values );\r\n\tconst allPlaceholder = isMixed ? __( 'Mixed' ) : null;\r\n\r\n\t// Filter out CSS-unit-only values to prevent invalid styles.\r\n\tconst handleOnChange = ( next ) => {\r\n\t\tconst isNumeric = ! isNaN( parseFloat( next ) );\r\n\t\tconst nextValue = isNumeric ? next : undefined;\r\n\t\tonChange( nextValue );\r\n\t};\r\n\r\n\t// Store current unit selection for use as fallback for individual\r\n\t// radii controls.\r\n\tconst handleOnUnitChange = ( unit ) => {\r\n\t\tsetSelectedUnits( {\r\n\t\t\ttopLeft: unit,\r\n\t\t\ttopRight: unit,\r\n\t\t\tbottomLeft: unit,\r\n\t\t\tbottomRight: unit,\r\n\t\t} );\r\n\t};\r\n\r\n\treturn (\r\n\t\t<UnitControl\r\n\t\t\t{ ...props }\r\n\t\t\taria-label={ __( 'Border radius' ) }\r\n\t\t\tdisableUnits={ isMixed }\r\n\t\t\tisOnly\r\n\t\t\tvalue={ allValue }\r\n\t\t\tonChange={ handleOnChange }\r\n\t\t\tonUnitChange={ handleOnUnitChange }\r\n\t\t\tplaceholder={ allPlaceholder }\r\n\t\t\tsize={ '__unstable-large' }\r\n\t\t/>\r\n\t);\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\t__experimentalParseQuantityAndUnitFromRawValue as parseQuantityAndUnitFromRawValue,\r\n\t__experimentalUnitControl as UnitControl,\r\n\tTooltip,\r\n} from '@wordpress/components';\r\nimport { __ } from '@wordpress/i18n';\r\n\r\nconst CORNERS = {\r\n\ttopLeft: __( 'Top left' ),\r\n\ttopRight: __( 'Top right' ),\r\n\tbottomLeft: __( 'Bottom left' ),\r\n\tbottomRight: __( 'Bottom right' ),\r\n};\r\n\r\nexport default function BoxInputControls( {\r\n\tonChange,\r\n\tselectedUnits,\r\n\tsetSelectedUnits,\r\n\tvalues: valuesProp,\r\n\t...props\r\n} ) {\r\n\tconst createHandleOnChange = ( corner ) => ( next ) => {\r\n\t\tif ( ! onChange ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Filter out CSS-unit-only values to prevent invalid styles.\r\n\t\tconst isNumeric = ! isNaN( parseFloat( next ) );\r\n\t\tconst nextValue = isNumeric ? next : undefined;\r\n\r\n\t\tonChange( {\r\n\t\t\t...values,\r\n\t\t\t[ corner ]: nextValue,\r\n\t\t} );\r\n\t};\r\n\r\n\tconst createHandleOnUnitChange = ( side ) => ( next ) => {\r\n\t\tconst newUnits = { ...selectedUnits };\r\n\t\tnewUnits[ side ] = next;\r\n\t\tsetSelectedUnits( newUnits );\r\n\t};\r\n\r\n\t// For shorthand style & backwards compatibility, handle flat string value.\r\n\tconst values =\r\n\t\ttypeof valuesProp !== 'string'\r\n\t\t\t? valuesProp\r\n\t\t\t: {\r\n\t\t\t\t\ttopLeft: valuesProp,\r\n\t\t\t\t\ttopRight: valuesProp,\r\n\t\t\t\t\tbottomLeft: valuesProp,\r\n\t\t\t\t\tbottomRight: valuesProp,\r\n\t\t\t  };\r\n\r\n\t// Controls are wrapped in tooltips as visible labels aren't desired here.\r\n\t// Tooltip rendering also requires the UnitControl to be wrapped. See:\r\n\t// https://github.com/WordPress/gutenberg/pull/24966#issuecomment-685875026\r\n\treturn (\r\n\t\t<div className=\"components-border-radius-control__input-controls-wrapper\">\r\n\t\t\t{ Object.entries( CORNERS ).map( ( [ corner, label ] ) => {\r\n\t\t\t\tconst [ parsedQuantity, parsedUnit ] =\r\n\t\t\t\t\tparseQuantityAndUnitFromRawValue( values[ corner ] );\r\n\r\n\t\t\t\tconst computedUnit = values[ corner ]\r\n\t\t\t\t\t? parsedUnit\r\n\t\t\t\t\t: selectedUnits[ corner ] || selectedUnits.flat;\r\n\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<Tooltip text={ label } placement=\"top\" key={ corner }>\r\n\t\t\t\t\t\t<div className=\"components-border-radius-control__tooltip-wrapper\">\r\n\t\t\t\t\t\t\t<UnitControl\r\n\t\t\t\t\t\t\t\t{ ...props }\r\n\t\t\t\t\t\t\t\taria-label={ label }\r\n\t\t\t\t\t\t\t\tvalue={ [ parsedQuantity, computedUnit ].join(\r\n\t\t\t\t\t\t\t\t\t''\r\n\t\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\t\tonChange={ createHandleOnChange( corner ) }\r\n\t\t\t\t\t\t\t\tonUnitChange={ createHandleOnUnitChange(\r\n\t\t\t\t\t\t\t\t\tcorner\r\n\t\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\t\tsize={ '__unstable-large' }\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</Tooltip>\r\n\t\t\t\t);\r\n\t\t\t} ) }\r\n\t\t</div>\r\n\t);\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst link = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M10 17.389H8.444A5.194 5.194 0 1 1 8.444 7H10v1.5H8.444a3.694 3.694 0 0 0 0 7.389H10v1.5ZM14 7h1.556a5.194 5.194 0 0 1 0 10.39H14v-1.5h1.556a3.694 3.694 0 0 0 0-7.39H14V7Zm-4.5 6h5v-1.5h-5V13Z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default link;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { Button, Tooltip } from '@wordpress/components';\r\nimport { link, linkOff } from '@wordpress/icons';\r\nimport { __ } from '@wordpress/i18n';\r\n\r\nexport default function LinkedButton( { isLinked, ...props } ) {\r\n\tconst label = isLinked ? __( 'Unlink radii' ) : __( 'Link radii' );\r\n\r\n\treturn (\r\n\t\t<Tooltip text={ label }>\r\n\t\t\t<Button\r\n\t\t\t\t{ ...props }\r\n\t\t\t\tclassName=\"component-border-radius-control__linked-button\"\r\n\t\t\t\tsize=\"small\"\r\n\t\t\t\ticon={ isLinked ? link : linkOff }\r\n\t\t\t\ticonSize={ 24 }\r\n\t\t\t\taria-label={ label }\r\n\t\t\t/>\r\n\t\t</Tooltip>\r\n\t);\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\tBaseControl,\r\n\tRangeControl,\r\n\t__experimentalParseQuantityAndUnitFromRawValue as parseQuantityAndUnitFromRawValue,\r\n\t__experimentalUseCustomUnits as useCustomUnits,\r\n} from '@wordpress/components';\r\nimport { useState } from '@wordpress/element';\r\nimport { __ } from '@wordpress/i18n';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport AllInputControl from './all-input-control';\r\nimport InputControls from './input-controls';\r\nimport LinkedButton from './linked-button';\r\nimport { useSettings } from '../use-settings';\r\nimport {\r\n\tgetAllValue,\r\n\tgetAllUnit,\r\n\thasDefinedValues,\r\n\thasMixedValues,\r\n} from './utils';\r\n\r\nconst DEFAULT_VALUES = {\r\n\ttopLeft: undefined,\r\n\ttopRight: undefined,\r\n\tbottomLeft: undefined,\r\n\tbottomRight: undefined,\r\n};\r\nconst MIN_BORDER_RADIUS_VALUE = 0;\r\nconst MAX_BORDER_RADIUS_VALUES = {\r\n\tpx: 100,\r\n\tem: 20,\r\n\trem: 20,\r\n};\r\n\r\n/**\r\n * Control to display border radius options.\r\n *\r\n * @param {Object}   props          Component props.\r\n * @param {Function} props.onChange Callback to handle onChange.\r\n * @param {Object}   props.values   Border radius values.\r\n *\r\n * @return {Element}              Custom border radius control.\r\n */\r\nexport default function BorderRadiusControl( { onChange, values } ) {\r\n\tconst [ isLinked, setIsLinked ] = useState(\r\n\t\t! hasDefinedValues( values ) || ! hasMixedValues( values )\r\n\t);\r\n\r\n\t// Tracking selected units via internal state allows filtering of CSS unit\r\n\t// only values from being saved while maintaining preexisting unit selection\r\n\t// behaviour. Filtering CSS unit only values prevents invalid style values.\r\n\tconst [ selectedUnits, setSelectedUnits ] = useState( {\r\n\t\tflat:\r\n\t\t\ttypeof values === 'string'\r\n\t\t\t\t? parseQuantityAndUnitFromRawValue( values )[ 1 ]\r\n\t\t\t\t: undefined,\r\n\t\ttopLeft: parseQuantityAndUnitFromRawValue( values?.topLeft )[ 1 ],\r\n\t\ttopRight: parseQuantityAndUnitFromRawValue( values?.topRight )[ 1 ],\r\n\t\tbottomLeft: parseQuantityAndUnitFromRawValue( values?.bottomLeft )[ 1 ],\r\n\t\tbottomRight: parseQuantityAndUnitFromRawValue(\r\n\t\t\tvalues?.bottomRight\r\n\t\t)[ 1 ],\r\n\t} );\r\n\r\n\tconst [ availableUnits ] = useSettings( 'spacing.units' );\r\n\tconst units = useCustomUnits( {\r\n\t\tavailableUnits: availableUnits || [ 'px', 'em', 'rem' ],\r\n\t} );\r\n\r\n\tconst unit = getAllUnit( selectedUnits );\r\n\tconst unitConfig = units && units.find( ( item ) => item.value === unit );\r\n\tconst step = unitConfig?.step || 1;\r\n\r\n\tconst [ allValue ] = parseQuantityAndUnitFromRawValue(\r\n\t\tgetAllValue( values )\r\n\t);\r\n\r\n\tconst toggleLinked = () => setIsLinked( ! isLinked );\r\n\r\n\tconst handleSliderChange = ( next ) => {\r\n\t\tonChange( next !== undefined ? `${ next }${ unit }` : undefined );\r\n\t};\r\n\r\n\treturn (\r\n\t\t<fieldset className=\"components-border-radius-control\">\r\n\t\t\t<BaseControl.VisualLabel as=\"legend\">\r\n\t\t\t\t{ __( 'Radius' ) }\r\n\t\t\t</BaseControl.VisualLabel>\r\n\t\t\t<div className=\"components-border-radius-control__wrapper\">\r\n\t\t\t\t{ isLinked ? (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<AllInputControl\r\n\t\t\t\t\t\t\tclassName=\"components-border-radius-control__unit-control\"\r\n\t\t\t\t\t\t\tvalues={ values }\r\n\t\t\t\t\t\t\tmin={ MIN_BORDER_RADIUS_VALUE }\r\n\t\t\t\t\t\t\tonChange={ onChange }\r\n\t\t\t\t\t\t\tselectedUnits={ selectedUnits }\r\n\t\t\t\t\t\t\tsetSelectedUnits={ setSelectedUnits }\r\n\t\t\t\t\t\t\tunits={ units }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<RangeControl\r\n\t\t\t\t\t\t\tlabel={ __( 'Border radius' ) }\r\n\t\t\t\t\t\t\thideLabelFromVision\r\n\t\t\t\t\t\t\tclassName=\"components-border-radius-control__range-control\"\r\n\t\t\t\t\t\t\tvalue={ allValue ?? '' }\r\n\t\t\t\t\t\t\tmin={ MIN_BORDER_RADIUS_VALUE }\r\n\t\t\t\t\t\t\tmax={ MAX_BORDER_RADIUS_VALUES[ unit ] }\r\n\t\t\t\t\t\t\tinitialPosition={ 0 }\r\n\t\t\t\t\t\t\twithInputField={ false }\r\n\t\t\t\t\t\t\tonChange={ handleSliderChange }\r\n\t\t\t\t\t\t\tstep={ step }\r\n\t\t\t\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<InputControls\r\n\t\t\t\t\t\tmin={ MIN_BORDER_RADIUS_VALUE }\r\n\t\t\t\t\t\tonChange={ onChange }\r\n\t\t\t\t\t\tselectedUnits={ selectedUnits }\r\n\t\t\t\t\t\tsetSelectedUnits={ setSelectedUnits }\r\n\t\t\t\t\t\tvalues={ values || DEFAULT_VALUES }\r\n\t\t\t\t\t\tunits={ units }\r\n\t\t\t\t\t/>\r\n\t\t\t\t) }\r\n\t\t\t\t<LinkedButton onClick={ toggleLinked } isLinked={ isLinked } />\r\n\t\t\t</div>\r\n\t\t</fieldset>\r\n\t);\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst check = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M16.7 7.1l-6.3 8.5-3.3-2.5-.9 1.2 4.5 3.4L17.9 8z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default check;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { Path, SVG } from '@wordpress/primitives';\r\n\r\nconst shadow = (\r\n\t<SVG viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n\t\t<Path d=\"M12 8c-2.2 0-4 1.8-4 4s1.8 4 4 4 4-1.8 4-4-1.8-4-4-4zm0 6.5c-1.4 0-2.5-1.1-2.5-2.5s1.1-2.5 2.5-2.5 2.5 1.1 2.5 2.5-1.1 2.5-2.5 2.5zM12.8 3h-1.5v3h1.5V3zm-1.6 18h1.5v-3h-1.5v3zm6.8-9.8v1.5h3v-1.5h-3zm-12 0H3v1.5h3v-1.5zm9.7 5.6 2.1 2.1 1.1-1.1-2.1-2.1-1.1 1.1zM8.3 7.2 6.2 5.1 5.1 6.2l2.1 2.1 1.1-1.1zM5.1 17.8l1.1 1.1 2.1-2.1-1.1-1.1-2.1 2.1zM18.9 6.2l-1.1-1.1-2.1 2.1 1.1 1.1 2.1-2.1z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default shadow;\r\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport {\n\t__experimentalVStack as VStack,\n\t__experimentalHeading as Heading,\n\t__experimentalHStack as HStack,\n\t__experimentalDropdownContentWrapper as DropdownContentWrapper,\n\tButton,\n\tFlexItem,\n\tDropdown,\n\tprivateApis as componentsPrivateApis,\n} from '@wordpress/components';\nimport { useMemo } from '@wordpress/element';\nimport { shadow as shadowIcon, Icon, check } from '@wordpress/icons';\n\n/**\n * External dependencies\n */\nimport classNames from 'classnames';\n\n/**\n * Internal dependencies\n */\nimport { unlock } from '../../lock-unlock';\n\n/**\n * Shared reference to an empty array for cases where it is important to avoid\n * returning a new array reference on every invocation.\n *\n * @type {Array}\n */\nconst EMPTY_ARRAY = [];\n\nexport function ShadowPopoverContainer( { shadow, onShadowChange, settings } ) {\n\tconst shadows = useShadowPresets( settings );\n\n\treturn (\n\t\t<div className=\"block-editor-global-styles__shadow-popover-container\">\n\t\t\t<VStack spacing={ 4 }>\n\t\t\t\t<Heading level={ 5 }>{ __( 'Drop shadow' ) }</Heading>\n\t\t\t\t<ShadowPresets\n\t\t\t\t\tpresets={ shadows }\n\t\t\t\t\tactiveShadow={ shadow }\n\t\t\t\t\tonSelect={ onShadowChange }\n\t\t\t\t/>\n\t\t\t\t<div className=\"block-editor-global-styles__clear-shadow\">\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant=\"tertiary\"\n\t\t\t\t\t\tonClick={ () => onShadowChange( undefined ) }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Clear' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</VStack>\n\t\t</div>\n\t);\n}\n\nexport function ShadowPresets( { presets, activeShadow, onSelect } ) {\n\tconst { CompositeV2: Composite, useCompositeStoreV2: useCompositeStore } =\n\t\tunlock( componentsPrivateApis );\n\tconst compositeStore = useCompositeStore();\n\treturn ! presets ? null : (\n\t\t<Composite\n\t\t\tstore={ compositeStore }\n\t\t\trole=\"listbox\"\n\t\t\tclassName=\"block-editor-global-styles__shadow__list\"\n\t\t\taria-label={ __( 'Drop shadows' ) }\n\t\t>\n\t\t\t{ presets.map( ( { name, slug, shadow } ) => (\n\t\t\t\t<ShadowIndicator\n\t\t\t\t\tkey={ slug }\n\t\t\t\t\tlabel={ name }\n\t\t\t\t\tisActive={ shadow === activeShadow }\n\t\t\t\t\ttype={ slug === 'unset' ? 'unset' : 'preset' }\n\t\t\t\t\tonSelect={ () =>\n\t\t\t\t\t\tonSelect( shadow === activeShadow ? undefined : shadow )\n\t\t\t\t\t}\n\t\t\t\t\tshadow={ shadow }\n\t\t\t\t/>\n\t\t\t) ) }\n\t\t</Composite>\n\t);\n}\n\nexport function ShadowIndicator( { type, label, isActive, onSelect, shadow } ) {\n\tconst { CompositeItemV2: CompositeItem } = unlock( componentsPrivateApis );\n\treturn (\n\t\t<CompositeItem\n\t\t\trole=\"option\"\n\t\t\taria-label={ label }\n\t\t\taria-selected={ isActive }\n\t\t\tclassName={ classNames(\n\t\t\t\t'block-editor-global-styles__shadow__item',\n\t\t\t\t{\n\t\t\t\t\t'is-active': isActive,\n\t\t\t\t}\n\t\t\t) }\n\t\t\trender={\n\t\t\t\t<Button\n\t\t\t\t\tclassName={ classNames(\n\t\t\t\t\t\t'block-editor-global-styles__shadow-indicator',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tunset: type === 'unset',\n\t\t\t\t\t\t}\n\t\t\t\t\t) }\n\t\t\t\t\tonClick={ onSelect }\n\t\t\t\t\tlabel={ label }\n\t\t\t\t\tstyle={ { boxShadow: shadow } }\n\t\t\t\t\tshowTooltip\n\t\t\t\t>\n\t\t\t\t\t{ isActive && <Icon icon={ check } /> }\n\t\t\t\t</Button>\n\t\t\t}\n\t\t/>\n\t);\n}\n\nexport function ShadowPopover( { shadow, onShadowChange, settings } ) {\n\tconst popoverProps = {\n\t\tplacement: 'left-start',\n\t\toffset: 36,\n\t\tshift: true,\n\t};\n\n\treturn (\n\t\t<Dropdown\n\t\t\tpopoverProps={ popoverProps }\n\t\t\tclassName=\"block-editor-global-styles__shadow-dropdown\"\n\t\t\trenderToggle={ renderShadowToggle() }\n\t\t\trenderContent={ () => (\n\t\t\t\t<DropdownContentWrapper paddingSize=\"medium\">\n\t\t\t\t\t<ShadowPopoverContainer\n\t\t\t\t\t\tshadow={ shadow }\n\t\t\t\t\t\tonShadowChange={ onShadowChange }\n\t\t\t\t\t\tsettings={ settings }\n\t\t\t\t\t/>\n\t\t\t\t</DropdownContentWrapper>\n\t\t\t) }\n\t\t/>\n\t);\n}\n\nfunction renderShadowToggle() {\n\treturn ( { onToggle, isOpen } ) => {\n\t\tconst toggleProps = {\n\t\t\tonClick: onToggle,\n\t\t\tclassName: classNames( { 'is-open': isOpen } ),\n\t\t\t'aria-expanded': isOpen,\n\t\t};\n\n\t\treturn (\n\t\t\t<Button { ...toggleProps }>\n\t\t\t\t<HStack justify=\"flex-start\">\n\t\t\t\t\t<Icon\n\t\t\t\t\t\tclassName=\"block-editor-global-styles__toggle-icon\"\n\t\t\t\t\t\ticon={ shadowIcon }\n\t\t\t\t\t\tsize={ 24 }\n\t\t\t\t\t/>\n\t\t\t\t\t<FlexItem>{ __( 'Drop shadow' ) }</FlexItem>\n\t\t\t\t</HStack>\n\t\t\t</Button>\n\t\t);\n\t};\n}\n\nexport function useShadowPresets( settings ) {\n\treturn useMemo( () => {\n\t\tif ( ! settings?.shadow ) {\n\t\t\treturn EMPTY_ARRAY;\n\t\t}\n\n\t\tconst defaultPresetsEnabled = settings?.shadow?.defaultPresets;\n\t\tconst { default: defaultShadows, theme: themeShadows } =\n\t\t\tsettings?.shadow?.presets ?? {};\n\t\tconst unsetShadow = {\n\t\t\tname: __( 'Unset' ),\n\t\t\tslug: 'unset',\n\t\t\tshadow: 'none',\n\t\t};\n\n\t\tconst shadowPresets = [\n\t\t\t...( ( defaultPresetsEnabled && defaultShadows ) || EMPTY_ARRAY ),\n\t\t\t...( themeShadows || EMPTY_ARRAY ),\n\t\t];\n\t\tif ( shadowPresets.length ) {\n\t\t\tshadowPresets.unshift( unsetShadow );\n\t\t}\n\n\t\treturn shadowPresets;\n\t}, [ settings ] );\n}\n","/**\n * WordPress dependencies\n */\nimport {\n\t__experimentalBorderBoxControl as BorderBoxControl,\n\t__experimentalHasSplitBorders as hasSplitBorders,\n\t__experimentalIsDefinedBorder as isDefinedBorder,\n\t__experimentalToolsPanel as ToolsPanel,\n\t__experimentalToolsPanelItem as ToolsPanelItem,\n\t__experimentalItemGroup as ItemGroup,\n\tBaseControl,\n} from '@wordpress/components';\nimport { useCallback, useMemo } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport BorderRadiusControl from '../border-radius-control';\nimport { useColorsPerOrigin } from './hooks';\nimport { getValueFromVariable, TOOLSPANEL_DROPDOWNMENU_PROPS } from './utils';\nimport { overrideOrigins } from '../../store/get-block-settings';\nimport { setImmutably } from '../../utils/object';\nimport { useBorderPanelLabel } from '../../hooks/border';\nimport { ShadowPopover, useShadowPresets } from './shadow-panel-components';\n\nexport function useHasBorderPanel( settings ) {\n\tconst controls = Object.values( useHasBorderPanelControls( settings ) );\n\treturn controls.some( Boolean );\n}\n\nexport function useHasBorderPanelControls( settings ) {\n\tconst controls = {\n\t\thasBorderColor: useHasBorderColorControl( settings ),\n\t\thasBorderRadius: useHasBorderRadiusControl( settings ),\n\t\thasBorderStyle: useHasBorderStyleControl( settings ),\n\t\thasBorderWidth: useHasBorderWidthControl( settings ),\n\t\thasShadow: useHasShadowControl( settings ),\n\t};\n\n\treturn controls;\n}\n\nfunction useHasBorderColorControl( settings ) {\n\treturn settings?.border?.color;\n}\n\nfunction useHasBorderRadiusControl( settings ) {\n\treturn settings?.border?.radius;\n}\n\nfunction useHasBorderStyleControl( settings ) {\n\treturn settings?.border?.style;\n}\n\nfunction useHasBorderWidthControl( settings ) {\n\treturn settings?.border?.width;\n}\n\nfunction useHasShadowControl( settings ) {\n\tconst shadows = useShadowPresets( settings );\n\treturn !! settings?.shadow && shadows.length > 0;\n}\n\nfunction BorderToolsPanel( {\n\tresetAllFilter,\n\tonChange,\n\tvalue,\n\tpanelId,\n\tchildren,\n\tlabel,\n} ) {\n\tconst resetAll = () => {\n\t\tconst updatedValue = resetAllFilter( value );\n\t\tonChange( updatedValue );\n\t};\n\n\treturn (\n\t\t<ToolsPanel\n\t\t\tlabel={ label }\n\t\t\tresetAll={ resetAll }\n\t\t\tpanelId={ panelId }\n\t\t\tdropdownMenuProps={ TOOLSPANEL_DROPDOWNMENU_PROPS }\n\t\t>\n\t\t\t{ children }\n\t\t</ToolsPanel>\n\t);\n}\n\nconst DEFAULT_CONTROLS = {\n\tradius: true,\n\tcolor: true,\n\twidth: true,\n\tshadow: false,\n};\n\nexport default function BorderPanel( {\n\tas: Wrapper = BorderToolsPanel,\n\tvalue,\n\tonChange,\n\tinheritedValue = value,\n\tsettings,\n\tpanelId,\n\tname,\n\tdefaultControls = DEFAULT_CONTROLS,\n} ) {\n\tconst colors = useColorsPerOrigin( settings );\n\tconst decodeValue = useCallback(\n\t\t( rawValue ) => getValueFromVariable( { settings }, '', rawValue ),\n\t\t[ settings ]\n\t);\n\tconst encodeColorValue = ( colorValue ) => {\n\t\tconst allColors = colors.flatMap(\n\t\t\t( { colors: originColors } ) => originColors\n\t\t);\n\t\tconst colorObject = allColors.find(\n\t\t\t( { color } ) => color === colorValue\n\t\t);\n\t\treturn colorObject\n\t\t\t? 'var:preset|color|' + colorObject.slug\n\t\t\t: colorValue;\n\t};\n\tconst border = useMemo( () => {\n\t\tif ( hasSplitBorders( inheritedValue?.border ) ) {\n\t\t\tconst borderValue = { ...inheritedValue?.border };\n\t\t\t[ 'top', 'right', 'bottom', 'left' ].forEach( ( side ) => {\n\t\t\t\tborderValue[ side ] = {\n\t\t\t\t\t...borderValue[ side ],\n\t\t\t\t\tcolor: decodeValue( borderValue[ side ]?.color ),\n\t\t\t\t};\n\t\t\t} );\n\t\t\treturn borderValue;\n\t\t}\n\t\treturn {\n\t\t\t...inheritedValue?.border,\n\t\t\tcolor: inheritedValue?.border?.color\n\t\t\t\t? decodeValue( inheritedValue?.border?.color )\n\t\t\t\t: undefined,\n\t\t};\n\t}, [ inheritedValue?.border, decodeValue ] );\n\tconst setBorder = ( newBorder ) =>\n\t\tonChange( { ...value, border: newBorder } );\n\tconst showBorderColor = useHasBorderColorControl( settings );\n\tconst showBorderStyle = useHasBorderStyleControl( settings );\n\tconst showBorderWidth = useHasBorderWidthControl( settings );\n\n\t// Border radius.\n\tconst showBorderRadius = useHasBorderRadiusControl( settings );\n\tconst borderRadiusValues = decodeValue( border?.radius );\n\tconst setBorderRadius = ( newBorderRadius ) =>\n\t\tsetBorder( { ...border, radius: newBorderRadius } );\n\tconst hasBorderRadius = () => {\n\t\tconst borderValues = value?.border?.radius;\n\t\tif ( typeof borderValues === 'object' ) {\n\t\t\treturn Object.entries( borderValues ).some( Boolean );\n\t\t}\n\t\treturn !! borderValues;\n\t};\n\tconst hasShadowControl = useHasShadowControl( settings );\n\n\t// Shadow\n\tconst shadow = decodeValue( inheritedValue?.shadow );\n\tconst shadowPresets = settings?.shadow?.presets ?? {};\n\tconst overriddenShadowPresets = overrideOrigins( shadowPresets ) ?? [];\n\tconst setShadow = ( newValue ) => {\n\t\tconst slug = overriddenShadowPresets?.find(\n\t\t\t( { shadow: shadowName } ) => shadowName === newValue\n\t\t)?.slug;\n\n\t\tonChange(\n\t\t\tsetImmutably(\n\t\t\t\tvalue,\n\t\t\t\t[ 'shadow' ],\n\t\t\t\tslug ? `var:preset|shadow|${ slug }` : newValue || undefined\n\t\t\t)\n\t\t);\n\t};\n\tconst hasShadow = () => !! value?.shadow;\n\tconst resetShadow = () => setShadow( undefined );\n\n\tconst resetBorder = () => {\n\t\tif ( hasBorderRadius() ) {\n\t\t\treturn setBorder( { radius: value?.border?.radius } );\n\t\t}\n\n\t\tsetBorder( undefined );\n\t};\n\n\tconst onBorderChange = ( newBorder ) => {\n\t\t// Ensure we have a visible border style when a border width or\n\t\t// color is being selected.\n\t\tconst updatedBorder = { ...newBorder };\n\n\t\tif ( hasSplitBorders( updatedBorder ) ) {\n\t\t\t[ 'top', 'right', 'bottom', 'left' ].forEach( ( side ) => {\n\t\t\t\tif ( updatedBorder[ side ] ) {\n\t\t\t\t\tupdatedBorder[ side ] = {\n\t\t\t\t\t\t...updatedBorder[ side ],\n\t\t\t\t\t\tcolor: encodeColorValue( updatedBorder[ side ]?.color ),\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t} );\n\t\t} else if ( updatedBorder ) {\n\t\t\tupdatedBorder.color = encodeColorValue( updatedBorder.color );\n\t\t}\n\n\t\t// As radius is maintained separately to color, style, and width\n\t\t// maintain its value. Undefined values here will be cleaned when\n\t\t// global styles are saved.\n\t\tsetBorder( { radius: border?.radius, ...updatedBorder } );\n\t};\n\n\tconst resetAllFilter = useCallback( ( previousValue ) => {\n\t\treturn {\n\t\t\t...previousValue,\n\t\t\tborder: undefined,\n\t\t\tshadow: undefined,\n\t\t};\n\t}, [] );\n\n\tconst showBorderByDefault =\n\t\tdefaultControls?.color || defaultControls?.width;\n\n\tconst hasBorderControl =\n\t\tshowBorderColor ||\n\t\tshowBorderStyle ||\n\t\tshowBorderWidth ||\n\t\tshowBorderRadius;\n\n\tconst label = useBorderPanelLabel( {\n\t\tblockName: name,\n\t\thasShadowControl,\n\t\thasBorderControl,\n\t} );\n\n\treturn (\n\t\t<Wrapper\n\t\t\tresetAllFilter={ resetAllFilter }\n\t\t\tvalue={ value }\n\t\t\tonChange={ onChange }\n\t\t\tpanelId={ panelId }\n\t\t\tlabel={ label }\n\t\t>\n\t\t\t{ ( showBorderWidth || showBorderColor ) && (\n\t\t\t\t<ToolsPanelItem\n\t\t\t\t\thasValue={ () => isDefinedBorder( value?.border ) }\n\t\t\t\t\tlabel={ __( 'Border' ) }\n\t\t\t\t\tonDeselect={ () => resetBorder() }\n\t\t\t\t\tisShownByDefault={ showBorderByDefault }\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t>\n\t\t\t\t\t<BorderBoxControl\n\t\t\t\t\t\tcolors={ colors }\n\t\t\t\t\t\tenableAlpha\n\t\t\t\t\t\tenableStyle={ showBorderStyle }\n\t\t\t\t\t\tonChange={ onBorderChange }\n\t\t\t\t\t\tpopoverOffset={ 40 }\n\t\t\t\t\t\tpopoverPlacement=\"left-start\"\n\t\t\t\t\t\tvalue={ border }\n\t\t\t\t\t\t__experimentalIsRenderedInSidebar\n\t\t\t\t\t\tsize={ '__unstable-large' }\n\t\t\t\t\t\thideLabelFromVision={ ! hasShadowControl }\n\t\t\t\t\t\tlabel={ __( 'Border' ) }\n\t\t\t\t\t/>\n\t\t\t\t</ToolsPanelItem>\n\t\t\t) }\n\t\t\t{ showBorderRadius && (\n\t\t\t\t<ToolsPanelItem\n\t\t\t\t\thasValue={ hasBorderRadius }\n\t\t\t\t\tlabel={ __( 'Radius' ) }\n\t\t\t\t\tonDeselect={ () => setBorderRadius( undefined ) }\n\t\t\t\t\tisShownByDefault={ defaultControls.radius }\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t>\n\t\t\t\t\t<BorderRadiusControl\n\t\t\t\t\t\tvalues={ borderRadiusValues }\n\t\t\t\t\t\tonChange={ ( newValue ) => {\n\t\t\t\t\t\t\tsetBorderRadius( newValue || undefined );\n\t\t\t\t\t\t} }\n\t\t\t\t\t/>\n\t\t\t\t</ToolsPanelItem>\n\t\t\t) }\n\t\t\t{ hasShadowControl && (\n\t\t\t\t<ToolsPanelItem\n\t\t\t\t\tlabel={ __( 'Shadow' ) }\n\t\t\t\t\thasValue={ hasShadow }\n\t\t\t\t\tonDeselect={ resetShadow }\n\t\t\t\t\tisShownByDefault={ defaultControls.shadow }\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t>\n\t\t\t\t\t{ hasBorderControl ? (\n\t\t\t\t\t\t<BaseControl.VisualLabel as=\"legend\">\n\t\t\t\t\t\t\t{ __( 'Shadow' ) }\n\t\t\t\t\t\t</BaseControl.VisualLabel>\n\t\t\t\t\t) : null }\n\n\t\t\t\t\t<ItemGroup isBordered isSeparated>\n\t\t\t\t\t\t<ShadowPopover\n\t\t\t\t\t\t\tshadow={ shadow }\n\t\t\t\t\t\t\tonShadowChange={ setShadow }\n\t\t\t\t\t\t\tsettings={ settings }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ItemGroup>\n\t\t\t\t</ToolsPanelItem>\n\t\t\t) }\n\t\t</Wrapper>\n\t);\n}\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { hasBlockSupport, getBlockSupport } from '@wordpress/blocks';\nimport { __experimentalHasSplitBorders as hasSplitBorders } from '@wordpress/components';\nimport { Platform, useCallback, useMemo } from '@wordpress/element';\nimport { addFilter } from '@wordpress/hooks';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { getColorClassName } from '../components/colors';\nimport InspectorControls from '../components/inspector-controls';\nimport useMultipleOriginColorsAndGradients from '../components/colors-gradients/use-multiple-origin-colors-and-gradients';\nimport {\n\tcleanEmptyObject,\n\tshouldSkipSerialization,\n\tuseBlockSettings,\n} from './utils';\nimport {\n\tuseHasBorderPanel,\n\tuseHasBorderPanelControls,\n\tBorderPanel as StylesBorderPanel,\n} from '../components/global-styles';\nimport { store as blockEditorStore } from '../store';\nimport { __ } from '@wordpress/i18n';\n\nexport const BORDER_SUPPORT_KEY = '__experimentalBorder';\nexport const SHADOW_SUPPORT_KEY = 'shadow';\n\nconst getColorByProperty = ( colors, property, value ) => {\n\tlet matchedColor;\n\n\tcolors.some( ( origin ) =>\n\t\torigin.colors.some( ( color ) => {\n\t\t\tif ( color[ property ] === value ) {\n\t\t\t\tmatchedColor = color;\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t} )\n\t);\n\n\treturn matchedColor;\n};\n\nexport const getMultiOriginColor = ( { colors, namedColor, customColor } ) => {\n\t// Search each origin (default, theme, or user) for matching color by name.\n\tif ( namedColor ) {\n\t\tconst colorObject = getColorByProperty( colors, 'slug', namedColor );\n\t\tif ( colorObject ) {\n\t\t\treturn colorObject;\n\t\t}\n\t}\n\n\t// Skip if no custom color or matching named color.\n\tif ( ! customColor ) {\n\t\treturn { color: undefined };\n\t}\n\n\t// Attempt to find color via custom color value or build new object.\n\tconst colorObject = getColorByProperty( colors, 'color', customColor );\n\treturn colorObject ? colorObject : { color: customColor };\n};\n\nfunction getColorSlugFromVariable( value ) {\n\tconst namedColor = /var:preset\\|color\\|(.+)/.exec( value );\n\tif ( namedColor && namedColor[ 1 ] ) {\n\t\treturn namedColor[ 1 ];\n\t}\n\treturn null;\n}\n\nfunction styleToAttributes( style ) {\n\tif ( hasSplitBorders( style?.border ) ) {\n\t\treturn {\n\t\t\tstyle,\n\t\t\tborderColor: undefined,\n\t\t};\n\t}\n\n\tconst borderColorValue = style?.border?.color;\n\tconst borderColorSlug = borderColorValue?.startsWith( 'var:preset|color|' )\n\t\t? borderColorValue.substring( 'var:preset|color|'.length )\n\t\t: undefined;\n\tconst updatedStyle = { ...style };\n\tupdatedStyle.border = {\n\t\t...updatedStyle.border,\n\t\tcolor: borderColorSlug ? undefined : borderColorValue,\n\t};\n\treturn {\n\t\tstyle: cleanEmptyObject( updatedStyle ),\n\t\tborderColor: borderColorSlug,\n\t};\n}\n\nfunction attributesToStyle( attributes ) {\n\tif ( hasSplitBorders( attributes.style?.border ) ) {\n\t\treturn attributes.style;\n\t}\n\treturn {\n\t\t...attributes.style,\n\t\tborder: {\n\t\t\t...attributes.style?.border,\n\t\t\tcolor: attributes.borderColor\n\t\t\t\t? 'var:preset|color|' + attributes.borderColor\n\t\t\t\t: attributes.style?.border?.color,\n\t\t},\n\t};\n}\n\nfunction BordersInspectorControl( { label, children, resetAllFilter } ) {\n\tconst attributesResetAllFilter = useCallback(\n\t\t( attributes ) => {\n\t\t\tconst existingStyle = attributesToStyle( attributes );\n\t\t\tconst updatedStyle = resetAllFilter( existingStyle );\n\t\t\treturn {\n\t\t\t\t...attributes,\n\t\t\t\t...styleToAttributes( updatedStyle ),\n\t\t\t};\n\t\t},\n\t\t[ resetAllFilter ]\n\t);\n\n\treturn (\n\t\t<InspectorControls\n\t\t\tgroup=\"border\"\n\t\t\tresetAllFilter={ attributesResetAllFilter }\n\t\t\tlabel={ label }\n\t\t>\n\t\t\t{ children }\n\t\t</InspectorControls>\n\t);\n}\n\nexport function BorderPanel( { clientId, name, setAttributes, settings } ) {\n\tconst isEnabled = useHasBorderPanel( settings );\n\tfunction selector( select ) {\n\t\tconst { style, borderColor } =\n\t\t\tselect( blockEditorStore ).getBlockAttributes( clientId ) || {};\n\t\treturn { style, borderColor };\n\t}\n\tconst { style, borderColor } = useSelect( selector, [ clientId ] );\n\tconst value = useMemo( () => {\n\t\treturn attributesToStyle( { style, borderColor } );\n\t}, [ style, borderColor ] );\n\n\tconst onChange = ( newStyle ) => {\n\t\tsetAttributes( styleToAttributes( newStyle ) );\n\t};\n\n\tif ( ! isEnabled ) {\n\t\treturn null;\n\t}\n\n\tconst defaultControls = {\n\t\t...getBlockSupport( name, [\n\t\t\tBORDER_SUPPORT_KEY,\n\t\t\t'__experimentalDefaultControls',\n\t\t] ),\n\t\t...getBlockSupport( name, [\n\t\t\tSHADOW_SUPPORT_KEY,\n\t\t\t'__experimentalDefaultControls',\n\t\t] ),\n\t};\n\n\treturn (\n\t\t<StylesBorderPanel\n\t\t\tas={ BordersInspectorControl }\n\t\t\tpanelId={ clientId }\n\t\t\tsettings={ settings }\n\t\t\tvalue={ value }\n\t\t\tonChange={ onChange }\n\t\t\tdefaultControls={ defaultControls }\n\t\t/>\n\t);\n}\n\n/**\n * Determine whether there is block support for border properties.\n *\n * @param {string} blockName Block name.\n * @param {string} feature   Border feature to check support for.\n *\n * @return {boolean} Whether there is support.\n */\nexport function hasBorderSupport( blockName, feature = 'any' ) {\n\tif ( Platform.OS !== 'web' ) {\n\t\treturn false;\n\t}\n\n\tconst support = getBlockSupport( blockName, BORDER_SUPPORT_KEY );\n\n\tif ( support === true ) {\n\t\treturn true;\n\t}\n\n\tif ( feature === 'any' ) {\n\t\treturn !! (\n\t\t\tsupport?.color ||\n\t\t\tsupport?.radius ||\n\t\t\tsupport?.width ||\n\t\t\tsupport?.style\n\t\t);\n\t}\n\n\treturn !! support?.[ feature ];\n}\n\n/**\n * Determine whether there is block support for shadow properties.\n *\n * @param {string} blockName Block name.\n *\n * @return {boolean} Whether there is support.\n */\nexport function hasShadowSupport( blockName ) {\n\treturn hasBlockSupport( blockName, SHADOW_SUPPORT_KEY );\n}\n\nexport function useBorderPanelLabel( {\n\tblockName,\n\thasBorderControl,\n\thasShadowControl,\n} = {} ) {\n\tconst settings = useBlockSettings( blockName );\n\tconst controls = useHasBorderPanelControls( settings );\n\n\tif ( ! hasBorderControl && ! hasShadowControl && blockName ) {\n\t\thasBorderControl =\n\t\t\tcontrols?.hasBorderColor ||\n\t\t\tcontrols?.hasBorderStyle ||\n\t\t\tcontrols?.hasBorderWidth ||\n\t\t\tcontrols?.hasBorderRadius;\n\t\thasShadowControl = controls?.hasShadow;\n\t}\n\n\tif ( hasBorderControl && hasShadowControl ) {\n\t\treturn __( 'Border & Shadow' );\n\t}\n\n\tif ( hasShadowControl ) {\n\t\treturn __( 'Shadow' );\n\t}\n\n\treturn __( 'Border' );\n}\n\n/**\n * Returns a new style object where the specified border attribute has been\n * removed.\n *\n * @param {Object} style     Styles from block attributes.\n * @param {string} attribute The border style attribute to clear.\n *\n * @return {Object} Style object with the specified attribute removed.\n */\nexport function removeBorderAttribute( style, attribute ) {\n\treturn cleanEmptyObject( {\n\t\t...style,\n\t\tborder: {\n\t\t\t...style?.border,\n\t\t\t[ attribute ]: undefined,\n\t\t},\n\t} );\n}\n\n/**\n * Filters registered block settings, extending attributes to include\n * `borderColor` if needed.\n *\n * @param {Object} settings Original block settings.\n *\n * @return {Object} Updated block settings.\n */\nfunction addAttributes( settings ) {\n\tif ( ! hasBorderSupport( settings, 'color' ) ) {\n\t\treturn settings;\n\t}\n\n\t// Allow blocks to specify default value if needed.\n\tif ( settings.attributes.borderColor ) {\n\t\treturn settings;\n\t}\n\n\t// Add new borderColor attribute to block settings.\n\treturn {\n\t\t...settings,\n\t\tattributes: {\n\t\t\t...settings.attributes,\n\t\t\tborderColor: {\n\t\t\t\ttype: 'string',\n\t\t\t},\n\t\t},\n\t};\n}\n\n/**\n * Override props assigned to save component to inject border color.\n *\n * @param {Object}        props           Additional props applied to save element.\n * @param {Object|string} blockNameOrType Block type definition.\n * @param {Object}        attributes      Block's attributes.\n *\n * @return {Object} Filtered props to apply to save element.\n */\nfunction addSaveProps( props, blockNameOrType, attributes ) {\n\tif (\n\t\t! hasBorderSupport( blockNameOrType, 'color' ) ||\n\t\tshouldSkipSerialization( blockNameOrType, BORDER_SUPPORT_KEY, 'color' )\n\t) {\n\t\treturn props;\n\t}\n\n\tconst borderClasses = getBorderClasses( attributes );\n\tconst newClassName = classnames( props.className, borderClasses );\n\n\t// If we are clearing the last of the previous classes in `className`\n\t// set it to `undefined` to avoid rendering empty DOM attributes.\n\tprops.className = newClassName ? newClassName : undefined;\n\n\treturn props;\n}\n\n/**\n * Generates a CSS class name consisting of all the applicable border color\n * classes given the current block attributes.\n *\n * @param {Object} attributes Block's attributes.\n *\n * @return {string} CSS class name.\n */\nexport function getBorderClasses( attributes ) {\n\tconst { borderColor, style } = attributes;\n\tconst borderColorClass = getColorClassName( 'border-color', borderColor );\n\n\treturn classnames( {\n\t\t'has-border-color': borderColor || style?.border?.color,\n\t\t[ borderColorClass ]: !! borderColorClass,\n\t} );\n}\n\nfunction useBlockProps( { name, borderColor, style } ) {\n\tconst { colors } = useMultipleOriginColorsAndGradients();\n\n\tif (\n\t\t! hasBorderSupport( name, 'color' ) ||\n\t\tshouldSkipSerialization( name, BORDER_SUPPORT_KEY, 'color' )\n\t) {\n\t\treturn {};\n\t}\n\n\tconst { color: borderColorValue } = getMultiOriginColor( {\n\t\tcolors,\n\t\tnamedColor: borderColor,\n\t} );\n\tconst { color: borderTopColor } = getMultiOriginColor( {\n\t\tcolors,\n\t\tnamedColor: getColorSlugFromVariable( style?.border?.top?.color ),\n\t} );\n\tconst { color: borderRightColor } = getMultiOriginColor( {\n\t\tcolors,\n\t\tnamedColor: getColorSlugFromVariable( style?.border?.right?.color ),\n\t} );\n\n\tconst { color: borderBottomColor } = getMultiOriginColor( {\n\t\tcolors,\n\t\tnamedColor: getColorSlugFromVariable( style?.border?.bottom?.color ),\n\t} );\n\tconst { color: borderLeftColor } = getMultiOriginColor( {\n\t\tcolors,\n\t\tnamedColor: getColorSlugFromVariable( style?.border?.left?.color ),\n\t} );\n\n\tconst extraStyles = {\n\t\tborderTopColor: borderTopColor || borderColorValue,\n\t\tborderRightColor: borderRightColor || borderColorValue,\n\t\tborderBottomColor: borderBottomColor || borderColorValue,\n\t\tborderLeftColor: borderLeftColor || borderColorValue,\n\t};\n\n\treturn addSaveProps(\n\t\t{ style: cleanEmptyObject( extraStyles ) || {} },\n\t\tname,\n\t\t{ borderColor, style }\n\t);\n}\n\nexport default {\n\tuseBlockProps,\n\taddSaveProps,\n\tattributeKeys: [ 'borderColor', 'style' ],\n\thasSupport( name ) {\n\t\treturn hasBorderSupport( name, 'color' );\n\t},\n};\n\naddFilter(\n\t'blocks.registerBlockType',\n\t'core/border/addAttributes',\n\taddAttributes\n);\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useCallback, useMemo } from '@wordpress/element';\r\nimport { useSelect, useDispatch } from '@wordpress/data';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { useBlockEditContext } from '../block-edit';\r\nimport { useSettings } from '../use-settings';\r\nimport { store as blockEditorStore } from '../../store';\r\n\r\nexport function __experimentalGetGradientClass( gradientSlug ) {\r\n\tif ( ! gradientSlug ) {\r\n\t\treturn undefined;\r\n\t}\r\n\treturn `has-${ gradientSlug }-gradient-background`;\r\n}\r\n\r\n/**\r\n * Retrieves the gradient value per slug.\r\n *\r\n * @param {Array}  gradients Gradient Palette\r\n * @param {string} slug      Gradient slug\r\n *\r\n * @return {string} Gradient value.\r\n */\r\nexport function getGradientValueBySlug( gradients, slug ) {\r\n\tconst gradient = gradients?.find( ( g ) => g.slug === slug );\r\n\treturn gradient && gradient.gradient;\r\n}\r\n\r\nexport function __experimentalGetGradientObjectByGradientValue(\r\n\tgradients,\r\n\tvalue\r\n) {\r\n\tconst gradient = gradients?.find( ( g ) => g.gradient === value );\r\n\treturn gradient;\r\n}\r\n\r\n/**\r\n * Retrieves the gradient slug per slug.\r\n *\r\n * @param {Array}  gradients Gradient Palette\r\n * @param {string} value     Gradient value\r\n * @return {string} Gradient slug.\r\n */\r\nexport function getGradientSlugByValue( gradients, value ) {\r\n\tconst gradient = __experimentalGetGradientObjectByGradientValue(\r\n\t\tgradients,\r\n\t\tvalue\r\n\t);\r\n\treturn gradient && gradient.slug;\r\n}\r\n\r\nexport function __experimentalUseGradient( {\r\n\tgradientAttribute = 'gradient',\r\n\tcustomGradientAttribute = 'customGradient',\r\n} = {} ) {\r\n\tconst { clientId } = useBlockEditContext();\r\n\r\n\tconst [\r\n\t\tuserGradientPalette,\r\n\t\tthemeGradientPalette,\r\n\t\tdefaultGradientPalette,\r\n\t] = useSettings(\r\n\t\t'color.gradients.custom',\r\n\t\t'color.gradients.theme',\r\n\t\t'color.gradients.default'\r\n\t);\r\n\tconst allGradients = useMemo(\r\n\t\t() => [\r\n\t\t\t...( userGradientPalette || [] ),\r\n\t\t\t...( themeGradientPalette || [] ),\r\n\t\t\t...( defaultGradientPalette || [] ),\r\n\t\t],\r\n\t\t[ userGradientPalette, themeGradientPalette, defaultGradientPalette ]\r\n\t);\r\n\tconst { gradient, customGradient } = useSelect(\r\n\t\t( select ) => {\r\n\t\t\tconst { getBlockAttributes } = select( blockEditorStore );\r\n\t\t\tconst attributes = getBlockAttributes( clientId ) || {};\r\n\t\t\treturn {\r\n\t\t\t\tcustomGradient: attributes[ customGradientAttribute ],\r\n\t\t\t\tgradient: attributes[ gradientAttribute ],\r\n\t\t\t};\r\n\t\t},\r\n\t\t[ clientId, gradientAttribute, customGradientAttribute ]\r\n\t);\r\n\r\n\tconst { updateBlockAttributes } = useDispatch( blockEditorStore );\r\n\tconst setGradient = useCallback(\r\n\t\t( newGradientValue ) => {\r\n\t\t\tconst slug = getGradientSlugByValue(\r\n\t\t\t\tallGradients,\r\n\t\t\t\tnewGradientValue\r\n\t\t\t);\r\n\t\t\tif ( slug ) {\r\n\t\t\t\tupdateBlockAttributes( clientId, {\r\n\t\t\t\t\t[ gradientAttribute ]: slug,\r\n\t\t\t\t\t[ customGradientAttribute ]: undefined,\r\n\t\t\t\t} );\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tupdateBlockAttributes( clientId, {\r\n\t\t\t\t[ gradientAttribute ]: undefined,\r\n\t\t\t\t[ customGradientAttribute ]: newGradientValue,\r\n\t\t\t} );\r\n\t\t},\r\n\t\t[ allGradients, clientId, updateBlockAttributes ]\r\n\t);\r\n\r\n\tconst gradientClass = __experimentalGetGradientClass( gradient );\r\n\tlet gradientValue;\r\n\tif ( gradient ) {\r\n\t\tgradientValue = getGradientValueBySlug( allGradients, gradient );\r\n\t} else {\r\n\t\tgradientValue = customGradient;\r\n\t}\r\n\treturn { gradientClass, gradientValue, setGradient };\r\n}\r\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport {\n\tBaseControl,\n\t__experimentalVStack as VStack,\n\tColorPalette,\n\tGradientPicker,\n\tprivateApis as componentsPrivateApis,\n} from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport { useSettings } from '../use-settings';\nimport { unlock } from '../../lock-unlock';\n\nconst colorsAndGradientKeys = [\n\t'colors',\n\t'disableCustomColors',\n\t'gradients',\n\t'disableCustomGradients',\n];\n\nconst TAB_IDS = { color: 'color', gradient: 'gradient' };\n\nfunction ColorGradientControlInner( {\n\tcolors,\n\tgradients,\n\tdisableCustomColors,\n\tdisableCustomGradients,\n\t__experimentalIsRenderedInSidebar,\n\tclassName,\n\tlabel,\n\tonColorChange,\n\tonGradientChange,\n\tcolorValue,\n\tgradientValue,\n\tclearable,\n\tshowTitle = true,\n\tenableAlpha,\n\theadingLevel,\n} ) {\n\tconst canChooseAColor =\n\t\tonColorChange &&\n\t\t( ( colors && colors.length > 0 ) || ! disableCustomColors );\n\tconst canChooseAGradient =\n\t\tonGradientChange &&\n\t\t( ( gradients && gradients.length > 0 ) || ! disableCustomGradients );\n\n\tif ( ! canChooseAColor && ! canChooseAGradient ) {\n\t\treturn null;\n\t}\n\n\tconst tabPanels = {\n\t\t[ TAB_IDS.color ]: (\n\t\t\t<ColorPalette\n\t\t\t\tvalue={ colorValue }\n\t\t\t\tonChange={\n\t\t\t\t\tcanChooseAGradient\n\t\t\t\t\t\t? ( newColor ) => {\n\t\t\t\t\t\t\t\tonColorChange( newColor );\n\t\t\t\t\t\t\t\tonGradientChange();\n\t\t\t\t\t\t  }\n\t\t\t\t\t\t: onColorChange\n\t\t\t\t}\n\t\t\t\t{ ...{ colors, disableCustomColors } }\n\t\t\t\t__experimentalIsRenderedInSidebar={\n\t\t\t\t\t__experimentalIsRenderedInSidebar\n\t\t\t\t}\n\t\t\t\tclearable={ clearable }\n\t\t\t\tenableAlpha={ enableAlpha }\n\t\t\t\theadingLevel={ headingLevel }\n\t\t\t/>\n\t\t),\n\t\t[ TAB_IDS.gradient ]: (\n\t\t\t<GradientPicker\n\t\t\t\tvalue={ gradientValue }\n\t\t\t\tonChange={\n\t\t\t\t\tcanChooseAColor\n\t\t\t\t\t\t? ( newGradient ) => {\n\t\t\t\t\t\t\t\tonGradientChange( newGradient );\n\t\t\t\t\t\t\t\tonColorChange();\n\t\t\t\t\t\t  }\n\t\t\t\t\t\t: onGradientChange\n\t\t\t\t}\n\t\t\t\t{ ...{ gradients, disableCustomGradients } }\n\t\t\t\t__experimentalIsRenderedInSidebar={\n\t\t\t\t\t__experimentalIsRenderedInSidebar\n\t\t\t\t}\n\t\t\t\tclearable={ clearable }\n\t\t\t\theadingLevel={ headingLevel }\n\t\t\t/>\n\t\t),\n\t};\n\n\tconst renderPanelType = ( type ) => (\n\t\t<div className=\"block-editor-color-gradient-control__panel\">\n\t\t\t{ tabPanels[ type ] }\n\t\t</div>\n\t);\n\n\t// Unlocking `Tabs` too early causes the `unlock` method to receive an empty\n\t// object, due to circular dependencies.\n\t// See https://github.com/WordPress/gutenberg/issues/52692\n\tconst { Tabs } = unlock( componentsPrivateApis );\n\n\treturn (\n\t\t<BaseControl\n\t\t\t__nextHasNoMarginBottom\n\t\t\tclassName={ classnames(\n\t\t\t\t'block-editor-color-gradient-control',\n\t\t\t\tclassName\n\t\t\t) }\n\t\t>\n\t\t\t<fieldset className=\"block-editor-color-gradient-control__fieldset\">\n\t\t\t\t<VStack spacing={ 1 }>\n\t\t\t\t\t{ showTitle && (\n\t\t\t\t\t\t<legend>\n\t\t\t\t\t\t\t<div className=\"block-editor-color-gradient-control__color-indicator\">\n\t\t\t\t\t\t\t\t<BaseControl.VisualLabel>\n\t\t\t\t\t\t\t\t\t{ label }\n\t\t\t\t\t\t\t\t</BaseControl.VisualLabel>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</legend>\n\t\t\t\t\t) }\n\t\t\t\t\t{ canChooseAColor && canChooseAGradient && (\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Tabs\n\t\t\t\t\t\t\t\tdefaultTabId={\n\t\t\t\t\t\t\t\t\tgradientValue\n\t\t\t\t\t\t\t\t\t\t? TAB_IDS.gradient\n\t\t\t\t\t\t\t\t\t\t: !! canChooseAColor && TAB_IDS.color\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Tabs.TabList>\n\t\t\t\t\t\t\t\t\t<Tabs.Tab tabId={ TAB_IDS.color }>\n\t\t\t\t\t\t\t\t\t\t{ __( 'Solid' ) }\n\t\t\t\t\t\t\t\t\t</Tabs.Tab>\n\t\t\t\t\t\t\t\t\t<Tabs.Tab tabId={ TAB_IDS.gradient }>\n\t\t\t\t\t\t\t\t\t\t{ __( 'Gradient' ) }\n\t\t\t\t\t\t\t\t\t</Tabs.Tab>\n\t\t\t\t\t\t\t\t</Tabs.TabList>\n\t\t\t\t\t\t\t\t<Tabs.TabPanel\n\t\t\t\t\t\t\t\t\ttabId={ TAB_IDS.color }\n\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t'block-editor-color-gradient-control__panel'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tfocusable={ false }\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ tabPanels.color }\n\t\t\t\t\t\t\t\t</Tabs.TabPanel>\n\t\t\t\t\t\t\t\t<Tabs.TabPanel\n\t\t\t\t\t\t\t\t\ttabId={ TAB_IDS.gradient }\n\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\t'block-editor-color-gradient-control__panel'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tfocusable={ false }\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ tabPanels.gradient }\n\t\t\t\t\t\t\t\t</Tabs.TabPanel>\n\t\t\t\t\t\t\t</Tabs>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) }\n\n\t\t\t\t\t{ ! canChooseAGradient && renderPanelType( TAB_IDS.color ) }\n\t\t\t\t\t{ ! canChooseAColor && renderPanelType( TAB_IDS.gradient ) }\n\t\t\t\t</VStack>\n\t\t\t</fieldset>\n\t\t</BaseControl>\n\t);\n}\n\nfunction ColorGradientControlSelect( props ) {\n\tconst [ colors, gradients, customColors, customGradients ] = useSettings(\n\t\t'color.palette',\n\t\t'color.gradients',\n\t\t'color.custom',\n\t\t'color.customGradient'\n\t);\n\n\treturn (\n\t\t<ColorGradientControlInner\n\t\t\tcolors={ colors }\n\t\t\tgradients={ gradients }\n\t\t\tdisableCustomColors={ ! customColors }\n\t\t\tdisableCustomGradients={ ! customGradients }\n\t\t\t{ ...props }\n\t\t/>\n\t);\n}\n\nfunction ColorGradientControl( props ) {\n\tif (\n\t\tcolorsAndGradientKeys.every( ( key ) => props.hasOwnProperty( key ) )\n\t) {\n\t\treturn <ColorGradientControlInner { ...props } />;\n\t}\n\treturn <ColorGradientControlSelect { ...props } />;\n}\n\nexport default ColorGradientControl;\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport {\n\t__experimentalToolsPanel as ToolsPanel,\n\t__experimentalToolsPanelItem as ToolsPanelItem,\n\t__experimentalHStack as HStack,\n\t__experimentalZStack as ZStack,\n\t__experimentalDropdownContentWrapper as DropdownContentWrapper,\n\tColorIndicator,\n\tFlex,\n\tFlexItem,\n\tDropdown,\n\tButton,\n\tprivateApis as componentsPrivateApis,\n} from '@wordpress/components';\nimport { useCallback } from '@wordpress/element';\nimport { __, sprintf } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport ColorGradientControl from '../colors-gradients/control';\nimport { useColorsPerOrigin, useGradientsPerOrigin } from './hooks';\nimport { getValueFromVariable, TOOLSPANEL_DROPDOWNMENU_PROPS } from './utils';\nimport { setImmutably } from '../../utils/object';\nimport { unlock } from '../../lock-unlock';\n\nexport function useHasColorPanel( settings ) {\n\tconst hasTextPanel = useHasTextPanel( settings );\n\tconst hasBackgroundPanel = useHasBackgroundPanel( settings );\n\tconst hasLinkPanel = useHasLinkPanel( settings );\n\tconst hasHeadingPanel = useHasHeadingPanel( settings );\n\tconst hasButtonPanel = useHasButtonPanel( settings );\n\tconst hasCaptionPanel = useHasCaptionPanel( settings );\n\n\treturn (\n\t\thasTextPanel ||\n\t\thasBackgroundPanel ||\n\t\thasLinkPanel ||\n\t\thasHeadingPanel ||\n\t\thasButtonPanel ||\n\t\thasCaptionPanel\n\t);\n}\n\nexport function useHasTextPanel( settings ) {\n\tconst colors = useColorsPerOrigin( settings );\n\treturn (\n\t\tsettings?.color?.text &&\n\t\t( colors?.length > 0 || settings?.color?.custom )\n\t);\n}\n\nexport function useHasLinkPanel( settings ) {\n\tconst colors = useColorsPerOrigin( settings );\n\treturn (\n\t\tsettings?.color?.link &&\n\t\t( colors?.length > 0 || settings?.color?.custom )\n\t);\n}\n\nexport function useHasCaptionPanel( settings ) {\n\tconst colors = useColorsPerOrigin( settings );\n\treturn (\n\t\tsettings?.color?.caption &&\n\t\t( colors?.length > 0 || settings?.color?.custom )\n\t);\n}\n\nexport function useHasHeadingPanel( settings ) {\n\tconst colors = useColorsPerOrigin( settings );\n\tconst gradients = useGradientsPerOrigin( settings );\n\treturn (\n\t\tsettings?.color?.heading &&\n\t\t( colors?.length > 0 ||\n\t\t\tsettings?.color?.custom ||\n\t\t\tgradients?.length > 0 ||\n\t\t\tsettings?.color?.customGradient )\n\t);\n}\n\nexport function useHasButtonPanel( settings ) {\n\tconst colors = useColorsPerOrigin( settings );\n\tconst gradients = useGradientsPerOrigin( settings );\n\treturn (\n\t\tsettings?.color?.button &&\n\t\t( colors?.length > 0 ||\n\t\t\tsettings?.color?.custom ||\n\t\t\tgradients?.length > 0 ||\n\t\t\tsettings?.color?.customGradient )\n\t);\n}\n\nexport function useHasBackgroundPanel( settings ) {\n\tconst colors = useColorsPerOrigin( settings );\n\tconst gradients = useGradientsPerOrigin( settings );\n\treturn (\n\t\tsettings?.color?.background &&\n\t\t( colors?.length > 0 ||\n\t\t\tsettings?.color?.custom ||\n\t\t\tgradients?.length > 0 ||\n\t\t\tsettings?.color?.customGradient )\n\t);\n}\n\nfunction ColorToolsPanel( {\n\tresetAllFilter,\n\tonChange,\n\tvalue,\n\tpanelId,\n\tchildren,\n} ) {\n\tconst resetAll = () => {\n\t\tconst updatedValue = resetAllFilter( value );\n\t\tonChange( updatedValue );\n\t};\n\n\treturn (\n\t\t<ToolsPanel\n\t\t\tlabel={ __( 'Elements' ) }\n\t\t\tresetAll={ resetAll }\n\t\t\tpanelId={ panelId }\n\t\t\thasInnerWrapper\n\t\t\theadingLevel={ 3 }\n\t\t\tclassName=\"color-block-support-panel\"\n\t\t\t__experimentalFirstVisibleItemClass=\"first\"\n\t\t\t__experimentalLastVisibleItemClass=\"last\"\n\t\t\tdropdownMenuProps={ TOOLSPANEL_DROPDOWNMENU_PROPS }\n\t\t>\n\t\t\t<div className=\"color-block-support-panel__inner-wrapper\">\n\t\t\t\t{ children }\n\t\t\t</div>\n\t\t</ToolsPanel>\n\t);\n}\n\nconst DEFAULT_CONTROLS = {\n\ttext: true,\n\tbackground: true,\n\tlink: true,\n\theading: true,\n\tbutton: true,\n\tcaption: true,\n};\n\nconst popoverProps = {\n\tplacement: 'left-start',\n\toffset: 36,\n\tshift: true,\n};\n\nconst LabeledColorIndicators = ( { indicators, label } ) => (\n\t<HStack justify=\"flex-start\">\n\t\t<ZStack isLayered={ false } offset={ -8 }>\n\t\t\t{ indicators.map( ( indicator, index ) => (\n\t\t\t\t<Flex key={ index } expanded={ false }>\n\t\t\t\t\t<ColorIndicator colorValue={ indicator } />\n\t\t\t\t</Flex>\n\t\t\t) ) }\n\t\t</ZStack>\n\t\t<FlexItem\n\t\t\tclassName=\"block-editor-panel-color-gradient-settings__color-name\"\n\t\t\ttitle={ label }\n\t\t>\n\t\t\t{ label }\n\t\t</FlexItem>\n\t</HStack>\n);\n\nfunction ColorPanelTab( {\n\tisGradient,\n\tinheritedValue,\n\tuserValue,\n\tsetValue,\n\tcolorGradientControlSettings,\n} ) {\n\treturn (\n\t\t<ColorGradientControl\n\t\t\t{ ...colorGradientControlSettings }\n\t\t\tshowTitle={ false }\n\t\t\tenableAlpha\n\t\t\t__experimentalIsRenderedInSidebar\n\t\t\tcolorValue={ isGradient ? undefined : inheritedValue }\n\t\t\tgradientValue={ isGradient ? inheritedValue : undefined }\n\t\t\tonColorChange={ isGradient ? undefined : setValue }\n\t\t\tonGradientChange={ isGradient ? setValue : undefined }\n\t\t\tclearable={ inheritedValue === userValue }\n\t\t\theadingLevel={ 3 }\n\t\t/>\n\t);\n}\n\nfunction ColorPanelDropdown( {\n\tlabel,\n\thasValue,\n\tresetValue,\n\tisShownByDefault,\n\tindicators,\n\ttabs,\n\tcolorGradientControlSettings,\n\tpanelId,\n} ) {\n\tconst currentTab = tabs.find( ( tab ) => tab.userValue !== undefined );\n\t// Unlocking `Tabs` too early causes the `unlock` method to receive an empty\n\t// object, due to circular dependencies.\n\t// See https://github.com/WordPress/gutenberg/issues/52692\n\tconst { Tabs } = unlock( componentsPrivateApis );\n\n\treturn (\n\t\t<ToolsPanelItem\n\t\t\tclassName=\"block-editor-tools-panel-color-gradient-settings__item\"\n\t\t\thasValue={ hasValue }\n\t\t\tlabel={ label }\n\t\t\tonDeselect={ resetValue }\n\t\t\tisShownByDefault={ isShownByDefault }\n\t\t\tpanelId={ panelId }\n\t\t>\n\t\t\t<Dropdown\n\t\t\t\tpopoverProps={ popoverProps }\n\t\t\t\tclassName=\"block-editor-tools-panel-color-gradient-settings__dropdown\"\n\t\t\t\trenderToggle={ ( { onToggle, isOpen } ) => {\n\t\t\t\t\tconst toggleProps = {\n\t\t\t\t\t\tonClick: onToggle,\n\t\t\t\t\t\tclassName: classnames(\n\t\t\t\t\t\t\t'block-editor-panel-color-gradient-settings__dropdown',\n\t\t\t\t\t\t\t{ 'is-open': isOpen }\n\t\t\t\t\t\t),\n\t\t\t\t\t\t'aria-expanded': isOpen,\n\t\t\t\t\t\t'aria-label': sprintf(\n\t\t\t\t\t\t\t/* translators: %s is the type of color property, e.g., \"background\" */\n\t\t\t\t\t\t\t__( 'Color %s styles' ),\n\t\t\t\t\t\t\tlabel\n\t\t\t\t\t\t),\n\t\t\t\t\t};\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Button { ...toggleProps }>\n\t\t\t\t\t\t\t<LabeledColorIndicators\n\t\t\t\t\t\t\t\tindicators={ indicators }\n\t\t\t\t\t\t\t\tlabel={ label }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t);\n\t\t\t\t} }\n\t\t\t\trenderContent={ () => (\n\t\t\t\t\t<DropdownContentWrapper paddingSize=\"none\">\n\t\t\t\t\t\t<div className=\"block-editor-panel-color-gradient-settings__dropdown-content\">\n\t\t\t\t\t\t\t{ tabs.length === 1 && (\n\t\t\t\t\t\t\t\t<ColorPanelTab\n\t\t\t\t\t\t\t\t\t{ ...tabs[ 0 ] }\n\t\t\t\t\t\t\t\t\tcolorGradientControlSettings={\n\t\t\t\t\t\t\t\t\t\tcolorGradientControlSettings\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t{ tabs.length > 1 && (\n\t\t\t\t\t\t\t\t<Tabs defaultTabId={ currentTab?.key }>\n\t\t\t\t\t\t\t\t\t<Tabs.TabList>\n\t\t\t\t\t\t\t\t\t\t{ tabs.map( ( tab ) => (\n\t\t\t\t\t\t\t\t\t\t\t<Tabs.Tab\n\t\t\t\t\t\t\t\t\t\t\t\tkey={ tab.key }\n\t\t\t\t\t\t\t\t\t\t\t\ttabId={ tab.key }\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t{ tab.label }\n\t\t\t\t\t\t\t\t\t\t\t</Tabs.Tab>\n\t\t\t\t\t\t\t\t\t\t) ) }\n\t\t\t\t\t\t\t\t\t</Tabs.TabList>\n\n\t\t\t\t\t\t\t\t\t{ tabs.map( ( tab ) => {\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<Tabs.TabPanel\n\t\t\t\t\t\t\t\t\t\t\t\tkey={ tab.key }\n\t\t\t\t\t\t\t\t\t\t\t\ttabId={ tab.key }\n\t\t\t\t\t\t\t\t\t\t\t\tfocusable={ false }\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<ColorPanelTab\n\t\t\t\t\t\t\t\t\t\t\t\t\t{ ...tab }\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolorGradientControlSettings={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolorGradientControlSettings\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</Tabs.TabPanel>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t} ) }\n\t\t\t\t\t\t\t\t</Tabs>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</DropdownContentWrapper>\n\t\t\t\t) }\n\t\t\t/>\n\t\t</ToolsPanelItem>\n\t);\n}\n\nexport default function ColorPanel( {\n\tas: Wrapper = ColorToolsPanel,\n\tvalue,\n\tonChange,\n\tinheritedValue = value,\n\tsettings,\n\tpanelId,\n\tdefaultControls = DEFAULT_CONTROLS,\n\tchildren,\n} ) {\n\tconst colors = useColorsPerOrigin( settings );\n\tconst gradients = useGradientsPerOrigin( settings );\n\tconst areCustomSolidsEnabled = settings?.color?.custom;\n\tconst areCustomGradientsEnabled = settings?.color?.customGradient;\n\tconst hasSolidColors = colors.length > 0 || areCustomSolidsEnabled;\n\tconst hasGradientColors = gradients.length > 0 || areCustomGradientsEnabled;\n\tconst decodeValue = ( rawValue ) =>\n\t\tgetValueFromVariable( { settings }, '', rawValue );\n\tconst encodeColorValue = ( colorValue ) => {\n\t\tconst allColors = colors.flatMap(\n\t\t\t( { colors: originColors } ) => originColors\n\t\t);\n\t\tconst colorObject = allColors.find(\n\t\t\t( { color } ) => color === colorValue\n\t\t);\n\t\treturn colorObject\n\t\t\t? 'var:preset|color|' + colorObject.slug\n\t\t\t: colorValue;\n\t};\n\tconst encodeGradientValue = ( gradientValue ) => {\n\t\tconst allGradients = gradients.flatMap(\n\t\t\t( { gradients: originGradients } ) => originGradients\n\t\t);\n\t\tconst gradientObject = allGradients.find(\n\t\t\t( { gradient } ) => gradient === gradientValue\n\t\t);\n\t\treturn gradientObject\n\t\t\t? 'var:preset|gradient|' + gradientObject.slug\n\t\t\t: gradientValue;\n\t};\n\n\t// BackgroundColor\n\tconst showBackgroundPanel = useHasBackgroundPanel( settings );\n\tconst backgroundColor = decodeValue( inheritedValue?.color?.background );\n\tconst userBackgroundColor = decodeValue( value?.color?.background );\n\tconst gradient = decodeValue( inheritedValue?.color?.gradient );\n\tconst userGradient = decodeValue( value?.color?.gradient );\n\tconst hasBackground = () => !! userBackgroundColor || !! userGradient;\n\tconst setBackgroundColor = ( newColor ) => {\n\t\tconst newValue = setImmutably(\n\t\t\tvalue,\n\t\t\t[ 'color', 'background' ],\n\t\t\tencodeColorValue( newColor )\n\t\t);\n\t\tnewValue.color.gradient = undefined;\n\t\tonChange( newValue );\n\t};\n\tconst setGradient = ( newGradient ) => {\n\t\tconst newValue = setImmutably(\n\t\t\tvalue,\n\t\t\t[ 'color', 'gradient' ],\n\t\t\tencodeGradientValue( newGradient )\n\t\t);\n\t\tnewValue.color.background = undefined;\n\t\tonChange( newValue );\n\t};\n\tconst resetBackground = () => {\n\t\tconst newValue = setImmutably(\n\t\t\tvalue,\n\t\t\t[ 'color', 'background' ],\n\t\t\tundefined\n\t\t);\n\t\tnewValue.color.gradient = undefined;\n\t\tonChange( newValue );\n\t};\n\n\t/** DOUBLEEDESIGN CUSTOM: Treat the button panel similarly to the background or link panels */\n\t// Button\n\tconst showButtonPanel = useHasButtonPanel( settings );\n\tconst hasButtonColor = () => !! value?.color?.button;\n\tconst buttonColor = decodeValue( inheritedValue?.color?.button );\n\tconst userButtonColor = decodeValue( value?.color?.button );\n\tconst setButtonColor = ( newColor ) => {\n\t\tonChange(\n\t\t\tsetImmutably(\n\t\t\t\tvalue,\n\t\t\t\t[ 'color', 'button' ],\n\t\t\t\tencodeColorValue( newColor )\n\t\t\t)\n\t\t);\n\t};\n\tconst resetButtonColor = () => setButtonColor( 'primary' );\n\n\t// Links\n\tconst showLinkPanel = useHasLinkPanel( settings );\n\tconst linkColor = decodeValue(\n\t\tinheritedValue?.elements?.link?.color?.text\n\t);\n\tconst userLinkColor = decodeValue( value?.elements?.link?.color?.text );\n\tconst setLinkColor = ( newColor ) => {\n\t\tonChange(\n\t\t\tvalue,\n\t\t\t[ 'elements', 'link', 'color', 'text' ],\n\t\t\tsetImmutably( encodeColorValue( newColor ) )\n\t\t);\n\t};\n\tconst hoverLinkColor = decodeValue(\n\t\tinheritedValue?.elements?.link?.[ ':hover' ]?.color?.text\n\t);\n\tconst userHoverLinkColor = decodeValue(\n\t\tvalue?.elements?.link?.[ ':hover' ]?.color?.text\n\t);\n\tconst setHoverLinkColor = ( newColor ) => {\n\t\tonChange(\n\t\t\tsetImmutably(\n\t\t\t\tvalue,\n\t\t\t\t[ 'elements', 'link', ':hover', 'color', 'text' ],\n\t\t\t\tencodeColorValue( newColor )\n\t\t\t)\n\t\t);\n\t};\n\tconst hasLink = () => !! userLinkColor || !! userHoverLinkColor;\n\tconst resetLink = () => {\n\t\tlet newValue = setImmutably(\n\t\t\tvalue,\n\t\t\t[ 'elements', 'link', ':hover', 'color', 'text' ],\n\t\t\tundefined\n\t\t);\n\t\tnewValue = setImmutably(\n\t\t\tnewValue,\n\t\t\t[ 'elements', 'link', 'color', 'text' ],\n\t\t\tundefined\n\t\t);\n\t\tonChange( newValue );\n\t};\n\n\t// Text Color\n\tconst showTextPanel = useHasTextPanel( settings );\n\tconst textColor = decodeValue( inheritedValue?.color?.text );\n\tconst userTextColor = decodeValue( value?.color?.text );\n\tconst hasTextColor = () => !! userTextColor;\n\tconst setTextColor = ( newColor ) => {\n\t\tlet changedObject = setImmutably(\n\t\t\tvalue,\n\t\t\t[ 'color', 'text' ],\n\t\t\tencodeColorValue( newColor )\n\t\t);\n\t\tif ( textColor === linkColor ) {\n\t\t\tchangedObject = setImmutably(\n\t\t\t\tchangedObject,\n\t\t\t\t[ 'elements', 'link', 'color', 'text' ],\n\t\t\t\tencodeColorValue( newColor )\n\t\t\t);\n\t\t}\n\n\t\tonChange( changedObject );\n\t};\n\tconst resetTextColor = () => setTextColor( undefined );\n\n\t// Elements\n\tconst elements = [\n\t\t{\n\t\t\tname: 'caption',\n\t\t\tlabel: __( 'Captions' ),\n\t\t\tshowPanel: useHasCaptionPanel( settings ),\n\t\t},\n\t\t/** DOUBLEEDESIGN CUSTOM: Button removed from here and shown by default instead */\n\t\t{\n\t\t\tname: 'heading',\n\t\t\tlabel: __( 'Heading' ),\n\t\t\tshowPanel: useHasHeadingPanel( settings ),\n\t\t},\n\t\t{\n\t\t\tname: 'h1',\n\t\t\tlabel: __( 'H1' ),\n\t\t\tshowPanel: useHasHeadingPanel( settings ),\n\t\t},\n\t\t{\n\t\t\tname: 'h2',\n\t\t\tlabel: __( 'H2' ),\n\t\t\tshowPanel: useHasHeadingPanel( settings ),\n\t\t},\n\t\t{\n\t\t\tname: 'h3',\n\t\t\tlabel: __( 'H3' ),\n\t\t\tshowPanel: useHasHeadingPanel( settings ),\n\t\t},\n\t\t{\n\t\t\tname: 'h4',\n\t\t\tlabel: __( 'H4' ),\n\t\t\tshowPanel: useHasHeadingPanel( settings ),\n\t\t},\n\t\t{\n\t\t\tname: 'h5',\n\t\t\tlabel: __( 'H5' ),\n\t\t\tshowPanel: useHasHeadingPanel( settings ),\n\t\t},\n\t\t{\n\t\t\tname: 'h6',\n\t\t\tlabel: __( 'H6' ),\n\t\t\tshowPanel: useHasHeadingPanel( settings ),\n\t\t},\n\t];\n\n\tconst resetAllFilter = useCallback( ( previousValue ) => {\n\t\treturn {\n\t\t\t...previousValue,\n\t\t\tcolor: undefined,\n\t\t\telements: {\n\t\t\t\t...previousValue?.elements,\n\t\t\t\tlink: {\n\t\t\t\t\t...previousValue?.elements?.link,\n\t\t\t\t\tcolor: undefined,\n\t\t\t\t\t':hover': {\n\t\t\t\t\t\tcolor: undefined,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t...elements.reduce( ( acc, element ) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...acc,\n\t\t\t\t\t\t[ element.name ]: {\n\t\t\t\t\t\t\t...previousValue?.elements?.[ element.name ],\n\t\t\t\t\t\t\tcolor: undefined,\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\t\t\t\t}, {} ),\n\t\t\t},\n\t\t};\n\t}, [] );\n\n\tconst items = [\n\t\tshowTextPanel && {\n\t\t\tkey: 'text',\n\t\t\tlabel: __( 'Text' ),\n\t\t\thasValue: hasTextColor,\n\t\t\tresetValue: resetTextColor,\n\t\t\tisShownByDefault: defaultControls.text,\n\t\t\tindicators: [ textColor ],\n\t\t\ttabs: [\n\t\t\t\t{\n\t\t\t\t\tkey: 'text',\n\t\t\t\t\tlabel: __( 'Text' ),\n\t\t\t\t\tinheritedValue: textColor,\n\t\t\t\t\tsetValue: setTextColor,\n\t\t\t\t\tuserValue: userTextColor,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\tshowBackgroundPanel && {\n\t\t\tkey: 'background',\n\t\t\tlabel: __( 'Background' ),\n\t\t\thasValue: hasBackground,\n\t\t\tresetValue: resetBackground,\n\t\t\tisShownByDefault: defaultControls.background,\n\t\t\tindicators: [ gradient ?? backgroundColor ],\n\t\t\ttabs: [\n\t\t\t\thasSolidColors && {\n\t\t\t\t\tkey: 'background',\n\t\t\t\t\tlabel: __( 'Solid' ),\n\t\t\t\t\tinheritedValue: backgroundColor,\n\t\t\t\t\tsetValue: setBackgroundColor,\n\t\t\t\t\tuserValue: userBackgroundColor,\n\t\t\t\t},\n\t\t\t\thasGradientColors && {\n\t\t\t\t\tkey: 'gradient',\n\t\t\t\t\tlabel: __( 'Gradient' ),\n\t\t\t\t\tinheritedValue: gradient,\n\t\t\t\t\tsetValue: setGradient,\n\t\t\t\t\tuserValue: userGradient,\n\t\t\t\t\tisGradient: true,\n\t\t\t\t},\n\t\t\t].filter( Boolean ),\n\t\t},\n\t\t/** DOUBLEEDESIGN CUSTOM: Show button colour panel here */\n\t\tshowButtonPanel && {\n\t\t\tkey: 'button',\n\t\t\tlabel: __( 'Button color' ),\n\t\t\thasValue: hasButtonColor,\n\t\t\tresetValue: resetButtonColor,\n\t\t\tisShownByDefault: showButtonPanel,\n\t\t\tindicators: [ buttonColor ],\n\t\t\ttabs: [\n\t\t\t\t{\n\t\t\t\t\tkey: 'button',\n\t\t\t\t\tlabel: __( 'Button' ),\n\t\t\t\t\tinheritedValue: buttonColor,\n\t\t\t\t\tsetValue: setButtonColor,\n\t\t\t\t\tuserValue: userButtonColor,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\tshowLinkPanel && {\n\t\t\tkey: 'link',\n\t\t\tlabel: __( 'Link' ),\n\t\t\thasValue: hasLink,\n\t\t\tresetValue: resetLink,\n\t\t\tisShownByDefault: defaultControls.link,\n\t\t\tindicators: [ linkColor, hoverLinkColor ],\n\t\t\ttabs: [\n\t\t\t\t{\n\t\t\t\t\tkey: 'link',\n\t\t\t\t\tlabel: __( 'Default' ),\n\t\t\t\t\tinheritedValue: linkColor,\n\t\t\t\t\tsetValue: setLinkColor,\n\t\t\t\t\tuserValue: userLinkColor,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tkey: 'hover',\n\t\t\t\t\tlabel: __( 'Hover' ),\n\t\t\t\t\tinheritedValue: hoverLinkColor,\n\t\t\t\t\tsetValue: setHoverLinkColor,\n\t\t\t\t\tuserValue: userHoverLinkColor,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t].filter( Boolean );\n\n\telements.forEach( ( { name, label, showPanel } ) => {\n\t\tif ( ! showPanel ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst elementBackgroundColor = decodeValue(\n\t\t\tinheritedValue?.elements?.[ name ]?.color?.background\n\t\t);\n\t\tconst elementGradient = decodeValue(\n\t\t\tinheritedValue?.elements?.[ name ]?.color?.gradient\n\t\t);\n\t\tconst elementTextColor = decodeValue(\n\t\t\tinheritedValue?.elements?.[ name ]?.color?.text\n\t\t);\n\t\tconst elementBackgroundUserColor = decodeValue(\n\t\t\tvalue?.elements?.[ name ]?.color?.background\n\t\t);\n\t\tconst elementGradientUserColor = decodeValue(\n\t\t\tvalue?.elements?.[ name ]?.color?.gradient\n\t\t);\n\t\tconst elementTextUserColor = decodeValue(\n\t\t\tvalue?.elements?.[ name ]?.color?.text\n\t\t);\n\t\tconst hasElement = () =>\n\t\t\t!! (\n\t\t\t\telementTextUserColor ||\n\t\t\t\telementBackgroundUserColor ||\n\t\t\t\telementGradientUserColor\n\t\t\t);\n\t\tconst resetElement = () => {\n\t\t\tconst newValue = setImmutably(\n\t\t\t\tvalue,\n\t\t\t\t[ 'elements', name, 'color', 'background' ],\n\t\t\t\tundefined\n\t\t\t);\n\t\t\tnewValue.elements[ name ].color.gradient = undefined;\n\t\t\tnewValue.elements[ name ].color.text = undefined;\n\t\t\tonChange( newValue );\n\t\t};\n\n\t\tconst setElementTextColor = ( newTextColor ) => {\n\t\t\tonChange(\n\t\t\t\tsetImmutably(\n\t\t\t\t\tvalue,\n\t\t\t\t\t[ 'elements', name, 'color', 'text' ],\n\t\t\t\t\tencodeColorValue( newTextColor )\n\t\t\t\t)\n\t\t\t);\n\t\t};\n\t\tconst setElementBackgroundColor = ( newBackgroundColor ) => {\n\t\t\tconst newValue = setImmutably(\n\t\t\t\tvalue,\n\t\t\t\t[ 'elements', name, 'color', 'background' ],\n\t\t\t\tencodeColorValue( newBackgroundColor )\n\t\t\t);\n\t\t\tnewValue.elements[ name ].color.gradient = undefined;\n\t\t\tonChange( newValue );\n\t\t};\n\t\tconst setElementGradient = ( newGradient ) => {\n\t\t\tconst newValue = setImmutably(\n\t\t\t\tvalue,\n\t\t\t\t[ 'elements', name, 'color', 'gradient' ],\n\t\t\t\tencodeGradientValue( newGradient )\n\t\t\t);\n\t\t\tnewValue.elements[ name ].color.background = undefined;\n\t\t\tonChange( newValue );\n\t\t};\n\t\tconst supportsTextColor = true;\n\t\t// Background color is not supported for `caption`\n\t\t// as there isn't yet a way to set padding for the element.\n\t\tconst supportsBackground = name !== 'caption';\n\n\t\titems.push( {\n\t\t\tkey: name,\n\t\t\tlabel,\n\t\t\thasValue: hasElement,\n\t\t\tresetValue: resetElement,\n\t\t\tisShownByDefault: defaultControls[ name ],\n\t\t\tindicators:\n\t\t\t\tsupportsTextColor && supportsBackground\n\t\t\t\t\t? [\n\t\t\t\t\t\t\telementTextColor,\n\t\t\t\t\t\t\telementGradient ?? elementBackgroundColor,\n\t\t\t\t\t  ]\n\t\t\t\t\t: [\n\t\t\t\t\t\t\tsupportsTextColor\n\t\t\t\t\t\t\t\t? elementTextColor\n\t\t\t\t\t\t\t\t: elementGradient ?? elementBackgroundColor,\n\t\t\t\t\t  ],\n\t\t\ttabs: [\n\t\t\t\thasSolidColors &&\n\t\t\t\t\tsupportsTextColor && {\n\t\t\t\t\t\tkey: 'text',\n\t\t\t\t\t\tlabel: __( 'Text' ),\n\t\t\t\t\t\tinheritedValue: elementTextColor,\n\t\t\t\t\t\tsetValue: setElementTextColor,\n\t\t\t\t\t\tuserValue: elementTextUserColor,\n\t\t\t\t\t},\n\t\t\t\thasSolidColors &&\n\t\t\t\t\tsupportsBackground && {\n\t\t\t\t\t\tkey: 'background',\n\t\t\t\t\t\tlabel: __( 'Background' ),\n\t\t\t\t\t\tinheritedValue: elementBackgroundColor,\n\t\t\t\t\t\tsetValue: setElementBackgroundColor,\n\t\t\t\t\t\tuserValue: elementBackgroundUserColor,\n\t\t\t\t\t},\n\t\t\t\thasGradientColors &&\n\t\t\t\t\tsupportsBackground && {\n\t\t\t\t\t\tkey: 'gradient',\n\t\t\t\t\t\tlabel: __( 'Gradient' ),\n\t\t\t\t\t\tinheritedValue: elementGradient,\n\t\t\t\t\t\tsetValue: setElementGradient,\n\t\t\t\t\t\tuserValue: elementGradientUserColor,\n\t\t\t\t\t\tisGradient: true,\n\t\t\t\t\t},\n\t\t\t].filter( Boolean ),\n\t\t} );\n\t} );\n\n\treturn (\n\t\t<Wrapper\n\t\t\tresetAllFilter={ resetAllFilter }\n\t\t\tvalue={ value }\n\t\t\tonChange={ onChange }\n\t\t\tpanelId={ panelId }\n\t\t>\n\t\t\t{ items.map( ( item ) => (\n\t\t\t\t<ColorPanelDropdown\n\t\t\t\t\tkey={ item.key }\n\t\t\t\t\t{ ...item }\n\t\t\t\t\tcolorGradientControlSettings={ {\n\t\t\t\t\t\tcolors,\n\t\t\t\t\t\tdisableCustomColors: ! areCustomSolidsEnabled,\n\t\t\t\t\t\tgradients,\n\t\t\t\t\t\tdisableCustomGradients: ! areCustomGradientsEnabled,\n\t\t\t\t\t} }\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t/>\n\t\t\t) ) }\n\t\t\t{ children }\n\t\t</Wrapper>\n\t);\n}\n","/**\r\n * External dependencies\r\n */\r\nimport a11yPlugin from 'colord/plugins/a11y';\r\nimport namesPlugin from 'colord/plugins/names';\r\nimport { colord, extend } from 'colord';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { __, sprintf } from '@wordpress/i18n';\r\nimport { Notice } from '@wordpress/components';\r\nimport { speak } from '@wordpress/a11y';\r\n\r\nextend( [ namesPlugin, a11yPlugin ] );\r\n\r\nfunction ContrastChecker( {\r\n\tbackgroundColor,\r\n\tfallbackBackgroundColor,\r\n\tfallbackTextColor,\r\n\tfallbackLinkColor,\r\n\tfontSize, // Font size value in pixels.\r\n\tisLargeText,\r\n\ttextColor,\r\n\tlinkColor,\r\n\tenableAlphaChecker = false,\r\n} ) {\r\n\tconst currentBackgroundColor = backgroundColor || fallbackBackgroundColor;\r\n\r\n\t// Must have a background color.\r\n\tif ( ! currentBackgroundColor ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tconst currentTextColor = textColor || fallbackTextColor;\r\n\tconst currentLinkColor = linkColor || fallbackLinkColor;\r\n\r\n\t// Must have at least one text color.\r\n\tif ( ! currentTextColor && ! currentLinkColor ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tconst textColors = [\r\n\t\t{\r\n\t\t\tcolor: currentTextColor,\r\n\t\t\tdescription: __( 'text color' ),\r\n\t\t},\r\n\t\t{\r\n\t\t\tcolor: currentLinkColor,\r\n\t\t\tdescription: __( 'link color' ),\r\n\t\t},\r\n\t];\r\n\tconst colordBackgroundColor = colord( currentBackgroundColor );\r\n\tconst backgroundColorHasTransparency = colordBackgroundColor.alpha() < 1;\r\n\tconst backgroundColorBrightness = colordBackgroundColor.brightness();\r\n\tconst isReadableOptions = {\r\n\t\tlevel: 'AA',\r\n\t\tsize:\r\n\t\t\tisLargeText || ( isLargeText !== false && fontSize >= 24 )\r\n\t\t\t\t? 'large'\r\n\t\t\t\t: 'small',\r\n\t};\r\n\r\n\tlet message = '';\r\n\tlet speakMessage = '';\r\n\tfor ( const item of textColors ) {\r\n\t\t// If there is no color, go no further.\r\n\t\tif ( ! item.color ) {\r\n\t\t\tcontinue;\r\n\t\t}\r\n\t\tconst colordTextColor = colord( item.color );\r\n\t\tconst isColordTextReadable = colordTextColor.isReadable(\r\n\t\t\tcolordBackgroundColor,\r\n\t\t\tisReadableOptions\r\n\t\t);\r\n\t\tconst textHasTransparency = colordTextColor.alpha() < 1;\r\n\r\n\t\t// If the contrast is not readable.\r\n\t\tif ( ! isColordTextReadable ) {\r\n\t\t\t// Don't show the message if the background or text is transparent.\r\n\t\t\tif ( backgroundColorHasTransparency || textHasTransparency ) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tmessage =\r\n\t\t\t\tbackgroundColorBrightness < colordTextColor.brightness()\r\n\t\t\t\t\t? sprintf(\r\n\t\t\t\t\t\t\t// translators: %s is a type of text color, e.g., \"text color\" or \"link color\".\r\n\t\t\t\t\t\t\t__(\r\n\t\t\t\t\t\t\t\t'This color combination may be hard for people to read. Try using a darker background color and/or a brighter %s.'\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\titem.description\r\n\t\t\t\t\t  )\r\n\t\t\t\t\t: sprintf(\r\n\t\t\t\t\t\t\t// translators: %s is a type of text color, e.g., \"text color\" or \"link color\".\r\n\t\t\t\t\t\t\t__(\r\n\t\t\t\t\t\t\t\t'This color combination may be hard for people to read. Try using a brighter background color and/or a darker %s.'\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\titem.description\r\n\t\t\t\t\t  );\r\n\t\t\tspeakMessage = __(\r\n\t\t\t\t'This color combination may be hard for people to read.'\r\n\t\t\t);\r\n\t\t\t// Break from the loop when we have a contrast warning.\r\n\t\t\t// These messages take priority over the transparency warning.\r\n\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\t// If there is no contrast warning and the text is transparent,\r\n\t\t// show the transparent warning if alpha check is enabled.\r\n\t\tif ( textHasTransparency && enableAlphaChecker ) {\r\n\t\t\tmessage = __( 'Transparent text may be hard for people to read.' );\r\n\t\t\tspeakMessage = __(\r\n\t\t\t\t'Transparent text may be hard for people to read.'\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\tif ( ! message ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\t// Note: The `Notice` component can speak messages via its `spokenMessage`\r\n\t// prop, but the contrast checker requires granular control over when the\r\n\t// announcements are made. Notably, the message will be re-announced if a\r\n\t// new color combination is selected and the contrast is still insufficient.\r\n\tspeak( speakMessage );\r\n\r\n\treturn (\r\n\t\t<div className=\"block-editor-contrast-checker\">\r\n\t\t\t<Notice\r\n\t\t\t\tspokenMessage={ null }\r\n\t\t\t\tstatus=\"warning\"\r\n\t\t\t\tisDismissible={ false }\r\n\t\t\t>\r\n\t\t\t\t{ message }\r\n\t\t\t</Notice>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\n/**\r\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/contrast-checker/README.md\r\n */\r\nexport default ContrastChecker;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useState, useEffect } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport ContrastChecker from '../components/contrast-checker';\r\nimport { __unstableUseBlockRef as useBlockRef } from '../components/block-list/use-block-props/use-block-refs';\r\n\r\nfunction getComputedStyle( node ) {\r\n\treturn node.ownerDocument.defaultView.getComputedStyle( node );\r\n}\r\n\r\nexport default function BlockColorContrastChecker( { clientId } ) {\r\n\tconst [ detectedBackgroundColor, setDetectedBackgroundColor ] = useState();\r\n\tconst [ detectedColor, setDetectedColor ] = useState();\r\n\tconst [ detectedLinkColor, setDetectedLinkColor ] = useState();\r\n\tconst ref = useBlockRef( clientId );\r\n\r\n\t// There are so many things that can change the color of a block\r\n\t// So we perform this check on every render.\r\n\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\tuseEffect( () => {\r\n\t\tif ( ! ref.current ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsetDetectedColor( getComputedStyle( ref.current ).color );\r\n\r\n\t\tconst firstLinkElement = ref.current?.querySelector( 'a' );\r\n\t\tif ( firstLinkElement && !! firstLinkElement.innerText ) {\r\n\t\t\tsetDetectedLinkColor( getComputedStyle( firstLinkElement ).color );\r\n\t\t}\r\n\r\n\t\tlet backgroundColorNode = ref.current;\r\n\t\tlet backgroundColor =\r\n\t\t\tgetComputedStyle( backgroundColorNode ).backgroundColor;\r\n\t\twhile (\r\n\t\t\tbackgroundColor === 'rgba(0, 0, 0, 0)' &&\r\n\t\t\tbackgroundColorNode.parentNode &&\r\n\t\t\tbackgroundColorNode.parentNode.nodeType ===\r\n\t\t\t\tbackgroundColorNode.parentNode.ELEMENT_NODE\r\n\t\t) {\r\n\t\t\tbackgroundColorNode = backgroundColorNode.parentNode;\r\n\t\t\tbackgroundColor =\r\n\t\t\t\tgetComputedStyle( backgroundColorNode ).backgroundColor;\r\n\t\t}\r\n\r\n\t\tsetDetectedBackgroundColor( backgroundColor );\r\n\t} );\r\n\r\n\treturn (\r\n\t\t<ContrastChecker\r\n\t\t\tbackgroundColor={ detectedBackgroundColor }\r\n\t\t\ttextColor={ detectedColor }\r\n\t\t\tenableAlphaChecker\r\n\t\t\tlinkColor={ detectedLinkColor }\r\n\t\t/>\r\n\t);\r\n}\r\n","/**\r\n * External dependencies\r\n */\r\nimport classnames from 'classnames';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { addFilter } from '@wordpress/hooks';\r\nimport { getBlockSupport } from '@wordpress/blocks';\r\nimport { useMemo, Platform, useCallback } from '@wordpress/element';\r\nimport { useSelect } from '@wordpress/data';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport {\r\n\tgetColorClassName,\r\n\tgetColorObjectByAttributeValues,\r\n} from '../components/colors';\r\nimport { __experimentalGetGradientClass } from '../components/gradients';\r\nimport {\r\n\tcleanEmptyObject,\r\n\ttransformStyles,\r\n\tshouldSkipSerialization,\r\n} from './utils';\r\nimport { getBackgroundImageClasses } from './background';\r\nimport { useSettings } from '../components/use-settings';\r\nimport InspectorControls from '../components/inspector-controls';\r\nimport {\r\n\tuseHasColorPanel,\r\n\tdefault as StylesColorPanel,\r\n} from '../components/global-styles/color-panel';\r\nimport BlockColorContrastChecker from './contrast-checker';\r\nimport { store as blockEditorStore } from '../store';\r\n\r\nexport const COLOR_SUPPORT_KEY = 'color';\r\n\r\nconst hasColorSupport = ( blockNameOrType ) => {\r\n\tconst colorSupport = getBlockSupport( blockNameOrType, COLOR_SUPPORT_KEY );\r\n\treturn (\r\n\t\tcolorSupport &&\r\n\t\t( colorSupport.link === true ||\r\n\t\t\tcolorSupport.gradient === true ||\r\n\t\t\tcolorSupport.background !== false ||\r\n\t\t\tcolorSupport.text !== false )\r\n\t);\r\n};\r\n\r\nconst hasLinkColorSupport = ( blockType ) => {\r\n\tif ( Platform.OS !== 'web' ) {\r\n\t\treturn false;\r\n\t}\r\n\r\n\tconst colorSupport = getBlockSupport( blockType, COLOR_SUPPORT_KEY );\r\n\r\n\treturn (\r\n\t\tcolorSupport !== null &&\r\n\t\ttypeof colorSupport === 'object' &&\r\n\t\t!! colorSupport.link\r\n\t);\r\n};\r\n\r\nconst hasGradientSupport = ( blockNameOrType ) => {\r\n\tconst colorSupport = getBlockSupport( blockNameOrType, COLOR_SUPPORT_KEY );\r\n\r\n\treturn (\r\n\t\tcolorSupport !== null &&\r\n\t\ttypeof colorSupport === 'object' &&\r\n\t\t!! colorSupport.gradients\r\n\t);\r\n};\r\n\r\nconst hasBackgroundColorSupport = ( blockType ) => {\r\n\tconst colorSupport = getBlockSupport( blockType, COLOR_SUPPORT_KEY );\r\n\r\n\treturn colorSupport && colorSupport.background !== false;\r\n};\r\n\r\nconst hasTextColorSupport = ( blockType ) => {\r\n\tconst colorSupport = getBlockSupport( blockType, COLOR_SUPPORT_KEY );\r\n\r\n\treturn colorSupport && colorSupport.text !== false;\r\n};\r\n\r\n/**\r\n * Filters registered block settings, extending attributes to include\r\n * `backgroundColor` and `textColor` attribute.\r\n *\r\n * @param {Object} settings Original block settings.\r\n *\r\n * @return {Object} Filtered block settings.\r\n */\r\nfunction addAttributes( settings ) {\r\n\tif ( ! hasColorSupport( settings ) ) {\r\n\t\treturn settings;\r\n\t}\r\n\r\n\t// Allow blocks to specify their own attribute definition with default values if needed.\r\n\tif ( ! settings.attributes.backgroundColor ) {\r\n\t\tObject.assign( settings.attributes, {\r\n\t\t\tbackgroundColor: {\r\n\t\t\t\ttype: 'string',\r\n\t\t\t},\r\n\t\t} );\r\n\t}\r\n\tif ( ! settings.attributes.textColor ) {\r\n\t\tObject.assign( settings.attributes, {\r\n\t\t\ttextColor: {\r\n\t\t\t\ttype: 'string',\r\n\t\t\t},\r\n\t\t} );\r\n\t}\r\n\r\n\tif ( hasGradientSupport( settings ) && ! settings.attributes.gradient ) {\r\n\t\tObject.assign( settings.attributes, {\r\n\t\t\tgradient: {\r\n\t\t\t\ttype: 'string',\r\n\t\t\t},\r\n\t\t} );\r\n\t}\r\n\r\n\treturn settings;\r\n}\r\n\r\n/**\r\n * Override props assigned to save component to inject colors classnames.\r\n *\r\n * @param {Object}        props           Additional props applied to save element.\r\n * @param {Object|string} blockNameOrType Block type.\r\n * @param {Object}        attributes      Block attributes.\r\n *\r\n * @return {Object} Filtered props applied to save element.\r\n */\r\nexport function addSaveProps( props, blockNameOrType, attributes ) {\r\n\tif (\r\n\t\t! hasColorSupport( blockNameOrType ) ||\r\n\t\tshouldSkipSerialization( blockNameOrType, COLOR_SUPPORT_KEY )\r\n\t) {\r\n\t\treturn props;\r\n\t}\r\n\r\n\tconst hasGradient = hasGradientSupport( blockNameOrType );\r\n\r\n\t// I'd have preferred to avoid the \"style\" attribute usage here\r\n\tconst { backgroundColor, textColor, gradient, style } = attributes;\r\n\r\n\tconst shouldSerialize = ( feature ) =>\r\n\t\t! shouldSkipSerialization(\r\n\t\t\tblockNameOrType,\r\n\t\t\tCOLOR_SUPPORT_KEY,\r\n\t\t\tfeature\r\n\t\t);\r\n\r\n\t// Primary color classes must come before the `has-text-color`,\r\n\t// `has-background` and `has-link-color` classes to maintain backwards\r\n\t// compatibility and avoid block invalidations.\r\n\tconst textClass = shouldSerialize( 'text' )\r\n\t\t? getColorClassName( 'color', textColor )\r\n\t\t: undefined;\r\n\r\n\tconst gradientClass = shouldSerialize( 'gradients' )\r\n\t\t? __experimentalGetGradientClass( gradient )\r\n\t\t: undefined;\r\n\r\n\tconst backgroundClass = shouldSerialize( 'background' )\r\n\t\t? getColorClassName( 'background-color', backgroundColor )\r\n\t\t: undefined;\r\n\r\n\tconst serializeHasBackground =\r\n\t\tshouldSerialize( 'background' ) || shouldSerialize( 'gradients' );\r\n\tconst hasBackground =\r\n\t\tbackgroundColor ||\r\n\t\tstyle?.color?.background ||\r\n\t\t( hasGradient && ( gradient || style?.color?.gradient ) );\r\n\r\n\tconst newClassName = classnames(\r\n\t\tprops.className,\r\n\t\ttextClass,\r\n\t\tgradientClass,\r\n\t\t{\r\n\t\t\t// Don't apply the background class if there's a custom gradient.\r\n\t\t\t[ backgroundClass ]:\r\n\t\t\t\t( ! hasGradient || ! style?.color?.gradient ) &&\r\n\t\t\t\t!! backgroundClass,\r\n\t\t\t'has-text-color':\r\n\t\t\t\tshouldSerialize( 'text' ) &&\r\n\t\t\t\t( textColor || style?.color?.text ),\r\n\t\t\t'has-background': serializeHasBackground && hasBackground,\r\n\t\t\t'has-link-color':\r\n\t\t\t\tshouldSerialize( 'link' ) && style?.elements?.link?.color,\r\n\t\t}\r\n\t);\r\n\tprops.className = newClassName ? newClassName : undefined;\r\n\r\n\treturn props;\r\n}\r\n\r\nfunction styleToAttributes( style ) {\r\n\tconst textColorValue = style?.color?.text;\r\n\tconst textColorSlug = textColorValue?.startsWith( 'var:preset|color|' )\r\n\t\t? textColorValue.substring( 'var:preset|color|'.length )\r\n\t\t: undefined;\r\n\tconst backgroundColorValue = style?.color?.background;\r\n\tconst backgroundColorSlug = backgroundColorValue?.startsWith(\r\n\t\t'var:preset|color|'\r\n\t)\r\n\t\t? backgroundColorValue.substring( 'var:preset|color|'.length )\r\n\t\t: undefined;\r\n\tconst gradientValue = style?.color?.gradient;\r\n\tconst gradientSlug = gradientValue?.startsWith( 'var:preset|gradient|' )\r\n\t\t? gradientValue.substring( 'var:preset|gradient|'.length )\r\n\t\t: undefined;\r\n\tconst updatedStyle = { ...style };\r\n\tupdatedStyle.color = {\r\n\t\t...updatedStyle.color,\r\n\t\ttext: textColorSlug ? undefined : textColorValue,\r\n\t\tbackground: backgroundColorSlug ? undefined : backgroundColorValue,\r\n\t\tgradient: gradientSlug ? undefined : gradientValue,\r\n\t};\r\n\treturn {\r\n\t\tstyle: cleanEmptyObject( updatedStyle ),\r\n\t\ttextColor: textColorSlug,\r\n\t\tbackgroundColor: backgroundColorSlug,\r\n\t\tgradient: gradientSlug,\r\n\t};\r\n}\r\n\r\nfunction attributesToStyle( attributes ) {\r\n\treturn {\r\n\t\t...attributes.style,\r\n\t\tcolor: {\r\n\t\t\t...attributes.style?.color,\r\n\t\t\ttext: attributes.textColor\r\n\t\t\t\t? 'var:preset|color|' + attributes.textColor\r\n\t\t\t\t: attributes.style?.color?.text,\r\n\t\t\tbackground: attributes.backgroundColor\r\n\t\t\t\t? 'var:preset|color|' + attributes.backgroundColor\r\n\t\t\t\t: attributes.style?.color?.background,\r\n\t\t\tgradient: attributes.gradient\r\n\t\t\t\t? 'var:preset|gradient|' + attributes.gradient\r\n\t\t\t\t: attributes.style?.color?.gradient,\r\n\t\t},\r\n\t};\r\n}\r\n\r\nfunction ColorInspectorControl( { children, resetAllFilter } ) {\r\n\tconst attributesResetAllFilter = useCallback(\r\n\t\t( attributes ) => {\r\n\t\t\tconst existingStyle = attributesToStyle( attributes );\r\n\t\t\tconst updatedStyle = resetAllFilter( existingStyle );\r\n\t\t\treturn {\r\n\t\t\t\t...attributes,\r\n\t\t\t\t...styleToAttributes( updatedStyle ),\r\n\t\t\t};\r\n\t\t},\r\n\t\t[ resetAllFilter ]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<InspectorControls\r\n\t\t\tgroup=\"color\"\r\n\t\t\tresetAllFilter={ attributesResetAllFilter }\r\n\t\t>\r\n\t\t\t{ children }\r\n\t\t</InspectorControls>\r\n\t);\r\n}\r\n\r\nexport function ColorEdit( { clientId, name, setAttributes, settings } ) {\r\n\tconst isEnabled = useHasColorPanel( settings );\r\n\tfunction selector( select ) {\r\n\t\tconst { style, textColor, backgroundColor, gradient } =\r\n\t\t\tselect( blockEditorStore ).getBlockAttributes( clientId ) || {};\r\n\t\treturn { style, textColor, backgroundColor, gradient };\r\n\t}\r\n\tconst { style, textColor, backgroundColor, gradient } = useSelect(\r\n\t\tselector,\r\n\t\t[ clientId ]\r\n\t);\r\n\tconst value = useMemo( () => {\r\n\t\treturn attributesToStyle( {\r\n\t\t\tstyle,\r\n\t\t\ttextColor,\r\n\t\t\tbackgroundColor,\r\n\t\t\tgradient,\r\n\t\t} );\r\n\t}, [ style, textColor, backgroundColor, gradient ] );\r\n\r\n\tconst onChange = ( newStyle ) => {\r\n\t\tsetAttributes( styleToAttributes( newStyle ) );\r\n\t};\r\n\r\n\tif ( ! isEnabled ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tconst defaultControls = getBlockSupport( name, [\r\n\t\tCOLOR_SUPPORT_KEY,\r\n\t\t'__experimentalDefaultControls',\r\n\t] );\r\n\r\n\tconst enableContrastChecking =\r\n\t\tPlatform.OS === 'web' &&\r\n\t\t! value?.color?.gradient &&\r\n\t\t( settings?.color?.text || settings?.color?.link ) &&\r\n\t\t// Contrast checking is enabled by default.\r\n\t\t// Deactivating it requires `enableContrastChecker` to have\r\n\t\t// an explicit value of `false`.\r\n\t\tfalse !==\r\n\t\t\tgetBlockSupport( name, [\r\n\t\t\t\tCOLOR_SUPPORT_KEY,\r\n\t\t\t\t'enableContrastChecker',\r\n\t\t\t] );\r\n\r\n\treturn (\r\n\t\t<StylesColorPanel\r\n\t\t\tas={ ColorInspectorControl }\r\n\t\t\tpanelId={ clientId }\r\n\t\t\tsettings={ settings }\r\n\t\t\tvalue={ value }\r\n\t\t\tonChange={ onChange }\r\n\t\t\tdefaultControls={ defaultControls }\r\n\t\t\tenableContrastChecker={\r\n\t\t\t\tfalse !==\r\n\t\t\t\tgetBlockSupport( name, [\r\n\t\t\t\t\tCOLOR_SUPPORT_KEY,\r\n\t\t\t\t\t'enableContrastChecker',\r\n\t\t\t\t] )\r\n\t\t\t}\r\n\t\t>\r\n\t\t\t{ enableContrastChecking && (\r\n\t\t\t\t<BlockColorContrastChecker clientId={ clientId } />\r\n\t\t\t) }\r\n\t\t</StylesColorPanel>\r\n\t);\r\n}\r\n\r\nfunction useBlockProps( {\r\n\tname,\r\n\tbackgroundColor,\r\n\ttextColor,\r\n\tgradient,\r\n\tstyle,\r\n} ) {\r\n\tconst [ userPalette, themePalette, defaultPalette ] = useSettings(\r\n\t\t'color.palette.custom',\r\n\t\t'color.palette.theme',\r\n\t\t'color.palette.default'\r\n\t);\r\n\r\n\tconst colors = useMemo(\r\n\t\t() => [\r\n\t\t\t...( userPalette || [] ),\r\n\t\t\t...( themePalette || [] ),\r\n\t\t\t...( defaultPalette || [] ),\r\n\t\t],\r\n\t\t[ userPalette, themePalette, defaultPalette ]\r\n\t);\r\n\tif (\r\n\t\t! hasColorSupport( name ) ||\r\n\t\tshouldSkipSerialization( name, COLOR_SUPPORT_KEY )\r\n\t) {\r\n\t\treturn {};\r\n\t}\r\n\tconst extraStyles = {};\r\n\r\n\tif (\r\n\t\ttextColor &&\r\n\t\t! shouldSkipSerialization( name, COLOR_SUPPORT_KEY, 'text' )\r\n\t) {\r\n\t\textraStyles.color = getColorObjectByAttributeValues(\r\n\t\t\tcolors,\r\n\t\t\ttextColor\r\n\t\t)?.color;\r\n\t}\r\n\tif (\r\n\t\tbackgroundColor &&\r\n\t\t! shouldSkipSerialization( name, COLOR_SUPPORT_KEY, 'background' )\r\n\t) {\r\n\t\textraStyles.backgroundColor = getColorObjectByAttributeValues(\r\n\t\t\tcolors,\r\n\t\t\tbackgroundColor\r\n\t\t)?.color;\r\n\t}\r\n\r\n\tconst saveProps = addSaveProps( { style: extraStyles }, name, {\r\n\t\ttextColor,\r\n\t\tbackgroundColor,\r\n\t\tgradient,\r\n\t\tstyle,\r\n\t} );\r\n\r\n\tconst hasBackgroundValue =\r\n\t\tbackgroundColor ||\r\n\t\tstyle?.color?.background ||\r\n\t\tgradient ||\r\n\t\tstyle?.color?.gradient;\r\n\r\n\treturn {\r\n\t\t...saveProps,\r\n\t\tclassName: classnames(\r\n\t\t\tsaveProps.className,\r\n\t\t\t// Add background image classes in the editor, if not already handled by background color values.\r\n\t\t\t! hasBackgroundValue && getBackgroundImageClasses( style )\r\n\t\t),\r\n\t};\r\n}\r\n\r\nexport default {\r\n\tuseBlockProps,\r\n\taddSaveProps,\r\n\tattributeKeys: [ 'backgroundColor', 'textColor', 'gradient', 'style' ],\r\n\thasSupport: hasColorSupport,\r\n};\r\n\r\nconst MIGRATION_PATHS = {\r\n\tlinkColor: [ [ 'style', 'elements', 'link', 'color', 'text' ] ],\r\n\ttextColor: [ [ 'textColor' ], [ 'style', 'color', 'text' ] ],\r\n\tbackgroundColor: [\r\n\t\t[ 'backgroundColor' ],\r\n\t\t[ 'style', 'color', 'background' ],\r\n\t],\r\n\tgradient: [ [ 'gradient' ], [ 'style', 'color', 'gradient' ] ],\r\n};\r\n\r\nexport function addTransforms( result, source, index, results ) {\r\n\tconst destinationBlockType = result.name;\r\n\tconst activeSupports = {\r\n\t\tlinkColor: hasLinkColorSupport( destinationBlockType ),\r\n\t\ttextColor: hasTextColorSupport( destinationBlockType ),\r\n\t\tbackgroundColor: hasBackgroundColorSupport( destinationBlockType ),\r\n\t\tgradient: hasGradientSupport( destinationBlockType ),\r\n\t};\r\n\treturn transformStyles(\r\n\t\tactiveSupports,\r\n\t\tMIGRATION_PATHS,\r\n\t\tresult,\r\n\t\tsource,\r\n\t\tindex,\r\n\t\tresults\r\n\t);\r\n}\r\n\r\naddFilter(\r\n\t'blocks.registerBlockType',\r\n\t'core/color/addAttribute',\r\n\taddAttributes\r\n);\r\n\r\naddFilter(\r\n\t'blocks.switchToBlockType.transformedBlock',\r\n\t'core/color/addTransforms',\r\n\taddTransforms\r\n);\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SelectControl } from '@wordpress/components';\r\nimport { __ } from '@wordpress/i18n';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { useSettings } from '../use-settings';\r\n\r\nexport default function FontFamilyControl( {\r\n\tvalue = '',\r\n\tonChange,\r\n\tfontFamilies,\r\n\t...props\r\n} ) {\r\n\tconst [ blockLevelFontFamilies ] = useSettings( 'typography.fontFamilies' );\r\n\tif ( ! fontFamilies ) {\r\n\t\tfontFamilies = blockLevelFontFamilies;\r\n\t}\r\n\r\n\tif ( ! fontFamilies || fontFamilies.length === 0 ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tconst options = [\r\n\t\t{ value: '', label: __( 'Default' ) },\r\n\t\t...fontFamilies.map( ( { fontFamily, name } ) => {\r\n\t\t\treturn {\r\n\t\t\t\tvalue: fontFamily,\r\n\t\t\t\tlabel: name || fontFamily,\r\n\t\t\t};\r\n\t\t} ),\r\n\t];\r\n\treturn (\r\n\t\t<SelectControl\r\n\t\t\tlabel={ __( 'Font' ) }\r\n\t\t\toptions={ options }\r\n\t\t\tvalue={ value }\r\n\t\t\tonChange={ onChange }\r\n\t\t\tlabelPosition=\"top\"\r\n\t\t\t{ ...props }\r\n\t\t/>\r\n\t);\r\n}\r\n","/**\n * WordPress dependencies\n */\nimport { CustomSelectControl } from '@wordpress/components';\nimport { useMemo } from '@wordpress/element';\nimport { __, _x, sprintf } from '@wordpress/i18n';\n\nconst FONT_STYLES = [\n\t{\n\t\tname: _x( 'Regular', 'font style' ),\n\t\tvalue: 'normal',\n\t},\n\t{\n\t\tname: _x( 'Italic', 'font style' ),\n\t\tvalue: 'italic',\n\t},\n];\n\nconst FONT_WEIGHTS = [\n\t{\n\t\tname: _x( 'Thin', 'font weight' ),\n\t\tvalue: '100',\n\t},\n\t{\n\t\tname: _x( 'Extra Light', 'font weight' ),\n\t\tvalue: '200',\n\t},\n\t{\n\t\tname: _x( 'Light', 'font weight' ),\n\t\tvalue: '300',\n\t},\n\t{\n\t\tname: _x( 'Regular', 'font weight' ),\n\t\tvalue: '400',\n\t},\n\t{\n\t\tname: _x( 'Medium', 'font weight' ),\n\t\tvalue: '500',\n\t},\n\t{\n\t\tname: _x( 'Semi Bold', 'font weight' ),\n\t\tvalue: '600',\n\t},\n\t{\n\t\tname: _x( 'Bold', 'font weight' ),\n\t\tvalue: '700',\n\t},\n\t{\n\t\tname: _x( 'Extra Bold', 'font weight' ),\n\t\tvalue: '800',\n\t},\n\t{\n\t\tname: _x( 'Black', 'font weight' ),\n\t\tvalue: '900',\n\t},\n];\n\n/**\n * Adjusts font appearance field label in case either font styles or weights\n * are disabled.\n *\n * @param {boolean} hasFontStyles  Whether font styles are enabled and present.\n * @param {boolean} hasFontWeights Whether font weights are enabled and present.\n * @return {string} A label representing what font appearance is being edited.\n */\nconst getFontAppearanceLabel = ( hasFontStyles, hasFontWeights ) => {\n\tif ( ! hasFontStyles ) {\n\t\treturn __( 'Font weight' );\n\t}\n\n\tif ( ! hasFontWeights ) {\n\t\treturn __( 'Font style' );\n\t}\n\n\treturn __( 'Appearance' );\n};\n\n/**\n * Control to display unified font style and weight options.\n *\n * @param {Object} props Component props.\n *\n * @return {Element} Font appearance control.\n */\nexport default function FontAppearanceControl( props ) {\n\tconst {\n\t\tonChange,\n\t\thasFontStyles = true,\n\t\thasFontWeights = true,\n\t\tvalue: { fontStyle, fontWeight },\n\t\t...otherProps\n\t} = props;\n\tconst hasStylesOrWeights = hasFontStyles || hasFontWeights;\n\tconst label = getFontAppearanceLabel( hasFontStyles, hasFontWeights );\n\tconst defaultOption = {\n\t\tkey: 'default',\n\t\tname: __( 'Default' ),\n\t\tstyle: { fontStyle: undefined, fontWeight: undefined },\n\t};\n\n\t// Combines both font style and weight options into a single dropdown.\n\tconst combineOptions = () => {\n\t\tconst combinedOptions = [ defaultOption ];\n\n\t\tFONT_STYLES.forEach( ( { name: styleName, value: styleValue } ) => {\n\t\t\tFONT_WEIGHTS.forEach(\n\t\t\t\t( { name: weightName, value: weightValue } ) => {\n\t\t\t\t\tconst optionName =\n\t\t\t\t\t\tstyleValue === 'normal'\n\t\t\t\t\t\t\t? weightName\n\t\t\t\t\t\t\t: sprintf(\n\t\t\t\t\t\t\t\t\t/* translators: 1: Font weight name. 2: Font style name. */\n\t\t\t\t\t\t\t\t\t__( '%1$s %2$s' ),\n\t\t\t\t\t\t\t\t\tweightName,\n\t\t\t\t\t\t\t\t\tstyleName\n\t\t\t\t\t\t\t  );\n\n\t\t\t\t\tcombinedOptions.push( {\n\t\t\t\t\t\tkey: `${ styleValue }-${ weightValue }`,\n\t\t\t\t\t\tname: optionName,\n\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\tfontStyle: styleValue,\n\t\t\t\t\t\t\tfontWeight: weightValue,\n\t\t\t\t\t\t},\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t);\n\t\t} );\n\n\t\treturn combinedOptions;\n\t};\n\n\t// Generates select options for font styles only.\n\tconst styleOptions = () => {\n\t\tconst combinedOptions = [ defaultOption ];\n\t\tFONT_STYLES.forEach( ( { name, value } ) => {\n\t\t\tcombinedOptions.push( {\n\t\t\t\tkey: value,\n\t\t\t\tname,\n\t\t\t\tstyle: { fontStyle: value, fontWeight: undefined },\n\t\t\t} );\n\t\t} );\n\t\treturn combinedOptions;\n\t};\n\n\t// Generates select options for font weights only.\n\tconst weightOptions = () => {\n\t\tconst combinedOptions = [ defaultOption ];\n\t\tFONT_WEIGHTS.forEach( ( { name, value } ) => {\n\t\t\tcombinedOptions.push( {\n\t\t\t\tkey: value,\n\t\t\t\tname,\n\t\t\t\tstyle: { fontStyle: undefined, fontWeight: value },\n\t\t\t} );\n\t\t} );\n\t\treturn combinedOptions;\n\t};\n\n\t// Map font styles and weights to select options.\n\tconst selectOptions = useMemo( () => {\n\t\tif ( hasFontStyles && hasFontWeights ) {\n\t\t\treturn combineOptions();\n\t\t}\n\n\t\treturn hasFontStyles ? styleOptions() : weightOptions();\n\t}, [ props.options ] );\n\n\t// Find current selection by comparing font style & weight against options,\n\t// and fall back to the Default option if there is no matching option.\n\tconst currentSelection =\n\t\tselectOptions.find(\n\t\t\t( option ) =>\n\t\t\t\toption.style.fontStyle === fontStyle &&\n\t\t\t\toption.style.fontWeight === fontWeight\n\t\t) || selectOptions[ 0 ];\n\n\t// Adjusts screen reader description based on styles or weights.\n\tconst getDescribedBy = () => {\n\t\tif ( ! currentSelection ) {\n\t\t\treturn __( 'No selected font appearance' );\n\t\t}\n\n\t\tif ( ! hasFontStyles ) {\n\t\t\treturn sprintf(\n\t\t\t\t// translators: %s: Currently selected font weight.\n\t\t\t\t__( 'Currently selected font weight: %s' ),\n\t\t\t\tcurrentSelection.name\n\t\t\t);\n\t\t}\n\n\t\tif ( ! hasFontWeights ) {\n\t\t\treturn sprintf(\n\t\t\t\t// translators: %s: Currently selected font style.\n\t\t\t\t__( 'Currently selected font style: %s' ),\n\t\t\t\tcurrentSelection.name\n\t\t\t);\n\t\t}\n\n\t\treturn sprintf(\n\t\t\t// translators: %s: Currently selected font appearance.\n\t\t\t__( 'Currently selected font appearance: %s' ),\n\t\t\tcurrentSelection.name\n\t\t);\n\t};\n\n\treturn (\n\t\thasStylesOrWeights && (\n\t\t\t<CustomSelectControl\n\t\t\t\t{ ...otherProps }\n\t\t\t\tclassName=\"components-font-appearance-control\"\n\t\t\t\tlabel={ label }\n\t\t\t\tdescribedBy={ getDescribedBy() }\n\t\t\t\toptions={ selectOptions }\n\t\t\t\tvalue={ currentSelection }\n\t\t\t\tonChange={ ( { selectedItem } ) =>\n\t\t\t\t\tonChange( selectedItem.style )\n\t\t\t\t}\n\t\t\t/>\n\t\t)\n\t);\n}\n","export const BASE_DEFAULT_VALUE = 1.5;\r\nexport const STEP = 0.01;\r\n/**\r\n * A spin factor of 10 allows the spin controls to increment/decrement by 0.1.\r\n * e.g. A line-height value of 1.55 will increment to 1.65.\r\n */\r\nexport const SPIN_FACTOR = 10;\r\n/**\r\n * There are varying value types within LineHeightControl:\r\n *\r\n * {undefined} Initial value. No changes from the user.\r\n * {string} Input value. Value consumed/outputted by the input. Empty would be ''.\r\n * {number} Block attribute type. Input value needs to be converted for attribute setting.\r\n *\r\n * Note: If the value is undefined, the input requires it to be an empty string ('')\r\n * in order to be considered \"controlled\" by props (rather than internal state).\r\n */\r\nexport const RESET_VALUE = '';\r\n\r\n/**\r\n * Determines if the lineHeight attribute has been properly defined.\r\n *\r\n * @param {any} lineHeight The value to check.\r\n *\r\n * @return {boolean} Whether the lineHeight attribute is valid.\r\n */\r\nexport function isLineHeightDefined( lineHeight ) {\r\n\treturn lineHeight !== undefined && lineHeight !== RESET_VALUE;\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport deprecated from '@wordpress/deprecated';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { __experimentalNumberControl as NumberControl } from '@wordpress/components';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport {\r\n\tBASE_DEFAULT_VALUE,\r\n\tRESET_VALUE,\r\n\tSTEP,\r\n\tSPIN_FACTOR,\r\n\tisLineHeightDefined,\r\n} from './utils';\r\n\r\nconst LineHeightControl = ( {\r\n\tvalue: lineHeight,\r\n\tonChange,\r\n\t/** Start opting into the new margin-free styles that will become the default in a future version. */\r\n\t__nextHasNoMarginBottom = false,\r\n\t__unstableInputWidth = '60px',\r\n\t...otherProps\r\n} ) => {\r\n\tconst isDefined = isLineHeightDefined( lineHeight );\r\n\r\n\tconst adjustNextValue = ( nextValue, wasTypedOrPasted ) => {\r\n\t\t// Set the next value without modification if lineHeight has been defined.\r\n\t\tif ( isDefined ) return nextValue;\r\n\r\n\t\t/**\r\n\t\t * The following logic handles the initial spin up/down action\r\n\t\t * (from an undefined value state) so that the next values are better suited for\r\n\t\t * line-height rendering. For example, the first spin up should immediately\r\n\t\t * go to 1.6, rather than the normally expected 0.1.\r\n\t\t *\r\n\t\t * Spin up/down actions can be triggered by keydowns of the up/down arrow keys,\r\n\t\t * dragging the input or by clicking the spin buttons.\r\n\t\t */\r\n\t\tconst spin = STEP * SPIN_FACTOR;\r\n\t\tswitch ( `${ nextValue }` ) {\r\n\t\t\tcase `${ spin }`:\r\n\t\t\t\t// Increment by spin value.\r\n\t\t\t\treturn BASE_DEFAULT_VALUE + spin;\r\n\t\t\tcase '0': {\r\n\t\t\t\t// This means the user explicitly input '0', rather than using the\r\n\t\t\t\t// spin down action from an undefined value state.\r\n\t\t\t\tif ( wasTypedOrPasted ) return nextValue;\r\n\t\t\t\t// Decrement by spin value.\r\n\t\t\t\treturn BASE_DEFAULT_VALUE - spin;\r\n\t\t\t}\r\n\t\t\tcase '':\r\n\t\t\t\treturn BASE_DEFAULT_VALUE;\r\n\t\t\tdefault:\r\n\t\t\t\treturn nextValue;\r\n\t\t}\r\n\t};\r\n\r\n\tconst stateReducer = ( state, action ) => {\r\n\t\t// Be careful when changing this  cross-browser behavior of the\r\n\t\t// `inputType` field in `input` events are inconsistent.\r\n\t\t// For example, Firefox emits an input event with inputType=\"insertReplacementText\"\r\n\t\t// on spin button clicks, while other browsers do not even emit an input event.\r\n\t\tconst wasTypedOrPasted = [ 'insertText', 'insertFromPaste' ].includes(\r\n\t\t\taction.payload.event.nativeEvent?.inputType\r\n\t\t);\r\n\t\tconst value = adjustNextValue( state.value, wasTypedOrPasted );\r\n\t\treturn { ...state, value };\r\n\t};\r\n\r\n\tconst value = isDefined ? lineHeight : RESET_VALUE;\r\n\r\n\tif ( ! __nextHasNoMarginBottom ) {\r\n\t\tdeprecated(\r\n\t\t\t'Bottom margin styles for wp.blockEditor.LineHeightControl',\r\n\t\t\t{\r\n\t\t\t\tsince: '6.0',\r\n\t\t\t\tversion: '6.4',\r\n\t\t\t\thint: 'Set the `__nextHasNoMarginBottom` prop to true to start opting into the new styles, which will become the default in a future version',\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\tconst deprecatedStyles = __nextHasNoMarginBottom\r\n\t\t? undefined\r\n\t\t: { marginBottom: 24 };\r\n\r\n\tconst handleOnChange = ( nextValue, { event } ) => {\r\n\t\tif ( nextValue === '' ) {\r\n\t\t\tonChange();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( event.type === 'click' ) {\r\n\t\t\tonChange( adjustNextValue( `${ nextValue }`, false ) );\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tonChange( `${ nextValue }` );\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName=\"block-editor-line-height-control\"\r\n\t\t\tstyle={ deprecatedStyles }\r\n\t\t>\r\n\t\t\t<NumberControl\r\n\t\t\t\t{ ...otherProps }\r\n\t\t\t\t__unstableInputWidth={ __unstableInputWidth }\r\n\t\t\t\t__unstableStateReducer={ stateReducer }\r\n\t\t\t\tonChange={ handleOnChange }\r\n\t\t\t\tlabel={ __( 'Line height' ) }\r\n\t\t\t\tplaceholder={ BASE_DEFAULT_VALUE }\r\n\t\t\t\tstep={ STEP }\r\n\t\t\t\tspinFactor={ SPIN_FACTOR }\r\n\t\t\t\tvalue={ value }\r\n\t\t\t\tmin={ 0 }\r\n\t\t\t\tspinControls=\"custom\"\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\n/**\r\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/line-height-control/README.md\r\n */\r\nexport default LineHeightControl;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\t__experimentalUnitControl as UnitControl,\r\n\t__experimentalUseCustomUnits as useCustomUnits,\r\n} from '@wordpress/components';\r\nimport { __ } from '@wordpress/i18n';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { useSettings } from '../../components/use-settings';\r\n\r\n/**\r\n * Control for letter-spacing.\r\n *\r\n * @param {Object}                  props                      Component props.\r\n * @param {string}                  props.value                Currently selected letter-spacing.\r\n * @param {Function}                props.onChange             Handles change in letter-spacing selection.\r\n * @param {string|number|undefined} props.__unstableInputWidth Input width to pass through to inner UnitControl. Should be a valid CSS value.\r\n *\r\n * @return {Element} Letter-spacing control.\r\n */\r\nexport default function LetterSpacingControl( {\r\n\tvalue,\r\n\tonChange,\r\n\t__unstableInputWidth = '60px',\r\n\t...otherProps\r\n} ) {\r\n\tconst [ availableUnits ] = useSettings( 'spacing.units' );\r\n\tconst units = useCustomUnits( {\r\n\t\tavailableUnits: availableUnits || [ 'px', 'em', 'rem' ],\r\n\t\tdefaultValues: { px: 2, em: 0.2, rem: 0.2 },\r\n\t} );\r\n\treturn (\r\n\t\t<UnitControl\r\n\t\t\t{ ...otherProps }\r\n\t\t\tlabel={ __( 'Letter spacing' ) }\r\n\t\t\tvalue={ value }\r\n\t\t\t__unstableInputWidth={ __unstableInputWidth }\r\n\t\t\tunits={ units }\r\n\t\t\tonChange={ onChange }\r\n\t\t/>\r\n\t);\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { Path, SVG } from '@wordpress/primitives';\r\n\r\nconst reset = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M7 11.5h10V13H7z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default reset;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst formatUppercase = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M6.1 6.8L2.1 18h1.6l1.1-3h4.3l1.1 3h1.6l-4-11.2H6.1zm-.8 6.8L7 8.9l1.7 4.7H5.3zm15.1-.7c-.4-.5-.9-.8-1.6-1 .4-.2.7-.5.8-.9.2-.4.3-.9.3-1.4 0-.9-.3-1.6-.8-2-.6-.5-1.3-.7-2.4-.7h-3.5V18h4.2c1.1 0 2-.3 2.6-.8.6-.6 1-1.4 1-2.4-.1-.8-.3-1.4-.6-1.9zm-5.7-4.7h1.8c.6 0 1.1.1 1.4.4.3.2.5.7.5 1.3 0 .6-.2 1.1-.5 1.3-.3.2-.8.4-1.4.4h-1.8V8.2zm4 8c-.4.3-.9.5-1.5.5h-2.6v-3.8h2.6c1.4 0 2 .6 2 1.9.1.6-.1 1-.5 1.4z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default formatUppercase;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst formatLowercase = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M11 16.8c-.1-.1-.2-.3-.3-.5v-2.6c0-.9-.1-1.7-.3-2.2-.2-.5-.5-.9-.9-1.2-.4-.2-.9-.3-1.6-.3-.5 0-1 .1-1.5.2s-.9.3-1.2.6l.2 1.2c.4-.3.7-.4 1.1-.5.3-.1.7-.2 1-.2.6 0 1 .1 1.3.4.3.2.4.7.4 1.4-1.2 0-2.3.2-3.3.7s-1.4 1.1-1.4 2.1c0 .7.2 1.2.7 1.6.4.4 1 .6 1.8.6.9 0 1.7-.4 2.4-1.2.1.3.2.5.4.7.1.2.3.3.6.4.3.1.6.1 1.1.1h.1l.2-1.2h-.1c-.4.1-.6 0-.7-.1zM9.2 16c-.2.3-.5.6-.9.8-.3.1-.7.2-1.1.2-.4 0-.7-.1-.9-.3-.2-.2-.3-.5-.3-.9 0-.6.2-1 .7-1.3.5-.3 1.3-.4 2.5-.5v2zm10.6-3.9c-.3-.6-.7-1.1-1.2-1.5-.6-.4-1.2-.6-1.9-.6-.5 0-.9.1-1.4.3-.4.2-.8.5-1.1.8V6h-1.4v12h1.3l.2-1c.2.4.6.6 1 .8.4.2.9.3 1.4.3.7 0 1.2-.2 1.8-.5.5-.4 1-.9 1.3-1.5.3-.6.5-1.3.5-2.1-.1-.6-.2-1.3-.5-1.9zm-1.7 4c-.4.5-.9.8-1.6.8s-1.2-.2-1.7-.7c-.4-.5-.7-1.2-.7-2.1 0-.9.2-1.6.7-2.1.4-.5 1-.7 1.7-.7s1.2.3 1.6.8c.4.5.6 1.2.6 2s-.2 1.4-.6 2z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default formatLowercase;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst formatCapitalize = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M7.1 6.8L3.1 18h1.6l1.1-3h4.3l1.1 3h1.6l-4-11.2H7.1zm-.8 6.8L8 8.9l1.7 4.7H6.3zm14.5-1.5c-.3-.6-.7-1.1-1.2-1.5-.6-.4-1.2-.6-1.9-.6-.5 0-.9.1-1.4.3-.4.2-.8.5-1.1.8V6h-1.4v12h1.3l.2-1c.2.4.6.6 1 .8.4.2.9.3 1.4.3.7 0 1.2-.2 1.8-.5.5-.4 1-.9 1.3-1.5.3-.6.5-1.3.5-2.1-.1-.6-.2-1.3-.5-1.9zm-1.7 4c-.4.5-.9.8-1.6.8s-1.2-.2-1.7-.7c-.4-.5-.7-1.2-.7-2.1 0-.9.2-1.6.7-2.1.4-.5 1-.7 1.7-.7s1.2.3 1.6.8c.4.5.6 1.2.6 2 .1.8-.2 1.4-.6 2z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default formatCapitalize;\r\n","/**\r\n * External dependencies\r\n */\r\nimport classnames from 'classnames';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { BaseControl, Button } from '@wordpress/components';\r\nimport { __ } from '@wordpress/i18n';\r\nimport {\r\n\treset,\r\n\tformatCapitalize,\r\n\tformatLowercase,\r\n\tformatUppercase,\r\n} from '@wordpress/icons';\r\n\r\nconst TEXT_TRANSFORMS = [\r\n\t{\r\n\t\tname: __( 'None' ),\r\n\t\tvalue: 'none',\r\n\t\ticon: reset,\r\n\t},\r\n\t{\r\n\t\tname: __( 'Uppercase' ),\r\n\t\tvalue: 'uppercase',\r\n\t\ticon: formatUppercase,\r\n\t},\r\n\t{\r\n\t\tname: __( 'Lowercase' ),\r\n\t\tvalue: 'lowercase',\r\n\t\ticon: formatLowercase,\r\n\t},\r\n\t{\r\n\t\tname: __( 'Capitalize' ),\r\n\t\tvalue: 'capitalize',\r\n\t\ticon: formatCapitalize,\r\n\t},\r\n];\r\n\r\n/**\r\n * Control to facilitate text transform selections.\r\n *\r\n * @param {Object}   props           Component props.\r\n * @param {string}   props.className Class name to add to the control.\r\n * @param {string}   props.value     Currently selected text transform.\r\n * @param {Function} props.onChange  Handles change in text transform selection.\r\n *\r\n * @return {Element} Text transform control.\r\n */\r\nexport default function TextTransformControl( { className, value, onChange } ) {\r\n\treturn (\r\n\t\t<fieldset\r\n\t\t\tclassName={ classnames(\r\n\t\t\t\t'block-editor-text-transform-control',\r\n\t\t\t\tclassName\r\n\t\t\t) }\r\n\t\t>\r\n\t\t\t<BaseControl.VisualLabel as=\"legend\">\r\n\t\t\t\t{ __( 'Letter case' ) }\r\n\t\t\t</BaseControl.VisualLabel>\r\n\t\t\t<div className=\"block-editor-text-transform-control__buttons\">\r\n\t\t\t\t{ TEXT_TRANSFORMS.map( ( textTransform ) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tkey={ textTransform.value }\r\n\t\t\t\t\t\t\ticon={ textTransform.icon }\r\n\t\t\t\t\t\t\tlabel={ textTransform.name }\r\n\t\t\t\t\t\t\tisPressed={ textTransform.value === value }\r\n\t\t\t\t\t\t\tonClick={ () => {\r\n\t\t\t\t\t\t\t\tonChange(\r\n\t\t\t\t\t\t\t\t\ttextTransform.value === value\r\n\t\t\t\t\t\t\t\t\t\t? undefined\r\n\t\t\t\t\t\t\t\t\t\t: textTransform.value\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t);\r\n\t\t\t\t} ) }\r\n\t\t\t</div>\r\n\t\t</fieldset>\r\n\t);\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst formatUnderline = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M7 18v1h10v-1H7zm5-2c1.5 0 2.6-.4 3.4-1.2.8-.8 1.1-2 1.1-3.5V5H15v5.8c0 1.2-.2 2.1-.6 2.8-.4.7-1.2 1-2.4 1s-2-.3-2.4-1c-.4-.7-.6-1.6-.6-2.8V5H7.5v6.2c0 1.5.4 2.7 1.1 3.5.8.9 1.9 1.3 3.4 1.3z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default formatUnderline;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst formatStrikethrough = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M9.1 9v-.5c0-.6.2-1.1.7-1.4.5-.3 1.2-.5 2-.5.7 0 1.4.1 2.1.3.7.2 1.4.5 2.1.9l.2-1.9c-.6-.3-1.2-.5-1.9-.7-.8-.1-1.6-.2-2.4-.2-1.5 0-2.7.3-3.6 1-.8.7-1.2 1.5-1.2 2.6V9h2zM20 12H4v1h8.3c.3.1.6.2.8.3.5.2.9.5 1.1.8.3.3.4.7.4 1.2 0 .7-.2 1.1-.8 1.5-.5.3-1.2.5-2.1.5-.8 0-1.6-.1-2.4-.3-.8-.2-1.5-.5-2.2-.8L7 18.1c.5.2 1.2.4 2 .6.8.2 1.6.3 2.4.3 1.7 0 3-.3 3.9-1 .9-.7 1.3-1.6 1.3-2.8 0-.9-.2-1.7-.7-2.2H20v-1z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default formatStrikethrough;\r\n","/**\r\n * External dependencies\r\n */\r\nimport classnames from 'classnames';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { BaseControl, Button } from '@wordpress/components';\r\nimport { reset, formatStrikethrough, formatUnderline } from '@wordpress/icons';\r\nimport { __ } from '@wordpress/i18n';\r\n\r\nconst TEXT_DECORATIONS = [\r\n\t{\r\n\t\tname: __( 'None' ),\r\n\t\tvalue: 'none',\r\n\t\ticon: reset,\r\n\t},\r\n\t{\r\n\t\tname: __( 'Underline' ),\r\n\t\tvalue: 'underline',\r\n\t\ticon: formatUnderline,\r\n\t},\r\n\t{\r\n\t\tname: __( 'Strikethrough' ),\r\n\t\tvalue: 'line-through',\r\n\t\ticon: formatStrikethrough,\r\n\t},\r\n];\r\n\r\n/**\r\n * Control to facilitate text decoration selections.\r\n *\r\n * @param {Object}   props             Component props.\r\n * @param {string}   props.value       Currently selected text decoration.\r\n * @param {Function} props.onChange    Handles change in text decoration selection.\r\n * @param {string}   [props.className] Additional class name to apply.\r\n *\r\n * @return {Element} Text decoration control.\r\n */\r\nexport default function TextDecorationControl( {\r\n\tvalue,\r\n\tonChange,\r\n\tclassName,\r\n} ) {\r\n\treturn (\r\n\t\t<fieldset\r\n\t\t\tclassName={ classnames(\r\n\t\t\t\t'block-editor-text-decoration-control',\r\n\t\t\t\tclassName\r\n\t\t\t) }\r\n\t\t>\r\n\t\t\t<BaseControl.VisualLabel as=\"legend\">\r\n\t\t\t\t{ __( 'Decoration' ) }\r\n\t\t\t</BaseControl.VisualLabel>\r\n\t\t\t<div className=\"block-editor-text-decoration-control__buttons\">\r\n\t\t\t\t{ TEXT_DECORATIONS.map( ( textDecoration ) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tkey={ textDecoration.value }\r\n\t\t\t\t\t\t\ticon={ textDecoration.icon }\r\n\t\t\t\t\t\t\tlabel={ textDecoration.name }\r\n\t\t\t\t\t\t\tisPressed={ textDecoration.value === value }\r\n\t\t\t\t\t\t\tonClick={ () => {\r\n\t\t\t\t\t\t\t\tonChange(\r\n\t\t\t\t\t\t\t\t\ttextDecoration.value === value\r\n\t\t\t\t\t\t\t\t\t\t? undefined\r\n\t\t\t\t\t\t\t\t\t\t: textDecoration.value\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t);\r\n\t\t\t\t} ) }\r\n\t\t\t</div>\r\n\t\t</fieldset>\r\n\t);\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst textHorizontal = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M8.2 14.4h3.9L13 17h1.7L11 6.5H9.3L5.6 17h1.7l.9-2.6zm2-5.5 1.4 4H8.8l1.4-4zm7.4 7.5-1.3.8.8 1.4H5.5V20h14.3l-2.2-3.6z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default textHorizontal;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst textVertical = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M7 5.6v1.7l2.6.9v3.9L7 13v1.7L17.5 11V9.3L7 5.6zm4.2 6V8.8l4 1.4-4 1.4zm-5.7 5.6V5.5H4v14.3l3.6-2.2-.8-1.3-1.3.9z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default textVertical;\r\n","/**\r\n * External dependencies\r\n */\r\nimport classnames from 'classnames';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { BaseControl, Button } from '@wordpress/components';\r\nimport { __, isRTL } from '@wordpress/i18n';\r\nimport { textHorizontal, textVertical } from '@wordpress/icons';\r\n\r\nconst WRITING_MODES = [\r\n\t{\r\n\t\tname: __( 'Horizontal' ),\r\n\t\tvalue: 'horizontal-tb',\r\n\t\ticon: textHorizontal,\r\n\t},\r\n\t{\r\n\t\tname: __( 'Vertical' ),\r\n\t\tvalue: isRTL() ? 'vertical-lr' : 'vertical-rl',\r\n\t\ticon: textVertical,\r\n\t},\r\n];\r\n\r\n/**\r\n * Control to facilitate writing mode selections.\r\n *\r\n * @param {Object}   props           Component props.\r\n * @param {string}   props.className Class name to add to the control.\r\n * @param {string}   props.value     Currently selected writing mode.\r\n * @param {Function} props.onChange  Handles change in the writing mode selection.\r\n *\r\n * @return {Element} Writing Mode control.\r\n */\r\nexport default function WritingModeControl( { className, value, onChange } ) {\r\n\treturn (\r\n\t\t<fieldset\r\n\t\t\tclassName={ classnames(\r\n\t\t\t\t'block-editor-writing-mode-control',\r\n\t\t\t\tclassName\r\n\t\t\t) }\r\n\t\t>\r\n\t\t\t<BaseControl.VisualLabel as=\"legend\">\r\n\t\t\t\t{ __( 'Orientation' ) }\r\n\t\t\t</BaseControl.VisualLabel>\r\n\t\t\t<div className=\"block-editor-writing-mode-control__buttons\">\r\n\t\t\t\t{ WRITING_MODES.map( ( writingMode ) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tkey={ writingMode.value }\r\n\t\t\t\t\t\t\ticon={ writingMode.icon }\r\n\t\t\t\t\t\t\tlabel={ writingMode.name }\r\n\t\t\t\t\t\t\tisPressed={ writingMode.value === value }\r\n\t\t\t\t\t\t\tonClick={ () => {\r\n\t\t\t\t\t\t\t\tonChange(\r\n\t\t\t\t\t\t\t\t\twritingMode.value === value\r\n\t\t\t\t\t\t\t\t\t\t? undefined\r\n\t\t\t\t\t\t\t\t\t\t: writingMode.value\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t);\r\n\t\t\t\t} ) }\r\n\t\t\t</div>\r\n\t\t</fieldset>\r\n\t);\r\n}\r\n","/**\n * WordPress dependencies\n */\nimport {\n\tFontSizePicker,\n\t__experimentalNumberControl as NumberControl,\n\t__experimentalToolsPanel as ToolsPanel,\n\t__experimentalToolsPanelItem as ToolsPanelItem,\n} from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { useCallback } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport {\n\tmergeOrigins,\n\toverrideOrigins,\n\thasOriginValue,\n} from '../../store/get-block-settings';\nimport FontFamilyControl from '../font-family';\nimport FontAppearanceControl from '../font-appearance-control';\nimport LineHeightControl from '../line-height-control';\nimport LetterSpacingControl from '../letter-spacing-control';\nimport TextTransformControl from '../text-transform-control';\nimport TextDecorationControl from '../text-decoration-control';\nimport WritingModeControl from '../writing-mode-control';\nimport { getValueFromVariable, TOOLSPANEL_DROPDOWNMENU_PROPS } from './utils';\nimport { setImmutably } from '../../utils/object';\n\nconst MIN_TEXT_COLUMNS = 1;\nconst MAX_TEXT_COLUMNS = 6;\n\nexport function useHasTypographyPanel( settings ) {\n\tconst hasFontFamily = useHasFontFamilyControl( settings );\n\tconst hasLineHeight = useHasLineHeightControl( settings );\n\tconst hasFontAppearance = useHasAppearanceControl( settings );\n\tconst hasLetterSpacing = useHasLetterSpacingControl( settings );\n\tconst hasTextTransform = useHasTextTransformControl( settings );\n\tconst hasTextDecoration = useHasTextDecorationControl( settings );\n\tconst hasWritingMode = useHasWritingModeControl( settings );\n\tconst hasTextColumns = useHasTextColumnsControl( settings );\n\tconst hasFontSize = useHasFontSizeControl( settings );\n\n\treturn (\n\t\thasFontFamily ||\n\t\thasLineHeight ||\n\t\thasFontAppearance ||\n\t\thasLetterSpacing ||\n\t\thasTextTransform ||\n\t\thasFontSize ||\n\t\thasTextDecoration ||\n\t\thasWritingMode ||\n\t\thasTextColumns\n\t);\n}\n\nfunction useHasFontSizeControl( settings ) {\n\treturn (\n\t\thasOriginValue( settings?.typography?.fontSizes ) ||\n\t\tsettings?.typography?.customFontSize\n\t);\n}\n\nfunction useHasFontFamilyControl( settings ) {\n\treturn hasOriginValue( settings?.typography?.fontFamilies );\n}\n\nfunction useHasLineHeightControl( settings ) {\n\treturn settings?.typography?.lineHeight;\n}\n\nfunction useHasAppearanceControl( settings ) {\n\treturn settings?.typography?.fontStyle || settings?.typography?.fontWeight;\n}\n\nfunction useAppearanceControlLabel( settings ) {\n\tif ( ! settings?.typography?.fontStyle ) {\n\t\treturn __( 'Font weight' );\n\t}\n\tif ( ! settings?.typography?.fontWeight ) {\n\t\treturn __( 'Font style' );\n\t}\n\treturn __( 'Appearance' );\n}\n\nfunction useHasLetterSpacingControl( settings ) {\n\treturn settings?.typography?.letterSpacing;\n}\n\nfunction useHasTextTransformControl( settings ) {\n\treturn settings?.typography?.textTransform;\n}\n\nfunction useHasTextDecorationControl( settings ) {\n\treturn settings?.typography?.textDecoration;\n}\n\nfunction useHasWritingModeControl( settings ) {\n\treturn settings?.typography?.writingMode;\n}\n\nfunction useHasTextColumnsControl( settings ) {\n\treturn settings?.typography?.textColumns;\n}\n\nfunction getUniqueFontSizesBySlug( settings ) {\n\tconst fontSizes = settings?.typography?.fontSizes ?? {};\n\tconst overriddenFontSizes = overrideOrigins( fontSizes ) ?? [];\n\tconst uniqueSizes = [];\n\tfor ( const currentSize of overriddenFontSizes ) {\n\t\tif ( ! uniqueSizes.some( ( { slug } ) => slug === currentSize.slug ) ) {\n\t\t\tuniqueSizes.push( currentSize );\n\t\t}\n\t}\n\treturn uniqueSizes;\n}\n\nfunction TypographyToolsPanel( {\n\tresetAllFilter,\n\tonChange,\n\tvalue,\n\tpanelId,\n\tchildren,\n} ) {\n\tconst resetAll = () => {\n\t\tconst updatedValue = resetAllFilter( value );\n\t\tonChange( updatedValue );\n\t};\n\n\treturn (\n\t\t<ToolsPanel\n\t\t\tlabel={ __( 'Typography' ) }\n\t\t\tresetAll={ resetAll }\n\t\t\tpanelId={ panelId }\n\t\t\tdropdownMenuProps={ TOOLSPANEL_DROPDOWNMENU_PROPS }\n\t\t>\n\t\t\t{ children }\n\t\t</ToolsPanel>\n\t);\n}\n\nconst DEFAULT_CONTROLS = {\n\tfontFamily: true,\n\tfontSize: true,\n\tfontAppearance: true,\n\tlineHeight: true,\n\tletterSpacing: true,\n\ttextTransform: true,\n\ttextDecoration: true,\n\twritingMode: true,\n\ttextColumns: true,\n};\n\nexport default function TypographyPanel( {\n\tas: Wrapper = TypographyToolsPanel,\n\tvalue,\n\tonChange,\n\tinheritedValue = value,\n\tsettings,\n\tpanelId,\n\tdefaultControls = DEFAULT_CONTROLS,\n} ) {\n\tconst decodeValue = ( rawValue ) =>\n\t\tgetValueFromVariable( { settings }, '', rawValue );\n\n\t// Font Family\n\tconst hasFontFamilyEnabled = useHasFontFamilyControl( settings );\n\tconst fontFamilies = settings?.typography?.fontFamilies ?? {};\n\tconst mergedFontFamilies = fontFamilies ? mergeOrigins( fontFamilies ) : [];\n\tconst fontFamily = decodeValue( inheritedValue?.typography?.fontFamily );\n\tconst setFontFamily = ( newValue ) => {\n\t\tconst slug = mergedFontFamilies?.find(\n\t\t\t( { fontFamily: f } ) => f === newValue\n\t\t)?.slug;\n\t\tonChange(\n\t\t\tsetImmutably(\n\t\t\t\tvalue,\n\t\t\t\t[ 'typography', 'fontFamily' ],\n\t\t\t\tslug\n\t\t\t\t\t? `var:preset|font-family|${ slug }`\n\t\t\t\t\t: newValue || undefined\n\t\t\t)\n\t\t);\n\t};\n\tconst hasFontFamily = () => !! value?.typography?.fontFamily;\n\tconst resetFontFamily = () => setFontFamily( undefined );\n\n\t// Font Size\n\tconst hasFontSizeEnabled = useHasFontSizeControl( settings );\n\tconst disableCustomFontSizes = ! settings?.typography?.customFontSize;\n\tconst mergedFontSizes = getUniqueFontSizesBySlug( settings );\n\n\tconst fontSize = decodeValue( inheritedValue?.typography?.fontSize );\n\tconst setFontSize = ( newValue, metadata ) => {\n\t\tconst actualValue = !! metadata?.slug\n\t\t\t? `var:preset|font-size|${ metadata?.slug }`\n\t\t\t: newValue;\n\n\t\tonChange(\n\t\t\tsetImmutably(\n\t\t\t\tvalue,\n\t\t\t\t[ 'typography', 'fontSize' ],\n\t\t\t\tactualValue || undefined\n\t\t\t)\n\t\t);\n\t};\n\tconst hasFontSize = () => !! value?.typography?.fontSize;\n\tconst resetFontSize = () => setFontSize( undefined );\n\n\t// Appearance\n\tconst hasAppearanceControl = useHasAppearanceControl( settings );\n\tconst appearanceControlLabel = useAppearanceControlLabel( settings );\n\tconst hasFontStyles = settings?.typography?.fontStyle;\n\tconst hasFontWeights = settings?.typography?.fontWeight;\n\tconst fontStyle = decodeValue( inheritedValue?.typography?.fontStyle );\n\tconst fontWeight = decodeValue( inheritedValue?.typography?.fontWeight );\n\tconst setFontAppearance = ( {\n\t\tfontStyle: newFontStyle,\n\t\tfontWeight: newFontWeight,\n\t} ) => {\n\t\tonChange( {\n\t\t\t...value,\n\t\t\ttypography: {\n\t\t\t\t...value?.typography,\n\t\t\t\tfontStyle: newFontStyle || undefined,\n\t\t\t\tfontWeight: newFontWeight || undefined,\n\t\t\t},\n\t\t} );\n\t};\n\tconst hasFontAppearance = () =>\n\t\t!! value?.typography?.fontStyle || !! value?.typography?.fontWeight;\n\tconst resetFontAppearance = () => {\n\t\tsetFontAppearance( {} );\n\t};\n\n\t// Line Height\n\tconst hasLineHeightEnabled = useHasLineHeightControl( settings );\n\tconst lineHeight = decodeValue( inheritedValue?.typography?.lineHeight );\n\tconst setLineHeight = ( newValue ) => {\n\t\tonChange(\n\t\t\tsetImmutably(\n\t\t\t\tvalue,\n\t\t\t\t[ 'typography', 'lineHeight' ],\n\t\t\t\tnewValue || undefined\n\t\t\t)\n\t\t);\n\t};\n\tconst hasLineHeight = () => value?.typography?.lineHeight !== undefined;\n\tconst resetLineHeight = () => setLineHeight( undefined );\n\n\t// Letter Spacing\n\tconst hasLetterSpacingControl = useHasLetterSpacingControl( settings );\n\tconst letterSpacing = decodeValue(\n\t\tinheritedValue?.typography?.letterSpacing\n\t);\n\tconst setLetterSpacing = ( newValue ) => {\n\t\tonChange(\n\t\t\tsetImmutably(\n\t\t\t\tvalue,\n\t\t\t\t[ 'typography', 'letterSpacing' ],\n\t\t\t\tnewValue || undefined\n\t\t\t)\n\t\t);\n\t};\n\tconst hasLetterSpacing = () => !! value?.typography?.letterSpacing;\n\tconst resetLetterSpacing = () => setLetterSpacing( undefined );\n\n\t// Text Columns\n\tconst hasTextColumnsControl = useHasTextColumnsControl( settings );\n\tconst textColumns = decodeValue( inheritedValue?.typography?.textColumns );\n\tconst setTextColumns = ( newValue ) => {\n\t\tonChange(\n\t\t\tsetImmutably(\n\t\t\t\tvalue,\n\t\t\t\t[ 'typography', 'textColumns' ],\n\t\t\t\tnewValue || undefined\n\t\t\t)\n\t\t);\n\t};\n\tconst hasTextColumns = () => !! value?.typography?.textColumns;\n\tconst resetTextColumns = () => setTextColumns( undefined );\n\n\t// Text Transform\n\tconst hasTextTransformControl = useHasTextTransformControl( settings );\n\tconst textTransform = decodeValue(\n\t\tinheritedValue?.typography?.textTransform\n\t);\n\tconst setTextTransform = ( newValue ) => {\n\t\tonChange(\n\t\t\tsetImmutably(\n\t\t\t\tvalue,\n\t\t\t\t[ 'typography', 'textTransform' ],\n\t\t\t\tnewValue || undefined\n\t\t\t)\n\t\t);\n\t};\n\tconst hasTextTransform = () => !! value?.typography?.textTransform;\n\tconst resetTextTransform = () => setTextTransform( undefined );\n\n\t// Text Decoration\n\tconst hasTextDecorationControl = useHasTextDecorationControl( settings );\n\tconst textDecoration = decodeValue(\n\t\tinheritedValue?.typography?.textDecoration\n\t);\n\tconst setTextDecoration = ( newValue ) => {\n\t\tonChange(\n\t\t\tsetImmutably(\n\t\t\t\tvalue,\n\t\t\t\t[ 'typography', 'textDecoration' ],\n\t\t\t\tnewValue || undefined\n\t\t\t)\n\t\t);\n\t};\n\tconst hasTextDecoration = () => !! value?.typography?.textDecoration;\n\tconst resetTextDecoration = () => setTextDecoration( undefined );\n\n\t// Text Orientation\n\tconst hasWritingModeControl = useHasWritingModeControl( settings );\n\tconst writingMode = decodeValue( inheritedValue?.typography?.writingMode );\n\tconst setWritingMode = ( newValue ) => {\n\t\tonChange(\n\t\t\tsetImmutably(\n\t\t\t\tvalue,\n\t\t\t\t[ 'typography', 'writingMode' ],\n\t\t\t\tnewValue || undefined\n\t\t\t)\n\t\t);\n\t};\n\tconst hasWritingMode = () => !! value?.typography?.writingMode;\n\tconst resetWritingMode = () => setWritingMode( undefined );\n\n\tconst resetAllFilter = useCallback( ( previousValue ) => {\n\t\treturn {\n\t\t\t...previousValue,\n\t\t\ttypography: {},\n\t\t};\n\t}, [] );\n\n\treturn (\n\t\t<Wrapper\n\t\t\tresetAllFilter={ resetAllFilter }\n\t\t\tvalue={ value }\n\t\t\tonChange={ onChange }\n\t\t\tpanelId={ panelId }\n\t\t>\n\t\t\t{ hasFontFamilyEnabled && (\n\t\t\t\t<ToolsPanelItem\n\t\t\t\t\tlabel={ __( 'Font family' ) }\n\t\t\t\t\thasValue={ hasFontFamily }\n\t\t\t\t\tonDeselect={ resetFontFamily }\n\t\t\t\t\tisShownByDefault={ defaultControls.fontFamily }\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t>\n\t\t\t\t\t<FontFamilyControl\n\t\t\t\t\t\tfontFamilies={ mergedFontFamilies }\n\t\t\t\t\t\tvalue={ fontFamily }\n\t\t\t\t\t\tonChange={ setFontFamily }\n\t\t\t\t\t\tsize=\"__unstable-large\"\n\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t/>\n\t\t\t\t</ToolsPanelItem>\n\t\t\t) }\n\t\t\t{ hasFontSizeEnabled && (\n\t\t\t\t<ToolsPanelItem\n\t\t\t\t\tlabel={ __( 'Font size' ) }\n\t\t\t\t\thasValue={ hasFontSize }\n\t\t\t\t\tonDeselect={ resetFontSize }\n\t\t\t\t\tisShownByDefault={ defaultControls.fontSize }\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t>\n\t\t\t\t\t<FontSizePicker\n\t\t\t\t\t\tvalue={ fontSize }\n\t\t\t\t\t\tonChange={ setFontSize }\n\t\t\t\t\t\tfontSizes={ mergedFontSizes }\n\t\t\t\t\t\tdisableCustomFontSizes={ disableCustomFontSizes }\n\t\t\t\t\t\twithReset={ false }\n\t\t\t\t\t\twithSlider\n\t\t\t\t\t\tsize=\"__unstable-large\"\n\t\t\t\t\t/>\n\t\t\t\t</ToolsPanelItem>\n\t\t\t) }\n\t\t\t{ hasAppearanceControl && (\n\t\t\t\t<ToolsPanelItem\n\t\t\t\t\tclassName=\"single-column\"\n\t\t\t\t\tlabel={ appearanceControlLabel }\n\t\t\t\t\thasValue={ hasFontAppearance }\n\t\t\t\t\tonDeselect={ resetFontAppearance }\n\t\t\t\t\tisShownByDefault={ defaultControls.fontAppearance }\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t>\n\t\t\t\t\t<FontAppearanceControl\n\t\t\t\t\t\tvalue={ {\n\t\t\t\t\t\t\tfontStyle,\n\t\t\t\t\t\t\tfontWeight,\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tonChange={ setFontAppearance }\n\t\t\t\t\t\thasFontStyles={ hasFontStyles }\n\t\t\t\t\t\thasFontWeights={ hasFontWeights }\n\t\t\t\t\t\tsize=\"__unstable-large\"\n\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t/>\n\t\t\t\t</ToolsPanelItem>\n\t\t\t) }\n\t\t\t{ hasLineHeightEnabled && (\n\t\t\t\t<ToolsPanelItem\n\t\t\t\t\tclassName=\"single-column\"\n\t\t\t\t\tlabel={ __( 'Line height' ) }\n\t\t\t\t\thasValue={ hasLineHeight }\n\t\t\t\t\tonDeselect={ resetLineHeight }\n\t\t\t\t\tisShownByDefault={ defaultControls.lineHeight }\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t>\n\t\t\t\t\t<LineHeightControl\n\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t__unstableInputWidth=\"auto\"\n\t\t\t\t\t\tvalue={ lineHeight }\n\t\t\t\t\t\tonChange={ setLineHeight }\n\t\t\t\t\t\tsize=\"__unstable-large\"\n\t\t\t\t\t/>\n\t\t\t\t</ToolsPanelItem>\n\t\t\t) }\n\t\t\t{ hasLetterSpacingControl && (\n\t\t\t\t<ToolsPanelItem\n\t\t\t\t\tclassName=\"single-column\"\n\t\t\t\t\tlabel={ __( 'Letter spacing' ) }\n\t\t\t\t\thasValue={ hasLetterSpacing }\n\t\t\t\t\tonDeselect={ resetLetterSpacing }\n\t\t\t\t\tisShownByDefault={ defaultControls.letterSpacing }\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t>\n\t\t\t\t\t<LetterSpacingControl\n\t\t\t\t\t\tvalue={ letterSpacing }\n\t\t\t\t\t\tonChange={ setLetterSpacing }\n\t\t\t\t\t\tsize=\"__unstable-large\"\n\t\t\t\t\t\t__unstableInputWidth=\"auto\"\n\t\t\t\t\t/>\n\t\t\t\t</ToolsPanelItem>\n\t\t\t) }\n\t\t\t{ hasTextColumnsControl && (\n\t\t\t\t<ToolsPanelItem\n\t\t\t\t\tclassName=\"single-column\"\n\t\t\t\t\tlabel={ __( 'Text columns' ) }\n\t\t\t\t\thasValue={ hasTextColumns }\n\t\t\t\t\tonDeselect={ resetTextColumns }\n\t\t\t\t\tisShownByDefault={ defaultControls.textColumns }\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t>\n\t\t\t\t\t<NumberControl\n\t\t\t\t\t\tlabel={ __( 'Text columns' ) }\n\t\t\t\t\t\tmax={ MAX_TEXT_COLUMNS }\n\t\t\t\t\t\tmin={ MIN_TEXT_COLUMNS }\n\t\t\t\t\t\tonChange={ setTextColumns }\n\t\t\t\t\t\tsize=\"__unstable-large\"\n\t\t\t\t\t\tspinControls=\"custom\"\n\t\t\t\t\t\tvalue={ textColumns }\n\t\t\t\t\t\tinitialPosition={ 1 }\n\t\t\t\t\t/>\n\t\t\t\t</ToolsPanelItem>\n\t\t\t) }\n\t\t\t{ hasTextDecorationControl && (\n\t\t\t\t<ToolsPanelItem\n\t\t\t\t\tclassName=\"single-column\"\n\t\t\t\t\tlabel={ __( 'Text decoration' ) }\n\t\t\t\t\thasValue={ hasTextDecoration }\n\t\t\t\t\tonDeselect={ resetTextDecoration }\n\t\t\t\t\tisShownByDefault={ defaultControls.textDecoration }\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t>\n\t\t\t\t\t<TextDecorationControl\n\t\t\t\t\t\tvalue={ textDecoration }\n\t\t\t\t\t\tonChange={ setTextDecoration }\n\t\t\t\t\t\tsize=\"__unstable-large\"\n\t\t\t\t\t\t__unstableInputWidth=\"auto\"\n\t\t\t\t\t/>\n\t\t\t\t</ToolsPanelItem>\n\t\t\t) }\n\t\t\t{ hasWritingModeControl && (\n\t\t\t\t<ToolsPanelItem\n\t\t\t\t\tclassName=\"single-column\"\n\t\t\t\t\tlabel={ __( 'Text orientation' ) }\n\t\t\t\t\thasValue={ hasWritingMode }\n\t\t\t\t\tonDeselect={ resetWritingMode }\n\t\t\t\t\tisShownByDefault={ defaultControls.writingMode }\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t>\n\t\t\t\t\t<WritingModeControl\n\t\t\t\t\t\tvalue={ writingMode }\n\t\t\t\t\t\tonChange={ setWritingMode }\n\t\t\t\t\t\tsize=\"__unstable-large\"\n\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t/>\n\t\t\t\t</ToolsPanelItem>\n\t\t\t) }\n\t\t\t{ hasTextTransformControl && (\n\t\t\t\t<ToolsPanelItem\n\t\t\t\t\tlabel={ __( 'Letter case' ) }\n\t\t\t\t\thasValue={ hasTextTransform }\n\t\t\t\t\tonDeselect={ resetTextTransform }\n\t\t\t\t\tisShownByDefault={ defaultControls.textTransform }\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t>\n\t\t\t\t\t<TextTransformControl\n\t\t\t\t\t\tvalue={ textTransform }\n\t\t\t\t\t\tonChange={ setTextTransform }\n\t\t\t\t\t\tshowNone\n\t\t\t\t\t\tisBlock\n\t\t\t\t\t\tsize=\"__unstable-large\"\n\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t/>\n\t\t\t\t</ToolsPanelItem>\n\t\t\t) }\n\t\t</Wrapper>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { hasBlockSupport } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport LineHeightControl from '../components/line-height-control';\nimport { cleanEmptyObject } from './utils';\nimport { useSettings } from '../components/use-settings';\n\nexport const LINE_HEIGHT_SUPPORT_KEY = 'typography.lineHeight';\n\n/**\n * Inspector control panel containing the line height related configuration\n *\n * @param {Object} props\n *\n * @return {Element} Line height edit element.\n */\nexport function LineHeightEdit( props ) {\n\tconst {\n\t\tattributes: { style },\n\t\tsetAttributes,\n\t} = props;\n\n\tconst onChange = ( newLineHeightValue ) => {\n\t\tconst newStyle = {\n\t\t\t...style,\n\t\t\ttypography: {\n\t\t\t\t...style?.typography,\n\t\t\t\tlineHeight: newLineHeightValue,\n\t\t\t},\n\t\t};\n\n\t\tsetAttributes( { style: cleanEmptyObject( newStyle ) } );\n\t};\n\treturn (\n\t\t<LineHeightControl\n\t\t\t__unstableInputWidth=\"100%\"\n\t\t\t__nextHasNoMarginBottom\n\t\t\tvalue={ style?.typography?.lineHeight }\n\t\t\tonChange={ onChange }\n\t\t\tsize=\"__unstable-large\"\n\t\t/>\n\t);\n}\n\n/**\n * Custom hook that checks if line-height settings have been disabled.\n *\n * @param {string} name The name of the block.\n * @return {boolean} Whether setting is disabled.\n */\nexport function useIsLineHeightDisabled( { name: blockName } = {} ) {\n\tconst [ isEnabled ] = useSettings( 'typography.lineHeight' );\n\n\treturn (\n\t\t! isEnabled || ! hasBlockSupport( blockName, LINE_HEIGHT_SUPPORT_KEY )\n\t);\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"tokenList\"];","/**\r\n * WordPress dependencies\r\n */\r\nimport { addFilter } from '@wordpress/hooks';\r\nimport { hasBlockSupport } from '@wordpress/blocks';\r\nimport TokenList from '@wordpress/token-list';\r\nimport { privateApis as componentsPrivateApis } from '@wordpress/components';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { shouldSkipSerialization } from './utils';\r\nimport { TYPOGRAPHY_SUPPORT_KEY } from './typography';\r\nimport { unlock } from '../lock-unlock';\r\n\r\nexport const FONT_FAMILY_SUPPORT_KEY = 'typography.__experimentalFontFamily';\r\n\r\n/**\r\n * Filters registered block settings, extending attributes to include\r\n * the `fontFamily` attribute.\r\n *\r\n * @param {Object} settings Original block settings\r\n * @return {Object}         Filtered block settings\r\n */\r\nfunction addAttributes( settings ) {\r\n\tif ( ! hasBlockSupport( settings, FONT_FAMILY_SUPPORT_KEY ) ) {\r\n\t\treturn settings;\r\n\t}\r\n\r\n\t// Allow blocks to specify a default value if needed.\r\n\tif ( ! settings.attributes.fontFamily ) {\r\n\t\tObject.assign( settings.attributes, {\r\n\t\t\tfontFamily: {\r\n\t\t\t\ttype: 'string',\r\n\t\t\t},\r\n\t\t} );\r\n\t}\r\n\r\n\treturn settings;\r\n}\r\n\r\n/**\r\n * Override props assigned to save component to inject font family.\r\n *\r\n * @param {Object} props      Additional props applied to save element\r\n * @param {Object} blockType  Block type\r\n * @param {Object} attributes Block attributes\r\n * @return {Object}           Filtered props applied to save element\r\n */\r\nfunction addSaveProps( props, blockType, attributes ) {\r\n\tif ( ! hasBlockSupport( blockType, FONT_FAMILY_SUPPORT_KEY ) ) {\r\n\t\treturn props;\r\n\t}\r\n\r\n\tif (\r\n\t\tshouldSkipSerialization(\r\n\t\t\tblockType,\r\n\t\t\tTYPOGRAPHY_SUPPORT_KEY,\r\n\t\t\t'fontFamily'\r\n\t\t)\r\n\t) {\r\n\t\treturn props;\r\n\t}\r\n\r\n\tif ( ! attributes?.fontFamily ) {\r\n\t\treturn props;\r\n\t}\r\n\r\n\t// Use TokenList to dedupe classes.\r\n\tconst classes = new TokenList( props.className );\r\n\tconst { kebabCase } = unlock( componentsPrivateApis );\r\n\tclasses.add( `has-${ kebabCase( attributes?.fontFamily ) }-font-family` );\r\n\tconst newClassName = classes.value;\r\n\tprops.className = newClassName ? newClassName : undefined;\r\n\r\n\treturn props;\r\n}\r\n\r\nfunction useBlockProps( { name, fontFamily } ) {\r\n\treturn addSaveProps( {}, name, { fontFamily } );\r\n}\r\n\r\nexport default {\r\n\tuseBlockProps,\r\n\taddSaveProps,\r\n\tattributeKeys: [ 'fontFamily' ],\r\n\thasSupport( name ) {\r\n\t\treturn hasBlockSupport( name, FONT_FAMILY_SUPPORT_KEY );\r\n\t},\r\n};\r\n\r\n/**\r\n * Resets the font family block support attribute. This can be used when\r\n * disabling the font family support controls for a block via a progressive\r\n * discovery panel.\r\n *\r\n * @param {Object} props               Block props.\r\n * @param {Object} props.setAttributes Function to set block's attributes.\r\n */\r\nexport function resetFontFamily( { setAttributes } ) {\r\n\tsetAttributes( { fontFamily: undefined } );\r\n}\r\n\r\naddFilter(\r\n\t'blocks.registerBlockType',\r\n\t'core/fontFamily/addAttribute',\r\n\taddAttributes\r\n);\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { privateApis as componentsPrivateApis } from '@wordpress/components';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { unlock } from '../../lock-unlock';\r\n\r\n/**\r\n *  Returns the font size object based on an array of named font sizes and the namedFontSize and customFontSize values.\r\n * \tIf namedFontSize is undefined or not found in fontSizes an object with just the size value based on customFontSize is returned.\r\n *\r\n * @param {Array}   fontSizes               Array of font size objects containing at least the \"name\" and \"size\" values as properties.\r\n * @param {?string} fontSizeAttribute       Content of the font size attribute (slug).\r\n * @param {?number} customFontSizeAttribute Contents of the custom font size attribute (value).\r\n *\r\n * @return {?Object} If fontSizeAttribute is set and an equal slug is found in fontSizes it returns the font size object for that slug.\r\n * \t\t\t\t\t Otherwise, an object with just the size value based on customFontSize is returned.\r\n */\r\nexport const getFontSize = (\r\n\tfontSizes,\r\n\tfontSizeAttribute,\r\n\tcustomFontSizeAttribute\r\n) => {\r\n\tif ( fontSizeAttribute ) {\r\n\t\tconst fontSizeObject = fontSizes?.find(\r\n\t\t\t( { slug } ) => slug === fontSizeAttribute\r\n\t\t);\r\n\t\tif ( fontSizeObject ) {\r\n\t\t\treturn fontSizeObject;\r\n\t\t}\r\n\t}\r\n\treturn {\r\n\t\tsize: customFontSizeAttribute,\r\n\t};\r\n};\r\n\r\n/**\r\n * Returns the corresponding font size object for a given value.\r\n *\r\n * @param {Array}  fontSizes Array of font size objects.\r\n * @param {number} value     Font size value.\r\n *\r\n * @return {Object} Font size object.\r\n */\r\nexport function getFontSizeObjectByValue( fontSizes, value ) {\r\n\tconst fontSizeObject = fontSizes?.find( ( { size } ) => size === value );\r\n\tif ( fontSizeObject ) {\r\n\t\treturn fontSizeObject;\r\n\t}\r\n\r\n\treturn {\r\n\t\tsize: value,\r\n\t};\r\n}\r\n\r\n/**\r\n * Returns a class based on fontSizeName.\r\n *\r\n * @param {string} fontSizeSlug Slug of the fontSize.\r\n *\r\n * @return {string | undefined} String with the class corresponding to the fontSize passed.\r\n *                  The class is generated by appending 'has-' followed by fontSizeSlug in kebabCase and ending with '-font-size'.\r\n */\r\nexport function getFontSizeClass( fontSizeSlug ) {\r\n\tif ( ! fontSizeSlug ) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tconst { kebabCase } = unlock( componentsPrivateApis );\r\n\treturn `has-${ kebabCase( fontSizeSlug ) }-font-size`;\r\n}\r\n","/**\n * WordPress dependencies\n */\nimport { addFilter } from '@wordpress/hooks';\nimport { hasBlockSupport } from '@wordpress/blocks';\nimport TokenList from '@wordpress/token-list';\n\n/**\n * Internal dependencies\n */\nimport {\n\tgetFontSize,\n\tgetFontSizeClass,\n\tgetFontSizeObjectByValue,\n\tFontSizePicker,\n} from '../components/font-sizes';\nimport { TYPOGRAPHY_SUPPORT_KEY } from './typography';\nimport {\n\tcleanEmptyObject,\n\ttransformStyles,\n\tshouldSkipSerialization,\n} from './utils';\nimport { useSettings } from '../components/use-settings';\nimport { getTypographyFontSizeValue } from '../components/global-styles/typography-utils';\n\nexport const FONT_SIZE_SUPPORT_KEY = 'typography.fontSize';\n\n/**\n * Filters registered block settings, extending attributes to include\n * `fontSize` and `fontWeight` attributes.\n *\n * @param {Object} settings Original block settings.\n *\n * @return {Object} Filtered block settings.\n */\nfunction addAttributes( settings ) {\n\tif ( ! hasBlockSupport( settings, FONT_SIZE_SUPPORT_KEY ) ) {\n\t\treturn settings;\n\t}\n\n\t// Allow blocks to specify a default value if needed.\n\tif ( ! settings.attributes.fontSize ) {\n\t\tObject.assign( settings.attributes, {\n\t\t\tfontSize: {\n\t\t\t\ttype: 'string',\n\t\t\t},\n\t\t} );\n\t}\n\n\treturn settings;\n}\n\n/**\n * Override props assigned to save component to inject font size.\n *\n * @param {Object} props           Additional props applied to save element.\n * @param {Object} blockNameOrType Block type.\n * @param {Object} attributes      Block attributes.\n *\n * @return {Object} Filtered props applied to save element.\n */\nfunction addSaveProps( props, blockNameOrType, attributes ) {\n\tif ( ! hasBlockSupport( blockNameOrType, FONT_SIZE_SUPPORT_KEY ) ) {\n\t\treturn props;\n\t}\n\n\tif (\n\t\tshouldSkipSerialization(\n\t\t\tblockNameOrType,\n\t\t\tTYPOGRAPHY_SUPPORT_KEY,\n\t\t\t'fontSize'\n\t\t)\n\t) {\n\t\treturn props;\n\t}\n\n\t// Use TokenList to dedupe classes.\n\tconst classes = new TokenList( props.className );\n\tclasses.add( getFontSizeClass( attributes.fontSize ) );\n\tconst newClassName = classes.value;\n\tprops.className = newClassName ? newClassName : undefined;\n\n\treturn props;\n}\n\n/**\n * Inspector control panel containing the font size related configuration\n *\n * @param {Object} props\n *\n * @return {Element} Font size edit element.\n */\nexport function FontSizeEdit( props ) {\n\tconst {\n\t\tattributes: { fontSize, style },\n\t\tsetAttributes,\n\t} = props;\n\tconst [ fontSizes ] = useSettings( 'typography.fontSizes' );\n\n\tconst onChange = ( value ) => {\n\t\tconst fontSizeSlug = getFontSizeObjectByValue( fontSizes, value ).slug;\n\n\t\tsetAttributes( {\n\t\t\tstyle: cleanEmptyObject( {\n\t\t\t\t...style,\n\t\t\t\ttypography: {\n\t\t\t\t\t...style?.typography,\n\t\t\t\t\tfontSize: fontSizeSlug ? undefined : value,\n\t\t\t\t},\n\t\t\t} ),\n\t\t\tfontSize: fontSizeSlug,\n\t\t} );\n\t};\n\n\tconst fontSizeObject = getFontSize(\n\t\tfontSizes,\n\t\tfontSize,\n\t\tstyle?.typography?.fontSize\n\t);\n\n\tconst fontSizeValue =\n\t\tfontSizeObject?.size || style?.typography?.fontSize || fontSize;\n\n\treturn (\n\t\t<FontSizePicker\n\t\t\tonChange={ onChange }\n\t\t\tvalue={ fontSizeValue }\n\t\t\twithReset={ false }\n\t\t\twithSlider\n\t\t\tsize=\"__unstable-large\"\n\t\t/>\n\t);\n}\n\n/**\n * Custom hook that checks if font-size settings have been disabled.\n *\n * @param {string} name The name of the block.\n * @return {boolean} Whether setting is disabled.\n */\nexport function useIsFontSizeDisabled( { name: blockName } = {} ) {\n\tconst [ fontSizes ] = useSettings( 'typography.fontSizes' );\n\tconst hasFontSizes = !! fontSizes?.length;\n\n\treturn (\n\t\t! hasBlockSupport( blockName, FONT_SIZE_SUPPORT_KEY ) || ! hasFontSizes\n\t);\n}\n\nfunction useBlockProps( { name, fontSize, style } ) {\n\tconst [ fontSizes, fluidTypographySettings, layoutSettings ] = useSettings(\n\t\t'typography.fontSizes',\n\t\t'typography.fluid',\n\t\t'layout'\n\t);\n\n\t/*\n\t * Only add inline styles if the block supports font sizes,\n\t * doesn't skip serialization of font sizes,\n\t * and has either a custom font size or a preset font size.\n\t */\n\tif (\n\t\t! hasBlockSupport( name, FONT_SIZE_SUPPORT_KEY ) ||\n\t\tshouldSkipSerialization( name, TYPOGRAPHY_SUPPORT_KEY, 'fontSize' ) ||\n\t\t( ! fontSize && ! style?.typography?.fontSize )\n\t) {\n\t\treturn;\n\t}\n\n\tlet props;\n\n\tif ( style?.typography?.fontSize ) {\n\t\tprops = {\n\t\t\tstyle: {\n\t\t\t\tfontSize: getTypographyFontSizeValue(\n\t\t\t\t\t{ size: style.typography.fontSize },\n\t\t\t\t\t{\n\t\t\t\t\t\ttypography: {\n\t\t\t\t\t\t\tfluid: fluidTypographySettings,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tlayout: layoutSettings,\n\t\t\t\t\t}\n\t\t\t\t),\n\t\t\t},\n\t\t};\n\t}\n\n\tif ( fontSize ) {\n\t\tprops = {\n\t\t\tstyle: {\n\t\t\t\tfontSize: getFontSize(\n\t\t\t\t\tfontSizes,\n\t\t\t\t\tfontSize,\n\t\t\t\t\tstyle?.typography?.fontSize\n\t\t\t\t).size,\n\t\t\t},\n\t\t};\n\t}\n\n\tif ( ! props ) {\n\t\treturn;\n\t}\n\n\treturn addSaveProps( props, name, { fontSize } );\n}\n\nexport default {\n\tuseBlockProps,\n\taddSaveProps,\n\tattributeKeys: [ 'fontSize', 'style' ],\n\thasSupport( name ) {\n\t\treturn hasBlockSupport( name, FONT_SIZE_SUPPORT_KEY );\n\t},\n};\n\nconst MIGRATION_PATHS = {\n\tfontSize: [ [ 'fontSize' ], [ 'style', 'typography', 'fontSize' ] ],\n};\n\nfunction addTransforms( result, source, index, results ) {\n\tconst destinationBlockType = result.name;\n\tconst activeSupports = {\n\t\tfontSize: hasBlockSupport(\n\t\t\tdestinationBlockType,\n\t\t\tFONT_SIZE_SUPPORT_KEY\n\t\t),\n\t};\n\treturn transformStyles(\n\t\tactiveSupports,\n\t\tMIGRATION_PATHS,\n\t\tresult,\n\t\tsource,\n\t\tindex,\n\t\tresults\n\t);\n}\n\naddFilter(\n\t'blocks.registerBlockType',\n\t'core/font/addAttribute',\n\taddAttributes\n);\n\naddFilter(\n\t'blocks.switchToBlockType.transformedBlock',\n\t'core/font-size/addTransforms',\n\taddTransforms\n);\n","/**\n * WordPress dependencies\n */\nimport { getBlockSupport, hasBlockSupport } from '@wordpress/blocks';\nimport { useMemo, useCallback } from '@wordpress/element';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport InspectorControls from '../components/inspector-controls';\nimport {\n\tdefault as StylesTypographyPanel,\n\tuseHasTypographyPanel,\n} from '../components/global-styles/typography-panel';\n\nimport { LINE_HEIGHT_SUPPORT_KEY } from './line-height';\nimport { FONT_FAMILY_SUPPORT_KEY } from './font-family';\nimport { FONT_SIZE_SUPPORT_KEY } from './font-size';\nimport { cleanEmptyObject } from './utils';\nimport { store as blockEditorStore } from '../store';\n\nfunction omit( object, keys ) {\n\treturn Object.fromEntries(\n\t\tObject.entries( object ).filter( ( [ key ] ) => ! keys.includes( key ) )\n\t);\n}\n\nconst LETTER_SPACING_SUPPORT_KEY = 'typography.__experimentalLetterSpacing';\nconst TEXT_TRANSFORM_SUPPORT_KEY = 'typography.__experimentalTextTransform';\nconst TEXT_DECORATION_SUPPORT_KEY = 'typography.__experimentalTextDecoration';\nconst TEXT_COLUMNS_SUPPORT_KEY = 'typography.textColumns';\nconst FONT_STYLE_SUPPORT_KEY = 'typography.__experimentalFontStyle';\nconst FONT_WEIGHT_SUPPORT_KEY = 'typography.__experimentalFontWeight';\nconst WRITING_MODE_SUPPORT_KEY = 'typography.__experimentalWritingMode';\nexport const TYPOGRAPHY_SUPPORT_KEY = 'typography';\nexport const TYPOGRAPHY_SUPPORT_KEYS = [\n\tLINE_HEIGHT_SUPPORT_KEY,\n\tFONT_SIZE_SUPPORT_KEY,\n\tFONT_STYLE_SUPPORT_KEY,\n\tFONT_WEIGHT_SUPPORT_KEY,\n\tFONT_FAMILY_SUPPORT_KEY,\n\tTEXT_COLUMNS_SUPPORT_KEY,\n\tTEXT_DECORATION_SUPPORT_KEY,\n\tWRITING_MODE_SUPPORT_KEY,\n\tTEXT_TRANSFORM_SUPPORT_KEY,\n\tLETTER_SPACING_SUPPORT_KEY,\n];\n\nfunction styleToAttributes( style ) {\n\tconst updatedStyle = { ...omit( style, [ 'fontFamily' ] ) };\n\tconst fontSizeValue = style?.typography?.fontSize;\n\tconst fontFamilyValue = style?.typography?.fontFamily;\n\tconst fontSizeSlug = fontSizeValue?.startsWith( 'var:preset|font-size|' )\n\t\t? fontSizeValue.substring( 'var:preset|font-size|'.length )\n\t\t: undefined;\n\tconst fontFamilySlug = fontFamilyValue?.startsWith(\n\t\t'var:preset|font-family|'\n\t)\n\t\t? fontFamilyValue.substring( 'var:preset|font-family|'.length )\n\t\t: undefined;\n\tupdatedStyle.typography = {\n\t\t...omit( updatedStyle.typography, [ 'fontFamily' ] ),\n\t\tfontSize: fontSizeSlug ? undefined : fontSizeValue,\n\t};\n\treturn {\n\t\tstyle: cleanEmptyObject( updatedStyle ),\n\t\tfontFamily: fontFamilySlug,\n\t\tfontSize: fontSizeSlug,\n\t};\n}\n\nfunction attributesToStyle( attributes ) {\n\treturn {\n\t\t...attributes.style,\n\t\ttypography: {\n\t\t\t...attributes.style?.typography,\n\t\t\tfontFamily: attributes.fontFamily\n\t\t\t\t? 'var:preset|font-family|' + attributes.fontFamily\n\t\t\t\t: undefined,\n\t\t\tfontSize: attributes.fontSize\n\t\t\t\t? 'var:preset|font-size|' + attributes.fontSize\n\t\t\t\t: attributes.style?.typography?.fontSize,\n\t\t},\n\t};\n}\n\nfunction TypographyInspectorControl( { children, resetAllFilter } ) {\n\tconst attributesResetAllFilter = useCallback(\n\t\t( attributes ) => {\n\t\t\tconst existingStyle = attributesToStyle( attributes );\n\t\t\tconst updatedStyle = resetAllFilter( existingStyle );\n\t\t\treturn {\n\t\t\t\t...attributes,\n\t\t\t\t...styleToAttributes( updatedStyle ),\n\t\t\t};\n\t\t},\n\t\t[ resetAllFilter ]\n\t);\n\n\treturn (\n\t\t<InspectorControls\n\t\t\tgroup=\"typography\"\n\t\t\tresetAllFilter={ attributesResetAllFilter }\n\t\t>\n\t\t\t{ children }\n\t\t</InspectorControls>\n\t);\n}\n\nexport function TypographyPanel( { clientId, name, setAttributes, settings } ) {\n\tfunction selector( select ) {\n\t\tconst { style, fontFamily, fontSize } =\n\t\t\tselect( blockEditorStore ).getBlockAttributes( clientId ) || {};\n\t\treturn { style, fontFamily, fontSize };\n\t}\n\tconst { style, fontFamily, fontSize } = useSelect( selector, [ clientId ] );\n\tconst isEnabled = useHasTypographyPanel( settings );\n\tconst value = useMemo(\n\t\t() => attributesToStyle( { style, fontFamily, fontSize } ),\n\t\t[ style, fontSize, fontFamily ]\n\t);\n\n\tconst onChange = ( newStyle ) => {\n\t\tsetAttributes( styleToAttributes( newStyle ) );\n\t};\n\n\tif ( ! isEnabled ) {\n\t\treturn null;\n\t}\n\n\tconst defaultControls = getBlockSupport( name, [\n\t\tTYPOGRAPHY_SUPPORT_KEY,\n\t\t'__experimentalDefaultControls',\n\t] );\n\n\treturn (\n\t\t<StylesTypographyPanel\n\t\t\tas={ TypographyInspectorControl }\n\t\t\tpanelId={ clientId }\n\t\t\tsettings={ settings }\n\t\t\tvalue={ value }\n\t\t\tonChange={ onChange }\n\t\t\tdefaultControls={ defaultControls }\n\t\t/>\n\t);\n}\n\nexport const hasTypographySupport = ( blockName ) => {\n\treturn TYPOGRAPHY_SUPPORT_KEYS.some( ( key ) =>\n\t\thasBlockSupport( blockName, key )\n\t);\n};\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst settings = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"m19 7.5h-7.628c-.3089-.87389-1.1423-1.5-2.122-1.5-.97966 0-1.81309.62611-2.12197 1.5h-2.12803v1.5h2.12803c.30888.87389 1.14231 1.5 2.12197 1.5.9797 0 1.8131-.62611 2.122-1.5h7.628z\" />\r\n\t\t<Path d=\"m19 15h-2.128c-.3089-.8739-1.1423-1.5-2.122-1.5s-1.8131.6261-2.122 1.5h-7.628v1.5h7.628c.3089.8739 1.1423 1.5 2.122 1.5s1.8131-.6261 2.122-1.5h2.128z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default settings;\r\n","/**\n * WordPress dependencies\n */\nimport {\n\tButton,\n\tCustomSelectControl,\n\tIcon,\n\tRangeControl,\n\t__experimentalHStack as HStack,\n\t__experimentalUnitControl as UnitControl,\n\t__experimentalUseCustomUnits as useCustomUnits,\n\t__experimentalParseQuantityAndUnitFromRawValue as parseQuantityAndUnitFromRawValue,\n} from '@wordpress/components';\nimport { useSelect } from '@wordpress/data';\nimport { useState, useMemo } from '@wordpress/element';\nimport { usePrevious } from '@wordpress/compose';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { settings } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport { useSettings } from '../../use-settings';\nimport { store as blockEditorStore } from '../../../store';\nimport {\n\tALL_SIDES,\n\tLABELS,\n\tgetSliderValueFromPreset,\n\tgetCustomValueFromPreset,\n\tgetPresetValueFromCustomValue,\n\tisValueSpacingPreset,\n} from '../utils';\n\nconst CUSTOM_VALUE_SETTINGS = {\n\tpx: { max: 300, steps: 1 },\n\t'%': { max: 100, steps: 1 },\n\tvw: { max: 100, steps: 1 },\n\tvh: { max: 100, steps: 1 },\n\tem: { max: 10, steps: 0.1 },\n\trm: { max: 10, steps: 0.1 },\n\tsvw: { max: 100, steps: 1 },\n\tlvw: { max: 100, steps: 1 },\n\tdvw: { max: 100, steps: 1 },\n\tsvh: { max: 100, steps: 1 },\n\tlvh: { max: 100, steps: 1 },\n\tdvh: { max: 100, steps: 1 },\n\tvi: { max: 100, steps: 1 },\n\tsvi: { max: 100, steps: 1 },\n\tlvi: { max: 100, steps: 1 },\n\tdvi: { max: 100, steps: 1 },\n\tvb: { max: 100, steps: 1 },\n\tsvb: { max: 100, steps: 1 },\n\tlvb: { max: 100, steps: 1 },\n\tdvb: { max: 100, steps: 1 },\n\tvmin: { max: 100, steps: 1 },\n\tsvmin: { max: 100, steps: 1 },\n\tlvmin: { max: 100, steps: 1 },\n\tdvmin: { max: 100, steps: 1 },\n\tvmax: { max: 100, steps: 1 },\n\tsvmax: { max: 100, steps: 1 },\n\tlvmax: { max: 100, steps: 1 },\n\tdvmax: { max: 100, steps: 1 },\n};\n\nexport default function SpacingInputControl( {\n\ticon,\n\tisMixed = false,\n\tminimumCustomValue,\n\tonChange,\n\tonMouseOut,\n\tonMouseOver,\n\tshowSideInLabel = true,\n\tside,\n\tspacingSizes,\n\ttype,\n\tvalue,\n} ) {\n\t// Treat value as a preset value if the passed in value matches the value of one of the spacingSizes.\n\tvalue = getPresetValueFromCustomValue( value, spacingSizes );\n\n\tlet selectListSizes = spacingSizes;\n\tconst showRangeControl = spacingSizes.length <= 8;\n\n\tconst disableCustomSpacingSizes = useSelect( ( select ) => {\n\t\tconst editorSettings = select( blockEditorStore ).getSettings();\n\t\treturn editorSettings?.disableCustomSpacingSizes;\n\t} );\n\n\tconst [ showCustomValueControl, setShowCustomValueControl ] = useState(\n\t\t! disableCustomSpacingSizes &&\n\t\t\tvalue !== undefined &&\n\t\t\t! isValueSpacingPreset( value )\n\t);\n\n\tconst previousValue = usePrevious( value );\n\tif (\n\t\t!! value &&\n\t\tpreviousValue !== value &&\n\t\t! isValueSpacingPreset( value ) &&\n\t\tshowCustomValueControl !== true\n\t) {\n\t\tsetShowCustomValueControl( true );\n\t}\n\n\tconst [ availableUnits ] = useSettings( 'spacing.units' );\n\tconst units = useCustomUnits( {\n\t\tavailableUnits: availableUnits || [ 'px', 'em', 'rem' ],\n\t} );\n\n\tlet currentValue = null;\n\n\tconst showCustomValueInSelectList =\n\t\t! showRangeControl &&\n\t\t! showCustomValueControl &&\n\t\tvalue !== undefined &&\n\t\t( ! isValueSpacingPreset( value ) ||\n\t\t\t( isValueSpacingPreset( value ) && isMixed ) );\n\n\tif ( showCustomValueInSelectList ) {\n\t\tselectListSizes = [\n\t\t\t...spacingSizes,\n\t\t\t{\n\t\t\t\tname: ! isMixed\n\t\t\t\t\t? // translators: A custom measurement, eg. a number followed by a unit like 12px.\n\t\t\t\t\t  sprintf( __( 'Custom (%s)' ), value )\n\t\t\t\t\t: __( 'Mixed' ),\n\t\t\t\tslug: 'custom',\n\t\t\t\tsize: value,\n\t\t\t},\n\t\t];\n\t\tcurrentValue = selectListSizes.length - 1;\n\t} else if ( ! isMixed ) {\n\t\tcurrentValue = ! showCustomValueControl\n\t\t\t? getSliderValueFromPreset( value, spacingSizes )\n\t\t\t: getCustomValueFromPreset( value, spacingSizes );\n\t}\n\n\tconst selectedUnit =\n\t\tuseMemo(\n\t\t\t() => parseQuantityAndUnitFromRawValue( currentValue ),\n\t\t\t[ currentValue ]\n\t\t)[ 1 ] || units[ 0 ]?.value;\n\n\tconst setInitialValue = () => {\n\t\tif ( value === undefined ) {\n\t\t\tonChange( '0' );\n\t\t}\n\t};\n\n\tconst customTooltipContent = ( newValue ) =>\n\t\tvalue === undefined ? undefined : spacingSizes[ newValue ]?.name;\n\n\tconst customRangeValue = parseFloat( currentValue, 10 );\n\n\tconst getNewCustomValue = ( newSize ) => {\n\t\tconst isNumeric = ! isNaN( parseFloat( newSize ) );\n\t\tconst nextValue = isNumeric ? newSize : undefined;\n\t\treturn nextValue;\n\t};\n\n\tconst getNewPresetValue = ( newSize, controlType ) => {\n\t\tconst size = parseInt( newSize, 10 );\n\n\t\tif ( controlType === 'selectList' ) {\n\t\t\tif ( size === 0 ) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t\tif ( size === 1 ) {\n\t\t\t\treturn '0';\n\t\t\t}\n\t\t} else if ( size === 0 ) {\n\t\t\treturn '0';\n\t\t}\n\t\treturn `var:preset|spacing|${ spacingSizes[ newSize ]?.slug }`;\n\t};\n\n\tconst handleCustomValueSliderChange = ( next ) => {\n\t\tonChange( [ next, selectedUnit ].join( '' ) );\n\t};\n\n\tconst allPlaceholder = isMixed ? __( 'Mixed' ) : null;\n\n\tconst options = selectListSizes.map( ( size, index ) => ( {\n\t\tkey: index,\n\t\tname: size.name,\n\t} ) );\n\n\tconst marks = spacingSizes.map( ( _newValue, index ) => ( {\n\t\tvalue: index,\n\t\tlabel: undefined,\n\t} ) );\n\n\tconst sideLabel =\n\t\tALL_SIDES.includes( side ) && showSideInLabel ? LABELS[ side ] : '';\n\tconst typeLabel = showSideInLabel ? type?.toLowerCase() : type;\n\n\tconst ariaLabel = sprintf(\n\t\t// translators: 1: The side of the block being modified (top, bottom, left, All sides etc.). 2. Type of spacing being modified (Padding, margin, etc)\n\t\t__( '%1$s %2$s' ),\n\t\tsideLabel,\n\t\ttypeLabel\n\t).trim();\n\n\treturn (\n\t\t<HStack className=\"spacing-sizes-control__wrapper\">\n\t\t\t{ icon && (\n\t\t\t\t<Icon\n\t\t\t\t\tclassName=\"spacing-sizes-control__icon\"\n\t\t\t\t\ticon={ icon }\n\t\t\t\t\tsize={ 24 }\n\t\t\t\t/>\n\t\t\t) }\n\t\t\t{ showCustomValueControl && (\n\t\t\t\t<>\n\t\t\t\t\t<UnitControl\n\t\t\t\t\t\tonMouseOver={ onMouseOver }\n\t\t\t\t\t\tonMouseOut={ onMouseOut }\n\t\t\t\t\t\tonFocus={ onMouseOver }\n\t\t\t\t\t\tonBlur={ onMouseOut }\n\t\t\t\t\t\tonChange={ ( newSize ) =>\n\t\t\t\t\t\t\tonChange( getNewCustomValue( newSize ) )\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvalue={ currentValue }\n\t\t\t\t\t\tunits={ units }\n\t\t\t\t\t\tmin={ minimumCustomValue }\n\t\t\t\t\t\tplaceholder={ allPlaceholder }\n\t\t\t\t\t\tdisableUnits={ isMixed }\n\t\t\t\t\t\tlabel={ ariaLabel }\n\t\t\t\t\t\thideLabelFromVision\n\t\t\t\t\t\tclassName=\"spacing-sizes-control__custom-value-input\"\n\t\t\t\t\t\tsize={ '__unstable-large' }\n\t\t\t\t\t/>\n\t\t\t\t\t<RangeControl\n\t\t\t\t\t\tonMouseOver={ onMouseOver }\n\t\t\t\t\t\tonMouseOut={ onMouseOut }\n\t\t\t\t\t\tonFocus={ onMouseOver }\n\t\t\t\t\t\tonBlur={ onMouseOut }\n\t\t\t\t\t\tvalue={ customRangeValue }\n\t\t\t\t\t\tmin={ 0 }\n\t\t\t\t\t\tmax={ CUSTOM_VALUE_SETTINGS[ selectedUnit ]?.max ?? 10 }\n\t\t\t\t\t\tstep={\n\t\t\t\t\t\t\tCUSTOM_VALUE_SETTINGS[ selectedUnit ]?.steps ?? 0.1\n\t\t\t\t\t\t}\n\t\t\t\t\t\twithInputField={ false }\n\t\t\t\t\t\tonChange={ handleCustomValueSliderChange }\n\t\t\t\t\t\tclassName=\"spacing-sizes-control__custom-value-range\"\n\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t/>\n\t\t\t\t</>\n\t\t\t) }\n\t\t\t{ showRangeControl && ! showCustomValueControl && (\n\t\t\t\t<RangeControl\n\t\t\t\t\tonMouseOver={ onMouseOver }\n\t\t\t\t\tonMouseOut={ onMouseOut }\n\t\t\t\t\tclassName=\"spacing-sizes-control__range-control\"\n\t\t\t\t\tvalue={ currentValue }\n\t\t\t\t\tonChange={ ( newSize ) =>\n\t\t\t\t\t\tonChange( getNewPresetValue( newSize ) )\n\t\t\t\t\t}\n\t\t\t\t\tonMouseDown={ ( event ) => {\n\t\t\t\t\t\t// If mouse down is near start of range set initial value to 0, which\n\t\t\t\t\t\t// prevents the user have to drag right then left to get 0 setting.\n\t\t\t\t\t\tif ( event?.nativeEvent?.offsetX < 35 ) {\n\t\t\t\t\t\t\tsetInitialValue();\n\t\t\t\t\t\t}\n\t\t\t\t\t} }\n\t\t\t\t\twithInputField={ false }\n\t\t\t\t\taria-valuenow={ currentValue }\n\t\t\t\t\taria-valuetext={ spacingSizes[ currentValue ]?.name }\n\t\t\t\t\trenderTooltipContent={ customTooltipContent }\n\t\t\t\t\tmin={ 0 }\n\t\t\t\t\tmax={ spacingSizes.length - 1 }\n\t\t\t\t\tmarks={ marks }\n\t\t\t\t\tlabel={ ariaLabel }\n\t\t\t\t\thideLabelFromVision\n\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\tonFocus={ onMouseOver }\n\t\t\t\t\tonBlur={ onMouseOut }\n\t\t\t\t/>\n\t\t\t) }\n\t\t\t{ ! showRangeControl && ! showCustomValueControl && (\n\t\t\t\t<CustomSelectControl\n\t\t\t\t\tclassName=\"spacing-sizes-control__custom-select-control\"\n\t\t\t\t\tvalue={\n\t\t\t\t\t\toptions.find(\n\t\t\t\t\t\t\t( option ) => option.key === currentValue\n\t\t\t\t\t\t) || '' // passing undefined here causes a downshift controlled/uncontrolled warning\n\t\t\t\t\t}\n\t\t\t\t\tonChange={ ( selection ) => {\n\t\t\t\t\t\tonChange(\n\t\t\t\t\t\t\tgetNewPresetValue(\n\t\t\t\t\t\t\t\tselection.selectedItem.key,\n\t\t\t\t\t\t\t\t'selectList'\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\t\t\t\t\t} }\n\t\t\t\t\toptions={ options }\n\t\t\t\t\tlabel={ ariaLabel }\n\t\t\t\t\thideLabelFromVision\n\t\t\t\t\tsize={ '__unstable-large' }\n\t\t\t\t\tonMouseOver={ onMouseOver }\n\t\t\t\t\tonMouseOut={ onMouseOut }\n\t\t\t\t\tonFocus={ onMouseOver }\n\t\t\t\t\tonBlur={ onMouseOut }\n\t\t\t\t/>\n\t\t\t) }\n\t\t\t{ ! disableCustomSpacingSizes && (\n\t\t\t\t<Button\n\t\t\t\t\tlabel={\n\t\t\t\t\t\tshowCustomValueControl\n\t\t\t\t\t\t\t? __( 'Use size preset' )\n\t\t\t\t\t\t\t: __( 'Set custom size' )\n\t\t\t\t\t}\n\t\t\t\t\ticon={ settings }\n\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\tsetShowCustomValueControl( ! showCustomValueControl );\n\t\t\t\t\t} }\n\t\t\t\t\tisPressed={ showCustomValueControl }\n\t\t\t\t\tsize=\"small\"\n\t\t\t\t\tclassName=\"spacing-sizes-control__custom-toggle\"\n\t\t\t\t\ticonSize={ 24 }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</HStack>\n\t);\n}\n","/**\r\n * Internal dependencies\r\n */\r\nimport SpacingInputControl from './spacing-input-control';\r\nimport {\r\n\tLABELS,\r\n\tICONS,\r\n\tgetPresetValueFromCustomValue,\r\n\thasAxisSupport,\r\n} from '../utils';\r\n\r\nconst groupedSides = [ 'vertical', 'horizontal' ];\r\n\r\nexport default function AxialInputControls( {\r\n\tminimumCustomValue,\r\n\tonChange,\r\n\tonMouseOut,\r\n\tonMouseOver,\r\n\tsides,\r\n\tspacingSizes,\r\n\ttype,\r\n\tvalues,\r\n} ) {\r\n\tconst createHandleOnChange = ( side ) => ( next ) => {\r\n\t\tif ( ! onChange ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Encode the existing value into the preset value if the passed in value matches the value of one of the spacingSizes.\r\n\t\tconst nextValues = {\r\n\t\t\t...Object.keys( values ).reduce( ( acc, key ) => {\r\n\t\t\t\tacc[ key ] = getPresetValueFromCustomValue(\r\n\t\t\t\t\tvalues[ key ],\r\n\t\t\t\t\tspacingSizes\r\n\t\t\t\t);\r\n\t\t\t\treturn acc;\r\n\t\t\t}, {} ),\r\n\t\t};\r\n\r\n\t\tif ( side === 'vertical' ) {\r\n\t\t\tnextValues.top = next;\r\n\t\t\tnextValues.bottom = next;\r\n\t\t}\r\n\r\n\t\tif ( side === 'horizontal' ) {\r\n\t\t\tnextValues.left = next;\r\n\t\t\tnextValues.right = next;\r\n\t\t}\r\n\r\n\t\tonChange( nextValues );\r\n\t};\r\n\r\n\t// Filter sides if custom configuration provided, maintaining default order.\r\n\tconst filteredSides = sides?.length\r\n\t\t? groupedSides.filter( ( side ) => hasAxisSupport( sides, side ) )\r\n\t\t: groupedSides;\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{ filteredSides.map( ( side ) => {\r\n\t\t\t\tconst axisValue =\r\n\t\t\t\t\tside === 'vertical' ? values.top : values.left;\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<SpacingInputControl\r\n\t\t\t\t\t\tkey={ `spacing-sizes-control-${ side }` }\r\n\t\t\t\t\t\ticon={ ICONS[ side ] }\r\n\t\t\t\t\t\tlabel={ LABELS[ side ] }\r\n\t\t\t\t\t\tminimumCustomValue={ minimumCustomValue }\r\n\t\t\t\t\t\tonChange={ createHandleOnChange( side ) }\r\n\t\t\t\t\t\tonMouseOut={ onMouseOut }\r\n\t\t\t\t\t\tonMouseOver={ onMouseOver }\r\n\t\t\t\t\t\tside={ side }\r\n\t\t\t\t\t\tspacingSizes={ spacingSizes }\r\n\t\t\t\t\t\ttype={ type }\r\n\t\t\t\t\t\tvalue={ axisValue }\r\n\t\t\t\t\t\twithInputField={ false }\r\n\t\t\t\t\t/>\r\n\t\t\t\t);\r\n\t\t\t} ) }\r\n\t\t</>\r\n\t);\r\n}\r\n","/**\r\n * Internal dependencies\r\n */\r\nimport SpacingInputControl from './spacing-input-control';\r\nimport {\r\n\tALL_SIDES,\r\n\tLABELS,\r\n\tICONS,\r\n\tgetPresetValueFromCustomValue,\r\n} from '../utils';\r\n\r\nexport default function SeparatedInputControls( {\r\n\tminimumCustomValue,\r\n\tonChange,\r\n\tonMouseOut,\r\n\tonMouseOver,\r\n\tsides,\r\n\tspacingSizes,\r\n\ttype,\r\n\tvalues,\r\n} ) {\r\n\t// Filter sides if custom configuration provided, maintaining default order.\r\n\tconst filteredSides = sides?.length\r\n\t\t? ALL_SIDES.filter( ( side ) => sides.includes( side ) )\r\n\t\t: ALL_SIDES;\r\n\r\n\tconst createHandleOnChange = ( side ) => ( next ) => {\r\n\t\t// Encode the existing value into the preset value if the passed in value matches the value of one of the spacingSizes.\r\n\t\tconst nextValues = {\r\n\t\t\t...Object.keys( values ).reduce( ( acc, key ) => {\r\n\t\t\t\tacc[ key ] = getPresetValueFromCustomValue(\r\n\t\t\t\t\tvalues[ key ],\r\n\t\t\t\t\tspacingSizes\r\n\t\t\t\t);\r\n\t\t\t\treturn acc;\r\n\t\t\t}, {} ),\r\n\t\t};\r\n\r\n\t\tnextValues[ side ] = next;\r\n\r\n\t\tonChange( nextValues );\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{ filteredSides.map( ( side ) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<SpacingInputControl\r\n\t\t\t\t\t\tkey={ `spacing-sizes-control-${ side }` }\r\n\t\t\t\t\t\ticon={ ICONS[ side ] }\r\n\t\t\t\t\t\tlabel={ LABELS[ side ] }\r\n\t\t\t\t\t\tminimumCustomValue={ minimumCustomValue }\r\n\t\t\t\t\t\tonChange={ createHandleOnChange( side ) }\r\n\t\t\t\t\t\tonMouseOut={ onMouseOut }\r\n\t\t\t\t\t\tonMouseOver={ onMouseOver }\r\n\t\t\t\t\t\tside={ side }\r\n\t\t\t\t\t\tspacingSizes={ spacingSizes }\r\n\t\t\t\t\t\ttype={ type }\r\n\t\t\t\t\t\tvalue={ values[ side ] }\r\n\t\t\t\t\t\twithInputField={ false }\r\n\t\t\t\t\t/>\r\n\t\t\t\t);\r\n\t\t\t} ) }\r\n\t\t</>\r\n\t);\r\n}\r\n","/**\r\n * Internal dependencies\r\n */\r\nimport SpacingInputControl from './spacing-input-control';\r\nimport { LABELS, getPresetValueFromCustomValue } from '../utils';\r\n\r\nexport default function SingleInputControl( {\r\n\tminimumCustomValue,\r\n\tonChange,\r\n\tonMouseOut,\r\n\tonMouseOver,\r\n\tshowSideInLabel,\r\n\tside,\r\n\tspacingSizes,\r\n\ttype,\r\n\tvalues,\r\n} ) {\r\n\tconst createHandleOnChange = ( currentSide ) => ( next ) => {\r\n\t\t// Encode the existing value into the preset value if the passed in value matches the value of one of the spacingSizes.\r\n\t\tconst nextValues = {\r\n\t\t\t...Object.keys( values ).reduce( ( acc, key ) => {\r\n\t\t\t\tacc[ key ] = getPresetValueFromCustomValue(\r\n\t\t\t\t\tvalues[ key ],\r\n\t\t\t\t\tspacingSizes\r\n\t\t\t\t);\r\n\t\t\t\treturn acc;\r\n\t\t\t}, {} ),\r\n\t\t};\r\n\r\n\t\tnextValues[ currentSide ] = next;\r\n\r\n\t\tonChange( nextValues );\r\n\t};\r\n\r\n\treturn (\r\n\t\t<SpacingInputControl\r\n\t\t\tlabel={ LABELS[ side ] }\r\n\t\t\tminimumCustomValue={ minimumCustomValue }\r\n\t\t\tonChange={ createHandleOnChange( side ) }\r\n\t\t\tonMouseOut={ onMouseOut }\r\n\t\t\tonMouseOver={ onMouseOver }\r\n\t\t\tshowSideInLabel={ showSideInLabel }\r\n\t\t\tside={ side }\r\n\t\t\tspacingSizes={ spacingSizes }\r\n\t\t\ttype={ type }\r\n\t\t\tvalue={ values[ side ] }\r\n\t\t\twithInputField={ false }\r\n\t\t/>\r\n\t);\r\n}\r\n","/**\n * WordPress dependencies\n */\nimport { DropdownMenu, Icon, MenuGroup, MenuItem } from '@wordpress/components';\nimport { check } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport { getSupportedMenuItems, VIEWS } from '../utils';\n\nconst checkIcon = <Icon icon={ check } size={ 24 } />;\n\nexport default function SidesDropdown( {\n\tlabel: labelProp,\n\tonChange,\n\tsides,\n\tvalue,\n} ) {\n\tif ( ! sides || ! sides.length ) {\n\t\treturn;\n\t}\n\n\tconst supportedItems = getSupportedMenuItems( sides );\n\tconst sideIcon = supportedItems[ value ].icon;\n\tconst { custom: customItem, ...menuItems } = supportedItems;\n\n\treturn (\n\t\t<DropdownMenu\n\t\t\ticon={ sideIcon }\n\t\t\tlabel={ labelProp }\n\t\t\tclassName=\"spacing-sizes-control__dropdown\"\n\t\t\ttoggleProps={ { size: 'small' } }\n\t\t>\n\t\t\t{ ( { onClose } ) => {\n\t\t\t\treturn (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<MenuGroup>\n\t\t\t\t\t\t\t{ Object.entries( menuItems ).map(\n\t\t\t\t\t\t\t\t( [ slug, { label, icon } ] ) => {\n\t\t\t\t\t\t\t\t\tconst isSelected = value === slug;\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\t\tkey={ slug }\n\t\t\t\t\t\t\t\t\t\t\ticon={ icon }\n\t\t\t\t\t\t\t\t\t\t\ticonPosition=\"left\"\n\t\t\t\t\t\t\t\t\t\t\tisSelected={ isSelected }\n\t\t\t\t\t\t\t\t\t\t\trole=\"menuitemradio\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\t\t\t\t\tonChange( slug );\n\t\t\t\t\t\t\t\t\t\t\t\tonClose();\n\t\t\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\t\t\tsuffix={\n\t\t\t\t\t\t\t\t\t\t\t\tisSelected\n\t\t\t\t\t\t\t\t\t\t\t\t\t? checkIcon\n\t\t\t\t\t\t\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{ label }\n\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</MenuGroup>\n\t\t\t\t\t\t{ !! customItem && (\n\t\t\t\t\t\t\t<MenuGroup>\n\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\ticon={ customItem.icon }\n\t\t\t\t\t\t\t\t\ticonPosition=\"left\"\n\t\t\t\t\t\t\t\t\tisSelected={ value === VIEWS.custom }\n\t\t\t\t\t\t\t\t\trole=\"menuitemradio\"\n\t\t\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\t\t\tonChange( VIEWS.custom );\n\t\t\t\t\t\t\t\t\t\tonClose();\n\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\tsuffix={\n\t\t\t\t\t\t\t\t\t\tvalue === VIEWS.custom\n\t\t\t\t\t\t\t\t\t\t\t? checkIcon\n\t\t\t\t\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ customItem.label }\n\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t</MenuGroup>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</>\n\t\t\t\t);\n\t\t\t} }\n\t\t</DropdownMenu>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport {\n\tBaseControl,\n\t__experimentalHStack as HStack,\n\t__experimentalVStack as VStack,\n} from '@wordpress/components';\nimport { useState } from '@wordpress/element';\nimport { __, _x, sprintf } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport AxialInputControls from './input-controls/axial';\nimport SeparatedInputControls from './input-controls/separated';\nimport SingleInputControl from './input-controls/single';\nimport SidesDropdown from './sides-dropdown';\nimport useSpacingSizes from './hooks/use-spacing-sizes';\nimport {\n\tALL_SIDES,\n\tDEFAULT_VALUES,\n\tLABELS,\n\tVIEWS,\n\tgetInitialView,\n} from './utils';\n\nexport default function SpacingSizesControl( {\n\tinputProps,\n\tlabel: labelProp,\n\tminimumCustomValue = 0,\n\tonChange,\n\tonMouseOut,\n\tonMouseOver,\n\tshowSideInLabel = true,\n\tsides = ALL_SIDES,\n\tuseSelect,\n\tvalues,\n} ) {\n\tconst spacingSizes = useSpacingSizes();\n\tconst inputValues = values || DEFAULT_VALUES;\n\tconst hasOneSide = sides?.length === 1;\n\tconst hasOnlyAxialSides =\n\t\tsides?.includes( 'horizontal' ) &&\n\t\tsides?.includes( 'vertical' ) &&\n\t\tsides?.length === 2;\n\n\tconst [ view, setView ] = useState( getInitialView( inputValues, sides ) );\n\n\tconst handleOnChange = ( nextValue ) => {\n\t\tconst newValues = { ...values, ...nextValue };\n\t\tonChange( newValues );\n\t};\n\n\tconst inputControlProps = {\n\t\t...inputProps,\n\t\tminimumCustomValue,\n\t\tonChange: handleOnChange,\n\t\tonMouseOut,\n\t\tonMouseOver,\n\t\tsides,\n\t\tspacingSizes,\n\t\ttype: labelProp,\n\t\tuseSelect,\n\t\tvalues: inputValues,\n\t};\n\n\tconst renderControls = () => {\n\t\tif ( view === VIEWS.axial ) {\n\t\t\treturn <AxialInputControls { ...inputControlProps } />;\n\t\t}\n\t\tif ( view === VIEWS.custom ) {\n\t\t\treturn <SeparatedInputControls { ...inputControlProps } />;\n\t\t}\n\t\treturn (\n\t\t\t<SingleInputControl\n\t\t\t\tside={ view }\n\t\t\t\t{ ...inputControlProps }\n\t\t\t\tshowSideInLabel={ showSideInLabel }\n\t\t\t/>\n\t\t);\n\t};\n\n\tconst sideLabel =\n\t\tALL_SIDES.includes( view ) && showSideInLabel ? LABELS[ view ] : '';\n\n\tconst label = sprintf(\n\t\t// translators: 2. Type of spacing being modified (Padding, margin, etc). 1: The side of the block being modified (top, bottom, left etc.).\n\t\t__( '%1$s %2$s' ),\n\t\tlabelProp,\n\t\tsideLabel\n\t).trim();\n\n\tconst dropdownLabelText = sprintf(\n\t\t// translators: %s: The current spacing property e.g. \"Padding\", \"Margin\".\n\t\t_x( '%s options', 'Button label to reveal side configuration options' ),\n\t\tlabelProp\n\t);\n\n\treturn (\n\t\t<fieldset className=\"spacing-sizes-control\">\n\t\t\t<HStack className=\"spacing-sizes-control__header\">\n\t\t\t\t<BaseControl.VisualLabel\n\t\t\t\t\tas=\"legend\"\n\t\t\t\t\tclassName=\"spacing-sizes-control__label\"\n\t\t\t\t>\n\t\t\t\t\t{ label }\n\t\t\t\t</BaseControl.VisualLabel>\n\t\t\t\t{ ! hasOneSide && ! hasOnlyAxialSides && (\n\t\t\t\t\t<SidesDropdown\n\t\t\t\t\t\tlabel={ dropdownLabelText }\n\t\t\t\t\t\tonChange={ setView }\n\t\t\t\t\t\tsides={ sides }\n\t\t\t\t\t\tvalue={ view }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t</HStack>\n\t\t\t<VStack spacing={ 0.5 }>{ renderControls() }</VStack>\n\t\t</fieldset>\n\t);\n}\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { __ } from '@wordpress/i18n';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { useSettings } from '../../use-settings';\r\n\r\nexport default function useSpacingSizes() {\r\n\tconst spacingSizes = [ { name: 0, slug: '0', size: 0 } ];\r\n\r\n\tconst [ settingsSizes ] = useSettings( 'spacing.spacingSizes' );\r\n\tif ( settingsSizes ) {\r\n\t\tspacingSizes.push( ...settingsSizes );\r\n\t}\r\n\r\n\tif ( spacingSizes.length > 8 ) {\r\n\t\tspacingSizes.unshift( {\r\n\t\t\tname: __( 'Default' ),\r\n\t\t\tslug: 'default',\r\n\t\t\tsize: undefined,\r\n\t\t} );\r\n\t}\r\n\r\n\treturn spacingSizes;\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useMemo } from '@wordpress/element';\r\nimport {\r\n\tBaseControl,\r\n\tRangeControl,\r\n\tFlex,\r\n\tFlexItem,\r\n\t__experimentalSpacer as Spacer,\r\n\t__experimentalUseCustomUnits as useCustomUnits,\r\n\t__experimentalUnitControl as UnitControl,\r\n\t__experimentalParseQuantityAndUnitFromRawValue as parseQuantityAndUnitFromRawValue,\r\n} from '@wordpress/components';\r\nimport { __ } from '@wordpress/i18n';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { useSettings } from '../use-settings';\r\n\r\nconst RANGE_CONTROL_CUSTOM_SETTINGS = {\r\n\tpx: { max: 1000, step: 1 },\r\n\t'%': { max: 100, step: 1 },\r\n\tvw: { max: 100, step: 1 },\r\n\tvh: { max: 100, step: 1 },\r\n\tem: { max: 50, step: 0.1 },\r\n\trem: { max: 50, step: 0.1 },\r\n\tsvw: { max: 100, step: 1 },\r\n\tlvw: { max: 100, step: 1 },\r\n\tdvw: { max: 100, step: 1 },\r\n\tsvh: { max: 100, step: 1 },\r\n\tlvh: { max: 100, step: 1 },\r\n\tdvh: { max: 100, step: 1 },\r\n\tvi: { max: 100, step: 1 },\r\n\tsvi: { max: 100, step: 1 },\r\n\tlvi: { max: 100, step: 1 },\r\n\tdvi: { max: 100, step: 1 },\r\n\tvb: { max: 100, step: 1 },\r\n\tsvb: { max: 100, step: 1 },\r\n\tlvb: { max: 100, step: 1 },\r\n\tdvb: { max: 100, step: 1 },\r\n\tvmin: { max: 100, step: 1 },\r\n\tsvmin: { max: 100, step: 1 },\r\n\tlvmin: { max: 100, step: 1 },\r\n\tdvmin: { max: 100, step: 1 },\r\n\tvmax: { max: 100, step: 1 },\r\n\tsvmax: { max: 100, step: 1 },\r\n\tlvmax: { max: 100, step: 1 },\r\n\tdvmax: { max: 100, step: 1 },\r\n};\r\n\r\n/**\r\n * HeightControl renders a linked unit control and range control for adjusting the height of a block.\r\n *\r\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/height-control/README.md\r\n *\r\n * @param {Object}                     props\r\n * @param {?string}                    props.label    A label for the control.\r\n * @param {( value: string ) => void } props.onChange Called when the height changes.\r\n * @param {string}                     props.value    The current height value.\r\n *\r\n * @return {Component} The component to be rendered.\r\n */\r\nexport default function HeightControl( {\r\n\tlabel = __( 'Height' ),\r\n\tonChange,\r\n\tvalue,\r\n} ) {\r\n\tconst customRangeValue = parseFloat( value );\r\n\r\n\tconst [ availableUnits ] = useSettings( 'spacing.units' );\r\n\tconst units = useCustomUnits( {\r\n\t\tavailableUnits: availableUnits || [\r\n\t\t\t'%',\r\n\t\t\t'px',\r\n\t\t\t'em',\r\n\t\t\t'rem',\r\n\t\t\t'vh',\r\n\t\t\t'vw',\r\n\t\t],\r\n\t} );\r\n\r\n\tconst selectedUnit =\r\n\t\tuseMemo(\r\n\t\t\t() => parseQuantityAndUnitFromRawValue( value ),\r\n\t\t\t[ value ]\r\n\t\t)[ 1 ] ||\r\n\t\tunits[ 0 ]?.value ||\r\n\t\t'px';\r\n\r\n\tconst handleSliderChange = ( next ) => {\r\n\t\tonChange( [ next, selectedUnit ].join( '' ) );\r\n\t};\r\n\r\n\tconst handleUnitChange = ( newUnit ) => {\r\n\t\t// Attempt to smooth over differences between currentUnit and newUnit.\r\n\t\t// This should slightly improve the experience of switching between unit types.\r\n\t\tconst [ currentValue, currentUnit ] =\r\n\t\t\tparseQuantityAndUnitFromRawValue( value );\r\n\r\n\t\tif ( [ 'em', 'rem' ].includes( newUnit ) && currentUnit === 'px' ) {\r\n\t\t\t// Convert pixel value to an approximate of the new unit, assuming a root size of 16px.\r\n\t\t\tonChange( ( currentValue / 16 ).toFixed( 2 ) + newUnit );\r\n\t\t} else if (\r\n\t\t\t[ 'em', 'rem' ].includes( currentUnit ) &&\r\n\t\t\tnewUnit === 'px'\r\n\t\t) {\r\n\t\t\t// Convert to pixel value assuming a root size of 16px.\r\n\t\t\tonChange( Math.round( currentValue * 16 ) + newUnit );\r\n\t\t} else if (\r\n\t\t\t[\r\n\t\t\t\t'%',\r\n\t\t\t\t'vw',\r\n\t\t\t\t'svw',\r\n\t\t\t\t'lvw',\r\n\t\t\t\t'dvw',\r\n\t\t\t\t'vh',\r\n\t\t\t\t'svh',\r\n\t\t\t\t'lvh',\r\n\t\t\t\t'dvh',\r\n\t\t\t\t'vi',\r\n\t\t\t\t'svi',\r\n\t\t\t\t'lvi',\r\n\t\t\t\t'dvi',\r\n\t\t\t\t'vb',\r\n\t\t\t\t'svb',\r\n\t\t\t\t'lvb',\r\n\t\t\t\t'dvb',\r\n\t\t\t\t'vmin',\r\n\t\t\t\t'svmin',\r\n\t\t\t\t'lvmin',\r\n\t\t\t\t'dvmin',\r\n\t\t\t\t'vmax',\r\n\t\t\t\t'svmax',\r\n\t\t\t\t'lvmax',\r\n\t\t\t\t'dvmax',\r\n\t\t\t].includes( newUnit ) &&\r\n\t\t\tcurrentValue > 100\r\n\t\t) {\r\n\t\t\t// When converting to `%` or viewport-relative units, cap the new value at 100.\r\n\t\t\tonChange( 100 + newUnit );\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<fieldset className=\"block-editor-height-control\">\r\n\t\t\t<BaseControl.VisualLabel as=\"legend\">\r\n\t\t\t\t{ label }\r\n\t\t\t</BaseControl.VisualLabel>\r\n\t\t\t<Flex>\r\n\t\t\t\t<FlexItem isBlock>\r\n\t\t\t\t\t<UnitControl\r\n\t\t\t\t\t\tvalue={ value }\r\n\t\t\t\t\t\tunits={ units }\r\n\t\t\t\t\t\tonChange={ onChange }\r\n\t\t\t\t\t\tonUnitChange={ handleUnitChange }\r\n\t\t\t\t\t\tmin={ 0 }\r\n\t\t\t\t\t\tsize={ '__unstable-large' }\r\n\t\t\t\t\t\tlabel={ label }\r\n\t\t\t\t\t\thideLabelFromVision\r\n\t\t\t\t\t/>\r\n\t\t\t\t</FlexItem>\r\n\t\t\t\t<FlexItem isBlock>\r\n\t\t\t\t\t<Spacer marginX={ 2 } marginBottom={ 0 }>\r\n\t\t\t\t\t\t<RangeControl\r\n\t\t\t\t\t\t\tvalue={ customRangeValue }\r\n\t\t\t\t\t\t\tmin={ 0 }\r\n\t\t\t\t\t\t\tmax={\r\n\t\t\t\t\t\t\t\tRANGE_CONTROL_CUSTOM_SETTINGS[ selectedUnit ]\r\n\t\t\t\t\t\t\t\t\t?.max ?? 100\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tstep={\r\n\t\t\t\t\t\t\t\tRANGE_CONTROL_CUSTOM_SETTINGS[ selectedUnit ]\r\n\t\t\t\t\t\t\t\t\t?.step ?? 0.1\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\twithInputField={ false }\r\n\t\t\t\t\t\t\tonChange={ handleSliderChange }\r\n\t\t\t\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t\t\t\t\tlabel={ label }\r\n\t\t\t\t\t\t\thideLabelFromVision\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Spacer>\r\n\t\t\t\t</FlexItem>\r\n\t\t\t</Flex>\r\n\t\t</fieldset>\r\n\t);\r\n}\r\n","/**\n * WordPress dependencies\n */\nimport {\n\t__experimentalToggleGroupControl as ToggleGroupControl,\n\t__experimentalToggleGroupControlOption as ToggleGroupControlOption,\n\t__experimentalUnitControl as UnitControl,\n\t__experimentalInputControl as InputControl,\n\t__experimentalHStack as HStack,\n\t__experimentalVStack as VStack,\n\t__experimentalToolsPanelItem as ToolsPanelItem,\n\tFlex,\n\tFlexItem,\n} from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { useEffect } from '@wordpress/element';\n\nfunction helpText( selfStretch, parentLayout ) {\n\tconst { orientation = 'horizontal' } = parentLayout;\n\n\tif ( selfStretch === 'fill' ) {\n\t\treturn __( 'Stretch to fill available space.' );\n\t}\n\tif ( selfStretch === 'fixed' && orientation === 'horizontal' ) {\n\t\treturn __( 'Specify a fixed width.' );\n\t} else if ( selfStretch === 'fixed' ) {\n\t\treturn __( 'Specify a fixed height.' );\n\t}\n\treturn __( 'Fit contents.' );\n}\n\n/**\n * Form to edit the child layout value.\n *\n * @param {Object}   props                  Props.\n * @param {Object}   props.value            The child layout value.\n * @param {Function} props.onChange         Function to update the child layout value.\n * @param {Object}   props.parentLayout     The parent layout value.\n *\n * @param {boolean}  props.isShownByDefault\n * @param {string}   props.panelId\n * @return {Element} child layout edit element.\n */\nexport default function ChildLayoutControl( {\n\tvalue: childLayout = {},\n\tonChange,\n\tparentLayout,\n\tisShownByDefault,\n\tpanelId,\n} ) {\n\tconst {\n\t\tselfStretch,\n\t\tflexSize,\n\t\tcolumnStart,\n\t\trowStart,\n\t\tcolumnSpan,\n\t\trowSpan,\n\t} = childLayout;\n\tconst {\n\t\ttype: parentType,\n\t\tdefault: { type: defaultParentType = 'default' } = {},\n\t\torientation = 'horizontal',\n\t} = parentLayout ?? {};\n\tconst parentLayoutType = parentType || defaultParentType;\n\n\tconst hasFlexValue = () => !! selfStretch;\n\tconst flexResetLabel =\n\t\torientation === 'horizontal' ? __( 'Width' ) : __( 'Height' );\n\tconst resetFlex = () => {\n\t\tonChange( {\n\t\t\tselfStretch: undefined,\n\t\t\tflexSize: undefined,\n\t\t} );\n\t};\n\n\tconst hasStartValue = () => !! columnStart || !! rowStart;\n\tconst hasSpanValue = () => !! columnSpan || !! rowSpan;\n\tconst resetGridStarts = () => {\n\t\tonChange( {\n\t\t\tcolumnStart: undefined,\n\t\t\trowStart: undefined,\n\t\t} );\n\t};\n\tconst resetGridSpans = () => {\n\t\tonChange( {\n\t\t\tcolumnSpan: undefined,\n\t\t\trowSpan: undefined,\n\t\t} );\n\t};\n\n\tuseEffect( () => {\n\t\tif ( selfStretch === 'fixed' && ! flexSize ) {\n\t\t\tonChange( {\n\t\t\t\t...childLayout,\n\t\t\t\tselfStretch: 'fit',\n\t\t\t} );\n\t\t}\n\t}, [] );\n\n\treturn (\n\t\t<>\n\t\t\t{ parentLayoutType === 'flex' && (\n\t\t\t\t<VStack\n\t\t\t\t\tas={ ToolsPanelItem }\n\t\t\t\t\tspacing={ 2 }\n\t\t\t\t\thasValue={ hasFlexValue }\n\t\t\t\t\tlabel={ flexResetLabel }\n\t\t\t\t\tonDeselect={ resetFlex }\n\t\t\t\t\tisShownByDefault={ isShownByDefault }\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t>\n\t\t\t\t\t<ToggleGroupControl\n\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\tsize={ '__unstable-large' }\n\t\t\t\t\t\tlabel={ childLayoutOrientation( parentLayout ) }\n\t\t\t\t\t\tvalue={ selfStretch || 'fit' }\n\t\t\t\t\t\thelp={ helpText( selfStretch, parentLayout ) }\n\t\t\t\t\t\tonChange={ ( value ) => {\n\t\t\t\t\t\t\tconst newFlexSize =\n\t\t\t\t\t\t\t\tvalue !== 'fixed' ? null : flexSize;\n\t\t\t\t\t\t\tonChange( {\n\t\t\t\t\t\t\t\tselfStretch: value,\n\t\t\t\t\t\t\t\tflexSize: newFlexSize,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tisBlock\n\t\t\t\t\t>\n\t\t\t\t\t\t<ToggleGroupControlOption\n\t\t\t\t\t\t\tkey={ 'fit' }\n\t\t\t\t\t\t\tvalue={ 'fit' }\n\t\t\t\t\t\t\tlabel={ __( 'Fit' ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<ToggleGroupControlOption\n\t\t\t\t\t\t\tkey={ 'fill' }\n\t\t\t\t\t\t\tvalue={ 'fill' }\n\t\t\t\t\t\t\tlabel={ __( 'Fill' ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<ToggleGroupControlOption\n\t\t\t\t\t\t\tkey={ 'fixed' }\n\t\t\t\t\t\t\tvalue={ 'fixed' }\n\t\t\t\t\t\t\tlabel={ __( 'Fixed' ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ToggleGroupControl>\n\t\t\t\t\t{ selfStretch === 'fixed' && (\n\t\t\t\t\t\t<UnitControl\n\t\t\t\t\t\t\tsize={ '__unstable-large' }\n\t\t\t\t\t\t\tonChange={ ( value ) => {\n\t\t\t\t\t\t\t\tonChange( {\n\t\t\t\t\t\t\t\t\tselfStretch,\n\t\t\t\t\t\t\t\t\tflexSize: value,\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tvalue={ flexSize }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</VStack>\n\t\t\t) }\n\t\t\t{ parentLayoutType === 'grid' && (\n\t\t\t\t<>\n\t\t\t\t\t<HStack\n\t\t\t\t\t\tas={ ToolsPanelItem }\n\t\t\t\t\t\thasValue={ hasSpanValue }\n\t\t\t\t\t\tlabel={ __( 'Grid span' ) }\n\t\t\t\t\t\tonDeselect={ resetGridSpans }\n\t\t\t\t\t\tisShownByDefault={ isShownByDefault }\n\t\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t\t>\n\t\t\t\t\t\t<InputControl\n\t\t\t\t\t\t\tsize={ '__unstable-large' }\n\t\t\t\t\t\t\tlabel={ __( 'Column span' ) }\n\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\tonChange={ ( value ) => {\n\t\t\t\t\t\t\t\tonChange( {\n\t\t\t\t\t\t\t\t\tcolumnStart,\n\t\t\t\t\t\t\t\t\trowStart,\n\t\t\t\t\t\t\t\t\trowSpan,\n\t\t\t\t\t\t\t\t\tcolumnSpan: value,\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tvalue={ columnSpan }\n\t\t\t\t\t\t\tmin={ 1 }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<InputControl\n\t\t\t\t\t\t\tsize={ '__unstable-large' }\n\t\t\t\t\t\t\tlabel={ __( 'Row span' ) }\n\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\tonChange={ ( value ) => {\n\t\t\t\t\t\t\t\tonChange( {\n\t\t\t\t\t\t\t\t\tcolumnStart,\n\t\t\t\t\t\t\t\t\trowStart,\n\t\t\t\t\t\t\t\t\tcolumnSpan,\n\t\t\t\t\t\t\t\t\trowSpan: value,\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tvalue={ rowSpan }\n\t\t\t\t\t\t\tmin={ 1 }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</HStack>\n\t\t\t\t\t{ window.__experimentalEnableGridInteractivity && (\n\t\t\t\t\t\t// Use Flex with an explicit width on the FlexItem instead of HStack to\n\t\t\t\t\t\t// work around an issue in webkit where inputs with a max attribute are\n\t\t\t\t\t\t// sized incorrectly.\n\t\t\t\t\t\t<Flex\n\t\t\t\t\t\t\tas={ ToolsPanelItem }\n\t\t\t\t\t\t\thasValue={ hasStartValue }\n\t\t\t\t\t\t\tlabel={ __( 'Grid placement' ) }\n\t\t\t\t\t\t\tonDeselect={ resetGridStarts }\n\t\t\t\t\t\t\tisShownByDefault={ false }\n\t\t\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<FlexItem style={ { width: '50%' } }>\n\t\t\t\t\t\t\t\t<InputControl\n\t\t\t\t\t\t\t\t\tsize={ '__unstable-large' }\n\t\t\t\t\t\t\t\t\tlabel={ __( 'Column' ) }\n\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\tonChange={ ( value ) => {\n\t\t\t\t\t\t\t\t\t\tonChange( {\n\t\t\t\t\t\t\t\t\t\t\tcolumnStart: value,\n\t\t\t\t\t\t\t\t\t\t\trowStart,\n\t\t\t\t\t\t\t\t\t\t\tcolumnSpan,\n\t\t\t\t\t\t\t\t\t\t\trowSpan,\n\t\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\tvalue={ columnStart }\n\t\t\t\t\t\t\t\t\tmin={ 1 }\n\t\t\t\t\t\t\t\t\tmax={ parentLayout?.columnCount }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</FlexItem>\n\t\t\t\t\t\t\t<FlexItem style={ { width: '50%' } }>\n\t\t\t\t\t\t\t\t<InputControl\n\t\t\t\t\t\t\t\t\tsize={ '__unstable-large' }\n\t\t\t\t\t\t\t\t\tlabel={ __( 'Row' ) }\n\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\tonChange={ ( value ) => {\n\t\t\t\t\t\t\t\t\t\tonChange( {\n\t\t\t\t\t\t\t\t\t\t\tcolumnStart,\n\t\t\t\t\t\t\t\t\t\t\trowStart: value,\n\t\t\t\t\t\t\t\t\t\t\tcolumnSpan,\n\t\t\t\t\t\t\t\t\t\t\trowSpan,\n\t\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\tvalue={ rowStart }\n\t\t\t\t\t\t\t\t\tmin={ 1 }\n\t\t\t\t\t\t\t\t\tmax={ parentLayout?.columnCount }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</FlexItem>\n\t\t\t\t\t\t</Flex>\n\t\t\t\t\t) }\n\t\t\t\t</>\n\t\t\t) }\n\t\t</>\n\t);\n}\n\nexport function childLayoutOrientation( parentLayout ) {\n\tconst { orientation = 'horizontal' } = parentLayout;\n\n\treturn orientation === 'horizontal' ? __( 'Width' ) : __( 'Height' );\n}\n","/**\n * WordPress dependencies\n */\nimport {\n\tSelectControl,\n\t__experimentalToolsPanelItem as ToolsPanelItem,\n} from '@wordpress/components';\nimport { __, _x } from '@wordpress/i18n';\n\n/**\n * @typedef {import('@wordpress/components/build-types/select-control/types').SelectControlProps} SelectControlProps\n */\n\n/**\n * @type {SelectControlProps[]}\n */\nexport const DEFAULT_ASPECT_RATIO_OPTIONS = [\n\t{\n\t\tlabel: _x( 'Original', 'Aspect ratio option for dimensions control' ),\n\t\tvalue: 'auto',\n\t},\n\t{\n\t\tlabel: _x(\n\t\t\t'Square - 1:1',\n\t\t\t'Aspect ratio option for dimensions control'\n\t\t),\n\t\tvalue: '1',\n\t},\n\t{\n\t\tlabel: _x(\n\t\t\t'Standard - 4:3',\n\t\t\t'Aspect ratio option for dimensions control'\n\t\t),\n\t\tvalue: '4/3',\n\t},\n\t{\n\t\tlabel: _x(\n\t\t\t'Portrait - 3:4',\n\t\t\t'Aspect ratio option for dimensions control'\n\t\t),\n\t\tvalue: '3/4',\n\t},\n\t{\n\t\tlabel: _x(\n\t\t\t'Classic - 3:2',\n\t\t\t'Aspect ratio option for dimensions control'\n\t\t),\n\t\tvalue: '3/2',\n\t},\n\t{\n\t\tlabel: _x(\n\t\t\t'Classic Portrait - 2:3',\n\t\t\t'Aspect ratio option for dimensions control'\n\t\t),\n\t\tvalue: '2/3',\n\t},\n\t{\n\t\tlabel: _x(\n\t\t\t'Wide - 16:9',\n\t\t\t'Aspect ratio option for dimensions control'\n\t\t),\n\t\tvalue: '16/9',\n\t},\n\t{\n\t\tlabel: _x(\n\t\t\t'Tall - 9:16',\n\t\t\t'Aspect ratio option for dimensions control'\n\t\t),\n\t\tvalue: '9/16',\n\t},\n\t{\n\t\tlabel: _x( 'Custom', 'Aspect ratio option for dimensions control' ),\n\t\tvalue: 'custom',\n\t\tdisabled: true,\n\t\thidden: true,\n\t},\n];\n\n/**\n * @callback AspectRatioToolPropsOnChange\n * @param {string} [value] New aspect ratio value.\n * @return {void} No return.\n */\n\n/**\n * @typedef {Object} AspectRatioToolProps\n * @property {string}                       [panelId]          ID of the panel this tool is associated with.\n * @property {string}                       [value]            Current aspect ratio value.\n * @property {AspectRatioToolPropsOnChange} [onChange]         Callback to update the aspect ratio value.\n * @property {SelectControlProps[]}         [options]          Aspect ratio options.\n * @property {string}                       [defaultValue]     Default aspect ratio value.\n * @property {boolean}                      [isShownByDefault] Whether the tool is shown by default.\n */\n\nexport default function AspectRatioTool( {\n\tpanelId,\n\tvalue,\n\tonChange = () => {},\n\toptions = DEFAULT_ASPECT_RATIO_OPTIONS,\n\tdefaultValue = DEFAULT_ASPECT_RATIO_OPTIONS[ 0 ].value,\n\thasValue,\n\tisShownByDefault = true,\n} ) {\n\t// Match the CSS default so if the value is used directly in CSS it will look correct in the control.\n\tconst displayValue = value ?? 'auto';\n\n\treturn (\n\t\t<ToolsPanelItem\n\t\t\thasValue={\n\t\t\t\thasValue ? hasValue : () => displayValue !== defaultValue\n\t\t\t}\n\t\t\tlabel={ __( 'Aspect ratio' ) }\n\t\t\tonDeselect={ () => onChange( undefined ) }\n\t\t\tisShownByDefault={ isShownByDefault }\n\t\t\tpanelId={ panelId }\n\t\t>\n\t\t\t<SelectControl\n\t\t\t\tlabel={ __( 'Aspect ratio' ) }\n\t\t\t\tvalue={ displayValue }\n\t\t\t\toptions={ options }\n\t\t\t\tonChange={ onChange }\n\t\t\t\tsize={ '__unstable-large' }\n\t\t\t\t__nextHasNoMarginBottom\n\t\t\t/>\n\t\t</ToolsPanelItem>\n\t);\n}\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport {\n\t__experimentalToolsPanel as ToolsPanel,\n\t__experimentalToolsPanelItem as ToolsPanelItem,\n\t__experimentalBoxControl as BoxControl,\n\t__experimentalHStack as HStack,\n\t__experimentalUnitControl as UnitControl,\n\t__experimentalUseCustomUnits as useCustomUnits,\n\t__experimentalView as View,\n} from '@wordpress/components';\nimport { Icon, positionCenter, stretchWide } from '@wordpress/icons';\nimport { useCallback, Platform } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { getValueFromVariable, TOOLSPANEL_DROPDOWNMENU_PROPS } from './utils';\nimport SpacingSizesControl from '../spacing-sizes-control';\nimport HeightControl from '../height-control';\nimport ChildLayoutControl from '../child-layout-control';\nimport AspectRatioTool from '../dimensions-tool/aspect-ratio-tool';\nimport { cleanEmptyObject } from '../../hooks/utils';\nimport { setImmutably } from '../../utils/object';\n\nconst AXIAL_SIDES = [ 'horizontal', 'vertical' ];\n\nexport function useHasDimensionsPanel( settings ) {\n\tconst hasContentSize = useHasContentSize( settings );\n\tconst hasWideSize = useHasWideSize( settings );\n\tconst hasPadding = useHasPadding( settings );\n\tconst hasMargin = useHasMargin( settings );\n\tconst hasGap = useHasGap( settings );\n\tconst hasMinHeight = useHasMinHeight( settings );\n\tconst hasAspectRatio = useHasAspectRatio( settings );\n\tconst hasChildLayout = useHasChildLayout( settings );\n\n\treturn (\n\t\tPlatform.OS === 'web' &&\n\t\t( hasContentSize ||\n\t\t\thasWideSize ||\n\t\t\thasPadding ||\n\t\t\thasMargin ||\n\t\t\thasGap ||\n\t\t\thasMinHeight ||\n\t\t\thasAspectRatio ||\n\t\t\thasChildLayout )\n\t);\n}\n\nfunction useHasContentSize( settings ) {\n\treturn settings?.layout?.contentSize;\n}\n\nfunction useHasWideSize( settings ) {\n\treturn settings?.layout?.wideSize;\n}\n\nfunction useHasPadding( settings ) {\n\treturn settings?.spacing?.padding;\n}\n\nfunction useHasMargin( settings ) {\n\treturn settings?.spacing?.margin;\n}\n\nfunction useHasGap( settings ) {\n\treturn settings?.spacing?.blockGap;\n}\n\nfunction useHasMinHeight( settings ) {\n\treturn settings?.dimensions?.minHeight;\n}\n\nfunction useHasAspectRatio( settings ) {\n\treturn settings?.dimensions?.aspectRatio;\n}\n\nfunction useHasChildLayout( settings ) {\n\tconst {\n\t\ttype: parentLayoutType = 'default',\n\t\tdefault: { type: defaultParentLayoutType = 'default' } = {},\n\t\tallowSizingOnChildren = false,\n\t} = settings?.parentLayout ?? {};\n\n\tconst support =\n\t\t( defaultParentLayoutType === 'flex' ||\n\t\t\tparentLayoutType === 'flex' ||\n\t\t\tdefaultParentLayoutType === 'grid' ||\n\t\t\tparentLayoutType === 'grid' ) &&\n\t\tallowSizingOnChildren;\n\treturn !! settings?.layout && support;\n}\n\nfunction useHasSpacingPresets( settings ) {\n\tconst {\n\t\tcustom,\n\t\ttheme,\n\t\tdefault: defaultPresets,\n\t} = settings?.spacing?.spacingSizes || {};\n\tconst presets = custom ?? theme ?? defaultPresets ?? [];\n\n\treturn presets.length > 0;\n}\n\nfunction filterValuesBySides( values, sides ) {\n\t// If no custom side configuration, all sides are opted into by default.\n\t// Without any values, we have nothing to filter either.\n\tif ( ! sides || ! values ) {\n\t\treturn values;\n\t}\n\n\t// Only include sides opted into within filtered values.\n\tconst filteredValues = {};\n\tsides.forEach( ( side ) => {\n\t\tif ( side === 'vertical' ) {\n\t\t\tfilteredValues.top = values.top;\n\t\t\tfilteredValues.bottom = values.bottom;\n\t\t}\n\t\tif ( side === 'horizontal' ) {\n\t\t\tfilteredValues.left = values.left;\n\t\t\tfilteredValues.right = values.right;\n\t\t}\n\t\tfilteredValues[ side ] = values?.[ side ];\n\t} );\n\n\treturn filteredValues;\n}\n\nfunction splitStyleValue( value ) {\n\t// Check for shorthand value (a string value).\n\tif ( value && typeof value === 'string' ) {\n\t\t// Convert to value for individual sides for BoxControl.\n\t\treturn {\n\t\t\ttop: value,\n\t\t\tright: value,\n\t\t\tbottom: value,\n\t\t\tleft: value,\n\t\t};\n\t}\n\n\treturn value;\n}\n\nfunction splitGapValue( value ) {\n\t// Check for shorthand value (a string value).\n\tif ( value && typeof value === 'string' ) {\n\t\t// If the value is a string, treat it as a single side (top) for the spacing controls.\n\t\treturn {\n\t\t\ttop: value,\n\t\t};\n\t}\n\n\tif ( value ) {\n\t\treturn {\n\t\t\t...value,\n\t\t\tright: value?.left,\n\t\t\tbottom: value?.top,\n\t\t};\n\t}\n\n\treturn value;\n}\n\nfunction DimensionsToolsPanel( {\n\tresetAllFilter,\n\tonChange,\n\tvalue,\n\tpanelId,\n\tchildren,\n} ) {\n\tconst resetAll = () => {\n\t\tconst updatedValue = resetAllFilter( value );\n\t\tonChange( updatedValue );\n\t};\n\n\treturn (\n\t\t<ToolsPanel\n\t\t\tlabel={ __( 'Dimensions' ) }\n\t\t\tresetAll={ resetAll }\n\t\t\tpanelId={ panelId }\n\t\t\tdropdownMenuProps={ TOOLSPANEL_DROPDOWNMENU_PROPS }\n\t\t>\n\t\t\t{ children }\n\t\t</ToolsPanel>\n\t);\n}\n\nconst DEFAULT_CONTROLS = {\n\tcontentSize: true,\n\twideSize: true,\n\tpadding: true,\n\tmargin: true,\n\tblockGap: true,\n\tminHeight: true,\n\taspectRatio: true,\n\tchildLayout: true,\n};\n\nexport default function DimensionsPanel( {\n\tas: Wrapper = DimensionsToolsPanel,\n\tvalue,\n\tonChange,\n\tinheritedValue = value,\n\tsettings,\n\tpanelId,\n\tdefaultControls = DEFAULT_CONTROLS,\n\tonVisualize = () => {},\n\t// Special case because the layout controls are not part of the dimensions panel\n\t// in global styles but not in block inspector.\n\tincludeLayoutControls = false,\n} ) {\n\tconst { dimensions, spacing } = settings;\n\n\tconst decodeValue = ( rawValue ) => {\n\t\tif ( rawValue && typeof rawValue === 'object' ) {\n\t\t\treturn Object.keys( rawValue ).reduce( ( acc, key ) => {\n\t\t\t\tacc[ key ] = getValueFromVariable(\n\t\t\t\t\t{ settings: { dimensions, spacing } },\n\t\t\t\t\t'',\n\t\t\t\t\trawValue[ key ]\n\t\t\t\t);\n\t\t\t\treturn acc;\n\t\t\t}, {} );\n\t\t}\n\t\treturn getValueFromVariable(\n\t\t\t{ settings: { dimensions, spacing } },\n\t\t\t'',\n\t\t\trawValue\n\t\t);\n\t};\n\n\tconst showSpacingPresetsControl = useHasSpacingPresets( settings );\n\tconst units = useCustomUnits( {\n\t\tavailableUnits: settings?.spacing?.units || [\n\t\t\t'%',\n\t\t\t'px',\n\t\t\t'em',\n\t\t\t'rem',\n\t\t\t'vw',\n\t\t],\n\t} );\n\n\t// Content Size\n\tconst showContentSizeControl =\n\t\tuseHasContentSize( settings ) && includeLayoutControls;\n\tconst contentSizeValue = decodeValue( inheritedValue?.layout?.contentSize );\n\tconst setContentSizeValue = ( newValue ) => {\n\t\tonChange(\n\t\t\tsetImmutably(\n\t\t\t\tvalue,\n\t\t\t\t[ 'layout', 'contentSize' ],\n\t\t\t\tnewValue || undefined\n\t\t\t)\n\t\t);\n\t};\n\tconst hasUserSetContentSizeValue = () => !! value?.layout?.contentSize;\n\tconst resetContentSizeValue = () => setContentSizeValue( undefined );\n\n\t// Wide Size\n\tconst showWideSizeControl =\n\t\tuseHasWideSize( settings ) && includeLayoutControls;\n\tconst wideSizeValue = decodeValue( inheritedValue?.layout?.wideSize );\n\tconst setWideSizeValue = ( newValue ) => {\n\t\tonChange(\n\t\t\tsetImmutably(\n\t\t\t\tvalue,\n\t\t\t\t[ 'layout', 'wideSize' ],\n\t\t\t\tnewValue || undefined\n\t\t\t)\n\t\t);\n\t};\n\tconst hasUserSetWideSizeValue = () => !! value?.layout?.wideSize;\n\tconst resetWideSizeValue = () => setWideSizeValue( undefined );\n\n\t// Padding\n\tconst showPaddingControl = useHasPadding( settings );\n\tconst rawPadding = decodeValue( inheritedValue?.spacing?.padding );\n\tconst paddingValues = splitStyleValue( rawPadding );\n\tconst paddingSides = Array.isArray( settings?.spacing?.padding )\n\t\t? settings?.spacing?.padding\n\t\t: settings?.spacing?.padding?.sides;\n\tconst isAxialPadding =\n\t\tpaddingSides &&\n\t\tpaddingSides.some( ( side ) => AXIAL_SIDES.includes( side ) );\n\tconst setPaddingValues = ( newPaddingValues ) => {\n\t\tconst padding = filterValuesBySides( newPaddingValues, paddingSides );\n\t\tonChange( setImmutably( value, [ 'spacing', 'padding' ], padding ) );\n\t};\n\tconst hasPaddingValue = () =>\n\t\t!! value?.spacing?.padding &&\n\t\tObject.keys( value?.spacing?.padding ).length;\n\tconst resetPaddingValue = () => setPaddingValues( undefined );\n\tconst onMouseOverPadding = () => onVisualize( 'padding' );\n\n\t// Margin\n\tconst showMarginControl = useHasMargin( settings );\n\tconst rawMargin = decodeValue( inheritedValue?.spacing?.margin );\n\tconst marginValues = splitStyleValue( rawMargin );\n\tconst marginSides = Array.isArray( settings?.spacing?.margin )\n\t\t? settings?.spacing?.margin\n\t\t: settings?.spacing?.margin?.sides;\n\tconst isAxialMargin =\n\t\tmarginSides &&\n\t\tmarginSides.some( ( side ) => AXIAL_SIDES.includes( side ) );\n\tconst setMarginValues = ( newMarginValues ) => {\n\t\tconst margin = filterValuesBySides( newMarginValues, marginSides );\n\t\tonChange( setImmutably( value, [ 'spacing', 'margin' ], margin ) );\n\t};\n\tconst hasMarginValue = () =>\n\t\t!! value?.spacing?.margin &&\n\t\tObject.keys( value?.spacing?.margin ).length;\n\tconst resetMarginValue = () => setMarginValues( undefined );\n\tconst onMouseOverMargin = () => onVisualize( 'margin' );\n\n\t// Block Gap\n\tconst showGapControl = useHasGap( settings );\n\tconst gapValue = decodeValue( inheritedValue?.spacing?.blockGap );\n\tconst gapValues = splitGapValue( gapValue );\n\tconst gapSides = Array.isArray( settings?.spacing?.blockGap )\n\t\t? settings?.spacing?.blockGap\n\t\t: settings?.spacing?.blockGap?.sides;\n\tconst isAxialGap =\n\t\tgapSides && gapSides.some( ( side ) => AXIAL_SIDES.includes( side ) );\n\tconst setGapValue = ( newGapValue ) => {\n\t\tonChange(\n\t\t\tsetImmutably( value, [ 'spacing', 'blockGap' ], newGapValue )\n\t\t);\n\t};\n\tconst setGapValues = ( nextBoxGapValue ) => {\n\t\tif ( ! nextBoxGapValue ) {\n\t\t\tsetGapValue( null );\n\t\t}\n\t\t// If axial gap is not enabled, treat the 'top' value as the shorthand gap value.\n\t\tif ( ! isAxialGap && nextBoxGapValue?.hasOwnProperty( 'top' ) ) {\n\t\t\tsetGapValue( nextBoxGapValue.top );\n\t\t} else {\n\t\t\tsetGapValue( {\n\t\t\t\ttop: nextBoxGapValue?.top,\n\t\t\t\tleft: nextBoxGapValue?.left,\n\t\t\t} );\n\t\t}\n\t};\n\tconst resetGapValue = () => setGapValue( undefined );\n\tconst hasGapValue = () => !! value?.spacing?.blockGap;\n\n\t// Min Height\n\tconst showMinHeightControl = useHasMinHeight( settings );\n\tconst minHeightValue = decodeValue( inheritedValue?.dimensions?.minHeight );\n\tconst setMinHeightValue = ( newValue ) => {\n\t\tconst tempValue = setImmutably(\n\t\t\tvalue,\n\t\t\t[ 'dimensions', 'minHeight' ],\n\t\t\tnewValue\n\t\t);\n\t\t// Apply min-height, while removing any applied aspect ratio.\n\t\tonChange(\n\t\t\tsetImmutably(\n\t\t\t\ttempValue,\n\t\t\t\t[ 'dimensions', 'aspectRatio' ],\n\t\t\t\tundefined\n\t\t\t)\n\t\t);\n\t};\n\tconst resetMinHeightValue = () => {\n\t\tsetMinHeightValue( undefined );\n\t};\n\tconst hasMinHeightValue = () => !! value?.dimensions?.minHeight;\n\n\t// Aspect Ratio\n\tconst showAspectRatioControl = useHasAspectRatio( settings );\n\tconst aspectRatioValue = decodeValue(\n\t\tinheritedValue?.dimensions?.aspectRatio\n\t);\n\tconst setAspectRatioValue = ( newValue ) => {\n\t\tconst tempValue = setImmutably(\n\t\t\tvalue,\n\t\t\t[ 'dimensions', 'aspectRatio' ],\n\t\t\tnewValue\n\t\t);\n\t\t// Apply aspect-ratio, while removing any applied min-height.\n\t\tonChange(\n\t\t\tsetImmutably( tempValue, [ 'dimensions', 'minHeight' ], undefined )\n\t\t);\n\t};\n\tconst hasAspectRatioValue = () => !! value?.dimensions?.aspectRatio;\n\n\t// Child Layout\n\tconst showChildLayoutControl = useHasChildLayout( settings );\n\tconst childLayout = inheritedValue?.layout;\n\n\tconst setChildLayout = ( newChildLayout ) => {\n\t\tonChange( {\n\t\t\t...value,\n\t\t\tlayout: {\n\t\t\t\t...newChildLayout,\n\t\t\t},\n\t\t} );\n\t};\n\n\tconst resetAllFilter = useCallback( ( previousValue ) => {\n\t\treturn {\n\t\t\t...previousValue,\n\t\t\tlayout: cleanEmptyObject( {\n\t\t\t\t...previousValue?.layout,\n\t\t\t\tcontentSize: undefined,\n\t\t\t\twideSize: undefined,\n\t\t\t\tselfStretch: undefined,\n\t\t\t\tflexSize: undefined,\n\t\t\t\tcolumnStart: undefined,\n\t\t\t\trowStart: undefined,\n\t\t\t\tcolumnSpan: undefined,\n\t\t\t\trowSpan: undefined,\n\t\t\t} ),\n\t\t\tspacing: {\n\t\t\t\t...previousValue?.spacing,\n\t\t\t\tpadding: undefined,\n\t\t\t\tmargin: undefined,\n\t\t\t\tblockGap: undefined,\n\t\t\t},\n\t\t\tdimensions: {\n\t\t\t\t...previousValue?.dimensions,\n\t\t\t\tminHeight: undefined,\n\t\t\t\taspectRatio: undefined,\n\t\t\t},\n\t\t};\n\t}, [] );\n\n\tconst onMouseLeaveControls = () => onVisualize( false );\n\n\treturn (\n\t\t<Wrapper\n\t\t\tresetAllFilter={ resetAllFilter }\n\t\t\tvalue={ value }\n\t\t\tonChange={ onChange }\n\t\t\tpanelId={ panelId }\n\t\t>\n\t\t\t{ ( showContentSizeControl || showWideSizeControl ) && (\n\t\t\t\t<span className=\"span-columns\">\n\t\t\t\t\t{ __( 'Set the width of the main content area.' ) }\n\t\t\t\t</span>\n\t\t\t) }\n\t\t\t{ showContentSizeControl && (\n\t\t\t\t<ToolsPanelItem\n\t\t\t\t\tclassName=\"single-column\"\n\t\t\t\t\tlabel={ __( 'Content size' ) }\n\t\t\t\t\thasValue={ hasUserSetContentSizeValue }\n\t\t\t\t\tonDeselect={ resetContentSizeValue }\n\t\t\t\t\tisShownByDefault={\n\t\t\t\t\t\tdefaultControls.contentSize ??\n\t\t\t\t\t\tDEFAULT_CONTROLS.contentSize\n\t\t\t\t\t}\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t>\n\t\t\t\t\t<HStack alignment=\"flex-end\" justify=\"flex-start\">\n\t\t\t\t\t\t<UnitControl\n\t\t\t\t\t\t\tlabel={ __( 'Content' ) }\n\t\t\t\t\t\t\tlabelPosition=\"top\"\n\t\t\t\t\t\t\t__unstableInputWidth=\"80px\"\n\t\t\t\t\t\t\tvalue={ contentSizeValue || '' }\n\t\t\t\t\t\t\tonChange={ ( nextContentSize ) => {\n\t\t\t\t\t\t\t\tsetContentSizeValue( nextContentSize );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tunits={ units }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<View>\n\t\t\t\t\t\t\t<Icon icon={ positionCenter } />\n\t\t\t\t\t\t</View>\n\t\t\t\t\t</HStack>\n\t\t\t\t</ToolsPanelItem>\n\t\t\t) }\n\t\t\t{ showWideSizeControl && (\n\t\t\t\t<ToolsPanelItem\n\t\t\t\t\tclassName=\"single-column\"\n\t\t\t\t\tlabel={ __( 'Wide size' ) }\n\t\t\t\t\thasValue={ hasUserSetWideSizeValue }\n\t\t\t\t\tonDeselect={ resetWideSizeValue }\n\t\t\t\t\tisShownByDefault={\n\t\t\t\t\t\tdefaultControls.wideSize ?? DEFAULT_CONTROLS.wideSize\n\t\t\t\t\t}\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t>\n\t\t\t\t\t<HStack alignment=\"flex-end\" justify=\"flex-start\">\n\t\t\t\t\t\t<UnitControl\n\t\t\t\t\t\t\tlabel={ __( 'Wide' ) }\n\t\t\t\t\t\t\tlabelPosition=\"top\"\n\t\t\t\t\t\t\t__unstableInputWidth=\"80px\"\n\t\t\t\t\t\t\tvalue={ wideSizeValue || '' }\n\t\t\t\t\t\t\tonChange={ ( nextWideSize ) => {\n\t\t\t\t\t\t\t\tsetWideSizeValue( nextWideSize );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tunits={ units }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<View>\n\t\t\t\t\t\t\t<Icon icon={ stretchWide } />\n\t\t\t\t\t\t</View>\n\t\t\t\t\t</HStack>\n\t\t\t\t</ToolsPanelItem>\n\t\t\t) }\n\t\t\t{ showPaddingControl && (\n\t\t\t\t<ToolsPanelItem\n\t\t\t\t\thasValue={ hasPaddingValue }\n\t\t\t\t\tlabel={ __( 'Padding' ) }\n\t\t\t\t\tonDeselect={ resetPaddingValue }\n\t\t\t\t\tisShownByDefault={\n\t\t\t\t\t\tdefaultControls.padding ?? DEFAULT_CONTROLS.padding\n\t\t\t\t\t}\n\t\t\t\t\tclassName={ classnames( {\n\t\t\t\t\t\t'tools-panel-item-spacing': showSpacingPresetsControl,\n\t\t\t\t\t} ) }\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t>\n\t\t\t\t\t{ ! showSpacingPresetsControl && (\n\t\t\t\t\t\t<BoxControl\n\t\t\t\t\t\t\tvalues={ paddingValues }\n\t\t\t\t\t\t\tonChange={ setPaddingValues }\n\t\t\t\t\t\t\tlabel={ __( 'Padding' ) }\n\t\t\t\t\t\t\tsides={ paddingSides }\n\t\t\t\t\t\t\tunits={ units }\n\t\t\t\t\t\t\tallowReset={ false }\n\t\t\t\t\t\t\tsplitOnAxis={ isAxialPadding }\n\t\t\t\t\t\t\tonMouseOver={ onMouseOverPadding }\n\t\t\t\t\t\t\tonMouseOut={ onMouseLeaveControls }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t\t{ showSpacingPresetsControl && (\n\t\t\t\t\t\t<SpacingSizesControl\n\t\t\t\t\t\t\tvalues={ paddingValues }\n\t\t\t\t\t\t\tonChange={ setPaddingValues }\n\t\t\t\t\t\t\tlabel={ __( 'Padding' ) }\n\t\t\t\t\t\t\tsides={ paddingSides }\n\t\t\t\t\t\t\tunits={ units }\n\t\t\t\t\t\t\tallowReset={ false }\n\t\t\t\t\t\t\tonMouseOver={ onMouseOverPadding }\n\t\t\t\t\t\t\tonMouseOut={ onMouseLeaveControls }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</ToolsPanelItem>\n\t\t\t) }\n\t\t\t{ showMarginControl && (\n\t\t\t\t<ToolsPanelItem\n\t\t\t\t\thasValue={ hasMarginValue }\n\t\t\t\t\tlabel={ __( 'Margin' ) }\n\t\t\t\t\tonDeselect={ resetMarginValue }\n\t\t\t\t\tisShownByDefault={\n\t\t\t\t\t\tdefaultControls.margin ?? DEFAULT_CONTROLS.margin\n\t\t\t\t\t}\n\t\t\t\t\tclassName={ classnames( {\n\t\t\t\t\t\t'tools-panel-item-spacing': showSpacingPresetsControl,\n\t\t\t\t\t} ) }\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t>\n\t\t\t\t\t{ ! showSpacingPresetsControl && (\n\t\t\t\t\t\t<BoxControl\n\t\t\t\t\t\t\tvalues={ marginValues }\n\t\t\t\t\t\t\tonChange={ setMarginValues }\n\t\t\t\t\t\t\tlabel={ __( 'Margin' ) }\n\t\t\t\t\t\t\tsides={ marginSides }\n\t\t\t\t\t\t\tunits={ units }\n\t\t\t\t\t\t\tallowReset={ false }\n\t\t\t\t\t\t\tsplitOnAxis={ isAxialMargin }\n\t\t\t\t\t\t\tonMouseOver={ onMouseOverMargin }\n\t\t\t\t\t\t\tonMouseOut={ onMouseLeaveControls }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t\t{ showSpacingPresetsControl && (\n\t\t\t\t\t\t<SpacingSizesControl\n\t\t\t\t\t\t\tvalues={ marginValues }\n\t\t\t\t\t\t\tonChange={ setMarginValues }\n\t\t\t\t\t\t\tlabel={ __( 'Margin' ) }\n\t\t\t\t\t\t\tsides={ marginSides }\n\t\t\t\t\t\t\tunits={ units }\n\t\t\t\t\t\t\tallowReset={ false }\n\t\t\t\t\t\t\tonMouseOver={ onMouseOverMargin }\n\t\t\t\t\t\t\tonMouseOut={ onMouseLeaveControls }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</ToolsPanelItem>\n\t\t\t) }\n\t\t\t{ showGapControl && (\n\t\t\t\t<ToolsPanelItem\n\t\t\t\t\thasValue={ hasGapValue }\n\t\t\t\t\tlabel={ __( 'Block spacing' ) }\n\t\t\t\t\tonDeselect={ resetGapValue }\n\t\t\t\t\tisShownByDefault={\n\t\t\t\t\t\tdefaultControls.blockGap ?? DEFAULT_CONTROLS.blockGap\n\t\t\t\t\t}\n\t\t\t\t\tclassName={ classnames( {\n\t\t\t\t\t\t'tools-panel-item-spacing': showSpacingPresetsControl,\n\t\t\t\t\t} ) }\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t>\n\t\t\t\t\t{ ! showSpacingPresetsControl &&\n\t\t\t\t\t\t( isAxialGap ? (\n\t\t\t\t\t\t\t<BoxControl\n\t\t\t\t\t\t\t\tlabel={ __( 'Block spacing' ) }\n\t\t\t\t\t\t\t\tmin={ 0 }\n\t\t\t\t\t\t\t\tonChange={ setGapValues }\n\t\t\t\t\t\t\t\tunits={ units }\n\t\t\t\t\t\t\t\tsides={ gapSides }\n\t\t\t\t\t\t\t\tvalues={ gapValues }\n\t\t\t\t\t\t\t\tallowReset={ false }\n\t\t\t\t\t\t\t\tsplitOnAxis={ isAxialGap }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<UnitControl\n\t\t\t\t\t\t\t\tlabel={ __( 'Block spacing' ) }\n\t\t\t\t\t\t\t\t__unstableInputWidth=\"80px\"\n\t\t\t\t\t\t\t\tmin={ 0 }\n\t\t\t\t\t\t\t\tonChange={ setGapValue }\n\t\t\t\t\t\t\t\tunits={ units }\n\t\t\t\t\t\t\t\tvalue={ gapValue }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) ) }\n\t\t\t\t\t{ showSpacingPresetsControl && (\n\t\t\t\t\t\t<SpacingSizesControl\n\t\t\t\t\t\t\tlabel={ __( 'Block spacing' ) }\n\t\t\t\t\t\t\tmin={ 0 }\n\t\t\t\t\t\t\tonChange={ setGapValues }\n\t\t\t\t\t\t\tshowSideInLabel={ false }\n\t\t\t\t\t\t\tsides={ isAxialGap ? gapSides : [ 'top' ] } // Use 'top' as the shorthand property in non-axial configurations.\n\t\t\t\t\t\t\tvalues={ gapValues }\n\t\t\t\t\t\t\tallowReset={ false }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</ToolsPanelItem>\n\t\t\t) }\n\t\t\t{ showChildLayoutControl && (\n\t\t\t\t<ChildLayoutControl\n\t\t\t\t\tvalue={ childLayout }\n\t\t\t\t\tonChange={ setChildLayout }\n\t\t\t\t\tparentLayout={ settings?.parentLayout }\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t\tisShownByDefault={\n\t\t\t\t\t\tdefaultControls.childLayout ??\n\t\t\t\t\t\tDEFAULT_CONTROLS.childLayout\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t) }\n\t\t\t{ showMinHeightControl && (\n\t\t\t\t<ToolsPanelItem\n\t\t\t\t\thasValue={ hasMinHeightValue }\n\t\t\t\t\tlabel={ __( 'Minimum height' ) }\n\t\t\t\t\tonDeselect={ resetMinHeightValue }\n\t\t\t\t\tisShownByDefault={\n\t\t\t\t\t\tdefaultControls.minHeight ?? DEFAULT_CONTROLS.minHeight\n\t\t\t\t\t}\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t>\n\t\t\t\t\t<HeightControl\n\t\t\t\t\t\tlabel={ __( 'Minimum height' ) }\n\t\t\t\t\t\tvalue={ minHeightValue }\n\t\t\t\t\t\tonChange={ setMinHeightValue }\n\t\t\t\t\t/>\n\t\t\t\t</ToolsPanelItem>\n\t\t\t) }\n\t\t\t{ showAspectRatioControl && (\n\t\t\t\t<AspectRatioTool\n\t\t\t\t\thasValue={ hasAspectRatioValue }\n\t\t\t\t\tvalue={ aspectRatioValue }\n\t\t\t\t\tonChange={ setAspectRatioValue }\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t\tisShownByDefault={\n\t\t\t\t\t\tdefaultControls.aspectRatio ??\n\t\t\t\t\t\tDEFAULT_CONTROLS.aspectRatio\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t) }\n\t\t</Wrapper>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport {\n\tuseState,\n\tuseRef,\n\tuseLayoutEffect,\n\tuseEffect,\n\tuseReducer,\n} from '@wordpress/element';\nimport isShallowEqual from '@wordpress/is-shallow-equal';\n\n/**\n * Internal dependencies\n */\nimport BlockPopoverCover from '../components/block-popover/cover';\nimport { __unstableUseBlockElement as useBlockElement } from '../components/block-list/use-block-props/use-block-refs';\n\nfunction SpacingVisualizer( { clientId, value, computeStyle, forceShow } ) {\n\tconst blockElement = useBlockElement( clientId );\n\tconst [ style, updateStyle ] = useReducer( () =>\n\t\tcomputeStyle( blockElement )\n\t);\n\n\tuseLayoutEffect( () => {\n\t\tif ( ! blockElement ) {\n\t\t\treturn;\n\t\t}\n\t\t// It's not sufficient to read the computed spacing value when value.spacing changes as\n\t\t// useEffect may run before the browser recomputes CSS. We therefore combine\n\t\t// useLayoutEffect and two rAF calls to ensure that we read the spacing after the current\n\t\t// paint but before the next paint.\n\t\t// See https://github.com/WordPress/gutenberg/pull/59227.\n\t\twindow.requestAnimationFrame( () =>\n\t\t\twindow.requestAnimationFrame( updateStyle )\n\t\t);\n\t}, [ blockElement, value ] );\n\n\tconst previousValue = useRef( value );\n\tconst [ isActive, setIsActive ] = useState( false );\n\n\tuseEffect( () => {\n\t\tif ( isShallowEqual( value, previousValue.current ) || forceShow ) {\n\t\t\treturn;\n\t\t}\n\n\t\tsetIsActive( true );\n\t\tpreviousValue.current = value;\n\n\t\tconst timeout = setTimeout( () => {\n\t\t\tsetIsActive( false );\n\t\t}, 400 );\n\n\t\treturn () => {\n\t\t\tsetIsActive( false );\n\t\t\tclearTimeout( timeout );\n\t\t};\n\t}, [ value, forceShow ] );\n\n\tif ( ! isActive && ! forceShow ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<BlockPopoverCover\n\t\t\tclientId={ clientId }\n\t\t\t__unstablePopoverSlot=\"block-toolbar\"\n\t\t>\n\t\t\t<div className=\"block-editor__spacing-visualizer\" style={ style } />\n\t\t</BlockPopoverCover>\n\t);\n}\n\nfunction getComputedCSS( element, property ) {\n\treturn element.ownerDocument.defaultView\n\t\t.getComputedStyle( element )\n\t\t.getPropertyValue( property );\n}\n\nexport function MarginVisualizer( { clientId, value, forceShow } ) {\n\treturn (\n\t\t<SpacingVisualizer\n\t\t\tclientId={ clientId }\n\t\t\tvalue={ value?.spacing?.margin }\n\t\t\tcomputeStyle={ ( blockElement ) => {\n\t\t\t\tconst top = getComputedCSS( blockElement, 'margin-top' );\n\t\t\t\tconst right = getComputedCSS( blockElement, 'margin-right' );\n\t\t\t\tconst bottom = getComputedCSS( blockElement, 'margin-bottom' );\n\t\t\t\tconst left = getComputedCSS( blockElement, 'margin-left' );\n\t\t\t\treturn {\n\t\t\t\t\tborderTopWidth: top,\n\t\t\t\t\tborderRightWidth: right,\n\t\t\t\t\tborderBottomWidth: bottom,\n\t\t\t\t\tborderLeftWidth: left,\n\t\t\t\t\ttop: top ? `-${ top }` : 0,\n\t\t\t\t\tright: right ? `-${ right }` : 0,\n\t\t\t\t\tbottom: bottom ? `-${ bottom }` : 0,\n\t\t\t\t\tleft: left ? `-${ left }` : 0,\n\t\t\t\t};\n\t\t\t} }\n\t\t\tforceShow={ forceShow }\n\t\t/>\n\t);\n}\n\nexport function PaddingVisualizer( { clientId, value, forceShow } ) {\n\treturn (\n\t\t<SpacingVisualizer\n\t\t\tclientId={ clientId }\n\t\t\tvalue={ value?.spacing?.padding }\n\t\t\tcomputeStyle={ ( blockElement ) => ( {\n\t\t\t\tborderTopWidth: getComputedCSS( blockElement, 'padding-top' ),\n\t\t\t\tborderRightWidth: getComputedCSS(\n\t\t\t\t\tblockElement,\n\t\t\t\t\t'padding-right'\n\t\t\t\t),\n\t\t\t\tborderBottomWidth: getComputedCSS(\n\t\t\t\t\tblockElement,\n\t\t\t\t\t'padding-bottom'\n\t\t\t\t),\n\t\t\t\tborderLeftWidth: getComputedCSS( blockElement, 'padding-left' ),\n\t\t\t} ) }\n\t\t\tforceShow={ forceShow }\n\t\t/>\n\t);\n}\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { Platform, useState, useEffect, useCallback } from '@wordpress/element';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { getBlockSupport } from '@wordpress/blocks';\nimport deprecated from '@wordpress/deprecated';\n\n/**\n * Internal dependencies\n */\nimport InspectorControls from '../components/inspector-controls';\nimport {\n\tDimensionsPanel as StylesDimensionsPanel,\n\tuseHasDimensionsPanel,\n} from '../components/global-styles';\nimport { MarginVisualizer, PaddingVisualizer } from './spacing-visualizer';\nimport { store as blockEditorStore } from '../store';\nimport { unlock } from '../lock-unlock';\nimport { cleanEmptyObject, shouldSkipSerialization } from './utils';\n\nexport const DIMENSIONS_SUPPORT_KEY = 'dimensions';\nexport const SPACING_SUPPORT_KEY = 'spacing';\nexport const ALL_SIDES = [ 'top', 'right', 'bottom', 'left' ];\nexport const AXIAL_SIDES = [ 'vertical', 'horizontal' ];\n\nfunction useVisualizer() {\n\tconst [ property, setProperty ] = useState( false );\n\tconst { hideBlockInterface, showBlockInterface } = unlock(\n\t\tuseDispatch( blockEditorStore )\n\t);\n\tuseEffect( () => {\n\t\tif ( ! property ) {\n\t\t\tshowBlockInterface();\n\t\t} else {\n\t\t\thideBlockInterface();\n\t\t}\n\t}, [ property, showBlockInterface, hideBlockInterface ] );\n\n\treturn [ property, setProperty ];\n}\n\nfunction DimensionsInspectorControl( { children, resetAllFilter } ) {\n\tconst attributesResetAllFilter = useCallback(\n\t\t( attributes ) => {\n\t\t\tconst existingStyle = attributes.style;\n\t\t\tconst updatedStyle = resetAllFilter( existingStyle );\n\t\t\treturn {\n\t\t\t\t...attributes,\n\t\t\t\tstyle: updatedStyle,\n\t\t\t};\n\t\t},\n\t\t[ resetAllFilter ]\n\t);\n\n\treturn (\n\t\t<InspectorControls\n\t\t\tgroup=\"dimensions\"\n\t\t\tresetAllFilter={ attributesResetAllFilter }\n\t\t>\n\t\t\t{ children }\n\t\t</InspectorControls>\n\t);\n}\n\nexport function DimensionsPanel( { clientId, name, setAttributes, settings } ) {\n\tconst isEnabled = useHasDimensionsPanel( settings );\n\tconst value = useSelect(\n\t\t( select ) =>\n\t\t\tselect( blockEditorStore ).getBlockAttributes( clientId )?.style,\n\t\t[ clientId ]\n\t);\n\tconst [ visualizedProperty, setVisualizedProperty ] = useVisualizer();\n\tconst onChange = ( newStyle ) => {\n\t\tsetAttributes( {\n\t\t\tstyle: cleanEmptyObject( newStyle ),\n\t\t} );\n\t};\n\n\tif ( ! isEnabled ) {\n\t\treturn null;\n\t}\n\n\tconst defaultDimensionsControls = getBlockSupport( name, [\n\t\tDIMENSIONS_SUPPORT_KEY,\n\t\t'__experimentalDefaultControls',\n\t] );\n\tconst defaultSpacingControls = getBlockSupport( name, [\n\t\tSPACING_SUPPORT_KEY,\n\t\t'__experimentalDefaultControls',\n\t] );\n\tconst defaultControls = {\n\t\t...defaultDimensionsControls,\n\t\t...defaultSpacingControls,\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<StylesDimensionsPanel\n\t\t\t\tas={ DimensionsInspectorControl }\n\t\t\t\tpanelId={ clientId }\n\t\t\t\tsettings={ settings }\n\t\t\t\tvalue={ value }\n\t\t\t\tonChange={ onChange }\n\t\t\t\tdefaultControls={ defaultControls }\n\t\t\t\tonVisualize={ setVisualizedProperty }\n\t\t\t/>\n\t\t\t{ !! settings?.spacing?.padding && (\n\t\t\t\t<PaddingVisualizer\n\t\t\t\t\tforceShow={ visualizedProperty === 'padding' }\n\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\tvalue={ value }\n\t\t\t\t/>\n\t\t\t) }\n\t\t\t{ !! settings?.spacing?.margin && (\n\t\t\t\t<MarginVisualizer\n\t\t\t\t\tforceShow={ visualizedProperty === 'margin' }\n\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\tvalue={ value }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</>\n\t);\n}\n\n/**\n * Determine whether there is block support for dimensions.\n *\n * @param {string} blockName Block name.\n * @param {string} feature   Background image feature to check for.\n *\n * @return {boolean} Whether there is support.\n */\nexport function hasDimensionsSupport( blockName, feature = 'any' ) {\n\tif ( Platform.OS !== 'web' ) {\n\t\treturn false;\n\t}\n\n\tconst support = getBlockSupport( blockName, DIMENSIONS_SUPPORT_KEY );\n\n\tif ( support === true ) {\n\t\treturn true;\n\t}\n\n\tif ( feature === 'any' ) {\n\t\treturn !! ( support?.aspectRatio || !! support?.minHeight );\n\t}\n\n\treturn !! support?.[ feature ];\n}\n\nexport default {\n\tuseBlockProps,\n\tattributeKeys: [ 'minHeight', 'style' ],\n\thasSupport( name ) {\n\t\treturn hasDimensionsSupport( name, 'aspectRatio' );\n\t},\n};\n\nfunction useBlockProps( { name, minHeight, style } ) {\n\tif (\n\t\t! hasDimensionsSupport( name, 'aspectRatio' ) ||\n\t\tshouldSkipSerialization( name, DIMENSIONS_SUPPORT_KEY, 'aspectRatio' )\n\t) {\n\t\treturn {};\n\t}\n\n\tconst className = classnames( {\n\t\t'has-aspect-ratio': !! style?.dimensions?.aspectRatio,\n\t} );\n\n\t// Allow dimensions-based inline style overrides to override any global styles rules that\n\t// might be set for the block, and therefore affect the display of the aspect ratio.\n\tconst inlineStyleOverrides = {};\n\n\t// Apply rules to unset incompatible styles.\n\t// Note that a set `aspectRatio` will win out if both an aspect ratio and a minHeight are set.\n\t// This is because the aspect ratio is a newer block support, so (in theory) any aspect ratio\n\t// that is set should be intentional and should override any existing minHeight. The Cover block\n\t// and dimensions controls have logic that will manually clear the aspect ratio if a minHeight\n\t// is set.\n\tif ( style?.dimensions?.aspectRatio ) {\n\t\t// To ensure the aspect ratio does not get overridden by `minHeight` unset any existing rule.\n\t\tinlineStyleOverrides.minHeight = 'unset';\n\t} else if ( minHeight || style?.dimensions?.minHeight ) {\n\t\t// To ensure the minHeight does not get overridden by `aspectRatio` unset any existing rule.\n\t\tinlineStyleOverrides.aspectRatio = 'unset';\n\t}\n\n\treturn { className, style: inlineStyleOverrides };\n}\n\n/**\n * @deprecated\n */\nexport function useCustomSides() {\n\tdeprecated( 'wp.blockEditor.__experimentalUseCustomSides', {\n\t\tsince: '6.3',\n\t\tversion: '6.4',\n\t} );\n}\n","/**\n * WordPress dependencies\n */\nimport { useMemo } from '@wordpress/element';\nimport { addFilter } from '@wordpress/hooks';\nimport {\n\tgetBlockSupport,\n\thasBlockSupport,\n\t__EXPERIMENTAL_ELEMENTS as ELEMENTS,\n} from '@wordpress/blocks';\nimport { useInstanceId } from '@wordpress/compose';\nimport { getCSSRules, compileCSS } from '@wordpress/style-engine';\n\n/**\n * Internal dependencies\n */\nimport { BACKGROUND_SUPPORT_KEY, BackgroundImagePanel } from './background';\nimport { BORDER_SUPPORT_KEY, BorderPanel, SHADOW_SUPPORT_KEY } from './border';\nimport { COLOR_SUPPORT_KEY, ColorEdit } from './color';\nimport {\n\tTypographyPanel,\n\tTYPOGRAPHY_SUPPORT_KEY,\n\tTYPOGRAPHY_SUPPORT_KEYS,\n} from './typography';\nimport {\n\tDIMENSIONS_SUPPORT_KEY,\n\tSPACING_SUPPORT_KEY,\n\tDimensionsPanel,\n} from './dimensions';\nimport {\n\tshouldSkipSerialization,\n\tuseStyleOverride,\n\tuseBlockSettings,\n} from './utils';\nimport { scopeSelector } from '../components/global-styles/utils';\nimport { useBlockEditingMode } from '../components/block-editing-mode';\n\nconst styleSupportKeys = [\n\t...TYPOGRAPHY_SUPPORT_KEYS,\n\tBORDER_SUPPORT_KEY,\n\tCOLOR_SUPPORT_KEY,\n\tDIMENSIONS_SUPPORT_KEY,\n\tBACKGROUND_SUPPORT_KEY,\n\tSPACING_SUPPORT_KEY,\n\tSHADOW_SUPPORT_KEY,\n];\n\nconst hasStyleSupport = ( nameOrType ) =>\n\tstyleSupportKeys.some( ( key ) => hasBlockSupport( nameOrType, key ) );\n\n/**\n * Returns the inline styles to add depending on the style object\n *\n * @param {Object} styles Styles configuration.\n *\n * @return {Object} Flattened CSS variables declaration.\n */\nexport function getInlineStyles( styles = {} ) {\n\tconst output = {};\n\t// The goal is to move everything to server side generated engine styles\n\t// This is temporary as we absorb more and more styles into the engine.\n\tgetCSSRules( styles ).forEach( ( rule ) => {\n\t\toutput[ rule.key ] = rule.value;\n\t} );\n\n\treturn output;\n}\n\n/**\n * Filters registered block settings, extending attributes to include `style` attribute.\n *\n * @param {Object} settings Original block settings.\n *\n * @return {Object} Filtered block settings.\n */\nfunction addAttribute( settings ) {\n\tif ( ! hasStyleSupport( settings ) ) {\n\t\treturn settings;\n\t}\n\n\t// Allow blocks to specify their own attribute definition with default values if needed.\n\tif ( ! settings.attributes.style ) {\n\t\tObject.assign( settings.attributes, {\n\t\t\tstyle: {\n\t\t\t\ttype: 'object',\n\t\t\t},\n\t\t} );\n\t}\n\n\treturn settings;\n}\n\n/**\n * A dictionary of paths to flag skipping block support serialization as the key,\n * with values providing the style paths to be omitted from serialization.\n *\n * @constant\n * @type {Record<string, string[]>}\n */\nconst skipSerializationPathsEdit = {\n\t[ `${ BORDER_SUPPORT_KEY }.__experimentalSkipSerialization` ]: [ 'border' ],\n\t[ `${ COLOR_SUPPORT_KEY }.__experimentalSkipSerialization` ]: [\n\t\tCOLOR_SUPPORT_KEY,\n\t],\n\t[ `${ TYPOGRAPHY_SUPPORT_KEY }.__experimentalSkipSerialization` ]: [\n\t\tTYPOGRAPHY_SUPPORT_KEY,\n\t],\n\t[ `${ DIMENSIONS_SUPPORT_KEY }.__experimentalSkipSerialization` ]: [\n\t\tDIMENSIONS_SUPPORT_KEY,\n\t],\n\t[ `${ SPACING_SUPPORT_KEY }.__experimentalSkipSerialization` ]: [\n\t\tSPACING_SUPPORT_KEY,\n\t],\n\t[ `${ SHADOW_SUPPORT_KEY }.__experimentalSkipSerialization` ]: [\n\t\tSHADOW_SUPPORT_KEY,\n\t],\n};\n\n/**\n * A dictionary of paths to flag skipping block support serialization as the key,\n * with values providing the style paths to be omitted from serialization.\n *\n * Extends the Edit skip paths to enable skipping additional paths in just\n * the Save component. This allows a block support to be serialized within the\n * editor, while using an alternate approach, such as server-side rendering, when\n * the support is saved.\n *\n * @constant\n * @type {Record<string, string[]>}\n */\nconst skipSerializationPathsSave = {\n\t...skipSerializationPathsEdit,\n\t[ `${ DIMENSIONS_SUPPORT_KEY }.aspectRatio` ]: [\n\t\t`${ DIMENSIONS_SUPPORT_KEY }.aspectRatio`,\n\t], // Skip serialization of aspect ratio in save mode.\n\t[ `${ BACKGROUND_SUPPORT_KEY }` ]: [ BACKGROUND_SUPPORT_KEY ], // Skip serialization of background support in save mode.\n};\n\nconst skipSerializationPathsSaveChecks = {\n\t[ `${ DIMENSIONS_SUPPORT_KEY }.aspectRatio` ]: true,\n\t[ `${ BACKGROUND_SUPPORT_KEY }` ]: true,\n};\n\n/**\n * A dictionary used to normalize feature names between support flags, style\n * object properties and __experimentSkipSerialization configuration arrays.\n *\n * This allows not having to provide a migration for a support flag and possible\n * backwards compatibility bridges, while still achieving consistency between\n * the support flag and the skip serialization array.\n *\n * @constant\n * @type {Record<string, string>}\n */\nconst renamedFeatures = { gradients: 'gradient' };\n\n/**\n * A utility function used to remove one or more paths from a style object.\n * Works in a way similar to Lodash's `omit()`. See unit tests and examples below.\n *\n * It supports a single string path:\n *\n * ```\n * omitStyle( { color: 'red' }, 'color' ); // {}\n * ```\n *\n * or an array of paths:\n *\n * ```\n * omitStyle( { color: 'red', background: '#fff' }, [ 'color', 'background' ] ); // {}\n * ```\n *\n * It also allows you to specify paths at multiple levels in a string.\n *\n * ```\n * omitStyle( { typography: { textDecoration: 'underline' } }, 'typography.textDecoration' ); // {}\n * ```\n *\n * You can remove multiple paths at the same time:\n *\n * ```\n * omitStyle(\n * \t\t{\n * \t\t\ttypography: {\n * \t\t\t\ttextDecoration: 'underline',\n * \t\t\t\ttextTransform: 'uppercase',\n * \t\t\t}\n *\t\t},\n *\t\t[\n * \t\t\t'typography.textDecoration',\n * \t\t\t'typography.textTransform',\n *\t\t]\n * );\n * // {}\n * ```\n *\n * You can also specify nested paths as arrays:\n *\n * ```\n * omitStyle(\n * \t\t{\n * \t\t\ttypography: {\n * \t\t\t\ttextDecoration: 'underline',\n * \t\t\t\ttextTransform: 'uppercase',\n * \t\t\t}\n *\t\t},\n *\t\t[\n * \t\t\t[ 'typography', 'textDecoration' ],\n * \t\t\t[ 'typography', 'textTransform' ],\n *\t\t]\n * );\n * // {}\n * ```\n *\n * With regards to nesting of styles, infinite depth is supported:\n *\n * ```\n * omitStyle(\n * \t\t{\n * \t\t\tborder: {\n * \t\t\t\tradius: {\n * \t\t\t\t\ttopLeft: '10px',\n * \t\t\t\t\ttopRight: '0.5rem',\n * \t\t\t\t}\n * \t\t\t}\n *\t\t},\n *\t\t[\n * \t\t\t[ 'border', 'radius', 'topRight' ],\n *\t\t]\n * );\n * // { border: { radius: { topLeft: '10px' } } }\n * ```\n *\n * The third argument, `preserveReference`, defines how to treat the input style object.\n * It is mostly necessary to properly handle mutation when recursively handling the style object.\n * Defaulting to `false`, this will always create a new object, avoiding to mutate `style`.\n * However, when recursing, we change that value to `true` in order to work with a single copy\n * of the original style object.\n *\n * @see https://lodash.com/docs/4.17.15#omit\n *\n * @param {Object}       style             Styles object.\n * @param {Array|string} paths             Paths to remove.\n * @param {boolean}      preserveReference True to mutate the `style` object, false otherwise.\n * @return {Object}      Styles object with the specified paths removed.\n */\nexport function omitStyle( style, paths, preserveReference = false ) {\n\tif ( ! style ) {\n\t\treturn style;\n\t}\n\n\tlet newStyle = style;\n\tif ( ! preserveReference ) {\n\t\tnewStyle = JSON.parse( JSON.stringify( style ) );\n\t}\n\n\tif ( ! Array.isArray( paths ) ) {\n\t\tpaths = [ paths ];\n\t}\n\n\tpaths.forEach( ( path ) => {\n\t\tif ( ! Array.isArray( path ) ) {\n\t\t\tpath = path.split( '.' );\n\t\t}\n\n\t\tif ( path.length > 1 ) {\n\t\t\tconst [ firstSubpath, ...restPath ] = path;\n\t\t\tomitStyle( newStyle[ firstSubpath ], [ restPath ], true );\n\t\t} else if ( path.length === 1 ) {\n\t\t\tdelete newStyle[ path[ 0 ] ];\n\t\t}\n\t} );\n\n\treturn newStyle;\n}\n\n/**\n * Override props assigned to save component to inject the CSS variables definition.\n *\n * @param {Object}                    props           Additional props applied to save element.\n * @param {Object|string}             blockNameOrType Block type.\n * @param {Object}                    attributes      Block attributes.\n * @param {?Record<string, string[]>} skipPaths       An object of keys and paths to skip serialization.\n *\n * @return {Object} Filtered props applied to save element.\n */\nexport function addSaveProps(\n\tprops,\n\tblockNameOrType,\n\tattributes,\n\tskipPaths = skipSerializationPathsSave\n) {\n\tif ( ! hasStyleSupport( blockNameOrType ) ) {\n\t\treturn props;\n\t}\n\n\tlet { style } = attributes;\n\tObject.entries( skipPaths ).forEach( ( [ indicator, path ] ) => {\n\t\tconst skipSerialization =\n\t\t\tskipSerializationPathsSaveChecks[ indicator ] ||\n\t\t\tgetBlockSupport( blockNameOrType, indicator );\n\n\t\tif ( skipSerialization === true ) {\n\t\t\tstyle = omitStyle( style, path );\n\t\t}\n\n\t\tif ( Array.isArray( skipSerialization ) ) {\n\t\t\tskipSerialization.forEach( ( featureName ) => {\n\t\t\t\tconst feature = renamedFeatures[ featureName ] || featureName;\n\t\t\t\tstyle = omitStyle( style, [ [ ...path, feature ] ] );\n\t\t\t} );\n\t\t}\n\t} );\n\n\tprops.style = {\n\t\t...getInlineStyles( style ),\n\t\t...props.style,\n\t};\n\n\treturn props;\n}\n\nfunction BlockStyleControls( {\n\tclientId,\n\tname,\n\tsetAttributes,\n\t__unstableParentLayout,\n} ) {\n\tconst settings = useBlockSettings( name, __unstableParentLayout );\n\tconst blockEditingMode = useBlockEditingMode();\n\tconst passedProps = {\n\t\tclientId,\n\t\tname,\n\t\tsetAttributes,\n\t\tsettings,\n\t};\n\tif ( blockEditingMode !== 'default' ) {\n\t\treturn null;\n\t}\n\treturn (\n\t\t<>\n\t\t\t<ColorEdit { ...passedProps } />\n\t\t\t<BackgroundImagePanel { ...passedProps } />\n\t\t\t<TypographyPanel { ...passedProps } />\n\t\t\t<BorderPanel { ...passedProps } />\n\t\t\t<DimensionsPanel { ...passedProps } />\n\t\t</>\n\t);\n}\n\nexport default {\n\tedit: BlockStyleControls,\n\thasSupport: hasStyleSupport,\n\taddSaveProps,\n\tattributeKeys: [ 'style' ],\n\tuseBlockProps,\n};\n\n// Defines which element types are supported, including their hover styles or\n// any other elements that have been included under a single element type\n// e.g. heading and h1-h6.\nconst elementTypes = [\n\t{ elementType: 'button' },\n\t{ elementType: 'link', pseudo: [ ':hover' ] },\n\t{\n\t\telementType: 'heading',\n\t\telements: [ 'h1', 'h2', 'h3', 'h4', 'h5', 'h6' ],\n\t},\n];\n\nfunction useBlockProps( { name, style } ) {\n\tconst blockElementsContainerIdentifier = `wp-elements-${ useInstanceId(\n\t\tuseBlockProps\n\t) }`;\n\n\t// The .editor-styles-wrapper selector is required on elements styles. As it is\n\t// added to all other editor styles, not providing it causes reset and global\n\t// styles to override element styles because of higher specificity.\n\tconst baseElementSelector = `.editor-styles-wrapper .${ blockElementsContainerIdentifier }`;\n\tconst blockElementStyles = style?.elements;\n\n\tconst styles = useMemo( () => {\n\t\tif ( ! blockElementStyles ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst elementCSSRules = [];\n\n\t\telementTypes.forEach( ( { elementType, pseudo, elements } ) => {\n\t\t\tconst skipSerialization = shouldSkipSerialization(\n\t\t\t\tname,\n\t\t\t\tCOLOR_SUPPORT_KEY,\n\t\t\t\telementType\n\t\t\t);\n\n\t\t\tif ( skipSerialization ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst elementStyles = blockElementStyles?.[ elementType ];\n\n\t\t\t// Process primary element type styles.\n\t\t\tif ( elementStyles ) {\n\t\t\t\tconst selector = scopeSelector(\n\t\t\t\t\tbaseElementSelector,\n\t\t\t\t\tELEMENTS[ elementType ]\n\t\t\t\t);\n\n\t\t\t\telementCSSRules.push(\n\t\t\t\t\tcompileCSS( elementStyles, { selector } )\n\t\t\t\t);\n\n\t\t\t\t// Process any interactive states for the element type.\n\t\t\t\tif ( pseudo ) {\n\t\t\t\t\tpseudo.forEach( ( pseudoSelector ) => {\n\t\t\t\t\t\tif ( elementStyles[ pseudoSelector ] ) {\n\t\t\t\t\t\t\telementCSSRules.push(\n\t\t\t\t\t\t\t\tcompileCSS( elementStyles[ pseudoSelector ], {\n\t\t\t\t\t\t\t\t\tselector: scopeSelector(\n\t\t\t\t\t\t\t\t\t\tbaseElementSelector,\n\t\t\t\t\t\t\t\t\t\t`${ ELEMENTS[ elementType ] }${ pseudoSelector }`\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Process related elements e.g. h1-h6 for headings\n\t\t\tif ( elements ) {\n\t\t\t\telements.forEach( ( element ) => {\n\t\t\t\t\tif ( blockElementStyles[ element ] ) {\n\t\t\t\t\t\telementCSSRules.push(\n\t\t\t\t\t\t\tcompileCSS( blockElementStyles[ element ], {\n\t\t\t\t\t\t\t\tselector: scopeSelector(\n\t\t\t\t\t\t\t\t\tbaseElementSelector,\n\t\t\t\t\t\t\t\t\tELEMENTS[ element ]\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\t\t} );\n\n\t\treturn elementCSSRules.length > 0\n\t\t\t? elementCSSRules.join( '' )\n\t\t\t: undefined;\n\t}, [ baseElementSelector, blockElementStyles, name ] );\n\n\tuseStyleOverride( { css: styles } );\n\n\treturn addSaveProps(\n\t\t{ className: blockElementsContainerIdentifier },\n\t\tname,\n\t\t{ style },\n\t\tskipSerializationPathsEdit\n\t);\n}\n\naddFilter(\n\t'blocks.registerBlockType',\n\t'core/style/addAttribute',\n\taddAttribute\n);\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { addFilter } from '@wordpress/hooks';\r\nimport { hasBlockSupport } from '@wordpress/blocks';\r\n\r\nconst hasSettingsSupport = ( blockType ) =>\r\n\thasBlockSupport( blockType, '__experimentalSettings', false );\r\n\r\nfunction addAttribute( settings ) {\r\n\tif ( ! hasSettingsSupport( settings ) ) {\r\n\t\treturn settings;\r\n\t}\r\n\r\n\t// Allow blocks to specify their own attribute definition with default values if needed.\r\n\tif ( ! settings?.attributes?.settings ) {\r\n\t\tsettings.attributes = {\r\n\t\t\t...settings.attributes,\r\n\t\t\tsettings: {\r\n\t\t\t\ttype: 'object',\r\n\t\t\t},\r\n\t\t};\r\n\t}\r\n\r\n\treturn settings;\r\n}\r\n\r\naddFilter(\r\n\t'blocks.registerBlockType',\r\n\t'core/settings/addAttribute',\r\n\taddAttribute\r\n);\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { Path, SVG } from '@wordpress/primitives';\r\n\r\nconst filter = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M12 4 4 19h16L12 4zm0 3.2 5.5 10.3H12V7.2z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default filter;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\tColorIndicator,\r\n\tDropdown,\r\n\tDuotonePicker,\r\n\tDuotoneSwatch,\r\n\tMenuGroup,\r\n\tToolbarButton,\r\n} from '@wordpress/components';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { DOWN } from '@wordpress/keycodes';\r\nimport { Icon, filter } from '@wordpress/icons';\r\nimport { useInstanceId } from '@wordpress/compose';\r\n\r\nfunction DuotoneControl( {\r\n\tid: idProp,\r\n\tcolorPalette,\r\n\tduotonePalette,\r\n\tdisableCustomColors,\r\n\tdisableCustomDuotone,\r\n\tvalue,\r\n\tonChange,\r\n} ) {\r\n\tlet toolbarIcon;\r\n\tif ( value === 'unset' ) {\r\n\t\ttoolbarIcon = (\r\n\t\t\t<ColorIndicator className=\"block-editor-duotone-control__unset-indicator\" />\r\n\t\t);\r\n\t} else if ( value ) {\r\n\t\ttoolbarIcon = <DuotoneSwatch values={ value } />;\r\n\t} else {\r\n\t\ttoolbarIcon = <Icon icon={ filter } />;\r\n\t}\r\n\r\n\tconst actionLabel = __( 'Apply duotone filter' );\r\n\tconst id = useInstanceId( DuotoneControl, 'duotone-control', idProp );\r\n\tconst descriptionId = `${ id }__description`;\r\n\r\n\treturn (\r\n\t\t<Dropdown\r\n\t\t\tpopoverProps={ {\r\n\t\t\t\tclassName: 'block-editor-duotone-control__popover',\r\n\t\t\t\theaderTitle: __( 'Duotone' ),\r\n\t\t\t} }\r\n\t\t\trenderToggle={ ( { isOpen, onToggle } ) => {\r\n\t\t\t\tconst openOnArrowDown = ( event ) => {\r\n\t\t\t\t\tif ( ! isOpen && event.keyCode === DOWN ) {\r\n\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\tonToggle();\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<ToolbarButton\r\n\t\t\t\t\t\tshowTooltip\r\n\t\t\t\t\t\tonClick={ onToggle }\r\n\t\t\t\t\t\taria-haspopup=\"true\"\r\n\t\t\t\t\t\taria-expanded={ isOpen }\r\n\t\t\t\t\t\tonKeyDown={ openOnArrowDown }\r\n\t\t\t\t\t\tlabel={ actionLabel }\r\n\t\t\t\t\t\ticon={ toolbarIcon }\r\n\t\t\t\t\t/>\r\n\t\t\t\t);\r\n\t\t\t} }\r\n\t\t\trenderContent={ () => (\r\n\t\t\t\t<MenuGroup label={ __( 'Duotone' ) }>\r\n\t\t\t\t\t<p>\r\n\t\t\t\t\t\t{ __(\r\n\t\t\t\t\t\t\t'Create a two-tone color effect without losing your original image.'\r\n\t\t\t\t\t\t) }\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t<DuotonePicker\r\n\t\t\t\t\t\taria-label={ actionLabel }\r\n\t\t\t\t\t\taria-describedby={ descriptionId }\r\n\t\t\t\t\t\tcolorPalette={ colorPalette }\r\n\t\t\t\t\t\tduotonePalette={ duotonePalette }\r\n\t\t\t\t\t\tdisableCustomColors={ disableCustomColors }\r\n\t\t\t\t\t\tdisableCustomDuotone={ disableCustomDuotone }\r\n\t\t\t\t\t\tvalue={ value }\r\n\t\t\t\t\t\tonChange={ onChange }\r\n\t\t\t\t\t/>\r\n\t\t\t\t</MenuGroup>\r\n\t\t\t) }\r\n\t\t/>\r\n\t);\r\n}\r\n\r\nexport default DuotoneControl;\r\n","/**\r\n * External dependencies\r\n */\r\nimport { colord } from 'colord';\r\n\r\n/**\r\n * Convert a list of colors to an object of R, G, and B values.\r\n *\r\n * @param {string[]} colors Array of RBG color strings.\r\n *\r\n * @return {Object} R, G, and B values.\r\n */\r\nexport function getValuesFromColors( colors = [] ) {\r\n\tconst values = { r: [], g: [], b: [], a: [] };\r\n\r\n\tcolors.forEach( ( color ) => {\r\n\t\tconst rgbColor = colord( color ).toRgb();\r\n\t\tvalues.r.push( rgbColor.r / 255 );\r\n\t\tvalues.g.push( rgbColor.g / 255 );\r\n\t\tvalues.b.push( rgbColor.b / 255 );\r\n\t\tvalues.a.push( rgbColor.a );\r\n\t} );\r\n\r\n\treturn values;\r\n}\r\n\r\n/**\r\n * Stylesheet for disabling a global styles duotone filter.\r\n *\r\n * @param {string} selector Selector to disable the filter for.\r\n *\r\n * @return {string} Filter none style.\r\n */\r\nexport function getDuotoneUnsetStylesheet( selector ) {\r\n\treturn `${ selector }{filter:none}`;\r\n}\r\n\r\n/**\r\n * SVG and stylesheet needed for rendering the duotone filter.\r\n *\r\n * @param {string} selector Selector to apply the filter to.\r\n * @param {string} id       Unique id for this duotone filter.\r\n *\r\n * @return {string} Duotone filter style.\r\n */\r\nexport function getDuotoneStylesheet( selector, id ) {\r\n\treturn `${ selector }{filter:url(#${ id })}`;\r\n}\r\n\r\n/**\r\n * The SVG part of the duotone filter.\r\n *\r\n * @param {string}   id     Unique id for this duotone filter.\r\n * @param {string[]} colors Color strings from dark to light.\r\n *\r\n * @return {string} Duotone SVG.\r\n */\r\nexport function getDuotoneFilter( id, colors ) {\r\n\tconst values = getValuesFromColors( colors );\r\n\treturn `\r\n<svg\r\n\txmlns:xlink=\"http://www.w3.org/1999/xlink\"\r\n\tviewBox=\"0 0 0 0\"\r\n\twidth=\"0\"\r\n\theight=\"0\"\r\n\tfocusable=\"false\"\r\n\trole=\"none\"\r\n\taria-hidden=\"true\"\r\n\tstyle=\"visibility: hidden; position: absolute; left: -9999px; overflow: hidden;\"\r\n>\r\n\t<defs>\r\n\t\t<filter id=\"${ id }\">\r\n\t\t\t<!--\r\n\t\t\t\tUse sRGB instead of linearRGB so transparency looks correct.\r\n\t\t\t\tUse perceptual brightness to convert to grayscale.\r\n\t\t\t-->\r\n\t\t\t<feColorMatrix color-interpolation-filters=\"sRGB\" type=\"matrix\" values=\" .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 .299 .587 .114 0 0 \"></feColorMatrix>\r\n\t\t\t<!-- Use sRGB instead of linearRGB to be consistent with how CSS gradients work. -->\r\n\t\t\t<feComponentTransfer color-interpolation-filters=\"sRGB\">\r\n\t\t\t\t<feFuncR type=\"table\" tableValues=\"${ values.r.join( ' ' ) }\"></feFuncR>\r\n\t\t\t\t<feFuncG type=\"table\" tableValues=\"${ values.g.join( ' ' ) }\"></feFuncG>\r\n\t\t\t\t<feFuncB type=\"table\" tableValues=\"${ values.b.join( ' ' ) }\"></feFuncB>\r\n\t\t\t\t<feFuncA type=\"table\" tableValues=\"${ values.a.join( ' ' ) }\"></feFuncA>\r\n\t\t\t</feComponentTransfer>\r\n\t\t\t<!-- Re-mask the image with the original transparency since the feColorMatrix above loses that information. -->\r\n\t\t\t<feComposite in2=\"SourceGraphic\" operator=\"in\"></feComposite>\r\n\t\t</filter>\r\n\t</defs>\r\n</svg>`;\r\n}\r\n","/**\r\n * Internal dependencies\r\n */\r\nimport { scopeSelector } from './utils';\r\nimport { getValueFromObjectPath } from '../../utils/object';\r\n\r\n/**\r\n * Determine the CSS selector for the block type and target provided, returning\r\n * it if available.\r\n *\r\n * @param {import('@wordpress/blocks').Block} blockType        The block's type.\r\n * @param {string|string[]}                   target           The desired selector's target e.g. `root`, delimited string, or array path.\r\n * @param {Object}                            options          Options object.\r\n * @param {boolean}                           options.fallback Whether or not to fallback to broader selector.\r\n *\r\n * @return {?string} The CSS selector or `null` if no selector available.\r\n */\r\nexport function getBlockCSSSelector(\r\n\tblockType,\r\n\ttarget = 'root',\r\n\toptions = {}\r\n) {\r\n\tif ( ! target ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tconst { fallback = false } = options;\r\n\tconst { name, selectors, supports } = blockType;\r\n\r\n\tconst hasSelectors = selectors && Object.keys( selectors ).length > 0;\r\n\tconst path = Array.isArray( target ) ? target.join( '.' ) : target;\r\n\r\n\t// Root selector.\r\n\r\n\t// Calculated before returning as it can be used as a fallback for feature\r\n\t// selectors later on.\r\n\tlet rootSelector = null;\r\n\r\n\tif ( hasSelectors && selectors.root ) {\r\n\t\t// Use the selectors API if available.\r\n\t\trootSelector = selectors?.root;\r\n\t} else if ( supports?.__experimentalSelector ) {\r\n\t\t// Use the old experimental selector supports property if set.\r\n\t\trootSelector = supports.__experimentalSelector;\r\n\t} else {\r\n\t\t// If no root selector found, generate default block class selector.\r\n\t\trootSelector =\r\n\t\t\t'.wp-block-' + name.replace( 'core/', '' ).replace( '/', '-' );\r\n\t}\r\n\r\n\t// Return selector if it's the root target we are looking for.\r\n\tif ( path === 'root' ) {\r\n\t\treturn rootSelector;\r\n\t}\r\n\r\n\t// If target is not `root` or `duotone` we have a feature or subfeature\r\n\t// as the target. If the target is a string convert to an array.\r\n\tconst pathArray = Array.isArray( target ) ? target : target.split( '.' );\r\n\r\n\t// Feature selectors ( may fallback to root selector );\r\n\tif ( pathArray.length === 1 ) {\r\n\t\tconst fallbackSelector = fallback ? rootSelector : null;\r\n\r\n\t\t// Prefer the selectors API if available.\r\n\t\tif ( hasSelectors ) {\r\n\t\t\t// Get selector from either `feature.root` or shorthand path.\r\n\t\t\tconst featureSelector =\r\n\t\t\t\tgetValueFromObjectPath( selectors, `${ path }.root`, null ) ||\r\n\t\t\t\tgetValueFromObjectPath( selectors, path, null );\r\n\r\n\t\t\t// Return feature selector if found or any available fallback.\r\n\t\t\treturn featureSelector || fallbackSelector;\r\n\t\t}\r\n\r\n\t\t// Try getting old experimental supports selector value.\r\n\t\tconst featureSelector = getValueFromObjectPath(\r\n\t\t\tsupports,\r\n\t\t\t`${ path }.__experimentalSelector`,\r\n\t\t\tnull\r\n\t\t);\r\n\r\n\t\t// If nothing to work with, provide fallback selector if available.\r\n\t\tif ( ! featureSelector ) {\r\n\t\t\treturn fallbackSelector;\r\n\t\t}\r\n\r\n\t\t// Scope the feature selector by the block's root selector.\r\n\t\treturn scopeSelector( rootSelector, featureSelector );\r\n\t}\r\n\r\n\t// Subfeature selector.\r\n\t// This may fallback either to parent feature or root selector.\r\n\tlet subfeatureSelector;\r\n\r\n\t// Use selectors API if available.\r\n\tif ( hasSelectors ) {\r\n\t\tsubfeatureSelector = getValueFromObjectPath( selectors, path, null );\r\n\t}\r\n\r\n\t// Only return if we have a subfeature selector.\r\n\tif ( subfeatureSelector ) {\r\n\t\treturn subfeatureSelector;\r\n\t}\r\n\r\n\t// To this point we don't have a subfeature selector. If a fallback has been\r\n\t// requested, remove subfeature from target path and return results of a\r\n\t// call for the parent feature's selector.\r\n\tif ( fallback ) {\r\n\t\treturn getBlockCSSSelector( blockType, pathArray[ 0 ], options );\r\n\t}\r\n\r\n\t// We tried.\r\n\treturn null;\r\n}\r\n","/**\r\n * External dependencies\r\n */\r\nimport classnames from 'classnames';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\t__experimentalToolsPanel as ToolsPanel,\r\n\t__experimentalToolsPanelItem as ToolsPanelItem,\r\n\t__experimentalItemGroup as ItemGroup,\r\n\t__experimentalHStack as HStack,\r\n\t__experimentalZStack as ZStack,\r\n\t__experimentalDropdownContentWrapper as DropdownContentWrapper,\r\n\tButton,\r\n\tMenuGroup,\r\n\tColorIndicator,\r\n\tDuotonePicker,\r\n\tDuotoneSwatch,\r\n\tDropdown,\r\n\tFlex,\r\n\tFlexItem,\r\n} from '@wordpress/components';\r\nimport { __, _x } from '@wordpress/i18n';\r\nimport { useCallback, useMemo } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { getValueFromVariable, TOOLSPANEL_DROPDOWNMENU_PROPS } from './utils';\r\nimport { setImmutably } from '../../utils/object';\r\n\r\nconst EMPTY_ARRAY = [];\r\nfunction useMultiOriginColorPresets(\r\n\tsettings,\r\n\t{ presetSetting, defaultSetting }\r\n) {\r\n\tconst disableDefault = ! settings?.color?.[ defaultSetting ];\r\n\tconst userPresets =\r\n\t\tsettings?.color?.[ presetSetting ]?.custom || EMPTY_ARRAY;\r\n\tconst themePresets =\r\n\t\tsettings?.color?.[ presetSetting ]?.theme || EMPTY_ARRAY;\r\n\tconst defaultPresets =\r\n\t\tsettings?.color?.[ presetSetting ]?.default || EMPTY_ARRAY;\r\n\treturn useMemo(\r\n\t\t() => [\r\n\t\t\t...userPresets,\r\n\t\t\t...themePresets,\r\n\t\t\t...( disableDefault ? EMPTY_ARRAY : defaultPresets ),\r\n\t\t],\r\n\t\t[ disableDefault, userPresets, themePresets, defaultPresets ]\r\n\t);\r\n}\r\n\r\nexport function useHasFiltersPanel( settings ) {\r\n\treturn useHasDuotoneControl( settings );\r\n}\r\n\r\nfunction useHasDuotoneControl( settings ) {\r\n\treturn (\r\n\t\tsettings.color.customDuotone ||\r\n\t\tsettings.color.defaultDuotone ||\r\n\t\tsettings.color.duotone.length > 0\r\n\t);\r\n}\r\n\r\nfunction FiltersToolsPanel( {\r\n\tresetAllFilter,\r\n\tonChange,\r\n\tvalue,\r\n\tpanelId,\r\n\tchildren,\r\n} ) {\r\n\tconst resetAll = () => {\r\n\t\tconst updatedValue = resetAllFilter( value );\r\n\t\tonChange( updatedValue );\r\n\t};\r\n\r\n\treturn (\r\n\t\t<ToolsPanel\r\n\t\t\tlabel={ _x( 'Filters', 'Name for applying graphical effects' ) }\r\n\t\t\tresetAll={ resetAll }\r\n\t\t\tpanelId={ panelId }\r\n\t\t\tdropdownMenuProps={ TOOLSPANEL_DROPDOWNMENU_PROPS }\r\n\t\t>\r\n\t\t\t{ children }\r\n\t\t</ToolsPanel>\r\n\t);\r\n}\r\n\r\nconst DEFAULT_CONTROLS = {\r\n\tduotone: true,\r\n};\r\n\r\nconst popoverProps = {\r\n\tplacement: 'left-start',\r\n\toffset: 36,\r\n\tshift: true,\r\n\tclassName: 'block-editor-duotone-control__popover',\r\n\theaderTitle: __( 'Duotone' ),\r\n};\r\n\r\nconst LabeledColorIndicator = ( { indicator, label } ) => (\r\n\t<HStack justify=\"flex-start\">\r\n\t\t<ZStack isLayered={ false } offset={ -8 }>\r\n\t\t\t<Flex expanded={ false }>\r\n\t\t\t\t{ indicator === 'unset' || ! indicator ? (\r\n\t\t\t\t\t<ColorIndicator className=\"block-editor-duotone-control__unset-indicator\" />\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<DuotoneSwatch values={ indicator } />\r\n\t\t\t\t) }\r\n\t\t\t</Flex>\r\n\t\t</ZStack>\r\n\t\t<FlexItem title={ label }>{ label }</FlexItem>\r\n\t</HStack>\r\n);\r\n\r\nexport default function FiltersPanel( {\r\n\tas: Wrapper = FiltersToolsPanel,\r\n\tvalue,\r\n\tonChange,\r\n\tinheritedValue = value,\r\n\tsettings,\r\n\tpanelId,\r\n\tdefaultControls = DEFAULT_CONTROLS,\r\n} ) {\r\n\tconst decodeValue = ( rawValue ) =>\r\n\t\tgetValueFromVariable( { settings }, '', rawValue );\r\n\r\n\t// Duotone\r\n\tconst hasDuotoneEnabled = useHasDuotoneControl( settings );\r\n\tconst duotonePalette = useMultiOriginColorPresets( settings, {\r\n\t\tpresetSetting: 'duotone',\r\n\t\tdefaultSetting: 'defaultDuotone',\r\n\t} );\r\n\tconst colorPalette = useMultiOriginColorPresets( settings, {\r\n\t\tpresetSetting: 'palette',\r\n\t\tdefaultSetting: 'defaultPalette',\r\n\t} );\r\n\tconst duotone = decodeValue( inheritedValue?.filter?.duotone );\r\n\tconst setDuotone = ( newValue ) => {\r\n\t\tconst duotonePreset = duotonePalette.find( ( { colors } ) => {\r\n\t\t\treturn colors === newValue;\r\n\t\t} );\r\n\t\tconst settedValue = duotonePreset\r\n\t\t\t? `var:preset|duotone|${ duotonePreset.slug }`\r\n\t\t\t: newValue;\r\n\t\tonChange( setImmutably( value, [ 'filter', 'duotone' ], settedValue ) );\r\n\t};\r\n\tconst hasDuotone = () => !! value?.filter?.duotone;\r\n\tconst resetDuotone = () => setDuotone( undefined );\r\n\r\n\tconst resetAllFilter = useCallback( ( previousValue ) => {\r\n\t\treturn {\r\n\t\t\t...previousValue,\r\n\t\t\tfilter: {\r\n\t\t\t\t...previousValue.filter,\r\n\t\t\t\tduotone: undefined,\r\n\t\t\t},\r\n\t\t};\r\n\t}, [] );\r\n\r\n\treturn (\r\n\t\t<Wrapper\r\n\t\t\tresetAllFilter={ resetAllFilter }\r\n\t\t\tvalue={ value }\r\n\t\t\tonChange={ onChange }\r\n\t\t\tpanelId={ panelId }\r\n\t\t>\r\n\t\t\t{ hasDuotoneEnabled && (\r\n\t\t\t\t<ToolsPanelItem\r\n\t\t\t\t\tlabel={ __( 'Duotone' ) }\r\n\t\t\t\t\thasValue={ hasDuotone }\r\n\t\t\t\t\tonDeselect={ resetDuotone }\r\n\t\t\t\t\tisShownByDefault={ defaultControls.duotone }\r\n\t\t\t\t\tpanelId={ panelId }\r\n\t\t\t\t>\r\n\t\t\t\t\t<Dropdown\r\n\t\t\t\t\t\tpopoverProps={ popoverProps }\r\n\t\t\t\t\t\tclassName=\"block-editor-global-styles-filters-panel__dropdown\"\r\n\t\t\t\t\t\trenderToggle={ ( { onToggle, isOpen } ) => {\r\n\t\t\t\t\t\t\tconst toggleProps = {\r\n\t\t\t\t\t\t\t\tonClick: onToggle,\r\n\t\t\t\t\t\t\t\tclassName: classnames( { 'is-open': isOpen } ),\r\n\t\t\t\t\t\t\t\t'aria-expanded': isOpen,\r\n\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<ItemGroup isBordered isSeparated>\r\n\t\t\t\t\t\t\t\t\t<Button { ...toggleProps }>\r\n\t\t\t\t\t\t\t\t\t\t<LabeledColorIndicator\r\n\t\t\t\t\t\t\t\t\t\t\tindicator={ duotone }\r\n\t\t\t\t\t\t\t\t\t\t\tlabel={ __( 'Duotone' ) }\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t</ItemGroup>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t} }\r\n\t\t\t\t\t\trenderContent={ () => (\r\n\t\t\t\t\t\t\t<DropdownContentWrapper paddingSize=\"small\">\r\n\t\t\t\t\t\t\t\t<MenuGroup label={ __( 'Duotone' ) }>\r\n\t\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\t\t{ __(\r\n\t\t\t\t\t\t\t\t\t\t\t'Create a two-tone color effect without losing your original image.'\r\n\t\t\t\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t<DuotonePicker\r\n\t\t\t\t\t\t\t\t\t\tcolorPalette={ colorPalette }\r\n\t\t\t\t\t\t\t\t\t\tduotonePalette={ duotonePalette }\r\n\t\t\t\t\t\t\t\t\t\t// TODO: Re-enable both when custom colors are supported for block-level styles.\r\n\t\t\t\t\t\t\t\t\t\tdisableCustomColors\r\n\t\t\t\t\t\t\t\t\t\tdisableCustomDuotone\r\n\t\t\t\t\t\t\t\t\t\tvalue={ duotone }\r\n\t\t\t\t\t\t\t\t\t\tonChange={ setDuotone }\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</MenuGroup>\r\n\t\t\t\t\t\t\t</DropdownContentWrapper>\r\n\t\t\t\t\t\t) }\r\n\t\t\t\t\t/>\r\n\t\t\t\t</ToolsPanelItem>\r\n\t\t\t) }\r\n\t\t</Wrapper>\r\n\t);\r\n}\r\n","/**\r\n * External dependencies\r\n */\r\nimport { extend } from 'colord';\r\nimport namesPlugin from 'colord/plugins/names';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\tgetBlockSupport,\r\n\tgetBlockType,\r\n\thasBlockSupport,\r\n} from '@wordpress/blocks';\r\nimport { useInstanceId } from '@wordpress/compose';\r\nimport { addFilter } from '@wordpress/hooks';\r\nimport { useMemo, useEffect } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport {\r\n\tBlockControls,\r\n\tInspectorControls,\r\n\t__experimentalDuotoneControl as DuotoneControl,\r\n\tuseSettings,\r\n} from '../components';\r\nimport {\r\n\tgetDuotoneFilter,\r\n\tgetDuotoneStylesheet,\r\n\tgetDuotoneUnsetStylesheet,\r\n} from '../components/duotone/utils';\r\nimport { getBlockCSSSelector } from '../components/global-styles/get-block-css-selector';\r\nimport { scopeSelector } from '../components/global-styles/utils';\r\nimport { useBlockSettings, useStyleOverride } from './utils';\r\nimport { default as StylesFiltersPanel } from '../components/global-styles/filters-panel';\r\nimport { useBlockEditingMode } from '../components/block-editing-mode';\r\nimport { __unstableUseBlockElement as useBlockElement } from '../components/block-list/use-block-props/use-block-refs';\r\n\r\nconst EMPTY_ARRAY = [];\r\n\r\n// Safari does not always update the duotone filter when the duotone colors\r\n// are changed. This browser check is later used to force a re-render of the block\r\n// element to ensure the duotone filter is updated. The check is included at the\r\n// root of this file as it only needs to be run once per page load.\r\nconst isSafari =\r\n\twindow?.navigator.userAgent &&\r\n\twindow.navigator.userAgent.includes( 'Safari' ) &&\r\n\t! window.navigator.userAgent.includes( 'Chrome' ) &&\r\n\t! window.navigator.userAgent.includes( 'Chromium' );\r\n\r\nextend( [ namesPlugin ] );\r\n\r\nfunction useMultiOriginPresets( { presetSetting, defaultSetting } ) {\r\n\tconst [ enableDefault, userPresets, themePresets, defaultPresets ] =\r\n\t\tuseSettings(\r\n\t\t\tdefaultSetting,\r\n\t\t\t`${ presetSetting }.custom`,\r\n\t\t\t`${ presetSetting }.theme`,\r\n\t\t\t`${ presetSetting }.default`\r\n\t\t);\r\n\treturn useMemo(\r\n\t\t() => [\r\n\t\t\t...( userPresets || EMPTY_ARRAY ),\r\n\t\t\t...( themePresets || EMPTY_ARRAY ),\r\n\t\t\t...( ( enableDefault && defaultPresets ) || EMPTY_ARRAY ),\r\n\t\t],\r\n\t\t[ enableDefault, userPresets, themePresets, defaultPresets ]\r\n\t);\r\n}\r\n\r\nexport function getColorsFromDuotonePreset( duotone, duotonePalette ) {\r\n\tif ( ! duotone ) {\r\n\t\treturn;\r\n\t}\r\n\tconst preset = duotonePalette?.find( ( { slug } ) => {\r\n\t\treturn duotone === `var:preset|duotone|${ slug }`;\r\n\t} );\r\n\r\n\treturn preset ? preset.colors : undefined;\r\n}\r\n\r\nexport function getDuotonePresetFromColors( colors, duotonePalette ) {\r\n\tif ( ! colors || ! Array.isArray( colors ) ) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tconst preset = duotonePalette?.find( ( duotonePreset ) => {\r\n\t\treturn duotonePreset?.colors?.every(\r\n\t\t\t( val, index ) => val === colors[ index ]\r\n\t\t);\r\n\t} );\r\n\r\n\treturn preset ? `var:preset|duotone|${ preset.slug }` : undefined;\r\n}\r\n\r\nfunction DuotonePanelPure( { style, setAttributes, name } ) {\r\n\tconst duotoneStyle = style?.color?.duotone;\r\n\tconst settings = useBlockSettings( name );\r\n\tconst blockEditingMode = useBlockEditingMode();\r\n\r\n\tconst duotonePalette = useMultiOriginPresets( {\r\n\t\tpresetSetting: 'color.duotone',\r\n\t\tdefaultSetting: 'color.defaultDuotone',\r\n\t} );\r\n\tconst colorPalette = useMultiOriginPresets( {\r\n\t\tpresetSetting: 'color.palette',\r\n\t\tdefaultSetting: 'color.defaultPalette',\r\n\t} );\r\n\tconst [ enableCustomColors, enableCustomDuotone ] = useSettings(\r\n\t\t'color.custom',\r\n\t\t'color.customDuotone'\r\n\t);\r\n\tconst disableCustomColors = ! enableCustomColors;\r\n\tconst disableCustomDuotone =\r\n\t\t! enableCustomDuotone ||\r\n\t\t( colorPalette?.length === 0 && disableCustomColors );\r\n\r\n\tif ( duotonePalette?.length === 0 && disableCustomDuotone ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tif ( blockEditingMode !== 'default' ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tconst duotonePresetOrColors = ! Array.isArray( duotoneStyle )\r\n\t\t? getColorsFromDuotonePreset( duotoneStyle, duotonePalette )\r\n\t\t: duotoneStyle;\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<InspectorControls group=\"filter\">\r\n\t\t\t\t<StylesFiltersPanel\r\n\t\t\t\t\tvalue={ { filter: { duotone: duotonePresetOrColors } } }\r\n\t\t\t\t\tonChange={ ( newDuotone ) => {\r\n\t\t\t\t\t\tconst newStyle = {\r\n\t\t\t\t\t\t\t...style,\r\n\t\t\t\t\t\t\tcolor: {\r\n\t\t\t\t\t\t\t\t...newDuotone?.filter,\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tsetAttributes( { style: newStyle } );\r\n\t\t\t\t\t} }\r\n\t\t\t\t\tsettings={ settings }\r\n\t\t\t\t/>\r\n\t\t\t</InspectorControls>\r\n\t\t\t<BlockControls group=\"block\" __experimentalShareWithChildBlocks>\r\n\t\t\t\t<DuotoneControl\r\n\t\t\t\t\tduotonePalette={ duotonePalette }\r\n\t\t\t\t\tcolorPalette={ colorPalette }\r\n\t\t\t\t\tdisableCustomDuotone={ disableCustomDuotone }\r\n\t\t\t\t\tdisableCustomColors={ disableCustomColors }\r\n\t\t\t\t\tvalue={ duotonePresetOrColors }\r\n\t\t\t\t\tonChange={ ( newDuotone ) => {\r\n\t\t\t\t\t\tconst maybePreset = getDuotonePresetFromColors(\r\n\t\t\t\t\t\t\tnewDuotone,\r\n\t\t\t\t\t\t\tduotonePalette\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tconst newStyle = {\r\n\t\t\t\t\t\t\t...style,\r\n\t\t\t\t\t\t\tcolor: {\r\n\t\t\t\t\t\t\t\t...style?.color,\r\n\t\t\t\t\t\t\t\tduotone: maybePreset ?? newDuotone, // use preset or fallback to custom colors.\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tsetAttributes( { style: newStyle } );\r\n\t\t\t\t\t} }\r\n\t\t\t\t\tsettings={ settings }\r\n\t\t\t\t/>\r\n\t\t\t</BlockControls>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default {\r\n\tshareWithChildBlocks: true,\r\n\tedit: DuotonePanelPure,\r\n\tuseBlockProps,\r\n\tattributeKeys: [ 'style' ],\r\n\thasSupport( name ) {\r\n\t\treturn hasBlockSupport( name, 'filter.duotone' );\r\n\t},\r\n};\r\n\r\n/**\r\n * Filters registered block settings, extending attributes to include\r\n * the `duotone` attribute.\r\n *\r\n * @param {Object} settings Original block settings.\r\n *\r\n * @return {Object} Filtered block settings.\r\n */\r\nfunction addDuotoneAttributes( settings ) {\r\n\t// Previous `color.__experimentalDuotone` support flag is migrated via\r\n\t// block_type_metadata_settings filter in `lib/block-supports/duotone.php`.\r\n\tif ( ! hasBlockSupport( settings, 'filter.duotone' ) ) {\r\n\t\treturn settings;\r\n\t}\r\n\r\n\t// Allow blocks to specify their own attribute definition with default\r\n\t// values if needed.\r\n\tif ( ! settings.attributes.style ) {\r\n\t\tObject.assign( settings.attributes, {\r\n\t\t\tstyle: {\r\n\t\t\t\ttype: 'object',\r\n\t\t\t},\r\n\t\t} );\r\n\t}\r\n\r\n\treturn settings;\r\n}\r\n\r\nfunction useDuotoneStyles( {\r\n\tclientId,\r\n\tid: filterId,\r\n\tselector: duotoneSelector,\r\n\tattribute: duotoneAttr,\r\n} ) {\r\n\tconst duotonePalette = useMultiOriginPresets( {\r\n\t\tpresetSetting: 'color.duotone',\r\n\t\tdefaultSetting: 'color.defaultDuotone',\r\n\t} );\r\n\r\n\t// Possible values for duotone attribute:\r\n\t// 1. Array of colors - e.g. ['#000000', '#ffffff'].\r\n\t// 2. Variable for an existing Duotone preset - e.g. 'var:preset|duotone|green-blue' or 'var(--wp--preset--duotone--green-blue)''\r\n\t// 3. A CSS string - e.g. 'unset' to remove globally applied duotone.\r\n\tconst isCustom = Array.isArray( duotoneAttr );\r\n\tconst duotonePreset = isCustom\r\n\t\t? undefined\r\n\t\t: getColorsFromDuotonePreset( duotoneAttr, duotonePalette );\r\n\tconst isPreset = typeof duotoneAttr === 'string' && duotonePreset;\r\n\tconst isCSS = typeof duotoneAttr === 'string' && ! isPreset;\r\n\r\n\t// Match the structure of WP_Duotone_Gutenberg::render_duotone_support() in PHP.\r\n\tlet colors = null;\r\n\tif ( isPreset ) {\r\n\t\t// Array of colors.\r\n\t\tcolors = duotonePreset;\r\n\t} else if ( isCSS ) {\r\n\t\t// CSS filter property string (e.g. 'unset').\r\n\t\tcolors = duotoneAttr;\r\n\t} else if ( isCustom ) {\r\n\t\t// Array of colors.\r\n\t\tcolors = duotoneAttr;\r\n\t}\r\n\r\n\t// Build the CSS selectors to which the filter will be applied.\r\n\tconst selectors = duotoneSelector.split( ',' );\r\n\r\n\tconst selectorsScoped = selectors.map( ( selectorPart ) => {\r\n\t\t// Extra .editor-styles-wrapper specificity is needed in the editor\r\n\t\t// since we're not using inline styles to apply the filter. We need to\r\n\t\t// override duotone applied by global styles and theme.json.\r\n\r\n\t\t// Assuming the selector part is a subclass selector (not a tag name)\r\n\t\t// so we can prepend the filter id class. If we want to support elements\r\n\t\t// such as `img` or namespaces, we'll need to add a case for that here.\r\n\t\treturn `.${ filterId }${ selectorPart.trim() }`;\r\n\t} );\r\n\r\n\tconst selector = selectorsScoped.join( ', ' );\r\n\r\n\tconst isValidFilter = Array.isArray( colors ) || colors === 'unset';\r\n\r\n\tuseStyleOverride(\r\n\t\tisValidFilter\r\n\t\t\t? {\r\n\t\t\t\t\tcss:\r\n\t\t\t\t\t\tcolors !== 'unset'\r\n\t\t\t\t\t\t\t? getDuotoneStylesheet( selector, filterId )\r\n\t\t\t\t\t\t\t: getDuotoneUnsetStylesheet( selector ),\r\n\t\t\t\t\t__unstableType: 'presets',\r\n\t\t\t  }\r\n\t\t\t: undefined\r\n\t);\r\n\tuseStyleOverride(\r\n\t\tisValidFilter\r\n\t\t\t? {\r\n\t\t\t\t\tassets:\r\n\t\t\t\t\t\tcolors !== 'unset'\r\n\t\t\t\t\t\t\t? getDuotoneFilter( filterId, colors )\r\n\t\t\t\t\t\t\t: '',\r\n\t\t\t\t\t__unstableType: 'svgs',\r\n\t\t\t  }\r\n\t\t\t: undefined\r\n\t);\r\n\r\n\tconst blockElement = useBlockElement( clientId );\r\n\r\n\tuseEffect( () => {\r\n\t\tif ( ! isValidFilter ) return;\r\n\r\n\t\t// Safari does not always update the duotone filter when the duotone colors\r\n\t\t// are changed. When using Safari, force the block element to be repainted by\r\n\t\t// the browser to ensure any changes are reflected visually. This logic matches\r\n\t\t// that used on the site frontend in `block-supports/duotone.php`.\r\n\t\tif ( blockElement && isSafari ) {\r\n\t\t\tconst display = blockElement.style.display;\r\n\t\t\t// Switch to `inline-block` to force a repaint. In the editor, `inline-block`\r\n\t\t\t// is used instead of `none` to ensure that scroll position is not affected,\r\n\t\t\t// as `none` results in the editor scrolling to the top of the block.\r\n\t\t\tblockElement.style.display = 'inline-block';\r\n\t\t\t// Simply accessing el.offsetHeight flushes layout and style\r\n\t\t\t// changes in WebKit without having to wait for setTimeout.\r\n\t\t\t// eslint-disable-next-line no-unused-expressions\r\n\t\t\tblockElement.offsetHeight;\r\n\t\t\tblockElement.style.display = display;\r\n\t\t}\r\n\t}, [ isValidFilter, blockElement ] );\r\n}\r\n\r\nfunction useBlockProps( { name, style } ) {\r\n\tconst id = useInstanceId( useBlockProps );\r\n\tconst selector = useMemo( () => {\r\n\t\tconst blockType = getBlockType( name );\r\n\r\n\t\tif ( blockType ) {\r\n\t\t\t// Backwards compatibility for `supports.color.__experimentalDuotone`\r\n\t\t\t// is provided via the `block_type_metadata_settings` filter. If\r\n\t\t\t// `supports.filter.duotone` has not been set and the\r\n\t\t\t// experimental property has been, the experimental property\r\n\t\t\t// value is copied into `supports.filter.duotone`.\r\n\t\t\tconst duotoneSupport = getBlockSupport(\r\n\t\t\t\tblockType,\r\n\t\t\t\t'filter.duotone',\r\n\t\t\t\tfalse\r\n\t\t\t);\r\n\t\t\tif ( ! duotoneSupport ) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\r\n\t\t\t// If the experimental duotone support was set, that value is\r\n\t\t\t// to be treated as a selector and requires scoping.\r\n\t\t\tconst experimentalDuotone = getBlockSupport(\r\n\t\t\t\tblockType,\r\n\t\t\t\t'color.__experimentalDuotone',\r\n\t\t\t\tfalse\r\n\t\t\t);\r\n\t\t\tif ( experimentalDuotone ) {\r\n\t\t\t\tconst rootSelector = getBlockCSSSelector( blockType );\r\n\t\t\t\treturn typeof experimentalDuotone === 'string'\r\n\t\t\t\t\t? scopeSelector( rootSelector, experimentalDuotone )\r\n\t\t\t\t\t: rootSelector;\r\n\t\t\t}\r\n\r\n\t\t\t// Regular filter.duotone support uses filter.duotone selectors with fallbacks.\r\n\t\t\treturn getBlockCSSSelector( blockType, 'filter.duotone', {\r\n\t\t\t\tfallback: true,\r\n\t\t\t} );\r\n\t\t}\r\n\t}, [ name ] );\r\n\r\n\tconst attribute = style?.color?.duotone;\r\n\r\n\tconst filterClass = `wp-duotone-${ id }`;\r\n\r\n\tconst shouldRender = selector && attribute;\r\n\r\n\tuseDuotoneStyles( {\r\n\t\tclientId: id,\r\n\t\tid: filterClass,\r\n\t\tselector,\r\n\t\tattribute,\r\n\t} );\r\n\r\n\treturn {\r\n\t\tclassName: shouldRender ? filterClass : '',\r\n\t};\r\n}\r\n\r\naddFilter(\r\n\t'blocks.registerBlockType',\r\n\t'core/editor/duotone/add-attributes',\r\n\taddDuotoneAttributes\r\n);\r\n","/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport {\n\tstore as blocksStore,\n\tisReusableBlock,\n\tisTemplatePart,\n\t__experimentalGetBlockLabel as getBlockLabel,\n} from '@wordpress/blocks';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\n/** @typedef {import('@wordpress/blocks').WPIcon} WPIcon */\n\n/**\n * Contains basic block's information for display reasons.\n *\n * @typedef {Object} WPBlockDisplayInformation\n *\n * @property {boolean} isSynced    True if is a reusable block or template part\n * @property {string}  title       Human-readable block type label.\n * @property {WPIcon}  icon        Block type icon.\n * @property {string}  description A detailed block type description.\n * @property {string}  anchor      HTML anchor.\n * @property {name}    name        A custom, human readable name for the block.\n */\n\n/**\n * Get the display label for a block's position type.\n *\n * @param {Object} attributes Block attributes.\n * @return {string} The position type label.\n */\nfunction getPositionTypeLabel( attributes ) {\n\tconst positionType = attributes?.style?.position?.type;\n\n\tif ( positionType === 'sticky' ) {\n\t\treturn __( 'Sticky' );\n\t}\n\n\tif ( positionType === 'fixed' ) {\n\t\treturn __( 'Fixed' );\n\t}\n\n\treturn null;\n}\n\n/**\n * Hook used to try to find a matching block variation and return\n * the appropriate information for display reasons. In order to\n * to try to find a match we need to things:\n * 1. Block's client id to extract it's current attributes.\n * 2. A block variation should have set `isActive` prop to a proper function.\n *\n * If for any reason a block variation match cannot be found,\n * the returned information come from the Block Type.\n * If no blockType is found with the provided clientId, returns null.\n *\n * @param {string} clientId Block's client id.\n * @return {?WPBlockDisplayInformation} Block's display information, or `null` when the block or its type not found.\n */\n\nexport default function useBlockDisplayInformation( clientId ) {\n\treturn useSelect(\n\t\t( select ) => {\n\t\t\tif ( ! clientId ) return null;\n\t\t\tconst { getBlockName, getBlockAttributes } =\n\t\t\t\tselect( blockEditorStore );\n\t\t\tconst { getBlockType, getActiveBlockVariation } =\n\t\t\t\tselect( blocksStore );\n\t\t\tconst blockName = getBlockName( clientId );\n\t\t\tconst blockType = getBlockType( blockName );\n\t\t\tif ( ! blockType ) return null;\n\t\t\tconst attributes = getBlockAttributes( clientId );\n\t\t\tconst match = getActiveBlockVariation( blockName, attributes );\n\t\t\tconst isSynced =\n\t\t\t\tisReusableBlock( blockType ) || isTemplatePart( blockType );\n\t\t\tconst syncedTitle = isSynced\n\t\t\t\t? getBlockLabel( blockType, attributes )\n\t\t\t\t: undefined;\n\t\t\tconst title = syncedTitle || blockType.title;\n\t\t\tconst positionLabel = getPositionTypeLabel( attributes );\n\t\t\tconst blockTypeInfo = {\n\t\t\t\tisSynced,\n\t\t\t\ttitle,\n\t\t\t\ticon: blockType.icon,\n\t\t\t\tdescription: blockType.description,\n\t\t\t\tanchor: attributes?.anchor,\n\t\t\t\tpositionLabel,\n\t\t\t\tpositionType: attributes?.style?.position?.type,\n\t\t\t\tname: attributes?.metadata?.name,\n\t\t\t};\n\t\t\tif ( ! match ) return blockTypeInfo;\n\n\t\t\treturn {\n\t\t\t\tisSynced,\n\t\t\t\ttitle: match.title || blockType.title,\n\t\t\t\ticon: match.icon || blockType.icon,\n\t\t\t\tdescription: match.description || blockType.description,\n\t\t\t\tanchor: attributes?.anchor,\n\t\t\t\tpositionLabel,\n\t\t\t\tpositionType: attributes?.style?.position?.type,\n\t\t\t\tname: attributes?.metadata?.name,\n\t\t\t};\n\t\t},\n\t\t[ clientId ]\n\t);\n}\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { __, _x, sprintf } from '@wordpress/i18n';\nimport { getBlockSupport, hasBlockSupport } from '@wordpress/blocks';\nimport {\n\tBaseControl,\n\tprivateApis as componentsPrivateApis,\n} from '@wordpress/components';\nimport { useInstanceId } from '@wordpress/compose';\nimport { useSelect } from '@wordpress/data';\nimport { useMemo, Platform } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { useSettings } from '../components/use-settings';\nimport InspectorControls from '../components/inspector-controls';\nimport useBlockDisplayInformation from '../components/use-block-display-information';\nimport { cleanEmptyObject, useStyleOverride } from './utils';\nimport { unlock } from '../lock-unlock';\nimport { store as blockEditorStore } from '../store';\n\nconst { CustomSelectControl } = unlock( componentsPrivateApis );\n\nconst POSITION_SUPPORT_KEY = 'position';\n\nconst OPTION_CLASSNAME =\n\t'block-editor-hooks__position-selection__select-control__option';\n\nconst DEFAULT_OPTION = {\n\tkey: 'default',\n\tvalue: '',\n\tname: __( 'Default' ),\n\tclassName: OPTION_CLASSNAME,\n};\n\nconst STICKY_OPTION = {\n\tkey: 'sticky',\n\tvalue: 'sticky',\n\tname: _x( 'Sticky', 'Name for the value of the CSS position property' ),\n\tclassName: OPTION_CLASSNAME,\n\t__experimentalHint: __(\n\t\t'The block will stick to the top of the window instead of scrolling.'\n\t),\n};\n\nconst FIXED_OPTION = {\n\tkey: 'fixed',\n\tvalue: 'fixed',\n\tname: _x( 'Fixed', 'Name for the value of the CSS position property' ),\n\tclassName: OPTION_CLASSNAME,\n\t__experimentalHint: __(\n\t\t'The block will not move when the page is scrolled.'\n\t),\n};\n\nconst POSITION_SIDES = [ 'top', 'right', 'bottom', 'left' ];\nconst VALID_POSITION_TYPES = [ 'sticky', 'fixed' ];\n\n/**\n * Get calculated position CSS.\n *\n * @param {Object} props          Component props.\n * @param {string} props.selector Selector to use.\n * @param {Object} props.style    Style object.\n * @return {string} The generated CSS rules.\n */\nexport function getPositionCSS( { selector, style } ) {\n\tlet output = '';\n\n\tconst { type: positionType } = style?.position || {};\n\n\tif ( ! VALID_POSITION_TYPES.includes( positionType ) ) {\n\t\treturn output;\n\t}\n\n\toutput += `${ selector } {`;\n\toutput += `position: ${ positionType };`;\n\n\tPOSITION_SIDES.forEach( ( side ) => {\n\t\tif ( style?.position?.[ side ] !== undefined ) {\n\t\t\toutput += `${ side }: ${ style.position[ side ] };`;\n\t\t}\n\t} );\n\n\tif ( positionType === 'sticky' || positionType === 'fixed' ) {\n\t\t// TODO: Replace hard-coded z-index value with a z-index preset approach in theme.json.\n\t\toutput += `z-index: 10`;\n\t}\n\toutput += `}`;\n\n\treturn output;\n}\n\n/**\n * Determines if there is sticky position support.\n *\n * @param {string|Object} blockType Block name or Block Type object.\n *\n * @return {boolean} Whether there is support.\n */\nexport function hasStickyPositionSupport( blockType ) {\n\tconst support = getBlockSupport( blockType, POSITION_SUPPORT_KEY );\n\treturn !! ( true === support || support?.sticky );\n}\n\n/**\n * Determines if there is fixed position support.\n *\n * @param {string|Object} blockType Block name or Block Type object.\n *\n * @return {boolean} Whether there is support.\n */\nexport function hasFixedPositionSupport( blockType ) {\n\tconst support = getBlockSupport( blockType, POSITION_SUPPORT_KEY );\n\treturn !! ( true === support || support?.fixed );\n}\n\n/**\n * Determines if there is position support.\n *\n * @param {string|Object} blockType Block name or Block Type object.\n *\n * @return {boolean} Whether there is support.\n */\nexport function hasPositionSupport( blockType ) {\n\tconst support = getBlockSupport( blockType, POSITION_SUPPORT_KEY );\n\treturn !! support;\n}\n\n/**\n * Checks if there is a current value in the position block support attributes.\n *\n * @param {Object} props Block props.\n * @return {boolean} Whether or not the block has a position value set.\n */\nexport function hasPositionValue( props ) {\n\treturn props.attributes.style?.position?.type !== undefined;\n}\n\n/**\n * Checks if the block is currently set to a sticky or fixed position.\n * This check is helpful for determining how to position block toolbars or other elements.\n *\n * @param {Object} attributes Block attributes.\n * @return {boolean} Whether or not the block is set to a sticky or fixed position.\n */\nexport function hasStickyOrFixedPositionValue( attributes ) {\n\tconst positionType = attributes?.style?.position?.type;\n\treturn positionType === 'sticky' || positionType === 'fixed';\n}\n\n/**\n * Resets the position block support attributes. This can be used when disabling\n * the position support controls for a block via a `ToolsPanel`.\n *\n * @param {Object} props               Block props.\n * @param {Object} props.attributes    Block's attributes.\n * @param {Object} props.setAttributes Function to set block's attributes.\n */\nexport function resetPosition( { attributes = {}, setAttributes } ) {\n\tconst { style = {} } = attributes;\n\n\tsetAttributes( {\n\t\tstyle: cleanEmptyObject( {\n\t\t\t...style,\n\t\t\tposition: {\n\t\t\t\t...style?.position,\n\t\t\t\ttype: undefined,\n\t\t\t\ttop: undefined,\n\t\t\t\tright: undefined,\n\t\t\t\tbottom: undefined,\n\t\t\t\tleft: undefined,\n\t\t\t},\n\t\t} ),\n\t} );\n}\n\n/**\n * Custom hook that checks if position settings have been disabled.\n *\n * @param {string} name The name of the block.\n *\n * @return {boolean} Whether padding setting is disabled.\n */\nexport function useIsPositionDisabled( { name: blockName } = {} ) {\n\tconst [ allowFixed, allowSticky ] = useSettings(\n\t\t'position.fixed',\n\t\t'position.sticky'\n\t);\n\tconst isDisabled = ! allowFixed && ! allowSticky;\n\n\treturn ! hasPositionSupport( blockName ) || isDisabled;\n}\n\n/*\n * Position controls rendered in an inspector control panel.\n *\n * @param {Object} props\n *\n * @return {Element} Position panel.\n */\nexport function PositionPanelPure( {\n\tstyle = {},\n\tclientId,\n\tname: blockName,\n\tsetAttributes,\n} ) {\n\tconst allowFixed = hasFixedPositionSupport( blockName );\n\tconst allowSticky = hasStickyPositionSupport( blockName );\n\tconst value = style?.position?.type;\n\n\tconst { firstParentClientId } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getBlockParents } = select( blockEditorStore );\n\t\t\tconst parents = getBlockParents( clientId );\n\t\t\treturn { firstParentClientId: parents[ parents.length - 1 ] };\n\t\t},\n\t\t[ clientId ]\n\t);\n\n\tconst blockInformation = useBlockDisplayInformation( firstParentClientId );\n\tconst stickyHelpText =\n\t\tallowSticky && value === STICKY_OPTION.value && blockInformation\n\t\t\t? sprintf(\n\t\t\t\t\t/* translators: %s: the name of the parent block. */\n\t\t\t\t\t__(\n\t\t\t\t\t\t'The block will stick to the scrollable area of the parent %s block.'\n\t\t\t\t\t),\n\t\t\t\t\tblockInformation.title\n\t\t\t  )\n\t\t\t: null;\n\n\tconst options = useMemo( () => {\n\t\tconst availableOptions = [ DEFAULT_OPTION ];\n\t\t// Display options if they are allowed, or if a block already has a valid value set.\n\t\t// This allows for a block to be switched off from a position type that is not allowed.\n\t\tif ( allowSticky || value === STICKY_OPTION.value ) {\n\t\t\tavailableOptions.push( STICKY_OPTION );\n\t\t}\n\t\tif ( allowFixed || value === FIXED_OPTION.value ) {\n\t\t\tavailableOptions.push( FIXED_OPTION );\n\t\t}\n\t\treturn availableOptions;\n\t}, [ allowFixed, allowSticky, value ] );\n\n\tconst onChangeType = ( next ) => {\n\t\t// For now, use a hard-coded `0px` value for the position.\n\t\t// `0px` is preferred over `0` as it can be used in `calc()` functions.\n\t\t// In the future, it could be useful to allow for an offset value.\n\t\tconst placementValue = '0px';\n\n\t\tconst newStyle = {\n\t\t\t...style,\n\t\t\tposition: {\n\t\t\t\t...style?.position,\n\t\t\t\ttype: next,\n\t\t\t\ttop:\n\t\t\t\t\tnext === 'sticky' || next === 'fixed'\n\t\t\t\t\t\t? placementValue\n\t\t\t\t\t\t: undefined,\n\t\t\t},\n\t\t};\n\n\t\tsetAttributes( {\n\t\t\tstyle: cleanEmptyObject( newStyle ),\n\t\t} );\n\t};\n\n\tconst selectedOption = value\n\t\t? options.find( ( option ) => option.value === value ) || DEFAULT_OPTION\n\t\t: DEFAULT_OPTION;\n\n\t// Only display position controls if there is at least one option to choose from.\n\treturn Platform.select( {\n\t\tweb:\n\t\t\toptions.length > 1 ? (\n\t\t\t\t<InspectorControls group=\"position\">\n\t\t\t\t\t<BaseControl\n\t\t\t\t\t\tclassName=\"block-editor-hooks__position-selection\"\n\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\thelp={ stickyHelpText }\n\t\t\t\t\t>\n\t\t\t\t\t\t<CustomSelectControl\n\t\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\t\tclassName=\"block-editor-hooks__position-selection__select-control\"\n\t\t\t\t\t\t\tlabel={ __( 'Position' ) }\n\t\t\t\t\t\t\thideLabelFromVision\n\t\t\t\t\t\t\tdescribedBy={ sprintf(\n\t\t\t\t\t\t\t\t// translators: %s: Currently selected position.\n\t\t\t\t\t\t\t\t__( 'Currently selected position: %s' ),\n\t\t\t\t\t\t\t\tselectedOption.name\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\toptions={ options }\n\t\t\t\t\t\t\tvalue={ selectedOption }\n\t\t\t\t\t\t\t__experimentalShowSelectedHint\n\t\t\t\t\t\t\tonChange={ ( { selectedItem } ) => {\n\t\t\t\t\t\t\t\tonChangeType( selectedItem.value );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tsize={ '__unstable-large' }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</BaseControl>\n\t\t\t\t</InspectorControls>\n\t\t\t) : null,\n\t\tnative: null,\n\t} );\n}\n\nexport default {\n\tedit: function Edit( props ) {\n\t\tconst isPositionDisabled = useIsPositionDisabled( props );\n\t\tif ( isPositionDisabled ) {\n\t\t\treturn null;\n\t\t}\n\t\treturn <PositionPanelPure { ...props } />;\n\t},\n\tuseBlockProps,\n\tattributeKeys: [ 'style' ],\n\thasSupport( name ) {\n\t\treturn hasBlockSupport( name, POSITION_SUPPORT_KEY );\n\t},\n};\n\nfunction useBlockProps( { name, style } ) {\n\tconst hasPositionBlockSupport = hasBlockSupport(\n\t\tname,\n\t\tPOSITION_SUPPORT_KEY\n\t);\n\tconst isPositionDisabled = useIsPositionDisabled( { name } );\n\tconst allowPositionStyles = hasPositionBlockSupport && ! isPositionDisabled;\n\n\tconst id = useInstanceId( useBlockProps );\n\n\t// Higher specificity to override defaults in editor UI.\n\tconst positionSelector = `.wp-container-${ id }.wp-container-${ id }`;\n\n\t// Get CSS string for the current position values.\n\tlet css;\n\tif ( allowPositionStyles ) {\n\t\tcss =\n\t\t\tgetPositionCSS( {\n\t\t\t\tselector: positionSelector,\n\t\t\t\tstyle,\n\t\t\t} ) || '';\n\t}\n\n\t// Attach a `wp-container-` id-based class name.\n\tconst className = classnames( {\n\t\t[ `wp-container-${ id }` ]: allowPositionStyles && !! css, // Only attach a container class if there is generated CSS to be attached.\n\t\t[ `is-position-${ style?.position?.type }` ]:\n\t\t\tallowPositionStyles && !! css && !! style?.position?.type,\n\t} );\n\n\tuseStyleOverride( { css } );\n\n\treturn { className };\n}\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { createHigherOrderComponent, useInstanceId } from '@wordpress/compose';\nimport { addFilter } from '@wordpress/hooks';\nimport { getBlockSupport, hasBlockSupport } from '@wordpress/blocks';\nimport { useSelect } from '@wordpress/data';\nimport {\n\tButton,\n\tButtonGroup,\n\tToggleControl,\n\tPanelBody,\n\tprivateApis as componentsPrivateApis,\n} from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../store';\nimport { InspectorControls } from '../components';\nimport { useSettings } from '../components/use-settings';\nimport { getLayoutType, getLayoutTypes } from '../layouts';\nimport { useBlockEditingMode } from '../components/block-editing-mode';\nimport { LAYOUT_DEFINITIONS } from '../layouts/definitions';\nimport { useBlockSettings, useStyleOverride } from './utils';\nimport { unlock } from '../lock-unlock';\n\nconst layoutBlockSupportKey = 'layout';\n\nfunction hasLayoutBlockSupport( blockName ) {\n\treturn (\n\t\thasBlockSupport( blockName, 'layout' ) ||\n\t\thasBlockSupport( blockName, '__experimentalLayout' )\n\t);\n}\n\n/**\n * Generates the utility classnames for the given block's layout attributes.\n *\n * @param { Object } blockAttributes Block attributes.\n * @param { string } blockName       Block name.\n *\n * @return { Array } Array of CSS classname strings.\n */\nexport function useLayoutClasses( blockAttributes = {}, blockName = '' ) {\n\tconst { kebabCase } = unlock( componentsPrivateApis );\n\tconst rootPaddingAlignment = useSelect( ( select ) => {\n\t\tconst { getSettings } = select( blockEditorStore );\n\t\treturn getSettings().__experimentalFeatures\n\t\t\t?.useRootPaddingAwareAlignments;\n\t}, [] );\n\tconst { layout } = blockAttributes;\n\n\tconst { default: defaultBlockLayout } =\n\t\tgetBlockSupport( blockName, layoutBlockSupportKey ) || {};\n\tconst usedLayout =\n\t\tlayout?.inherit || layout?.contentSize || layout?.wideSize\n\t\t\t? { ...layout, type: 'constrained' }\n\t\t\t: layout || defaultBlockLayout || {};\n\n\tconst layoutClassnames = [];\n\n\tif ( LAYOUT_DEFINITIONS[ usedLayout?.type || 'default' ]?.className ) {\n\t\tconst baseClassName =\n\t\t\tLAYOUT_DEFINITIONS[ usedLayout?.type || 'default' ]?.className;\n\t\tconst splitBlockName = blockName.split( '/' );\n\t\tconst fullBlockName =\n\t\t\tsplitBlockName[ 0 ] === 'core'\n\t\t\t\t? splitBlockName.pop()\n\t\t\t\t: splitBlockName.join( '-' );\n\t\tconst compoundClassName = `wp-block-${ fullBlockName }-${ baseClassName }`;\n\t\tlayoutClassnames.push( baseClassName, compoundClassName );\n\t}\n\n\tif (\n\t\t( usedLayout?.inherit ||\n\t\t\tusedLayout?.contentSize ||\n\t\t\tusedLayout?.type === 'constrained' ) &&\n\t\trootPaddingAlignment\n\t) {\n\t\tlayoutClassnames.push( 'has-global-padding' );\n\t}\n\n\tif ( usedLayout?.orientation ) {\n\t\tlayoutClassnames.push( `is-${ kebabCase( usedLayout.orientation ) }` );\n\t}\n\n\tif ( usedLayout?.justifyContent ) {\n\t\tlayoutClassnames.push(\n\t\t\t`is-content-justification-${ kebabCase(\n\t\t\t\tusedLayout.justifyContent\n\t\t\t) }`\n\t\t);\n\t}\n\n\tif ( usedLayout?.flexWrap && usedLayout.flexWrap === 'nowrap' ) {\n\t\tlayoutClassnames.push( 'is-nowrap' );\n\t}\n\n\treturn layoutClassnames;\n}\n\n/**\n * Generates a CSS rule with the given block's layout styles.\n *\n * @param { Object } blockAttributes Block attributes.\n * @param { string } blockName       Block name.\n * @param { string } selector        A selector to use in generating the CSS rule.\n *\n * @return { string } CSS rule.\n */\nexport function useLayoutStyles( blockAttributes = {}, blockName, selector ) {\n\tconst { layout = {}, style = {} } = blockAttributes;\n\t// Update type for blocks using legacy layouts.\n\tconst usedLayout =\n\t\tlayout?.inherit || layout?.contentSize || layout?.wideSize\n\t\t\t? { ...layout, type: 'constrained' }\n\t\t\t: layout || {};\n\tconst fullLayoutType = getLayoutType( usedLayout?.type || 'default' );\n\tconst [ blockGapSupport ] = useSettings( 'spacing.blockGap' );\n\tconst hasBlockGapSupport = blockGapSupport !== null;\n\treturn fullLayoutType?.getLayoutStyle?.( {\n\t\tblockName,\n\t\tselector,\n\t\tlayout,\n\t\tstyle,\n\t\thasBlockGapSupport,\n\t} );\n}\n\nfunction LayoutPanelPure( {\n\tlayout,\n\tsetAttributes,\n\tname: blockName,\n\tclientId,\n} ) {\n\tconst settings = useBlockSettings( blockName );\n\t// Block settings come from theme.json under settings.[blockName].\n\tconst { layout: layoutSettings } = settings;\n\tconst { themeSupportsLayout } = useSelect( ( select ) => {\n\t\tconst { getSettings } = select( blockEditorStore );\n\t\treturn {\n\t\t\tthemeSupportsLayout: getSettings().supportsLayout,\n\t\t};\n\t}, [] );\n\tconst blockEditingMode = useBlockEditingMode();\n\n\tif ( blockEditingMode !== 'default' ) {\n\t\treturn null;\n\t}\n\n\t// Layout block support comes from the block's block.json.\n\tconst layoutBlockSupport = getBlockSupport(\n\t\tblockName,\n\t\tlayoutBlockSupportKey,\n\t\t{}\n\t);\n\tconst blockSupportAndThemeSettings = {\n\t\t...layoutSettings,\n\t\t...layoutBlockSupport,\n\t};\n\tconst {\n\t\tallowSwitching,\n\t\tallowEditing = true,\n\t\tallowInheriting = true,\n\t\tdefault: defaultBlockLayout,\n\t} = blockSupportAndThemeSettings;\n\n\tif ( ! allowEditing ) {\n\t\treturn null;\n\t}\n\n\t/*\n\t * Try to find the layout type from either the\n\t * block's layout settings or any saved layout config.\n\t */\n\tconst blockSupportAndLayout = {\n\t\t...layoutBlockSupport,\n\t\t...layout,\n\t};\n\tconst { type, default: { type: defaultType = 'default' } = {} } =\n\t\tblockSupportAndLayout;\n\tconst blockLayoutType = type || defaultType;\n\n\t// Only show the inherit toggle if it's supported,\n\t// and either the default / flow or the constrained layout type is in use, as the toggle switches from one to the other.\n\tconst showInheritToggle = !! (\n\t\tallowInheriting &&\n\t\t( ! blockLayoutType ||\n\t\t\tblockLayoutType === 'default' ||\n\t\t\tblockLayoutType === 'constrained' ||\n\t\t\tblockSupportAndLayout.inherit )\n\t);\n\n\tconst usedLayout = layout || defaultBlockLayout || {};\n\tconst { inherit = false, contentSize = null } = usedLayout;\n\t/**\n\t * `themeSupportsLayout` is only relevant to the `default/flow` or\n\t * `constrained` layouts and it should not be taken into account when other\n\t * `layout` types are used.\n\t */\n\tif (\n\t\t( blockLayoutType === 'default' ||\n\t\t\tblockLayoutType === 'constrained' ) &&\n\t\t! themeSupportsLayout\n\t) {\n\t\treturn null;\n\t}\n\tconst layoutType = getLayoutType( blockLayoutType );\n\tconst constrainedType = getLayoutType( 'constrained' );\n\tconst displayControlsForLegacyLayouts =\n\t\t! usedLayout.type && ( contentSize || inherit );\n\tconst hasContentSizeOrLegacySettings = !! inherit || !! contentSize;\n\n\tconst onChangeType = ( newType ) =>\n\t\tsetAttributes( { layout: { type: newType } } );\n\tconst onChangeLayout = ( newLayout ) =>\n\t\tsetAttributes( { layout: newLayout } );\n\n\treturn (\n\t\t<>\n\t\t\t<InspectorControls>\n\t\t\t\t<PanelBody title={ __( 'Layout' ) }>\n\t\t\t\t\t{ showInheritToggle && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t\t\tclassName=\"block-editor-hooks__toggle-control\"\n\t\t\t\t\t\t\t\tlabel={ __( 'Inner blocks use content width' ) }\n\t\t\t\t\t\t\t\tchecked={\n\t\t\t\t\t\t\t\t\tlayoutType?.name === 'constrained' ||\n\t\t\t\t\t\t\t\t\thasContentSizeOrLegacySettings\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tonChange={ () =>\n\t\t\t\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\t\t\t\tlayout: {\n\t\t\t\t\t\t\t\t\t\t\ttype:\n\t\t\t\t\t\t\t\t\t\t\t\tlayoutType?.name ===\n\t\t\t\t\t\t\t\t\t\t\t\t\t'constrained' ||\n\t\t\t\t\t\t\t\t\t\t\t\thasContentSizeOrLegacySettings\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'default'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 'constrained',\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\thelp={\n\t\t\t\t\t\t\t\t\tlayoutType?.name === 'constrained' ||\n\t\t\t\t\t\t\t\t\thasContentSizeOrLegacySettings\n\t\t\t\t\t\t\t\t\t\t? __(\n\t\t\t\t\t\t\t\t\t\t\t\t'Nested blocks use content width with options for full and wide widths.'\n\t\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t\t\t: __(\n\t\t\t\t\t\t\t\t\t\t\t\t'Nested blocks will fill the width of this container. Toggle to constrain.'\n\t\t\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</>\n\t\t\t\t\t) }\n\n\t\t\t\t\t{ ! inherit && allowSwitching && (\n\t\t\t\t\t\t<LayoutTypeSwitcher\n\t\t\t\t\t\t\ttype={ blockLayoutType }\n\t\t\t\t\t\t\tonChange={ onChangeType }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\n\t\t\t\t\t{ layoutType && layoutType.name !== 'default' && (\n\t\t\t\t\t\t<layoutType.inspectorControls\n\t\t\t\t\t\t\tlayout={ usedLayout }\n\t\t\t\t\t\t\tonChange={ onChangeLayout }\n\t\t\t\t\t\t\tlayoutBlockSupport={ blockSupportAndThemeSettings }\n\t\t\t\t\t\t\tname={ blockName }\n\t\t\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t\t{ constrainedType && displayControlsForLegacyLayouts && (\n\t\t\t\t\t\t<constrainedType.inspectorControls\n\t\t\t\t\t\t\tlayout={ usedLayout }\n\t\t\t\t\t\t\tonChange={ onChangeLayout }\n\t\t\t\t\t\t\tlayoutBlockSupport={ blockSupportAndThemeSettings }\n\t\t\t\t\t\t\tname={ blockName }\n\t\t\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\t\t\t{ ! inherit && layoutType && (\n\t\t\t\t<layoutType.toolBarControls\n\t\t\t\t\tlayout={ usedLayout }\n\t\t\t\t\tonChange={ onChangeLayout }\n\t\t\t\t\tlayoutBlockSupport={ layoutBlockSupport }\n\t\t\t\t\tname={ blockName }\n\t\t\t\t\tclientId={ clientId }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</>\n\t);\n}\n\nexport default {\n\tshareWithChildBlocks: true,\n\tedit: LayoutPanelPure,\n\tattributeKeys: [ 'layout' ],\n\thasSupport( name ) {\n\t\treturn hasLayoutBlockSupport( name );\n\t},\n};\n\nfunction LayoutTypeSwitcher( { type, onChange } ) {\n\treturn (\n\t\t<ButtonGroup>\n\t\t\t{ getLayoutTypes().map( ( { name, label } ) => {\n\t\t\t\treturn (\n\t\t\t\t\t<Button\n\t\t\t\t\t\tkey={ name }\n\t\t\t\t\t\tisPressed={ type === name }\n\t\t\t\t\t\tonClick={ () => onChange( name ) }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ label }\n\t\t\t\t\t</Button>\n\t\t\t\t);\n\t\t\t} ) }\n\t\t</ButtonGroup>\n\t);\n}\n\n/**\n * Filters registered block settings, extending attributes to include `layout`.\n *\n * @param {Object} settings Original block settings.\n *\n * @return {Object} Filtered block settings.\n */\nexport function addAttribute( settings ) {\n\tif ( 'type' in ( settings.attributes?.layout ?? {} ) ) {\n\t\treturn settings;\n\t}\n\tif ( hasLayoutBlockSupport( settings ) ) {\n\t\tsettings.attributes = {\n\t\t\t...settings.attributes,\n\t\t\tlayout: {\n\t\t\t\ttype: 'object',\n\t\t\t},\n\t\t};\n\t}\n\n\treturn settings;\n}\n\nfunction BlockWithLayoutStyles( { block: BlockListBlock, props } ) {\n\tconst { name, attributes } = props;\n\tconst id = useInstanceId( BlockListBlock );\n\tconst { layout } = attributes;\n\tconst { default: defaultBlockLayout } =\n\t\tgetBlockSupport( name, layoutBlockSupportKey ) || {};\n\tconst usedLayout =\n\t\tlayout?.inherit || layout?.contentSize || layout?.wideSize\n\t\t\t? { ...layout, type: 'constrained' }\n\t\t\t: layout || defaultBlockLayout || {};\n\tconst layoutClasses = useLayoutClasses( attributes, name );\n\n\tconst { kebabCase } = unlock( componentsPrivateApis );\n\tconst selectorPrefix = `wp-container-${ kebabCase( name ) }-is-layout-`;\n\t// Higher specificity to override defaults from theme.json.\n\tconst selector = `.${ selectorPrefix }${ id }.${ selectorPrefix }${ id }`;\n\tconst [ blockGapSupport ] = useSettings( 'spacing.blockGap' );\n\tconst hasBlockGapSupport = blockGapSupport !== null;\n\n\t// Get CSS string for the current layout type.\n\t// The CSS and `style` element is only output if it is not empty.\n\tconst fullLayoutType = getLayoutType( usedLayout?.type || 'default' );\n\tconst css = fullLayoutType?.getLayoutStyle?.( {\n\t\tblockName: name,\n\t\tselector,\n\t\tlayout: usedLayout,\n\t\tstyle: attributes?.style,\n\t\thasBlockGapSupport,\n\t} );\n\n\t// Attach a `wp-container-` id-based class name as well as a layout class name such as `is-layout-flex`.\n\tconst layoutClassNames = classnames(\n\t\t{\n\t\t\t[ `${ selectorPrefix }${ id }` ]: !! css, // Only attach a container class if there is generated CSS to be attached.\n\t\t},\n\t\tlayoutClasses\n\t);\n\n\tuseStyleOverride( { css } );\n\n\treturn (\n\t\t<BlockListBlock\n\t\t\t{ ...props }\n\t\t\t__unstableLayoutClassNames={ layoutClassNames }\n\t\t/>\n\t);\n}\n\n/**\n * Override the default block element to add the layout styles.\n *\n * @param {Function} BlockListBlock Original component.\n *\n * @return {Function} Wrapped component.\n */\nexport const withLayoutStyles = createHigherOrderComponent(\n\t( BlockListBlock ) => ( props ) => {\n\t\tconst blockSupportsLayout = hasLayoutBlockSupport( props.name );\n\t\tconst shouldRenderLayoutStyles = useSelect(\n\t\t\t( select ) => {\n\t\t\t\t// The callback returns early to avoid block editor subscription.\n\t\t\t\tif ( ! blockSupportsLayout ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\treturn ! select( blockEditorStore ).getSettings()\n\t\t\t\t\t.disableLayoutStyles;\n\t\t\t},\n\t\t\t[ blockSupportsLayout ]\n\t\t);\n\n\t\tif ( ! shouldRenderLayoutStyles ) {\n\t\t\treturn <BlockListBlock { ...props } />;\n\t\t}\n\n\t\treturn (\n\t\t\t<BlockWithLayoutStyles block={ BlockListBlock } props={ props } />\n\t\t);\n\t},\n\t'withLayoutStyles'\n);\n\naddFilter(\n\t'blocks.registerBlockType',\n\t'core/layout/addAttribute',\n\taddAttribute\n);\naddFilter(\n\t'editor.BlockListBlock',\n\t'core/editor/layout/with-layout-styles',\n\twithLayoutStyles\n);\n","/**\n * WordPress dependencies\n */\nimport { ResizableBox } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport { __unstableUseBlockElement as useBlockElement } from '../block-list/use-block-props/use-block-refs';\nimport BlockPopoverCover from '../block-popover/cover';\nimport { getComputedCSS } from './utils';\n\nexport function GridItemResizer( { clientId, onChange } ) {\n\tconst blockElement = useBlockElement( clientId );\n\tif ( ! blockElement ) {\n\t\treturn null;\n\t}\n\treturn (\n\t\t<BlockPopoverCover\n\t\t\tclassName=\"block-editor-grid-item-resizer\"\n\t\t\tclientId={ clientId }\n\t\t\t__unstablePopoverSlot=\"block-toolbar\"\n\t\t>\n\t\t\t<ResizableBox\n\t\t\t\tclassName=\"block-editor-grid-item-resizer__box\"\n\t\t\t\tsize={ {\n\t\t\t\t\twidth: '100%',\n\t\t\t\t\theight: '100%',\n\t\t\t\t} }\n\t\t\t\tenable={ {\n\t\t\t\t\tbottom: true,\n\t\t\t\t\tbottomLeft: false,\n\t\t\t\t\tbottomRight: false,\n\t\t\t\t\tleft: false,\n\t\t\t\t\tright: true,\n\t\t\t\t\ttop: false,\n\t\t\t\t\ttopLeft: false,\n\t\t\t\t\ttopRight: false,\n\t\t\t\t} }\n\t\t\t\tonResizeStop={ ( event, direction, boxElement ) => {\n\t\t\t\t\tconst gridElement = blockElement.parentElement;\n\t\t\t\t\tconst columnGap = parseFloat(\n\t\t\t\t\t\tgetComputedCSS( gridElement, 'column-gap' )\n\t\t\t\t\t);\n\t\t\t\t\tconst rowGap = parseFloat(\n\t\t\t\t\t\tgetComputedCSS( gridElement, 'row-gap' )\n\t\t\t\t\t);\n\t\t\t\t\tconst gridColumnLines = getGridLines(\n\t\t\t\t\t\tgetComputedCSS( gridElement, 'grid-template-columns' ),\n\t\t\t\t\t\tcolumnGap\n\t\t\t\t\t);\n\t\t\t\t\tconst gridRowLines = getGridLines(\n\t\t\t\t\t\tgetComputedCSS( gridElement, 'grid-template-rows' ),\n\t\t\t\t\t\trowGap\n\t\t\t\t\t);\n\t\t\t\t\tconst columnStart = getClosestLine(\n\t\t\t\t\t\tgridColumnLines,\n\t\t\t\t\t\tblockElement.offsetLeft\n\t\t\t\t\t);\n\t\t\t\t\tconst rowStart = getClosestLine(\n\t\t\t\t\t\tgridRowLines,\n\t\t\t\t\t\tblockElement.offsetTop\n\t\t\t\t\t);\n\t\t\t\t\tconst columnEnd = getClosestLine(\n\t\t\t\t\t\tgridColumnLines,\n\t\t\t\t\t\tblockElement.offsetLeft + boxElement.offsetWidth\n\t\t\t\t\t);\n\t\t\t\t\tconst rowEnd = getClosestLine(\n\t\t\t\t\t\tgridRowLines,\n\t\t\t\t\t\tblockElement.offsetTop + boxElement.offsetHeight\n\t\t\t\t\t);\n\t\t\t\t\tonChange( {\n\t\t\t\t\t\tcolumnSpan: Math.max( columnEnd - columnStart, 1 ),\n\t\t\t\t\t\trowSpan: Math.max( rowEnd - rowStart, 1 ),\n\t\t\t\t\t} );\n\t\t\t\t} }\n\t\t\t/>\n\t\t</BlockPopoverCover>\n\t);\n}\n\nfunction getGridLines( template, gap ) {\n\tconst lines = [ 0 ];\n\tfor ( const size of template.split( ' ' ) ) {\n\t\tconst line = parseFloat( size );\n\t\tlines.push( lines[ lines.length - 1 ] + line + gap );\n\t}\n\treturn lines;\n}\n\nfunction getClosestLine( lines, position ) {\n\treturn lines.reduce(\n\t\t( closest, line, index ) =>\n\t\t\tMath.abs( line - position ) <\n\t\t\tMath.abs( lines[ closest ] - position )\n\t\t\t\t? index\n\t\t\t\t: closest,\n\t\t0\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useInstanceId } from '@wordpress/compose';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../store';\nimport { useStyleOverride } from './utils';\nimport { useLayout } from '../components/block-list/layout';\nimport { GridVisualizer, GridItemResizer } from '../components/grid-visualizer';\n\nfunction useBlockPropsChildLayoutStyles( { style } ) {\n\tconst shouldRenderChildLayoutStyles = useSelect( ( select ) => {\n\t\treturn ! select( blockEditorStore ).getSettings().disableLayoutStyles;\n\t} );\n\tconst layout = style?.layout ?? {};\n\tconst {\n\t\tselfStretch,\n\t\tflexSize,\n\t\tcolumnStart,\n\t\trowStart,\n\t\tcolumnSpan,\n\t\trowSpan,\n\t} = layout;\n\tconst parentLayout = useLayout() || {};\n\tconst { columnCount, minimumColumnWidth } = parentLayout;\n\tconst id = useInstanceId( useBlockPropsChildLayoutStyles );\n\tconst selector = `.wp-container-content-${ id }`;\n\n\tlet css = '';\n\tif ( shouldRenderChildLayoutStyles ) {\n\t\tif ( selfStretch === 'fixed' && flexSize ) {\n\t\t\tcss = `${ selector } {\n\t\t\t\tflex-basis: ${ flexSize };\n\t\t\t\tbox-sizing: border-box;\n\t\t\t}`;\n\t\t} else if ( selfStretch === 'fill' ) {\n\t\t\tcss = `${ selector } {\n\t\t\t\tflex-grow: 1;\n\t\t\t}`;\n\t\t} else if ( columnStart && columnSpan ) {\n\t\t\tcss = `${ selector } {\n\t\t\t\tgrid-column: ${ columnStart } / span ${ columnSpan };\n\t\t\t}`;\n\t\t} else if ( columnStart ) {\n\t\t\tcss = `${ selector } {\n\t\t\t\tgrid-column: ${ columnStart };\n\t\t\t}`;\n\t\t} else if ( columnSpan ) {\n\t\t\tcss = `${ selector } {\n\t\t\t\tgrid-column: span ${ columnSpan };\n\t\t\t}`;\n\t\t}\n\t\t/**\n\t\t * If minimumColumnWidth is set on the parent, or if no\n\t\t * columnCount is set, the grid is responsive so a\n\t\t * container query is needed for the span to resize.\n\t\t */\n\t\tif (\n\t\t\t( columnSpan || columnStart ) &&\n\t\t\t( minimumColumnWidth || ! columnCount )\n\t\t) {\n\t\t\t// Check if columnSpan and columnStart are numbers so Math.max doesn't break.\n\t\t\tconst columnSpanNumber = columnSpan ? parseInt( columnSpan ) : null;\n\t\t\tconst columnStartNumber = columnStart\n\t\t\t\t? parseInt( columnStart )\n\t\t\t\t: null;\n\t\t\tconst highestNumber = Math.max(\n\t\t\t\tcolumnSpanNumber,\n\t\t\t\tcolumnStartNumber\n\t\t\t);\n\n\t\t\tlet parentColumnValue = parseFloat( minimumColumnWidth );\n\t\t\t/**\n\t\t\t * 12rem is the default minimumColumnWidth value.\n\t\t\t * If parentColumnValue is not a number, default to 12.\n\t\t\t */\n\t\t\tif ( isNaN( parentColumnValue ) ) {\n\t\t\t\tparentColumnValue = 12;\n\t\t\t}\n\n\t\t\tlet parentColumnUnit = minimumColumnWidth?.replace(\n\t\t\t\tparentColumnValue,\n\t\t\t\t''\n\t\t\t);\n\t\t\t/**\n\t\t\t * Check that parent column unit is either 'px', 'rem' or 'em'.\n\t\t\t * If not, default to 'rem'.\n\t\t\t */\n\t\t\tif ( ! [ 'px', 'rem', 'em' ].includes( parentColumnUnit ) ) {\n\t\t\t\tparentColumnUnit = 'rem';\n\t\t\t}\n\n\t\t\tconst defaultGapValue = parentColumnUnit === 'px' ? 24 : 1.5;\n\t\t\tconst containerQueryValue =\n\t\t\t\thighestNumber * parentColumnValue +\n\t\t\t\t( highestNumber - 1 ) * defaultGapValue;\n\t\t\t// If a span is set we want to preserve it as long as possible, otherwise we just reset the value.\n\t\t\tconst gridColumnValue = columnSpan ? '1/-1' : 'auto';\n\n\t\t\tcss += `@container (max-width: ${ containerQueryValue }${ parentColumnUnit }) {\n\t\t\t\t${ selector } {\n\t\t\t\t\tgrid-column: ${ gridColumnValue };\n\t\t\t\t}\n\t\t\t}`;\n\t\t}\n\t\tif ( rowStart && rowSpan ) {\n\t\t\tcss += `${ selector } {\n\t\t\t\tgrid-row: ${ rowStart } / span ${ rowSpan };\n\t\t\t}`;\n\t\t} else if ( rowStart ) {\n\t\t\tcss += `${ selector } {\n\t\t\t\tgrid-row: ${ rowStart };\n\t\t\t}`;\n\t\t} else if ( rowSpan ) {\n\t\t\tcss += `${ selector } {\n\t\t\t\tgrid-row: span ${ rowSpan };\n\t\t\t}`;\n\t\t}\n\t}\n\n\tuseStyleOverride( { css } );\n\n\t// Only attach a container class if there is generated CSS to be attached.\n\tif ( ! css ) {\n\t\treturn;\n\t}\n\n\t// Attach a `wp-container-content` id-based classname.\n\treturn { className: `wp-container-content-${ id }` };\n}\n\nfunction ChildLayoutControlsPure( { clientId, style, setAttributes } ) {\n\tconst parentLayout = useLayout() || {};\n\tconst rootClientId = useSelect(\n\t\t( select ) => {\n\t\t\treturn select( blockEditorStore ).getBlockRootClientId( clientId );\n\t\t},\n\t\t[ clientId ]\n\t);\n\tif ( parentLayout.type !== 'grid' ) {\n\t\treturn null;\n\t}\n\tif ( ! window.__experimentalEnableGridInteractivity ) {\n\t\treturn null;\n\t}\n\treturn (\n\t\t<>\n\t\t\t<GridVisualizer clientId={ rootClientId } />\n\t\t\t<GridItemResizer\n\t\t\t\tclientId={ clientId }\n\t\t\t\tonChange={ ( { columnSpan, rowSpan } ) => {\n\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\t...style,\n\t\t\t\t\t\t\tlayout: {\n\t\t\t\t\t\t\t\t...style?.layout,\n\t\t\t\t\t\t\t\tcolumnSpan,\n\t\t\t\t\t\t\t\trowSpan,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t} );\n\t\t\t\t} }\n\t\t\t/>\n\t\t</>\n\t);\n}\n\nexport default {\n\tuseBlockProps: useBlockPropsChildLayoutStyles,\n\tedit: ChildLayoutControlsPure,\n\tattributeKeys: [ 'style' ],\n\thasSupport() {\n\t\treturn true;\n\t},\n};\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { store as blocksStore } from '@wordpress/blocks';\r\nimport { useSelect } from '@wordpress/data';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as blockEditorStore } from '../../store';\r\n\r\n/**\r\n * Contains the properties `ConvertToGroupButton` component needs.\r\n *\r\n * @typedef {Object} ConvertToGroupButtonProps\r\n * @property {string[]}  clientIds         An array of the selected client ids.\r\n * @property {boolean}   isGroupable       Indicates if the selected blocks can be grouped.\r\n * @property {boolean}   isUngroupable     Indicates if the selected blocks can be ungrouped.\r\n * @property {WPBlock[]} blocksSelection   An array of the selected blocks.\r\n * @property {string}    groupingBlockName The name of block used for handling grouping interactions.\r\n */\r\n\r\n/**\r\n * Returns the properties `ConvertToGroupButton` component needs to work properly.\r\n * It is used in `BlockSettingsMenuControls` to know if `ConvertToGroupButton`\r\n * should be rendered, to avoid ending up with an empty MenuGroup.\r\n *\r\n * @param {?string[]} selectedClientIds An optional array of clientIds to group. The selected blocks\r\n *                                      from the block editor store are used if this is not provided.\r\n *\r\n * @return {ConvertToGroupButtonProps} Returns the properties needed by `ConvertToGroupButton`.\r\n */\r\nexport default function useConvertToGroupButtonProps( selectedClientIds ) {\r\n\treturn useSelect(\r\n\t\t( select ) => {\r\n\t\t\tconst {\r\n\t\t\t\tgetBlocksByClientId,\r\n\t\t\t\tgetSelectedBlockClientIds,\r\n\t\t\t\tisUngroupable,\r\n\t\t\t\tisGroupable,\r\n\t\t\t} = select( blockEditorStore );\r\n\t\t\tconst { getGroupingBlockName, getBlockType } =\r\n\t\t\t\tselect( blocksStore );\r\n\t\t\tconst clientIds = selectedClientIds?.length\r\n\t\t\t\t? selectedClientIds\r\n\t\t\t\t: getSelectedBlockClientIds();\r\n\t\t\tconst blocksSelection = getBlocksByClientId( clientIds );\r\n\t\t\tconst [ firstSelectedBlock ] = blocksSelection;\r\n\t\t\tconst _isUngroupable =\r\n\t\t\t\tclientIds.length === 1 && isUngroupable( clientIds[ 0 ] );\r\n\t\t\treturn {\r\n\t\t\t\tclientIds,\r\n\t\t\t\tisGroupable: isGroupable( clientIds ),\r\n\t\t\t\tisUngroupable: _isUngroupable,\r\n\t\t\t\tblocksSelection,\r\n\t\t\t\tgroupingBlockName: getGroupingBlockName(),\r\n\t\t\t\tonUngroup:\r\n\t\t\t\t\t_isUngroupable &&\r\n\t\t\t\t\tgetBlockType( firstSelectedBlock.name )?.transforms\r\n\t\t\t\t\t\t?.ungroup,\r\n\t\t\t};\r\n\t\t},\r\n\t\t[ selectedClientIds ]\r\n\t);\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { MenuItem } from '@wordpress/components';\r\nimport { _x } from '@wordpress/i18n';\r\nimport { switchToBlockType } from '@wordpress/blocks';\r\nimport { useDispatch } from '@wordpress/data';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as blockEditorStore } from '../../store';\r\nimport useConvertToGroupButtonProps from './use-convert-to-group-button-props';\r\nimport BlockGroupToolbar from './toolbar';\r\n\r\nfunction ConvertToGroupButton( {\r\n\tclientIds,\r\n\tisGroupable,\r\n\tisUngroupable,\r\n\tonUngroup,\r\n\tblocksSelection,\r\n\tgroupingBlockName,\r\n\tonClose = () => {},\r\n} ) {\r\n\tconst { replaceBlocks } = useDispatch( blockEditorStore );\r\n\tconst onConvertToGroup = () => {\r\n\t\t// Activate the `transform` on the Grouping Block which does the conversion.\r\n\t\tconst newBlocks = switchToBlockType(\r\n\t\t\tblocksSelection,\r\n\t\t\tgroupingBlockName\r\n\t\t);\r\n\t\tif ( newBlocks ) {\r\n\t\t\treplaceBlocks( clientIds, newBlocks );\r\n\t\t}\r\n\t};\r\n\r\n\tconst onConvertFromGroup = () => {\r\n\t\tlet innerBlocks = blocksSelection[ 0 ].innerBlocks;\r\n\t\tif ( ! innerBlocks.length ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif ( onUngroup ) {\r\n\t\t\tinnerBlocks = onUngroup(\r\n\t\t\t\tblocksSelection[ 0 ].attributes,\r\n\t\t\t\tblocksSelection[ 0 ].innerBlocks\r\n\t\t\t);\r\n\t\t}\r\n\t\treplaceBlocks( clientIds, innerBlocks );\r\n\t};\r\n\r\n\tif ( ! isGroupable && ! isUngroupable ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{ isGroupable && (\r\n\t\t\t\t<MenuItem\r\n\t\t\t\t\tonClick={ () => {\r\n\t\t\t\t\t\tonConvertToGroup();\r\n\t\t\t\t\t\tonClose();\r\n\t\t\t\t\t} }\r\n\t\t\t\t>\r\n\t\t\t\t\t{ _x( 'Group', 'verb' ) }\r\n\t\t\t\t</MenuItem>\r\n\t\t\t) }\r\n\t\t\t{ isUngroupable && (\r\n\t\t\t\t<MenuItem\r\n\t\t\t\t\tonClick={ () => {\r\n\t\t\t\t\t\tonConvertFromGroup();\r\n\t\t\t\t\t\tonClose();\r\n\t\t\t\t\t} }\r\n\t\t\t\t>\r\n\t\t\t\t\t{ _x(\r\n\t\t\t\t\t\t'Ungroup',\r\n\t\t\t\t\t\t'Ungrouping blocks from within a grouping block back into individual blocks within the Editor '\r\n\t\t\t\t\t) }\r\n\t\t\t\t</MenuItem>\r\n\t\t\t) }\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport {\r\n\tBlockGroupToolbar,\r\n\tConvertToGroupButton,\r\n\tuseConvertToGroupButtonProps,\r\n};\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useSelect } from '@wordpress/data';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as blockEditorStore } from '../../store';\r\n\r\n/**\r\n * Return details about the block lock status.\r\n *\r\n * @param {string} clientId The block client Id.\r\n *\r\n * @return {Object} Block lock status\r\n */\r\nexport default function useBlockLock( clientId ) {\r\n\treturn useSelect(\r\n\t\t( select ) => {\r\n\t\t\tconst {\r\n\t\t\t\tcanEditBlock,\r\n\t\t\t\tcanMoveBlock,\r\n\t\t\t\tcanRemoveBlock,\r\n\t\t\t\tcanLockBlockType,\r\n\t\t\t\tgetBlockName,\r\n\t\t\t\tgetBlockRootClientId,\r\n\t\t\t\tgetTemplateLock,\r\n\t\t\t} = select( blockEditorStore );\r\n\t\t\tconst rootClientId = getBlockRootClientId( clientId );\r\n\r\n\t\t\tconst canEdit = canEditBlock( clientId );\r\n\t\t\tconst canMove = canMoveBlock( clientId, rootClientId );\r\n\t\t\tconst canRemove = canRemoveBlock( clientId, rootClientId );\r\n\r\n\t\t\treturn {\r\n\t\t\t\tcanEdit,\r\n\t\t\t\tcanMove,\r\n\t\t\t\tcanRemove,\r\n\t\t\t\tcanLock: canLockBlockType( getBlockName( clientId ) ),\r\n\t\t\t\tisContentLocked: getTemplateLock( clientId ) === 'contentOnly',\r\n\t\t\t\tisLocked: ! canEdit || ! canMove || ! canRemove,\r\n\t\t\t};\r\n\t\t},\r\n\t\t[ clientId ]\r\n\t);\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst unlock = (\r\n\t<SVG viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n\t\t<Path d=\"M17 10h-1.2V7c0-2.1-1.7-3.8-3.8-3.8-2.1 0-3.8 1.7-3.8 3.8h1.5c0-1.2 1-2.2 2.2-2.2s2.2 1 2.2 2.2v3H7c-.6 0-1 .4-1 1v8c0 .6.4 1 1 1h10c.6 0 1-.4 1-1v-8c0-.6-.4-1-1-1z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default unlock;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst lockOutline = (\r\n\t<SVG viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n\t\t<Path d=\"M17 10h-1.2V7c0-2.1-1.7-3.8-3.8-3.8-2.1 0-3.8 1.7-3.8 3.8v3H7c-.6 0-1 .4-1 1v8c0 .6.4 1 1 1h10c.6 0 1-.4 1-1v-8c0-.6-.4-1-1-1zM9.8 7c0-1.2 1-2.2 2.2-2.2 1.2 0 2.2 1 2.2 2.2v3H9.8V7zm6.7 11.5h-9v-7h9v7z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default lockOutline;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst lock = (\r\n\t<SVG viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n\t\t<Path d=\"M17 10h-1.2V7c0-2.1-1.7-3.8-3.8-3.8-2.1 0-3.8 1.7-3.8 3.8v3H7c-.6 0-1 .4-1 1v8c0 .6.4 1 1 1h10c.6 0 1-.4 1-1v-8c0-.6-.4-1-1-1zm-2.8 0H9.8V7c0-1.2 1-2.2 2.2-2.2s2.2 1 2.2 2.2v3z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default lock;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { __, sprintf } from '@wordpress/i18n';\r\nimport { useEffect, useState } from '@wordpress/element';\r\nimport {\r\n\tButton,\r\n\tCheckboxControl,\r\n\tFlex,\r\n\tFlexItem,\r\n\tIcon,\r\n\tModal,\r\n\tToggleControl,\r\n} from '@wordpress/components';\r\nimport { lock as lockIcon, unlock as unlockIcon } from '@wordpress/icons';\r\nimport { useInstanceId } from '@wordpress/compose';\r\nimport { useDispatch, useSelect } from '@wordpress/data';\r\nimport { getBlockType } from '@wordpress/blocks';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport useBlockLock from './use-block-lock';\r\nimport useBlockDisplayInformation from '../use-block-display-information';\r\nimport { store as blockEditorStore } from '../../store';\r\n\r\n// Entity based blocks which allow edit locking\r\nconst ALLOWS_EDIT_LOCKING = [ 'core/block', 'core/navigation' ];\r\n\r\nfunction getTemplateLockValue( lock ) {\r\n\t// Prevents all operations.\r\n\tif ( lock.remove && lock.move ) {\r\n\t\treturn 'all';\r\n\t}\r\n\r\n\t// Prevents inserting or removing blocks, but allows moving existing blocks.\r\n\tif ( lock.remove && ! lock.move ) {\r\n\t\treturn 'insert';\r\n\t}\r\n\r\n\treturn false;\r\n}\r\n\r\nexport default function BlockLockModal( { clientId, onClose } ) {\r\n\tconst [ lock, setLock ] = useState( { move: false, remove: false } );\r\n\tconst { canEdit, canMove, canRemove } = useBlockLock( clientId );\r\n\tconst { allowsEditLocking, templateLock, hasTemplateLock } = useSelect(\r\n\t\t( select ) => {\r\n\t\t\tconst { getBlockName, getBlockAttributes } =\r\n\t\t\t\tselect( blockEditorStore );\r\n\t\t\tconst blockName = getBlockName( clientId );\r\n\t\t\tconst blockType = getBlockType( blockName );\r\n\r\n\t\t\treturn {\r\n\t\t\t\tallowsEditLocking: ALLOWS_EDIT_LOCKING.includes( blockName ),\r\n\t\t\t\ttemplateLock: getBlockAttributes( clientId )?.templateLock,\r\n\t\t\t\thasTemplateLock: !! blockType?.attributes?.templateLock,\r\n\t\t\t};\r\n\t\t},\r\n\t\t[ clientId ]\r\n\t);\r\n\tconst [ applyTemplateLock, setApplyTemplateLock ] = useState(\r\n\t\t!! templateLock\r\n\t);\r\n\tconst { updateBlockAttributes } = useDispatch( blockEditorStore );\r\n\tconst blockInformation = useBlockDisplayInformation( clientId );\r\n\tconst instanceId = useInstanceId(\r\n\t\tBlockLockModal,\r\n\t\t'block-editor-block-lock-modal__options-title'\r\n\t);\r\n\r\n\tuseEffect( () => {\r\n\t\tsetLock( {\r\n\t\t\tmove: ! canMove,\r\n\t\t\tremove: ! canRemove,\r\n\t\t\t...( allowsEditLocking ? { edit: ! canEdit } : {} ),\r\n\t\t} );\r\n\t}, [ canEdit, canMove, canRemove, allowsEditLocking ] );\r\n\r\n\tconst isAllChecked = Object.values( lock ).every( Boolean );\r\n\tconst isMixed = Object.values( lock ).some( Boolean ) && ! isAllChecked;\r\n\r\n\treturn (\r\n\t\t<Modal\r\n\t\t\ttitle={ sprintf(\r\n\t\t\t\t/* translators: %s: Name of the block. */\r\n\t\t\t\t__( 'Lock %s' ),\r\n\t\t\t\tblockInformation.title\r\n\t\t\t) }\r\n\t\t\toverlayClassName=\"block-editor-block-lock-modal\"\r\n\t\t\tonRequestClose={ onClose }\r\n\t\t>\r\n\t\t\t<p>\r\n\t\t\t\t{ __(\r\n\t\t\t\t\t'Choose specific attributes to restrict or lock all available options.'\r\n\t\t\t\t) }\r\n\t\t\t</p>\r\n\t\t\t<form\r\n\t\t\t\tonSubmit={ ( event ) => {\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\tupdateBlockAttributes( [ clientId ], {\r\n\t\t\t\t\t\tlock,\r\n\t\t\t\t\t\ttemplateLock: applyTemplateLock\r\n\t\t\t\t\t\t\t? getTemplateLockValue( lock )\r\n\t\t\t\t\t\t\t: undefined,\r\n\t\t\t\t\t} );\r\n\t\t\t\t\tonClose();\r\n\t\t\t\t} }\r\n\t\t\t>\r\n\t\t\t\t<div\r\n\t\t\t\t\trole=\"group\"\r\n\t\t\t\t\taria-labelledby={ instanceId }\r\n\t\t\t\t\tclassName=\"block-editor-block-lock-modal__options\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<CheckboxControl\r\n\t\t\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t\t\t\tclassName=\"block-editor-block-lock-modal__options-title\"\r\n\t\t\t\t\t\tlabel={\r\n\t\t\t\t\t\t\t<span id={ instanceId }>{ __( 'Lock all' ) }</span>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tchecked={ isAllChecked }\r\n\t\t\t\t\t\tindeterminate={ isMixed }\r\n\t\t\t\t\t\tonChange={ ( newValue ) =>\r\n\t\t\t\t\t\t\tsetLock( {\r\n\t\t\t\t\t\t\t\tmove: newValue,\r\n\t\t\t\t\t\t\t\tremove: newValue,\r\n\t\t\t\t\t\t\t\t...( allowsEditLocking\r\n\t\t\t\t\t\t\t\t\t? { edit: newValue }\r\n\t\t\t\t\t\t\t\t\t: {} ),\r\n\t\t\t\t\t\t\t} )\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<ul className=\"block-editor-block-lock-modal__checklist\">\r\n\t\t\t\t\t\t{ allowsEditLocking && (\r\n\t\t\t\t\t\t\t<li className=\"block-editor-block-lock-modal__checklist-item\">\r\n\t\t\t\t\t\t\t\t<CheckboxControl\r\n\t\t\t\t\t\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t\t\t\t\t\t\tlabel={ __( 'Restrict editing' ) }\r\n\t\t\t\t\t\t\t\t\tchecked={ !! lock.edit }\r\n\t\t\t\t\t\t\t\t\tonChange={ ( edit ) =>\r\n\t\t\t\t\t\t\t\t\t\tsetLock( ( prevLock ) => ( {\r\n\t\t\t\t\t\t\t\t\t\t\t...prevLock,\r\n\t\t\t\t\t\t\t\t\t\t\tedit,\r\n\t\t\t\t\t\t\t\t\t\t} ) )\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\t\t\tclassName=\"block-editor-block-lock-modal__lock-icon\"\r\n\t\t\t\t\t\t\t\t\ticon={ lock.edit ? lockIcon : unlockIcon }\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t<li className=\"block-editor-block-lock-modal__checklist-item\">\r\n\t\t\t\t\t\t\t<CheckboxControl\r\n\t\t\t\t\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t\t\t\t\t\tlabel={ __( 'Disable movement' ) }\r\n\t\t\t\t\t\t\t\tchecked={ lock.move }\r\n\t\t\t\t\t\t\t\tonChange={ ( move ) =>\r\n\t\t\t\t\t\t\t\t\tsetLock( ( prevLock ) => ( {\r\n\t\t\t\t\t\t\t\t\t\t...prevLock,\r\n\t\t\t\t\t\t\t\t\t\tmove,\r\n\t\t\t\t\t\t\t\t\t} ) )\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\t\tclassName=\"block-editor-block-lock-modal__lock-icon\"\r\n\t\t\t\t\t\t\t\ticon={ lock.move ? lockIcon : unlockIcon }\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t<li className=\"block-editor-block-lock-modal__checklist-item\">\r\n\t\t\t\t\t\t\t<CheckboxControl\r\n\t\t\t\t\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t\t\t\t\t\tlabel={ __( 'Prevent removal' ) }\r\n\t\t\t\t\t\t\t\tchecked={ lock.remove }\r\n\t\t\t\t\t\t\t\tonChange={ ( remove ) =>\r\n\t\t\t\t\t\t\t\t\tsetLock( ( prevLock ) => ( {\r\n\t\t\t\t\t\t\t\t\t\t...prevLock,\r\n\t\t\t\t\t\t\t\t\t\tremove,\r\n\t\t\t\t\t\t\t\t\t} ) )\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\t\tclassName=\"block-editor-block-lock-modal__lock-icon\"\r\n\t\t\t\t\t\t\t\ticon={ lock.remove ? lockIcon : unlockIcon }\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t\t{ hasTemplateLock && (\r\n\t\t\t\t\t\t<ToggleControl\r\n\t\t\t\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t\t\t\t\tclassName=\"block-editor-block-lock-modal__template-lock\"\r\n\t\t\t\t\t\t\tlabel={ __( 'Apply to all blocks inside' ) }\r\n\t\t\t\t\t\t\tchecked={ applyTemplateLock }\r\n\t\t\t\t\t\t\tdisabled={ lock.move && ! lock.remove }\r\n\t\t\t\t\t\t\tonChange={ () =>\r\n\t\t\t\t\t\t\t\tsetApplyTemplateLock( ! applyTemplateLock )\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t) }\r\n\t\t\t\t</div>\r\n\t\t\t\t<Flex\r\n\t\t\t\t\tclassName=\"block-editor-block-lock-modal__actions\"\r\n\t\t\t\t\tjustify=\"flex-end\"\r\n\t\t\t\t\texpanded={ false }\r\n\t\t\t\t>\r\n\t\t\t\t\t<FlexItem>\r\n\t\t\t\t\t\t<Button variant=\"tertiary\" onClick={ onClose }>\r\n\t\t\t\t\t\t\t{ __( 'Cancel' ) }\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</FlexItem>\r\n\t\t\t\t\t<FlexItem>\r\n\t\t\t\t\t\t<Button variant=\"primary\" type=\"submit\">\r\n\t\t\t\t\t\t\t{ __( 'Apply' ) }\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</FlexItem>\r\n\t\t\t\t</Flex>\r\n\t\t\t</form>\r\n\t\t</Modal>\r\n\t);\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { __ } from '@wordpress/i18n';\r\nimport { useReducer } from '@wordpress/element';\r\nimport { MenuItem } from '@wordpress/components';\r\nimport { lockOutline, unlock } from '@wordpress/icons';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport useBlockLock from './use-block-lock';\r\nimport BlockLockModal from './modal';\r\n\r\nexport default function BlockLockMenuItem( { clientId } ) {\r\n\tconst { canLock, isLocked } = useBlockLock( clientId );\r\n\r\n\tconst [ isModalOpen, toggleModal ] = useReducer(\r\n\t\t( isActive ) => ! isActive,\r\n\t\tfalse\r\n\t);\r\n\r\n\tif ( ! canLock ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tconst label = isLocked ? __( 'Unlock' ) : __( 'Lock' );\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<MenuItem\r\n\t\t\t\ticon={ isLocked ? unlock : lockOutline }\r\n\t\t\t\tonClick={ toggleModal }\r\n\t\t\t\taria-expanded={ isModalOpen }\r\n\t\t\t\taria-haspopup=\"dialog\"\r\n\t\t\t>\r\n\t\t\t\t{ label }\r\n\t\t\t</MenuItem>\r\n\t\t\t{ isModalOpen && (\r\n\t\t\t\t<BlockLockModal clientId={ clientId } onClose={ toggleModal } />\r\n\t\t\t) }\r\n\t\t</>\r\n\t);\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { __ } from '@wordpress/i18n';\r\nimport { MenuItem } from '@wordpress/components';\r\nimport { getBlockType, hasBlockSupport } from '@wordpress/blocks';\r\nimport { withSelect, withDispatch } from '@wordpress/data';\r\nimport { compose } from '@wordpress/compose';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as blockEditorStore } from '../../store';\r\n\r\nconst noop = () => {};\r\n\r\nexport function BlockModeToggle( {\r\n\tblockType,\r\n\tmode,\r\n\tonToggleMode,\r\n\tsmall = false,\r\n\tisCodeEditingEnabled = true,\r\n} ) {\r\n\tif (\r\n\t\t! blockType ||\r\n\t\t! hasBlockSupport( blockType, 'html', true ) ||\r\n\t\t! isCodeEditingEnabled\r\n\t) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tconst label =\r\n\t\tmode === 'visual' ? __( 'Edit as HTML' ) : __( 'Edit visually' );\r\n\r\n\treturn <MenuItem onClick={ onToggleMode }>{ ! small && label }</MenuItem>;\r\n}\r\n\r\nexport default compose( [\r\n\twithSelect( ( select, { clientId } ) => {\r\n\t\tconst { getBlock, getBlockMode, getSettings } =\r\n\t\t\tselect( blockEditorStore );\r\n\t\tconst block = getBlock( clientId );\r\n\t\tconst isCodeEditingEnabled = getSettings().codeEditingEnabled;\r\n\r\n\t\treturn {\r\n\t\t\tmode: getBlockMode( clientId ),\r\n\t\t\tblockType: block ? getBlockType( block.name ) : null,\r\n\t\t\tisCodeEditingEnabled,\r\n\t\t};\r\n\t} ),\r\n\twithDispatch( ( dispatch, { onToggle = noop, clientId } ) => ( {\r\n\t\tonToggleMode() {\r\n\t\t\tdispatch( blockEditorStore ).toggleBlockMode( clientId );\r\n\t\t\tonToggle();\r\n\t\t},\r\n\t} ) ),\r\n] )( BlockModeToggle );\r\n","export default function isEmptyString( testString ) {\r\n\treturn testString?.trim()?.length === 0;\r\n}\r\n","/**\n * WordPress dependencies\n */\nimport {\n\t__experimentalHStack as HStack,\n\t__experimentalVStack as VStack,\n\tButton,\n\tTextControl,\n\tModal,\n} from '@wordpress/components';\nimport { useInstanceId } from '@wordpress/compose';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { useState } from '@wordpress/element';\nimport { speak } from '@wordpress/a11y';\n\n/**\n * Internal dependencies\n */\nimport isEmptyString from './is-empty-string';\n\nexport default function BlockRenameModal( {\n\tblockName,\n\toriginalBlockName,\n\tonClose,\n\tonSave,\n} ) {\n\tconst [ editedBlockName, setEditedBlockName ] = useState( blockName );\n\n\tconst nameHasChanged = editedBlockName !== blockName;\n\tconst nameIsOriginal = editedBlockName === originalBlockName;\n\tconst nameIsEmpty = isEmptyString( editedBlockName );\n\n\tconst isNameValid = nameHasChanged || nameIsOriginal;\n\n\tconst autoSelectInputText = ( event ) => event.target.select();\n\n\tconst dialogDescription = useInstanceId(\n\t\tBlockRenameModal,\n\t\t`block-editor-rename-modal__description`\n\t);\n\n\tconst handleSubmit = () => {\n\t\tconst message =\n\t\t\tnameIsOriginal || nameIsEmpty\n\t\t\t\t? sprintf(\n\t\t\t\t\t\t/* translators: %s: new name/label for the block */\n\t\t\t\t\t\t__( 'Block name reset to: \"%s\".' ),\n\t\t\t\t\t\teditedBlockName\n\t\t\t\t  )\n\t\t\t\t: sprintf(\n\t\t\t\t\t\t/* translators: %s: new name/label for the block */\n\t\t\t\t\t\t__( 'Block name changed to: \"%s\".' ),\n\t\t\t\t\t\teditedBlockName\n\t\t\t\t  );\n\n\t\t// Must be assertive to immediately announce change.\n\t\tspeak( message, 'assertive' );\n\t\tonSave( editedBlockName );\n\n\t\t// Immediate close avoids ability to hit save multiple times.\n\t\tonClose();\n\t};\n\n\treturn (\n\t\t<Modal\n\t\t\ttitle={ __( 'Rename' ) }\n\t\t\tonRequestClose={ onClose }\n\t\t\toverlayClassName=\"block-editor-block-rename-modal\"\n\t\t\taria={ {\n\t\t\t\tdescribedby: dialogDescription,\n\t\t\t} }\n\t\t\tfocusOnMount=\"firstContentElement\"\n\t\t>\n\t\t\t<p id={ dialogDescription }>\n\t\t\t\t{ __( 'Enter a custom name for this block.' ) }\n\t\t\t</p>\n\t\t\t<form\n\t\t\t\tonSubmit={ ( e ) => {\n\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\tif ( ! isNameValid ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\thandleSubmit();\n\t\t\t\t} }\n\t\t\t>\n\t\t\t\t<VStack spacing=\"3\">\n\t\t\t\t\t<TextControl\n\t\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\tvalue={ editedBlockName }\n\t\t\t\t\t\tlabel={ __( 'Block name' ) }\n\t\t\t\t\t\thideLabelFromVision\n\t\t\t\t\t\tplaceholder={ originalBlockName }\n\t\t\t\t\t\tonChange={ setEditedBlockName }\n\t\t\t\t\t\tonFocus={ autoSelectInputText }\n\t\t\t\t\t/>\n\t\t\t\t\t<HStack justify=\"right\">\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\t\tvariant=\"tertiary\"\n\t\t\t\t\t\t\tonClick={ onClose }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Cancel' ) }\n\t\t\t\t\t\t</Button>\n\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t__next40pxDefaultSize\n\t\t\t\t\t\t\taria-disabled={ ! isNameValid }\n\t\t\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Save' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</HStack>\n\t\t\t\t</VStack>\n\t\t\t</form>\n\t\t</Modal>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { MenuItem } from '@wordpress/components';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { __ } from '@wordpress/i18n';\nimport { useState } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport { useBlockDisplayInformation } from '..';\nimport isEmptyString from './is-empty-string';\nimport BlockRenameModal from './modal';\n\nexport default function BlockRenameControl( { clientId } ) {\n\tconst [ renamingBlock, setRenamingBlock ] = useState( false );\n\n\tconst { metadata } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getBlockAttributes } = select( blockEditorStore );\n\n\t\t\tconst _metadata = getBlockAttributes( clientId )?.metadata;\n\t\t\treturn {\n\t\t\t\tmetadata: _metadata,\n\t\t\t};\n\t\t},\n\t\t[ clientId ]\n\t);\n\n\tconst { updateBlockAttributes } = useDispatch( blockEditorStore );\n\n\tconst customName = metadata?.name;\n\n\tfunction onChange( newName ) {\n\t\tupdateBlockAttributes( [ clientId ], {\n\t\t\tmetadata: {\n\t\t\t\t...( metadata && metadata ),\n\t\t\t\tname: newName,\n\t\t\t},\n\t\t} );\n\t}\n\n\tconst blockInformation = useBlockDisplayInformation( clientId );\n\n\treturn (\n\t\t<>\n\t\t\t<MenuItem\n\t\t\t\tonClick={ () => {\n\t\t\t\t\tsetRenamingBlock( true );\n\t\t\t\t} }\n\t\t\t\taria-expanded={ renamingBlock }\n\t\t\t\taria-haspopup=\"dialog\"\n\t\t\t>\n\t\t\t\t{ __( 'Rename' ) }\n\t\t\t</MenuItem>\n\t\t\t{ renamingBlock && (\n\t\t\t\t<BlockRenameModal\n\t\t\t\t\tblockName={ customName || '' }\n\t\t\t\t\toriginalBlockName={ blockInformation?.title }\n\t\t\t\t\tonClose={ () => setRenamingBlock( false ) }\n\t\t\t\t\tonSave={ ( newName ) => {\n\t\t\t\t\t\t// If the new value is the block's original name (e.g. `Group`)\n\t\t\t\t\t\t// or it is an empty string then assume the intent is to reset\n\t\t\t\t\t\t// the value. Therefore reset the metadata.\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tnewName === blockInformation?.title ||\n\t\t\t\t\t\t\tisEmptyString( newName )\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tnewName = undefined;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tonChange( newName );\n\t\t\t\t\t} }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport {\n\tcreateSlotFill,\n\tMenuGroup,\n\tMenuItem,\n\t__experimentalStyleProvider as StyleProvider,\n} from '@wordpress/components';\nimport { useSelect } from '@wordpress/data';\nimport { pipe } from '@wordpress/compose';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport {\n\tuseConvertToGroupButtonProps,\n\tConvertToGroupButton,\n} from '../convert-to-group-buttons';\nimport { BlockLockMenuItem, useBlockLock } from '../block-lock';\nimport { store as blockEditorStore } from '../../store';\nimport BlockModeToggle from '../block-settings-menu/block-mode-toggle';\n\nimport { BlockRenameControl, useBlockRename } from '../block-rename';\n\nconst { Fill, Slot } = createSlotFill( 'BlockSettingsMenuControls' );\n\nconst BlockSettingsMenuControlsSlot = ( { fillProps, clientIds = null } ) => {\n\tconst { selectedBlocks, selectedClientIds } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getBlockNamesByClientId, getSelectedBlockClientIds } =\n\t\t\t\tselect( blockEditorStore );\n\t\t\tconst ids =\n\t\t\t\tclientIds !== null ? clientIds : getSelectedBlockClientIds();\n\t\t\treturn {\n\t\t\t\tselectedBlocks: getBlockNamesByClientId( ids ),\n\t\t\t\tselectedClientIds: ids,\n\t\t\t};\n\t\t},\n\t\t[ clientIds ]\n\t);\n\n\tconst { canLock } = useBlockLock( selectedClientIds[ 0 ] );\n\tconst { canRename } = useBlockRename( selectedBlocks[ 0 ] );\n\tconst showLockButton = selectedClientIds.length === 1 && canLock;\n\tconst showRenameButton = selectedClientIds.length === 1 && canRename;\n\n\t// Check if current selection of blocks is Groupable or Ungroupable\n\t// and pass this props down to ConvertToGroupButton.\n\tconst convertToGroupButtonProps =\n\t\tuseConvertToGroupButtonProps( selectedClientIds );\n\tconst { isGroupable, isUngroupable } = convertToGroupButtonProps;\n\tconst showConvertToGroupButton = isGroupable || isUngroupable;\n\n\treturn (\n\t\t<Slot\n\t\t\tfillProps={ {\n\t\t\t\t...fillProps,\n\t\t\t\tselectedBlocks,\n\t\t\t\tselectedClientIds,\n\t\t\t} }\n\t\t>\n\t\t\t{ ( fills ) => {\n\t\t\t\tif (\n\t\t\t\t\t! fills?.length > 0 &&\n\t\t\t\t\t! showConvertToGroupButton &&\n\t\t\t\t\t! showLockButton\n\t\t\t\t) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\treturn (\n\t\t\t\t\t<MenuGroup>\n\t\t\t\t\t\t{ showConvertToGroupButton && (\n\t\t\t\t\t\t\t<ConvertToGroupButton\n\t\t\t\t\t\t\t\t{ ...convertToGroupButtonProps }\n\t\t\t\t\t\t\t\tonClose={ fillProps?.onClose }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t{ showLockButton && (\n\t\t\t\t\t\t\t<BlockLockMenuItem\n\t\t\t\t\t\t\t\tclientId={ selectedClientIds[ 0 ] }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t{ showRenameButton && (\n\t\t\t\t\t\t\t<BlockRenameControl\n\t\t\t\t\t\t\t\tclientId={ selectedClientIds[ 0 ] }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t{ fills }\n\t\t\t\t\t\t{ fillProps?.canMove && ! fillProps?.onlyBlock && (\n\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\tonClick={ pipe(\n\t\t\t\t\t\t\t\t\tfillProps?.onClose,\n\t\t\t\t\t\t\t\t\tfillProps?.onMoveTo\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ __( 'Move to' ) }\n\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t{ fillProps?.count === 1 && (\n\t\t\t\t\t\t\t<BlockModeToggle\n\t\t\t\t\t\t\t\tclientId={ fillProps?.firstBlockClientId }\n\t\t\t\t\t\t\t\tonToggle={ fillProps?.onClose }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</MenuGroup>\n\t\t\t\t);\n\t\t\t} }\n\t\t</Slot>\n\t);\n};\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/block-settings-menu-controls/README.md\n *\n * @param {Object} props Fill props.\n * @return {Element} Element.\n */\nfunction BlockSettingsMenuControls( { ...props } ) {\n\treturn (\n\t\t<StyleProvider document={ document }>\n\t\t\t<Fill { ...props } />\n\t\t</StyleProvider>\n\t);\n}\n\nBlockSettingsMenuControls.Slot = BlockSettingsMenuControlsSlot;\n\nexport default BlockSettingsMenuControls;\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { getBlockSupport } from '@wordpress/blocks';\r\n\r\nexport default function useBlockRename( name ) {\r\n\treturn {\r\n\t\tcanRename: getBlockSupport( name, 'renaming', true ),\r\n\t};\r\n}\r\n","/**\n * WordPress dependencies\n */\nimport { ToolbarButton, MenuItem } from '@wordpress/components';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { __ } from '@wordpress/i18n';\nimport { useCallback } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../store';\nimport { BlockControls, BlockSettingsMenuControls } from '../components';\nimport { unlock } from '../lock-unlock';\n\n// The implementation of content locking is mainly in this file, although the mechanism\n// to stop temporarily editing as blocks when an outside block is selected is on component StopEditingAsBlocksOnOutsideSelect\n// at block-editor/src/components/block-list/index.js.\n// Besides the components on this file and the file referenced above the implementation\n// also includes artifacts on the store (actions, reducers, and selector).\n\nfunction ContentLockControlsPure( { clientId, isSelected } ) {\n\tconst { getBlockListSettings, getSettings } = useSelect( blockEditorStore );\n\tconst { templateLock, isLockedByParent, isEditingAsBlocks } = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\t__unstableGetContentLockingParent,\n\t\t\t\tgetTemplateLock,\n\t\t\t\t__unstableGetTemporarilyEditingAsBlocks,\n\t\t\t} = select( blockEditorStore );\n\t\t\treturn {\n\t\t\t\ttemplateLock: getTemplateLock( clientId ),\n\t\t\t\tisLockedByParent:\n\t\t\t\t\t!! __unstableGetContentLockingParent( clientId ),\n\t\t\t\tisEditingAsBlocks:\n\t\t\t\t\t__unstableGetTemporarilyEditingAsBlocks() === clientId,\n\t\t\t};\n\t\t},\n\t\t[ clientId ]\n\t);\n\n\tconst {\n\t\tupdateSettings,\n\t\tupdateBlockListSettings,\n\t\t__unstableSetTemporarilyEditingAsBlocks,\n\t} = useDispatch( blockEditorStore );\n\tconst { stopEditingAsBlocks } = unlock( useDispatch( blockEditorStore ) );\n\tconst isContentLocked =\n\t\t! isLockedByParent && templateLock === 'contentOnly';\n\tconst { __unstableMarkNextChangeAsNotPersistent, updateBlockAttributes } =\n\t\tuseDispatch( blockEditorStore );\n\n\tconst stopEditingAsBlockCallback = useCallback( () => {\n\t\tstopEditingAsBlocks( clientId );\n\t}, [ clientId, stopEditingAsBlocks ] );\n\n\tif ( ! isContentLocked && ! isEditingAsBlocks ) {\n\t\treturn null;\n\t}\n\n\tconst showStopEditingAsBlocks = isEditingAsBlocks && ! isContentLocked;\n\tconst showStartEditingAsBlocks =\n\t\t! isEditingAsBlocks && isContentLocked && isSelected;\n\n\treturn (\n\t\t<>\n\t\t\t{ showStopEditingAsBlocks && (\n\t\t\t\t<>\n\t\t\t\t\t<BlockControls group=\"other\">\n\t\t\t\t\t\t<ToolbarButton onClick={ stopEditingAsBlockCallback }>\n\t\t\t\t\t\t\t{ __( 'Done' ) }\n\t\t\t\t\t\t</ToolbarButton>\n\t\t\t\t\t</BlockControls>\n\t\t\t\t</>\n\t\t\t) }\n\t\t\t{ showStartEditingAsBlocks && (\n\t\t\t\t<BlockSettingsMenuControls>\n\t\t\t\t\t{ ( { onClose } ) => (\n\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\t__unstableMarkNextChangeAsNotPersistent();\n\t\t\t\t\t\t\t\tupdateBlockAttributes( clientId, {\n\t\t\t\t\t\t\t\t\ttemplateLock: undefined,\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\tupdateBlockListSettings( clientId, {\n\t\t\t\t\t\t\t\t\t...getBlockListSettings( clientId ),\n\t\t\t\t\t\t\t\t\ttemplateLock: false,\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\tconst focusModeToRevert =\n\t\t\t\t\t\t\t\t\tgetSettings().focusMode;\n\t\t\t\t\t\t\t\tupdateSettings( { focusMode: true } );\n\t\t\t\t\t\t\t\t__unstableSetTemporarilyEditingAsBlocks(\n\t\t\t\t\t\t\t\t\tclientId,\n\t\t\t\t\t\t\t\t\tfocusModeToRevert\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tonClose();\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Modify' ) }\n\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t) }\n\t\t\t\t</BlockSettingsMenuControls>\n\t\t\t) }\n\t\t</>\n\t);\n}\n\nexport default {\n\tedit: ContentLockControlsPure,\n\thasSupport() {\n\t\treturn true;\n\t},\n};\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { addFilter } from '@wordpress/hooks';\r\nconst META_ATTRIBUTE_NAME = 'metadata';\r\n\r\n/**\r\n * Filters registered block settings, extending attributes to include `metadata`.\r\n *\r\n * see: https://github.com/WordPress/gutenberg/pull/40393/files#r864632012\r\n *\r\n * @param {Object} blockTypeSettings Original block settings.\r\n * @return {Object} Filtered block settings.\r\n */\r\nexport function addMetaAttribute( blockTypeSettings ) {\r\n\t// Allow blocks to specify their own attribute definition with default values if needed.\r\n\tif ( blockTypeSettings?.attributes?.[ META_ATTRIBUTE_NAME ]?.type ) {\r\n\t\treturn blockTypeSettings;\r\n\t}\r\n\r\n\tblockTypeSettings.attributes = {\r\n\t\t...blockTypeSettings.attributes,\r\n\t\t[ META_ATTRIBUTE_NAME ]: {\r\n\t\t\ttype: 'object',\r\n\t\t},\r\n\t};\r\n\r\n\treturn blockTypeSettings;\r\n}\r\n\r\naddFilter(\r\n\t'blocks.registerBlockType',\r\n\t'core/metadata/addMetaAttribute',\r\n\taddMetaAttribute\r\n);\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst blockDefault = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M19 8h-1V6h-5v2h-2V6H6v2H5c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-8c0-1.1-.9-2-2-2zm.5 10c0 .3-.2.5-.5.5H5c-.3 0-.5-.2-.5-.5v-8c0-.3.2-.5.5-.5h14c.3 0 .5.2.5.5v8z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default blockDefault;\r\n","/**\r\n * External dependencies\r\n */\r\nimport classnames from 'classnames';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { Icon } from '@wordpress/components';\r\nimport { blockDefault } from '@wordpress/icons';\r\nimport { memo } from '@wordpress/element';\r\n\r\nfunction BlockIcon( { icon, showColors = false, className, context } ) {\r\n\tif ( icon?.src === 'block-default' ) {\r\n\t\ticon = {\r\n\t\t\tsrc: blockDefault,\r\n\t\t};\r\n\t}\r\n\r\n\tconst renderedIcon = (\r\n\t\t<Icon icon={ icon && icon.src ? icon.src : icon } context={ context } />\r\n\t);\r\n\tconst style = showColors\r\n\t\t? {\r\n\t\t\t\tbackgroundColor: icon && icon.background,\r\n\t\t\t\tcolor: icon && icon.foreground,\r\n\t\t  }\r\n\t\t: {};\r\n\r\n\treturn (\r\n\t\t<span\r\n\t\t\tstyle={ style }\r\n\t\t\tclassName={ classnames( 'block-editor-block-icon', className, {\r\n\t\t\t\t'has-colors': showColors,\r\n\t\t\t} ) }\r\n\t\t>\r\n\t\t\t{ renderedIcon }\r\n\t\t</span>\r\n\t);\r\n}\r\n\r\n/**\r\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/block-icon/README.md\r\n */\r\nexport default memo( BlockIcon );\r\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Fragment, useMemo } from '@wordpress/element';\nimport {\n\t__experimentalHStack as HStack,\n\tPanelBody,\n\tToggleControl,\n} from '@wordpress/components';\nimport { createBlock, store as blocksStore } from '@wordpress/blocks';\nimport { useDispatch, useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { BlockIcon, InspectorControls } from '../components';\nimport { store as blockEditorStore } from '../store';\n\nconst EMPTY_OBJECT = {};\n\nfunction BlockHooksControlPure( {\n\tname,\n\tclientId,\n\tmetadata: { ignoredHookedBlocks = [] } = {},\n} ) {\n\tconst blockTypes = useSelect(\n\t\t( select ) => select( blocksStore ).getBlockTypes(),\n\t\t[]\n\t);\n\n\t// A hooked block added via a filter will not be exposed through a block\n\t// type's `blockHooks` property; however, if the containing layout has been\n\t// modified, it will be present in the anchor block's `ignoredHookedBlocks`\n\t// metadata.\n\tconst hookedBlocksForCurrentBlock = useMemo(\n\t\t() =>\n\t\t\tblockTypes?.filter(\n\t\t\t\t( { name: blockName, blockHooks } ) =>\n\t\t\t\t\t( blockHooks && name in blockHooks ) ||\n\t\t\t\t\tignoredHookedBlocks.includes( blockName )\n\t\t\t),\n\t\t[ blockTypes, name, ignoredHookedBlocks ]\n\t);\n\n\tconst { blockIndex, rootClientId, innerBlocksLength } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getBlocks, getBlockIndex, getBlockRootClientId } =\n\t\t\t\tselect( blockEditorStore );\n\n\t\t\treturn {\n\t\t\t\tblockIndex: getBlockIndex( clientId ),\n\t\t\t\tinnerBlocksLength: getBlocks( clientId )?.length,\n\t\t\t\trootClientId: getBlockRootClientId( clientId ),\n\t\t\t};\n\t\t},\n\t\t[ clientId ]\n\t);\n\n\tconst hookedBlockClientIds = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getBlocks, getGlobalBlockCount } =\n\t\t\t\tselect( blockEditorStore );\n\n\t\t\tconst _hookedBlockClientIds = hookedBlocksForCurrentBlock.reduce(\n\t\t\t\t( clientIds, block ) => {\n\t\t\t\t\t// If the block doesn't exist anywhere in the block tree,\n\t\t\t\t\t// we know that we have to set the toggle to disabled.\n\t\t\t\t\tif ( getGlobalBlockCount( block.name ) === 0 ) {\n\t\t\t\t\t\treturn clientIds;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst relativePosition = block?.blockHooks?.[ name ];\n\t\t\t\t\tlet candidates;\n\n\t\t\t\t\tswitch ( relativePosition ) {\n\t\t\t\t\t\tcase 'before':\n\t\t\t\t\t\tcase 'after':\n\t\t\t\t\t\t\t// Any of the current block's siblings (with the right block type) qualifies\n\t\t\t\t\t\t\t// as a hooked block (inserted `before` or `after` the current one), as the block\n\t\t\t\t\t\t\t// might've been automatically inserted and then moved around a bit by the user.\n\t\t\t\t\t\t\tcandidates = getBlocks( rootClientId );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'first_child':\n\t\t\t\t\t\tcase 'last_child':\n\t\t\t\t\t\t\t// Any of the current block's child blocks (with the right block type) qualifies\n\t\t\t\t\t\t\t// as a hooked first or last child block, as the block might've been automatically\n\t\t\t\t\t\t\t// inserted and then moved around a bit by the user.\n\t\t\t\t\t\t\tcandidates = getBlocks( clientId );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase undefined:\n\t\t\t\t\t\t\t// If we haven't found a blockHooks field with a relative position for the hooked\n\t\t\t\t\t\t\t// block, it means that it was added by a filter. In this case, we look for the block\n\t\t\t\t\t\t\t// both among the current block's siblings and its children.\n\t\t\t\t\t\t\tcandidates = [\n\t\t\t\t\t\t\t\t...getBlocks( rootClientId ),\n\t\t\t\t\t\t\t\t...getBlocks( clientId ),\n\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst hookedBlock = candidates?.find(\n\t\t\t\t\t\t( candidate ) => candidate.name === block.name\n\t\t\t\t\t);\n\n\t\t\t\t\t// If the block exists in the designated location, we consider it hooked\n\t\t\t\t\t// and show the toggle as enabled.\n\t\t\t\t\tif ( hookedBlock ) {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t...clientIds,\n\t\t\t\t\t\t\t[ block.name ]: hookedBlock.clientId,\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\t// If no hooked block was found in any of its designated locations,\n\t\t\t\t\t// we set the toggle to disabled.\n\t\t\t\t\treturn clientIds;\n\t\t\t\t},\n\t\t\t\t{}\n\t\t\t);\n\n\t\t\tif ( Object.values( _hookedBlockClientIds ).length > 0 ) {\n\t\t\t\treturn _hookedBlockClientIds;\n\t\t\t}\n\n\t\t\treturn EMPTY_OBJECT;\n\t\t},\n\t\t[ hookedBlocksForCurrentBlock, name, clientId, rootClientId ]\n\t);\n\n\tconst { insertBlock, removeBlock } = useDispatch( blockEditorStore );\n\n\tif ( ! hookedBlocksForCurrentBlock.length ) {\n\t\treturn null;\n\t}\n\n\t// Group by block namespace (i.e. prefix before the slash).\n\tconst groupedHookedBlocks = hookedBlocksForCurrentBlock.reduce(\n\t\t( groups, block ) => {\n\t\t\tconst [ namespace ] = block.name.split( '/' );\n\t\t\tif ( ! groups[ namespace ] ) {\n\t\t\t\tgroups[ namespace ] = [];\n\t\t\t}\n\t\t\tgroups[ namespace ].push( block );\n\t\t\treturn groups;\n\t\t},\n\t\t{}\n\t);\n\n\tconst insertBlockIntoDesignatedLocation = ( block, relativePosition ) => {\n\t\tswitch ( relativePosition ) {\n\t\t\tcase 'before':\n\t\t\tcase 'after':\n\t\t\t\tinsertBlock(\n\t\t\t\t\tblock,\n\t\t\t\t\trelativePosition === 'after' ? blockIndex + 1 : blockIndex,\n\t\t\t\t\trootClientId, // Insert as a child of the current block's parent\n\t\t\t\t\tfalse\n\t\t\t\t);\n\t\t\t\tbreak;\n\n\t\t\tcase 'first_child':\n\t\t\tcase 'last_child':\n\t\t\t\tinsertBlock(\n\t\t\t\t\tblock,\n\t\t\t\t\t// TODO: It'd be great if insertBlock() would accept negative indices for insertion.\n\t\t\t\t\trelativePosition === 'first_child' ? 0 : innerBlocksLength,\n\t\t\t\t\tclientId, // Insert as a child of the current block.\n\t\t\t\t\tfalse\n\t\t\t\t);\n\t\t\t\tbreak;\n\n\t\t\tcase undefined:\n\t\t\t\t// If we do not know the relative position, it is because the block was\n\t\t\t\t// added via a filter. In this case, we default to inserting it after the\n\t\t\t\t// current block.\n\t\t\t\tinsertBlock(\n\t\t\t\t\tblock,\n\t\t\t\t\tblockIndex + 1,\n\t\t\t\t\trootClientId, // Insert as a child of the current block's parent\n\t\t\t\t\tfalse\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\treturn (\n\t\t<InspectorControls>\n\t\t\t<PanelBody\n\t\t\t\tclassName=\"block-editor-hooks__block-hooks\"\n\t\t\t\ttitle={ __( 'Plugins' ) }\n\t\t\t\tinitialOpen\n\t\t\t>\n\t\t\t\t<p className=\"block-editor-hooks__block-hooks-helptext\">\n\t\t\t\t\t{ __(\n\t\t\t\t\t\t'Manage the inclusion of blocks added automatically by plugins.'\n\t\t\t\t\t) }\n\t\t\t\t</p>\n\t\t\t\t{ Object.keys( groupedHookedBlocks ).map( ( vendor ) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Fragment key={ vendor }>\n\t\t\t\t\t\t\t<h3>{ vendor }</h3>\n\t\t\t\t\t\t\t{ groupedHookedBlocks[ vendor ].map( ( block ) => {\n\t\t\t\t\t\t\t\tconst checked =\n\t\t\t\t\t\t\t\t\tblock.name in hookedBlockClientIds;\n\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\t\t\t\tchecked={ checked }\n\t\t\t\t\t\t\t\t\t\tkey={ block.title }\n\t\t\t\t\t\t\t\t\t\tlabel={\n\t\t\t\t\t\t\t\t\t\t\t<HStack justify=\"flex-start\">\n\t\t\t\t\t\t\t\t\t\t\t\t<BlockIcon\n\t\t\t\t\t\t\t\t\t\t\t\t\ticon={ block.icon }\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t<span>{ block.title }</span>\n\t\t\t\t\t\t\t\t\t\t\t</HStack>\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tonChange={ () => {\n\t\t\t\t\t\t\t\t\t\t\tif ( ! checked ) {\n\t\t\t\t\t\t\t\t\t\t\t\t// Create and insert block.\n\t\t\t\t\t\t\t\t\t\t\t\tconst relativePosition =\n\t\t\t\t\t\t\t\t\t\t\t\t\tblock.blockHooks[ name ];\n\t\t\t\t\t\t\t\t\t\t\t\tinsertBlockIntoDesignatedLocation(\n\t\t\t\t\t\t\t\t\t\t\t\t\tcreateBlock( block.name ),\n\t\t\t\t\t\t\t\t\t\t\t\t\trelativePosition\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t// Remove block.\n\t\t\t\t\t\t\t\t\t\t\tremoveBlock(\n\t\t\t\t\t\t\t\t\t\t\t\thookedBlockClientIds[\n\t\t\t\t\t\t\t\t\t\t\t\t\tblock.name\n\t\t\t\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t\t\t\tfalse\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t} ) }\n\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t);\n\t\t\t\t} ) }\n\t\t\t</PanelBody>\n\t\t</InspectorControls>\n\t);\n}\n\nexport default {\n\tedit: BlockHooksControlPure,\n\tattributeKeys: [ 'metadata' ],\n\thasSupport() {\n\t\treturn true;\n\t},\n};\n","/**\n * WordPress dependencies\n */\nimport { addFilter } from '@wordpress/hooks';\nimport { hasBlockSupport } from '@wordpress/blocks';\nimport { __ } from '@wordpress/i18n';\nimport { TextControl } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport { InspectorControls } from '../components';\n\n/**\n * Filters registered block settings, adding an `__experimentalLabel` callback if one does not already exist.\n *\n * @param {Object} settings Original block settings.\n *\n * @return {Object} Filtered block settings.\n */\nexport function addLabelCallback( settings ) {\n\t// If blocks provide their own label callback, do not override it.\n\tif ( settings.__experimentalLabel ) {\n\t\treturn settings;\n\t}\n\n\tconst supportsBlockNaming = hasBlockSupport(\n\t\tsettings,\n\t\t'renaming',\n\t\ttrue // default value\n\t);\n\n\t// Check whether block metadata is supported before using it.\n\tif ( supportsBlockNaming ) {\n\t\tsettings.__experimentalLabel = ( attributes, { context } ) => {\n\t\t\tconst { metadata } = attributes;\n\n\t\t\t// In the list view, use the block's name attribute as the label.\n\t\t\tif ( context === 'list-view' && metadata?.name ) {\n\t\t\t\treturn metadata.name;\n\t\t\t}\n\t\t};\n\t}\n\n\treturn settings;\n}\n\nfunction BlockRenameControlPure( { metadata, setAttributes } ) {\n\treturn (\n\t\t<InspectorControls group=\"advanced\">\n\t\t\t<TextControl\n\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t__next40pxDefaultSize\n\t\t\t\tlabel={ __( 'Block name' ) }\n\t\t\t\tvalue={ metadata?.name || '' }\n\t\t\t\tonChange={ ( newName ) => {\n\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\tmetadata: { ...metadata, name: newName },\n\t\t\t\t\t} );\n\t\t\t\t} }\n\t\t\t/>\n\t\t</InspectorControls>\n\t);\n}\n\nexport default {\n\tedit: BlockRenameControlPure,\n\tattributeKeys: [ 'metadata' ],\n\thasSupport( name ) {\n\t\treturn hasBlockSupport( name, 'renaming', true );\n\t},\n};\n\naddFilter(\n\t'blocks.registerBlockType',\n\t'core/metadata/addLabelCallback',\n\taddLabelCallback\n);\n","/**\n * WordPress dependencies\n */\nimport { getBlockType, store as blocksStore } from '@wordpress/blocks';\nimport { createHigherOrderComponent } from '@wordpress/compose';\nimport { useSelect } from '@wordpress/data';\nimport { useLayoutEffect, useCallback, useState } from '@wordpress/element';\nimport { addFilter } from '@wordpress/hooks';\nimport { RichTextData } from '@wordpress/rich-text';\n\n/**\n * Internal dependencies\n */\nimport { unlock } from '../lock-unlock';\n\n/** @typedef {import('@wordpress/compose').WPHigherOrderComponent} WPHigherOrderComponent */\n/** @typedef {import('@wordpress/blocks').WPBlockSettings} WPBlockSettings */\n\n/**\n * Given a binding of block attributes, returns a higher order component that\n * overrides its `attributes` and `setAttributes` props to sync any changes needed.\n *\n * @return {WPHigherOrderComponent} Higher-order component.\n */\n\nconst BLOCK_BINDINGS_ALLOWED_BLOCKS = {\n\t'core/paragraph': [ 'content' ],\n\t'core/heading': [ 'content' ],\n\t'core/image': [ 'url', 'title', 'alt' ],\n\t'core/button': [ 'url', 'text', 'linkTarget' ],\n};\n\n/**\n * Based on the given block name,\n * check if it is possible to bind the block.\n *\n * @param {string} blockName - The block name.\n * @return {boolean} Whether it is possible to bind the block to sources.\n */\nexport function canBindBlock( blockName ) {\n\treturn blockName in BLOCK_BINDINGS_ALLOWED_BLOCKS;\n}\n\n/**\n * Based on the given block name and attribute name,\n * check if it is possible to bind the block attribute.\n *\n * @param {string} blockName     - The block name.\n * @param {string} attributeName - The attribute name.\n * @return {boolean} Whether it is possible to bind the block attribute.\n */\nexport function canBindAttribute( blockName, attributeName ) {\n\treturn (\n\t\tcanBindBlock( blockName ) &&\n\t\tBLOCK_BINDINGS_ALLOWED_BLOCKS[ blockName ].includes( attributeName )\n\t);\n}\n\n/**\n * This component is responsible for detecting and\n * propagating data changes from the source to the block.\n *\n * @param {Object}   props                   - The component props.\n * @param {string}   props.attrName          - The attribute name.\n * @param {Object}   props.blockProps        - The block props with bound attribute.\n * @param {Object}   props.source            - Source handler.\n * @param {Object}   props.args              - The arguments to pass to the source.\n * @param {Function} props.onPropValueChange - The function to call when the attribute value changes.\n * @return {null}                              Data-handling component. Render nothing.\n */\nconst BindingConnector = ( {\n\targs,\n\tattrName,\n\tblockProps,\n\tsource,\n\tonPropValueChange,\n} ) => {\n\tconst { placeholder, value: propValue } = source.useSource(\n\t\tblockProps,\n\t\targs\n\t);\n\n\tconst { name: blockName } = blockProps;\n\tconst attrValue = blockProps.attributes[ attrName ];\n\n\tconst updateBoundAttibute = useCallback(\n\t\t( newAttrValue, prevAttrValue ) => {\n\t\t\t/*\n\t\t\t * If the attribute is a RichTextData instance,\n\t\t\t * (core/paragraph, core/heading, core/button, etc.)\n\t\t\t * compare its HTML representation with the new value.\n\t\t\t *\n\t\t\t * To do: it looks like a workaround.\n\t\t\t * Consider improving the attribute and metadata fields types.\n\t\t\t */\n\t\t\tif ( prevAttrValue instanceof RichTextData ) {\n\t\t\t\t// Bail early if the Rich Text value is the same.\n\t\t\t\tif ( prevAttrValue.toHTMLString() === newAttrValue ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t/*\n\t\t\t\t * To preserve the value type,\n\t\t\t\t * convert the new value to a RichTextData instance.\n\t\t\t\t */\n\t\t\t\tnewAttrValue = RichTextData.fromHTMLString( newAttrValue );\n\t\t\t}\n\n\t\t\tif ( prevAttrValue === newAttrValue ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tonPropValueChange( { [ attrName ]: newAttrValue } );\n\t\t},\n\t\t[ attrName, onPropValueChange ]\n\t);\n\n\tuseLayoutEffect( () => {\n\t\tif ( typeof propValue !== 'undefined' ) {\n\t\t\tupdateBoundAttibute( propValue, attrValue );\n\t\t} else if ( placeholder ) {\n\t\t\t/*\n\t\t\t * Placeholder fallback.\n\t\t\t * If the attribute is `src` or `href`,\n\t\t\t * a placeholder can't be used because it is not a valid url.\n\t\t\t * Adding this workaround until\n\t\t\t * attributes and metadata fields types are improved and include `url`.\n\t\t\t */\n\t\t\tconst htmlAttribute =\n\t\t\t\tgetBlockType( blockName ).attributes[ attrName ].attribute;\n\n\t\t\tif ( htmlAttribute === 'src' || htmlAttribute === 'href' ) {\n\t\t\t\tupdateBoundAttibute( null );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdateBoundAttibute( placeholder );\n\t\t}\n\t}, [\n\t\tupdateBoundAttibute,\n\t\tpropValue,\n\t\tattrValue,\n\t\tplaceholder,\n\t\tblockName,\n\t\tattrName,\n\t] );\n\n\treturn null;\n};\n\n/**\n * BlockBindingBridge acts like a component wrapper\n * that connects the bound attributes of a block\n * to the source handlers.\n * For this, it creates a BindingConnector for each bound attribute.\n *\n * @param {Object}   props                   - The component props.\n * @param {Object}   props.blockProps        - The BlockEdit props object.\n * @param {Object}   props.bindings          - The block bindings settings.\n * @param {Function} props.onPropValueChange - The function to call when the attribute value changes.\n * @return {null}                              Data-handling component. Render nothing.\n */\nfunction BlockBindingBridge( { blockProps, bindings, onPropValueChange } ) {\n\tconst blockBindingsSources = unlock(\n\t\tuseSelect( blocksStore )\n\t).getAllBlockBindingsSources();\n\n\treturn (\n\t\t<>\n\t\t\t{ Object.entries( bindings ).map(\n\t\t\t\t( [ attrName, boundAttribute ] ) => {\n\t\t\t\t\t// Bail early if the block doesn't have a valid source handler.\n\t\t\t\t\tconst source =\n\t\t\t\t\t\tblockBindingsSources[ boundAttribute.source ];\n\t\t\t\t\tif ( ! source?.useSource ) {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<BindingConnector\n\t\t\t\t\t\t\tkey={ attrName }\n\t\t\t\t\t\t\tattrName={ attrName }\n\t\t\t\t\t\t\tsource={ source }\n\t\t\t\t\t\t\tblockProps={ blockProps }\n\t\t\t\t\t\t\targs={ boundAttribute.args }\n\t\t\t\t\t\t\tonPropValueChange={ onPropValueChange }\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t) }\n\t\t</>\n\t);\n}\n\nconst withBlockBindingSupport = createHigherOrderComponent(\n\t( BlockEdit ) => ( props ) => {\n\t\t/*\n\t\t * Collect and update the bound attributes\n\t\t * in a separate state.\n\t\t */\n\t\tconst [ boundAttributes, setBoundAttributes ] = useState( {} );\n\t\tconst updateBoundAttributes = useCallback(\n\t\t\t( newAttributes ) =>\n\t\t\t\tsetBoundAttributes( ( prev ) => ( {\n\t\t\t\t\t...prev,\n\t\t\t\t\t...newAttributes,\n\t\t\t\t} ) ),\n\t\t\t[]\n\t\t);\n\n\t\t/*\n\t\t * Create binding object filtering\n\t\t * only the attributes that can be bound.\n\t\t */\n\t\tconst bindings = Object.fromEntries(\n\t\t\tObject.entries( props.attributes.metadata?.bindings || {} ).filter(\n\t\t\t\t( [ attrName ] ) => canBindAttribute( props.name, attrName )\n\t\t\t)\n\t\t);\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t{ Object.keys( bindings ).length > 0 && (\n\t\t\t\t\t<BlockBindingBridge\n\t\t\t\t\t\tblockProps={ props }\n\t\t\t\t\t\tbindings={ bindings }\n\t\t\t\t\t\tonPropValueChange={ updateBoundAttributes }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\n\t\t\t\t<BlockEdit\n\t\t\t\t\t{ ...props }\n\t\t\t\t\tattributes={ { ...props.attributes, ...boundAttributes } }\n\t\t\t\t/>\n\t\t\t</>\n\t\t);\n\t},\n\t'withBlockBindingSupport'\n);\n\n/**\n * Filters a registered block's settings to enhance a block's `edit` component\n * to upgrade bound attributes.\n *\n * @param {WPBlockSettings} settings - Registered block settings.\n * @param {string}          name     - Block name.\n * @return {WPBlockSettings} Filtered block settings.\n */\nfunction shimAttributeSource( settings, name ) {\n\tif ( ! canBindBlock( name ) ) {\n\t\treturn settings;\n\t}\n\n\treturn {\n\t\t...settings,\n\t\tedit: withBlockBindingSupport( settings.edit ),\n\t};\n}\n\naddFilter(\n\t'blocks.registerBlockType',\n\t'core/editor/custom-sources-backwards-compatibility/shim-attribute-source',\n\tshimAttributeSource\n);\n","/**\r\n * Internal dependencies\r\n */\r\nimport { getInlineStyles } from './style';\r\nimport { getBorderClasses, getMultiOriginColor } from './border';\r\nimport useMultipleOriginColorsAndGradients from '../components/colors-gradients/use-multiple-origin-colors-and-gradients';\r\n\r\n// This utility is intended to assist where the serialization of the border\r\n// block support is being skipped for a block but the border related CSS classes\r\n// & styles still need to be generated so they can be applied to inner elements.\r\n\r\n/**\r\n * Provides the CSS class names and inline styles for a block's border support\r\n * attributes.\r\n *\r\n * @param {Object} attributes Block attributes.\r\n * @return {Object} Border block support derived CSS classes & styles.\r\n */\r\nexport function getBorderClassesAndStyles( attributes ) {\r\n\tconst border = attributes.style?.border || {};\r\n\tconst className = getBorderClasses( attributes );\r\n\r\n\treturn {\r\n\t\tclassName: className || undefined,\r\n\t\tstyle: getInlineStyles( { border } ),\r\n\t};\r\n}\r\n\r\n/**\r\n * Derives the border related props for a block from its border block support\r\n * attributes.\r\n *\r\n * Inline styles are forced for named colors to ensure these selections are\r\n * reflected when themes do not load their color stylesheets in the editor.\r\n *\r\n * @param {Object} attributes Block attributes.\r\n *\r\n * @return {Object} ClassName & style props from border block support.\r\n */\r\nexport function useBorderProps( attributes ) {\r\n\tconst { colors } = useMultipleOriginColorsAndGradients();\r\n\tconst borderProps = getBorderClassesAndStyles( attributes );\r\n\tconst { borderColor } = attributes;\r\n\r\n\t// Force inline styles to apply named border colors when themes do not load\r\n\t// their color stylesheets in the editor.\r\n\tif ( borderColor ) {\r\n\t\tconst borderColorObject = getMultiOriginColor( {\r\n\t\t\tcolors,\r\n\t\t\tnamedColor: borderColor,\r\n\t\t} );\r\n\r\n\t\tborderProps.style.borderColor = borderColorObject.color;\r\n\t}\r\n\r\n\treturn borderProps;\r\n}\r\n","/**\n * Internal dependencies\n */\nimport { getInlineStyles } from './style';\n\n// This utility is intended to assist where the serialization of the shadow\n// block support is being skipped for a block but the shadow related CSS classes\n// & styles still need to be generated so they can be applied to inner elements.\n\n/**\n * Provides the CSS class names and inline styles for a block's shadow support\n * attributes.\n *\n * @param {Object} attributes Block attributes.\n * @return {Object} Shadow block support derived CSS classes & styles.\n */\nexport function getShadowClassesAndStyles( attributes ) {\n\tconst shadow = attributes.style?.shadow || '';\n\n\treturn {\n\t\tstyle: getInlineStyles( { shadow } ),\n\t};\n}\n","/**\r\n * External dependencies\r\n */\r\nimport classnames from 'classnames';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { useMemo } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { getInlineStyles } from './style';\r\nimport {\r\n\tgetColorClassName,\r\n\tgetColorObjectByAttributeValues,\r\n} from '../components/colors';\r\nimport {\r\n\t__experimentalGetGradientClass,\r\n\tgetGradientValueBySlug,\r\n} from '../components/gradients';\r\nimport { useSettings } from '../components/use-settings';\r\n\r\n// The code in this file has largely been lifted from the color block support\r\n// hook.\r\n//\r\n// This utility is intended to assist where the serialization of the colors\r\n// block support is being skipped for a block but the color related CSS classes\r\n// & styles still need to be generated so they can be applied to inner elements.\r\n\r\n/**\r\n * Provides the CSS class names and inline styles for a block's color support\r\n * attributes.\r\n *\r\n * @param {Object} attributes Block attributes.\r\n *\r\n * @return {Object} Color block support derived CSS classes & styles.\r\n */\r\nexport function getColorClassesAndStyles( attributes ) {\r\n\tconst { backgroundColor, textColor, gradient, style } = attributes;\r\n\r\n\t// Collect color CSS classes.\r\n\tconst backgroundClass = getColorClassName(\r\n\t\t'background-color',\r\n\t\tbackgroundColor\r\n\t);\r\n\tconst textClass = getColorClassName( 'color', textColor );\r\n\r\n\tconst gradientClass = __experimentalGetGradientClass( gradient );\r\n\tconst hasGradient = gradientClass || style?.color?.gradient;\r\n\r\n\t// Determine color CSS class name list.\r\n\tconst className = classnames( textClass, gradientClass, {\r\n\t\t// Don't apply the background class if there's a gradient.\r\n\t\t[ backgroundClass ]: ! hasGradient && !! backgroundClass,\r\n\t\t'has-text-color': textColor || style?.color?.text,\r\n\t\t'has-background':\r\n\t\t\tbackgroundColor ||\r\n\t\t\tstyle?.color?.background ||\r\n\t\t\tgradient ||\r\n\t\t\tstyle?.color?.gradient,\r\n\t\t'has-link-color': style?.elements?.link?.color,\r\n\t} );\r\n\r\n\t// Collect inline styles for colors.\r\n\tconst colorStyles = style?.color || {};\r\n\tconst styleProp = getInlineStyles( { color: colorStyles } );\r\n\r\n\treturn {\r\n\t\tclassName: className || undefined,\r\n\t\tstyle: styleProp,\r\n\t};\r\n}\r\n\r\n/**\r\n * Determines the color related props for a block derived from its color block\r\n * support attributes.\r\n *\r\n * Inline styles are forced for named colors to ensure these selections are\r\n * reflected when themes do not load their color stylesheets in the editor.\r\n *\r\n * @param {Object} attributes Block attributes.\r\n *\r\n * @return {Object} ClassName & style props from colors block support.\r\n */\r\nexport function useColorProps( attributes ) {\r\n\tconst { backgroundColor, textColor, gradient } = attributes;\r\n\r\n\tconst [\r\n\t\tuserPalette,\r\n\t\tthemePalette,\r\n\t\tdefaultPalette,\r\n\t\tuserGradients,\r\n\t\tthemeGradients,\r\n\t\tdefaultGradients,\r\n\t] = useSettings(\r\n\t\t'color.palette.custom',\r\n\t\t'color.palette.theme',\r\n\t\t'color.palette.default',\r\n\t\t'color.gradients.custom',\r\n\t\t'color.gradients.theme',\r\n\t\t'color.gradients.default'\r\n\t);\r\n\r\n\tconst colors = useMemo(\r\n\t\t() => [\r\n\t\t\t...( userPalette || [] ),\r\n\t\t\t...( themePalette || [] ),\r\n\t\t\t...( defaultPalette || [] ),\r\n\t\t],\r\n\t\t[ userPalette, themePalette, defaultPalette ]\r\n\t);\r\n\tconst gradients = useMemo(\r\n\t\t() => [\r\n\t\t\t...( userGradients || [] ),\r\n\t\t\t...( themeGradients || [] ),\r\n\t\t\t...( defaultGradients || [] ),\r\n\t\t],\r\n\t\t[ userGradients, themeGradients, defaultGradients ]\r\n\t);\r\n\r\n\tconst colorProps = getColorClassesAndStyles( attributes );\r\n\r\n\t// Force inline styles to apply colors when themes do not load their color\r\n\t// stylesheets in the editor.\r\n\tif ( backgroundColor ) {\r\n\t\tconst backgroundColorObject = getColorObjectByAttributeValues(\r\n\t\t\tcolors,\r\n\t\t\tbackgroundColor\r\n\t\t);\r\n\r\n\t\tcolorProps.style.backgroundColor = backgroundColorObject.color;\r\n\t}\r\n\r\n\tif ( gradient ) {\r\n\t\tcolorProps.style.background = getGradientValueBySlug(\r\n\t\t\tgradients,\r\n\t\t\tgradient\r\n\t\t);\r\n\t}\r\n\r\n\tif ( textColor ) {\r\n\t\tconst textColorObject = getColorObjectByAttributeValues(\r\n\t\t\tcolors,\r\n\t\t\ttextColor\r\n\t\t);\r\n\r\n\t\tcolorProps.style.color = textColorObject.color;\r\n\t}\r\n\r\n\treturn colorProps;\r\n}\r\n","/**\r\n * Internal dependencies\r\n */\r\nimport { getInlineStyles } from './style';\r\n\r\n// This utility is intended to assist where the serialization of the spacing\r\n// block support is being skipped for a block but the spacing related CSS\r\n// styles still need to be generated so they can be applied to inner elements.\r\n\r\n/**\r\n * Provides the CSS class names and inline styles for a block's spacing support\r\n * attributes.\r\n *\r\n * @param {Object} attributes Block attributes.\r\n *\r\n * @return {Object} Spacing block support derived CSS classes & styles.\r\n */\r\nexport function getSpacingClassesAndStyles( attributes ) {\r\n\tconst { style } = attributes;\r\n\r\n\t// Collect inline styles for spacing.\r\n\tconst spacingStyles = style?.spacing || {};\r\n\tconst styleProp = getInlineStyles( { spacing: spacingStyles } );\r\n\r\n\treturn {\r\n\t\tstyle: styleProp,\r\n\t};\r\n}\r\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { privateApis as componentsPrivateApis } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport { getInlineStyles } from './style';\nimport { getFontSizeClass } from '../components/font-sizes';\nimport { getTypographyFontSizeValue } from '../components/global-styles/typography-utils';\nimport { unlock } from '../lock-unlock';\n\n/*\n * This utility is intended to assist where the serialization of the typography\n * block support is being skipped for a block but the typography related CSS\n * styles still need to be generated so they can be applied to inner elements.\n */\n/**\n * Provides the CSS class names and inline styles for a block's typography support\n * attributes.\n *\n * @param {Object}         attributes Block attributes.\n * @param {Object|boolean} settings   Merged theme.json settings\n *\n * @return {Object} Typography block support derived CSS classes & styles.\n */\nexport function getTypographyClassesAndStyles( attributes, settings ) {\n\tconst { kebabCase } = unlock( componentsPrivateApis );\n\tlet typographyStyles = attributes?.style?.typography || {};\n\ttypographyStyles = {\n\t\t...typographyStyles,\n\t\tfontSize: getTypographyFontSizeValue(\n\t\t\t{ size: attributes?.style?.typography?.fontSize },\n\t\t\tsettings\n\t\t),\n\t};\n\n\tconst style = getInlineStyles( { typography: typographyStyles } );\n\tconst fontFamilyClassName = !! attributes?.fontFamily\n\t\t? `has-${ kebabCase( attributes.fontFamily ) }-font-family`\n\t\t: '';\n\n\tconst className = classnames(\n\t\tfontFamilyClassName,\n\t\tgetFontSizeClass( attributes?.fontSize )\n\t);\n\n\treturn {\n\t\tclassName,\n\t\tstyle,\n\t};\n}\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useState, useEffect } from '@wordpress/element';\r\n\r\n/**\r\n * Keeps an up-to-date copy of the passed value and returns it. If value becomes falsy, it will return the last truthy copy.\r\n *\r\n * @param {any} value\r\n * @return {any} value\r\n */\r\nexport function useCachedTruthy( value ) {\r\n\tconst [ cachedValue, setCachedValue ] = useState( value );\r\n\tuseEffect( () => {\r\n\t\tif ( value ) {\r\n\t\t\tsetCachedValue( value );\r\n\t\t}\r\n\t}, [ value ] );\r\n\treturn cachedValue;\r\n}\r\n","/**\n * WordPress dependencies\n */\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { useEffect } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../store';\n\n/**\n * A hook used to set the editor mode to zoomed out mode, invoking the hook sets the mode.\n */\nexport function useZoomOut() {\n\tconst { __unstableSetEditorMode } = useDispatch( blockEditorStore );\n\tconst { mode } = useSelect( ( select ) => {\n\t\treturn {\n\t\t\tmode: select( blockEditorStore ).__unstableGetEditorMode(),\n\t\t};\n\t}, [] );\n\n\t// Intentionality left without any dependency.\n\t// This effect should only run when the component is rendered and unmounted.\n\t// The effect opens the zoom-out view if it is not open before when applying a style variation.\n\tuseEffect( () => {\n\t\tif ( mode !== 'zoom-out' ) {\n\t\t\t__unstableSetEditorMode( 'zoom-out' );\n\t\t\treturn () => {\n\t\t\t\t// Revert to original mode\n\t\t\t\t__unstableSetEditorMode( mode );\n\t\t\t};\n\t\t}\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [] );\n}\n","/**\n * Internal dependencies\n */\nimport {\n\tcreateBlockEditFilter,\n\tcreateBlockListBlockFilter,\n\tcreateBlockSaveFilter,\n} from './utils';\nimport './compat';\nimport align from './align';\nimport background from './background';\nimport './lock';\nimport anchor from './anchor';\nimport ariaLabel from './aria-label';\nimport customClassName from './custom-class-name';\nimport './generated-class-name';\nimport style from './style';\nimport './settings';\nimport color from './color';\nimport dimensions from './dimensions';\nimport duotone from './duotone';\nimport fontFamily from './font-family';\nimport fontSize from './font-size';\nimport border from './border';\nimport position from './position';\nimport layout from './layout';\nimport childLayout from './layout-child';\nimport contentLockUI from './content-lock-ui';\nimport './metadata';\nimport blockHooks from './block-hooks';\nimport blockRenaming from './block-renaming';\nimport './use-bindings-attributes';\n\ncreateBlockEditFilter(\n\t[\n\t\talign,\n\t\tanchor,\n\t\tcustomClassName,\n\t\tstyle,\n\t\tduotone,\n\t\tposition,\n\t\tlayout,\n\t\tcontentLockUI,\n\t\tblockHooks,\n\t\tblockRenaming,\n\t\tchildLayout,\n\t].filter( Boolean )\n);\ncreateBlockListBlockFilter( [\n\talign,\n\tbackground,\n\tstyle,\n\tcolor,\n\tdimensions,\n\tduotone,\n\tfontFamily,\n\tfontSize,\n\tborder,\n\tposition,\n\tchildLayout,\n] );\ncreateBlockSaveFilter( [\n\talign,\n\tanchor,\n\tariaLabel,\n\tcustomClassName,\n\tborder,\n\tcolor,\n\tstyle,\n\tfontFamily,\n\tfontSize,\n] );\n\nexport { useCustomSides } from './dimensions';\nexport { useLayoutClasses, useLayoutStyles } from './layout';\nexport { getBorderClassesAndStyles, useBorderProps } from './use-border-props';\nexport { getShadowClassesAndStyles } from './use-shadow-props';\nexport { getColorClassesAndStyles, useColorProps } from './use-color-props';\nexport { getSpacingClassesAndStyles } from './use-spacing-props';\nexport { getTypographyClassesAndStyles } from './use-typography-props';\nexport { getGapCSSValue } from './gap';\nexport { useCachedTruthy } from './use-cached-truthy';\nexport { useZoomOut } from './use-zoom-out';\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useMemo, Component } from '@wordpress/element';\r\nimport { compose, createHigherOrderComponent } from '@wordpress/compose';\r\nimport { privateApis as componentsPrivateApis } from '@wordpress/components';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport {\r\n\tgetColorClassName,\r\n\tgetColorObjectByColorValue,\r\n\tgetColorObjectByAttributeValues,\r\n\tgetMostReadableColor,\r\n} from './utils';\r\nimport { useSettings } from '../use-settings';\r\nimport { unlock } from '../../lock-unlock';\r\n\r\n/**\r\n * Capitalizes the first letter in a string.\r\n *\r\n * @param {string} str The string whose first letter the function will capitalize.\r\n *\r\n * @return {string} Capitalized string.\r\n */\r\nconst upperFirst = ( [ firstLetter, ...rest ] ) =>\r\n\tfirstLetter.toUpperCase() + rest.join( '' );\r\n\r\n/**\r\n * Higher order component factory for injecting the `colorsArray` argument as\r\n * the colors prop in the `withCustomColors` HOC.\r\n *\r\n * @param {Array} colorsArray An array of color objects.\r\n *\r\n * @return {Function} The higher order component.\r\n */\r\nconst withCustomColorPalette = ( colorsArray ) =>\r\n\tcreateHigherOrderComponent(\r\n\t\t( WrappedComponent ) => ( props ) => (\r\n\t\t\t<WrappedComponent { ...props } colors={ colorsArray } />\r\n\t\t),\r\n\t\t'withCustomColorPalette'\r\n\t);\r\n\r\n/**\r\n * Higher order component factory for injecting the editor colors as the\r\n * `colors` prop in the `withColors` HOC.\r\n *\r\n * @return {Function} The higher order component.\r\n */\r\nconst withEditorColorPalette = () =>\r\n\tcreateHigherOrderComponent(\r\n\t\t( WrappedComponent ) => ( props ) => {\r\n\t\t\tconst [ userPalette, themePalette, defaultPalette ] = useSettings(\r\n\t\t\t\t'color.palette.custom',\r\n\t\t\t\t'color.palette.theme',\r\n\t\t\t\t'color.palette.default'\r\n\t\t\t);\r\n\t\t\tconst allColors = useMemo(\r\n\t\t\t\t() => [\r\n\t\t\t\t\t...( userPalette || [] ),\r\n\t\t\t\t\t...( themePalette || [] ),\r\n\t\t\t\t\t...( defaultPalette || [] ),\r\n\t\t\t\t],\r\n\t\t\t\t[ userPalette, themePalette, defaultPalette ]\r\n\t\t\t);\r\n\t\t\treturn <WrappedComponent { ...props } colors={ allColors } />;\r\n\t\t},\r\n\t\t'withEditorColorPalette'\r\n\t);\r\n\r\n/**\r\n * Helper function used with `createHigherOrderComponent` to create\r\n * higher order components for managing color logic.\r\n *\r\n * @param {Array}    colorTypes       An array of color types (e.g. 'backgroundColor, borderColor).\r\n * @param {Function} withColorPalette A HOC for injecting the 'colors' prop into the WrappedComponent.\r\n *\r\n * @return {Component} The component that can be used as a HOC.\r\n */\r\nfunction createColorHOC( colorTypes, withColorPalette ) {\r\n\tconst { kebabCase } = unlock( componentsPrivateApis );\r\n\tconst colorMap = colorTypes.reduce( ( colorObject, colorType ) => {\r\n\t\treturn {\r\n\t\t\t...colorObject,\r\n\t\t\t...( typeof colorType === 'string'\r\n\t\t\t\t? { [ colorType ]: kebabCase( colorType ) }\r\n\t\t\t\t: colorType ),\r\n\t\t};\r\n\t}, {} );\r\n\r\n\treturn compose( [\r\n\t\twithColorPalette,\r\n\t\t( WrappedComponent ) => {\r\n\t\t\treturn class extends Component {\r\n\t\t\t\tconstructor( props ) {\r\n\t\t\t\t\tsuper( props );\r\n\r\n\t\t\t\t\tthis.setters = this.createSetters();\r\n\t\t\t\t\tthis.colorUtils = {\r\n\t\t\t\t\t\tgetMostReadableColor:\r\n\t\t\t\t\t\t\tthis.getMostReadableColor.bind( this ),\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tthis.state = {};\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgetMostReadableColor( colorValue ) {\r\n\t\t\t\t\tconst { colors } = this.props;\r\n\t\t\t\t\treturn getMostReadableColor( colors, colorValue );\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcreateSetters() {\r\n\t\t\t\t\treturn Object.keys( colorMap ).reduce(\r\n\t\t\t\t\t\t( settersAccumulator, colorAttributeName ) => {\r\n\t\t\t\t\t\t\tconst upperFirstColorAttributeName =\r\n\t\t\t\t\t\t\t\tupperFirst( colorAttributeName );\r\n\t\t\t\t\t\t\tconst customColorAttributeName = `custom${ upperFirstColorAttributeName }`;\r\n\t\t\t\t\t\t\tsettersAccumulator[\r\n\t\t\t\t\t\t\t\t`set${ upperFirstColorAttributeName }`\r\n\t\t\t\t\t\t\t] = this.createSetColor(\r\n\t\t\t\t\t\t\t\tcolorAttributeName,\r\n\t\t\t\t\t\t\t\tcustomColorAttributeName\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\treturn settersAccumulator;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{}\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcreateSetColor( colorAttributeName, customColorAttributeName ) {\r\n\t\t\t\t\treturn ( colorValue ) => {\r\n\t\t\t\t\t\tconst colorObject = getColorObjectByColorValue(\r\n\t\t\t\t\t\t\tthis.props.colors,\r\n\t\t\t\t\t\t\tcolorValue\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tthis.props.setAttributes( {\r\n\t\t\t\t\t\t\t[ colorAttributeName ]:\r\n\t\t\t\t\t\t\t\tcolorObject && colorObject.slug\r\n\t\t\t\t\t\t\t\t\t? colorObject.slug\r\n\t\t\t\t\t\t\t\t\t: undefined,\r\n\t\t\t\t\t\t\t[ customColorAttributeName ]:\r\n\t\t\t\t\t\t\t\tcolorObject && colorObject.slug\r\n\t\t\t\t\t\t\t\t\t? undefined\r\n\t\t\t\t\t\t\t\t\t: colorValue,\r\n\t\t\t\t\t\t} );\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\tstatic getDerivedStateFromProps(\r\n\t\t\t\t\t{ attributes, colors },\r\n\t\t\t\t\tpreviousState\r\n\t\t\t\t) {\r\n\t\t\t\t\treturn Object.entries( colorMap ).reduce(\r\n\t\t\t\t\t\t( newState, [ colorAttributeName, colorContext ] ) => {\r\n\t\t\t\t\t\t\tconst colorObject = getColorObjectByAttributeValues(\r\n\t\t\t\t\t\t\t\tcolors,\r\n\t\t\t\t\t\t\t\tattributes[ colorAttributeName ],\r\n\t\t\t\t\t\t\t\tattributes[\r\n\t\t\t\t\t\t\t\t\t`custom${ upperFirst(\r\n\t\t\t\t\t\t\t\t\t\tcolorAttributeName\r\n\t\t\t\t\t\t\t\t\t) }`\r\n\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\tconst previousColorObject =\r\n\t\t\t\t\t\t\t\tpreviousState[ colorAttributeName ];\r\n\t\t\t\t\t\t\tconst previousColor = previousColorObject?.color;\r\n\t\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t\t * The \"and previousColorObject\" condition checks that a previous color object was already computed.\r\n\t\t\t\t\t\t\t * At the start previousColorObject and colorValue are both equal to undefined\r\n\t\t\t\t\t\t\t * bus as previousColorObject does not exist we should compute the object.\r\n\t\t\t\t\t\t\t */\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\tpreviousColor === colorObject.color &&\r\n\t\t\t\t\t\t\t\tpreviousColorObject\r\n\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\tnewState[ colorAttributeName ] =\r\n\t\t\t\t\t\t\t\t\tpreviousColorObject;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tnewState[ colorAttributeName ] = {\r\n\t\t\t\t\t\t\t\t\t...colorObject,\r\n\t\t\t\t\t\t\t\t\tclass: getColorClassName(\r\n\t\t\t\t\t\t\t\t\t\tcolorContext,\r\n\t\t\t\t\t\t\t\t\t\tcolorObject.slug\r\n\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn newState;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{}\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\r\n\t\t\t\trender() {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<WrappedComponent\r\n\t\t\t\t\t\t\t{ ...{\r\n\t\t\t\t\t\t\t\t...this.props,\r\n\t\t\t\t\t\t\t\tcolors: undefined,\r\n\t\t\t\t\t\t\t\t...this.state,\r\n\t\t\t\t\t\t\t\t...this.setters,\r\n\t\t\t\t\t\t\t\tcolorUtils: this.colorUtils,\r\n\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t},\r\n\t] );\r\n}\r\n\r\n/**\r\n * A higher-order component factory for creating a 'withCustomColors' HOC, which handles color logic\r\n * for class generation color value, retrieval and color attribute setting.\r\n *\r\n * Use this higher-order component to work with a custom set of colors.\r\n *\r\n * @example\r\n *\r\n * ```jsx\r\n * const CUSTOM_COLORS = [ { name: 'Red', slug: 'red', color: '#ff0000' }, { name: 'Blue', slug: 'blue', color: '#0000ff' } ];\r\n * const withCustomColors = createCustomColorsHOC( CUSTOM_COLORS );\r\n * // ...\r\n * export default compose(\r\n *     withCustomColors( 'backgroundColor', 'borderColor' ),\r\n *     MyColorfulComponent,\r\n * );\r\n * ```\r\n *\r\n * @param {Array} colorsArray The array of color objects (name, slug, color, etc... ).\r\n *\r\n * @return {Function} Higher-order component.\r\n */\r\nexport function createCustomColorsHOC( colorsArray ) {\r\n\treturn ( ...colorTypes ) => {\r\n\t\tconst withColorPalette = withCustomColorPalette( colorsArray );\r\n\t\treturn createHigherOrderComponent(\r\n\t\t\tcreateColorHOC( colorTypes, withColorPalette ),\r\n\t\t\t'withCustomColors'\r\n\t\t);\r\n\t};\r\n}\r\n\r\n/**\r\n * A higher-order component, which handles color logic for class generation color value, retrieval and color attribute setting.\r\n *\r\n * For use with the default editor/theme color palette.\r\n *\r\n * @example\r\n *\r\n * ```jsx\r\n * export default compose(\r\n *     withColors( 'backgroundColor', { textColor: 'color' } ),\r\n *     MyColorfulComponent,\r\n * );\r\n * ```\r\n *\r\n * @param {...(Object|string)} colorTypes The arguments can be strings or objects. If the argument is an object,\r\n *                                        it should contain the color attribute name as key and the color context as value.\r\n *                                        If the argument is a string the value should be the color attribute name,\r\n *                                        the color context is computed by applying a kebab case transform to the value.\r\n *                                        Color context represents the context/place where the color is going to be used.\r\n *                                        The class name of the color is generated using 'has' followed by the color name\r\n *                                        and ending with the color context all in kebab case e.g: has-green-background-color.\r\n *\r\n * @return {Function} Higher-order component.\r\n */\r\nexport default function withColors( ...colorTypes ) {\r\n\tconst withColorPalette = withEditorColorPalette();\r\n\treturn createHigherOrderComponent(\r\n\t\tcreateColorHOC( colorTypes, withColorPalette ),\r\n\t\t'withColors'\r\n\t);\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { FontSizePicker as BaseFontSizePicker } from '@wordpress/components';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { useSettings } from '../use-settings';\r\n\r\nfunction FontSizePicker( props ) {\r\n\tconst [ fontSizes, customFontSize ] = useSettings(\r\n\t\t'typography.fontSizes',\r\n\t\t'typography.customFontSize'\r\n\t);\r\n\r\n\treturn (\r\n\t\t<BaseFontSizePicker\r\n\t\t\t{ ...props }\r\n\t\t\tfontSizes={ fontSizes }\r\n\t\t\tdisableCustomFontSizes={ ! customFontSize }\r\n\t\t/>\r\n\t);\r\n}\r\n\r\n/**\r\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/font-sizes/README.md\r\n */\r\nexport default FontSizePicker;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { createHigherOrderComponent, compose } from '@wordpress/compose';\r\nimport { Component } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { getFontSize, getFontSizeClass } from './utils';\r\nimport { useSettings } from '../use-settings';\r\n\r\nconst DEFAULT_FONT_SIZES = [];\r\n\r\n/**\r\n * Capitalizes the first letter in a string.\r\n *\r\n * @param {string} str The string whose first letter the function will capitalize.\r\n *\r\n * @return {string} Capitalized string.\r\n */\r\nconst upperFirst = ( [ firstLetter, ...rest ] ) =>\r\n\tfirstLetter.toUpperCase() + rest.join( '' );\r\n\r\n/**\r\n * Higher-order component, which handles font size logic for class generation,\r\n * font size value retrieval, and font size change handling.\r\n *\r\n * @param {...(Object|string)} fontSizeNames The arguments should all be strings.\r\n *                                           Each string contains the font size\r\n *                                           attribute name e.g: 'fontSize'.\r\n *\r\n * @return {Function} Higher-order component.\r\n */\r\nexport default ( ...fontSizeNames ) => {\r\n\t/*\r\n\t * Computes an object whose key is the font size attribute name as passed in the array,\r\n\t * and the value is the custom font size attribute name.\r\n\t * Custom font size is automatically compted by appending custom followed by the font size attribute name in with the first letter capitalized.\r\n\t */\r\n\tconst fontSizeAttributeNames = fontSizeNames.reduce(\r\n\t\t( fontSizeAttributeNamesAccumulator, fontSizeAttributeName ) => {\r\n\t\t\tfontSizeAttributeNamesAccumulator[\r\n\t\t\t\tfontSizeAttributeName\r\n\t\t\t] = `custom${ upperFirst( fontSizeAttributeName ) }`;\r\n\t\t\treturn fontSizeAttributeNamesAccumulator;\r\n\t\t},\r\n\t\t{}\r\n\t);\r\n\r\n\treturn createHigherOrderComponent(\r\n\t\tcompose( [\r\n\t\t\tcreateHigherOrderComponent(\r\n\t\t\t\t( WrappedComponent ) => ( props ) => {\r\n\t\t\t\t\tconst [ fontSizes ] = useSettings( 'typography.fontSizes' );\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<WrappedComponent\r\n\t\t\t\t\t\t\t{ ...props }\r\n\t\t\t\t\t\t\tfontSizes={ fontSizes || DEFAULT_FONT_SIZES }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t);\r\n\t\t\t\t},\r\n\t\t\t\t'withFontSizes'\r\n\t\t\t),\r\n\t\t\t( WrappedComponent ) => {\r\n\t\t\t\treturn class extends Component {\r\n\t\t\t\t\tconstructor( props ) {\r\n\t\t\t\t\t\tsuper( props );\r\n\r\n\t\t\t\t\t\tthis.setters = this.createSetters();\r\n\r\n\t\t\t\t\t\tthis.state = {};\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcreateSetters() {\r\n\t\t\t\t\t\treturn Object.entries( fontSizeAttributeNames ).reduce(\r\n\t\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\t\tsettersAccumulator,\r\n\t\t\t\t\t\t\t\t[\r\n\t\t\t\t\t\t\t\t\tfontSizeAttributeName,\r\n\t\t\t\t\t\t\t\t\tcustomFontSizeAttributeName,\r\n\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t) => {\r\n\t\t\t\t\t\t\t\tconst upperFirstFontSizeAttributeName =\r\n\t\t\t\t\t\t\t\t\tupperFirst( fontSizeAttributeName );\r\n\t\t\t\t\t\t\t\tsettersAccumulator[\r\n\t\t\t\t\t\t\t\t\t`set${ upperFirstFontSizeAttributeName }`\r\n\t\t\t\t\t\t\t\t] = this.createSetFontSize(\r\n\t\t\t\t\t\t\t\t\tfontSizeAttributeName,\r\n\t\t\t\t\t\t\t\t\tcustomFontSizeAttributeName\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\treturn settersAccumulator;\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{}\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcreateSetFontSize(\r\n\t\t\t\t\t\tfontSizeAttributeName,\r\n\t\t\t\t\t\tcustomFontSizeAttributeName\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\treturn ( fontSizeValue ) => {\r\n\t\t\t\t\t\t\tconst fontSizeObject = this.props.fontSizes?.find(\r\n\t\t\t\t\t\t\t\t( { size } ) => size === Number( fontSizeValue )\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tthis.props.setAttributes( {\r\n\t\t\t\t\t\t\t\t[ fontSizeAttributeName ]:\r\n\t\t\t\t\t\t\t\t\tfontSizeObject && fontSizeObject.slug\r\n\t\t\t\t\t\t\t\t\t\t? fontSizeObject.slug\r\n\t\t\t\t\t\t\t\t\t\t: undefined,\r\n\t\t\t\t\t\t\t\t[ customFontSizeAttributeName ]:\r\n\t\t\t\t\t\t\t\t\tfontSizeObject && fontSizeObject.slug\r\n\t\t\t\t\t\t\t\t\t\t? undefined\r\n\t\t\t\t\t\t\t\t\t\t: fontSizeValue,\r\n\t\t\t\t\t\t\t} );\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tstatic getDerivedStateFromProps(\r\n\t\t\t\t\t\t{ attributes, fontSizes },\r\n\t\t\t\t\t\tpreviousState\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tconst didAttributesChange = (\r\n\t\t\t\t\t\t\tcustomFontSizeAttributeName,\r\n\t\t\t\t\t\t\tfontSizeAttributeName\r\n\t\t\t\t\t\t) => {\r\n\t\t\t\t\t\t\tif ( previousState[ fontSizeAttributeName ] ) {\r\n\t\t\t\t\t\t\t\t// If new font size is name compare with the previous slug.\r\n\t\t\t\t\t\t\t\tif ( attributes[ fontSizeAttributeName ] ) {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\tattributes[ fontSizeAttributeName ] !==\r\n\t\t\t\t\t\t\t\t\t\tpreviousState[ fontSizeAttributeName ]\r\n\t\t\t\t\t\t\t\t\t\t\t.slug\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t// If font size is not named, update when the font size value changes.\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\tpreviousState[ fontSizeAttributeName ]\r\n\t\t\t\t\t\t\t\t\t\t.size !==\r\n\t\t\t\t\t\t\t\t\tattributes[ customFontSizeAttributeName ]\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// In this case we need to build the font size object.\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t! Object.values( fontSizeAttributeNames ).some(\r\n\t\t\t\t\t\t\t\tdidAttributesChange\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tconst newState = Object.entries(\r\n\t\t\t\t\t\t\tfontSizeAttributeNames\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t.filter( ( [ key, value ] ) =>\r\n\t\t\t\t\t\t\t\tdidAttributesChange( value, key )\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t.reduce(\r\n\t\t\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\t\t\tnewStateAccumulator,\r\n\t\t\t\t\t\t\t\t\t[\r\n\t\t\t\t\t\t\t\t\t\tfontSizeAttributeName,\r\n\t\t\t\t\t\t\t\t\t\tcustomFontSizeAttributeName,\r\n\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t) => {\r\n\t\t\t\t\t\t\t\t\tconst fontSizeAttributeValue =\r\n\t\t\t\t\t\t\t\t\t\tattributes[ fontSizeAttributeName ];\r\n\t\t\t\t\t\t\t\t\tconst fontSizeObject = getFontSize(\r\n\t\t\t\t\t\t\t\t\t\tfontSizes,\r\n\t\t\t\t\t\t\t\t\t\tfontSizeAttributeValue,\r\n\t\t\t\t\t\t\t\t\t\tattributes[\r\n\t\t\t\t\t\t\t\t\t\t\tcustomFontSizeAttributeName\r\n\t\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\tnewStateAccumulator[\r\n\t\t\t\t\t\t\t\t\t\tfontSizeAttributeName\r\n\t\t\t\t\t\t\t\t\t] = {\r\n\t\t\t\t\t\t\t\t\t\t...fontSizeObject,\r\n\t\t\t\t\t\t\t\t\t\tclass: getFontSizeClass(\r\n\t\t\t\t\t\t\t\t\t\t\tfontSizeAttributeValue\r\n\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\treturn newStateAccumulator;\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{}\r\n\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t...previousState,\r\n\t\t\t\t\t\t\t...newState,\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\trender() {\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<WrappedComponent\r\n\t\t\t\t\t\t\t\t{ ...{\r\n\t\t\t\t\t\t\t\t\t...this.props,\r\n\t\t\t\t\t\t\t\t\tfontSizes: undefined,\r\n\t\t\t\t\t\t\t\t\t...this.state,\r\n\t\t\t\t\t\t\t\t\t...this.setters,\r\n\t\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t] ),\r\n\t\t'withFontSizes'\r\n\t);\r\n};\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst alignLeft = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M13 5.5H4V4h9v1.5Zm7 7H4V11h16v1.5Zm-7 7H4V18h9v1.5Z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default alignLeft;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst alignCenter = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M7.5 5.5h9V4h-9v1.5Zm-3.5 7h16V11H4v1.5Zm3.5 7h9V18h-9v1.5Z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default alignCenter;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst alignRight = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M11.111 5.5H20V4h-8.889v1.5ZM4 12.5h16V11H4v1.5Zm7.111 7H20V18h-8.889v1.5Z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default alignRight;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { __, isRTL } from '@wordpress/i18n';\r\nimport { ToolbarDropdownMenu, ToolbarGroup } from '@wordpress/components';\r\nimport { alignLeft, alignRight, alignCenter } from '@wordpress/icons';\r\n\r\nconst DEFAULT_ALIGNMENT_CONTROLS = [\r\n\t{\r\n\t\ticon: alignLeft,\r\n\t\ttitle: __( 'Align text left' ),\r\n\t\talign: 'left',\r\n\t},\r\n\t{\r\n\t\ticon: alignCenter,\r\n\t\ttitle: __( 'Align text center' ),\r\n\t\talign: 'center',\r\n\t},\r\n\t{\r\n\t\ticon: alignRight,\r\n\t\ttitle: __( 'Align text right' ),\r\n\t\talign: 'right',\r\n\t},\r\n];\r\n\r\nconst POPOVER_PROPS = {\r\n\tplacement: 'bottom-start',\r\n};\r\n\r\nfunction AlignmentUI( {\r\n\tvalue,\r\n\tonChange,\r\n\talignmentControls = DEFAULT_ALIGNMENT_CONTROLS,\r\n\tlabel = __( 'Align text' ),\r\n\tdescribedBy = __( 'Change text alignment' ),\r\n\tisCollapsed = true,\r\n\tisToolbar,\r\n} ) {\r\n\tfunction applyOrUnset( align ) {\r\n\t\treturn () => onChange( value === align ? undefined : align );\r\n\t}\r\n\r\n\tconst activeAlignment = alignmentControls.find(\r\n\t\t( control ) => control.align === value\r\n\t);\r\n\r\n\tfunction setIcon() {\r\n\t\tif ( activeAlignment ) return activeAlignment.icon;\r\n\t\treturn isRTL() ? alignRight : alignLeft;\r\n\t}\r\n\r\n\tconst UIComponent = isToolbar ? ToolbarGroup : ToolbarDropdownMenu;\r\n\tconst extraProps = isToolbar\r\n\t\t? { isCollapsed }\r\n\t\t: {\r\n\t\t\t\ttoggleProps: {\r\n\t\t\t\t\tdescribedBy,\r\n\t\t\t\t},\r\n\t\t\t\tpopoverProps: POPOVER_PROPS,\r\n\t\t  };\r\n\r\n\treturn (\r\n\t\t<UIComponent\r\n\t\t\ticon={ setIcon() }\r\n\t\t\tlabel={ label }\r\n\t\t\tcontrols={ alignmentControls.map( ( control ) => {\r\n\t\t\t\tconst { align } = control;\r\n\t\t\t\tconst isActive = value === align;\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...control,\r\n\t\t\t\t\tisActive,\r\n\t\t\t\t\trole: isCollapsed ? 'menuitemradio' : undefined,\r\n\t\t\t\t\tonClick: applyOrUnset( align ),\r\n\t\t\t\t};\r\n\t\t\t} ) }\r\n\t\t\t{ ...extraProps }\r\n\t\t/>\r\n\t);\r\n}\r\n\r\nexport default AlignmentUI;\r\n","/**\r\n * Internal dependencies\r\n */\r\nimport AlignmentUI from './ui';\r\n\r\nconst AlignmentControl = ( props ) => {\r\n\treturn <AlignmentUI { ...props } isToolbar={ false } />;\r\n};\r\n\r\nconst AlignmentToolbar = ( props ) => {\r\n\treturn <AlignmentUI { ...props } isToolbar />;\r\n};\r\n\r\n/**\r\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/alignment-control/README.md\r\n */\r\nexport { AlignmentControl, AlignmentToolbar };\r\n","/**\n * Locale character mapping rules.\n */\ninterface Locale {\n  regexp: RegExp;\n  map: Record<string, string>;\n}\n\n/**\n * Source: ftp://ftp.unicode.org/Public/UCD/latest/ucd/SpecialCasing.txt\n */\nconst SUPPORTED_LOCALE: Record<string, Locale> = {\n  tr: {\n    regexp: /\\u0130|\\u0049|\\u0049\\u0307/g,\n    map: {\n      : \"\\u0069\",\n      I: \"\\u0131\",\n      I: \"\\u0069\",\n    },\n  },\n  az: {\n    regexp: /\\u0130/g,\n    map: {\n      : \"\\u0069\",\n      I: \"\\u0131\",\n      I: \"\\u0069\",\n    },\n  },\n  lt: {\n    regexp: /\\u0049|\\u004A|\\u012E|\\u00CC|\\u00CD|\\u0128/g,\n    map: {\n      I: \"\\u0069\\u0307\",\n      J: \"\\u006A\\u0307\",\n      : \"\\u012F\\u0307\",\n      : \"\\u0069\\u0307\\u0300\",\n      : \"\\u0069\\u0307\\u0301\",\n      : \"\\u0069\\u0307\\u0303\",\n    },\n  },\n};\n\n/**\n * Localized lower case.\n */\nexport function localeLowerCase(str: string, locale: string) {\n  const lang = SUPPORTED_LOCALE[locale.toLowerCase()];\n  if (lang) return lowerCase(str.replace(lang.regexp, (m) => lang.map[m]));\n  return lowerCase(str);\n}\n\n/**\n * Lower case as a function.\n */\nexport function lowerCase(str: string) {\n  return str.toLowerCase();\n}\n","import { lowerCase } from \"lower-case\";\n\nexport interface Options {\n  splitRegexp?: RegExp | RegExp[];\n  stripRegexp?: RegExp | RegExp[];\n  delimiter?: string;\n  transform?: (part: string, index: number, parts: string[]) => string;\n}\n\n// Support camel case (\"camelCase\" -> \"camel Case\" and \"CAMELCase\" -> \"CAMEL Case\").\nconst DEFAULT_SPLIT_REGEXP = [/([a-z0-9])([A-Z])/g, /([A-Z])([A-Z][a-z])/g];\n\n// Remove all non-word characters.\nconst DEFAULT_STRIP_REGEXP = /[^A-Z0-9]+/gi;\n\n/**\n * Normalize the string into something other libraries can manipulate easier.\n */\nexport function noCase(input: string, options: Options = {}) {\n  const {\n    splitRegexp = DEFAULT_SPLIT_REGEXP,\n    stripRegexp = DEFAULT_STRIP_REGEXP,\n    transform = lowerCase,\n    delimiter = \" \",\n  } = options;\n\n  let result = replace(\n    replace(input, splitRegexp, \"$1\\0$2\"),\n    stripRegexp,\n    \"\\0\"\n  );\n  let start = 0;\n  let end = result.length;\n\n  // Trim the delimiter from around the output string.\n  while (result.charAt(start) === \"\\0\") start++;\n  while (result.charAt(end - 1) === \"\\0\") end--;\n\n  // Transform each token independently.\n  return result.slice(start, end).split(\"\\0\").map(transform).join(delimiter);\n}\n\n/**\n * Replace `re` in the input string with the replacement value.\n */\nfunction replace(input: string, re: RegExp | RegExp[], value: string) {\n  if (re instanceof RegExp) return input.replace(re, value);\n  return re.reduce((input, re) => input.replace(re, value), input);\n}\n","/**\n * External dependencies\n */\nimport removeAccents from 'remove-accents';\nimport { noCase } from 'change-case';\n\n// Default search helpers.\nconst defaultGetName = ( item ) => item.name || '';\nconst defaultGetTitle = ( item ) => item.title;\nconst defaultGetDescription = ( item ) => item.description || '';\nconst defaultGetKeywords = ( item ) => item.keywords || [];\nconst defaultGetCategory = ( item ) => item.category;\nconst defaultGetCollection = () => null;\n\n// Normalization regexes\nconst splitRegexp = [\n\t/([\\p{Ll}\\p{Lo}\\p{N}])([\\p{Lu}\\p{Lt}])/gu, // One lowercase or digit, followed by one uppercase.\n\t/([\\p{Lu}\\p{Lt}])([\\p{Lu}\\p{Lt}][\\p{Ll}\\p{Lo}])/gu, // One uppercase followed by one uppercase and one lowercase.\n];\nconst stripRegexp = /(\\p{C}|\\p{P}|\\p{S})+/giu; // Anything that's not a punctuation, symbol or control/format character.\n\n// Normalization cache\nconst extractedWords = new Map();\nconst normalizedStrings = new Map();\n\n/**\n * Extracts words from an input string.\n *\n * @param {string} input The input string.\n *\n * @return {Array} Words, extracted from the input string.\n */\nexport function extractWords( input = '' ) {\n\tif ( extractedWords.has( input ) ) {\n\t\treturn extractedWords.get( input );\n\t}\n\n\tconst result = noCase( input, {\n\t\tsplitRegexp,\n\t\tstripRegexp,\n\t} )\n\t\t.split( ' ' )\n\t\t.filter( Boolean );\n\n\textractedWords.set( input, result );\n\n\treturn result;\n}\n\n/**\n * Sanitizes the search input string.\n *\n * @param {string} input The search input to normalize.\n *\n * @return {string} The normalized search input.\n */\nexport function normalizeString( input = '' ) {\n\tif ( normalizedStrings.has( input ) ) {\n\t\treturn normalizedStrings.get( input );\n\t}\n\n\t// Disregard diacritics.\n\t//  Input: \"mdia\"\n\tlet result = removeAccents( input );\n\n\t// Accommodate leading slash, matching autocomplete expectations.\n\t//  Input: \"/media\"\n\tresult = result.replace( /^\\//, '' );\n\n\t// Lowercase.\n\t//  Input: \"MEDIA\"\n\tresult = result.toLowerCase();\n\n\tnormalizedStrings.set( input, result );\n\n\treturn result;\n}\n\n/**\n * Converts the search term into a list of normalized terms.\n *\n * @param {string} input The search term to normalize.\n *\n * @return {string[]} The normalized list of search terms.\n */\nexport const getNormalizedSearchTerms = ( input = '' ) => {\n\treturn extractWords( normalizeString( input ) );\n};\n\nconst removeMatchingTerms = ( unmatchedTerms, unprocessedTerms ) => {\n\treturn unmatchedTerms.filter(\n\t\t( term ) =>\n\t\t\t! getNormalizedSearchTerms( unprocessedTerms ).some(\n\t\t\t\t( unprocessedTerm ) => unprocessedTerm.includes( term )\n\t\t\t)\n\t);\n};\n\nexport const searchBlockItems = (\n\titems,\n\tcategories,\n\tcollections,\n\tsearchInput\n) => {\n\tconst normalizedSearchTerms = getNormalizedSearchTerms( searchInput );\n\tif ( normalizedSearchTerms.length === 0 ) {\n\t\treturn items;\n\t}\n\n\tconst config = {\n\t\tgetCategory: ( item ) =>\n\t\t\tcategories.find( ( { slug } ) => slug === item.category )?.title,\n\t\tgetCollection: ( item ) =>\n\t\t\tcollections[ item.name.split( '/' )[ 0 ] ]?.title,\n\t};\n\n\treturn searchItems( items, searchInput, config );\n};\n\n/**\n * Filters an item list given a search term.\n *\n * @param {Array}  items       Item list\n * @param {string} searchInput Search input.\n * @param {Object} config      Search Config.\n *\n * @return {Array} Filtered item list.\n */\nexport const searchItems = ( items = [], searchInput = '', config = {} ) => {\n\tconst normalizedSearchTerms = getNormalizedSearchTerms( searchInput );\n\tif ( normalizedSearchTerms.length === 0 ) {\n\t\treturn items;\n\t}\n\n\tconst rankedItems = items\n\t\t.map( ( item ) => {\n\t\t\treturn [ item, getItemSearchRank( item, searchInput, config ) ];\n\t\t} )\n\t\t.filter( ( [ , rank ] ) => rank > 0 );\n\n\trankedItems.sort( ( [ , rank1 ], [ , rank2 ] ) => rank2 - rank1 );\n\treturn rankedItems.map( ( [ item ] ) => item );\n};\n\n/**\n * Get the search rank for a given item and a specific search term.\n * The better the match, the higher the rank.\n * If the rank equals 0, it should be excluded from the results.\n *\n * @param {Object} item       Item to filter.\n * @param {string} searchTerm Search term.\n * @param {Object} config     Search Config.\n *\n * @return {number} Search Rank.\n */\nexport function getItemSearchRank( item, searchTerm, config = {} ) {\n\tconst {\n\t\tgetName = defaultGetName,\n\t\tgetTitle = defaultGetTitle,\n\t\tgetDescription = defaultGetDescription,\n\t\tgetKeywords = defaultGetKeywords,\n\t\tgetCategory = defaultGetCategory,\n\t\tgetCollection = defaultGetCollection,\n\t} = config;\n\n\tconst name = getName( item );\n\tconst title = getTitle( item );\n\tconst description = getDescription( item );\n\tconst keywords = getKeywords( item );\n\tconst category = getCategory( item );\n\tconst collection = getCollection( item );\n\n\tconst normalizedSearchInput = normalizeString( searchTerm );\n\tconst normalizedTitle = normalizeString( title );\n\n\tlet rank = 0;\n\n\t// Prefers exact matches\n\t// Then prefers if the beginning of the title matches the search term\n\t// name, keywords, categories, collection, variations match come later.\n\tif ( normalizedSearchInput === normalizedTitle ) {\n\t\trank += 30;\n\t} else if ( normalizedTitle.startsWith( normalizedSearchInput ) ) {\n\t\trank += 20;\n\t} else {\n\t\tconst terms = [\n\t\t\tname,\n\t\t\ttitle,\n\t\t\tdescription,\n\t\t\t...keywords,\n\t\t\tcategory,\n\t\t\tcollection,\n\t\t].join( ' ' );\n\t\tconst normalizedSearchTerms = extractWords( normalizedSearchInput );\n\t\tconst unmatchedTerms = removeMatchingTerms(\n\t\t\tnormalizedSearchTerms,\n\t\t\tterms\n\t\t);\n\n\t\tif ( unmatchedTerms.length === 0 ) {\n\t\t\trank += 10;\n\t\t}\n\t}\n\n\t// Give a better rank to \"core\" namespaced items.\n\tif ( rank !== 0 && name.startsWith( 'core/' ) ) {\n\t\tconst isCoreBlockVariation = name !== item.id;\n\t\t// Give a bit better rank to \"core\" blocks over \"core\" block variations.\n\t\trank += isCoreBlockVariation ? 1 : 2;\n\t}\n\n\treturn rank;\n}\n","/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\tcreateBlock,\r\n\tcreateBlocksFromInnerBlocksTemplate,\r\n\tstore as blocksStore,\r\n\tparse,\r\n} from '@wordpress/blocks';\r\nimport { useSelect } from '@wordpress/data';\r\nimport { useCallback } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as blockEditorStore } from '../../../store';\r\n\r\n/**\r\n * Retrieves the block types inserter state.\r\n *\r\n * @param {string=}  rootClientId Insertion's root client ID.\r\n * @param {Function} onInsert     function called when inserter a list of blocks.\r\n * @return {Array} Returns the block types state. (block types, categories, collections, onSelect handler)\r\n */\r\nconst useBlockTypesState = ( rootClientId, onInsert ) => {\r\n\tconst [ items ] = useSelect(\r\n\t\t( select ) => [\r\n\t\t\tselect( blockEditorStore ).getInserterItems( rootClientId ),\r\n\t\t],\r\n\t\t[ rootClientId ]\r\n\t);\r\n\r\n\tconst [ categories, collections ] = useSelect( ( select ) => {\r\n\t\tconst { getCategories, getCollections } = select( blocksStore );\r\n\t\treturn [ getCategories(), getCollections() ];\r\n\t}, [] );\r\n\r\n\tconst onSelectItem = useCallback(\r\n\t\t(\r\n\t\t\t{ name, initialAttributes, innerBlocks, syncStatus, content },\r\n\t\t\tshouldFocusBlock\r\n\t\t) => {\r\n\t\t\tconst insertedBlock =\r\n\t\t\t\tsyncStatus === 'unsynced'\r\n\t\t\t\t\t? parse( content, {\r\n\t\t\t\t\t\t\t__unstableSkipMigrationLogs: true,\r\n\t\t\t\t\t  } )\r\n\t\t\t\t\t: createBlock(\r\n\t\t\t\t\t\t\tname,\r\n\t\t\t\t\t\t\tinitialAttributes,\r\n\t\t\t\t\t\t\tcreateBlocksFromInnerBlocksTemplate( innerBlocks )\r\n\t\t\t\t\t  );\r\n\r\n\t\t\tonInsert( insertedBlock, undefined, shouldFocusBlock );\r\n\t\t},\r\n\t\t[ onInsert ]\r\n\t);\r\n\r\n\treturn [ items, categories, collections, onSelectItem ];\r\n};\r\n\r\nexport default useBlockTypesState;\r\n","/** @typedef {import('../store/selectors').WPEditorInserterItem} WPEditorInserterItem */\r\n\r\n/**\r\n * Helper function to order inserter block items according to a provided array of prioritized blocks.\r\n *\r\n * @param {WPEditorInserterItem[]} items    The array of editor inserter block items to be sorted.\r\n * @param {string[]}               priority The array of block names to be prioritized.\r\n * @return {WPEditorInserterItem[]} The sorted array of editor inserter block items.\r\n */\r\nexport const orderInserterBlockItems = ( items, priority ) => {\r\n\tif ( ! priority ) {\r\n\t\treturn items;\r\n\t}\r\n\r\n\titems.sort( ( { id: aName }, { id: bName } ) => {\r\n\t\t// Sort block items according to `priority`.\r\n\t\tlet aIndex = priority.indexOf( aName );\r\n\t\tlet bIndex = priority.indexOf( bName );\r\n\t\t// All other block items should come after that.\r\n\t\tif ( aIndex < 0 ) aIndex = priority.length;\r\n\t\tif ( bIndex < 0 ) bIndex = priority.length;\r\n\t\treturn aIndex - bIndex;\r\n\t} );\r\n\r\n\treturn items;\r\n};\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useSelect } from '@wordpress/data';\r\nimport {\r\n\tcreateBlock,\r\n\tcreateBlocksFromInnerBlocksTemplate,\r\n\tparse,\r\n} from '@wordpress/blocks';\r\nimport { useMemo } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { searchBlockItems } from '../components/inserter/search-items';\r\nimport useBlockTypesState from '../components/inserter/hooks/use-block-types-state';\r\nimport BlockIcon from '../components/block-icon';\r\nimport { store as blockEditorStore } from '../store';\r\nimport { orderBy } from '../utils/sorting';\r\nimport { orderInserterBlockItems } from '../utils/order-inserter-block-items';\r\n\r\nconst noop = () => {};\r\nconst SHOWN_BLOCK_TYPES = 9;\r\n\r\n/** @typedef {import('@wordpress/components').WPCompleter} WPCompleter */\r\n\r\n/**\r\n * Creates a blocks repeater for replacing the current block with a selected block type.\r\n *\r\n * @return {WPCompleter} A blocks completer.\r\n */\r\nfunction createBlockCompleter() {\r\n\treturn {\r\n\t\tname: 'blocks',\r\n\t\tclassName: 'block-editor-autocompleters__block',\r\n\t\ttriggerPrefix: '/',\r\n\r\n\t\tuseItems( filterValue ) {\r\n\t\t\tconst { rootClientId, selectedBlockName, prioritizedBlocks } =\r\n\t\t\t\tuseSelect( ( select ) => {\r\n\t\t\t\t\tconst {\r\n\t\t\t\t\t\tgetSelectedBlockClientId,\r\n\t\t\t\t\t\tgetBlockName,\r\n\t\t\t\t\t\tgetBlockListSettings,\r\n\t\t\t\t\t\tgetBlockRootClientId,\r\n\t\t\t\t\t} = select( blockEditorStore );\r\n\t\t\t\t\tconst selectedBlockClientId = getSelectedBlockClientId();\r\n\t\t\t\t\tconst _rootClientId = getBlockRootClientId(\r\n\t\t\t\t\t\tselectedBlockClientId\r\n\t\t\t\t\t);\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tselectedBlockName: selectedBlockClientId\r\n\t\t\t\t\t\t\t? getBlockName( selectedBlockClientId )\r\n\t\t\t\t\t\t\t: null,\r\n\t\t\t\t\t\trootClientId: _rootClientId,\r\n\t\t\t\t\t\tprioritizedBlocks:\r\n\t\t\t\t\t\t\tgetBlockListSettings( _rootClientId )\r\n\t\t\t\t\t\t\t\t?.prioritizedInserterBlocks,\r\n\t\t\t\t\t};\r\n\t\t\t\t}, [] );\r\n\t\t\tconst [ items, categories, collections ] = useBlockTypesState(\r\n\t\t\t\trootClientId,\r\n\t\t\t\tnoop\r\n\t\t\t);\r\n\r\n\t\t\tconst filteredItems = useMemo( () => {\r\n\t\t\t\tconst initialFilteredItems = !! filterValue.trim()\r\n\t\t\t\t\t? searchBlockItems(\r\n\t\t\t\t\t\t\titems,\r\n\t\t\t\t\t\t\tcategories,\r\n\t\t\t\t\t\t\tcollections,\r\n\t\t\t\t\t\t\tfilterValue\r\n\t\t\t\t\t  )\r\n\t\t\t\t\t: orderInserterBlockItems(\r\n\t\t\t\t\t\t\torderBy( items, 'frecency', 'desc' ),\r\n\t\t\t\t\t\t\tprioritizedBlocks\r\n\t\t\t\t\t  );\r\n\r\n\t\t\t\treturn initialFilteredItems\r\n\t\t\t\t\t.filter( ( item ) => item.name !== selectedBlockName )\r\n\t\t\t\t\t.slice( 0, SHOWN_BLOCK_TYPES );\r\n\t\t\t}, [\r\n\t\t\t\tfilterValue,\r\n\t\t\t\tselectedBlockName,\r\n\t\t\t\titems,\r\n\t\t\t\tcategories,\r\n\t\t\t\tcollections,\r\n\t\t\t\tprioritizedBlocks,\r\n\t\t\t] );\r\n\r\n\t\t\tconst options = useMemo(\r\n\t\t\t\t() =>\r\n\t\t\t\t\tfilteredItems.map( ( blockItem ) => {\r\n\t\t\t\t\t\tconst { title, icon, isDisabled } = blockItem;\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\tkey: `block-${ blockItem.id }`,\r\n\t\t\t\t\t\t\tvalue: blockItem,\r\n\t\t\t\t\t\t\tlabel: (\r\n\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t<BlockIcon\r\n\t\t\t\t\t\t\t\t\t\tkey=\"icon\"\r\n\t\t\t\t\t\t\t\t\t\ticon={ icon }\r\n\t\t\t\t\t\t\t\t\t\tshowColors\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t{ title }\r\n\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\tisDisabled,\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t} ),\r\n\t\t\t\t[ filteredItems ]\r\n\t\t\t);\r\n\r\n\t\t\treturn [ options ];\r\n\t\t},\r\n\t\tallowContext( before, after ) {\r\n\t\t\treturn ! ( /\\S/.test( before ) || /\\S/.test( after ) );\r\n\t\t},\r\n\t\tgetOptionCompletion( inserterItem ) {\r\n\t\t\tconst {\r\n\t\t\t\tname,\r\n\t\t\t\tinitialAttributes,\r\n\t\t\t\tinnerBlocks,\r\n\t\t\t\tsyncStatus,\r\n\t\t\t\tcontent,\r\n\t\t\t} = inserterItem;\r\n\r\n\t\t\treturn {\r\n\t\t\t\taction: 'replace',\r\n\t\t\t\tvalue:\r\n\t\t\t\t\tsyncStatus === 'unsynced'\r\n\t\t\t\t\t\t? parse( content, {\r\n\t\t\t\t\t\t\t\t__unstableSkipMigrationLogs: true,\r\n\t\t\t\t\t\t  } )\r\n\t\t\t\t\t\t: createBlock(\r\n\t\t\t\t\t\t\t\tname,\r\n\t\t\t\t\t\t\t\tinitialAttributes,\r\n\t\t\t\t\t\t\t\tcreateBlocksFromInnerBlocksTemplate(\r\n\t\t\t\t\t\t\t\t\tinnerBlocks\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t  ),\r\n\t\t\t};\r\n\t\t},\r\n\t};\r\n}\r\n\r\n/**\r\n * Creates a blocks repeater for replacing the current block with a selected block type.\r\n *\r\n * @return {WPCompleter} A blocks completer.\r\n */\r\nexport default createBlockCompleter();\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"apiFetch\"];","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst post = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"m7.3 9.7 1.4 1.4c.2-.2.3-.3.4-.5 0 0 0-.1.1-.1.3-.5.4-1.1.3-1.6L12 7 9 4 7.2 6.5c-.6-.1-1.1 0-1.6.3 0 0-.1 0-.1.1-.3.1-.4.2-.6.4l1.4 1.4L4 11v1h1l2.3-2.3zM4 20h9v-1.5H4V20zm0-5.5V16h16v-1.5H4z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default post;\r\n","/**\r\n * WordPress dependencies\r\n */\r\n// Disable Reason: Needs to be refactored.\r\n// eslint-disable-next-line no-restricted-imports\r\nimport apiFetch from '@wordpress/api-fetch';\r\nimport { addQueryArgs } from '@wordpress/url';\r\nimport { Icon, page, post } from '@wordpress/icons';\r\n\r\nconst SHOWN_SUGGESTIONS = 10;\r\n\r\n/** @typedef {import('@wordpress/components').WPCompleter} WPCompleter */\r\n\r\n/**\r\n * Creates a suggestion list for links to posts or pages.\r\n *\r\n * @return {WPCompleter} A links completer.\r\n */\r\nfunction createLinkCompleter() {\r\n\treturn {\r\n\t\tname: 'links',\r\n\t\tclassName: 'block-editor-autocompleters__link',\r\n\t\ttriggerPrefix: '[[',\r\n\t\toptions: async ( letters ) => {\r\n\t\t\tlet options = await apiFetch( {\r\n\t\t\t\tpath: addQueryArgs( '/wp/v2/search', {\r\n\t\t\t\t\tper_page: SHOWN_SUGGESTIONS,\r\n\t\t\t\t\tsearch: letters,\r\n\t\t\t\t\ttype: 'post',\r\n\t\t\t\t\torder_by: 'menu_order',\r\n\t\t\t\t} ),\r\n\t\t\t} );\r\n\r\n\t\t\toptions = options.filter( ( option ) => option.title !== '' );\r\n\r\n\t\t\treturn options;\r\n\t\t},\r\n\t\tgetOptionKeywords( item ) {\r\n\t\t\tconst expansionWords = item.title.split( /\\s+/ );\r\n\t\t\treturn [ ...expansionWords ];\r\n\t\t},\r\n\t\tgetOptionLabel( item ) {\r\n\t\t\treturn (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<Icon\r\n\t\t\t\t\t\tkey=\"icon\"\r\n\t\t\t\t\t\ticon={ item.subtype === 'page' ? page : post }\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t{ item.title }\r\n\t\t\t\t</>\r\n\t\t\t);\r\n\t\t},\r\n\t\tgetOptionCompletion( item ) {\r\n\t\t\treturn <a href={ item.url }>{ item.title }</a>;\r\n\t\t},\r\n\t};\r\n}\r\n\r\n/**\r\n * Creates a suggestion list for links to posts or pages..\r\n *\r\n * @return {WPCompleter} A link completer.\r\n */\r\nexport default createLinkCompleter();\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { applyFilters, hasFilter } from '@wordpress/hooks';\r\nimport {\r\n\tAutocomplete,\r\n\t__unstableUseAutocompleteProps as useAutocompleteProps,\r\n} from '@wordpress/components';\r\nimport { useMemo } from '@wordpress/element';\r\nimport { getDefaultBlockName, getBlockSupport } from '@wordpress/blocks';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { useBlockEditContext } from '../block-edit/context';\r\nimport blockAutocompleter from '../../autocompleters/block';\r\nimport linkAutocompleter from '../../autocompleters/link';\r\n\r\n/**\r\n * Shared reference to an empty array for cases where it is important to avoid\r\n * returning a new array reference on every invocation.\r\n *\r\n * @type {Array}\r\n */\r\nconst EMPTY_ARRAY = [];\r\n\r\nfunction useCompleters( { completers = EMPTY_ARRAY } ) {\r\n\tconst { name } = useBlockEditContext();\r\n\treturn useMemo( () => {\r\n\t\tlet filteredCompleters = [ ...completers, linkAutocompleter ];\r\n\r\n\t\tif (\r\n\t\t\tname === getDefaultBlockName() ||\r\n\t\t\tgetBlockSupport( name, '__experimentalSlashInserter', false )\r\n\t\t) {\r\n\t\t\tfilteredCompleters = [ ...filteredCompleters, blockAutocompleter ];\r\n\t\t}\r\n\r\n\t\tif ( hasFilter( 'editor.Autocomplete.completers' ) ) {\r\n\t\t\t// Provide copies so filters may directly modify them.\r\n\t\t\tif ( filteredCompleters === completers ) {\r\n\t\t\t\tfilteredCompleters = filteredCompleters.map(\r\n\t\t\t\t\t( completer ) => ( { ...completer } )\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\tfilteredCompleters = applyFilters(\r\n\t\t\t\t'editor.Autocomplete.completers',\r\n\t\t\t\tfilteredCompleters,\r\n\t\t\t\tname\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\treturn filteredCompleters;\r\n\t}, [ completers, name ] );\r\n}\r\n\r\nexport function useBlockEditorAutocompleteProps( props ) {\r\n\treturn useAutocompleteProps( {\r\n\t\t...props,\r\n\t\tcompleters: useCompleters( props ),\r\n\t} );\r\n}\r\n\r\n/**\r\n * Wrap the default Autocomplete component with one that supports a filter hook\r\n * for customizing its list of autocompleters.\r\n *\r\n * @type {import('react').FC}\r\n */\r\nfunction BlockEditorAutocomplete( props ) {\r\n\treturn <Autocomplete { ...props } completers={ useCompleters( props ) } />;\r\n}\r\n\r\n/**\r\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/autocomplete/README.md\r\n */\r\nexport default BlockEditorAutocomplete;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst fullscreen = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M6 4a2 2 0 0 0-2 2v3h1.5V6a.5.5 0 0 1 .5-.5h3V4H6Zm3 14.5H6a.5.5 0 0 1-.5-.5v-3H4v3a2 2 0 0 0 2 2h3v-1.5Zm6 1.5v-1.5h3a.5.5 0 0 0 .5-.5v-3H20v3a2 2 0 0 1-2 2h-3Zm3-16a2 2 0 0 1 2 2v3h-1.5V6a.5.5 0 0 0-.5-.5h-3V4h3Z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default fullscreen;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { __ } from '@wordpress/i18n';\r\nimport { ToolbarButton } from '@wordpress/components';\r\nimport { fullscreen } from '@wordpress/icons';\r\n\r\nfunction BlockFullHeightAlignmentControl( {\r\n\tisActive,\r\n\tlabel = __( 'Toggle full height' ),\r\n\tonToggle,\r\n\tisDisabled,\r\n} ) {\r\n\treturn (\r\n\t\t<ToolbarButton\r\n\t\t\tisActive={ isActive }\r\n\t\t\ticon={ fullscreen }\r\n\t\t\tlabel={ label }\r\n\t\t\tonClick={ () => onToggle( ! isActive ) }\r\n\t\t\tdisabled={ isDisabled }\r\n\t\t/>\r\n\t);\r\n}\r\n\r\nexport default BlockFullHeightAlignmentControl;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { __ } from '@wordpress/i18n';\r\nimport { DOWN } from '@wordpress/keycodes';\r\nimport {\r\n\tToolbarButton,\r\n\tDropdown,\r\n\t__experimentalAlignmentMatrixControl as AlignmentMatrixControl,\r\n} from '@wordpress/components';\r\n\r\nconst noop = () => {};\r\n\r\nfunction BlockAlignmentMatrixControl( props ) {\r\n\tconst {\r\n\t\tlabel = __( 'Change matrix alignment' ),\r\n\t\tonChange = noop,\r\n\t\tvalue = 'center',\r\n\t\tisDisabled,\r\n\t} = props;\r\n\r\n\tconst icon = <AlignmentMatrixControl.Icon value={ value } />;\r\n\r\n\treturn (\r\n\t\t<Dropdown\r\n\t\t\tpopoverProps={ { placement: 'bottom-start' } }\r\n\t\t\trenderToggle={ ( { onToggle, isOpen } ) => {\r\n\t\t\t\tconst openOnArrowDown = ( event ) => {\r\n\t\t\t\t\tif ( ! isOpen && event.keyCode === DOWN ) {\r\n\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\tonToggle();\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<ToolbarButton\r\n\t\t\t\t\t\tonClick={ onToggle }\r\n\t\t\t\t\t\taria-haspopup=\"true\"\r\n\t\t\t\t\t\taria-expanded={ isOpen }\r\n\t\t\t\t\t\tonKeyDown={ openOnArrowDown }\r\n\t\t\t\t\t\tlabel={ label }\r\n\t\t\t\t\t\ticon={ icon }\r\n\t\t\t\t\t\tshowTooltip\r\n\t\t\t\t\t\tdisabled={ isDisabled }\r\n\t\t\t\t\t/>\r\n\t\t\t\t);\r\n\t\t\t} }\r\n\t\t\trenderContent={ () => (\r\n\t\t\t\t<AlignmentMatrixControl\r\n\t\t\t\t\thasFocusBorder={ false }\r\n\t\t\t\t\tonChange={ onChange }\r\n\t\t\t\t\tvalue={ value }\r\n\t\t\t\t/>\r\n\t\t\t) }\r\n\t\t/>\r\n\t);\r\n}\r\n\r\nexport default BlockAlignmentMatrixControl;\r\n","/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport {\n\t__experimentalGetBlockLabel as getBlockLabel,\n\tstore as blocksStore,\n} from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\n/**\n * Returns the block's configured title as a string, or empty if the title\n * cannot be determined.\n *\n * @example\n *\n * ```js\n * useBlockDisplayTitle( { clientId: 'afd1cb17-2c08-4e7a-91be-007ba7ddc3a1', maximumLength: 17 } );\n * ```\n *\n * @param {Object}           props\n * @param {string}           props.clientId      Client ID of block.\n * @param {number|undefined} props.maximumLength The maximum length that the block title string may be before truncated.\n * @param {string|undefined} props.context       The context to pass to `getBlockLabel`.\n * @return {?string} Block title.\n */\nexport default function useBlockDisplayTitle( {\n\tclientId,\n\tmaximumLength,\n\tcontext,\n} ) {\n\tconst blockTitle = useSelect(\n\t\t( select ) => {\n\t\t\tif ( ! clientId ) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tconst { getBlockName, getBlockAttributes } =\n\t\t\t\tselect( blockEditorStore );\n\t\t\tconst { getBlockType, getActiveBlockVariation } =\n\t\t\t\tselect( blocksStore );\n\n\t\t\tconst blockName = getBlockName( clientId );\n\t\t\tconst blockType = getBlockType( blockName );\n\t\t\tif ( ! blockType ) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tconst attributes = getBlockAttributes( clientId );\n\t\t\tconst label = getBlockLabel( blockType, attributes, context );\n\t\t\t// If the label is defined we prioritize it over a possible block variation title match.\n\t\t\tif ( label !== blockType.title ) {\n\t\t\t\treturn label;\n\t\t\t}\n\n\t\t\tconst match = getActiveBlockVariation( blockName, attributes );\n\t\t\t// Label will fallback to the title if no label is defined for the current label context.\n\t\t\treturn match?.title || blockType.title;\n\t\t},\n\t\t[ clientId, context ]\n\t);\n\n\tif ( ! blockTitle ) {\n\t\treturn null;\n\t}\n\n\tif (\n\t\tmaximumLength &&\n\t\tmaximumLength > 0 &&\n\t\tblockTitle.length > maximumLength\n\t) {\n\t\tconst omission = '...';\n\t\treturn (\n\t\t\tblockTitle.slice( 0, maximumLength - omission.length ) + omission\n\t\t);\n\t}\n\n\treturn blockTitle;\n}\n","/**\r\n * Internal dependencies\r\n */\r\n\r\nimport useBlockDisplayTitle from './use-block-display-title';\r\n\r\n/**\r\n * Renders the block's configured title as a string, or empty if the title\r\n * cannot be determined.\r\n *\r\n * @example\r\n *\r\n * ```jsx\r\n * <BlockTitle clientId=\"afd1cb17-2c08-4e7a-91be-007ba7ddc3a1\" maximumLength={ 17 }/>\r\n * ```\r\n *\r\n * @param {Object}           props\r\n * @param {string}           props.clientId      Client ID of block.\r\n * @param {number|undefined} props.maximumLength The maximum length that the block title string may be before truncated.\r\n * @param {string|undefined} props.context       The context to pass to `getBlockLabel`.\r\n *\r\n * @return {JSX.Element} Block title.\r\n */\r\nexport default function BlockTitle( { clientId, maximumLength, context } ) {\r\n\treturn useBlockDisplayTitle( { clientId, maximumLength, context } );\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { Button } from '@wordpress/components';\r\nimport { useSelect, useDispatch } from '@wordpress/data';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { chevronRightSmall, Icon } from '@wordpress/icons';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport BlockTitle from '../block-title';\r\nimport { store as blockEditorStore } from '../../store';\r\nimport { unlock } from '../../lock-unlock';\r\n\r\n/**\r\n * Block breadcrumb component, displaying the hierarchy of the current block selection as a breadcrumb.\r\n *\r\n * @param {Object} props               Component props.\r\n * @param {string} props.rootLabelText Translated label for the root element of the breadcrumb trail.\r\n * @return {Element}                   Block Breadcrumb.\r\n */\r\nfunction BlockBreadcrumb( { rootLabelText } ) {\r\n\tconst { selectBlock, clearSelectedBlock } = useDispatch( blockEditorStore );\r\n\tconst { clientId, parents, hasSelection } = useSelect( ( select ) => {\r\n\t\tconst {\r\n\t\t\tgetSelectionStart,\r\n\t\t\tgetSelectedBlockClientId,\r\n\t\t\tgetEnabledBlockParents,\r\n\t\t} = unlock( select( blockEditorStore ) );\r\n\t\tconst selectedBlockClientId = getSelectedBlockClientId();\r\n\t\treturn {\r\n\t\t\tparents: getEnabledBlockParents( selectedBlockClientId ),\r\n\t\t\tclientId: selectedBlockClientId,\r\n\t\t\thasSelection: !! getSelectionStart().clientId,\r\n\t\t};\r\n\t}, [] );\r\n\tconst rootLabel = rootLabelText || __( 'Document' );\r\n\r\n\t/*\r\n\t * Disable reason: The `list` ARIA role is redundant but\r\n\t * Safari+VoiceOver won't announce the list otherwise.\r\n\t */\r\n\t/* eslint-disable jsx-a11y/no-redundant-roles */\r\n\treturn (\r\n\t\t<ul\r\n\t\t\tclassName=\"block-editor-block-breadcrumb\"\r\n\t\t\trole=\"list\"\r\n\t\t\taria-label={ __( 'Block breadcrumb' ) }\r\n\t\t>\r\n\t\t\t<li\r\n\t\t\t\tclassName={\r\n\t\t\t\t\t! hasSelection\r\n\t\t\t\t\t\t? 'block-editor-block-breadcrumb__current'\r\n\t\t\t\t\t\t: undefined\r\n\t\t\t\t}\r\n\t\t\t\taria-current={ ! hasSelection ? 'true' : undefined }\r\n\t\t\t>\r\n\t\t\t\t{ hasSelection && (\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tclassName=\"block-editor-block-breadcrumb__button\"\r\n\t\t\t\t\t\tvariant=\"tertiary\"\r\n\t\t\t\t\t\tonClick={ clearSelectedBlock }\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{ rootLabel }\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t) }\r\n\t\t\t\t{ ! hasSelection && rootLabel }\r\n\t\t\t\t{ !! clientId && (\r\n\t\t\t\t\t<Icon\r\n\t\t\t\t\t\ticon={ chevronRightSmall }\r\n\t\t\t\t\t\tclassName=\"block-editor-block-breadcrumb__separator\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t) }\r\n\t\t\t</li>\r\n\r\n\t\t\t{ parents.map( ( parentClientId ) => (\r\n\t\t\t\t<li key={ parentClientId }>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tclassName=\"block-editor-block-breadcrumb__button\"\r\n\t\t\t\t\t\tvariant=\"tertiary\"\r\n\t\t\t\t\t\tonClick={ () => selectBlock( parentClientId ) }\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<BlockTitle\r\n\t\t\t\t\t\t\tclientId={ parentClientId }\r\n\t\t\t\t\t\t\tmaximumLength={ 35 }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Icon\r\n\t\t\t\t\t\ticon={ chevronRightSmall }\r\n\t\t\t\t\t\tclassName=\"block-editor-block-breadcrumb__separator\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</li>\r\n\t\t\t) ) }\r\n\t\t\t{ !! clientId && (\r\n\t\t\t\t<li\r\n\t\t\t\t\tclassName=\"block-editor-block-breadcrumb__current\"\r\n\t\t\t\t\taria-current=\"true\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<BlockTitle clientId={ clientId } maximumLength={ 35 } />\r\n\t\t\t\t</li>\r\n\t\t\t) }\r\n\t\t</ul>\r\n\t\t/* eslint-enable jsx-a11y/no-redundant-roles */\r\n\t);\r\n}\r\n\r\nexport default BlockBreadcrumb;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useSelect } from '@wordpress/data';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as blockEditorStore } from '../../store';\r\n\r\nexport default function useBlockOverlayActive( clientId ) {\r\n\treturn useSelect(\r\n\t\t( select ) => {\r\n\t\t\tconst { __unstableHasActiveBlockOverlayActive } =\r\n\t\t\t\tselect( blockEditorStore );\r\n\r\n\t\t\treturn __unstableHasActiveBlockOverlayActive( clientId );\r\n\t\t},\r\n\t\t[ clientId ]\r\n\t);\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { createContext, useContext, useMemo } from '@wordpress/element';\r\n\r\n/** @typedef {import('react').ReactNode} ReactNode */\r\n\r\n/**\r\n * @typedef BlockContextProviderProps\r\n *\r\n * @property {Record<string,*>} value    Context value to merge with current\r\n *                                       value.\r\n * @property {ReactNode}        children Component children.\r\n */\r\n\r\n/** @type {import('react').Context<Record<string,*>>} */\r\nconst Context = createContext( {} );\r\n\r\n/**\r\n * Component which merges passed value with current consumed block context.\r\n *\r\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/block-context/README.md\r\n *\r\n * @param {BlockContextProviderProps} props\r\n */\r\nexport function BlockContextProvider( { value, children } ) {\r\n\tconst context = useContext( Context );\r\n\tconst nextValue = useMemo(\r\n\t\t() => ( { ...context, ...value } ),\r\n\t\t[ context, value ]\r\n\t);\r\n\r\n\treturn <Context.Provider value={ nextValue } children={ children } />;\r\n}\r\n\r\nexport default Context;\r\n","/**\r\n * External dependencies\r\n */\r\nimport classnames from 'classnames';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { withFilters } from '@wordpress/components';\r\nimport {\r\n\tgetBlockDefaultClassName,\r\n\thasBlockSupport,\r\n\tgetBlockType,\r\n} from '@wordpress/blocks';\r\nimport { useContext, useMemo } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport BlockContext from '../block-context';\r\n\r\n/**\r\n * Default value used for blocks which do not define their own context needs,\r\n * used to guarantee that a block's `context` prop will always be an object. It\r\n * is assigned as a constant since it is always expected to be an empty object,\r\n * and in order to avoid unnecessary React reconciliations of a changing object.\r\n *\r\n * @type {{}}\r\n */\r\nconst DEFAULT_BLOCK_CONTEXT = {};\r\n\r\nconst Edit = ( props ) => {\r\n\tconst { name } = props;\r\n\tconst blockType = getBlockType( name );\r\n\r\n\tif ( ! blockType ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\t// `edit` and `save` are functions or components describing the markup\r\n\t// with which a block is displayed. If `blockType` is valid, assign\r\n\t// them preferentially as the render value for the block.\r\n\tconst Component = blockType.edit || blockType.save;\r\n\r\n\treturn <Component { ...props } />;\r\n};\r\n\r\nconst EditWithFilters = withFilters( 'editor.BlockEdit' )( Edit );\r\n\r\nconst EditWithGeneratedProps = ( props ) => {\r\n\tconst { attributes = {}, name } = props;\r\n\tconst blockType = getBlockType( name );\r\n\tconst blockContext = useContext( BlockContext );\r\n\r\n\t// Assign context values using the block type's declared context needs.\r\n\tconst context = useMemo( () => {\r\n\t\treturn blockType && blockType.usesContext\r\n\t\t\t? Object.fromEntries(\r\n\t\t\t\t\tObject.entries( blockContext ).filter( ( [ key ] ) =>\r\n\t\t\t\t\t\tblockType.usesContext.includes( key )\r\n\t\t\t\t\t)\r\n\t\t\t  )\r\n\t\t\t: DEFAULT_BLOCK_CONTEXT;\r\n\t}, [ blockType, blockContext ] );\r\n\r\n\tif ( ! blockType ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tif ( blockType.apiVersion > 1 ) {\r\n\t\treturn <EditWithFilters { ...props } context={ context } />;\r\n\t}\r\n\r\n\t// Generate a class name for the block's editable form.\r\n\tconst generatedClassName = hasBlockSupport( blockType, 'className', true )\r\n\t\t? getBlockDefaultClassName( name )\r\n\t\t: null;\r\n\tconst className = classnames(\r\n\t\tgeneratedClassName,\r\n\t\tattributes.className,\r\n\t\tprops.className\r\n\t);\r\n\r\n\treturn (\r\n\t\t<EditWithFilters\r\n\t\t\t{ ...props }\r\n\t\t\tcontext={ context }\r\n\t\t\tclassName={ className }\r\n\t\t/>\r\n\t);\r\n};\r\n\r\nexport default EditWithGeneratedProps;\r\n","/**\n * WordPress dependencies\n */\nimport { useMemo } from '@wordpress/element';\n\nimport { hasBlockSupport } from '@wordpress/blocks';\n/**\n * Internal dependencies\n */\nimport Edit from './edit';\nimport {\n\tBlockEditContextProvider,\n\tuseBlockEditContext,\n\tmayDisplayControlsKey,\n\tmayDisplayParentControlsKey,\n\tblockEditingModeKey,\n\tblockBindingsKey,\n} from './context';\n\n/**\n * The `useBlockEditContext` hook provides information about the block this hook is being used in.\n * It returns an object with the `name`, `isSelected` state, and the `clientId` of the block.\n * It is useful if you want to create custom hooks that need access to the current blocks clientId\n * but don't want to rely on the data getting passed in as a parameter.\n *\n * @return {Object} Block edit context\n */\nexport { useBlockEditContext };\n\nexport default function BlockEdit( {\n\tmayDisplayControls,\n\tmayDisplayParentControls,\n\tblockEditingMode,\n\t// The remaining props are passed through the BlockEdit filters and are thus\n\t// public API!\n\t...props\n} ) {\n\tconst {\n\t\tname,\n\t\tisSelected,\n\t\tclientId,\n\t\tattributes = {},\n\t\t__unstableLayoutClassNames,\n\t} = props;\n\tconst { layout = null, metadata = {} } = attributes;\n\tconst { bindings } = metadata;\n\tconst layoutSupport =\n\t\thasBlockSupport( name, 'layout', false ) ||\n\t\thasBlockSupport( name, '__experimentalLayout', false );\n\treturn (\n\t\t<BlockEditContextProvider\n\t\t\t// It is important to return the same object if props haven't\n\t\t\t// changed to avoid  unnecessary rerenders.\n\t\t\t// See https://reactjs.org/docs/context.html#caveats.\n\t\t\tvalue={ useMemo(\n\t\t\t\t() => ( {\n\t\t\t\t\tname,\n\t\t\t\t\tisSelected,\n\t\t\t\t\tclientId,\n\t\t\t\t\tlayout: layoutSupport ? layout : null,\n\t\t\t\t\t__unstableLayoutClassNames,\n\t\t\t\t\t// We use symbols in favour of an __unstable prefix to avoid\n\t\t\t\t\t// usage outside of the package (this context is exposed).\n\t\t\t\t\t[ mayDisplayControlsKey ]: mayDisplayControls,\n\t\t\t\t\t[ mayDisplayParentControlsKey ]: mayDisplayParentControls,\n\t\t\t\t\t[ blockEditingModeKey ]: blockEditingMode,\n\t\t\t\t\t[ blockBindingsKey ]: bindings,\n\t\t\t\t} ),\n\t\t\t\t[\n\t\t\t\t\tname,\n\t\t\t\t\tisSelected,\n\t\t\t\t\tclientId,\n\t\t\t\t\tlayoutSupport,\n\t\t\t\t\tlayout,\n\t\t\t\t\t__unstableLayoutClassNames,\n\t\t\t\t\tmayDisplayControls,\n\t\t\t\t\tmayDisplayParentControls,\n\t\t\t\t\tblockEditingMode,\n\t\t\t\t\tbindings,\n\t\t\t\t]\n\t\t\t) }\n\t\t>\n\t\t\t<Edit { ...props } />\n\t\t</BlockEditContextProvider>\n\t);\n}\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst moreVertical = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M13 19h-2v-2h2v2zm0-6h-2v-2h2v2zm0-6h-2V5h2v2z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default moreVertical;\r\n","/**\r\n * External dependencies\r\n */\r\nimport classnames from 'classnames';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { Children } from '@wordpress/element';\r\nimport { DropdownMenu, MenuGroup, MenuItem } from '@wordpress/components';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { moreVertical } from '@wordpress/icons';\r\n\r\nfunction Warning( { className, actions, children, secondaryActions } ) {\r\n\treturn (\r\n\t\t<div style={ { display: 'contents', all: 'initial' } }>\r\n\t\t\t<div className={ classnames( className, 'block-editor-warning' ) }>\r\n\t\t\t\t<div className=\"block-editor-warning__contents\">\r\n\t\t\t\t\t<p className=\"block-editor-warning__message\">\r\n\t\t\t\t\t\t{ children }\r\n\t\t\t\t\t</p>\r\n\r\n\t\t\t\t\t{ ( Children.count( actions ) > 0 || secondaryActions ) && (\r\n\t\t\t\t\t\t<div className=\"block-editor-warning__actions\">\r\n\t\t\t\t\t\t\t{ Children.count( actions ) > 0 &&\r\n\t\t\t\t\t\t\t\tChildren.map( actions, ( action, i ) => (\r\n\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\tkey={ i }\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"block-editor-warning__action\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{ action }\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t) ) }\r\n\t\t\t\t\t\t\t{ secondaryActions && (\r\n\t\t\t\t\t\t\t\t<DropdownMenu\r\n\t\t\t\t\t\t\t\t\tclassName=\"block-editor-warning__secondary\"\r\n\t\t\t\t\t\t\t\t\ticon={ moreVertical }\r\n\t\t\t\t\t\t\t\t\tlabel={ __( 'More options' ) }\r\n\t\t\t\t\t\t\t\t\tpopoverProps={ {\r\n\t\t\t\t\t\t\t\t\t\tposition: 'bottom left',\r\n\t\t\t\t\t\t\t\t\t\tclassName:\r\n\t\t\t\t\t\t\t\t\t\t\t'block-editor-warning__dropdown',\r\n\t\t\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t\t\t\tnoIcons\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{ () => (\r\n\t\t\t\t\t\t\t\t\t\t<MenuGroup>\r\n\t\t\t\t\t\t\t\t\t\t\t{ secondaryActions.map(\r\n\t\t\t\t\t\t\t\t\t\t\t\t( item, pos ) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<MenuItem\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={ item.onClick }\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={ pos }\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ item.title }\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</MenuItem>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\t\t\t\t</MenuGroup>\r\n\t\t\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\t\t</DropdownMenu>\r\n\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t) }\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\n/**\r\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/warning/README.md\r\n */\r\nexport default Warning;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { Button } from '@wordpress/components';\r\nimport { RawHTML } from '@wordpress/element';\r\nimport { safeHTML } from '@wordpress/dom';\r\n\r\nexport default function BlockView( {\r\n\ttitle,\r\n\trawContent,\r\n\trenderedContent,\r\n\taction,\r\n\tactionText,\r\n\tclassName,\r\n} ) {\r\n\treturn (\r\n\t\t<div className={ className }>\r\n\t\t\t<div className=\"block-editor-block-compare__content\">\r\n\t\t\t\t<h2 className=\"block-editor-block-compare__heading\">\r\n\t\t\t\t\t{ title }\r\n\t\t\t\t</h2>\r\n\r\n\t\t\t\t<div className=\"block-editor-block-compare__html\">\r\n\t\t\t\t\t{ rawContent }\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className=\"block-editor-block-compare__preview edit-post-visual-editor\">\r\n\t\t\t\t\t<RawHTML>{ safeHTML( renderedContent ) }</RawHTML>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div className=\"block-editor-block-compare__action\">\r\n\t\t\t\t<Button variant=\"secondary\" tabIndex=\"0\" onClick={ action }>\r\n\t\t\t\t\t{ actionText }\r\n\t\t\t\t</Button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n","/**\r\n * External dependencies\r\n */\r\nimport classnames from 'classnames';\r\n// diff doesn't tree-shake correctly, so we import from the individual\r\n// module here, to avoid including too much of the library\r\nimport { diffChars } from 'diff/lib/diff/character';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { __ } from '@wordpress/i18n';\r\nimport { getSaveContent } from '@wordpress/blocks';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport BlockView from './block-view';\r\n\r\nfunction BlockCompare( {\r\n\tblock,\r\n\tonKeep,\r\n\tonConvert,\r\n\tconvertor,\r\n\tconvertButtonText,\r\n} ) {\r\n\tfunction getDifference( originalContent, newContent ) {\r\n\t\tconst difference = diffChars( originalContent, newContent );\r\n\r\n\t\treturn difference.map( ( item, pos ) => {\r\n\t\t\tconst classes = classnames( {\r\n\t\t\t\t'block-editor-block-compare__added': item.added,\r\n\t\t\t\t'block-editor-block-compare__removed': item.removed,\r\n\t\t\t} );\r\n\r\n\t\t\treturn (\r\n\t\t\t\t<span key={ pos } className={ classes }>\r\n\t\t\t\t\t{ item.value }\r\n\t\t\t\t</span>\r\n\t\t\t);\r\n\t\t} );\r\n\t}\r\n\r\n\tfunction getConvertedContent( convertedBlock ) {\r\n\t\t// The convertor may return an array of items or a single item.\r\n\t\tconst newBlocks = Array.isArray( convertedBlock )\r\n\t\t\t? convertedBlock\r\n\t\t\t: [ convertedBlock ];\r\n\r\n\t\t// Get converted block details.\r\n\t\tconst newContent = newBlocks.map( ( item ) =>\r\n\t\t\tgetSaveContent( item.name, item.attributes, item.innerBlocks )\r\n\t\t);\r\n\r\n\t\treturn newContent.join( '' );\r\n\t}\r\n\r\n\tconst converted = getConvertedContent( convertor( block ) );\r\n\tconst difference = getDifference( block.originalContent, converted );\r\n\r\n\treturn (\r\n\t\t<div className=\"block-editor-block-compare__wrapper\">\r\n\t\t\t<BlockView\r\n\t\t\t\ttitle={ __( 'Current' ) }\r\n\t\t\t\tclassName=\"block-editor-block-compare__current\"\r\n\t\t\t\taction={ onKeep }\r\n\t\t\t\tactionText={ __( 'Convert to HTML' ) }\r\n\t\t\t\trawContent={ block.originalContent }\r\n\t\t\t\trenderedContent={ block.originalContent }\r\n\t\t\t/>\r\n\r\n\t\t\t<BlockView\r\n\t\t\t\ttitle={ __( 'After Conversion' ) }\r\n\t\t\t\tclassName=\"block-editor-block-compare__converted\"\r\n\t\t\t\taction={ onConvert }\r\n\t\t\t\tactionText={ convertButtonText }\r\n\t\t\t\trawContent={ difference }\r\n\t\t\t\trenderedContent={ converted }\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default BlockCompare;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { __, _x } from '@wordpress/i18n';\r\nimport { Button, Modal } from '@wordpress/components';\r\nimport { useState, useCallback, useMemo } from '@wordpress/element';\r\nimport { createBlock, rawHandler } from '@wordpress/blocks';\r\nimport { useDispatch, useSelect } from '@wordpress/data';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport Warning from '../warning';\r\nimport BlockCompare from '../block-compare';\r\nimport { store as blockEditorStore } from '../../store';\r\n\r\nconst blockToBlocks = ( block ) =>\r\n\trawHandler( {\r\n\t\tHTML: block.originalContent,\r\n\t} );\r\n\r\nexport default function BlockInvalidWarning( { clientId } ) {\r\n\tconst { block, canInsertHTMLBlock, canInsertClassicBlock } = useSelect(\r\n\t\t( select ) => {\r\n\t\t\tconst { canInsertBlockType, getBlock, getBlockRootClientId } =\r\n\t\t\t\tselect( blockEditorStore );\r\n\r\n\t\t\tconst rootClientId = getBlockRootClientId( clientId );\r\n\r\n\t\t\treturn {\r\n\t\t\t\tblock: getBlock( clientId ),\r\n\t\t\t\tcanInsertHTMLBlock: canInsertBlockType(\r\n\t\t\t\t\t'core/html',\r\n\t\t\t\t\trootClientId\r\n\t\t\t\t),\r\n\t\t\t\tcanInsertClassicBlock: canInsertBlockType(\r\n\t\t\t\t\t'core/freeform',\r\n\t\t\t\t\trootClientId\r\n\t\t\t\t),\r\n\t\t\t};\r\n\t\t},\r\n\t\t[ clientId ]\r\n\t);\r\n\tconst { replaceBlock } = useDispatch( blockEditorStore );\r\n\r\n\tconst [ compare, setCompare ] = useState( false );\r\n\tconst onCompareClose = useCallback( () => setCompare( false ), [] );\r\n\r\n\tconst convert = useMemo(\r\n\t\t() => ( {\r\n\t\t\ttoClassic() {\r\n\t\t\t\tconst classicBlock = createBlock( 'core/freeform', {\r\n\t\t\t\t\tcontent: block.originalContent,\r\n\t\t\t\t} );\r\n\t\t\t\treturn replaceBlock( block.clientId, classicBlock );\r\n\t\t\t},\r\n\t\t\ttoHTML() {\r\n\t\t\t\tconst htmlBlock = createBlock( 'core/html', {\r\n\t\t\t\t\tcontent: block.originalContent,\r\n\t\t\t\t} );\r\n\t\t\t\treturn replaceBlock( block.clientId, htmlBlock );\r\n\t\t\t},\r\n\t\t\ttoBlocks() {\r\n\t\t\t\tconst newBlocks = blockToBlocks( block );\r\n\t\t\t\treturn replaceBlock( block.clientId, newBlocks );\r\n\t\t\t},\r\n\t\t\ttoRecoveredBlock() {\r\n\t\t\t\tconst recoveredBlock = createBlock(\r\n\t\t\t\t\tblock.name,\r\n\t\t\t\t\tblock.attributes,\r\n\t\t\t\t\tblock.innerBlocks\r\n\t\t\t\t);\r\n\t\t\t\treturn replaceBlock( block.clientId, recoveredBlock );\r\n\t\t\t},\r\n\t\t} ),\r\n\t\t[ block, replaceBlock ]\r\n\t);\r\n\r\n\tconst secondaryActions = useMemo(\r\n\t\t() =>\r\n\t\t\t[\r\n\t\t\t\t{\r\n\t\t\t\t\t// translators: Button to fix block content\r\n\t\t\t\t\ttitle: _x( 'Resolve', 'imperative verb' ),\r\n\t\t\t\t\tonClick: () => setCompare( true ),\r\n\t\t\t\t},\r\n\t\t\t\tcanInsertHTMLBlock && {\r\n\t\t\t\t\ttitle: __( 'Convert to HTML' ),\r\n\t\t\t\t\tonClick: convert.toHTML,\r\n\t\t\t\t},\r\n\t\t\t\tcanInsertClassicBlock && {\r\n\t\t\t\t\ttitle: __( 'Convert to Classic Block' ),\r\n\t\t\t\t\tonClick: convert.toClassic,\r\n\t\t\t\t},\r\n\t\t\t].filter( Boolean ),\r\n\t\t[ canInsertHTMLBlock, canInsertClassicBlock, convert ]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Warning\r\n\t\t\t\tactions={ [\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tkey=\"recover\"\r\n\t\t\t\t\t\tonClick={ convert.toRecoveredBlock }\r\n\t\t\t\t\t\tvariant=\"primary\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{ __( 'Attempt Block Recovery' ) }\r\n\t\t\t\t\t</Button>,\r\n\t\t\t\t] }\r\n\t\t\t\tsecondaryActions={ secondaryActions }\r\n\t\t\t>\r\n\t\t\t\t{ __( 'This block contains unexpected or invalid content.' ) }\r\n\t\t\t</Warning>\r\n\t\t\t{ compare && (\r\n\t\t\t\t<Modal\r\n\t\t\t\t\ttitle={\r\n\t\t\t\t\t\t// translators: Dialog title to fix block content\r\n\t\t\t\t\t\t__( 'Resolve Block' )\r\n\t\t\t\t\t}\r\n\t\t\t\t\tonRequestClose={ onCompareClose }\r\n\t\t\t\t\tclassName=\"block-editor-block-compare\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<BlockCompare\r\n\t\t\t\t\t\tblock={ block }\r\n\t\t\t\t\t\tonKeep={ convert.toHTML }\r\n\t\t\t\t\t\tonConvert={ convert.toBlocks }\r\n\t\t\t\t\t\tconvertor={ blockToBlocks }\r\n\t\t\t\t\t\tconvertButtonText={ __( 'Convert to Blocks' ) }\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Modal>\r\n\t\t\t) }\r\n\t\t</>\r\n\t);\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { __ } from '@wordpress/i18n';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport Warning from '../warning';\r\n\r\nconst warning = (\r\n\t<Warning className=\"block-editor-block-list__block-crash-warning\">\r\n\t\t{ __( 'This block has encountered an error and cannot be previewed.' ) }\r\n\t</Warning>\r\n);\r\n\r\nexport default () => warning;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { Component } from '@wordpress/element';\r\n\r\nclass BlockCrashBoundary extends Component {\r\n\tconstructor() {\r\n\t\tsuper( ...arguments );\r\n\r\n\t\tthis.state = {\r\n\t\t\thasError: false,\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidCatch() {\r\n\t\tthis.setState( {\r\n\t\t\thasError: true,\r\n\t\t} );\r\n\t}\r\n\r\n\trender() {\r\n\t\tif ( this.state.hasError ) {\r\n\t\t\treturn this.props.fallback;\r\n\t\t}\r\n\r\n\t\treturn this.props.children;\r\n\t}\r\n}\r\n\r\nexport default BlockCrashBoundary;\r\n","/**\r\n * External dependencies\r\n */\r\nimport TextareaAutosize from 'react-autosize-textarea';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { useEffect, useState } from '@wordpress/element';\r\nimport { useSelect, useDispatch } from '@wordpress/data';\r\nimport {\r\n\tgetBlockAttributes,\r\n\tgetBlockContent,\r\n\tgetBlockType,\r\n\tgetSaveContent,\r\n\tvalidateBlock,\r\n} from '@wordpress/blocks';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as blockEditorStore } from '../../store';\r\n\r\nfunction BlockHTML( { clientId } ) {\r\n\tconst [ html, setHtml ] = useState( '' );\r\n\tconst block = useSelect(\r\n\t\t( select ) => select( blockEditorStore ).getBlock( clientId ),\r\n\t\t[ clientId ]\r\n\t);\r\n\tconst { updateBlock } = useDispatch( blockEditorStore );\r\n\tconst onChange = () => {\r\n\t\tconst blockType = getBlockType( block.name );\r\n\r\n\t\tif ( ! blockType ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst attributes = getBlockAttributes(\r\n\t\t\tblockType,\r\n\t\t\thtml,\r\n\t\t\tblock.attributes\r\n\t\t);\r\n\r\n\t\t// If html is empty  we reset the block to the default HTML and mark it as valid to avoid triggering an error\r\n\t\tconst content = html ? html : getSaveContent( blockType, attributes );\r\n\t\tconst [ isValid ] = html\r\n\t\t\t? validateBlock( {\r\n\t\t\t\t\t...block,\r\n\t\t\t\t\tattributes,\r\n\t\t\t\t\toriginalContent: content,\r\n\t\t\t  } )\r\n\t\t\t: [ true ];\r\n\r\n\t\tupdateBlock( clientId, {\r\n\t\t\tattributes,\r\n\t\t\toriginalContent: content,\r\n\t\t\tisValid,\r\n\t\t} );\r\n\r\n\t\t// Ensure the state is updated if we reset so it displays the default content.\r\n\t\tif ( ! html ) {\r\n\t\t\tsetHtml( content );\r\n\t\t}\r\n\t};\r\n\r\n\tuseEffect( () => {\r\n\t\tsetHtml( getBlockContent( block ) );\r\n\t}, [ block ] );\r\n\r\n\treturn (\r\n\t\t<TextareaAutosize\r\n\t\t\tclassName=\"block-editor-block-list__block-html-textarea\"\r\n\t\t\tvalue={ html }\r\n\t\t\tonBlur={ onChange }\r\n\t\t\tonChange={ ( event ) => setHtml( event.target.value ) }\r\n\t\t/>\r\n\t);\r\n}\r\n\r\nexport default BlockHTML;\r\n","let updateQueue = makeQueue();\nconst raf = fn => schedule(fn, updateQueue);\nlet writeQueue = makeQueue();\n\nraf.write = fn => schedule(fn, writeQueue);\n\nlet onStartQueue = makeQueue();\n\nraf.onStart = fn => schedule(fn, onStartQueue);\n\nlet onFrameQueue = makeQueue();\n\nraf.onFrame = fn => schedule(fn, onFrameQueue);\n\nlet onFinishQueue = makeQueue();\n\nraf.onFinish = fn => schedule(fn, onFinishQueue);\n\nlet timeouts = [];\n\nraf.setTimeout = (handler, ms) => {\n  let time = raf.now() + ms;\n\n  let cancel = () => {\n    let i = timeouts.findIndex(t => t.cancel == cancel);\n    if (~i) timeouts.splice(i, 1);\n    pendingCount -= ~i ? 1 : 0;\n  };\n\n  let timeout = {\n    time,\n    handler,\n    cancel\n  };\n  timeouts.splice(findTimeout(time), 0, timeout);\n  pendingCount += 1;\n  start();\n  return timeout;\n};\n\nlet findTimeout = time => ~(~timeouts.findIndex(t => t.time > time) || ~timeouts.length);\n\nraf.cancel = fn => {\n  onStartQueue.delete(fn);\n  onFrameQueue.delete(fn);\n  onFinishQueue.delete(fn);\n  updateQueue.delete(fn);\n  writeQueue.delete(fn);\n};\n\nraf.sync = fn => {\n  sync = true;\n  raf.batchedUpdates(fn);\n  sync = false;\n};\n\nraf.throttle = fn => {\n  let lastArgs;\n\n  function queuedFn() {\n    try {\n      fn(...lastArgs);\n    } finally {\n      lastArgs = null;\n    }\n  }\n\n  function throttled(...args) {\n    lastArgs = args;\n    raf.onStart(queuedFn);\n  }\n\n  throttled.handler = fn;\n\n  throttled.cancel = () => {\n    onStartQueue.delete(queuedFn);\n    lastArgs = null;\n  };\n\n  return throttled;\n};\n\nlet nativeRaf = typeof window != 'undefined' ? window.requestAnimationFrame : () => {};\n\nraf.use = impl => nativeRaf = impl;\n\nraf.now = typeof performance != 'undefined' ? () => performance.now() : Date.now;\n\nraf.batchedUpdates = fn => fn();\n\nraf.catch = console.error;\nraf.frameLoop = 'always';\n\nraf.advance = () => {\n  if (raf.frameLoop !== 'demand') {\n    console.warn('Cannot call the manual advancement of rafz whilst frameLoop is not set as demand');\n  } else {\n    update();\n  }\n};\n\nlet ts = -1;\nlet pendingCount = 0;\nlet sync = false;\n\nfunction schedule(fn, queue) {\n  if (sync) {\n    queue.delete(fn);\n    fn(0);\n  } else {\n    queue.add(fn);\n    start();\n  }\n}\n\nfunction start() {\n  if (ts < 0) {\n    ts = 0;\n\n    if (raf.frameLoop !== 'demand') {\n      nativeRaf(loop);\n    }\n  }\n}\n\nfunction stop() {\n  ts = -1;\n}\n\nfunction loop() {\n  if (~ts) {\n    nativeRaf(loop);\n    raf.batchedUpdates(update);\n  }\n}\n\nfunction update() {\n  let prevTs = ts;\n  ts = raf.now();\n  let count = findTimeout(ts);\n\n  if (count) {\n    eachSafely(timeouts.splice(0, count), t => t.handler());\n    pendingCount -= count;\n  }\n\n  if (!pendingCount) {\n    stop();\n    return;\n  }\n\n  onStartQueue.flush();\n  updateQueue.flush(prevTs ? Math.min(64, ts - prevTs) : 16.667);\n  onFrameQueue.flush();\n  writeQueue.flush();\n  onFinishQueue.flush();\n}\n\nfunction makeQueue() {\n  let next = new Set();\n  let current = next;\n  return {\n    add(fn) {\n      pendingCount += current == next && !next.has(fn) ? 1 : 0;\n      next.add(fn);\n    },\n\n    delete(fn) {\n      pendingCount -= current == next && next.has(fn) ? 1 : 0;\n      return next.delete(fn);\n    },\n\n    flush(arg) {\n      if (current.size) {\n        next = new Set();\n        pendingCount -= current.size;\n        eachSafely(current, fn => fn(arg) && next.add(fn));\n        pendingCount += next.size;\n        current = next;\n      }\n    }\n\n  };\n}\n\nfunction eachSafely(values, each) {\n  values.forEach(value => {\n    try {\n      each(value);\n    } catch (e) {\n      raf.catch(e);\n    }\n  });\n}\n\nconst __raf = {\n  count() {\n    return pendingCount;\n  },\n\n  isRunning() {\n    return ts >= 0;\n  },\n\n  clear() {\n    ts = -1;\n    timeouts = [];\n    onStartQueue = makeQueue();\n    updateQueue = makeQueue();\n    onFrameQueue = makeQueue();\n    writeQueue = makeQueue();\n    onFinishQueue = makeQueue();\n    pendingCount = 0;\n  }\n\n};\n\nexport { __raf, raf };\n","import { raf } from '@react-spring/rafz';\nexport { raf } from '@react-spring/rafz';\nimport { useEffect, useLayoutEffect, useRef, useState } from 'react';\n\nfunction noop() {}\nconst defineHidden = (obj, key, value) => Object.defineProperty(obj, key, {\n  value,\n  writable: true,\n  configurable: true\n});\nconst is = {\n  arr: Array.isArray,\n  obj: a => !!a && a.constructor.name === 'Object',\n  fun: a => typeof a === 'function',\n  str: a => typeof a === 'string',\n  num: a => typeof a === 'number',\n  und: a => a === undefined\n};\nfunction isEqual(a, b) {\n  if (is.arr(a)) {\n    if (!is.arr(b) || a.length !== b.length) return false;\n\n    for (let i = 0; i < a.length; i++) {\n      if (a[i] !== b[i]) return false;\n    }\n\n    return true;\n  }\n\n  return a === b;\n}\nconst each = (obj, fn) => obj.forEach(fn);\nfunction eachProp(obj, fn, ctx) {\n  if (is.arr(obj)) {\n    for (let i = 0; i < obj.length; i++) {\n      fn.call(ctx, obj[i], `${i}`);\n    }\n\n    return;\n  }\n\n  for (const key in obj) {\n    if (obj.hasOwnProperty(key)) {\n      fn.call(ctx, obj[key], key);\n    }\n  }\n}\nconst toArray = a => is.und(a) ? [] : is.arr(a) ? a : [a];\nfunction flush(queue, iterator) {\n  if (queue.size) {\n    const items = Array.from(queue);\n    queue.clear();\n    each(items, iterator);\n  }\n}\nconst flushCalls = (queue, ...args) => flush(queue, fn => fn(...args));\nconst isSSR = () => typeof window === 'undefined' || !window.navigator || /ServerSideRendering|^Deno\\//.test(window.navigator.userAgent);\n\nlet createStringInterpolator$1;\nlet to;\nlet colors$1 = null;\nlet skipAnimation = false;\nlet willAdvance = noop;\nconst assign = globals => {\n  if (globals.to) to = globals.to;\n  if (globals.now) raf.now = globals.now;\n  if (globals.colors !== undefined) colors$1 = globals.colors;\n  if (globals.skipAnimation != null) skipAnimation = globals.skipAnimation;\n  if (globals.createStringInterpolator) createStringInterpolator$1 = globals.createStringInterpolator;\n  if (globals.requestAnimationFrame) raf.use(globals.requestAnimationFrame);\n  if (globals.batchedUpdates) raf.batchedUpdates = globals.batchedUpdates;\n  if (globals.willAdvance) willAdvance = globals.willAdvance;\n  if (globals.frameLoop) raf.frameLoop = globals.frameLoop;\n};\n\nvar globals = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  get createStringInterpolator () { return createStringInterpolator$1; },\n  get to () { return to; },\n  get colors () { return colors$1; },\n  get skipAnimation () { return skipAnimation; },\n  get willAdvance () { return willAdvance; },\n  assign: assign\n});\n\nconst startQueue = new Set();\nlet currentFrame = [];\nlet prevFrame = [];\nlet priority = 0;\nconst frameLoop = {\n  get idle() {\n    return !startQueue.size && !currentFrame.length;\n  },\n\n  start(animation) {\n    if (priority > animation.priority) {\n      startQueue.add(animation);\n      raf.onStart(flushStartQueue);\n    } else {\n      startSafely(animation);\n      raf(advance);\n    }\n  },\n\n  advance,\n\n  sort(animation) {\n    if (priority) {\n      raf.onFrame(() => frameLoop.sort(animation));\n    } else {\n      const prevIndex = currentFrame.indexOf(animation);\n\n      if (~prevIndex) {\n        currentFrame.splice(prevIndex, 1);\n        startUnsafely(animation);\n      }\n    }\n  },\n\n  clear() {\n    currentFrame = [];\n    startQueue.clear();\n  }\n\n};\n\nfunction flushStartQueue() {\n  startQueue.forEach(startSafely);\n  startQueue.clear();\n  raf(advance);\n}\n\nfunction startSafely(animation) {\n  if (!currentFrame.includes(animation)) startUnsafely(animation);\n}\n\nfunction startUnsafely(animation) {\n  currentFrame.splice(findIndex(currentFrame, other => other.priority > animation.priority), 0, animation);\n}\n\nfunction advance(dt) {\n  const nextFrame = prevFrame;\n\n  for (let i = 0; i < currentFrame.length; i++) {\n    const animation = currentFrame[i];\n    priority = animation.priority;\n\n    if (!animation.idle) {\n      willAdvance(animation);\n      animation.advance(dt);\n\n      if (!animation.idle) {\n        nextFrame.push(animation);\n      }\n    }\n  }\n\n  priority = 0;\n  prevFrame = currentFrame;\n  prevFrame.length = 0;\n  currentFrame = nextFrame;\n  return currentFrame.length > 0;\n}\n\nfunction findIndex(arr, test) {\n  const index = arr.findIndex(test);\n  return index < 0 ? arr.length : index;\n}\n\nconst colors = {\n  transparent: 0x00000000,\n  aliceblue: 0xf0f8ffff,\n  antiquewhite: 0xfaebd7ff,\n  aqua: 0x00ffffff,\n  aquamarine: 0x7fffd4ff,\n  azure: 0xf0ffffff,\n  beige: 0xf5f5dcff,\n  bisque: 0xffe4c4ff,\n  black: 0x000000ff,\n  blanchedalmond: 0xffebcdff,\n  blue: 0x0000ffff,\n  blueviolet: 0x8a2be2ff,\n  brown: 0xa52a2aff,\n  burlywood: 0xdeb887ff,\n  burntsienna: 0xea7e5dff,\n  cadetblue: 0x5f9ea0ff,\n  chartreuse: 0x7fff00ff,\n  chocolate: 0xd2691eff,\n  coral: 0xff7f50ff,\n  cornflowerblue: 0x6495edff,\n  cornsilk: 0xfff8dcff,\n  crimson: 0xdc143cff,\n  cyan: 0x00ffffff,\n  darkblue: 0x00008bff,\n  darkcyan: 0x008b8bff,\n  darkgoldenrod: 0xb8860bff,\n  darkgray: 0xa9a9a9ff,\n  darkgreen: 0x006400ff,\n  darkgrey: 0xa9a9a9ff,\n  darkkhaki: 0xbdb76bff,\n  darkmagenta: 0x8b008bff,\n  darkolivegreen: 0x556b2fff,\n  darkorange: 0xff8c00ff,\n  darkorchid: 0x9932ccff,\n  darkred: 0x8b0000ff,\n  darksalmon: 0xe9967aff,\n  darkseagreen: 0x8fbc8fff,\n  darkslateblue: 0x483d8bff,\n  darkslategray: 0x2f4f4fff,\n  darkslategrey: 0x2f4f4fff,\n  darkturquoise: 0x00ced1ff,\n  darkviolet: 0x9400d3ff,\n  deeppink: 0xff1493ff,\n  deepskyblue: 0x00bfffff,\n  dimgray: 0x696969ff,\n  dimgrey: 0x696969ff,\n  dodgerblue: 0x1e90ffff,\n  firebrick: 0xb22222ff,\n  floralwhite: 0xfffaf0ff,\n  forestgreen: 0x228b22ff,\n  fuchsia: 0xff00ffff,\n  gainsboro: 0xdcdcdcff,\n  ghostwhite: 0xf8f8ffff,\n  gold: 0xffd700ff,\n  goldenrod: 0xdaa520ff,\n  gray: 0x808080ff,\n  green: 0x008000ff,\n  greenyellow: 0xadff2fff,\n  grey: 0x808080ff,\n  honeydew: 0xf0fff0ff,\n  hotpink: 0xff69b4ff,\n  indianred: 0xcd5c5cff,\n  indigo: 0x4b0082ff,\n  ivory: 0xfffff0ff,\n  khaki: 0xf0e68cff,\n  lavender: 0xe6e6faff,\n  lavenderblush: 0xfff0f5ff,\n  lawngreen: 0x7cfc00ff,\n  lemonchiffon: 0xfffacdff,\n  lightblue: 0xadd8e6ff,\n  lightcoral: 0xf08080ff,\n  lightcyan: 0xe0ffffff,\n  lightgoldenrodyellow: 0xfafad2ff,\n  lightgray: 0xd3d3d3ff,\n  lightgreen: 0x90ee90ff,\n  lightgrey: 0xd3d3d3ff,\n  lightpink: 0xffb6c1ff,\n  lightsalmon: 0xffa07aff,\n  lightseagreen: 0x20b2aaff,\n  lightskyblue: 0x87cefaff,\n  lightslategray: 0x778899ff,\n  lightslategrey: 0x778899ff,\n  lightsteelblue: 0xb0c4deff,\n  lightyellow: 0xffffe0ff,\n  lime: 0x00ff00ff,\n  limegreen: 0x32cd32ff,\n  linen: 0xfaf0e6ff,\n  magenta: 0xff00ffff,\n  maroon: 0x800000ff,\n  mediumaquamarine: 0x66cdaaff,\n  mediumblue: 0x0000cdff,\n  mediumorchid: 0xba55d3ff,\n  mediumpurple: 0x9370dbff,\n  mediumseagreen: 0x3cb371ff,\n  mediumslateblue: 0x7b68eeff,\n  mediumspringgreen: 0x00fa9aff,\n  mediumturquoise: 0x48d1ccff,\n  mediumvioletred: 0xc71585ff,\n  midnightblue: 0x191970ff,\n  mintcream: 0xf5fffaff,\n  mistyrose: 0xffe4e1ff,\n  moccasin: 0xffe4b5ff,\n  navajowhite: 0xffdeadff,\n  navy: 0x000080ff,\n  oldlace: 0xfdf5e6ff,\n  olive: 0x808000ff,\n  olivedrab: 0x6b8e23ff,\n  orange: 0xffa500ff,\n  orangered: 0xff4500ff,\n  orchid: 0xda70d6ff,\n  palegoldenrod: 0xeee8aaff,\n  palegreen: 0x98fb98ff,\n  paleturquoise: 0xafeeeeff,\n  palevioletred: 0xdb7093ff,\n  papayawhip: 0xffefd5ff,\n  peachpuff: 0xffdab9ff,\n  peru: 0xcd853fff,\n  pink: 0xffc0cbff,\n  plum: 0xdda0ddff,\n  powderblue: 0xb0e0e6ff,\n  purple: 0x800080ff,\n  rebeccapurple: 0x663399ff,\n  red: 0xff0000ff,\n  rosybrown: 0xbc8f8fff,\n  royalblue: 0x4169e1ff,\n  saddlebrown: 0x8b4513ff,\n  salmon: 0xfa8072ff,\n  sandybrown: 0xf4a460ff,\n  seagreen: 0x2e8b57ff,\n  seashell: 0xfff5eeff,\n  sienna: 0xa0522dff,\n  silver: 0xc0c0c0ff,\n  skyblue: 0x87ceebff,\n  slateblue: 0x6a5acdff,\n  slategray: 0x708090ff,\n  slategrey: 0x708090ff,\n  snow: 0xfffafaff,\n  springgreen: 0x00ff7fff,\n  steelblue: 0x4682b4ff,\n  tan: 0xd2b48cff,\n  teal: 0x008080ff,\n  thistle: 0xd8bfd8ff,\n  tomato: 0xff6347ff,\n  turquoise: 0x40e0d0ff,\n  violet: 0xee82eeff,\n  wheat: 0xf5deb3ff,\n  white: 0xffffffff,\n  whitesmoke: 0xf5f5f5ff,\n  yellow: 0xffff00ff,\n  yellowgreen: 0x9acd32ff\n};\n\nconst NUMBER = '[-+]?\\\\d*\\\\.?\\\\d+';\nconst PERCENTAGE = NUMBER + '%';\n\nfunction call(...parts) {\n  return '\\\\(\\\\s*(' + parts.join(')\\\\s*,\\\\s*(') + ')\\\\s*\\\\)';\n}\n\nconst rgb = new RegExp('rgb' + call(NUMBER, NUMBER, NUMBER));\nconst rgba = new RegExp('rgba' + call(NUMBER, NUMBER, NUMBER, NUMBER));\nconst hsl = new RegExp('hsl' + call(NUMBER, PERCENTAGE, PERCENTAGE));\nconst hsla = new RegExp('hsla' + call(NUMBER, PERCENTAGE, PERCENTAGE, NUMBER));\nconst hex3 = /^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/;\nconst hex4 = /^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/;\nconst hex6 = /^#([0-9a-fA-F]{6})$/;\nconst hex8 = /^#([0-9a-fA-F]{8})$/;\n\nfunction normalizeColor(color) {\n  let match;\n\n  if (typeof color === 'number') {\n    return color >>> 0 === color && color >= 0 && color <= 0xffffffff ? color : null;\n  }\n\n  if (match = hex6.exec(color)) return parseInt(match[1] + 'ff', 16) >>> 0;\n\n  if (colors$1 && colors$1[color] !== undefined) {\n    return colors$1[color];\n  }\n\n  if (match = rgb.exec(color)) {\n    return (parse255(match[1]) << 24 | parse255(match[2]) << 16 | parse255(match[3]) << 8 | 0x000000ff) >>> 0;\n  }\n\n  if (match = rgba.exec(color)) {\n    return (parse255(match[1]) << 24 | parse255(match[2]) << 16 | parse255(match[3]) << 8 | parse1(match[4])) >>> 0;\n  }\n\n  if (match = hex3.exec(color)) {\n    return parseInt(match[1] + match[1] + match[2] + match[2] + match[3] + match[3] + 'ff', 16) >>> 0;\n  }\n\n  if (match = hex8.exec(color)) return parseInt(match[1], 16) >>> 0;\n\n  if (match = hex4.exec(color)) {\n    return parseInt(match[1] + match[1] + match[2] + match[2] + match[3] + match[3] + match[4] + match[4], 16) >>> 0;\n  }\n\n  if (match = hsl.exec(color)) {\n    return (hslToRgb(parse360(match[1]), parsePercentage(match[2]), parsePercentage(match[3])) | 0x000000ff) >>> 0;\n  }\n\n  if (match = hsla.exec(color)) {\n    return (hslToRgb(parse360(match[1]), parsePercentage(match[2]), parsePercentage(match[3])) | parse1(match[4])) >>> 0;\n  }\n\n  return null;\n}\n\nfunction hue2rgb(p, q, t) {\n  if (t < 0) t += 1;\n  if (t > 1) t -= 1;\n  if (t < 1 / 6) return p + (q - p) * 6 * t;\n  if (t < 1 / 2) return q;\n  if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;\n  return p;\n}\n\nfunction hslToRgb(h, s, l) {\n  const q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n  const p = 2 * l - q;\n  const r = hue2rgb(p, q, h + 1 / 3);\n  const g = hue2rgb(p, q, h);\n  const b = hue2rgb(p, q, h - 1 / 3);\n  return Math.round(r * 255) << 24 | Math.round(g * 255) << 16 | Math.round(b * 255) << 8;\n}\n\nfunction parse255(str) {\n  const int = parseInt(str, 10);\n  if (int < 0) return 0;\n  if (int > 255) return 255;\n  return int;\n}\n\nfunction parse360(str) {\n  const int = parseFloat(str);\n  return (int % 360 + 360) % 360 / 360;\n}\n\nfunction parse1(str) {\n  const num = parseFloat(str);\n  if (num < 0) return 0;\n  if (num > 1) return 255;\n  return Math.round(num * 255);\n}\n\nfunction parsePercentage(str) {\n  const int = parseFloat(str);\n  if (int < 0) return 0;\n  if (int > 100) return 1;\n  return int / 100;\n}\n\nfunction colorToRgba(input) {\n  let int32Color = normalizeColor(input);\n  if (int32Color === null) return input;\n  int32Color = int32Color || 0;\n  let r = (int32Color & 0xff000000) >>> 24;\n  let g = (int32Color & 0x00ff0000) >>> 16;\n  let b = (int32Color & 0x0000ff00) >>> 8;\n  let a = (int32Color & 0x000000ff) / 255;\n  return `rgba(${r}, ${g}, ${b}, ${a})`;\n}\n\nconst createInterpolator = (range, output, extrapolate) => {\n  if (is.fun(range)) {\n    return range;\n  }\n\n  if (is.arr(range)) {\n    return createInterpolator({\n      range,\n      output: output,\n      extrapolate\n    });\n  }\n\n  if (is.str(range.output[0])) {\n    return createStringInterpolator$1(range);\n  }\n\n  const config = range;\n  const outputRange = config.output;\n  const inputRange = config.range || [0, 1];\n  const extrapolateLeft = config.extrapolateLeft || config.extrapolate || 'extend';\n  const extrapolateRight = config.extrapolateRight || config.extrapolate || 'extend';\n\n  const easing = config.easing || (t => t);\n\n  return input => {\n    const range = findRange(input, inputRange);\n    return interpolate(input, inputRange[range], inputRange[range + 1], outputRange[range], outputRange[range + 1], easing, extrapolateLeft, extrapolateRight, config.map);\n  };\n};\n\nfunction interpolate(input, inputMin, inputMax, outputMin, outputMax, easing, extrapolateLeft, extrapolateRight, map) {\n  let result = map ? map(input) : input;\n\n  if (result < inputMin) {\n    if (extrapolateLeft === 'identity') return result;else if (extrapolateLeft === 'clamp') result = inputMin;\n  }\n\n  if (result > inputMax) {\n    if (extrapolateRight === 'identity') return result;else if (extrapolateRight === 'clamp') result = inputMax;\n  }\n\n  if (outputMin === outputMax) return outputMin;\n  if (inputMin === inputMax) return input <= inputMin ? outputMin : outputMax;\n  if (inputMin === -Infinity) result = -result;else if (inputMax === Infinity) result = result - inputMin;else result = (result - inputMin) / (inputMax - inputMin);\n  result = easing(result);\n  if (outputMin === -Infinity) result = -result;else if (outputMax === Infinity) result = result + outputMin;else result = result * (outputMax - outputMin) + outputMin;\n  return result;\n}\n\nfunction findRange(input, inputRange) {\n  for (var i = 1; i < inputRange.length - 1; ++i) if (inputRange[i] >= input) break;\n\n  return i - 1;\n}\n\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\n\nconst $get = Symbol.for('FluidValue.get');\nconst $observers = Symbol.for('FluidValue.observers');\n\nconst hasFluidValue = arg => Boolean(arg && arg[$get]);\n\nconst getFluidValue = arg => arg && arg[$get] ? arg[$get]() : arg;\n\nconst getFluidObservers = target => target[$observers] || null;\n\nfunction callFluidObserver(observer, event) {\n  if (observer.eventObserved) {\n    observer.eventObserved(event);\n  } else {\n    observer(event);\n  }\n}\n\nfunction callFluidObservers(target, event) {\n  let observers = target[$observers];\n\n  if (observers) {\n    observers.forEach(observer => {\n      callFluidObserver(observer, event);\n    });\n  }\n}\n\nclass FluidValue {\n  constructor(get) {\n    this[$get] = void 0;\n    this[$observers] = void 0;\n\n    if (!get && !(get = this.get)) {\n      throw Error('Unknown getter');\n    }\n\n    setFluidGetter(this, get);\n  }\n\n}\n\nconst setFluidGetter = (target, get) => setHidden(target, $get, get);\n\nfunction addFluidObserver(target, observer) {\n  if (target[$get]) {\n    let observers = target[$observers];\n\n    if (!observers) {\n      setHidden(target, $observers, observers = new Set());\n    }\n\n    if (!observers.has(observer)) {\n      observers.add(observer);\n\n      if (target.observerAdded) {\n        target.observerAdded(observers.size, observer);\n      }\n    }\n  }\n\n  return observer;\n}\n\nfunction removeFluidObserver(target, observer) {\n  let observers = target[$observers];\n\n  if (observers && observers.has(observer)) {\n    const count = observers.size - 1;\n\n    if (count) {\n      observers.delete(observer);\n    } else {\n      target[$observers] = null;\n    }\n\n    if (target.observerRemoved) {\n      target.observerRemoved(count, observer);\n    }\n  }\n}\n\nconst setHidden = (target, key, value) => Object.defineProperty(target, key, {\n  value,\n  writable: true,\n  configurable: true\n});\n\nconst numberRegex = /[+\\-]?(?:0|[1-9]\\d*)(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g;\nconst colorRegex = /(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\\((-?\\d+%?[,\\s]+){2,3}\\s*[\\d\\.]+%?\\))/gi;\nconst unitRegex = new RegExp(`(${numberRegex.source})(%|[a-z]+)`, 'i');\nconst rgbaRegex = /rgba\\(([0-9\\.-]+), ([0-9\\.-]+), ([0-9\\.-]+), ([0-9\\.-]+)\\)/gi;\nconst cssVariableRegex = /var\\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\\)/;\n\nconst variableToRgba = input => {\n  const [token, fallback] = parseCSSVariable(input);\n\n  if (!token || isSSR()) {\n    return input;\n  }\n\n  const value = window.getComputedStyle(document.documentElement).getPropertyValue(token);\n\n  if (value) {\n    return value.trim();\n  } else if (fallback && fallback.startsWith('--')) {\n    const _value = window.getComputedStyle(document.documentElement).getPropertyValue(fallback);\n\n    if (_value) {\n      return _value;\n    } else {\n      return input;\n    }\n  } else if (fallback && cssVariableRegex.test(fallback)) {\n    return variableToRgba(fallback);\n  } else if (fallback) {\n    return fallback;\n  }\n\n  return input;\n};\n\nconst parseCSSVariable = current => {\n  const match = cssVariableRegex.exec(current);\n  if (!match) return [,];\n  const [, token, fallback] = match;\n  return [token, fallback];\n};\n\nlet namedColorRegex;\n\nconst rgbaRound = (_, p1, p2, p3, p4) => `rgba(${Math.round(p1)}, ${Math.round(p2)}, ${Math.round(p3)}, ${p4})`;\n\nconst createStringInterpolator = config => {\n  if (!namedColorRegex) namedColorRegex = colors$1 ? new RegExp(`(${Object.keys(colors$1).join('|')})(?!\\\\w)`, 'g') : /^\\b$/;\n  const output = config.output.map(value => {\n    return getFluidValue(value).replace(cssVariableRegex, variableToRgba).replace(colorRegex, colorToRgba).replace(namedColorRegex, colorToRgba);\n  });\n  const keyframes = output.map(value => value.match(numberRegex).map(Number));\n  const outputRanges = keyframes[0].map((_, i) => keyframes.map(values => {\n    if (!(i in values)) {\n      throw Error('The arity of each \"output\" value must be equal');\n    }\n\n    return values[i];\n  }));\n  const interpolators = outputRanges.map(output => createInterpolator(_extends({}, config, {\n    output\n  })));\n  return input => {\n    var _output$find;\n\n    const missingUnit = !unitRegex.test(output[0]) && ((_output$find = output.find(value => unitRegex.test(value))) == null ? void 0 : _output$find.replace(numberRegex, ''));\n    let i = 0;\n    return output[0].replace(numberRegex, () => `${interpolators[i++](input)}${missingUnit || ''}`).replace(rgbaRegex, rgbaRound);\n  };\n};\n\nconst prefix = 'react-spring: ';\n\nconst once = fn => {\n  const func = fn;\n  let called = false;\n\n  if (typeof func != 'function') {\n    throw new TypeError(`${prefix}once requires a function parameter`);\n  }\n\n  return (...args) => {\n    if (!called) {\n      func(...args);\n      called = true;\n    }\n  };\n};\n\nconst warnInterpolate = once(console.warn);\nfunction deprecateInterpolate() {\n  warnInterpolate(`${prefix}The \"interpolate\" function is deprecated in v9 (use \"to\" instead)`);\n}\nconst warnDirectCall = once(console.warn);\nfunction deprecateDirectCall() {\n  warnDirectCall(`${prefix}Directly calling start instead of using the api object is deprecated in v9 (use \".start\" instead), this will be removed in later 0.X.0 versions`);\n}\n\nfunction isAnimatedString(value) {\n  return is.str(value) && (value[0] == '#' || /\\d/.test(value) || !isSSR() && cssVariableRegex.test(value) || value in (colors$1 || {}));\n}\n\nconst useIsomorphicLayoutEffect = isSSR() ? useEffect : useLayoutEffect;\n\nconst useIsMounted = () => {\n  const isMounted = useRef(false);\n  useIsomorphicLayoutEffect(() => {\n    isMounted.current = true;\n    return () => {\n      isMounted.current = false;\n    };\n  }, []);\n  return isMounted;\n};\n\nfunction useForceUpdate() {\n  const update = useState()[1];\n  const isMounted = useIsMounted();\n  return () => {\n    if (isMounted.current) {\n      update(Math.random());\n    }\n  };\n}\n\nfunction useMemoOne(getResult, inputs) {\n  const [initial] = useState(() => ({\n    inputs,\n    result: getResult()\n  }));\n  const committed = useRef();\n  const prevCache = committed.current;\n  let cache = prevCache;\n\n  if (cache) {\n    const useCache = Boolean(inputs && cache.inputs && areInputsEqual(inputs, cache.inputs));\n\n    if (!useCache) {\n      cache = {\n        inputs,\n        result: getResult()\n      };\n    }\n  } else {\n    cache = initial;\n  }\n\n  useEffect(() => {\n    committed.current = cache;\n\n    if (prevCache == initial) {\n      initial.inputs = initial.result = undefined;\n    }\n  }, [cache]);\n  return cache.result;\n}\n\nfunction areInputsEqual(next, prev) {\n  if (next.length !== prev.length) {\n    return false;\n  }\n\n  for (let i = 0; i < next.length; i++) {\n    if (next[i] !== prev[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nconst useOnce = effect => useEffect(effect, emptyDeps);\nconst emptyDeps = [];\n\nfunction usePrev(value) {\n  const prevRef = useRef();\n  useEffect(() => {\n    prevRef.current = value;\n  });\n  return prevRef.current;\n}\n\nconst useReducedMotion = () => {\n  const [reducedMotion, setReducedMotion] = useState(null);\n  useIsomorphicLayoutEffect(() => {\n    const mql = window.matchMedia('(prefers-reduced-motion)');\n\n    const handleMediaChange = e => {\n      setReducedMotion(e.matches);\n      assign({\n        skipAnimation: e.matches\n      });\n    };\n\n    handleMediaChange(mql);\n    mql.addEventListener('change', handleMediaChange);\n    return () => {\n      mql.removeEventListener('change', handleMediaChange);\n    };\n  }, []);\n  return reducedMotion;\n};\n\nexport { FluidValue, globals as Globals, addFluidObserver, callFluidObserver, callFluidObservers, colorToRgba, colors, createInterpolator, createStringInterpolator, defineHidden, deprecateDirectCall, deprecateInterpolate, each, eachProp, flush, flushCalls, frameLoop, getFluidObservers, getFluidValue, hasFluidValue, hex3, hex4, hex6, hex8, hsl, hsla, is, isAnimatedString, isEqual, isSSR, noop, removeFluidObserver, rgb, rgba, setFluidGetter, toArray, useForceUpdate, useIsomorphicLayoutEffect, useMemoOne, useOnce, usePrev, useReducedMotion };\n","import { defineHidden, is, createInterpolator, eachProp, hasFluidValue, getFluidValue, each, isAnimatedString, useForceUpdate, useIsomorphicLayoutEffect, addFluidObserver, removeFluidObserver, raf, useOnce } from '@react-spring/shared';\nimport * as React from 'react';\nimport { forwardRef, useRef, useCallback, useEffect } from 'react';\n\nconst $node = Symbol.for('Animated:node');\nconst isAnimated = value => !!value && value[$node] === value;\nconst getAnimated = owner => owner && owner[$node];\nconst setAnimated = (owner, node) => defineHidden(owner, $node, node);\nconst getPayload = owner => owner && owner[$node] && owner[$node].getPayload();\nclass Animated {\n  constructor() {\n    this.payload = void 0;\n    setAnimated(this, this);\n  }\n\n  getPayload() {\n    return this.payload || [];\n  }\n\n}\n\nclass AnimatedValue extends Animated {\n  constructor(_value) {\n    super();\n    this.done = true;\n    this.elapsedTime = void 0;\n    this.lastPosition = void 0;\n    this.lastVelocity = void 0;\n    this.v0 = void 0;\n    this.durationProgress = 0;\n    this._value = _value;\n\n    if (is.num(this._value)) {\n      this.lastPosition = this._value;\n    }\n  }\n\n  static create(value) {\n    return new AnimatedValue(value);\n  }\n\n  getPayload() {\n    return [this];\n  }\n\n  getValue() {\n    return this._value;\n  }\n\n  setValue(value, step) {\n    if (is.num(value)) {\n      this.lastPosition = value;\n\n      if (step) {\n        value = Math.round(value / step) * step;\n\n        if (this.done) {\n          this.lastPosition = value;\n        }\n      }\n    }\n\n    if (this._value === value) {\n      return false;\n    }\n\n    this._value = value;\n    return true;\n  }\n\n  reset() {\n    const {\n      done\n    } = this;\n    this.done = false;\n\n    if (is.num(this._value)) {\n      this.elapsedTime = 0;\n      this.durationProgress = 0;\n      this.lastPosition = this._value;\n      if (done) this.lastVelocity = null;\n      this.v0 = null;\n    }\n  }\n\n}\n\nclass AnimatedString extends AnimatedValue {\n  constructor(value) {\n    super(0);\n    this._string = null;\n    this._toString = void 0;\n    this._toString = createInterpolator({\n      output: [value, value]\n    });\n  }\n\n  static create(value) {\n    return new AnimatedString(value);\n  }\n\n  getValue() {\n    let value = this._string;\n    return value == null ? this._string = this._toString(this._value) : value;\n  }\n\n  setValue(value) {\n    if (is.str(value)) {\n      if (value == this._string) {\n        return false;\n      }\n\n      this._string = value;\n      this._value = 1;\n    } else if (super.setValue(value)) {\n      this._string = null;\n    } else {\n      return false;\n    }\n\n    return true;\n  }\n\n  reset(goal) {\n    if (goal) {\n      this._toString = createInterpolator({\n        output: [this.getValue(), goal]\n      });\n    }\n\n    this._value = 0;\n    super.reset();\n  }\n\n}\n\nconst TreeContext = {\n  dependencies: null\n};\n\nclass AnimatedObject extends Animated {\n  constructor(source) {\n    super();\n    this.source = source;\n    this.setValue(source);\n  }\n\n  getValue(animated) {\n    const values = {};\n    eachProp(this.source, (source, key) => {\n      if (isAnimated(source)) {\n        values[key] = source.getValue(animated);\n      } else if (hasFluidValue(source)) {\n        values[key] = getFluidValue(source);\n      } else if (!animated) {\n        values[key] = source;\n      }\n    });\n    return values;\n  }\n\n  setValue(source) {\n    this.source = source;\n    this.payload = this._makePayload(source);\n  }\n\n  reset() {\n    if (this.payload) {\n      each(this.payload, node => node.reset());\n    }\n  }\n\n  _makePayload(source) {\n    if (source) {\n      const payload = new Set();\n      eachProp(source, this._addToPayload, payload);\n      return Array.from(payload);\n    }\n  }\n\n  _addToPayload(source) {\n    if (TreeContext.dependencies && hasFluidValue(source)) {\n      TreeContext.dependencies.add(source);\n    }\n\n    const payload = getPayload(source);\n\n    if (payload) {\n      each(payload, node => this.add(node));\n    }\n  }\n\n}\n\nclass AnimatedArray extends AnimatedObject {\n  constructor(source) {\n    super(source);\n  }\n\n  static create(source) {\n    return new AnimatedArray(source);\n  }\n\n  getValue() {\n    return this.source.map(node => node.getValue());\n  }\n\n  setValue(source) {\n    const payload = this.getPayload();\n\n    if (source.length == payload.length) {\n      return payload.map((node, i) => node.setValue(source[i])).some(Boolean);\n    }\n\n    super.setValue(source.map(makeAnimated));\n    return true;\n  }\n\n}\n\nfunction makeAnimated(value) {\n  const nodeType = isAnimatedString(value) ? AnimatedString : AnimatedValue;\n  return nodeType.create(value);\n}\n\nfunction getAnimatedType(value) {\n  const parentNode = getAnimated(value);\n  return parentNode ? parentNode.constructor : is.arr(value) ? AnimatedArray : isAnimatedString(value) ? AnimatedString : AnimatedValue;\n}\n\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\n\nconst withAnimated = (Component, host) => {\n  const hasInstance = !is.fun(Component) || Component.prototype && Component.prototype.isReactComponent;\n  return forwardRef((givenProps, givenRef) => {\n    const instanceRef = useRef(null);\n    const ref = hasInstance && useCallback(value => {\n      instanceRef.current = updateRef(givenRef, value);\n    }, [givenRef]);\n    const [props, deps] = getAnimatedState(givenProps, host);\n    const forceUpdate = useForceUpdate();\n\n    const callback = () => {\n      const instance = instanceRef.current;\n\n      if (hasInstance && !instance) {\n        return;\n      }\n\n      const didUpdate = instance ? host.applyAnimatedValues(instance, props.getValue(true)) : false;\n\n      if (didUpdate === false) {\n        forceUpdate();\n      }\n    };\n\n    const observer = new PropsObserver(callback, deps);\n    const observerRef = useRef();\n    useIsomorphicLayoutEffect(() => {\n      observerRef.current = observer;\n      each(deps, dep => addFluidObserver(dep, observer));\n      return () => {\n        if (observerRef.current) {\n          each(observerRef.current.deps, dep => removeFluidObserver(dep, observerRef.current));\n          raf.cancel(observerRef.current.update);\n        }\n      };\n    });\n    useEffect(callback, []);\n    useOnce(() => () => {\n      const observer = observerRef.current;\n      each(observer.deps, dep => removeFluidObserver(dep, observer));\n    });\n    const usedProps = host.getComponentProps(props.getValue());\n    return React.createElement(Component, _extends({}, usedProps, {\n      ref: ref\n    }));\n  });\n};\n\nclass PropsObserver {\n  constructor(update, deps) {\n    this.update = update;\n    this.deps = deps;\n  }\n\n  eventObserved(event) {\n    if (event.type == 'change') {\n      raf.write(this.update);\n    }\n  }\n\n}\n\nfunction getAnimatedState(props, host) {\n  const dependencies = new Set();\n  TreeContext.dependencies = dependencies;\n  if (props.style) props = _extends({}, props, {\n    style: host.createAnimatedStyle(props.style)\n  });\n  props = new AnimatedObject(props);\n  TreeContext.dependencies = null;\n  return [props, dependencies];\n}\n\nfunction updateRef(ref, value) {\n  if (ref) {\n    if (is.fun(ref)) ref(value);else ref.current = value;\n  }\n\n  return value;\n}\n\nconst cacheKey = Symbol.for('AnimatedComponent');\nconst createHost = (components, {\n  applyAnimatedValues: _applyAnimatedValues = () => false,\n  createAnimatedStyle: _createAnimatedStyle = style => new AnimatedObject(style),\n  getComponentProps: _getComponentProps = props => props\n} = {}) => {\n  const hostConfig = {\n    applyAnimatedValues: _applyAnimatedValues,\n    createAnimatedStyle: _createAnimatedStyle,\n    getComponentProps: _getComponentProps\n  };\n\n  const animated = Component => {\n    const displayName = getDisplayName(Component) || 'Anonymous';\n\n    if (is.str(Component)) {\n      Component = animated[Component] || (animated[Component] = withAnimated(Component, hostConfig));\n    } else {\n      Component = Component[cacheKey] || (Component[cacheKey] = withAnimated(Component, hostConfig));\n    }\n\n    Component.displayName = `Animated(${displayName})`;\n    return Component;\n  };\n\n  eachProp(components, (Component, key) => {\n    if (is.arr(components)) {\n      key = getDisplayName(Component);\n    }\n\n    animated[key] = animated(Component);\n  });\n  return {\n    animated\n  };\n};\n\nconst getDisplayName = arg => is.str(arg) ? arg : arg && is.str(arg.displayName) ? arg.displayName : is.fun(arg) && arg.name || null;\n\nexport { Animated, AnimatedArray, AnimatedObject, AnimatedString, AnimatedValue, createHost, getAnimated, getAnimatedType, getPayload, isAnimated, setAnimated };\n","import { eachProp, is, toArray, getFluidValue, isAnimatedString, Globals, useIsomorphicLayoutEffect, each, raf, flush, FluidValue, deprecateInterpolate, callFluidObservers, frameLoop, hasFluidValue, flushCalls, isEqual, getFluidObservers, addFluidObserver, removeFluidObserver, noop, useMemoOne, deprecateDirectCall, useForceUpdate, usePrev, useOnce, createInterpolator, createStringInterpolator } from '@react-spring/shared';\nexport { Globals, createInterpolator, useIsomorphicLayoutEffect, useReducedMotion } from '@react-spring/shared';\nimport * as React from 'react';\nimport { useContext, useMemo, useRef, useState } from 'react';\nimport { getAnimated, AnimatedValue, getPayload, AnimatedString, getAnimatedType, setAnimated } from '@react-spring/animated';\nexport * from '@react-spring/types/animated';\nexport * from '@react-spring/types/interpolation';\n\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\n\nfunction callProp(value, ...args) {\n  return is.fun(value) ? value(...args) : value;\n}\nconst matchProp = (value, key) => value === true || !!(key && value && (is.fun(value) ? value(key) : toArray(value).includes(key)));\nconst resolveProp = (prop, key) => is.obj(prop) ? key && prop[key] : prop;\nconst getDefaultProp = (props, key) => props.default === true ? props[key] : props.default ? props.default[key] : undefined;\n\nconst noopTransform = value => value;\n\nconst getDefaultProps = (props, transform = noopTransform) => {\n  let keys = DEFAULT_PROPS;\n\n  if (props.default && props.default !== true) {\n    props = props.default;\n    keys = Object.keys(props);\n  }\n\n  const defaults = {};\n\n  for (const key of keys) {\n    const value = transform(props[key], key);\n\n    if (!is.und(value)) {\n      defaults[key] = value;\n    }\n  }\n\n  return defaults;\n};\nconst DEFAULT_PROPS = ['config', 'onProps', 'onStart', 'onChange', 'onPause', 'onResume', 'onRest'];\nconst RESERVED_PROPS = {\n  config: 1,\n  from: 1,\n  to: 1,\n  ref: 1,\n  loop: 1,\n  reset: 1,\n  pause: 1,\n  cancel: 1,\n  reverse: 1,\n  immediate: 1,\n  default: 1,\n  delay: 1,\n  onProps: 1,\n  onStart: 1,\n  onChange: 1,\n  onPause: 1,\n  onResume: 1,\n  onRest: 1,\n  onResolve: 1,\n  items: 1,\n  trail: 1,\n  sort: 1,\n  expires: 1,\n  initial: 1,\n  enter: 1,\n  update: 1,\n  leave: 1,\n  children: 1,\n  onDestroyed: 1,\n  keys: 1,\n  callId: 1,\n  parentId: 1\n};\n\nfunction getForwardProps(props) {\n  const forward = {};\n  let count = 0;\n  eachProp(props, (value, prop) => {\n    if (!RESERVED_PROPS[prop]) {\n      forward[prop] = value;\n      count++;\n    }\n  });\n\n  if (count) {\n    return forward;\n  }\n}\n\nfunction inferTo(props) {\n  const to = getForwardProps(props);\n\n  if (to) {\n    const out = {\n      to\n    };\n    eachProp(props, (val, key) => key in to || (out[key] = val));\n    return out;\n  }\n\n  return _extends({}, props);\n}\nfunction computeGoal(value) {\n  value = getFluidValue(value);\n  return is.arr(value) ? value.map(computeGoal) : isAnimatedString(value) ? Globals.createStringInterpolator({\n    range: [0, 1],\n    output: [value, value]\n  })(1) : value;\n}\nfunction hasProps(props) {\n  for (const _ in props) return true;\n\n  return false;\n}\nfunction isAsyncTo(to) {\n  return is.fun(to) || is.arr(to) && is.obj(to[0]);\n}\nfunction detachRefs(ctrl, ref) {\n  var _ctrl$ref;\n\n  (_ctrl$ref = ctrl.ref) == null ? void 0 : _ctrl$ref.delete(ctrl);\n  ref == null ? void 0 : ref.delete(ctrl);\n}\nfunction replaceRef(ctrl, ref) {\n  if (ref && ctrl.ref !== ref) {\n    var _ctrl$ref2;\n\n    (_ctrl$ref2 = ctrl.ref) == null ? void 0 : _ctrl$ref2.delete(ctrl);\n    ref.add(ctrl);\n    ctrl.ref = ref;\n  }\n}\n\nfunction useChain(refs, timeSteps, timeFrame = 1000) {\n  useIsomorphicLayoutEffect(() => {\n    if (timeSteps) {\n      let prevDelay = 0;\n      each(refs, (ref, i) => {\n        const controllers = ref.current;\n\n        if (controllers.length) {\n          let delay = timeFrame * timeSteps[i];\n          if (isNaN(delay)) delay = prevDelay;else prevDelay = delay;\n          each(controllers, ctrl => {\n            each(ctrl.queue, props => {\n              const memoizedDelayProp = props.delay;\n\n              props.delay = key => delay + callProp(memoizedDelayProp || 0, key);\n            });\n          });\n          ref.start();\n        }\n      });\n    } else {\n      let p = Promise.resolve();\n      each(refs, ref => {\n        const controllers = ref.current;\n\n        if (controllers.length) {\n          const queues = controllers.map(ctrl => {\n            const q = ctrl.queue;\n            ctrl.queue = [];\n            return q;\n          });\n          p = p.then(() => {\n            each(controllers, (ctrl, i) => each(queues[i] || [], update => ctrl.queue.push(update)));\n            return Promise.all(ref.start());\n          });\n        }\n      });\n    }\n  });\n}\n\nconst config = {\n  default: {\n    tension: 170,\n    friction: 26\n  },\n  gentle: {\n    tension: 120,\n    friction: 14\n  },\n  wobbly: {\n    tension: 180,\n    friction: 12\n  },\n  stiff: {\n    tension: 210,\n    friction: 20\n  },\n  slow: {\n    tension: 280,\n    friction: 60\n  },\n  molasses: {\n    tension: 280,\n    friction: 120\n  }\n};\nconst c1 = 1.70158;\nconst c2 = c1 * 1.525;\nconst c3 = c1 + 1;\nconst c4 = 2 * Math.PI / 3;\nconst c5 = 2 * Math.PI / 4.5;\n\nconst bounceOut = x => {\n  const n1 = 7.5625;\n  const d1 = 2.75;\n\n  if (x < 1 / d1) {\n    return n1 * x * x;\n  } else if (x < 2 / d1) {\n    return n1 * (x -= 1.5 / d1) * x + 0.75;\n  } else if (x < 2.5 / d1) {\n    return n1 * (x -= 2.25 / d1) * x + 0.9375;\n  } else {\n    return n1 * (x -= 2.625 / d1) * x + 0.984375;\n  }\n};\n\nconst easings = {\n  linear: x => x,\n  easeInQuad: x => x * x,\n  easeOutQuad: x => 1 - (1 - x) * (1 - x),\n  easeInOutQuad: x => x < 0.5 ? 2 * x * x : 1 - Math.pow(-2 * x + 2, 2) / 2,\n  easeInCubic: x => x * x * x,\n  easeOutCubic: x => 1 - Math.pow(1 - x, 3),\n  easeInOutCubic: x => x < 0.5 ? 4 * x * x * x : 1 - Math.pow(-2 * x + 2, 3) / 2,\n  easeInQuart: x => x * x * x * x,\n  easeOutQuart: x => 1 - Math.pow(1 - x, 4),\n  easeInOutQuart: x => x < 0.5 ? 8 * x * x * x * x : 1 - Math.pow(-2 * x + 2, 4) / 2,\n  easeInQuint: x => x * x * x * x * x,\n  easeOutQuint: x => 1 - Math.pow(1 - x, 5),\n  easeInOutQuint: x => x < 0.5 ? 16 * x * x * x * x * x : 1 - Math.pow(-2 * x + 2, 5) / 2,\n  easeInSine: x => 1 - Math.cos(x * Math.PI / 2),\n  easeOutSine: x => Math.sin(x * Math.PI / 2),\n  easeInOutSine: x => -(Math.cos(Math.PI * x) - 1) / 2,\n  easeInExpo: x => x === 0 ? 0 : Math.pow(2, 10 * x - 10),\n  easeOutExpo: x => x === 1 ? 1 : 1 - Math.pow(2, -10 * x),\n  easeInOutExpo: x => x === 0 ? 0 : x === 1 ? 1 : x < 0.5 ? Math.pow(2, 20 * x - 10) / 2 : (2 - Math.pow(2, -20 * x + 10)) / 2,\n  easeInCirc: x => 1 - Math.sqrt(1 - Math.pow(x, 2)),\n  easeOutCirc: x => Math.sqrt(1 - Math.pow(x - 1, 2)),\n  easeInOutCirc: x => x < 0.5 ? (1 - Math.sqrt(1 - Math.pow(2 * x, 2))) / 2 : (Math.sqrt(1 - Math.pow(-2 * x + 2, 2)) + 1) / 2,\n  easeInBack: x => c3 * x * x * x - c1 * x * x,\n  easeOutBack: x => 1 + c3 * Math.pow(x - 1, 3) + c1 * Math.pow(x - 1, 2),\n  easeInOutBack: x => x < 0.5 ? Math.pow(2 * x, 2) * ((c2 + 1) * 2 * x - c2) / 2 : (Math.pow(2 * x - 2, 2) * ((c2 + 1) * (x * 2 - 2) + c2) + 2) / 2,\n  easeInElastic: x => x === 0 ? 0 : x === 1 ? 1 : -Math.pow(2, 10 * x - 10) * Math.sin((x * 10 - 10.75) * c4),\n  easeOutElastic: x => x === 0 ? 0 : x === 1 ? 1 : Math.pow(2, -10 * x) * Math.sin((x * 10 - 0.75) * c4) + 1,\n  easeInOutElastic: x => x === 0 ? 0 : x === 1 ? 1 : x < 0.5 ? -(Math.pow(2, 20 * x - 10) * Math.sin((20 * x - 11.125) * c5)) / 2 : Math.pow(2, -20 * x + 10) * Math.sin((20 * x - 11.125) * c5) / 2 + 1,\n  easeInBounce: x => 1 - bounceOut(1 - x),\n  easeOutBounce: bounceOut,\n  easeInOutBounce: x => x < 0.5 ? (1 - bounceOut(1 - 2 * x)) / 2 : (1 + bounceOut(2 * x - 1)) / 2\n};\n\nconst defaults = _extends({}, config.default, {\n  mass: 1,\n  damping: 1,\n  easing: easings.linear,\n  clamp: false\n});\n\nclass AnimationConfig {\n  constructor() {\n    this.tension = void 0;\n    this.friction = void 0;\n    this.frequency = void 0;\n    this.damping = void 0;\n    this.mass = void 0;\n    this.velocity = 0;\n    this.restVelocity = void 0;\n    this.precision = void 0;\n    this.progress = void 0;\n    this.duration = void 0;\n    this.easing = void 0;\n    this.clamp = void 0;\n    this.bounce = void 0;\n    this.decay = void 0;\n    this.round = void 0;\n    Object.assign(this, defaults);\n  }\n\n}\nfunction mergeConfig(config, newConfig, defaultConfig) {\n  if (defaultConfig) {\n    defaultConfig = _extends({}, defaultConfig);\n    sanitizeConfig(defaultConfig, newConfig);\n    newConfig = _extends({}, defaultConfig, newConfig);\n  }\n\n  sanitizeConfig(config, newConfig);\n  Object.assign(config, newConfig);\n\n  for (const key in defaults) {\n    if (config[key] == null) {\n      config[key] = defaults[key];\n    }\n  }\n\n  let {\n    mass,\n    frequency,\n    damping\n  } = config;\n\n  if (!is.und(frequency)) {\n    if (frequency < 0.01) frequency = 0.01;\n    if (damping < 0) damping = 0;\n    config.tension = Math.pow(2 * Math.PI / frequency, 2) * mass;\n    config.friction = 4 * Math.PI * damping * mass / frequency;\n  }\n\n  return config;\n}\n\nfunction sanitizeConfig(config, props) {\n  if (!is.und(props.decay)) {\n    config.duration = undefined;\n  } else {\n    const isTensionConfig = !is.und(props.tension) || !is.und(props.friction);\n\n    if (isTensionConfig || !is.und(props.frequency) || !is.und(props.damping) || !is.und(props.mass)) {\n      config.duration = undefined;\n      config.decay = undefined;\n    }\n\n    if (isTensionConfig) {\n      config.frequency = undefined;\n    }\n  }\n}\n\nconst emptyArray = [];\nclass Animation {\n  constructor() {\n    this.changed = false;\n    this.values = emptyArray;\n    this.toValues = null;\n    this.fromValues = emptyArray;\n    this.to = void 0;\n    this.from = void 0;\n    this.config = new AnimationConfig();\n    this.immediate = false;\n  }\n\n}\n\nfunction scheduleProps(callId, {\n  key,\n  props,\n  defaultProps,\n  state,\n  actions\n}) {\n  return new Promise((resolve, reject) => {\n    var _props$cancel;\n\n    let delay;\n    let timeout;\n    let cancel = matchProp((_props$cancel = props.cancel) != null ? _props$cancel : defaultProps == null ? void 0 : defaultProps.cancel, key);\n\n    if (cancel) {\n      onStart();\n    } else {\n      if (!is.und(props.pause)) {\n        state.paused = matchProp(props.pause, key);\n      }\n\n      let pause = defaultProps == null ? void 0 : defaultProps.pause;\n\n      if (pause !== true) {\n        pause = state.paused || matchProp(pause, key);\n      }\n\n      delay = callProp(props.delay || 0, key);\n\n      if (pause) {\n        state.resumeQueue.add(onResume);\n        actions.pause();\n      } else {\n        actions.resume();\n        onResume();\n      }\n    }\n\n    function onPause() {\n      state.resumeQueue.add(onResume);\n      state.timeouts.delete(timeout);\n      timeout.cancel();\n      delay = timeout.time - raf.now();\n    }\n\n    function onResume() {\n      if (delay > 0 && !Globals.skipAnimation) {\n        state.delayed = true;\n        timeout = raf.setTimeout(onStart, delay);\n        state.pauseQueue.add(onPause);\n        state.timeouts.add(timeout);\n      } else {\n        onStart();\n      }\n    }\n\n    function onStart() {\n      if (state.delayed) {\n        state.delayed = false;\n      }\n\n      state.pauseQueue.delete(onPause);\n      state.timeouts.delete(timeout);\n\n      if (callId <= (state.cancelId || 0)) {\n        cancel = true;\n      }\n\n      try {\n        actions.start(_extends({}, props, {\n          callId,\n          cancel\n        }), resolve);\n      } catch (err) {\n        reject(err);\n      }\n    }\n  });\n}\n\nconst getCombinedResult = (target, results) => results.length == 1 ? results[0] : results.some(result => result.cancelled) ? getCancelledResult(target.get()) : results.every(result => result.noop) ? getNoopResult(target.get()) : getFinishedResult(target.get(), results.every(result => result.finished));\nconst getNoopResult = value => ({\n  value,\n  noop: true,\n  finished: true,\n  cancelled: false\n});\nconst getFinishedResult = (value, finished, cancelled = false) => ({\n  value,\n  finished,\n  cancelled\n});\nconst getCancelledResult = value => ({\n  value,\n  cancelled: true,\n  finished: false\n});\n\nfunction runAsync(to, props, state, target) {\n  const {\n    callId,\n    parentId,\n    onRest\n  } = props;\n  const {\n    asyncTo: prevTo,\n    promise: prevPromise\n  } = state;\n\n  if (!parentId && to === prevTo && !props.reset) {\n    return prevPromise;\n  }\n\n  return state.promise = (async () => {\n    state.asyncId = callId;\n    state.asyncTo = to;\n    const defaultProps = getDefaultProps(props, (value, key) => key === 'onRest' ? undefined : value);\n    let preventBail;\n    let bail;\n    const bailPromise = new Promise((resolve, reject) => (preventBail = resolve, bail = reject));\n\n    const bailIfEnded = bailSignal => {\n      const bailResult = callId <= (state.cancelId || 0) && getCancelledResult(target) || callId !== state.asyncId && getFinishedResult(target, false);\n\n      if (bailResult) {\n        bailSignal.result = bailResult;\n        bail(bailSignal);\n        throw bailSignal;\n      }\n    };\n\n    const animate = (arg1, arg2) => {\n      const bailSignal = new BailSignal();\n      const skipAnimationSignal = new SkipAniamtionSignal();\n      return (async () => {\n        if (Globals.skipAnimation) {\n          stopAsync(state);\n          skipAnimationSignal.result = getFinishedResult(target, false);\n          bail(skipAnimationSignal);\n          throw skipAnimationSignal;\n        }\n\n        bailIfEnded(bailSignal);\n        const props = is.obj(arg1) ? _extends({}, arg1) : _extends({}, arg2, {\n          to: arg1\n        });\n        props.parentId = callId;\n        eachProp(defaultProps, (value, key) => {\n          if (is.und(props[key])) {\n            props[key] = value;\n          }\n        });\n        const result = await target.start(props);\n        bailIfEnded(bailSignal);\n\n        if (state.paused) {\n          await new Promise(resume => {\n            state.resumeQueue.add(resume);\n          });\n        }\n\n        return result;\n      })();\n    };\n\n    let result;\n\n    if (Globals.skipAnimation) {\n      stopAsync(state);\n      return getFinishedResult(target, false);\n    }\n\n    try {\n      let animating;\n\n      if (is.arr(to)) {\n        animating = (async queue => {\n          for (const props of queue) {\n            await animate(props);\n          }\n        })(to);\n      } else {\n        animating = Promise.resolve(to(animate, target.stop.bind(target)));\n      }\n\n      await Promise.all([animating.then(preventBail), bailPromise]);\n      result = getFinishedResult(target.get(), true, false);\n    } catch (err) {\n      if (err instanceof BailSignal) {\n        result = err.result;\n      } else if (err instanceof SkipAniamtionSignal) {\n        result = err.result;\n      } else {\n        throw err;\n      }\n    } finally {\n      if (callId == state.asyncId) {\n        state.asyncId = parentId;\n        state.asyncTo = parentId ? prevTo : undefined;\n        state.promise = parentId ? prevPromise : undefined;\n      }\n    }\n\n    if (is.fun(onRest)) {\n      raf.batchedUpdates(() => {\n        onRest(result, target, target.item);\n      });\n    }\n\n    return result;\n  })();\n}\nfunction stopAsync(state, cancelId) {\n  flush(state.timeouts, t => t.cancel());\n  state.pauseQueue.clear();\n  state.resumeQueue.clear();\n  state.asyncId = state.asyncTo = state.promise = undefined;\n  if (cancelId) state.cancelId = cancelId;\n}\nclass BailSignal extends Error {\n  constructor() {\n    super('An async animation has been interrupted. You see this error because you ' + 'forgot to use `await` or `.catch(...)` on its returned promise.');\n    this.result = void 0;\n  }\n\n}\nclass SkipAniamtionSignal extends Error {\n  constructor() {\n    super('SkipAnimationSignal');\n    this.result = void 0;\n  }\n\n}\n\nconst isFrameValue = value => value instanceof FrameValue;\nlet nextId$1 = 1;\nclass FrameValue extends FluidValue {\n  constructor(...args) {\n    super(...args);\n    this.id = nextId$1++;\n    this.key = void 0;\n    this._priority = 0;\n  }\n\n  get priority() {\n    return this._priority;\n  }\n\n  set priority(priority) {\n    if (this._priority != priority) {\n      this._priority = priority;\n\n      this._onPriorityChange(priority);\n    }\n  }\n\n  get() {\n    const node = getAnimated(this);\n    return node && node.getValue();\n  }\n\n  to(...args) {\n    return Globals.to(this, args);\n  }\n\n  interpolate(...args) {\n    deprecateInterpolate();\n    return Globals.to(this, args);\n  }\n\n  toJSON() {\n    return this.get();\n  }\n\n  observerAdded(count) {\n    if (count == 1) this._attach();\n  }\n\n  observerRemoved(count) {\n    if (count == 0) this._detach();\n  }\n\n  _attach() {}\n\n  _detach() {}\n\n  _onChange(value, idle = false) {\n    callFluidObservers(this, {\n      type: 'change',\n      parent: this,\n      value,\n      idle\n    });\n  }\n\n  _onPriorityChange(priority) {\n    if (!this.idle) {\n      frameLoop.sort(this);\n    }\n\n    callFluidObservers(this, {\n      type: 'priority',\n      parent: this,\n      priority\n    });\n  }\n\n}\n\nconst $P = Symbol.for('SpringPhase');\nconst HAS_ANIMATED = 1;\nconst IS_ANIMATING = 2;\nconst IS_PAUSED = 4;\nconst hasAnimated = target => (target[$P] & HAS_ANIMATED) > 0;\nconst isAnimating = target => (target[$P] & IS_ANIMATING) > 0;\nconst isPaused = target => (target[$P] & IS_PAUSED) > 0;\nconst setActiveBit = (target, active) => active ? target[$P] |= IS_ANIMATING | HAS_ANIMATED : target[$P] &= ~IS_ANIMATING;\nconst setPausedBit = (target, paused) => paused ? target[$P] |= IS_PAUSED : target[$P] &= ~IS_PAUSED;\n\nclass SpringValue extends FrameValue {\n  constructor(arg1, arg2) {\n    super();\n    this.key = void 0;\n    this.animation = new Animation();\n    this.queue = void 0;\n    this.defaultProps = {};\n    this._state = {\n      paused: false,\n      delayed: false,\n      pauseQueue: new Set(),\n      resumeQueue: new Set(),\n      timeouts: new Set()\n    };\n    this._pendingCalls = new Set();\n    this._lastCallId = 0;\n    this._lastToId = 0;\n    this._memoizedDuration = 0;\n\n    if (!is.und(arg1) || !is.und(arg2)) {\n      const props = is.obj(arg1) ? _extends({}, arg1) : _extends({}, arg2, {\n        from: arg1\n      });\n\n      if (is.und(props.default)) {\n        props.default = true;\n      }\n\n      this.start(props);\n    }\n  }\n\n  get idle() {\n    return !(isAnimating(this) || this._state.asyncTo) || isPaused(this);\n  }\n\n  get goal() {\n    return getFluidValue(this.animation.to);\n  }\n\n  get velocity() {\n    const node = getAnimated(this);\n    return node instanceof AnimatedValue ? node.lastVelocity || 0 : node.getPayload().map(node => node.lastVelocity || 0);\n  }\n\n  get hasAnimated() {\n    return hasAnimated(this);\n  }\n\n  get isAnimating() {\n    return isAnimating(this);\n  }\n\n  get isPaused() {\n    return isPaused(this);\n  }\n\n  get isDelayed() {\n    return this._state.delayed;\n  }\n\n  advance(dt) {\n    let idle = true;\n    let changed = false;\n    const anim = this.animation;\n    let {\n      config,\n      toValues\n    } = anim;\n    const payload = getPayload(anim.to);\n\n    if (!payload && hasFluidValue(anim.to)) {\n      toValues = toArray(getFluidValue(anim.to));\n    }\n\n    anim.values.forEach((node, i) => {\n      if (node.done) return;\n      const to = node.constructor == AnimatedString ? 1 : payload ? payload[i].lastPosition : toValues[i];\n      let finished = anim.immediate;\n      let position = to;\n\n      if (!finished) {\n        position = node.lastPosition;\n\n        if (config.tension <= 0) {\n          node.done = true;\n          return;\n        }\n\n        let elapsed = node.elapsedTime += dt;\n        const from = anim.fromValues[i];\n        const v0 = node.v0 != null ? node.v0 : node.v0 = is.arr(config.velocity) ? config.velocity[i] : config.velocity;\n        let velocity;\n        const precision = config.precision || (from == to ? 0.005 : Math.min(1, Math.abs(to - from) * 0.001));\n\n        if (!is.und(config.duration)) {\n          let p = 1;\n\n          if (config.duration > 0) {\n            if (this._memoizedDuration !== config.duration) {\n              this._memoizedDuration = config.duration;\n\n              if (node.durationProgress > 0) {\n                node.elapsedTime = config.duration * node.durationProgress;\n                elapsed = node.elapsedTime += dt;\n              }\n            }\n\n            p = (config.progress || 0) + elapsed / this._memoizedDuration;\n            p = p > 1 ? 1 : p < 0 ? 0 : p;\n            node.durationProgress = p;\n          }\n\n          position = from + config.easing(p) * (to - from);\n          velocity = (position - node.lastPosition) / dt;\n          finished = p == 1;\n        } else if (config.decay) {\n          const decay = config.decay === true ? 0.998 : config.decay;\n          const e = Math.exp(-(1 - decay) * elapsed);\n          position = from + v0 / (1 - decay) * (1 - e);\n          finished = Math.abs(node.lastPosition - position) <= precision;\n          velocity = v0 * e;\n        } else {\n          velocity = node.lastVelocity == null ? v0 : node.lastVelocity;\n          const restVelocity = config.restVelocity || precision / 10;\n          const bounceFactor = config.clamp ? 0 : config.bounce;\n          const canBounce = !is.und(bounceFactor);\n          const isGrowing = from == to ? node.v0 > 0 : from < to;\n          let isMoving;\n          let isBouncing = false;\n          const step = 1;\n          const numSteps = Math.ceil(dt / step);\n\n          for (let n = 0; n < numSteps; ++n) {\n            isMoving = Math.abs(velocity) > restVelocity;\n\n            if (!isMoving) {\n              finished = Math.abs(to - position) <= precision;\n\n              if (finished) {\n                break;\n              }\n            }\n\n            if (canBounce) {\n              isBouncing = position == to || position > to == isGrowing;\n\n              if (isBouncing) {\n                velocity = -velocity * bounceFactor;\n                position = to;\n              }\n            }\n\n            const springForce = -config.tension * 0.000001 * (position - to);\n            const dampingForce = -config.friction * 0.001 * velocity;\n            const acceleration = (springForce + dampingForce) / config.mass;\n            velocity = velocity + acceleration * step;\n            position = position + velocity * step;\n          }\n        }\n\n        node.lastVelocity = velocity;\n\n        if (Number.isNaN(position)) {\n          console.warn(`Got NaN while animating:`, this);\n          finished = true;\n        }\n      }\n\n      if (payload && !payload[i].done) {\n        finished = false;\n      }\n\n      if (finished) {\n        node.done = true;\n      } else {\n        idle = false;\n      }\n\n      if (node.setValue(position, config.round)) {\n        changed = true;\n      }\n    });\n    const node = getAnimated(this);\n    const currVal = node.getValue();\n\n    if (idle) {\n      const finalVal = getFluidValue(anim.to);\n\n      if ((currVal !== finalVal || changed) && !config.decay) {\n        node.setValue(finalVal);\n\n        this._onChange(finalVal);\n      } else if (changed && config.decay) {\n        this._onChange(currVal);\n      }\n\n      this._stop();\n    } else if (changed) {\n      this._onChange(currVal);\n    }\n  }\n\n  set(value) {\n    raf.batchedUpdates(() => {\n      this._stop();\n\n      this._focus(value);\n\n      this._set(value);\n    });\n    return this;\n  }\n\n  pause() {\n    this._update({\n      pause: true\n    });\n  }\n\n  resume() {\n    this._update({\n      pause: false\n    });\n  }\n\n  finish() {\n    if (isAnimating(this)) {\n      const {\n        to,\n        config\n      } = this.animation;\n      raf.batchedUpdates(() => {\n        this._onStart();\n\n        if (!config.decay) {\n          this._set(to, false);\n        }\n\n        this._stop();\n      });\n    }\n\n    return this;\n  }\n\n  update(props) {\n    const queue = this.queue || (this.queue = []);\n    queue.push(props);\n    return this;\n  }\n\n  start(to, arg2) {\n    let queue;\n\n    if (!is.und(to)) {\n      queue = [is.obj(to) ? to : _extends({}, arg2, {\n        to\n      })];\n    } else {\n      queue = this.queue || [];\n      this.queue = [];\n    }\n\n    return Promise.all(queue.map(props => {\n      const up = this._update(props);\n\n      return up;\n    })).then(results => getCombinedResult(this, results));\n  }\n\n  stop(cancel) {\n    const {\n      to\n    } = this.animation;\n\n    this._focus(this.get());\n\n    stopAsync(this._state, cancel && this._lastCallId);\n    raf.batchedUpdates(() => this._stop(to, cancel));\n    return this;\n  }\n\n  reset() {\n    this._update({\n      reset: true\n    });\n  }\n\n  eventObserved(event) {\n    if (event.type == 'change') {\n      this._start();\n    } else if (event.type == 'priority') {\n      this.priority = event.priority + 1;\n    }\n  }\n\n  _prepareNode(props) {\n    const key = this.key || '';\n    let {\n      to,\n      from\n    } = props;\n    to = is.obj(to) ? to[key] : to;\n\n    if (to == null || isAsyncTo(to)) {\n      to = undefined;\n    }\n\n    from = is.obj(from) ? from[key] : from;\n\n    if (from == null) {\n      from = undefined;\n    }\n\n    const range = {\n      to,\n      from\n    };\n\n    if (!hasAnimated(this)) {\n      if (props.reverse) [to, from] = [from, to];\n      from = getFluidValue(from);\n\n      if (!is.und(from)) {\n        this._set(from);\n      } else if (!getAnimated(this)) {\n        this._set(to);\n      }\n    }\n\n    return range;\n  }\n\n  _update(_ref, isLoop) {\n    let props = _extends({}, _ref);\n\n    const {\n      key,\n      defaultProps\n    } = this;\n    if (props.default) Object.assign(defaultProps, getDefaultProps(props, (value, prop) => /^on/.test(prop) ? resolveProp(value, key) : value));\n    mergeActiveFn(this, props, 'onProps');\n    sendEvent(this, 'onProps', props, this);\n\n    const range = this._prepareNode(props);\n\n    if (Object.isFrozen(this)) {\n      throw Error('Cannot animate a `SpringValue` object that is frozen. ' + 'Did you forget to pass your component to `animated(...)` before animating its props?');\n    }\n\n    const state = this._state;\n    return scheduleProps(++this._lastCallId, {\n      key,\n      props,\n      defaultProps,\n      state,\n      actions: {\n        pause: () => {\n          if (!isPaused(this)) {\n            setPausedBit(this, true);\n            flushCalls(state.pauseQueue);\n            sendEvent(this, 'onPause', getFinishedResult(this, checkFinished(this, this.animation.to)), this);\n          }\n        },\n        resume: () => {\n          if (isPaused(this)) {\n            setPausedBit(this, false);\n\n            if (isAnimating(this)) {\n              this._resume();\n            }\n\n            flushCalls(state.resumeQueue);\n            sendEvent(this, 'onResume', getFinishedResult(this, checkFinished(this, this.animation.to)), this);\n          }\n        },\n        start: this._merge.bind(this, range)\n      }\n    }).then(result => {\n      if (props.loop && result.finished && !(isLoop && result.noop)) {\n        const nextProps = createLoopUpdate(props);\n\n        if (nextProps) {\n          return this._update(nextProps, true);\n        }\n      }\n\n      return result;\n    });\n  }\n\n  _merge(range, props, resolve) {\n    if (props.cancel) {\n      this.stop(true);\n      return resolve(getCancelledResult(this));\n    }\n\n    const hasToProp = !is.und(range.to);\n    const hasFromProp = !is.und(range.from);\n\n    if (hasToProp || hasFromProp) {\n      if (props.callId > this._lastToId) {\n        this._lastToId = props.callId;\n      } else {\n        return resolve(getCancelledResult(this));\n      }\n    }\n\n    const {\n      key,\n      defaultProps,\n      animation: anim\n    } = this;\n    const {\n      to: prevTo,\n      from: prevFrom\n    } = anim;\n    let {\n      to = prevTo,\n      from = prevFrom\n    } = range;\n\n    if (hasFromProp && !hasToProp && (!props.default || is.und(to))) {\n      to = from;\n    }\n\n    if (props.reverse) [to, from] = [from, to];\n    const hasFromChanged = !isEqual(from, prevFrom);\n\n    if (hasFromChanged) {\n      anim.from = from;\n    }\n\n    from = getFluidValue(from);\n    const hasToChanged = !isEqual(to, prevTo);\n\n    if (hasToChanged) {\n      this._focus(to);\n    }\n\n    const hasAsyncTo = isAsyncTo(props.to);\n    const {\n      config\n    } = anim;\n    const {\n      decay,\n      velocity\n    } = config;\n\n    if (hasToProp || hasFromProp) {\n      config.velocity = 0;\n    }\n\n    if (props.config && !hasAsyncTo) {\n      mergeConfig(config, callProp(props.config, key), props.config !== defaultProps.config ? callProp(defaultProps.config, key) : void 0);\n    }\n\n    let node = getAnimated(this);\n\n    if (!node || is.und(to)) {\n      return resolve(getFinishedResult(this, true));\n    }\n\n    const reset = is.und(props.reset) ? hasFromProp && !props.default : !is.und(from) && matchProp(props.reset, key);\n    const value = reset ? from : this.get();\n    const goal = computeGoal(to);\n    const isAnimatable = is.num(goal) || is.arr(goal) || isAnimatedString(goal);\n    const immediate = !hasAsyncTo && (!isAnimatable || matchProp(defaultProps.immediate || props.immediate, key));\n\n    if (hasToChanged) {\n      const nodeType = getAnimatedType(to);\n\n      if (nodeType !== node.constructor) {\n        if (immediate) {\n          node = this._set(goal);\n        } else throw Error(`Cannot animate between ${node.constructor.name} and ${nodeType.name}, as the \"to\" prop suggests`);\n      }\n    }\n\n    const goalType = node.constructor;\n    let started = hasFluidValue(to);\n    let finished = false;\n\n    if (!started) {\n      const hasValueChanged = reset || !hasAnimated(this) && hasFromChanged;\n\n      if (hasToChanged || hasValueChanged) {\n        finished = isEqual(computeGoal(value), goal);\n        started = !finished;\n      }\n\n      if (!isEqual(anim.immediate, immediate) && !immediate || !isEqual(config.decay, decay) || !isEqual(config.velocity, velocity)) {\n        started = true;\n      }\n    }\n\n    if (finished && isAnimating(this)) {\n      if (anim.changed && !reset) {\n        started = true;\n      } else if (!started) {\n        this._stop(prevTo);\n      }\n    }\n\n    if (!hasAsyncTo) {\n      if (started || hasFluidValue(prevTo)) {\n        anim.values = node.getPayload();\n        anim.toValues = hasFluidValue(to) ? null : goalType == AnimatedString ? [1] : toArray(goal);\n      }\n\n      if (anim.immediate != immediate) {\n        anim.immediate = immediate;\n\n        if (!immediate && !reset) {\n          this._set(prevTo);\n        }\n      }\n\n      if (started) {\n        const {\n          onRest\n        } = anim;\n        each(ACTIVE_EVENTS, type => mergeActiveFn(this, props, type));\n        const result = getFinishedResult(this, checkFinished(this, prevTo));\n        flushCalls(this._pendingCalls, result);\n\n        this._pendingCalls.add(resolve);\n\n        if (anim.changed) raf.batchedUpdates(() => {\n          anim.changed = !reset;\n          onRest == null ? void 0 : onRest(result, this);\n\n          if (reset) {\n            callProp(defaultProps.onRest, result);\n          } else {\n            anim.onStart == null ? void 0 : anim.onStart(result, this);\n          }\n        });\n      }\n    }\n\n    if (reset) {\n      this._set(value);\n    }\n\n    if (hasAsyncTo) {\n      resolve(runAsync(props.to, props, this._state, this));\n    } else if (started) {\n      this._start();\n    } else if (isAnimating(this) && !hasToChanged) {\n      this._pendingCalls.add(resolve);\n    } else {\n      resolve(getNoopResult(value));\n    }\n  }\n\n  _focus(value) {\n    const anim = this.animation;\n\n    if (value !== anim.to) {\n      if (getFluidObservers(this)) {\n        this._detach();\n      }\n\n      anim.to = value;\n\n      if (getFluidObservers(this)) {\n        this._attach();\n      }\n    }\n  }\n\n  _attach() {\n    let priority = 0;\n    const {\n      to\n    } = this.animation;\n\n    if (hasFluidValue(to)) {\n      addFluidObserver(to, this);\n\n      if (isFrameValue(to)) {\n        priority = to.priority + 1;\n      }\n    }\n\n    this.priority = priority;\n  }\n\n  _detach() {\n    const {\n      to\n    } = this.animation;\n\n    if (hasFluidValue(to)) {\n      removeFluidObserver(to, this);\n    }\n  }\n\n  _set(arg, idle = true) {\n    const value = getFluidValue(arg);\n\n    if (!is.und(value)) {\n      const oldNode = getAnimated(this);\n\n      if (!oldNode || !isEqual(value, oldNode.getValue())) {\n        const nodeType = getAnimatedType(value);\n\n        if (!oldNode || oldNode.constructor != nodeType) {\n          setAnimated(this, nodeType.create(value));\n        } else {\n          oldNode.setValue(value);\n        }\n\n        if (oldNode) {\n          raf.batchedUpdates(() => {\n            this._onChange(value, idle);\n          });\n        }\n      }\n    }\n\n    return getAnimated(this);\n  }\n\n  _onStart() {\n    const anim = this.animation;\n\n    if (!anim.changed) {\n      anim.changed = true;\n      sendEvent(this, 'onStart', getFinishedResult(this, checkFinished(this, anim.to)), this);\n    }\n  }\n\n  _onChange(value, idle) {\n    if (!idle) {\n      this._onStart();\n\n      callProp(this.animation.onChange, value, this);\n    }\n\n    callProp(this.defaultProps.onChange, value, this);\n\n    super._onChange(value, idle);\n  }\n\n  _start() {\n    const anim = this.animation;\n    getAnimated(this).reset(getFluidValue(anim.to));\n\n    if (!anim.immediate) {\n      anim.fromValues = anim.values.map(node => node.lastPosition);\n    }\n\n    if (!isAnimating(this)) {\n      setActiveBit(this, true);\n\n      if (!isPaused(this)) {\n        this._resume();\n      }\n    }\n  }\n\n  _resume() {\n    if (Globals.skipAnimation) {\n      this.finish();\n    } else {\n      frameLoop.start(this);\n    }\n  }\n\n  _stop(goal, cancel) {\n    if (isAnimating(this)) {\n      setActiveBit(this, false);\n      const anim = this.animation;\n      each(anim.values, node => {\n        node.done = true;\n      });\n\n      if (anim.toValues) {\n        anim.onChange = anim.onPause = anim.onResume = undefined;\n      }\n\n      callFluidObservers(this, {\n        type: 'idle',\n        parent: this\n      });\n      const result = cancel ? getCancelledResult(this.get()) : getFinishedResult(this.get(), checkFinished(this, goal != null ? goal : anim.to));\n      flushCalls(this._pendingCalls, result);\n\n      if (anim.changed) {\n        anim.changed = false;\n        sendEvent(this, 'onRest', result, this);\n      }\n    }\n  }\n\n}\n\nfunction checkFinished(target, to) {\n  const goal = computeGoal(to);\n  const value = computeGoal(target.get());\n  return isEqual(value, goal);\n}\n\nfunction createLoopUpdate(props, loop = props.loop, to = props.to) {\n  let loopRet = callProp(loop);\n\n  if (loopRet) {\n    const overrides = loopRet !== true && inferTo(loopRet);\n    const reverse = (overrides || props).reverse;\n    const reset = !overrides || overrides.reset;\n    return createUpdate(_extends({}, props, {\n      loop,\n      default: false,\n      pause: undefined,\n      to: !reverse || isAsyncTo(to) ? to : undefined,\n      from: reset ? props.from : undefined,\n      reset\n    }, overrides));\n  }\n}\nfunction createUpdate(props) {\n  const {\n    to,\n    from\n  } = props = inferTo(props);\n  const keys = new Set();\n  if (is.obj(to)) findDefined(to, keys);\n  if (is.obj(from)) findDefined(from, keys);\n  props.keys = keys.size ? Array.from(keys) : null;\n  return props;\n}\nfunction declareUpdate(props) {\n  const update = createUpdate(props);\n\n  if (is.und(update.default)) {\n    update.default = getDefaultProps(update);\n  }\n\n  return update;\n}\n\nfunction findDefined(values, keys) {\n  eachProp(values, (value, key) => value != null && keys.add(key));\n}\n\nconst ACTIVE_EVENTS = ['onStart', 'onRest', 'onChange', 'onPause', 'onResume'];\n\nfunction mergeActiveFn(target, props, type) {\n  target.animation[type] = props[type] !== getDefaultProp(props, type) ? resolveProp(props[type], target.key) : undefined;\n}\n\nfunction sendEvent(target, type, ...args) {\n  var _target$animation$typ, _target$animation, _target$defaultProps$, _target$defaultProps;\n\n  (_target$animation$typ = (_target$animation = target.animation)[type]) == null ? void 0 : _target$animation$typ.call(_target$animation, ...args);\n  (_target$defaultProps$ = (_target$defaultProps = target.defaultProps)[type]) == null ? void 0 : _target$defaultProps$.call(_target$defaultProps, ...args);\n}\n\nconst BATCHED_EVENTS = ['onStart', 'onChange', 'onRest'];\nlet nextId = 1;\nclass Controller {\n  constructor(props, flush) {\n    this.id = nextId++;\n    this.springs = {};\n    this.queue = [];\n    this.ref = void 0;\n    this._flush = void 0;\n    this._initialProps = void 0;\n    this._lastAsyncId = 0;\n    this._active = new Set();\n    this._changed = new Set();\n    this._started = false;\n    this._item = void 0;\n    this._state = {\n      paused: false,\n      pauseQueue: new Set(),\n      resumeQueue: new Set(),\n      timeouts: new Set()\n    };\n    this._events = {\n      onStart: new Map(),\n      onChange: new Map(),\n      onRest: new Map()\n    };\n    this._onFrame = this._onFrame.bind(this);\n\n    if (flush) {\n      this._flush = flush;\n    }\n\n    if (props) {\n      this.start(_extends({\n        default: true\n      }, props));\n    }\n  }\n\n  get idle() {\n    return !this._state.asyncTo && Object.values(this.springs).every(spring => {\n      return spring.idle && !spring.isDelayed && !spring.isPaused;\n    });\n  }\n\n  get item() {\n    return this._item;\n  }\n\n  set item(item) {\n    this._item = item;\n  }\n\n  get() {\n    const values = {};\n    this.each((spring, key) => values[key] = spring.get());\n    return values;\n  }\n\n  set(values) {\n    for (const key in values) {\n      const value = values[key];\n\n      if (!is.und(value)) {\n        this.springs[key].set(value);\n      }\n    }\n  }\n\n  update(props) {\n    if (props) {\n      this.queue.push(createUpdate(props));\n    }\n\n    return this;\n  }\n\n  start(props) {\n    let {\n      queue\n    } = this;\n\n    if (props) {\n      queue = toArray(props).map(createUpdate);\n    } else {\n      this.queue = [];\n    }\n\n    if (this._flush) {\n      return this._flush(this, queue);\n    }\n\n    prepareKeys(this, queue);\n    return flushUpdateQueue(this, queue);\n  }\n\n  stop(arg, keys) {\n    if (arg !== !!arg) {\n      keys = arg;\n    }\n\n    if (keys) {\n      const springs = this.springs;\n      each(toArray(keys), key => springs[key].stop(!!arg));\n    } else {\n      stopAsync(this._state, this._lastAsyncId);\n      this.each(spring => spring.stop(!!arg));\n    }\n\n    return this;\n  }\n\n  pause(keys) {\n    if (is.und(keys)) {\n      this.start({\n        pause: true\n      });\n    } else {\n      const springs = this.springs;\n      each(toArray(keys), key => springs[key].pause());\n    }\n\n    return this;\n  }\n\n  resume(keys) {\n    if (is.und(keys)) {\n      this.start({\n        pause: false\n      });\n    } else {\n      const springs = this.springs;\n      each(toArray(keys), key => springs[key].resume());\n    }\n\n    return this;\n  }\n\n  each(iterator) {\n    eachProp(this.springs, iterator);\n  }\n\n  _onFrame() {\n    const {\n      onStart,\n      onChange,\n      onRest\n    } = this._events;\n    const active = this._active.size > 0;\n    const changed = this._changed.size > 0;\n\n    if (active && !this._started || changed && !this._started) {\n      this._started = true;\n      flush(onStart, ([onStart, result]) => {\n        result.value = this.get();\n        onStart(result, this, this._item);\n      });\n    }\n\n    const idle = !active && this._started;\n    const values = changed || idle && onRest.size ? this.get() : null;\n\n    if (changed && onChange.size) {\n      flush(onChange, ([onChange, result]) => {\n        result.value = values;\n        onChange(result, this, this._item);\n      });\n    }\n\n    if (idle) {\n      this._started = false;\n      flush(onRest, ([onRest, result]) => {\n        result.value = values;\n        onRest(result, this, this._item);\n      });\n    }\n  }\n\n  eventObserved(event) {\n    if (event.type == 'change') {\n      this._changed.add(event.parent);\n\n      if (!event.idle) {\n        this._active.add(event.parent);\n      }\n    } else if (event.type == 'idle') {\n      this._active.delete(event.parent);\n    } else return;\n\n    raf.onFrame(this._onFrame);\n  }\n\n}\nfunction flushUpdateQueue(ctrl, queue) {\n  return Promise.all(queue.map(props => flushUpdate(ctrl, props))).then(results => getCombinedResult(ctrl, results));\n}\nasync function flushUpdate(ctrl, props, isLoop) {\n  const {\n    keys,\n    to,\n    from,\n    loop,\n    onRest,\n    onResolve\n  } = props;\n  const defaults = is.obj(props.default) && props.default;\n\n  if (loop) {\n    props.loop = false;\n  }\n\n  if (to === false) props.to = null;\n  if (from === false) props.from = null;\n  const asyncTo = is.arr(to) || is.fun(to) ? to : undefined;\n\n  if (asyncTo) {\n    props.to = undefined;\n    props.onRest = undefined;\n\n    if (defaults) {\n      defaults.onRest = undefined;\n    }\n  } else {\n    each(BATCHED_EVENTS, key => {\n      const handler = props[key];\n\n      if (is.fun(handler)) {\n        const queue = ctrl['_events'][key];\n\n        props[key] = ({\n          finished,\n          cancelled\n        }) => {\n          const result = queue.get(handler);\n\n          if (result) {\n            if (!finished) result.finished = false;\n            if (cancelled) result.cancelled = true;\n          } else {\n            queue.set(handler, {\n              value: null,\n              finished: finished || false,\n              cancelled: cancelled || false\n            });\n          }\n        };\n\n        if (defaults) {\n          defaults[key] = props[key];\n        }\n      }\n    });\n  }\n\n  const state = ctrl['_state'];\n\n  if (props.pause === !state.paused) {\n    state.paused = props.pause;\n    flushCalls(props.pause ? state.pauseQueue : state.resumeQueue);\n  } else if (state.paused) {\n    props.pause = true;\n  }\n\n  const promises = (keys || Object.keys(ctrl.springs)).map(key => ctrl.springs[key].start(props));\n  const cancel = props.cancel === true || getDefaultProp(props, 'cancel') === true;\n\n  if (asyncTo || cancel && state.asyncId) {\n    promises.push(scheduleProps(++ctrl['_lastAsyncId'], {\n      props,\n      state,\n      actions: {\n        pause: noop,\n        resume: noop,\n\n        start(props, resolve) {\n          if (cancel) {\n            stopAsync(state, ctrl['_lastAsyncId']);\n            resolve(getCancelledResult(ctrl));\n          } else {\n            props.onRest = onRest;\n            resolve(runAsync(asyncTo, props, state, ctrl));\n          }\n        }\n\n      }\n    }));\n  }\n\n  if (state.paused) {\n    await new Promise(resume => {\n      state.resumeQueue.add(resume);\n    });\n  }\n\n  const result = getCombinedResult(ctrl, await Promise.all(promises));\n\n  if (loop && result.finished && !(isLoop && result.noop)) {\n    const nextProps = createLoopUpdate(props, loop, to);\n\n    if (nextProps) {\n      prepareKeys(ctrl, [nextProps]);\n      return flushUpdate(ctrl, nextProps, true);\n    }\n  }\n\n  if (onResolve) {\n    raf.batchedUpdates(() => onResolve(result, ctrl, ctrl.item));\n  }\n\n  return result;\n}\nfunction getSprings(ctrl, props) {\n  const springs = _extends({}, ctrl.springs);\n\n  if (props) {\n    each(toArray(props), props => {\n      if (is.und(props.keys)) {\n        props = createUpdate(props);\n      }\n\n      if (!is.obj(props.to)) {\n        props = _extends({}, props, {\n          to: undefined\n        });\n      }\n\n      prepareSprings(springs, props, key => {\n        return createSpring(key);\n      });\n    });\n  }\n\n  setSprings(ctrl, springs);\n  return springs;\n}\nfunction setSprings(ctrl, springs) {\n  eachProp(springs, (spring, key) => {\n    if (!ctrl.springs[key]) {\n      ctrl.springs[key] = spring;\n      addFluidObserver(spring, ctrl);\n    }\n  });\n}\n\nfunction createSpring(key, observer) {\n  const spring = new SpringValue();\n  spring.key = key;\n\n  if (observer) {\n    addFluidObserver(spring, observer);\n  }\n\n  return spring;\n}\n\nfunction prepareSprings(springs, props, create) {\n  if (props.keys) {\n    each(props.keys, key => {\n      const spring = springs[key] || (springs[key] = create(key));\n      spring['_prepareNode'](props);\n    });\n  }\n}\n\nfunction prepareKeys(ctrl, queue) {\n  each(queue, props => {\n    prepareSprings(ctrl.springs, props, key => {\n      return createSpring(key, ctrl);\n    });\n  });\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nconst _excluded$3 = [\"children\"];\nconst SpringContext = _ref => {\n  let {\n    children\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, _excluded$3);\n\n  const inherited = useContext(ctx);\n  const pause = props.pause || !!inherited.pause,\n        immediate = props.immediate || !!inherited.immediate;\n  props = useMemoOne(() => ({\n    pause,\n    immediate\n  }), [pause, immediate]);\n  const {\n    Provider\n  } = ctx;\n  return React.createElement(Provider, {\n    value: props\n  }, children);\n};\nconst ctx = makeContext(SpringContext, {});\nSpringContext.Provider = ctx.Provider;\nSpringContext.Consumer = ctx.Consumer;\n\nfunction makeContext(target, init) {\n  Object.assign(target, React.createContext(init));\n  target.Provider._context = target;\n  target.Consumer._context = target;\n  return target;\n}\n\nconst SpringRef = () => {\n  const current = [];\n\n  const SpringRef = function SpringRef(props) {\n    deprecateDirectCall();\n    const results = [];\n    each(current, (ctrl, i) => {\n      if (is.und(props)) {\n        results.push(ctrl.start());\n      } else {\n        const update = _getProps(props, ctrl, i);\n\n        if (update) {\n          results.push(ctrl.start(update));\n        }\n      }\n    });\n    return results;\n  };\n\n  SpringRef.current = current;\n\n  SpringRef.add = function (ctrl) {\n    if (!current.includes(ctrl)) {\n      current.push(ctrl);\n    }\n  };\n\n  SpringRef.delete = function (ctrl) {\n    const i = current.indexOf(ctrl);\n    if (~i) current.splice(i, 1);\n  };\n\n  SpringRef.pause = function () {\n    each(current, ctrl => ctrl.pause(...arguments));\n    return this;\n  };\n\n  SpringRef.resume = function () {\n    each(current, ctrl => ctrl.resume(...arguments));\n    return this;\n  };\n\n  SpringRef.set = function (values) {\n    each(current, ctrl => ctrl.set(values));\n  };\n\n  SpringRef.start = function (props) {\n    const results = [];\n    each(current, (ctrl, i) => {\n      if (is.und(props)) {\n        results.push(ctrl.start());\n      } else {\n        const update = this._getProps(props, ctrl, i);\n\n        if (update) {\n          results.push(ctrl.start(update));\n        }\n      }\n    });\n    return results;\n  };\n\n  SpringRef.stop = function () {\n    each(current, ctrl => ctrl.stop(...arguments));\n    return this;\n  };\n\n  SpringRef.update = function (props) {\n    each(current, (ctrl, i) => ctrl.update(this._getProps(props, ctrl, i)));\n    return this;\n  };\n\n  const _getProps = function _getProps(arg, ctrl, index) {\n    return is.fun(arg) ? arg(index, ctrl) : arg;\n  };\n\n  SpringRef._getProps = _getProps;\n  return SpringRef;\n};\n\nfunction useSprings(length, props, deps) {\n  const propsFn = is.fun(props) && props;\n  if (propsFn && !deps) deps = [];\n  const ref = useMemo(() => propsFn || arguments.length == 3 ? SpringRef() : void 0, []);\n  const layoutId = useRef(0);\n  const forceUpdate = useForceUpdate();\n  const state = useMemo(() => ({\n    ctrls: [],\n    queue: [],\n\n    flush(ctrl, updates) {\n      const springs = getSprings(ctrl, updates);\n      const canFlushSync = layoutId.current > 0 && !state.queue.length && !Object.keys(springs).some(key => !ctrl.springs[key]);\n      return canFlushSync ? flushUpdateQueue(ctrl, updates) : new Promise(resolve => {\n        setSprings(ctrl, springs);\n        state.queue.push(() => {\n          resolve(flushUpdateQueue(ctrl, updates));\n        });\n        forceUpdate();\n      });\n    }\n\n  }), []);\n  const ctrls = useRef([...state.ctrls]);\n  const updates = [];\n  const prevLength = usePrev(length) || 0;\n  useMemo(() => {\n    each(ctrls.current.slice(length, prevLength), ctrl => {\n      detachRefs(ctrl, ref);\n      ctrl.stop(true);\n    });\n    ctrls.current.length = length;\n    declareUpdates(prevLength, length);\n  }, [length]);\n  useMemo(() => {\n    declareUpdates(0, Math.min(prevLength, length));\n  }, deps);\n\n  function declareUpdates(startIndex, endIndex) {\n    for (let i = startIndex; i < endIndex; i++) {\n      const ctrl = ctrls.current[i] || (ctrls.current[i] = new Controller(null, state.flush));\n      const update = propsFn ? propsFn(i, ctrl) : props[i];\n\n      if (update) {\n        updates[i] = declareUpdate(update);\n      }\n    }\n  }\n\n  const springs = ctrls.current.map((ctrl, i) => getSprings(ctrl, updates[i]));\n  const context = useContext(SpringContext);\n  const prevContext = usePrev(context);\n  const hasContext = context !== prevContext && hasProps(context);\n  useIsomorphicLayoutEffect(() => {\n    layoutId.current++;\n    state.ctrls = ctrls.current;\n    const {\n      queue\n    } = state;\n\n    if (queue.length) {\n      state.queue = [];\n      each(queue, cb => cb());\n    }\n\n    each(ctrls.current, (ctrl, i) => {\n      ref == null ? void 0 : ref.add(ctrl);\n\n      if (hasContext) {\n        ctrl.start({\n          default: context\n        });\n      }\n\n      const update = updates[i];\n\n      if (update) {\n        replaceRef(ctrl, update.ref);\n\n        if (ctrl.ref) {\n          ctrl.queue.push(update);\n        } else {\n          ctrl.start(update);\n        }\n      }\n    });\n  });\n  useOnce(() => () => {\n    each(state.ctrls, ctrl => ctrl.stop(true));\n  });\n  const values = springs.map(x => _extends({}, x));\n  return ref ? [values, ref] : values;\n}\n\nfunction useSpring(props, deps) {\n  const isFn = is.fun(props);\n  const [[values], ref] = useSprings(1, isFn ? props : [props], isFn ? deps || [] : deps);\n  return isFn || arguments.length == 2 ? [values, ref] : values;\n}\n\nconst initSpringRef = () => SpringRef();\n\nconst useSpringRef = () => useState(initSpringRef)[0];\n\nfunction useTrail(length, propsArg, deps) {\n  var _passedRef;\n\n  const propsFn = is.fun(propsArg) && propsArg;\n  if (propsFn && !deps) deps = [];\n  let reverse = true;\n  let passedRef = undefined;\n  const result = useSprings(length, (i, ctrl) => {\n    const props = propsFn ? propsFn(i, ctrl) : propsArg;\n    passedRef = props.ref;\n    reverse = reverse && props.reverse;\n    return props;\n  }, deps || [{}]);\n  const ref = (_passedRef = passedRef) != null ? _passedRef : result[1];\n  useIsomorphicLayoutEffect(() => {\n    each(ref.current, (ctrl, i) => {\n      const parent = ref.current[i + (reverse ? 1 : -1)];\n\n      if (parent) {\n        ctrl.start({\n          to: parent.springs\n        });\n      } else {\n        ctrl.start();\n      }\n    });\n  }, deps);\n\n  if (propsFn || arguments.length == 3) {\n    ref['_getProps'] = (propsArg, ctrl, i) => {\n      const props = is.fun(propsArg) ? propsArg(i, ctrl) : propsArg;\n\n      if (props) {\n        const parent = ref.current[i + (props.reverse ? 1 : -1)];\n        if (parent) props.to = parent.springs;\n        return props;\n      }\n    };\n\n    return result;\n  }\n\n  ref['start'] = propsArg => {\n    const results = [];\n    each(ref.current, (ctrl, i) => {\n      const props = is.fun(propsArg) ? propsArg(i, ctrl) : propsArg;\n      const parent = ref.current[i + (reverse ? 1 : -1)];\n\n      if (parent) {\n        results.push(ctrl.start(_extends({}, props, {\n          to: parent.springs\n        })));\n      } else {\n        results.push(ctrl.start(_extends({}, props)));\n      }\n    });\n    return results;\n  };\n\n  return result[0];\n}\n\nlet TransitionPhase;\n\n(function (TransitionPhase) {\n  TransitionPhase[\"MOUNT\"] = \"mount\";\n  TransitionPhase[\"ENTER\"] = \"enter\";\n  TransitionPhase[\"UPDATE\"] = \"update\";\n  TransitionPhase[\"LEAVE\"] = \"leave\";\n})(TransitionPhase || (TransitionPhase = {}));\n\nfunction useTransition(data, props, deps) {\n  const propsFn = is.fun(props) && props;\n  const {\n    reset,\n    sort,\n    trail = 0,\n    expires = true,\n    exitBeforeEnter = false,\n    onDestroyed,\n    ref: propsRef,\n    config: propsConfig\n  } = propsFn ? propsFn() : props;\n  const ref = useMemo(() => propsFn || arguments.length == 3 ? SpringRef() : void 0, []);\n  const items = toArray(data);\n  const transitions = [];\n  const usedTransitions = useRef(null);\n  const prevTransitions = reset ? null : usedTransitions.current;\n  useIsomorphicLayoutEffect(() => {\n    usedTransitions.current = transitions;\n  });\n  useOnce(() => {\n    each(transitions, t => {\n      ref == null ? void 0 : ref.add(t.ctrl);\n      t.ctrl.ref = ref;\n    });\n    return () => {\n      each(usedTransitions.current, t => {\n        if (t.expired) {\n          clearTimeout(t.expirationId);\n        }\n\n        detachRefs(t.ctrl, ref);\n        t.ctrl.stop(true);\n      });\n    };\n  });\n  const keys = getKeys(items, propsFn ? propsFn() : props, prevTransitions);\n  const expired = reset && usedTransitions.current || [];\n  useIsomorphicLayoutEffect(() => each(expired, ({\n    ctrl,\n    item,\n    key\n  }) => {\n    detachRefs(ctrl, ref);\n    callProp(onDestroyed, item, key);\n  }));\n  const reused = [];\n  if (prevTransitions) each(prevTransitions, (t, i) => {\n    if (t.expired) {\n      clearTimeout(t.expirationId);\n      expired.push(t);\n    } else {\n      i = reused[i] = keys.indexOf(t.key);\n      if (~i) transitions[i] = t;\n    }\n  });\n  each(items, (item, i) => {\n    if (!transitions[i]) {\n      transitions[i] = {\n        key: keys[i],\n        item,\n        phase: TransitionPhase.MOUNT,\n        ctrl: new Controller()\n      };\n      transitions[i].ctrl.item = item;\n    }\n  });\n\n  if (reused.length) {\n    let i = -1;\n    const {\n      leave\n    } = propsFn ? propsFn() : props;\n    each(reused, (keyIndex, prevIndex) => {\n      const t = prevTransitions[prevIndex];\n\n      if (~keyIndex) {\n        i = transitions.indexOf(t);\n        transitions[i] = _extends({}, t, {\n          item: items[keyIndex]\n        });\n      } else if (leave) {\n        transitions.splice(++i, 0, t);\n      }\n    });\n  }\n\n  if (is.fun(sort)) {\n    transitions.sort((a, b) => sort(a.item, b.item));\n  }\n\n  let delay = -trail;\n  const forceUpdate = useForceUpdate();\n  const defaultProps = getDefaultProps(props);\n  const changes = new Map();\n  const exitingTransitions = useRef(new Map());\n  const forceChange = useRef(false);\n  each(transitions, (t, i) => {\n    const key = t.key;\n    const prevPhase = t.phase;\n    const p = propsFn ? propsFn() : props;\n    let to;\n    let phase;\n    let propsDelay = callProp(p.delay || 0, key);\n\n    if (prevPhase == TransitionPhase.MOUNT) {\n      to = p.enter;\n      phase = TransitionPhase.ENTER;\n    } else {\n      const isLeave = keys.indexOf(key) < 0;\n\n      if (prevPhase != TransitionPhase.LEAVE) {\n        if (isLeave) {\n          to = p.leave;\n          phase = TransitionPhase.LEAVE;\n        } else if (to = p.update) {\n          phase = TransitionPhase.UPDATE;\n        } else return;\n      } else if (!isLeave) {\n        to = p.enter;\n        phase = TransitionPhase.ENTER;\n      } else return;\n    }\n\n    to = callProp(to, t.item, i);\n    to = is.obj(to) ? inferTo(to) : {\n      to\n    };\n\n    if (!to.config) {\n      const config = propsConfig || defaultProps.config;\n      to.config = callProp(config, t.item, i, phase);\n    }\n\n    delay += trail;\n\n    const payload = _extends({}, defaultProps, {\n      delay: propsDelay + delay,\n      ref: propsRef,\n      immediate: p.immediate,\n      reset: false\n    }, to);\n\n    if (phase == TransitionPhase.ENTER && is.und(payload.from)) {\n      const _p = propsFn ? propsFn() : props;\n\n      const from = is.und(_p.initial) || prevTransitions ? _p.from : _p.initial;\n      payload.from = callProp(from, t.item, i);\n    }\n\n    const {\n      onResolve\n    } = payload;\n\n    payload.onResolve = result => {\n      callProp(onResolve, result);\n      const transitions = usedTransitions.current;\n      const t = transitions.find(t => t.key === key);\n      if (!t) return;\n\n      if (result.cancelled && t.phase != TransitionPhase.UPDATE) {\n        return;\n      }\n\n      if (t.ctrl.idle) {\n        const idle = transitions.every(t => t.ctrl.idle);\n\n        if (t.phase == TransitionPhase.LEAVE) {\n          const expiry = callProp(expires, t.item);\n\n          if (expiry !== false) {\n            const expiryMs = expiry === true ? 0 : expiry;\n            t.expired = true;\n\n            if (!idle && expiryMs > 0) {\n              if (expiryMs <= 0x7fffffff) t.expirationId = setTimeout(forceUpdate, expiryMs);\n              return;\n            }\n          }\n        }\n\n        if (idle && transitions.some(t => t.expired)) {\n          exitingTransitions.current.delete(t);\n\n          if (exitBeforeEnter) {\n            forceChange.current = true;\n          }\n\n          forceUpdate();\n        }\n      }\n    };\n\n    const springs = getSprings(t.ctrl, payload);\n\n    if (phase === TransitionPhase.LEAVE && exitBeforeEnter) {\n      exitingTransitions.current.set(t, {\n        phase,\n        springs,\n        payload\n      });\n    } else {\n      changes.set(t, {\n        phase,\n        springs,\n        payload\n      });\n    }\n  });\n  const context = useContext(SpringContext);\n  const prevContext = usePrev(context);\n  const hasContext = context !== prevContext && hasProps(context);\n  useIsomorphicLayoutEffect(() => {\n    if (hasContext) {\n      each(transitions, t => {\n        t.ctrl.start({\n          default: context\n        });\n      });\n    }\n  }, [context]);\n  each(changes, (_, t) => {\n    if (exitingTransitions.current.size) {\n      const ind = transitions.findIndex(state => state.key === t.key);\n      transitions.splice(ind, 1);\n    }\n  });\n  useIsomorphicLayoutEffect(() => {\n    each(exitingTransitions.current.size ? exitingTransitions.current : changes, ({\n      phase,\n      payload\n    }, t) => {\n      const {\n        ctrl\n      } = t;\n      t.phase = phase;\n      ref == null ? void 0 : ref.add(ctrl);\n\n      if (hasContext && phase == TransitionPhase.ENTER) {\n        ctrl.start({\n          default: context\n        });\n      }\n\n      if (payload) {\n        replaceRef(ctrl, payload.ref);\n\n        if ((ctrl.ref || ref) && !forceChange.current) {\n          ctrl.update(payload);\n        } else {\n          ctrl.start(payload);\n\n          if (forceChange.current) {\n            forceChange.current = false;\n          }\n        }\n      }\n    });\n  }, reset ? void 0 : deps);\n\n  const renderTransitions = render => React.createElement(React.Fragment, null, transitions.map((t, i) => {\n    const {\n      springs\n    } = changes.get(t) || t.ctrl;\n    const elem = render(_extends({}, springs), t.item, t, i);\n    return elem && elem.type ? React.createElement(elem.type, _extends({}, elem.props, {\n      key: is.str(t.key) || is.num(t.key) ? t.key : t.ctrl.id,\n      ref: elem.ref\n    })) : elem;\n  }));\n\n  return ref ? [renderTransitions, ref] : renderTransitions;\n}\nlet nextKey = 1;\n\nfunction getKeys(items, {\n  key,\n  keys = key\n}, prevTransitions) {\n  if (keys === null) {\n    const reused = new Set();\n    return items.map(item => {\n      const t = prevTransitions && prevTransitions.find(t => t.item === item && t.phase !== TransitionPhase.LEAVE && !reused.has(t));\n\n      if (t) {\n        reused.add(t);\n        return t.key;\n      }\n\n      return nextKey++;\n    });\n  }\n\n  return is.und(keys) ? items : is.fun(keys) ? items.map(keys) : toArray(keys);\n}\n\nconst _excluded$2 = [\"children\"];\nfunction Spring(_ref) {\n  let {\n    children\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, _excluded$2);\n\n  return children(useSpring(props));\n}\n\nconst _excluded$1 = [\"items\", \"children\"];\nfunction Trail(_ref) {\n  let {\n    items,\n    children\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, _excluded$1);\n\n  const trails = useTrail(items.length, props);\n  return items.map((item, index) => {\n    const result = children(item, index);\n    return is.fun(result) ? result(trails[index]) : result;\n  });\n}\n\nconst _excluded = [\"items\", \"children\"];\nfunction Transition(_ref) {\n  let {\n    items,\n    children\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  return useTransition(items, props)(children);\n}\n\nclass Interpolation extends FrameValue {\n  constructor(source, args) {\n    super();\n    this.key = void 0;\n    this.idle = true;\n    this.calc = void 0;\n    this._active = new Set();\n    this.source = source;\n    this.calc = createInterpolator(...args);\n\n    const value = this._get();\n\n    const nodeType = getAnimatedType(value);\n    setAnimated(this, nodeType.create(value));\n  }\n\n  advance(_dt) {\n    const value = this._get();\n\n    const oldValue = this.get();\n\n    if (!isEqual(value, oldValue)) {\n      getAnimated(this).setValue(value);\n\n      this._onChange(value, this.idle);\n    }\n\n    if (!this.idle && checkIdle(this._active)) {\n      becomeIdle(this);\n    }\n  }\n\n  _get() {\n    const inputs = is.arr(this.source) ? this.source.map(getFluidValue) : toArray(getFluidValue(this.source));\n    return this.calc(...inputs);\n  }\n\n  _start() {\n    if (this.idle && !checkIdle(this._active)) {\n      this.idle = false;\n      each(getPayload(this), node => {\n        node.done = false;\n      });\n\n      if (Globals.skipAnimation) {\n        raf.batchedUpdates(() => this.advance());\n        becomeIdle(this);\n      } else {\n        frameLoop.start(this);\n      }\n    }\n  }\n\n  _attach() {\n    let priority = 1;\n    each(toArray(this.source), source => {\n      if (hasFluidValue(source)) {\n        addFluidObserver(source, this);\n      }\n\n      if (isFrameValue(source)) {\n        if (!source.idle) {\n          this._active.add(source);\n        }\n\n        priority = Math.max(priority, source.priority + 1);\n      }\n    });\n    this.priority = priority;\n\n    this._start();\n  }\n\n  _detach() {\n    each(toArray(this.source), source => {\n      if (hasFluidValue(source)) {\n        removeFluidObserver(source, this);\n      }\n    });\n\n    this._active.clear();\n\n    becomeIdle(this);\n  }\n\n  eventObserved(event) {\n    if (event.type == 'change') {\n      if (event.idle) {\n        this.advance();\n      } else {\n        this._active.add(event.parent);\n\n        this._start();\n      }\n    } else if (event.type == 'idle') {\n      this._active.delete(event.parent);\n    } else if (event.type == 'priority') {\n      this.priority = toArray(this.source).reduce((highest, parent) => Math.max(highest, (isFrameValue(parent) ? parent.priority : 0) + 1), 0);\n    }\n  }\n\n}\n\nfunction isIdle(source) {\n  return source.idle !== false;\n}\n\nfunction checkIdle(active) {\n  return !active.size || Array.from(active).every(isIdle);\n}\n\nfunction becomeIdle(self) {\n  if (!self.idle) {\n    self.idle = true;\n    each(getPayload(self), node => {\n      node.done = true;\n    });\n    callFluidObservers(self, {\n      type: 'idle',\n      parent: self\n    });\n  }\n}\n\nconst to = (source, ...args) => new Interpolation(source, args);\nconst interpolate = (source, ...args) => (deprecateInterpolate(), new Interpolation(source, args));\n\nGlobals.assign({\n  createStringInterpolator,\n  to: (source, args) => new Interpolation(source, args)\n});\nconst update = frameLoop.advance;\n\nexport { BailSignal, Controller, FrameValue, Interpolation, Spring, SpringContext, SpringRef, SpringValue, Trail, Transition, config, easings, inferTo, interpolate, to, update, useChain, useSpring, useSpringRef, useSprings, useTrail, useTransition };\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"ReactDOM\"];","import { Globals } from '@react-spring/core';\nexport * from '@react-spring/core';\nimport { unstable_batchedUpdates } from 'react-dom';\nimport { eachProp, is, toArray, FluidValue, each, getFluidValue, hasFluidValue, addFluidObserver, removeFluidObserver, callFluidObservers, createStringInterpolator, colors } from '@react-spring/shared';\nimport { AnimatedObject, createHost } from '@react-spring/animated';\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nconst _excluded$2 = [\"style\", \"children\", \"scrollTop\", \"scrollLeft\"];\nconst isCustomPropRE = /^--/;\n\nfunction dangerousStyleValue(name, value) {\n  if (value == null || typeof value === 'boolean' || value === '') return '';\n  if (typeof value === 'number' && value !== 0 && !isCustomPropRE.test(name) && !(isUnitlessNumber.hasOwnProperty(name) && isUnitlessNumber[name])) return value + 'px';\n  return ('' + value).trim();\n}\n\nconst attributeCache = {};\nfunction applyAnimatedValues(instance, props) {\n  if (!instance.nodeType || !instance.setAttribute) {\n    return false;\n  }\n\n  const isFilterElement = instance.nodeName === 'filter' || instance.parentNode && instance.parentNode.nodeName === 'filter';\n\n  const _ref = props,\n        {\n    style,\n    children,\n    scrollTop,\n    scrollLeft\n  } = _ref,\n        attributes = _objectWithoutPropertiesLoose(_ref, _excluded$2);\n\n  const values = Object.values(attributes);\n  const names = Object.keys(attributes).map(name => isFilterElement || instance.hasAttribute(name) ? name : attributeCache[name] || (attributeCache[name] = name.replace(/([A-Z])/g, n => '-' + n.toLowerCase())));\n\n  if (children !== void 0) {\n    instance.textContent = children;\n  }\n\n  for (let name in style) {\n    if (style.hasOwnProperty(name)) {\n      const value = dangerousStyleValue(name, style[name]);\n\n      if (isCustomPropRE.test(name)) {\n        instance.style.setProperty(name, value);\n      } else {\n        instance.style[name] = value;\n      }\n    }\n  }\n\n  names.forEach((name, i) => {\n    instance.setAttribute(name, values[i]);\n  });\n\n  if (scrollTop !== void 0) {\n    instance.scrollTop = scrollTop;\n  }\n\n  if (scrollLeft !== void 0) {\n    instance.scrollLeft = scrollLeft;\n  }\n}\nlet isUnitlessNumber = {\n  animationIterationCount: true,\n  borderImageOutset: true,\n  borderImageSlice: true,\n  borderImageWidth: true,\n  boxFlex: true,\n  boxFlexGroup: true,\n  boxOrdinalGroup: true,\n  columnCount: true,\n  columns: true,\n  flex: true,\n  flexGrow: true,\n  flexPositive: true,\n  flexShrink: true,\n  flexNegative: true,\n  flexOrder: true,\n  gridRow: true,\n  gridRowEnd: true,\n  gridRowSpan: true,\n  gridRowStart: true,\n  gridColumn: true,\n  gridColumnEnd: true,\n  gridColumnSpan: true,\n  gridColumnStart: true,\n  fontWeight: true,\n  lineClamp: true,\n  lineHeight: true,\n  opacity: true,\n  order: true,\n  orphans: true,\n  tabSize: true,\n  widows: true,\n  zIndex: true,\n  zoom: true,\n  fillOpacity: true,\n  floodOpacity: true,\n  stopOpacity: true,\n  strokeDasharray: true,\n  strokeDashoffset: true,\n  strokeMiterlimit: true,\n  strokeOpacity: true,\n  strokeWidth: true\n};\n\nconst prefixKey = (prefix, key) => prefix + key.charAt(0).toUpperCase() + key.substring(1);\n\nconst prefixes = ['Webkit', 'Ms', 'Moz', 'O'];\nisUnitlessNumber = Object.keys(isUnitlessNumber).reduce((acc, prop) => {\n  prefixes.forEach(prefix => acc[prefixKey(prefix, prop)] = acc[prop]);\n  return acc;\n}, isUnitlessNumber);\n\nconst _excluded$1 = [\"x\", \"y\", \"z\"];\nconst domTransforms = /^(matrix|translate|scale|rotate|skew)/;\nconst pxTransforms = /^(translate)/;\nconst degTransforms = /^(rotate|skew)/;\n\nconst addUnit = (value, unit) => is.num(value) && value !== 0 ? value + unit : value;\n\nconst isValueIdentity = (value, id) => is.arr(value) ? value.every(v => isValueIdentity(v, id)) : is.num(value) ? value === id : parseFloat(value) === id;\n\nclass AnimatedStyle extends AnimatedObject {\n  constructor(_ref) {\n    let {\n      x,\n      y,\n      z\n    } = _ref,\n        style = _objectWithoutPropertiesLoose(_ref, _excluded$1);\n\n    const inputs = [];\n    const transforms = [];\n\n    if (x || y || z) {\n      inputs.push([x || 0, y || 0, z || 0]);\n      transforms.push(xyz => [`translate3d(${xyz.map(v => addUnit(v, 'px')).join(',')})`, isValueIdentity(xyz, 0)]);\n    }\n\n    eachProp(style, (value, key) => {\n      if (key === 'transform') {\n        inputs.push([value || '']);\n        transforms.push(transform => [transform, transform === '']);\n      } else if (domTransforms.test(key)) {\n        delete style[key];\n        if (is.und(value)) return;\n        const unit = pxTransforms.test(key) ? 'px' : degTransforms.test(key) ? 'deg' : '';\n        inputs.push(toArray(value));\n        transforms.push(key === 'rotate3d' ? ([x, y, z, deg]) => [`rotate3d(${x},${y},${z},${addUnit(deg, unit)})`, isValueIdentity(deg, 0)] : input => [`${key}(${input.map(v => addUnit(v, unit)).join(',')})`, isValueIdentity(input, key.startsWith('scale') ? 1 : 0)]);\n      }\n    });\n\n    if (inputs.length) {\n      style.transform = new FluidTransform(inputs, transforms);\n    }\n\n    super(style);\n  }\n\n}\n\nclass FluidTransform extends FluidValue {\n  constructor(inputs, transforms) {\n    super();\n    this._value = null;\n    this.inputs = inputs;\n    this.transforms = transforms;\n  }\n\n  get() {\n    return this._value || (this._value = this._get());\n  }\n\n  _get() {\n    let transform = '';\n    let identity = true;\n    each(this.inputs, (input, i) => {\n      const arg1 = getFluidValue(input[0]);\n      const [t, id] = this.transforms[i](is.arr(arg1) ? arg1 : input.map(getFluidValue));\n      transform += ' ' + t;\n      identity = identity && id;\n    });\n    return identity ? 'none' : transform;\n  }\n\n  observerAdded(count) {\n    if (count == 1) each(this.inputs, input => each(input, value => hasFluidValue(value) && addFluidObserver(value, this)));\n  }\n\n  observerRemoved(count) {\n    if (count == 0) each(this.inputs, input => each(input, value => hasFluidValue(value) && removeFluidObserver(value, this)));\n  }\n\n  eventObserved(event) {\n    if (event.type == 'change') {\n      this._value = null;\n    }\n\n    callFluidObservers(this, event);\n  }\n\n}\n\nconst primitives = ['a', 'abbr', 'address', 'area', 'article', 'aside', 'audio', 'b', 'base', 'bdi', 'bdo', 'big', 'blockquote', 'body', 'br', 'button', 'canvas', 'caption', 'cite', 'code', 'col', 'colgroup', 'data', 'datalist', 'dd', 'del', 'details', 'dfn', 'dialog', 'div', 'dl', 'dt', 'em', 'embed', 'fieldset', 'figcaption', 'figure', 'footer', 'form', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'head', 'header', 'hgroup', 'hr', 'html', 'i', 'iframe', 'img', 'input', 'ins', 'kbd', 'keygen', 'label', 'legend', 'li', 'link', 'main', 'map', 'mark', 'menu', 'menuitem', 'meta', 'meter', 'nav', 'noscript', 'object', 'ol', 'optgroup', 'option', 'output', 'p', 'param', 'picture', 'pre', 'progress', 'q', 'rp', 'rt', 'ruby', 's', 'samp', 'script', 'section', 'select', 'small', 'source', 'span', 'strong', 'style', 'sub', 'summary', 'sup', 'table', 'tbody', 'td', 'textarea', 'tfoot', 'th', 'thead', 'time', 'title', 'tr', 'track', 'u', 'ul', 'var', 'video', 'wbr', 'circle', 'clipPath', 'defs', 'ellipse', 'foreignObject', 'g', 'image', 'line', 'linearGradient', 'mask', 'path', 'pattern', 'polygon', 'polyline', 'radialGradient', 'rect', 'stop', 'svg', 'text', 'tspan'];\n\nconst _excluded = [\"scrollTop\", \"scrollLeft\"];\nGlobals.assign({\n  batchedUpdates: unstable_batchedUpdates,\n  createStringInterpolator,\n  colors\n});\nconst host = createHost(primitives, {\n  applyAnimatedValues,\n  createAnimatedStyle: style => new AnimatedStyle(style),\n  getComponentProps: _ref => {\n    let props = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n    return props;\n  }\n});\nconst animated = host.animated;\n\nexport { animated as a, animated };\n","/**\n * External dependencies\n */\nimport { Controller } from '@react-spring/web';\n\n/**\n * WordPress dependencies\n */\nimport { useLayoutEffect, useMemo, useRef } from '@wordpress/element';\nimport { getScrollContainer } from '@wordpress/dom';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\n/**\n * If the block count exceeds the threshold, we disable the reordering animation\n * to avoid laginess.\n */\nconst BLOCK_ANIMATION_THRESHOLD = 200;\n\nfunction getAbsolutePosition( element ) {\n\treturn {\n\t\ttop: element.offsetTop,\n\t\tleft: element.offsetLeft,\n\t};\n}\n\n/**\n * Hook used to compute the styles required to move a div into a new position.\n *\n * The way this animation works is the following:\n *  - It first renders the element as if there was no animation.\n *  - It takes a snapshot of the position of the block to use it\n *    as a destination point for the animation.\n *  - It restores the element to the previous position using a CSS transform\n *  - It uses the \"resetAnimation\" flag to reset the animation\n *    from the beginning in order to animate to the new destination point.\n *\n * @param {Object} $1                          Options\n * @param {*}      $1.triggerAnimationOnChange Variable used to trigger the animation if it changes.\n * @param {string} $1.clientId\n */\nfunction useMovingAnimation( { triggerAnimationOnChange, clientId } ) {\n\tconst ref = useRef();\n\tconst {\n\t\tisTyping,\n\t\tgetGlobalBlockCount,\n\t\tisBlockSelected,\n\t\tisFirstMultiSelectedBlock,\n\t\tisBlockMultiSelected,\n\t\tisAncestorMultiSelected,\n\t} = useSelect( blockEditorStore );\n\n\t// Whenever the trigger changes, we need to take a snapshot of the current\n\t// position of the block to use it as a destination point for the animation.\n\tconst { previous, prevRect } = useMemo(\n\t\t() => ( {\n\t\t\tprevious: ref.current && getAbsolutePosition( ref.current ),\n\t\t\tprevRect: ref.current && ref.current.getBoundingClientRect(),\n\t\t} ),\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t\t[ triggerAnimationOnChange ]\n\t);\n\n\tuseLayoutEffect( () => {\n\t\tif ( ! previous || ! ref.current ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst scrollContainer = getScrollContainer( ref.current );\n\t\tconst isSelected = isBlockSelected( clientId );\n\t\tconst adjustScrolling =\n\t\t\tisSelected || isFirstMultiSelectedBlock( clientId );\n\n\t\tfunction preserveScrollPosition() {\n\t\t\tif ( adjustScrolling && prevRect ) {\n\t\t\t\tconst blockRect = ref.current.getBoundingClientRect();\n\t\t\t\tconst diff = blockRect.top - prevRect.top;\n\n\t\t\t\tif ( diff ) {\n\t\t\t\t\tscrollContainer.scrollTop += diff;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// We disable the animation if the user has a preference for reduced\n\t\t// motion, if the user is typing (insertion by Enter), or if the block\n\t\t// count exceeds the threshold (insertion caused all the blocks that\n\t\t// follow to animate).\n\t\t// To do: consider enableing the _moving_ animation even for large\n\t\t// posts, while only disabling the _insertion_ animation?\n\t\tconst disableAnimation =\n\t\t\twindow.matchMedia( '(prefers-reduced-motion: reduce)' ).matches ||\n\t\t\tisTyping() ||\n\t\t\tgetGlobalBlockCount() > BLOCK_ANIMATION_THRESHOLD;\n\n\t\tif ( disableAnimation ) {\n\t\t\t// If the animation is disabled and the scroll needs to be adjusted,\n\t\t\t// just move directly to the final scroll position.\n\t\t\tpreserveScrollPosition();\n\t\t\treturn;\n\t\t}\n\n\t\tconst isPartOfSelection =\n\t\t\tisSelected ||\n\t\t\tisBlockMultiSelected( clientId ) ||\n\t\t\tisAncestorMultiSelected( clientId );\n\t\t// Make sure the other blocks move under the selected block(s).\n\t\tconst zIndex = isPartOfSelection ? '1' : '';\n\n\t\tconst controller = new Controller( {\n\t\t\tx: 0,\n\t\t\ty: 0,\n\t\t\tconfig: { mass: 5, tension: 2000, friction: 200 },\n\t\t\tonChange( { value } ) {\n\t\t\t\tif ( ! ref.current ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tlet { x, y } = value;\n\t\t\t\tx = Math.round( x );\n\t\t\t\ty = Math.round( y );\n\t\t\t\tconst finishedMoving = x === 0 && y === 0;\n\t\t\t\tref.current.style.transformOrigin = 'center center';\n\t\t\t\tref.current.style.transform = finishedMoving\n\t\t\t\t\t? null // Set to `null` to explicitly remove the transform.\n\t\t\t\t\t: `translate3d(${ x }px,${ y }px,0)`;\n\t\t\t\tref.current.style.zIndex = zIndex;\n\t\t\t\tpreserveScrollPosition();\n\t\t\t},\n\t\t} );\n\n\t\tref.current.style.transform = undefined;\n\t\tconst destination = getAbsolutePosition( ref.current );\n\n\t\tconst x = Math.round( previous.left - destination.left );\n\t\tconst y = Math.round( previous.top - destination.top );\n\n\t\tcontroller.start( { x: 0, y: 0, from: { x, y } } );\n\n\t\treturn () => {\n\t\t\tcontroller.stop();\n\t\t\tcontroller.set( { x: 0, y: 0 } );\n\t\t};\n\t}, [\n\t\tprevious,\n\t\tprevRect,\n\t\tclientId,\n\t\tisTyping,\n\t\tgetGlobalBlockCount,\n\t\tisBlockSelected,\n\t\tisFirstMultiSelectedBlock,\n\t\tisBlockMultiSelected,\n\t\tisAncestorMultiSelected,\n\t] );\n\n\treturn ref;\n}\n\nexport default useMovingAnimation;\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { createContext } from '@wordpress/element';\r\n\r\nexport const PrivateBlockContext = createContext( {} );\r\n","const BLOCK_SELECTOR = '.block-editor-block-list__block';\r\nconst APPENDER_SELECTOR = '.block-list-appender';\r\nconst BLOCK_APPENDER_CLASS = '.block-editor-button-block-appender';\r\n\r\n/**\r\n * Returns true if two elements are contained within the same block.\r\n *\r\n * @param {Element} a First element.\r\n * @param {Element} b Second element.\r\n *\r\n * @return {boolean} Whether elements are in the same block.\r\n */\r\nexport function isInSameBlock( a, b ) {\r\n\treturn a.closest( BLOCK_SELECTOR ) === b.closest( BLOCK_SELECTOR );\r\n}\r\n\r\n/**\r\n * Returns true if an element is considered part of the block and not its inner\r\n * blocks or appender.\r\n *\r\n * @param {Element} blockElement Block container element.\r\n * @param {Element} element      Element.\r\n *\r\n * @return {boolean} Whether an element is considered part of the block and not\r\n *                   its inner blocks or appender.\r\n */\r\nexport function isInsideRootBlock( blockElement, element ) {\r\n\tconst parentBlock = element.closest(\r\n\t\t[ BLOCK_SELECTOR, APPENDER_SELECTOR, BLOCK_APPENDER_CLASS ].join( ',' )\r\n\t);\r\n\treturn parentBlock === blockElement;\r\n}\r\n\r\n/**\r\n * Finds the block client ID given any DOM node inside the block.\r\n *\r\n * @param {Node?} node DOM node.\r\n *\r\n * @return {string|undefined} Client ID or undefined if the node is not part of\r\n *                            a block.\r\n */\r\nexport function getBlockClientId( node ) {\r\n\twhile ( node && node.nodeType !== node.ELEMENT_NODE ) {\r\n\t\tnode = node.parentNode;\r\n\t}\r\n\r\n\tif ( ! node ) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tconst elementNode = /** @type {Element} */ ( node );\r\n\tconst blockNode = elementNode.closest( BLOCK_SELECTOR );\r\n\r\n\tif ( ! blockNode ) {\r\n\t\treturn;\r\n\t}\r\n\r\n\treturn blockNode.id.slice( 'block-'.length );\r\n}\r\n","/**\n * WordPress dependencies\n */\nimport { useEffect, useRef } from '@wordpress/element';\nimport {\n\tfocus,\n\tisFormElement,\n\tisTextField,\n\tplaceCaretAtHorizontalEdge,\n} from '@wordpress/dom';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { isInsideRootBlock } from '../../../utils/dom';\nimport { store as blockEditorStore } from '../../../store';\n\n/** @typedef {import('@wordpress/element').RefObject} RefObject */\n\n/**\n * Transitions focus to the block or inner tabbable when the block becomes\n * selected and an initial position is set.\n *\n * @param {string} clientId Block client ID.\n *\n * @return {RefObject} React ref with the block element.\n */\nexport function useFocusFirstElement( { clientId, initialPosition } ) {\n\tconst ref = useRef();\n\tconst { isBlockSelected, isMultiSelecting } = useSelect( blockEditorStore );\n\n\tuseEffect( () => {\n\t\t// Check if the block is still selected at the time this effect runs.\n\t\tif ( ! isBlockSelected( clientId ) || isMultiSelecting() ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( initialPosition === undefined || initialPosition === null ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( ! ref.current ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst { ownerDocument } = ref.current;\n\n\t\t// Do not focus the block if it already contains the active element.\n\t\tif ( isInsideRootBlock( ref.current, ownerDocument.activeElement ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Find all tabbables within node.\n\t\tconst textInputs = focus.tabbable\n\t\t\t.find( ref.current )\n\t\t\t.filter( ( node ) => isTextField( node ) );\n\n\t\t// If reversed (e.g. merge via backspace), use the last in the set of\n\t\t// tabbables.\n\t\tconst isReverse = -1 === initialPosition;\n\t\tconst target =\n\t\t\ttextInputs[ isReverse ? textInputs.length - 1 : 0 ] || ref.current;\n\n\t\tif ( ! isInsideRootBlock( ref.current, target ) ) {\n\t\t\tref.current.focus();\n\t\t\treturn;\n\t\t}\n\n\t\t// Check to see if element is focussable before a generic caret insert.\n\t\tif ( ! ref.current.getAttribute( 'contenteditable' ) ) {\n\t\t\tconst focusElement = focus.tabbable.findNext( ref.current );\n\t\t\t// Make sure focusElement is valid, contained in the same block, and a form field.\n\t\t\tif (\n\t\t\t\tfocusElement &&\n\t\t\t\tisInsideRootBlock( ref.current, focusElement ) &&\n\t\t\t\tisFormElement( focusElement )\n\t\t\t) {\n\t\t\t\tfocusElement.focus();\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tplaceCaretAtHorizontalEdge( target, isReverse );\n\t}, [ initialPosition, clientId ] );\n\n\treturn ref;\n}\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useRefEffect } from '@wordpress/compose';\r\n\r\nfunction listener( event ) {\r\n\tif ( event.defaultPrevented ) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tconst action = event.type === 'mouseover' ? 'add' : 'remove';\r\n\r\n\tevent.preventDefault();\r\n\tevent.currentTarget.classList[ action ]( 'is-hovered' );\r\n}\r\n\r\n/*\r\n * Adds `is-hovered` class when the block is hovered and in navigation or\r\n * outline mode.\r\n */\r\nexport function useIsHovered( { isEnabled } ) {\r\n\treturn useRefEffect(\r\n\t\t( node ) => {\r\n\t\t\tif ( isEnabled ) {\r\n\t\t\t\tnode.addEventListener( 'mouseout', listener );\r\n\t\t\t\tnode.addEventListener( 'mouseover', listener );\r\n\r\n\t\t\t\treturn () => {\r\n\t\t\t\t\tnode.removeEventListener( 'mouseout', listener );\r\n\t\t\t\t\tnode.removeEventListener( 'mouseover', listener );\r\n\r\n\t\t\t\t\t// Remove class in case it lingers.\r\n\t\t\t\t\tnode.classList.remove( 'is-hovered' );\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t},\r\n\t\t[ isEnabled ]\r\n\t);\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useSelect, useDispatch } from '@wordpress/data';\r\nimport { useRefEffect } from '@wordpress/compose';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { isInsideRootBlock } from '../../../utils/dom';\r\nimport { store as blockEditorStore } from '../../../store';\r\n\r\n/**\r\n * Selects the block if it receives focus.\r\n *\r\n * @param {string} clientId Block client ID.\r\n */\r\nexport function useFocusHandler( clientId ) {\r\n\tconst { isBlockSelected } = useSelect( blockEditorStore );\r\n\tconst { selectBlock, selectionChange } = useDispatch( blockEditorStore );\r\n\r\n\treturn useRefEffect(\r\n\t\t( node ) => {\r\n\t\t\t/**\r\n\t\t\t * Marks the block as selected when focused and not already\r\n\t\t\t * selected. This specifically handles the case where block does not\r\n\t\t\t * set focus on its own (via `setFocus`), typically if there is no\r\n\t\t\t * focusable input in the block.\r\n\t\t\t *\r\n\t\t\t * @param {FocusEvent} event Focus event.\r\n\t\t\t */\r\n\t\t\tfunction onFocus( event ) {\r\n\t\t\t\t// When the whole editor is editable, let writing flow handle\r\n\t\t\t\t// selection.\r\n\t\t\t\tif (\r\n\t\t\t\t\tnode.parentElement.closest( '[contenteditable=\"true\"]' )\r\n\t\t\t\t) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Check synchronously because a non-selected block might be\r\n\t\t\t\t// getting data through `useSelect` asynchronously.\r\n\t\t\t\tif ( isBlockSelected( clientId ) ) {\r\n\t\t\t\t\t// Potentially change selection away from rich text.\r\n\t\t\t\t\tif ( ! event.target.isContentEditable ) {\r\n\t\t\t\t\t\tselectionChange( clientId );\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// If an inner block is focussed, that block is resposible for\r\n\t\t\t\t// setting the selected block.\r\n\t\t\t\tif ( ! isInsideRootBlock( node, event.target ) ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tselectBlock( clientId );\r\n\t\t\t}\r\n\r\n\t\t\tnode.addEventListener( 'focusin', onFocus );\r\n\r\n\t\t\treturn () => {\r\n\t\t\t\tnode.removeEventListener( 'focusin', onFocus );\r\n\t\t\t};\r\n\t\t},\r\n\t\t[ isBlockSelected, selectBlock ]\r\n\t);\r\n}\r\n","/**\n * WordPress dependencies\n */\nimport { isTextField } from '@wordpress/dom';\nimport { ENTER, BACKSPACE, DELETE } from '@wordpress/keycodes';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { useRefEffect } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../../store';\n\n/**\n * Adds block behaviour:\n *   - Removes the block on BACKSPACE.\n *   - Inserts a default block on ENTER.\n *   - Disables dragging of block contents.\n *\n * @param {string} clientId Block client ID.\n */\nexport function useEventHandlers( { clientId, isSelected } ) {\n\tconst { getBlockRootClientId, getBlockIndex } =\n\t\tuseSelect( blockEditorStore );\n\tconst { insertAfterBlock, removeBlock } = useDispatch( blockEditorStore );\n\n\treturn useRefEffect(\n\t\t( node ) => {\n\t\t\tif ( ! isSelected ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Interprets keydown event intent to remove or insert after block if\n\t\t\t * key event occurs on wrapper node. This can occur when the block has\n\t\t\t * no text fields of its own, particularly after initial insertion, to\n\t\t\t * allow for easy deletion and continuous writing flow to add additional\n\t\t\t * content.\n\t\t\t *\n\t\t\t * @param {KeyboardEvent} event Keydown event.\n\t\t\t */\n\t\t\tfunction onKeyDown( event ) {\n\t\t\t\tconst { keyCode, target } = event;\n\n\t\t\t\tif (\n\t\t\t\t\tkeyCode !== ENTER &&\n\t\t\t\t\tkeyCode !== BACKSPACE &&\n\t\t\t\t\tkeyCode !== DELETE\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( target !== node || isTextField( target ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\tif ( keyCode === ENTER ) {\n\t\t\t\t\tinsertAfterBlock( clientId );\n\t\t\t\t} else {\n\t\t\t\t\tremoveBlock( clientId );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Prevents default dragging behavior within a block. To do: we must\n\t\t\t * handle this in the future and clean up the drag target.\n\t\t\t *\n\t\t\t * @param {DragEvent} event Drag event.\n\t\t\t */\n\t\t\tfunction onDragStart( event ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\n\t\t\tnode.addEventListener( 'keydown', onKeyDown );\n\t\t\tnode.addEventListener( 'dragstart', onDragStart );\n\n\t\t\treturn () => {\n\t\t\t\tnode.removeEventListener( 'keydown', onKeyDown );\n\t\t\t\tnode.removeEventListener( 'dragstart', onDragStart );\n\t\t\t};\n\t\t},\n\t\t[\n\t\t\tclientId,\n\t\t\tisSelected,\n\t\t\tgetBlockRootClientId,\n\t\t\tgetBlockIndex,\n\t\t\tinsertAfterBlock,\n\t\t\tremoveBlock,\n\t\t]\n\t);\n}\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useSelect, useDispatch } from '@wordpress/data';\r\nimport { useRefEffect } from '@wordpress/compose';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as blockEditorStore } from '../../../store';\r\n\r\n/**\r\n * Allows navigation mode to be exited by clicking in the selected block.\r\n *\r\n * @param {string} clientId Block client ID.\r\n */\r\nexport function useNavModeExit( clientId ) {\r\n\tconst { isNavigationMode, isBlockSelected } = useSelect( blockEditorStore );\r\n\tconst { setNavigationMode, selectBlock } = useDispatch( blockEditorStore );\r\n\treturn useRefEffect(\r\n\t\t( node ) => {\r\n\t\t\tfunction onMouseDown( event ) {\r\n\t\t\t\t// Don't select a block if it's already handled by a child\r\n\t\t\t\t// block.\r\n\t\t\t\tif ( isNavigationMode() && ! event.defaultPrevented ) {\r\n\t\t\t\t\t// Prevent focus from moving to the block.\r\n\t\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t\t// When clicking on a selected block, exit navigation mode.\r\n\t\t\t\t\tif ( isBlockSelected( clientId ) ) {\r\n\t\t\t\t\t\tsetNavigationMode( false );\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tselectBlock( clientId );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tnode.addEventListener( 'mousedown', onMouseDown );\r\n\r\n\t\t\treturn () => {\r\n\t\t\t\tnode.removeEventListener( 'mousedown', onMouseDown );\r\n\t\t\t};\r\n\t\t},\r\n\t\t[ clientId, isNavigationMode, isBlockSelected, setNavigationMode ]\r\n\t);\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useRefEffect } from '@wordpress/compose';\r\nimport { useContext } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { IntersectionObserver } from '../';\r\n\r\nexport function useIntersectionObserver() {\r\n\tconst observer = useContext( IntersectionObserver );\r\n\treturn useRefEffect(\r\n\t\t( node ) => {\r\n\t\t\tif ( observer ) {\r\n\t\t\t\tobserver.observe( node );\r\n\t\t\t\treturn () => {\r\n\t\t\t\t\tobserver.unobserve( node );\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t},\r\n\t\t[ observer ]\r\n\t);\r\n}\r\n","/**\n * WordPress dependencies\n */\nimport { useRefEffect } from '@wordpress/compose';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport { unlock } from '../../lock-unlock';\n\nexport function useFlashEditableBlocks( {\n\tclientId = '',\n\tisEnabled = true,\n} = {} ) {\n\tconst { getEnabledClientIdsTree } = unlock( useSelect( blockEditorStore ) );\n\n\treturn useRefEffect(\n\t\t( element ) => {\n\t\t\tif ( ! isEnabled ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst flashEditableBlocks = () => {\n\t\t\t\tgetEnabledClientIdsTree( clientId ).forEach(\n\t\t\t\t\t( { clientId: id } ) => {\n\t\t\t\t\t\tconst block = element.querySelector(\n\t\t\t\t\t\t\t`[data-block=\"${ id }\"]`\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif ( ! block ) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tblock.classList.remove( 'has-editable-outline' );\n\t\t\t\t\t\t// Force reflow to trigger the animation.\n\t\t\t\t\t\t// eslint-disable-next-line no-unused-expressions\n\t\t\t\t\t\tblock.offsetWidth;\n\t\t\t\t\t\tblock.classList.add( 'has-editable-outline' );\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t};\n\n\t\t\tconst handleClick = ( event ) => {\n\t\t\t\tconst shouldFlash =\n\t\t\t\t\tevent.target === element ||\n\t\t\t\t\tevent.target.classList.contains( 'is-root-container' );\n\t\t\t\tif ( ! shouldFlash ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif ( event.defaultPrevented ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tevent.preventDefault();\n\t\t\t\tflashEditableBlocks();\n\t\t\t};\n\n\t\t\telement.addEventListener( 'click', handleClick );\n\t\t\treturn () => element.removeEventListener( 'click', handleClick );\n\t\t},\n\t\t[ isEnabled ]\n\t);\n}\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { useContext } from '@wordpress/element';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { __unstableGetBlockProps as getBlockProps } from '@wordpress/blocks';\nimport { useMergeRefs, useDisabled } from '@wordpress/compose';\nimport warning from '@wordpress/warning';\n\n/**\n * Internal dependencies\n */\nimport useMovingAnimation from '../../use-moving-animation';\nimport { PrivateBlockContext } from '../private-block-context';\nimport { useFocusFirstElement } from './use-focus-first-element';\nimport { useIsHovered } from './use-is-hovered';\nimport {\n\tblockBindingsKey,\n\tuseBlockEditContext,\n} from '../../block-edit/context';\nimport { useFocusHandler } from './use-focus-handler';\nimport { useEventHandlers } from './use-selected-block-event-handlers';\nimport { useNavModeExit } from './use-nav-mode-exit';\nimport { useBlockRefProvider } from './use-block-refs';\nimport { useIntersectionObserver } from './use-intersection-observer';\nimport { useFlashEditableBlocks } from '../../use-flash-editable-blocks';\nimport { canBindBlock } from '../../../hooks/use-bindings-attributes';\n\n/**\n * This hook is used to lightly mark an element as a block element. The element\n * should be the outermost element of a block. Call this hook and pass the\n * returned props to the element to mark as a block. If you define a ref for the\n * element, it is important to pass the ref to this hook, which the hook in turn\n * will pass to the component through the props it returns. Optionally, you can\n * also pass any other props through this hook, and they will be merged and\n * returned.\n *\n * Use of this hook on the outermost element of a block is required if using API >= v2.\n *\n * @example\n * ```js\n * import { useBlockProps } from '@wordpress/block-editor';\n *\n * export default function Edit() {\n *\n *   const blockProps = useBlockProps(\n *     className: 'my-custom-class',\n *     style: {\n *       color: '#222222',\n *       backgroundColor: '#eeeeee'\n *     }\n *   )\n *\n *   return (\n *\t    <div { ...blockProps }>\n *\n *     </div>\n *   )\n * }\n *\n * ```\n *\n *\n * @param {Object}  props                    Optional. Props to pass to the element. Must contain\n *                                           the ref if one is defined.\n * @param {Object}  options                  Options for internal use only.\n * @param {boolean} options.__unstableIsHtml\n *\n * @return {Object} Props to pass to the element to mark as a block.\n */\nexport function useBlockProps( props = {}, { __unstableIsHtml } = {} ) {\n\tconst {\n\t\tclientId,\n\t\tclassName,\n\t\twrapperProps = {},\n\t\tisAligned,\n\t\tindex,\n\t\tmode,\n\t\tname,\n\t\tblockApiVersion,\n\t\tblockTitle,\n\t\tisSelected,\n\t\tisSubtreeDisabled,\n\t\tisOutlineEnabled,\n\t\thasOverlay,\n\t\tinitialPosition,\n\t\tblockEditingMode,\n\t\tisHighlighted,\n\t\tisMultiSelected,\n\t\tisPartiallySelected,\n\t\tisReusable,\n\t\tisDragging,\n\t\thasChildSelected,\n\t\tremoveOutline,\n\t\tisBlockMovingMode,\n\t\tcanInsertMovingBlock,\n\t\tisEditingDisabled,\n\t\thasEditableOutline,\n\t\tisTemporarilyEditingAsBlocks,\n\t\tdefaultClassName,\n\t\ttemplateLock,\n\t} = useContext( PrivateBlockContext );\n\n\t// translators: %s: Type of block (i.e. Text, Image etc)\n\tconst blockLabel = sprintf( __( 'Block: %s' ), blockTitle );\n\tconst htmlSuffix = mode === 'html' && ! __unstableIsHtml ? '-visual' : '';\n\tconst mergedRefs = useMergeRefs( [\n\t\tprops.ref,\n\t\tuseFocusFirstElement( { clientId, initialPosition } ),\n\t\tuseBlockRefProvider( clientId ),\n\t\tuseFocusHandler( clientId ),\n\t\tuseEventHandlers( { clientId, isSelected } ),\n\t\tuseNavModeExit( clientId ),\n\t\tuseIsHovered( { isEnabled: isOutlineEnabled } ),\n\t\tuseIntersectionObserver(),\n\t\tuseMovingAnimation( { triggerAnimationOnChange: index, clientId } ),\n\t\tuseDisabled( { isDisabled: ! hasOverlay } ),\n\t\tuseFlashEditableBlocks( {\n\t\t\tclientId,\n\t\t\tisEnabled: name === 'core/block' || templateLock === 'contentOnly',\n\t\t} ),\n\t] );\n\n\tconst blockEditContext = useBlockEditContext();\n\tconst hasBlockBindings = !! blockEditContext[ blockBindingsKey ];\n\tconst bindingsStyle =\n\t\thasBlockBindings && canBindBlock( name )\n\t\t\t? { '--wp-admin-theme-color': 'var(--wp-bound-block-color)' }\n\t\t\t: {};\n\n\t// Ensures it warns only inside the `edit` implementation for the block.\n\tif ( blockApiVersion < 2 && clientId === blockEditContext.clientId ) {\n\t\twarning(\n\t\t\t`Block type \"${ name }\" must support API version 2 or higher to work correctly with \"useBlockProps\" method.`\n\t\t);\n\t}\n\n\treturn {\n\t\ttabIndex: blockEditingMode === 'disabled' ? -1 : 0,\n\t\t...wrapperProps,\n\t\t...props,\n\t\tref: mergedRefs,\n\t\tid: `block-${ clientId }${ htmlSuffix }`,\n\t\trole: 'document',\n\t\t'aria-label': blockLabel,\n\t\t'data-block': clientId,\n\t\t'data-type': name,\n\t\t'data-title': blockTitle,\n\t\tinert: isSubtreeDisabled ? 'true' : undefined,\n\t\tclassName: classnames(\n\t\t\t'block-editor-block-list__block',\n\t\t\t{\n\t\t\t\t// The wp-block className is important for editor styles.\n\t\t\t\t'wp-block': ! isAligned,\n\t\t\t\t'has-block-overlay': hasOverlay,\n\t\t\t\t'is-selected': isSelected,\n\t\t\t\t'is-highlighted': isHighlighted,\n\t\t\t\t'is-multi-selected': isMultiSelected,\n\t\t\t\t'is-partially-selected': isPartiallySelected,\n\t\t\t\t'is-reusable': isReusable,\n\t\t\t\t'is-dragging': isDragging,\n\t\t\t\t'has-child-selected': hasChildSelected,\n\t\t\t\t'remove-outline': removeOutline,\n\t\t\t\t'is-block-moving-mode': isBlockMovingMode,\n\t\t\t\t'can-insert-moving-block': canInsertMovingBlock,\n\t\t\t\t'is-editing-disabled': isEditingDisabled,\n\t\t\t\t'has-editable-outline': hasEditableOutline,\n\t\t\t\t'is-content-locked-temporarily-editing-as-blocks':\n\t\t\t\t\tisTemporarilyEditingAsBlocks,\n\t\t\t},\n\t\t\tclassName,\n\t\t\tprops.className,\n\t\t\twrapperProps.className,\n\t\t\tdefaultClassName\n\t\t),\n\t\tstyle: { ...wrapperProps.style, ...props.style, ...bindingsStyle },\n\t};\n}\n\n/**\n * Call within a save function to get the props for the block wrapper.\n *\n * @param {Object} props Optional. Props to pass to the element.\n */\nuseBlockProps.save = getBlockProps;\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tmemo,\n\tuseCallback,\n\tRawHTML,\n\tuseContext,\n\tuseMemo,\n} from '@wordpress/element';\nimport {\n\tgetBlockType,\n\tgetSaveContent,\n\tisUnmodifiedDefaultBlock,\n\tserializeRawBlock,\n\tswitchToBlockType,\n\tgetDefaultBlockName,\n\tisUnmodifiedBlock,\n\tisReusableBlock,\n\tgetBlockDefaultClassName,\n\tstore as blocksStore,\n} from '@wordpress/blocks';\nimport { withFilters } from '@wordpress/components';\nimport { withDispatch, useDispatch, useSelect } from '@wordpress/data';\nimport { compose } from '@wordpress/compose';\nimport { safeHTML } from '@wordpress/dom';\n\n/**\n * Internal dependencies\n */\nimport BlockEdit from '../block-edit';\nimport BlockInvalidWarning from './block-invalid-warning';\nimport BlockCrashWarning from './block-crash-warning';\nimport BlockCrashBoundary from './block-crash-boundary';\nimport BlockHtml from './block-html';\nimport { useBlockProps } from './use-block-props';\nimport { store as blockEditorStore } from '../../store';\nimport { useLayout } from './layout';\nimport { PrivateBlockContext } from './private-block-context';\n\nimport { unlock } from '../../lock-unlock';\n\n/**\n * Merges wrapper props with special handling for classNames and styles.\n *\n * @param {Object} propsA\n * @param {Object} propsB\n *\n * @return {Object} Merged props.\n */\nfunction mergeWrapperProps( propsA, propsB ) {\n\tconst newProps = {\n\t\t...propsA,\n\t\t...propsB,\n\t};\n\n\t// May be set to undefined, so check if the property is set!\n\tif (\n\t\tpropsA?.hasOwnProperty( 'className' ) &&\n\t\tpropsB?.hasOwnProperty( 'className' )\n\t) {\n\t\tnewProps.className = classnames( propsA.className, propsB.className );\n\t}\n\n\tif (\n\t\tpropsA?.hasOwnProperty( 'style' ) &&\n\t\tpropsB?.hasOwnProperty( 'style' )\n\t) {\n\t\tnewProps.style = { ...propsA.style, ...propsB.style };\n\t}\n\n\treturn newProps;\n}\n\nfunction Block( { children, isHtml, ...props } ) {\n\treturn (\n\t\t<div { ...useBlockProps( props, { __unstableIsHtml: isHtml } ) }>\n\t\t\t{ children }\n\t\t</div>\n\t);\n}\n\nfunction BlockListBlock( {\n\tblock: { __unstableBlockSource },\n\tmode,\n\tisLocked,\n\tcanRemove,\n\tclientId,\n\tisSelected,\n\tisSelectionEnabled,\n\tclassName,\n\t__unstableLayoutClassNames: layoutClassNames,\n\tname,\n\tisValid,\n\tattributes,\n\twrapperProps,\n\tsetAttributes,\n\tonReplace,\n\tonInsertBlocksAfter,\n\tonMerge,\n\ttoggleSelection,\n} ) {\n\tconst {\n\t\tmayDisplayControls,\n\t\tmayDisplayParentControls,\n\t\tthemeSupportsLayout,\n\t\t...context\n\t} = useContext( PrivateBlockContext );\n\tconst { removeBlock } = useDispatch( blockEditorStore );\n\tconst onRemove = useCallback(\n\t\t() => removeBlock( clientId ),\n\t\t[ clientId, removeBlock ]\n\t);\n\n\tconst parentLayout = useLayout() || {};\n\n\t// We wrap the BlockEdit component in a div that hides it when editing in\n\t// HTML mode. This allows us to render all of the ancillary pieces\n\t// (InspectorControls, etc.) which are inside `BlockEdit` but not\n\t// `BlockHTML`, even in HTML mode.\n\tlet blockEdit = (\n\t\t<BlockEdit\n\t\t\tname={ name }\n\t\t\tisSelected={ isSelected }\n\t\t\tattributes={ attributes }\n\t\t\tsetAttributes={ setAttributes }\n\t\t\tinsertBlocksAfter={ isLocked ? undefined : onInsertBlocksAfter }\n\t\t\tonReplace={ canRemove ? onReplace : undefined }\n\t\t\tonRemove={ canRemove ? onRemove : undefined }\n\t\t\tmergeBlocks={ canRemove ? onMerge : undefined }\n\t\t\tclientId={ clientId }\n\t\t\tisSelectionEnabled={ isSelectionEnabled }\n\t\t\ttoggleSelection={ toggleSelection }\n\t\t\t__unstableLayoutClassNames={ layoutClassNames }\n\t\t\t__unstableParentLayout={\n\t\t\t\tObject.keys( parentLayout ).length ? parentLayout : undefined\n\t\t\t}\n\t\t\tmayDisplayControls={ mayDisplayControls }\n\t\t\tmayDisplayParentControls={ mayDisplayParentControls }\n\t\t\tblockEditingMode={ context.blockEditingMode }\n\t\t/>\n\t);\n\n\tconst blockType = getBlockType( name );\n\n\t// Determine whether the block has props to apply to the wrapper.\n\tif ( blockType?.getEditWrapperProps ) {\n\t\twrapperProps = mergeWrapperProps(\n\t\t\twrapperProps,\n\t\t\tblockType.getEditWrapperProps( attributes )\n\t\t);\n\t}\n\n\tconst isAligned =\n\t\twrapperProps &&\n\t\t!! wrapperProps[ 'data-align' ] &&\n\t\t! themeSupportsLayout;\n\n\t// Support for sticky position in classic themes with alignment wrappers.\n\n\tconst isSticky = className?.includes( 'is-position-sticky' );\n\n\t// For aligned blocks, provide a wrapper element so the block can be\n\t// positioned relative to the block column.\n\t// This is only kept for classic themes that don't support layout\n\t// Historically we used to rely on extra divs and data-align to\n\t// provide the alignments styles in the editor.\n\t// Due to the differences between frontend and backend, we migrated\n\t// to the layout feature, and we're now aligning the markup of frontend\n\t// and backend.\n\tif ( isAligned ) {\n\t\tblockEdit = (\n\t\t\t<div\n\t\t\t\tclassName={ classnames( 'wp-block', isSticky && className ) }\n\t\t\t\tdata-align={ wrapperProps[ 'data-align' ] }\n\t\t\t>\n\t\t\t\t{ blockEdit }\n\t\t\t</div>\n\t\t);\n\t}\n\n\tlet block;\n\n\tif ( ! isValid ) {\n\t\tconst saveContent = __unstableBlockSource\n\t\t\t? serializeRawBlock( __unstableBlockSource )\n\t\t\t: getSaveContent( blockType, attributes );\n\n\t\tblock = (\n\t\t\t<Block className=\"has-warning\">\n\t\t\t\t<BlockInvalidWarning clientId={ clientId } />\n\t\t\t\t<RawHTML>{ safeHTML( saveContent ) }</RawHTML>\n\t\t\t</Block>\n\t\t);\n\t} else if ( mode === 'html' ) {\n\t\t// Render blockEdit so the inspector controls don't disappear.\n\t\t// See #8969.\n\t\tblock = (\n\t\t\t<>\n\t\t\t\t<div style={ { display: 'none' } }>{ blockEdit }</div>\n\t\t\t\t<Block isHtml>\n\t\t\t\t\t<BlockHtml clientId={ clientId } />\n\t\t\t\t</Block>\n\t\t\t</>\n\t\t);\n\t} else if ( blockType?.apiVersion > 1 ) {\n\t\tblock = blockEdit;\n\t} else {\n\t\tblock = <Block>{ blockEdit }</Block>;\n\t}\n\n\tconst { 'data-align': dataAlign, ...restWrapperProps } = wrapperProps ?? {};\n\n\trestWrapperProps.className = classnames(\n\t\trestWrapperProps.className,\n\t\tdataAlign && themeSupportsLayout && `align${ dataAlign }`,\n\t\t! ( dataAlign && isSticky ) && className\n\t);\n\n\t// We set a new context with the adjusted and filtered wrapperProps (through\n\t// `editor.BlockListBlock`), which the `BlockListBlockProvider` did not have\n\t// access to.\n\t// Note that the context value doesn't have to be memoized in this case\n\t// because when it changes, this component will be re-rendered anyway, and\n\t// none of the consumers (BlockListBlock and useBlockProps) are memoized or\n\t// \"pure\". This is different from the public BlockEditContext, where\n\t// consumers might be memoized or \"pure\".\n\treturn (\n\t\t<PrivateBlockContext.Provider\n\t\t\tvalue={ {\n\t\t\t\twrapperProps: restWrapperProps,\n\t\t\t\tisAligned,\n\t\t\t\t...context,\n\t\t\t} }\n\t\t>\n\t\t\t<BlockCrashBoundary\n\t\t\t\tfallback={\n\t\t\t\t\t<Block className=\"has-warning\">\n\t\t\t\t\t\t<BlockCrashWarning />\n\t\t\t\t\t</Block>\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t{ block }\n\t\t\t</BlockCrashBoundary>\n\t\t</PrivateBlockContext.Provider>\n\t);\n}\n\nconst applyWithDispatch = withDispatch( ( dispatch, ownProps, registry ) => {\n\tconst {\n\t\tupdateBlockAttributes,\n\t\tinsertBlocks,\n\t\tmergeBlocks,\n\t\treplaceBlocks,\n\t\ttoggleSelection,\n\t\t__unstableMarkLastChangeAsPersistent,\n\t\tmoveBlocksToPosition,\n\t\tremoveBlock,\n\t} = dispatch( blockEditorStore );\n\n\t// Do not add new properties here, use `useDispatch` instead to avoid\n\t// leaking new props to the public API (editor.BlockListBlock filter).\n\treturn {\n\t\tsetAttributes( newAttributes ) {\n\t\t\tconst { getMultiSelectedBlockClientIds } =\n\t\t\t\tregistry.select( blockEditorStore );\n\t\t\tconst multiSelectedBlockClientIds =\n\t\t\t\tgetMultiSelectedBlockClientIds();\n\t\t\tconst { clientId } = ownProps;\n\t\t\tconst clientIds = multiSelectedBlockClientIds.length\n\t\t\t\t? multiSelectedBlockClientIds\n\t\t\t\t: [ clientId ];\n\n\t\t\tupdateBlockAttributes( clientIds, newAttributes );\n\t\t},\n\t\tonInsertBlocks( blocks, index ) {\n\t\t\tconst { rootClientId } = ownProps;\n\t\t\tinsertBlocks( blocks, index, rootClientId );\n\t\t},\n\t\tonInsertBlocksAfter( blocks ) {\n\t\t\tconst { clientId, rootClientId } = ownProps;\n\t\t\tconst { getBlockIndex } = registry.select( blockEditorStore );\n\t\t\tconst index = getBlockIndex( clientId );\n\t\t\tinsertBlocks( blocks, index + 1, rootClientId );\n\t\t},\n\t\tonMerge( forward ) {\n\t\t\tconst { clientId, rootClientId } = ownProps;\n\t\t\tconst {\n\t\t\t\tgetPreviousBlockClientId,\n\t\t\t\tgetNextBlockClientId,\n\t\t\t\tgetBlock,\n\t\t\t\tgetBlockAttributes,\n\t\t\t\tgetBlockName,\n\t\t\t\tgetBlockOrder,\n\t\t\t\tgetBlockIndex,\n\t\t\t\tgetBlockRootClientId,\n\t\t\t\tcanInsertBlockType,\n\t\t\t} = registry.select( blockEditorStore );\n\n\t\t\t/**\n\t\t\t * Moves the block with clientId up one level. If the block type\n\t\t\t * cannot be inserted at the new location, it will be attempted to\n\t\t\t * convert to the default block type.\n\t\t\t *\n\t\t\t * @param {string}  _clientId       The block to move.\n\t\t\t * @param {boolean} changeSelection Whether to change the selection\n\t\t\t *                                  to the moved block.\n\t\t\t */\n\t\t\tfunction moveFirstItemUp( _clientId, changeSelection = true ) {\n\t\t\t\tconst targetRootClientId = getBlockRootClientId( _clientId );\n\t\t\t\tconst blockOrder = getBlockOrder( _clientId );\n\t\t\t\tconst [ firstClientId ] = blockOrder;\n\n\t\t\t\tif (\n\t\t\t\t\tblockOrder.length === 1 &&\n\t\t\t\t\tisUnmodifiedBlock( getBlock( firstClientId ) )\n\t\t\t\t) {\n\t\t\t\t\tremoveBlock( _clientId );\n\t\t\t\t} else {\n\t\t\t\t\tregistry.batch( () => {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tcanInsertBlockType(\n\t\t\t\t\t\t\t\tgetBlockName( firstClientId ),\n\t\t\t\t\t\t\t\ttargetRootClientId\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tmoveBlocksToPosition(\n\t\t\t\t\t\t\t\t[ firstClientId ],\n\t\t\t\t\t\t\t\t_clientId,\n\t\t\t\t\t\t\t\ttargetRootClientId,\n\t\t\t\t\t\t\t\tgetBlockIndex( _clientId )\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst replacement = switchToBlockType(\n\t\t\t\t\t\t\t\tgetBlock( firstClientId ),\n\t\t\t\t\t\t\t\tgetDefaultBlockName()\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tif ( replacement && replacement.length ) {\n\t\t\t\t\t\t\t\tinsertBlocks(\n\t\t\t\t\t\t\t\t\treplacement,\n\t\t\t\t\t\t\t\t\tgetBlockIndex( _clientId ),\n\t\t\t\t\t\t\t\t\ttargetRootClientId,\n\t\t\t\t\t\t\t\t\tchangeSelection\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tremoveBlock( firstClientId, false );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t! getBlockOrder( _clientId ).length &&\n\t\t\t\t\t\t\tisUnmodifiedBlock( getBlock( _clientId ) )\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tremoveBlock( _clientId, false );\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// For `Delete` or forward merge, we should do the exact same thing\n\t\t\t// as `Backspace`, but from the other block.\n\t\t\tif ( forward ) {\n\t\t\t\tif ( rootClientId ) {\n\t\t\t\t\tconst nextRootClientId =\n\t\t\t\t\t\tgetNextBlockClientId( rootClientId );\n\n\t\t\t\t\tif ( nextRootClientId ) {\n\t\t\t\t\t\t// If there is a block that follows with the same parent\n\t\t\t\t\t\t// block name and the same attributes, merge the inner\n\t\t\t\t\t\t// blocks.\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tgetBlockName( rootClientId ) ===\n\t\t\t\t\t\t\tgetBlockName( nextRootClientId )\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tconst rootAttributes =\n\t\t\t\t\t\t\t\tgetBlockAttributes( rootClientId );\n\t\t\t\t\t\t\tconst previousRootAttributes =\n\t\t\t\t\t\t\t\tgetBlockAttributes( nextRootClientId );\n\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tObject.keys( rootAttributes ).every(\n\t\t\t\t\t\t\t\t\t( key ) =>\n\t\t\t\t\t\t\t\t\t\trootAttributes[ key ] ===\n\t\t\t\t\t\t\t\t\t\tpreviousRootAttributes[ key ]\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tregistry.batch( () => {\n\t\t\t\t\t\t\t\t\tmoveBlocksToPosition(\n\t\t\t\t\t\t\t\t\t\tgetBlockOrder( nextRootClientId ),\n\t\t\t\t\t\t\t\t\t\tnextRootClientId,\n\t\t\t\t\t\t\t\t\t\trootClientId\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tremoveBlock( nextRootClientId, false );\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tmergeBlocks( rootClientId, nextRootClientId );\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst nextBlockClientId = getNextBlockClientId( clientId );\n\n\t\t\t\tif ( ! nextBlockClientId ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( getBlockOrder( nextBlockClientId ).length ) {\n\t\t\t\t\tmoveFirstItemUp( nextBlockClientId, false );\n\t\t\t\t} else {\n\t\t\t\t\tmergeBlocks( clientId, nextBlockClientId );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst previousBlockClientId =\n\t\t\t\t\tgetPreviousBlockClientId( clientId );\n\n\t\t\t\tif ( previousBlockClientId ) {\n\t\t\t\t\tmergeBlocks( previousBlockClientId, clientId );\n\t\t\t\t} else if ( rootClientId ) {\n\t\t\t\t\tconst previousRootClientId =\n\t\t\t\t\t\tgetPreviousBlockClientId( rootClientId );\n\n\t\t\t\t\t// If there is a preceding block with the same parent block\n\t\t\t\t\t// name and the same attributes, merge the inner blocks.\n\t\t\t\t\tif (\n\t\t\t\t\t\tpreviousRootClientId &&\n\t\t\t\t\t\tgetBlockName( rootClientId ) ===\n\t\t\t\t\t\t\tgetBlockName( previousRootClientId )\n\t\t\t\t\t) {\n\t\t\t\t\t\tconst rootAttributes =\n\t\t\t\t\t\t\tgetBlockAttributes( rootClientId );\n\t\t\t\t\t\tconst previousRootAttributes =\n\t\t\t\t\t\t\tgetBlockAttributes( previousRootClientId );\n\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tObject.keys( rootAttributes ).every(\n\t\t\t\t\t\t\t\t( key ) =>\n\t\t\t\t\t\t\t\t\trootAttributes[ key ] ===\n\t\t\t\t\t\t\t\t\tpreviousRootAttributes[ key ]\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tregistry.batch( () => {\n\t\t\t\t\t\t\t\tmoveBlocksToPosition(\n\t\t\t\t\t\t\t\t\tgetBlockOrder( rootClientId ),\n\t\t\t\t\t\t\t\t\trootClientId,\n\t\t\t\t\t\t\t\t\tpreviousRootClientId\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tremoveBlock( rootClientId, false );\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tmoveFirstItemUp( rootClientId );\n\t\t\t\t} else if (\n\t\t\t\t\tgetBlockName( clientId ) !== getDefaultBlockName()\n\t\t\t\t) {\n\t\t\t\t\tconst replacement = switchToBlockType(\n\t\t\t\t\t\tgetBlock( clientId ),\n\t\t\t\t\t\tgetDefaultBlockName()\n\t\t\t\t\t);\n\t\t\t\t\tif ( replacement && replacement.length ) {\n\t\t\t\t\t\treplaceBlocks( clientId, replacement );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tonReplace( blocks, indexToSelect, initialPosition ) {\n\t\t\tif (\n\t\t\t\tblocks.length &&\n\t\t\t\t! isUnmodifiedDefaultBlock( blocks[ blocks.length - 1 ] )\n\t\t\t) {\n\t\t\t\t__unstableMarkLastChangeAsPersistent();\n\t\t\t}\n\t\t\t//Unsynced patterns are nested in an array so we need to flatten them.\n\t\t\tconst replacementBlocks =\n\t\t\t\tblocks?.length === 1 && Array.isArray( blocks[ 0 ] )\n\t\t\t\t\t? blocks[ 0 ]\n\t\t\t\t\t: blocks;\n\t\t\treplaceBlocks(\n\t\t\t\t[ ownProps.clientId ],\n\t\t\t\treplacementBlocks,\n\t\t\t\tindexToSelect,\n\t\t\t\tinitialPosition\n\t\t\t);\n\t\t},\n\t\ttoggleSelection( selectionEnabled ) {\n\t\t\ttoggleSelection( selectionEnabled );\n\t\t},\n\t};\n} );\n\n// This component is used by the BlockListBlockProvider component below. It will\n// add the props necessary for the `editor.BlockListBlock` filters.\nBlockListBlock = compose(\n\tapplyWithDispatch,\n\twithFilters( 'editor.BlockListBlock' )\n)( BlockListBlock );\n\n// This component provides all the information we need through a single store\n// subscription (useSelect mapping). Only the necessary props are passed down\n// to the BlockListBlock component, which is a filtered component, so these\n// props are public API. To avoid adding to the public API, we use a private\n// context to pass the rest of the information to the filtered BlockListBlock\n// component, and useBlockProps.\nfunction BlockListBlockProvider( props ) {\n\tconst { clientId, rootClientId } = props;\n\tconst selectedProps = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tisBlockSelected,\n\t\t\t\tgetBlockMode,\n\t\t\t\tisSelectionEnabled,\n\t\t\t\tgetTemplateLock,\n\t\t\t\tgetBlockWithoutAttributes,\n\t\t\t\tgetBlockAttributes,\n\t\t\t\tcanRemoveBlock,\n\t\t\t\tcanMoveBlock,\n\n\t\t\t\tgetSettings,\n\t\t\t\t__unstableGetTemporarilyEditingAsBlocks,\n\t\t\t\tgetBlockEditingMode,\n\t\t\t\tgetBlockName,\n\t\t\t\tisFirstMultiSelectedBlock,\n\t\t\t\tgetMultiSelectedBlockClientIds,\n\t\t\t\thasSelectedInnerBlock,\n\n\t\t\t\tgetBlockIndex,\n\t\t\t\tisTyping,\n\t\t\t\tisBlockMultiSelected,\n\t\t\t\tisBlockSubtreeDisabled,\n\t\t\t\tisBlockHighlighted,\n\t\t\t\t__unstableIsFullySelected,\n\t\t\t\t__unstableSelectionHasUnmergeableBlock,\n\t\t\t\tisBlockBeingDragged,\n\t\t\t\tisDragging,\n\t\t\t\thasBlockMovingClientId,\n\t\t\t\tcanInsertBlockType,\n\t\t\t\t__unstableHasActiveBlockOverlayActive,\n\t\t\t\t__unstableGetEditorMode,\n\t\t\t\tgetSelectedBlocksInitialCaretPosition,\n\t\t\t} = unlock( select( blockEditorStore ) );\n\t\t\tconst blockWithoutAttributes =\n\t\t\t\tgetBlockWithoutAttributes( clientId );\n\n\t\t\t// This is a temporary fix.\n\t\t\t// This function should never be called when a block is not\n\t\t\t// present in the state. It happens now because the order in\n\t\t\t// withSelect rendering is not correct.\n\t\t\tif ( ! blockWithoutAttributes ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst {\n\t\t\t\thasBlockSupport: _hasBlockSupport,\n\t\t\t\tgetActiveBlockVariation,\n\t\t\t} = select( blocksStore );\n\t\t\tconst _isSelected = isBlockSelected( clientId );\n\t\t\tconst canRemove = canRemoveBlock( clientId, rootClientId );\n\t\t\tconst canMove = canMoveBlock( clientId, rootClientId );\n\t\t\tconst attributes = getBlockAttributes( clientId );\n\t\t\tconst { name: blockName, isValid } = blockWithoutAttributes;\n\t\t\tconst blockType = getBlockType( blockName );\n\t\t\tconst match = getActiveBlockVariation( blockName, attributes );\n\t\t\tconst { outlineMode, supportsLayout } = getSettings();\n\t\t\tconst isMultiSelected = isBlockMultiSelected( clientId );\n\t\t\tconst checkDeep = true;\n\t\t\tconst isAncestorOfSelectedBlock = hasSelectedInnerBlock(\n\t\t\t\tclientId,\n\t\t\t\tcheckDeep\n\t\t\t);\n\t\t\tconst typing = isTyping();\n\t\t\tconst hasLightBlockWrapper = blockType?.apiVersion > 1;\n\t\t\tconst movingClientId = hasBlockMovingClientId();\n\t\t\tconst blockEditingMode = getBlockEditingMode( clientId );\n\n\t\t\treturn {\n\t\t\t\tmode: getBlockMode( clientId ),\n\t\t\t\tisSelectionEnabled: isSelectionEnabled(),\n\t\t\t\tisLocked: !! getTemplateLock( rootClientId ),\n\t\t\t\ttemplateLock: getTemplateLock( clientId ),\n\t\t\t\tcanRemove,\n\t\t\t\tcanMove,\n\t\t\t\tblockWithoutAttributes,\n\t\t\t\tname: blockName,\n\t\t\t\tattributes,\n\t\t\t\tisValid,\n\t\t\t\tisSelected: _isSelected,\n\t\t\t\tthemeSupportsLayout: supportsLayout,\n\t\t\t\tisTemporarilyEditingAsBlocks:\n\t\t\t\t\t__unstableGetTemporarilyEditingAsBlocks() === clientId,\n\t\t\t\tblockEditingMode,\n\t\t\t\tmayDisplayControls:\n\t\t\t\t\t_isSelected ||\n\t\t\t\t\t( isFirstMultiSelectedBlock( clientId ) &&\n\t\t\t\t\t\tgetMultiSelectedBlockClientIds().every(\n\t\t\t\t\t\t\t( id ) => getBlockName( id ) === blockName\n\t\t\t\t\t\t) ),\n\t\t\t\tmayDisplayParentControls:\n\t\t\t\t\t_hasBlockSupport(\n\t\t\t\t\t\tgetBlockName( clientId ),\n\t\t\t\t\t\t'__experimentalExposeControlsToChildren',\n\t\t\t\t\t\tfalse\n\t\t\t\t\t) && hasSelectedInnerBlock( clientId ),\n\t\t\t\tindex: getBlockIndex( clientId ),\n\t\t\t\tblockApiVersion: blockType?.apiVersion || 1,\n\t\t\t\tblockTitle: match?.title || blockType?.title,\n\t\t\t\tisSubtreeDisabled:\n\t\t\t\t\tblockEditingMode === 'disabled' &&\n\t\t\t\t\tisBlockSubtreeDisabled( clientId ),\n\t\t\t\tisOutlineEnabled: outlineMode,\n\t\t\t\thasOverlay:\n\t\t\t\t\t__unstableHasActiveBlockOverlayActive( clientId ) &&\n\t\t\t\t\t! isDragging(),\n\t\t\t\tinitialPosition:\n\t\t\t\t\t_isSelected && __unstableGetEditorMode() === 'edit'\n\t\t\t\t\t\t? getSelectedBlocksInitialCaretPosition()\n\t\t\t\t\t\t: undefined,\n\t\t\t\tisHighlighted: isBlockHighlighted( clientId ),\n\t\t\t\tisMultiSelected,\n\t\t\t\tisPartiallySelected:\n\t\t\t\t\tisMultiSelected &&\n\t\t\t\t\t! __unstableIsFullySelected() &&\n\t\t\t\t\t! __unstableSelectionHasUnmergeableBlock(),\n\t\t\t\tisReusable: isReusableBlock( blockType ),\n\t\t\t\tisDragging: isBlockBeingDragged( clientId ),\n\t\t\t\thasChildSelected: isAncestorOfSelectedBlock,\n\t\t\t\tremoveOutline: _isSelected && outlineMode && typing,\n\t\t\t\tisBlockMovingMode: !! movingClientId,\n\t\t\t\tcanInsertMovingBlock:\n\t\t\t\t\tmovingClientId &&\n\t\t\t\t\tcanInsertBlockType(\n\t\t\t\t\t\tgetBlockName( movingClientId ),\n\t\t\t\t\t\trootClientId\n\t\t\t\t\t),\n\t\t\t\tisEditingDisabled: blockEditingMode === 'disabled',\n\t\t\t\thasEditableOutline:\n\t\t\t\t\tblockEditingMode !== 'disabled' &&\n\t\t\t\t\tgetBlockEditingMode( rootClientId ) === 'disabled',\n\t\t\t\tclassName: hasLightBlockWrapper\n\t\t\t\t\t? attributes.className\n\t\t\t\t\t: undefined,\n\t\t\t\tdefaultClassName: hasLightBlockWrapper\n\t\t\t\t\t? getBlockDefaultClassName( blockName )\n\t\t\t\t\t: undefined,\n\t\t\t};\n\t\t},\n\t\t[ clientId, rootClientId ]\n\t);\n\n\tconst {\n\t\tmode,\n\t\tisSelectionEnabled,\n\t\tisLocked,\n\t\tcanRemove,\n\t\tcanMove,\n\t\tblockWithoutAttributes,\n\t\tname,\n\t\tattributes,\n\t\tisValid,\n\t\tisSelected,\n\t\tthemeSupportsLayout,\n\t\tisTemporarilyEditingAsBlocks,\n\t\tblockEditingMode,\n\t\tmayDisplayControls,\n\t\tmayDisplayParentControls,\n\t\tindex,\n\t\tblockApiVersion,\n\t\tblockTitle,\n\t\tisSubtreeDisabled,\n\t\tisOutlineEnabled,\n\t\thasOverlay,\n\t\tinitialPosition,\n\t\tisHighlighted,\n\t\tisMultiSelected,\n\t\tisPartiallySelected,\n\t\tisReusable,\n\t\tisDragging,\n\t\thasChildSelected,\n\t\tremoveOutline,\n\t\tisBlockMovingMode,\n\t\tcanInsertMovingBlock,\n\t\ttemplateLock,\n\t\tisEditingDisabled,\n\t\thasEditableOutline,\n\t\tclassName,\n\t\tdefaultClassName,\n\t} = selectedProps;\n\n\t// Users of the editor.BlockListBlock filter used to be able to\n\t// access the block prop.\n\t// Ideally these blocks would rely on the clientId prop only.\n\t// This is kept for backward compatibility reasons.\n\tconst block = useMemo(\n\t\t() => ( { ...blockWithoutAttributes, attributes } ),\n\t\t[ blockWithoutAttributes, attributes ]\n\t);\n\n\t// Block is sometimes not mounted at the right time, causing it be\n\t// undefined see issue for more info\n\t// https://github.com/WordPress/gutenberg/issues/17013\n\tif ( ! selectedProps ) {\n\t\treturn null;\n\t}\n\n\tconst privateContext = {\n\t\tclientId,\n\t\tclassName,\n\t\tindex,\n\t\tmode,\n\t\tname,\n\t\tblockApiVersion,\n\t\tblockTitle,\n\t\tisSelected,\n\t\tisSubtreeDisabled,\n\t\tisOutlineEnabled,\n\t\thasOverlay,\n\t\tinitialPosition,\n\t\tblockEditingMode,\n\t\tisHighlighted,\n\t\tisMultiSelected,\n\t\tisPartiallySelected,\n\t\tisReusable,\n\t\tisDragging,\n\t\thasChildSelected,\n\t\tremoveOutline,\n\t\tisBlockMovingMode,\n\t\tcanInsertMovingBlock,\n\t\ttemplateLock,\n\t\tisEditingDisabled,\n\t\thasEditableOutline,\n\t\tisTemporarilyEditingAsBlocks,\n\t\tdefaultClassName,\n\t\tmayDisplayControls,\n\t\tmayDisplayParentControls,\n\t\tthemeSupportsLayout,\n\t};\n\n\t// Here we separate between the props passed to BlockListBlock and any other\n\t// information we selected for internal use. BlockListBlock is a filtered\n\t// component and thus ALL the props are PUBLIC API.\n\n\t// Note that the context value doesn't have to be memoized in this case\n\t// because when it changes, this component will be re-rendered anyway, and\n\t// none of the consumers (BlockListBlock and useBlockProps) are memoized or\n\t// \"pure\". This is different from the public BlockEditContext, where\n\t// consumers might be memoized or \"pure\".\n\treturn (\n\t\t<PrivateBlockContext.Provider value={ privateContext }>\n\t\t\t<BlockListBlock\n\t\t\t\t{ ...props }\n\t\t\t\t// WARNING: all the following props are public API (through the\n\t\t\t\t// editor.BlockListBlock filter) and normally nothing new should\n\t\t\t\t// be added to it.\n\t\t\t\t{ ...{\n\t\t\t\t\tmode,\n\t\t\t\t\tisSelectionEnabled,\n\t\t\t\t\tisLocked,\n\t\t\t\t\tcanRemove,\n\t\t\t\t\tcanMove,\n\t\t\t\t\t// Users of the editor.BlockListBlock filter used to be able\n\t\t\t\t\t// to access the block prop. Ideally these blocks would rely\n\t\t\t\t\t// on the clientId prop only. This is kept for backward\n\t\t\t\t\t// compatibility reasons.\n\t\t\t\t\tblock,\n\t\t\t\t\tname,\n\t\t\t\t\tattributes,\n\t\t\t\t\tisValid,\n\t\t\t\t\tisSelected,\n\t\t\t\t} }\n\t\t\t/>\n\t\t</PrivateBlockContext.Provider>\n\t);\n}\n\nexport default memo( BlockListBlockProvider );\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"htmlEntities\"];","/**\r\n * WordPress dependencies\r\n */\r\nimport { __ } from '@wordpress/i18n';\r\nimport { createInterpolateElement, useState } from '@wordpress/element';\r\nimport { Tip } from '@wordpress/components';\r\n\r\nconst globalTips = [\r\n\tcreateInterpolateElement(\r\n\t\t__(\r\n\t\t\t'While writing, you can press <kbd>/</kbd> to quickly insert new blocks.'\r\n\t\t),\r\n\t\t{ kbd: <kbd /> }\r\n\t),\r\n\tcreateInterpolateElement(\r\n\t\t__(\r\n\t\t\t'Indent a list by pressing <kbd>space</kbd> at the beginning of a line.'\r\n\t\t),\r\n\t\t{ kbd: <kbd /> }\r\n\t),\r\n\tcreateInterpolateElement(\r\n\t\t__(\r\n\t\t\t'Outdent a list by pressing <kbd>backspace</kbd> at the beginning of a line.'\r\n\t\t),\r\n\t\t{ kbd: <kbd /> }\r\n\t),\r\n\t__( 'Drag files into the editor to automatically insert media blocks.' ),\r\n\t__( \"Change a block's type by pressing the block icon on the toolbar.\" ),\r\n];\r\n\r\nfunction Tips() {\r\n\tconst [ randomIndex ] = useState(\r\n\t\t// Disable Reason: I'm not generating an HTML id.\r\n\t\t// eslint-disable-next-line no-restricted-syntax\r\n\t\tMath.floor( Math.random() * globalTips.length )\r\n\t);\r\n\r\n\treturn <Tip>{ globalTips[ randomIndex ] }</Tip>;\r\n}\r\n\r\nexport default Tips;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst chevronRight = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M10.6 6L9.4 7l4.6 5-4.6 5 1.2 1 5.4-6z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default chevronRight;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst chevronLeft = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M14.6 7l-1.2-1L8 12l5.4 6 1.2-1-4.6-5z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default chevronLeft;\r\n","/**\r\n * External dependencies\r\n */\r\nimport classnames from 'classnames';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport deprecated from '@wordpress/deprecated';\r\nimport { Button } from '@wordpress/components';\r\nimport { chevronLeft, chevronRight } from '@wordpress/icons';\r\nimport { __, isRTL } from '@wordpress/i18n';\r\nimport { useSelect, useDispatch } from '@wordpress/data';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport BlockIcon from '../block-icon';\r\nimport { store as blockEditorStore } from '../../store';\r\n\r\nfunction BlockCard( { title, icon, description, blockType, className } ) {\r\n\tif ( blockType ) {\r\n\t\tdeprecated( '`blockType` property in `BlockCard component`', {\r\n\t\t\tsince: '5.7',\r\n\t\t\talternative: '`title, icon and description` properties',\r\n\t\t} );\r\n\t\t( { title, icon, description } = blockType );\r\n\t}\r\n\r\n\tconst { parentNavBlockClientId } = useSelect( ( select ) => {\r\n\t\tconst { getSelectedBlockClientId, getBlockParentsByBlockName } =\r\n\t\t\tselect( blockEditorStore );\r\n\r\n\t\tconst _selectedBlockClientId = getSelectedBlockClientId();\r\n\r\n\t\treturn {\r\n\t\t\tparentNavBlockClientId: getBlockParentsByBlockName(\r\n\t\t\t\t_selectedBlockClientId,\r\n\t\t\t\t'core/navigation',\r\n\t\t\t\ttrue\r\n\t\t\t)[ 0 ],\r\n\t\t};\r\n\t}, [] );\r\n\r\n\tconst { selectBlock } = useDispatch( blockEditorStore );\r\n\r\n\treturn (\r\n\t\t<div className={ classnames( 'block-editor-block-card', className ) }>\r\n\t\t\t{ parentNavBlockClientId && ( // This is only used by the Navigation block for now. It's not ideal having Navigation block specific code here.\r\n\t\t\t\t<Button\r\n\t\t\t\t\tonClick={ () => selectBlock( parentNavBlockClientId ) }\r\n\t\t\t\t\tlabel={ __( 'Go to parent Navigation block' ) }\r\n\t\t\t\t\tstyle={\r\n\t\t\t\t\t\t// TODO: This style override is also used in ToolsPanelHeader.\r\n\t\t\t\t\t\t// It should be supported out-of-the-box by Button.\r\n\t\t\t\t\t\t{ minWidth: 24, padding: 0 }\r\n\t\t\t\t\t}\r\n\t\t\t\t\ticon={ isRTL() ? chevronRight : chevronLeft }\r\n\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t/>\r\n\t\t\t) }\r\n\t\t\t<BlockIcon icon={ icon } showColors />\r\n\t\t\t<div className=\"block-editor-block-card__content\">\r\n\t\t\t\t<h2 className=\"block-editor-block-card__title\">{ title }</h2>\r\n\t\t\t\t{ description && (\r\n\t\t\t\t\t<span className=\"block-editor-block-card__description\">\r\n\t\t\t\t\t\t{ description }\r\n\t\t\t\t\t</span>\r\n\t\t\t\t) }\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default BlockCard;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useState, useEffect } from '@wordpress/element';\r\nimport {\r\n\twithRegistry,\r\n\tcreateRegistry,\r\n\tRegistryProvider,\r\n} from '@wordpress/data';\r\nimport { createHigherOrderComponent } from '@wordpress/compose';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { storeConfig } from '../../store';\r\nimport { STORE_NAME as blockEditorStoreName } from '../../store/constants';\r\n\r\nconst withRegistryProvider = createHigherOrderComponent(\r\n\t( WrappedComponent ) => {\r\n\t\treturn withRegistry(\r\n\t\t\t( { useSubRegistry = true, registry, ...props } ) => {\r\n\t\t\t\tif ( ! useSubRegistry ) {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<WrappedComponent registry={ registry } { ...props } />\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst [ subRegistry, setSubRegistry ] = useState( null );\r\n\t\t\t\tuseEffect( () => {\r\n\t\t\t\t\tconst newRegistry = createRegistry( {}, registry );\r\n\t\t\t\t\tnewRegistry.registerStore(\r\n\t\t\t\t\t\tblockEditorStoreName,\r\n\t\t\t\t\t\tstoreConfig\r\n\t\t\t\t\t);\r\n\t\t\t\t\tsetSubRegistry( newRegistry );\r\n\t\t\t\t}, [ registry ] );\r\n\r\n\t\t\t\tif ( ! subRegistry ) {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<RegistryProvider value={ subRegistry }>\r\n\t\t\t\t\t\t<WrappedComponent\r\n\t\t\t\t\t\t\tregistry={ subRegistry }\r\n\t\t\t\t\t\t\t{ ...props }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</RegistryProvider>\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t);\r\n\t},\r\n\t'withRegistryProvider'\r\n);\r\n\r\nexport default withRegistryProvider;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useEffect, useRef } from '@wordpress/element';\r\nimport { useRegistry, useSelect } from '@wordpress/data';\r\nimport { cloneBlock } from '@wordpress/blocks';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as blockEditorStore } from '../../store';\r\nimport { undoIgnoreBlocks } from '../../store/undo-ignore';\r\n\r\nconst noop = () => {};\r\n\r\n/**\r\n * A function to call when the block value has been updated in the block-editor\r\n * store.\r\n *\r\n * @callback onBlockUpdate\r\n * @param {Object[]} blocks  The updated blocks.\r\n * @param {Object}   options The updated block options, such as selectionStart\r\n *                           and selectionEnd.\r\n */\r\n\r\n/**\r\n * useBlockSync is a side effect which handles bidirectional sync between the\r\n * block-editor store and a controlling data source which provides blocks. This\r\n * is most commonly used by the BlockEditorProvider to synchronize the contents\r\n * of the block-editor store with the root entity, like a post.\r\n *\r\n * Another example would be the template part block, which provides blocks from\r\n * a separate entity data source than a root entity. This hook syncs edits to\r\n * the template part in the block editor back to the entity and vice-versa.\r\n *\r\n * Here are some of its basic functions:\r\n * - Initalizes the block-editor store for the given clientID to the blocks\r\n *   given via props.\r\n * - Adds incoming changes (like undo) to the block-editor store.\r\n * - Adds outgoing changes (like editing content) to the controlling entity,\r\n *   determining if a change should be considered persistent or not.\r\n * - Handles edge cases and race conditions which occur in those operations.\r\n * - Ignores changes which happen to other entities (like nested inner block\r\n *   controllers.\r\n * - Passes selection state from the block-editor store to the controlling entity.\r\n *\r\n * @param {Object}        props           Props for the block sync hook\r\n * @param {string}        props.clientId  The client ID of the inner block controller.\r\n *                                        If none is passed, then it is assumed to be a\r\n *                                        root controller rather than an inner block\r\n *                                        controller.\r\n * @param {Object[]}      props.value     The control value for the blocks. This value\r\n *                                        is used to initalize the block-editor store\r\n *                                        and for resetting the blocks to incoming\r\n *                                        changes like undo.\r\n * @param {Object}        props.selection The selection state responsible to restore the selection on undo/redo.\r\n * @param {onBlockUpdate} props.onChange  Function to call when a persistent\r\n *                                        change has been made in the block-editor blocks\r\n *                                        for the given clientId. For example, after\r\n *                                        this function is called, an entity is marked\r\n *                                        dirty because it has changes to save.\r\n * @param {onBlockUpdate} props.onInput   Function to call when a non-persistent\r\n *                                        change has been made in the block-editor blocks\r\n *                                        for the given clientId. When this is called,\r\n *                                        controlling sources do not become dirty.\r\n */\r\nexport default function useBlockSync( {\r\n\tclientId = null,\r\n\tvalue: controlledBlocks,\r\n\tselection: controlledSelection,\r\n\tonChange = noop,\r\n\tonInput = noop,\r\n} ) {\r\n\tconst registry = useRegistry();\r\n\r\n\tconst {\r\n\t\tresetBlocks,\r\n\t\tresetSelection,\r\n\t\treplaceInnerBlocks,\r\n\t\tsetHasControlledInnerBlocks,\r\n\t\t__unstableMarkNextChangeAsNotPersistent,\r\n\t} = registry.dispatch( blockEditorStore );\r\n\tconst { getBlockName, getBlocks, getSelectionStart, getSelectionEnd } =\r\n\t\tregistry.select( blockEditorStore );\r\n\tconst isControlled = useSelect(\r\n\t\t( select ) => {\r\n\t\t\treturn (\r\n\t\t\t\t! clientId ||\r\n\t\t\t\tselect( blockEditorStore ).areInnerBlocksControlled( clientId )\r\n\t\t\t);\r\n\t\t},\r\n\t\t[ clientId ]\r\n\t);\r\n\r\n\tconst pendingChanges = useRef( { incoming: null, outgoing: [] } );\r\n\tconst subscribed = useRef( false );\r\n\r\n\tconst setControlledBlocks = () => {\r\n\t\tif ( ! controlledBlocks ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// We don't need to persist this change because we only replace\r\n\t\t// controlled inner blocks when the change was caused by an entity,\r\n\t\t// and so it would already be persisted.\r\n\t\t__unstableMarkNextChangeAsNotPersistent();\r\n\t\tif ( clientId ) {\r\n\t\t\t// It is important to batch here because otherwise,\r\n\t\t\t// as soon as `setHasControlledInnerBlocks` is called\r\n\t\t\t// the effect to restore might be triggered\r\n\t\t\t// before the actual blocks get set properly in state.\r\n\t\t\tregistry.batch( () => {\r\n\t\t\t\tsetHasControlledInnerBlocks( clientId, true );\r\n\t\t\t\tconst storeBlocks = controlledBlocks.map( ( block ) =>\r\n\t\t\t\t\tcloneBlock( block )\r\n\t\t\t\t);\r\n\t\t\t\tif ( subscribed.current ) {\r\n\t\t\t\t\tpendingChanges.current.incoming = storeBlocks;\r\n\t\t\t\t}\r\n\t\t\t\t__unstableMarkNextChangeAsNotPersistent();\r\n\t\t\t\treplaceInnerBlocks( clientId, storeBlocks );\r\n\t\t\t} );\r\n\t\t} else {\r\n\t\t\tif ( subscribed.current ) {\r\n\t\t\t\tpendingChanges.current.incoming = controlledBlocks;\r\n\t\t\t}\r\n\t\t\tresetBlocks( controlledBlocks );\r\n\t\t}\r\n\t};\r\n\r\n\t// Clean up the changes made by setControlledBlocks() when the component\r\n\t// containing useBlockSync() unmounts.\r\n\tconst unsetControlledBlocks = () => {\r\n\t\t__unstableMarkNextChangeAsNotPersistent();\r\n\t\tif ( clientId ) {\r\n\t\t\tsetHasControlledInnerBlocks( clientId, false );\r\n\t\t\t__unstableMarkNextChangeAsNotPersistent();\r\n\t\t\treplaceInnerBlocks( clientId, [] );\r\n\t\t} else {\r\n\t\t\tresetBlocks( [] );\r\n\t\t}\r\n\t};\r\n\r\n\t// Add a subscription to the block-editor registry to detect when changes\r\n\t// have been made. This lets us inform the data source of changes. This\r\n\t// is an effect so that the subscriber can run synchronously without\r\n\t// waiting for React renders for changes.\r\n\tconst onInputRef = useRef( onInput );\r\n\tconst onChangeRef = useRef( onChange );\r\n\tuseEffect( () => {\r\n\t\tonInputRef.current = onInput;\r\n\t\tonChangeRef.current = onChange;\r\n\t}, [ onInput, onChange ] );\r\n\r\n\t// Determine if blocks need to be reset when they change.\r\n\tuseEffect( () => {\r\n\t\tif ( pendingChanges.current.outgoing.includes( controlledBlocks ) ) {\r\n\t\t\t// Skip block reset if the value matches expected outbound sync\r\n\t\t\t// triggered by this component by a preceding change detection.\r\n\t\t\t// Only skip if the value matches expectation, since a reset should\r\n\t\t\t// still occur if the value is modified (not equal by reference),\r\n\t\t\t// to allow that the consumer may apply modifications to reflect\r\n\t\t\t// back on the editor.\r\n\t\t\tif (\r\n\t\t\t\tpendingChanges.current.outgoing[\r\n\t\t\t\t\tpendingChanges.current.outgoing.length - 1\r\n\t\t\t\t] === controlledBlocks\r\n\t\t\t) {\r\n\t\t\t\tpendingChanges.current.outgoing = [];\r\n\t\t\t}\r\n\t\t} else if ( getBlocks( clientId ) !== controlledBlocks ) {\r\n\t\t\t// Reset changing value in all other cases than the sync described\r\n\t\t\t// above. Since this can be reached in an update following an out-\r\n\t\t\t// bound sync, unset the outbound value to avoid considering it in\r\n\t\t\t// subsequent renders.\r\n\t\t\tpendingChanges.current.outgoing = [];\r\n\t\t\tsetControlledBlocks();\r\n\r\n\t\t\tif ( controlledSelection ) {\r\n\t\t\t\tresetSelection(\r\n\t\t\t\t\tcontrolledSelection.selectionStart,\r\n\t\t\t\t\tcontrolledSelection.selectionEnd,\r\n\t\t\t\t\tcontrolledSelection.initialPosition\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\t}, [ controlledBlocks, clientId ] );\r\n\r\n\tuseEffect( () => {\r\n\t\t// When the block becomes uncontrolled, it means its inner state has been reset\r\n\t\t// we need to take the blocks again from the external value property.\r\n\t\tif ( ! isControlled ) {\r\n\t\t\tpendingChanges.current.outgoing = [];\r\n\t\t\tsetControlledBlocks();\r\n\t\t}\r\n\t}, [ isControlled ] );\r\n\r\n\tuseEffect( () => {\r\n\t\tconst {\r\n\t\t\tgetSelectedBlocksInitialCaretPosition,\r\n\t\t\tisLastBlockChangePersistent,\r\n\t\t\t__unstableIsLastBlockChangeIgnored,\r\n\t\t\tareInnerBlocksControlled,\r\n\t\t} = registry.select( blockEditorStore );\r\n\r\n\t\tlet blocks = getBlocks( clientId );\r\n\t\tlet isPersistent = isLastBlockChangePersistent();\r\n\t\tlet previousAreBlocksDifferent = false;\r\n\r\n\t\tsubscribed.current = true;\r\n\t\tconst unsubscribe = registry.subscribe( () => {\r\n\t\t\t// Sometimes, when changing block lists, lingering subscriptions\r\n\t\t\t// might trigger before they are cleaned up. If the block for which\r\n\t\t\t// the subscription runs is no longer in the store, this would clear\r\n\t\t\t// its parent entity's block list. To avoid this, we bail out if\r\n\t\t\t// the subscription is triggering for a block (`clientId !== null`)\r\n\t\t\t// and its block name can't be found because it's not on the list.\r\n\t\t\t// (`getBlockName( clientId ) === null`).\r\n\t\t\tif ( clientId !== null && getBlockName( clientId ) === null )\r\n\t\t\t\treturn;\r\n\r\n\t\t\t// When RESET_BLOCKS on parent blocks get called, the controlled blocks\r\n\t\t\t// can reset to uncontrolled, in these situations, it means we need to populate\r\n\t\t\t// the blocks again from the external blocks (the value property here)\r\n\t\t\t// and we should stop triggering onChange\r\n\t\t\tconst isStillControlled =\r\n\t\t\t\t! clientId || areInnerBlocksControlled( clientId );\r\n\t\t\tif ( ! isStillControlled ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst newIsPersistent = isLastBlockChangePersistent();\r\n\t\t\tconst newBlocks = getBlocks( clientId );\r\n\t\t\tconst areBlocksDifferent = newBlocks !== blocks;\r\n\t\t\tblocks = newBlocks;\r\n\t\t\tif (\r\n\t\t\t\tareBlocksDifferent &&\r\n\t\t\t\t( pendingChanges.current.incoming ||\r\n\t\t\t\t\t__unstableIsLastBlockChangeIgnored() )\r\n\t\t\t) {\r\n\t\t\t\tpendingChanges.current.incoming = null;\r\n\t\t\t\tisPersistent = newIsPersistent;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// Since we often dispatch an action to mark the previous action as\r\n\t\t\t// persistent, we need to make sure that the blocks changed on the\r\n\t\t\t// previous action before committing the change.\r\n\t\t\tconst didPersistenceChange =\r\n\t\t\t\tpreviousAreBlocksDifferent &&\r\n\t\t\t\t! areBlocksDifferent &&\r\n\t\t\t\tnewIsPersistent &&\r\n\t\t\t\t! isPersistent;\r\n\r\n\t\t\tif ( areBlocksDifferent || didPersistenceChange ) {\r\n\t\t\t\tisPersistent = newIsPersistent;\r\n\t\t\t\t// We know that onChange/onInput will update controlledBlocks.\r\n\t\t\t\t// We need to be aware that it was caused by an outgoing change\r\n\t\t\t\t// so that we do not treat it as an incoming change later on,\r\n\t\t\t\t// which would cause a block reset.\r\n\t\t\t\tpendingChanges.current.outgoing.push( blocks );\r\n\r\n\t\t\t\t// Inform the controlling entity that changes have been made to\r\n\t\t\t\t// the block-editor store they should be aware about.\r\n\t\t\t\tconst updateParent = isPersistent\r\n\t\t\t\t\t? onChangeRef.current\r\n\t\t\t\t\t: onInputRef.current;\r\n\t\t\t\tconst undoIgnore = undoIgnoreBlocks.has( blocks );\r\n\t\t\t\tif ( undoIgnore ) {\r\n\t\t\t\t\tundoIgnoreBlocks.delete( blocks );\r\n\t\t\t\t}\r\n\t\t\t\tupdateParent( blocks, {\r\n\t\t\t\t\tselection: {\r\n\t\t\t\t\t\tselectionStart: getSelectionStart(),\r\n\t\t\t\t\t\tselectionEnd: getSelectionEnd(),\r\n\t\t\t\t\t\tinitialPosition:\r\n\t\t\t\t\t\t\tgetSelectedBlocksInitialCaretPosition(),\r\n\t\t\t\t\t},\r\n\t\t\t\t\tundoIgnore,\r\n\t\t\t\t} );\r\n\t\t\t}\r\n\t\t\tpreviousAreBlocksDifferent = areBlocksDifferent;\r\n\t\t}, blockEditorStore );\r\n\r\n\t\treturn () => {\r\n\t\t\tsubscribed.current = false;\r\n\t\t\tunsubscribe();\r\n\t\t};\r\n\t}, [ registry, clientId ] );\r\n\r\n\tuseEffect( () => {\r\n\t\treturn () => {\r\n\t\t\tunsetControlledBlocks();\r\n\t\t};\r\n\t}, [] );\r\n}\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"keyboardShortcuts\"];","/**\n * WordPress dependencies\n */\nimport { useEffect } from '@wordpress/element';\nimport { useDispatch } from '@wordpress/data';\nimport { store as keyboardShortcutsStore } from '@wordpress/keyboard-shortcuts';\nimport { __ } from '@wordpress/i18n';\n\nfunction KeyboardShortcuts() {\n\treturn null;\n}\n\nfunction KeyboardShortcutsRegister() {\n\t// Registering the shortcuts.\n\tconst { registerShortcut } = useDispatch( keyboardShortcutsStore );\n\tuseEffect( () => {\n\t\tregisterShortcut( {\n\t\t\tname: 'core/block-editor/duplicate',\n\t\t\tcategory: 'block',\n\t\t\tdescription: __( 'Duplicate the selected block(s).' ),\n\t\t\tkeyCombination: {\n\t\t\t\tmodifier: 'primaryShift',\n\t\t\t\tcharacter: 'd',\n\t\t\t},\n\t\t} );\n\n\t\tregisterShortcut( {\n\t\t\tname: 'core/block-editor/remove',\n\t\t\tcategory: 'block',\n\t\t\tdescription: __( 'Remove the selected block(s).' ),\n\t\t\tkeyCombination: {\n\t\t\t\tmodifier: 'access',\n\t\t\t\tcharacter: 'z',\n\t\t\t},\n\t\t} );\n\n\t\tregisterShortcut( {\n\t\t\tname: 'core/block-editor/insert-before',\n\t\t\tcategory: 'block',\n\t\t\tdescription: __(\n\t\t\t\t'Insert a new block before the selected block(s).'\n\t\t\t),\n\t\t\tkeyCombination: {\n\t\t\t\tmodifier: 'primaryAlt',\n\t\t\t\tcharacter: 't',\n\t\t\t},\n\t\t} );\n\n\t\tregisterShortcut( {\n\t\t\tname: 'core/block-editor/insert-after',\n\t\t\tcategory: 'block',\n\t\t\tdescription: __(\n\t\t\t\t'Insert a new block after the selected block(s).'\n\t\t\t),\n\t\t\tkeyCombination: {\n\t\t\t\tmodifier: 'primaryAlt',\n\t\t\t\tcharacter: 'y',\n\t\t\t},\n\t\t} );\n\n\t\tregisterShortcut( {\n\t\t\tname: 'core/block-editor/delete-multi-selection',\n\t\t\tcategory: 'block',\n\t\t\tdescription: __( 'Delete selection.' ),\n\t\t\tkeyCombination: {\n\t\t\t\tcharacter: 'del',\n\t\t\t},\n\t\t\taliases: [\n\t\t\t\t{\n\t\t\t\t\tcharacter: 'backspace',\n\t\t\t\t},\n\t\t\t],\n\t\t} );\n\n\t\tregisterShortcut( {\n\t\t\tname: 'core/block-editor/select-all',\n\t\t\tcategory: 'selection',\n\t\t\tdescription: __(\n\t\t\t\t'Select all text when typing. Press again to select all blocks.'\n\t\t\t),\n\t\t\tkeyCombination: {\n\t\t\t\tmodifier: 'primary',\n\t\t\t\tcharacter: 'a',\n\t\t\t},\n\t\t} );\n\n\t\tregisterShortcut( {\n\t\t\tname: 'core/block-editor/unselect',\n\t\t\tcategory: 'selection',\n\t\t\tdescription: __( 'Clear selection.' ),\n\t\t\tkeyCombination: {\n\t\t\t\tcharacter: 'escape',\n\t\t\t},\n\t\t} );\n\n\t\tregisterShortcut( {\n\t\t\tname: 'core/block-editor/multi-text-selection',\n\t\t\tcategory: 'selection',\n\t\t\tdescription: __( 'Select text across multiple blocks.' ),\n\t\t\tkeyCombination: {\n\t\t\t\tmodifier: 'shift',\n\t\t\t\tcharacter: 'arrow',\n\t\t\t},\n\t\t} );\n\n\t\tregisterShortcut( {\n\t\t\tname: 'core/block-editor/focus-toolbar',\n\t\t\tcategory: 'global',\n\t\t\tdescription: __( 'Navigate to the nearest toolbar.' ),\n\t\t\tkeyCombination: {\n\t\t\t\tmodifier: 'alt',\n\t\t\t\tcharacter: 'F10',\n\t\t\t},\n\t\t} );\n\n\t\tregisterShortcut( {\n\t\t\tname: 'core/block-editor/move-up',\n\t\t\tcategory: 'block',\n\t\t\tdescription: __( 'Move the selected block(s) up.' ),\n\t\t\tkeyCombination: {\n\t\t\t\tmodifier: 'secondary',\n\t\t\t\tcharacter: 't',\n\t\t\t},\n\t\t} );\n\n\t\tregisterShortcut( {\n\t\t\tname: 'core/block-editor/move-down',\n\t\t\tcategory: 'block',\n\t\t\tdescription: __( 'Move the selected block(s) down.' ),\n\t\t\tkeyCombination: {\n\t\t\t\tmodifier: 'secondary',\n\t\t\t\tcharacter: 'y',\n\t\t\t},\n\t\t} );\n\n\t\t// List view shortcuts.\n\t\tregisterShortcut( {\n\t\t\tname: 'core/block-editor/collapse-list-view',\n\t\t\tcategory: 'list-view',\n\t\t\tdescription: __( 'Collapse all other items.' ),\n\t\t\tkeyCombination: {\n\t\t\t\tmodifier: 'alt',\n\t\t\t\tcharacter: 'l',\n\t\t\t},\n\t\t} );\n\t}, [ registerShortcut ] );\n\n\treturn null;\n}\n\nKeyboardShortcuts.Register = KeyboardShortcutsRegister;\n\nexport default KeyboardShortcuts;\n","/**\n * WordPress dependencies\n */\nimport { useDispatch } from '@wordpress/data';\nimport { useEffect } from '@wordpress/element';\nimport { SlotFillProvider } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport withRegistryProvider from './with-registry-provider';\nimport useBlockSync from './use-block-sync';\nimport { store as blockEditorStore } from '../../store';\nimport { BlockRefsProvider } from './block-refs-provider';\nimport { unlock } from '../../lock-unlock';\nimport KeyboardShortcuts from '../keyboard-shortcuts';\n\n/** @typedef {import('@wordpress/data').WPDataRegistry} WPDataRegistry */\n\nexport const ExperimentalBlockEditorProvider = withRegistryProvider(\n\t( props ) => {\n\t\tconst { children, settings, stripExperimentalSettings = false } = props;\n\n\t\tconst { __experimentalUpdateSettings } = unlock(\n\t\t\tuseDispatch( blockEditorStore )\n\t\t);\n\t\tuseEffect( () => {\n\t\t\t__experimentalUpdateSettings(\n\t\t\t\t{\n\t\t\t\t\t...settings,\n\t\t\t\t\t__internalIsInitialized: true,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tstripExperimentalSettings,\n\t\t\t\t\treset: true,\n\t\t\t\t}\n\t\t\t);\n\t\t}, [\n\t\t\tsettings,\n\t\t\tstripExperimentalSettings,\n\t\t\t__experimentalUpdateSettings,\n\t\t] );\n\n\t\t// Syncs the entity provider with changes in the block-editor store.\n\t\tuseBlockSync( props );\n\n\t\treturn (\n\t\t\t<SlotFillProvider passthrough>\n\t\t\t\t{ ! settings?.__unstableIsPreviewMode && (\n\t\t\t\t\t<KeyboardShortcuts.Register />\n\t\t\t\t) }\n\t\t\t\t<BlockRefsProvider>{ children }</BlockRefsProvider>\n\t\t\t</SlotFillProvider>\n\t\t);\n\t}\n);\n\nexport const BlockEditorProvider = ( props ) => {\n\treturn (\n\t\t<ExperimentalBlockEditorProvider { ...props } stripExperimentalSettings>\n\t\t\t{ props.children }\n\t\t</ExperimentalBlockEditorProvider>\n\t);\n};\n\nexport default BlockEditorProvider;\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useSelect, useDispatch } from '@wordpress/data';\r\nimport { useRefEffect } from '@wordpress/compose';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as blockEditorStore } from '../../store';\r\n\r\n/**\r\n * Pass the returned ref callback to an element that should clear block\r\n * selection. Selection will only be cleared if the element is clicked directly,\r\n * not if a child element is clicked.\r\n *\r\n * @return {import('react').RefCallback} Ref callback.\r\n */\r\nexport function useBlockSelectionClearer() {\r\n\tconst { getSettings, hasSelectedBlock, hasMultiSelection } =\r\n\t\tuseSelect( blockEditorStore );\r\n\tconst { clearSelectedBlock } = useDispatch( blockEditorStore );\r\n\tconst { clearBlockSelection: isEnabled } = getSettings();\r\n\r\n\treturn useRefEffect(\r\n\t\t( node ) => {\r\n\t\t\tif ( ! isEnabled ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tfunction onMouseDown( event ) {\r\n\t\t\t\tif ( ! hasSelectedBlock() && ! hasMultiSelection() ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Only handle clicks on the element, not the children.\r\n\t\t\t\tif ( event.target !== node ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tclearSelectedBlock();\r\n\t\t\t}\r\n\r\n\t\t\tnode.addEventListener( 'mousedown', onMouseDown );\r\n\r\n\t\t\treturn () => {\r\n\t\t\t\tnode.removeEventListener( 'mousedown', onMouseDown );\r\n\t\t\t};\r\n\t\t},\r\n\t\t[ hasSelectedBlock, hasMultiSelection, clearSelectedBlock, isEnabled ]\r\n\t);\r\n}\r\n\r\nexport default function BlockSelectionClearer( props ) {\r\n\treturn <div ref={ useBlockSelectionClearer() } { ...props } />;\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useRefEffect } from '@wordpress/compose';\r\nimport { useSelect } from '@wordpress/data';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as blockEditorStore } from '../../store';\r\n\r\nfunction selector( select ) {\r\n\tconst {\r\n\t\tisMultiSelecting,\r\n\t\tgetMultiSelectedBlockClientIds,\r\n\t\thasMultiSelection,\r\n\t\tgetSelectedBlockClientId,\r\n\t\tgetSelectedBlocksInitialCaretPosition,\r\n\t\t__unstableIsFullySelected,\r\n\t} = select( blockEditorStore );\r\n\r\n\treturn {\r\n\t\tisMultiSelecting: isMultiSelecting(),\r\n\t\tmultiSelectedBlockClientIds: getMultiSelectedBlockClientIds(),\r\n\t\thasMultiSelection: hasMultiSelection(),\r\n\t\tselectedBlockClientId: getSelectedBlockClientId(),\r\n\t\tinitialPosition: getSelectedBlocksInitialCaretPosition(),\r\n\t\tisFullSelection: __unstableIsFullySelected(),\r\n\t};\r\n}\r\n\r\nexport default function useMultiSelection() {\r\n\tconst {\r\n\t\tinitialPosition,\r\n\t\tisMultiSelecting,\r\n\t\tmultiSelectedBlockClientIds,\r\n\t\thasMultiSelection,\r\n\t\tselectedBlockClientId,\r\n\t\tisFullSelection,\r\n\t} = useSelect( selector, [] );\r\n\r\n\t/**\r\n\t * When the component updates, and there is multi selection, we need to\r\n\t * select the entire block contents.\r\n\t */\r\n\treturn useRefEffect(\r\n\t\t( node ) => {\r\n\t\t\tconst { ownerDocument } = node;\r\n\t\t\tconst { defaultView } = ownerDocument;\r\n\r\n\t\t\t// Allow initialPosition to bypass focus behavior. This is useful\r\n\t\t\t// for the list view or other areas where we don't want to transfer\r\n\t\t\t// focus to the editor canvas.\r\n\t\t\tif ( initialPosition === undefined || initialPosition === null ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif ( ! hasMultiSelection || isMultiSelecting ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst { length } = multiSelectedBlockClientIds;\r\n\r\n\t\t\tif ( length < 2 ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif ( ! isFullSelection ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// Allow cross contentEditable selection by temporarily making\r\n\t\t\t// all content editable. We can't rely on using the store and\r\n\t\t\t// React because re-rending happens too slowly. We need to be\r\n\t\t\t// able to select across instances immediately.\r\n\t\t\tnode.contentEditable = true;\r\n\r\n\t\t\t// For some browsers, like Safari, it is important that focus\r\n\t\t\t// happens BEFORE selection removal.\r\n\t\t\tnode.focus();\r\n\r\n\t\t\tdefaultView.getSelection().removeAllRanges();\r\n\t\t},\r\n\t\t[\r\n\t\t\thasMultiSelection,\r\n\t\t\tisMultiSelecting,\r\n\t\t\tmultiSelectedBlockClientIds,\r\n\t\t\tselectedBlockClientId,\r\n\t\t\tinitialPosition,\r\n\t\t\tisFullSelection,\r\n\t\t]\r\n\t);\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\tcomputeCaretRect,\r\n\tfocus,\r\n\tisHorizontalEdge,\r\n\tisVerticalEdge,\r\n\tplaceCaretAtHorizontalEdge,\r\n\tplaceCaretAtVerticalEdge,\r\n\tisRTL,\r\n} from '@wordpress/dom';\r\nimport { UP, DOWN, LEFT, RIGHT } from '@wordpress/keycodes';\r\nimport { useDispatch, useSelect } from '@wordpress/data';\r\nimport { useRefEffect } from '@wordpress/compose';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { getBlockClientId, isInSameBlock } from '../../utils/dom';\r\nimport { store as blockEditorStore } from '../../store';\r\n\r\n/**\r\n * Returns true if the element should consider edge navigation upon a keyboard\r\n * event of the given directional key code, or false otherwise.\r\n *\r\n * @param {Element} element     HTML element to test.\r\n * @param {number}  keyCode     KeyboardEvent keyCode to test.\r\n * @param {boolean} hasModifier Whether a modifier is pressed.\r\n *\r\n * @return {boolean} Whether element should consider edge navigation.\r\n */\r\nexport function isNavigationCandidate( element, keyCode, hasModifier ) {\r\n\tconst isVertical = keyCode === UP || keyCode === DOWN;\r\n\tconst { tagName } = element;\r\n\tconst elementType = element.getAttribute( 'type' );\r\n\r\n\t// Native inputs should not navigate vertically, unless they are simple types that don't need up/down arrow keys.\r\n\tif ( isVertical && ! hasModifier ) {\r\n\t\tif ( tagName === 'INPUT' ) {\r\n\t\t\tconst verticalInputTypes = [\r\n\t\t\t\t'date',\r\n\t\t\t\t'datetime-local',\r\n\t\t\t\t'month',\r\n\t\t\t\t'number',\r\n\t\t\t\t'range',\r\n\t\t\t\t'time',\r\n\t\t\t\t'week',\r\n\t\t\t];\r\n\t\t\treturn ! verticalInputTypes.includes( elementType );\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\t// Native inputs should not navigate horizontally, unless they are simple types that don't need left/right arrow keys.\r\n\tif ( tagName === 'INPUT' ) {\r\n\t\tconst simpleInputTypes = [\r\n\t\t\t'button',\r\n\t\t\t'checkbox',\r\n\t\t\t'number',\r\n\t\t\t'color',\r\n\t\t\t'file',\r\n\t\t\t'image',\r\n\t\t\t'radio',\r\n\t\t\t'reset',\r\n\t\t\t'submit',\r\n\t\t];\r\n\t\treturn simpleInputTypes.includes( elementType );\r\n\t}\r\n\r\n\t// Native textareas should not navigate horizontally.\r\n\treturn tagName !== 'TEXTAREA';\r\n}\r\n\r\n/**\r\n * Returns the optimal tab target from the given focused element in the desired\r\n * direction. A preference is made toward text fields, falling back to the block\r\n * focus stop if no other candidates exist for the block.\r\n *\r\n * @param {Element} target           Currently focused text field.\r\n * @param {boolean} isReverse        True if considering as the first field.\r\n * @param {Element} containerElement Element containing all blocks.\r\n * @param {boolean} onlyVertical     Whether to only consider tabbable elements\r\n *                                   that are visually above or under the\r\n *                                   target.\r\n *\r\n * @return {?Element} Optimal tab target, if one exists.\r\n */\r\nexport function getClosestTabbable(\r\n\ttarget,\r\n\tisReverse,\r\n\tcontainerElement,\r\n\tonlyVertical\r\n) {\r\n\t// Since the current focus target is not guaranteed to be a text field, find\r\n\t// all focusables. Tabbability is considered later.\r\n\tlet focusableNodes = focus.focusable.find( containerElement );\r\n\r\n\tif ( isReverse ) {\r\n\t\tfocusableNodes.reverse();\r\n\t}\r\n\r\n\t// Consider as candidates those focusables after the current target. It's\r\n\t// assumed this can only be reached if the target is focusable (on its\r\n\t// keydown event), so no need to verify it exists in the set.\r\n\tfocusableNodes = focusableNodes.slice(\r\n\t\tfocusableNodes.indexOf( target ) + 1\r\n\t);\r\n\r\n\tlet targetRect;\r\n\r\n\tif ( onlyVertical ) {\r\n\t\ttargetRect = target.getBoundingClientRect();\r\n\t}\r\n\r\n\tfunction isTabCandidate( node ) {\r\n\t\tif ( node.closest( '[inert]' ) ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Skip if there's only one child that is content editable (and thus a\r\n\t\t// better candidate).\r\n\t\tif (\r\n\t\t\tnode.children.length === 1 &&\r\n\t\t\tisInSameBlock( node, node.firstElementChild ) &&\r\n\t\t\tnode.firstElementChild.getAttribute( 'contenteditable' ) === 'true'\r\n\t\t) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Not a candidate if the node is not tabbable.\r\n\t\tif ( ! focus.tabbable.isTabbableIndex( node ) ) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t// Skip focusable elements such as links within content editable nodes.\r\n\t\tif ( node.isContentEditable && node.contentEditable !== 'true' ) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif ( onlyVertical ) {\r\n\t\t\tconst nodeRect = node.getBoundingClientRect();\r\n\r\n\t\t\tif (\r\n\t\t\t\tnodeRect.left >= targetRect.right ||\r\n\t\t\t\tnodeRect.right <= targetRect.left\r\n\t\t\t) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\treturn focusableNodes.find( isTabCandidate );\r\n}\r\n\r\nexport default function useArrowNav() {\r\n\tconst {\r\n\t\tgetMultiSelectedBlocksStartClientId,\r\n\t\tgetMultiSelectedBlocksEndClientId,\r\n\t\tgetSettings,\r\n\t\thasMultiSelection,\r\n\t\t__unstableIsFullySelected,\r\n\t} = useSelect( blockEditorStore );\r\n\tconst { selectBlock } = useDispatch( blockEditorStore );\r\n\treturn useRefEffect( ( node ) => {\r\n\t\t// Here a DOMRect is stored while moving the caret vertically so\r\n\t\t// vertical position of the start position can be restored. This is to\r\n\t\t// recreate browser behaviour across blocks.\r\n\t\tlet verticalRect;\r\n\r\n\t\tfunction onMouseDown() {\r\n\t\t\tverticalRect = null;\r\n\t\t}\r\n\r\n\t\tfunction isClosestTabbableABlock( target, isReverse ) {\r\n\t\t\tconst closestTabbable = getClosestTabbable(\r\n\t\t\t\ttarget,\r\n\t\t\t\tisReverse,\r\n\t\t\t\tnode\r\n\t\t\t);\r\n\t\t\treturn closestTabbable && getBlockClientId( closestTabbable );\r\n\t\t}\r\n\r\n\t\tfunction onKeyDown( event ) {\r\n\t\t\t// Abort if navigation has already been handled (e.g. RichText\r\n\t\t\t// inline boundaries).\r\n\t\t\tif ( event.defaultPrevented ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst { keyCode, target, shiftKey, ctrlKey, altKey, metaKey } =\r\n\t\t\t\tevent;\r\n\t\t\tconst isUp = keyCode === UP;\r\n\t\t\tconst isDown = keyCode === DOWN;\r\n\t\t\tconst isLeft = keyCode === LEFT;\r\n\t\t\tconst isRight = keyCode === RIGHT;\r\n\t\t\tconst isReverse = isUp || isLeft;\r\n\t\t\tconst isHorizontal = isLeft || isRight;\r\n\t\t\tconst isVertical = isUp || isDown;\r\n\t\t\tconst isNav = isHorizontal || isVertical;\r\n\t\t\tconst hasModifier = shiftKey || ctrlKey || altKey || metaKey;\r\n\t\t\tconst isNavEdge = isVertical ? isVerticalEdge : isHorizontalEdge;\r\n\t\t\tconst { ownerDocument } = node;\r\n\t\t\tconst { defaultView } = ownerDocument;\r\n\r\n\t\t\tif ( ! isNav ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// If there is a multi-selection, the arrow keys should collapse the\r\n\t\t\t// selection to the start or end of the selection.\r\n\t\t\tif ( hasMultiSelection() ) {\r\n\t\t\t\tif ( shiftKey ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Only handle if we have a full selection (not a native partial\r\n\t\t\t\t// selection).\r\n\t\t\t\tif ( ! __unstableIsFullySelected() ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\tif ( isReverse ) {\r\n\t\t\t\t\tselectBlock( getMultiSelectedBlocksStartClientId() );\r\n\t\t\t\t} else {\r\n\t\t\t\t\tselectBlock( getMultiSelectedBlocksEndClientId(), -1 );\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// Abort if our current target is not a candidate for navigation\r\n\t\t\t// (e.g. preserve native input behaviors).\r\n\t\t\tif ( ! isNavigationCandidate( target, keyCode, hasModifier ) ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// When presing any key other than up or down, the initial vertical\r\n\t\t\t// position must ALWAYS be reset. The vertical position is saved so\r\n\t\t\t// it can be restored as well as possible on sebsequent vertical\r\n\t\t\t// arrow key presses. It may not always be possible to restore the\r\n\t\t\t// exact same position (such as at an empty line), so it wouldn't be\r\n\t\t\t// good to compute the position right before any vertical arrow key\r\n\t\t\t// press.\r\n\t\t\tif ( ! isVertical ) {\r\n\t\t\t\tverticalRect = null;\r\n\t\t\t} else if ( ! verticalRect ) {\r\n\t\t\t\tverticalRect = computeCaretRect( defaultView );\r\n\t\t\t}\r\n\r\n\t\t\t// In the case of RTL scripts, right means previous and left means\r\n\t\t\t// next, which is the exact reverse of LTR.\r\n\t\t\tconst isReverseDir = isRTL( target ) ? ! isReverse : isReverse;\r\n\t\t\tconst { keepCaretInsideBlock } = getSettings();\r\n\r\n\t\t\tif ( shiftKey ) {\r\n\t\t\t\tif (\r\n\t\t\t\t\tisClosestTabbableABlock( target, isReverse ) &&\r\n\t\t\t\t\tisNavEdge( target, isReverse )\r\n\t\t\t\t) {\r\n\t\t\t\t\tnode.contentEditable = true;\r\n\t\t\t\t\t// Firefox doesn't automatically move focus.\r\n\t\t\t\t\tnode.focus();\r\n\t\t\t\t}\r\n\t\t\t} else if (\r\n\t\t\t\tisVertical &&\r\n\t\t\t\tisVerticalEdge( target, isReverse ) &&\r\n\t\t\t\t// When Alt is pressed, only intercept if the caret is also at\r\n\t\t\t\t// the horizontal edge.\r\n\t\t\t\t( altKey ? isHorizontalEdge( target, isReverseDir ) : true ) &&\r\n\t\t\t\t! keepCaretInsideBlock\r\n\t\t\t) {\r\n\t\t\t\tconst closestTabbable = getClosestTabbable(\r\n\t\t\t\t\ttarget,\r\n\t\t\t\t\tisReverse,\r\n\t\t\t\t\tnode,\r\n\t\t\t\t\ttrue\r\n\t\t\t\t);\r\n\r\n\t\t\t\tif ( closestTabbable ) {\r\n\t\t\t\t\tplaceCaretAtVerticalEdge(\r\n\t\t\t\t\t\tclosestTabbable,\r\n\t\t\t\t\t\t// When Alt is pressed, place the caret at the furthest\r\n\t\t\t\t\t\t// horizontal edge and the furthest vertical edge.\r\n\t\t\t\t\t\taltKey ? ! isReverse : isReverse,\r\n\t\t\t\t\t\taltKey ? undefined : verticalRect\r\n\t\t\t\t\t);\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t}\r\n\t\t\t} else if (\r\n\t\t\t\tisHorizontal &&\r\n\t\t\t\tdefaultView.getSelection().isCollapsed &&\r\n\t\t\t\tisHorizontalEdge( target, isReverseDir ) &&\r\n\t\t\t\t! keepCaretInsideBlock\r\n\t\t\t) {\r\n\t\t\t\tconst closestTabbable = getClosestTabbable(\r\n\t\t\t\t\ttarget,\r\n\t\t\t\t\tisReverseDir,\r\n\t\t\t\t\tnode\r\n\t\t\t\t);\r\n\t\t\t\tplaceCaretAtHorizontalEdge( closestTabbable, isReverse );\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tnode.addEventListener( 'mousedown', onMouseDown );\r\n\t\tnode.addEventListener( 'keydown', onKeyDown );\r\n\t\treturn () => {\r\n\t\t\tnode.removeEventListener( 'mousedown', onMouseDown );\r\n\t\t\tnode.removeEventListener( 'keydown', onKeyDown );\r\n\t\t};\r\n\t}, [] );\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { isEntirelySelected } from '@wordpress/dom';\r\nimport { useSelect, useDispatch } from '@wordpress/data';\r\nimport { __unstableUseShortcutEventMatch as useShortcutEventMatch } from '@wordpress/keyboard-shortcuts';\r\nimport { useRefEffect } from '@wordpress/compose';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as blockEditorStore } from '../../store';\r\n\r\nexport default function useSelectAll() {\r\n\tconst { getBlockOrder, getSelectedBlockClientIds, getBlockRootClientId } =\r\n\t\tuseSelect( blockEditorStore );\r\n\tconst { multiSelect, selectBlock } = useDispatch( blockEditorStore );\r\n\tconst isMatch = useShortcutEventMatch();\r\n\r\n\treturn useRefEffect( ( node ) => {\r\n\t\tfunction onKeyDown( event ) {\r\n\t\t\tif ( ! isMatch( 'core/block-editor/select-all', event ) ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst selectedClientIds = getSelectedBlockClientIds();\r\n\r\n\t\t\tif (\r\n\t\t\t\tselectedClientIds.length < 2 &&\r\n\t\t\t\t! isEntirelySelected( event.target )\r\n\t\t\t) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tevent.preventDefault();\r\n\r\n\t\t\tconst [ firstSelectedClientId ] = selectedClientIds;\r\n\t\t\tconst rootClientId = getBlockRootClientId( firstSelectedClientId );\r\n\t\t\tconst blockClientIds = getBlockOrder( rootClientId );\r\n\r\n\t\t\t// If we have selected all sibling nested blocks, try selecting up a\r\n\t\t\t// level. See: https://github.com/WordPress/gutenberg/pull/31859/\r\n\t\t\tif ( selectedClientIds.length === blockClientIds.length ) {\r\n\t\t\t\tif ( rootClientId ) {\r\n\t\t\t\t\tnode.ownerDocument.defaultView\r\n\t\t\t\t\t\t.getSelection()\r\n\t\t\t\t\t\t.removeAllRanges();\r\n\t\t\t\t\tselectBlock( rootClientId );\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tmultiSelect(\r\n\t\t\t\tblockClientIds[ 0 ],\r\n\t\t\t\tblockClientIds[ blockClientIds.length - 1 ]\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tnode.addEventListener( 'keydown', onKeyDown );\r\n\r\n\t\treturn () => {\r\n\t\t\tnode.removeEventListener( 'keydown', onKeyDown );\r\n\t\t};\r\n\t}, [] );\r\n}\r\n","/**\n * WordPress dependencies\n */\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { useRefEffect } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\n/**\n * Sets the `contenteditable` wrapper element to `value`.\n *\n * @param {HTMLElement} node  Block element.\n * @param {boolean}     value `contentEditable` value (true or false)\n */\nfunction setContentEditableWrapper( node, value ) {\n\tnode.contentEditable = value;\n\t// Firefox doesn't automatically move focus.\n\tif ( value ) node.focus();\n}\n\n/**\n * Sets a multi-selection based on the native selection across blocks.\n */\nexport default function useDragSelection() {\n\tconst { startMultiSelect, stopMultiSelect } =\n\t\tuseDispatch( blockEditorStore );\n\tconst {\n\t\tisSelectionEnabled,\n\t\thasSelectedBlock,\n\t\tisDraggingBlocks,\n\t\tisMultiSelecting,\n\t} = useSelect( blockEditorStore );\n\treturn useRefEffect(\n\t\t( node ) => {\n\t\t\tconst { ownerDocument } = node;\n\t\t\tconst { defaultView } = ownerDocument;\n\n\t\t\tlet anchorElement;\n\t\t\tlet rafId;\n\n\t\t\tfunction onMouseUp() {\n\t\t\t\tstopMultiSelect();\n\t\t\t\t// Equivalent to attaching the listener once.\n\t\t\t\tdefaultView.removeEventListener( 'mouseup', onMouseUp );\n\t\t\t\t// The browser selection won't have updated yet at this point,\n\t\t\t\t// so wait until the next animation frame to get the browser\n\t\t\t\t// selection.\n\t\t\t\trafId = defaultView.requestAnimationFrame( () => {\n\t\t\t\t\tif ( ! hasSelectedBlock() ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// If the selection is complete (on mouse up), and no\n\t\t\t\t\t// multiple blocks have been selected, set focus back to the\n\t\t\t\t\t// anchor element. if the anchor element contains the\n\t\t\t\t\t// selection. Additionally, the contentEditable wrapper can\n\t\t\t\t\t// now be disabled again.\n\t\t\t\t\tsetContentEditableWrapper( node, false );\n\n\t\t\t\t\tconst selection = defaultView.getSelection();\n\n\t\t\t\t\tif ( selection.rangeCount ) {\n\t\t\t\t\t\tconst range = selection.getRangeAt( 0 );\n\t\t\t\t\t\tconst { commonAncestorContainer } = range;\n\t\t\t\t\t\tconst clonedRange = range.cloneRange();\n\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tanchorElement.contains( commonAncestorContainer )\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tanchorElement.focus();\n\t\t\t\t\t\t\tselection.removeAllRanges();\n\t\t\t\t\t\t\tselection.addRange( clonedRange );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\tfunction onMouseLeave( { buttons, target, relatedTarget } ) {\n\t\t\t\t// If we're moving into a child element, ignore. We're tracking\n\t\t\t\t// the mouse leaving the element to a parent, no a child.\n\t\t\t\tif ( target.contains( relatedTarget ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Avoid triggering a multi-selection if the user is already\n\t\t\t\t// dragging blocks.\n\t\t\t\tif ( isDraggingBlocks() ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// The primary button must be pressed to initiate selection.\n\t\t\t\t// See https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/buttons\n\t\t\t\tif ( buttons !== 1 ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Abort if we are already multi-selecting.\n\t\t\t\tif ( isMultiSelecting() ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Abort if selection is leaving writing flow.\n\t\t\t\tif ( node === target ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Check the attribute, not the contentEditable attribute. All\n\t\t\t\t// child elements of the content editable wrapper are editable\n\t\t\t\t// and return true for this property. We only want to start\n\t\t\t\t// multi selecting when the mouse leaves the wrapper.\n\t\t\t\tif ( target.getAttribute( 'contenteditable' ) !== 'true' ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( ! isSelectionEnabled() ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Do not rely on the active element because it may change after\n\t\t\t\t// the mouse leaves for the first time. See\n\t\t\t\t// https://github.com/WordPress/gutenberg/issues/48747.\n\t\t\t\tanchorElement = target;\n\n\t\t\t\tstartMultiSelect();\n\n\t\t\t\t// `onSelectionStart` is called after `mousedown` and\n\t\t\t\t// `mouseleave` (from a block). The selection ends when\n\t\t\t\t// `mouseup` happens anywhere in the window.\n\t\t\t\tdefaultView.addEventListener( 'mouseup', onMouseUp );\n\n\t\t\t\t// Allow cross contentEditable selection by temporarily making\n\t\t\t\t// all content editable. We can't rely on using the store and\n\t\t\t\t// React because re-rending happens too slowly. We need to be\n\t\t\t\t// able to select across instances immediately.\n\t\t\t\tsetContentEditableWrapper( node, true );\n\t\t\t}\n\n\t\t\tnode.addEventListener( 'mouseout', onMouseLeave );\n\n\t\t\treturn () => {\n\t\t\t\tnode.removeEventListener( 'mouseout', onMouseLeave );\n\t\t\t\tdefaultView.removeEventListener( 'mouseup', onMouseUp );\n\t\t\t\tdefaultView.cancelAnimationFrame( rafId );\n\t\t\t};\n\t\t},\n\t\t[\n\t\t\tstartMultiSelect,\n\t\t\tstopMultiSelect,\n\t\t\tisSelectionEnabled,\n\t\t\thasSelectedBlock,\n\t\t]\n\t);\n}\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useSelect, useDispatch } from '@wordpress/data';\r\nimport { useRefEffect } from '@wordpress/compose';\r\nimport { create } from '@wordpress/rich-text';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as blockEditorStore } from '../../store';\r\nimport { getBlockClientId } from '../../utils/dom';\r\n\r\n/**\r\n * Extract the selection start node from the selection. When the anchor node is\r\n * not a text node, the selection offset is the index of a child node.\r\n *\r\n * @param {Selection} selection The selection.\r\n *\r\n * @return {Element} The selection start node.\r\n */\r\nfunction extractSelectionStartNode( selection ) {\r\n\tconst { anchorNode, anchorOffset } = selection;\r\n\r\n\tif ( anchorNode.nodeType === anchorNode.TEXT_NODE ) {\r\n\t\treturn anchorNode;\r\n\t}\r\n\r\n\tif ( anchorOffset === 0 ) {\r\n\t\treturn anchorNode;\r\n\t}\r\n\r\n\treturn anchorNode.childNodes[ anchorOffset - 1 ];\r\n}\r\n\r\n/**\r\n * Extract the selection end node from the selection. When the focus node is not\r\n * a text node, the selection offset is the index of a child node. The selection\r\n * reaches up to but excluding that child node.\r\n *\r\n * @param {Selection} selection The selection.\r\n *\r\n * @return {Element} The selection start node.\r\n */\r\nfunction extractSelectionEndNode( selection ) {\r\n\tconst { focusNode, focusOffset } = selection;\r\n\r\n\tif ( focusNode.nodeType === focusNode.TEXT_NODE ) {\r\n\t\treturn focusNode;\r\n\t}\r\n\r\n\tif ( focusOffset === focusNode.childNodes.length ) {\r\n\t\treturn focusNode;\r\n\t}\r\n\r\n\treturn focusNode.childNodes[ focusOffset ];\r\n}\r\n\r\nfunction findDepth( a, b ) {\r\n\tlet depth = 0;\r\n\r\n\twhile ( a[ depth ] === b[ depth ] ) {\r\n\t\tdepth++;\r\n\t}\r\n\r\n\treturn depth;\r\n}\r\n\r\n/**\r\n * Sets the `contenteditable` wrapper element to `value`.\r\n *\r\n * @param {HTMLElement} node  Block element.\r\n * @param {boolean}     value `contentEditable` value (true or false)\r\n */\r\nfunction setContentEditableWrapper( node, value ) {\r\n\t// Since we are calling this on every selection change, check if the value\r\n\t// needs to be updated first because it trigger the browser to recalculate\r\n\t// style.\r\n\tif ( node.contentEditable !== String( value ) ) {\r\n\t\tnode.contentEditable = value;\r\n\r\n\t\t// Firefox doesn't automatically move focus.\r\n\t\tif ( value ) {\r\n\t\t\tnode.focus();\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction getRichTextElement( node ) {\r\n\tconst element =\r\n\t\tnode.nodeType === node.ELEMENT_NODE ? node : node.parentElement;\r\n\treturn element?.closest( '[data-wp-block-attribute-key]' );\r\n}\r\n\r\n/**\r\n * Sets a multi-selection based on the native selection across blocks.\r\n */\r\nexport default function useSelectionObserver() {\r\n\tconst { multiSelect, selectBlock, selectionChange } =\r\n\t\tuseDispatch( blockEditorStore );\r\n\tconst { getBlockParents, getBlockSelectionStart, isMultiSelecting } =\r\n\t\tuseSelect( blockEditorStore );\r\n\treturn useRefEffect(\r\n\t\t( node ) => {\r\n\t\t\tconst { ownerDocument } = node;\r\n\t\t\tconst { defaultView } = ownerDocument;\r\n\r\n\t\t\tfunction onSelectionChange( event ) {\r\n\t\t\t\tconst selection = defaultView.getSelection();\r\n\r\n\t\t\t\tif ( ! selection.rangeCount ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst startNode = extractSelectionStartNode( selection );\r\n\t\t\t\tconst endNode = extractSelectionEndNode( selection );\r\n\r\n\t\t\t\tif (\r\n\t\t\t\t\t! node.contains( startNode ) ||\r\n\t\t\t\t\t! node.contains( endNode )\r\n\t\t\t\t) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// If selection is collapsed and we haven't used `shift+click`,\r\n\t\t\t\t// end multi selection and disable the contentEditable wrapper.\r\n\t\t\t\t// We have to check about `shift+click` case because elements\r\n\t\t\t\t// that don't support text selection might be involved, and we might\r\n\t\t\t\t// update the clientIds to multi-select blocks.\r\n\t\t\t\t// For now we check if the event is a `mouse` event.\r\n\t\t\t\tconst isClickShift = event.shiftKey && event.type === 'mouseup';\r\n\t\t\t\tif ( selection.isCollapsed && ! isClickShift ) {\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\tnode.contentEditable === 'true' &&\r\n\t\t\t\t\t\t! isMultiSelecting()\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tsetContentEditableWrapper( node, false );\r\n\t\t\t\t\t\tlet element =\r\n\t\t\t\t\t\t\tstartNode.nodeType === startNode.ELEMENT_NODE\r\n\t\t\t\t\t\t\t\t? startNode\r\n\t\t\t\t\t\t\t\t: startNode.parentElement;\r\n\t\t\t\t\t\telement = element?.closest( '[contenteditable]' );\r\n\t\t\t\t\t\telement?.focus();\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet startClientId = getBlockClientId( startNode );\r\n\t\t\t\tlet endClientId = getBlockClientId( endNode );\r\n\r\n\t\t\t\t// If the selection has changed and we had pressed `shift+click`,\r\n\t\t\t\t// we need to check if in an element that doesn't support\r\n\t\t\t\t// text selection has been clicked.\r\n\t\t\t\tif ( isClickShift ) {\r\n\t\t\t\t\tconst selectedClientId = getBlockSelectionStart();\r\n\t\t\t\t\tconst clickedClientId = getBlockClientId( event.target );\r\n\t\t\t\t\t// `endClientId` is not defined if we end the selection by clicking a non-selectable block.\r\n\t\t\t\t\t// We need to check if there was already a selection with a non-selectable focusNode.\r\n\t\t\t\t\tconst focusNodeIsNonSelectable =\r\n\t\t\t\t\t\tclickedClientId !== endClientId;\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\t( startClientId === endClientId &&\r\n\t\t\t\t\t\t\tselection.isCollapsed ) ||\r\n\t\t\t\t\t\t! endClientId ||\r\n\t\t\t\t\t\tfocusNodeIsNonSelectable\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tendClientId = clickedClientId;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// Handle the case when we have a non-selectable block\r\n\t\t\t\t\t// selected and click another one.\r\n\t\t\t\t\tif ( startClientId !== selectedClientId ) {\r\n\t\t\t\t\t\tstartClientId = selectedClientId;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// If the selection did not involve a block, return.\r\n\t\t\t\tif (\r\n\t\t\t\t\tstartClientId === undefined &&\r\n\t\t\t\t\tendClientId === undefined\r\n\t\t\t\t) {\r\n\t\t\t\t\tsetContentEditableWrapper( node, false );\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst isSingularSelection = startClientId === endClientId;\r\n\t\t\t\tif ( isSingularSelection ) {\r\n\t\t\t\t\tif ( ! isMultiSelecting() ) {\r\n\t\t\t\t\t\tselectBlock( startClientId );\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tmultiSelect( startClientId, startClientId );\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst startPath = [\r\n\t\t\t\t\t\t...getBlockParents( startClientId ),\r\n\t\t\t\t\t\tstartClientId,\r\n\t\t\t\t\t];\r\n\t\t\t\t\tconst endPath = [\r\n\t\t\t\t\t\t...getBlockParents( endClientId ),\r\n\t\t\t\t\t\tendClientId,\r\n\t\t\t\t\t];\r\n\t\t\t\t\tconst depth = findDepth( startPath, endPath );\r\n\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\tstartPath[ depth ] !== startClientId ||\r\n\t\t\t\t\t\tendPath[ depth ] !== endClientId\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tmultiSelect( startPath[ depth ], endPath[ depth ] );\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconst richTextElementStart =\r\n\t\t\t\t\t\tgetRichTextElement( startNode );\r\n\t\t\t\t\tconst richTextElementEnd = getRichTextElement( endNode );\r\n\r\n\t\t\t\t\tif ( richTextElementStart && richTextElementEnd ) {\r\n\t\t\t\t\t\tconst range = selection.getRangeAt( 0 );\r\n\t\t\t\t\t\tconst richTextDataStart = create( {\r\n\t\t\t\t\t\t\telement: richTextElementStart,\r\n\t\t\t\t\t\t\trange,\r\n\t\t\t\t\t\t\t__unstableIsEditableTree: true,\r\n\t\t\t\t\t\t} );\r\n\t\t\t\t\t\tconst richTextDataEnd = create( {\r\n\t\t\t\t\t\t\telement: richTextElementEnd,\r\n\t\t\t\t\t\t\trange,\r\n\t\t\t\t\t\t\t__unstableIsEditableTree: true,\r\n\t\t\t\t\t\t} );\r\n\r\n\t\t\t\t\t\tconst startOffset =\r\n\t\t\t\t\t\t\trichTextDataStart.start ?? richTextDataStart.end;\r\n\t\t\t\t\t\tconst endOffset =\r\n\t\t\t\t\t\t\trichTextDataEnd.start ?? richTextDataEnd.end;\r\n\t\t\t\t\t\tselectionChange( {\r\n\t\t\t\t\t\t\tstart: {\r\n\t\t\t\t\t\t\t\tclientId: startClientId,\r\n\t\t\t\t\t\t\t\tattributeKey:\r\n\t\t\t\t\t\t\t\t\trichTextElementStart.dataset\r\n\t\t\t\t\t\t\t\t\t\t.wpBlockAttributeKey,\r\n\t\t\t\t\t\t\t\toffset: startOffset,\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tend: {\r\n\t\t\t\t\t\t\t\tclientId: endClientId,\r\n\t\t\t\t\t\t\t\tattributeKey:\r\n\t\t\t\t\t\t\t\t\trichTextElementEnd.dataset\r\n\t\t\t\t\t\t\t\t\t\t.wpBlockAttributeKey,\r\n\t\t\t\t\t\t\t\toffset: endOffset,\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t} );\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tmultiSelect( startClientId, endClientId );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\townerDocument.addEventListener(\r\n\t\t\t\t'selectionchange',\r\n\t\t\t\tonSelectionChange\r\n\t\t\t);\r\n\t\t\tdefaultView.addEventListener( 'mouseup', onSelectionChange );\r\n\t\t\treturn () => {\r\n\t\t\t\townerDocument.removeEventListener(\r\n\t\t\t\t\t'selectionchange',\r\n\t\t\t\t\tonSelectionChange\r\n\t\t\t\t);\r\n\t\t\t\tdefaultView.removeEventListener( 'mouseup', onSelectionChange );\r\n\t\t\t};\r\n\t\t},\r\n\t\t[ multiSelect, selectBlock, selectionChange, getBlockParents ]\r\n\t);\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useSelect, useDispatch } from '@wordpress/data';\r\nimport { useRefEffect } from '@wordpress/compose';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as blockEditorStore } from '../../store';\r\nimport { getBlockClientId } from '../../utils/dom';\r\n\r\nexport default function useClickSelection() {\r\n\tconst { selectBlock } = useDispatch( blockEditorStore );\r\n\tconst { isSelectionEnabled, getBlockSelectionStart, hasMultiSelection } =\r\n\t\tuseSelect( blockEditorStore );\r\n\treturn useRefEffect(\r\n\t\t( node ) => {\r\n\t\t\tfunction onMouseDown( event ) {\r\n\t\t\t\t// The main button.\r\n\t\t\t\t// https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/button\r\n\t\t\t\tif ( ! isSelectionEnabled() || event.button !== 0 ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst startClientId = getBlockSelectionStart();\r\n\t\t\t\tconst clickedClientId = getBlockClientId( event.target );\r\n\r\n\t\t\t\tif ( event.shiftKey ) {\r\n\t\t\t\t\tif ( startClientId !== clickedClientId ) {\r\n\t\t\t\t\t\tnode.contentEditable = true;\r\n\t\t\t\t\t\t// Firefox doesn't automatically move focus.\r\n\t\t\t\t\t\tnode.focus();\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if ( hasMultiSelection() ) {\r\n\t\t\t\t\t// Allow user to escape out of a multi-selection to a\r\n\t\t\t\t\t// singular selection of a block via click. This is handled\r\n\t\t\t\t\t// here since focus handling excludes blocks when there is\r\n\t\t\t\t\t// multiselection, as focus can be incurred by starting a\r\n\t\t\t\t\t// multiselection (focus moved to first block's multi-\r\n\t\t\t\t\t// controls).\r\n\t\t\t\t\tselectBlock( clickedClientId );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tnode.addEventListener( 'mousedown', onMouseDown );\r\n\r\n\t\t\treturn () => {\r\n\t\t\t\tnode.removeEventListener( 'mousedown', onMouseDown );\r\n\t\t\t};\r\n\t\t},\r\n\t\t[\r\n\t\t\tselectBlock,\r\n\t\t\tisSelectionEnabled,\r\n\t\t\tgetBlockSelectionStart,\r\n\t\t\thasMultiSelection,\r\n\t\t]\r\n\t);\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useSelect, useDispatch } from '@wordpress/data';\r\nimport { useRefEffect } from '@wordpress/compose';\r\nimport { ENTER, BACKSPACE, DELETE } from '@wordpress/keycodes';\r\nimport { createBlock, getDefaultBlockName } from '@wordpress/blocks';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as blockEditorStore } from '../../store';\r\n\r\n/**\r\n * Handles input for selections across blocks.\r\n */\r\nexport default function useInput() {\r\n\tconst {\r\n\t\t__unstableIsFullySelected,\r\n\t\tgetSelectedBlockClientIds,\r\n\t\t__unstableIsSelectionMergeable,\r\n\t\thasMultiSelection,\r\n\t} = useSelect( blockEditorStore );\r\n\tconst {\r\n\t\treplaceBlocks,\r\n\t\t__unstableSplitSelection,\r\n\t\tremoveBlocks,\r\n\t\t__unstableDeleteSelection,\r\n\t\t__unstableExpandSelection,\r\n\t} = useDispatch( blockEditorStore );\r\n\r\n\treturn useRefEffect( ( node ) => {\r\n\t\tfunction onBeforeInput( event ) {\r\n\t\t\t// If writing flow is editable, NEVER allow the browser to alter the\r\n\t\t\t// DOM. This will cause React errors (and the DOM should only be\r\n\t\t\t// altered in a controlled fashion).\r\n\t\t\tif ( node.contentEditable === 'true' ) {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction onKeyDown( event ) {\r\n\t\t\tif ( event.defaultPrevented ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif ( ! hasMultiSelection() ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif ( event.keyCode === ENTER ) {\r\n\t\t\t\tnode.contentEditable = false;\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tif ( __unstableIsFullySelected() ) {\r\n\t\t\t\t\treplaceBlocks(\r\n\t\t\t\t\t\tgetSelectedBlockClientIds(),\r\n\t\t\t\t\t\tcreateBlock( getDefaultBlockName() )\r\n\t\t\t\t\t);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t__unstableSplitSelection();\r\n\t\t\t\t}\r\n\t\t\t} else if (\r\n\t\t\t\tevent.keyCode === BACKSPACE ||\r\n\t\t\t\tevent.keyCode === DELETE\r\n\t\t\t) {\r\n\t\t\t\tnode.contentEditable = false;\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tif ( __unstableIsFullySelected() ) {\r\n\t\t\t\t\tremoveBlocks( getSelectedBlockClientIds() );\r\n\t\t\t\t} else if ( __unstableIsSelectionMergeable() ) {\r\n\t\t\t\t\t__unstableDeleteSelection( event.keyCode === DELETE );\r\n\t\t\t\t} else {\r\n\t\t\t\t\t__unstableExpandSelection();\r\n\t\t\t\t}\r\n\t\t\t} else if (\r\n\t\t\t\t// If key.length is longer than 1, it's a control key that doesn't\r\n\t\t\t\t// input anything.\r\n\t\t\t\tevent.key.length === 1 &&\r\n\t\t\t\t! ( event.metaKey || event.ctrlKey )\r\n\t\t\t) {\r\n\t\t\t\tnode.contentEditable = false;\r\n\t\t\t\tif ( __unstableIsSelectionMergeable() ) {\r\n\t\t\t\t\t__unstableDeleteSelection( event.keyCode === DELETE );\r\n\t\t\t\t} else {\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t// Safari does not stop default behaviour with either\r\n\t\t\t\t\t// event.preventDefault() or node.contentEditable = false, so\r\n\t\t\t\t\t// remove the selection to stop browser manipulation.\r\n\t\t\t\t\tnode.ownerDocument.defaultView\r\n\t\t\t\t\t\t.getSelection()\r\n\t\t\t\t\t\t.removeAllRanges();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction onCompositionStart( event ) {\r\n\t\t\tif ( ! hasMultiSelection() ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tnode.contentEditable = false;\r\n\r\n\t\t\tif ( __unstableIsSelectionMergeable() ) {\r\n\t\t\t\t__unstableDeleteSelection();\r\n\t\t\t} else {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\t// Safari does not stop default behaviour with either\r\n\t\t\t\t// event.preventDefault() or node.contentEditable = false, so\r\n\t\t\t\t// remove the selection to stop browser manipulation.\r\n\t\t\t\tnode.ownerDocument.defaultView.getSelection().removeAllRanges();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tnode.addEventListener( 'beforeinput', onBeforeInput );\r\n\t\tnode.addEventListener( 'keydown', onKeyDown );\r\n\t\tnode.addEventListener( 'compositionstart', onCompositionStart );\r\n\t\treturn () => {\r\n\t\t\tnode.removeEventListener( 'beforeinput', onBeforeInput );\r\n\t\t\tnode.removeEventListener( 'keydown', onKeyDown );\r\n\t\t\tnode.removeEventListener( 'compositionstart', onCompositionStart );\r\n\t\t};\r\n\t}, [] );\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useCallback } from '@wordpress/element';\r\nimport { store as blocksStore } from '@wordpress/blocks';\r\nimport { useDispatch, useSelect } from '@wordpress/data';\r\nimport { __, _n, sprintf } from '@wordpress/i18n';\r\nimport { store as noticesStore } from '@wordpress/notices';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as blockEditorStore } from '../store';\r\n\r\nexport function useNotifyCopy() {\r\n\tconst { getBlockName } = useSelect( blockEditorStore );\r\n\tconst { getBlockType } = useSelect( blocksStore );\r\n\tconst { createSuccessNotice } = useDispatch( noticesStore );\r\n\r\n\treturn useCallback( ( eventType, selectedBlockClientIds ) => {\r\n\t\tlet notice = '';\r\n\t\tif ( selectedBlockClientIds.length === 1 ) {\r\n\t\t\tconst clientId = selectedBlockClientIds[ 0 ];\r\n\t\t\tconst title = getBlockType( getBlockName( clientId ) )?.title;\r\n\t\t\tnotice =\r\n\t\t\t\teventType === 'copy'\r\n\t\t\t\t\t? sprintf(\r\n\t\t\t\t\t\t\t// Translators: Name of the block being copied, e.g. \"Paragraph\".\r\n\t\t\t\t\t\t\t__( 'Copied \"%s\" to clipboard.' ),\r\n\t\t\t\t\t\t\ttitle\r\n\t\t\t\t\t  )\r\n\t\t\t\t\t: sprintf(\r\n\t\t\t\t\t\t\t// Translators: Name of the block being cut, e.g. \"Paragraph\".\r\n\t\t\t\t\t\t\t__( 'Moved \"%s\" to clipboard.' ),\r\n\t\t\t\t\t\t\ttitle\r\n\t\t\t\t\t  );\r\n\t\t} else {\r\n\t\t\tnotice =\r\n\t\t\t\teventType === 'copy'\r\n\t\t\t\t\t? sprintf(\r\n\t\t\t\t\t\t\t// Translators: %d: Number of blocks being copied.\r\n\t\t\t\t\t\t\t_n(\r\n\t\t\t\t\t\t\t\t'Copied %d block to clipboard.',\r\n\t\t\t\t\t\t\t\t'Copied %d blocks to clipboard.',\r\n\t\t\t\t\t\t\t\tselectedBlockClientIds.length\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\tselectedBlockClientIds.length\r\n\t\t\t\t\t  )\r\n\t\t\t\t\t: sprintf(\r\n\t\t\t\t\t\t\t// Translators: %d: Number of blocks being cut.\r\n\t\t\t\t\t\t\t_n(\r\n\t\t\t\t\t\t\t\t'Moved %d block to clipboard.',\r\n\t\t\t\t\t\t\t\t'Moved %d blocks to clipboard.',\r\n\t\t\t\t\t\t\t\tselectedBlockClientIds.length\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\tselectedBlockClientIds.length\r\n\t\t\t\t\t  );\r\n\t\t}\r\n\t\tcreateSuccessNotice( notice, {\r\n\t\t\ttype: 'snackbar',\r\n\t\t} );\r\n\t}, [] );\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { getFilesFromDataTransfer } from '@wordpress/dom';\r\n\r\n/**\r\n * Normalizes a given string of HTML to remove the Windows-specific \"Fragment\"\r\n * comments and any preceding and trailing content.\r\n *\r\n * @param {string} html the html to be normalized\r\n * @return {string} the normalized html\r\n */\r\nfunction removeWindowsFragments( html ) {\r\n\tconst startStr = '<!--StartFragment-->';\r\n\tconst startIdx = html.indexOf( startStr );\r\n\tif ( startIdx > -1 ) {\r\n\t\thtml = html.substring( startIdx + startStr.length );\r\n\t} else {\r\n\t\t// No point looking for EndFragment\r\n\t\treturn html;\r\n\t}\r\n\r\n\tconst endStr = '<!--EndFragment-->';\r\n\tconst endIdx = html.indexOf( endStr );\r\n\tif ( endIdx > -1 ) {\r\n\t\thtml = html.substring( 0, endIdx );\r\n\t}\r\n\r\n\treturn html;\r\n}\r\n\r\n/**\r\n * Removes the charset meta tag inserted by Chromium.\r\n * See:\r\n * - https://github.com/WordPress/gutenberg/issues/33585\r\n * - https://bugs.chromium.org/p/chromium/issues/detail?id=1264616#c4\r\n *\r\n * @param {string} html the html to be stripped of the meta tag.\r\n * @return {string} the cleaned html\r\n */\r\nfunction removeCharsetMetaTag( html ) {\r\n\tconst metaTag = `<meta charset='utf-8'>`;\r\n\r\n\tif ( html.startsWith( metaTag ) ) {\r\n\t\treturn html.slice( metaTag.length );\r\n\t}\r\n\r\n\treturn html;\r\n}\r\n\r\nexport function getPasteEventData( { clipboardData } ) {\r\n\tlet plainText = '';\r\n\tlet html = '';\r\n\r\n\t// IE11 only supports `Text` as an argument for `getData` and will\r\n\t// otherwise throw an invalid argument error, so we try the standard\r\n\t// arguments first, then fallback to `Text` if they fail.\r\n\ttry {\r\n\t\tplainText = clipboardData.getData( 'text/plain' );\r\n\t\thtml = clipboardData.getData( 'text/html' );\r\n\t} catch ( error1 ) {\r\n\t\ttry {\r\n\t\t\thtml = clipboardData.getData( 'Text' );\r\n\t\t} catch ( error2 ) {\r\n\t\t\t// Some browsers like UC Browser paste plain text by default and\r\n\t\t\t// don't support clipboardData at all, so allow default\r\n\t\t\t// behaviour.\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\r\n\t// Remove Windows-specific metadata appended within copied HTML text.\r\n\thtml = removeWindowsFragments( html );\r\n\r\n\t// Strip meta tag.\r\n\thtml = removeCharsetMetaTag( html );\r\n\r\n\tconst files = getFilesFromDataTransfer( clipboardData );\r\n\r\n\tif ( files.length && ! shouldDismissPastedFiles( files, html ) ) {\r\n\t\treturn { files };\r\n\t}\r\n\r\n\treturn { html, plainText, files: [] };\r\n}\r\n\r\n/**\r\n * Given a collection of DataTransfer files and HTML and plain text strings,\r\n * determine whether the files are to be dismissed in favor of the HTML.\r\n *\r\n * Certain office-type programs, like Microsoft Word or Apple Numbers,\r\n * will, upon copy, generate a screenshot of the content being copied and\r\n * attach it to the clipboard alongside the actual rich text that the user\r\n * sought to copy. In those cases, we should let Gutenberg handle the rich text\r\n * content and not the screenshot, since this allows Gutenberg to insert\r\n * meaningful blocks, like paragraphs, lists or even tables.\r\n *\r\n * @param {File[]} files File objects obtained from a paste event\r\n * @param {string} html  HTML content obtained from a paste event\r\n * @return {boolean}     True if the files should be dismissed\r\n */\r\nexport function shouldDismissPastedFiles( files, html /*, plainText */ ) {\r\n\t// The question is only relevant when there is actual HTML content and when\r\n\t// there is exactly one image file.\r\n\tif (\r\n\t\thtml &&\r\n\t\tfiles?.length === 1 &&\r\n\t\tfiles[ 0 ].type.indexOf( 'image/' ) === 0\r\n\t) {\r\n\t\t// A single <img> tag found in the HTML source suggests that the\r\n\t\t// content being pasted revolves around an image. Sometimes there are\r\n\t\t// other elements found, like <figure>, but we assume that the user's\r\n\t\t// intention is to paste the actual image file.\r\n\t\tconst IMAGE_TAG = /<\\s*img\\b/gi;\r\n\t\tif ( html.match( IMAGE_TAG )?.length !== 1 ) return true;\r\n\r\n\t\t// Even when there is exactly one <img> tag in the HTML payload, we\r\n\t\t// choose to weed out local images, i.e. those whose source starts with\r\n\t\t// \"file://\". These payloads occur in specific configurations, such as\r\n\t\t// when copying an entire document from Microsoft Word, that contains\r\n\t\t// text and exactly one image, and pasting that content using Google\r\n\t\t// Chrome.\r\n\t\tconst IMG_WITH_LOCAL_SRC = /<\\s*img\\b[^>]*\\bsrc=\"file:\\/\\//i;\r\n\t\tif ( html.match( IMG_WITH_LOCAL_SRC ) ) return true;\r\n\t}\r\n\r\n\treturn false;\r\n}\r\n","/**\n * WordPress dependencies\n */\nimport { __unstableStripHTML as stripHTML } from '@wordpress/dom';\nimport {\n\tserialize,\n\tcreateBlock,\n\tpasteHandler,\n\tfindTransform,\n\tgetBlockTransforms,\n\tstore as blocksStore,\n} from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport { getPasteEventData } from '../../utils/pasting';\nimport { store as blockEditorStore } from '../../store';\n\nexport const requiresWrapperOnCopy = Symbol( 'requiresWrapperOnCopy' );\n\n/**\n * Sets the clipboard data for the provided blocks, with both HTML and plain\n * text representations.\n *\n * @param {ClipboardEvent} event    Clipboard event.\n * @param {WPBlock[]}      blocks   Blocks to set as clipboard data.\n * @param {Object}         registry The registry to select from.\n */\nexport function setClipboardBlocks( event, blocks, registry ) {\n\tlet _blocks = blocks;\n\n\tconst [ firstBlock ] = blocks;\n\n\tif ( firstBlock ) {\n\t\tconst firstBlockType = registry\n\t\t\t.select( blocksStore )\n\t\t\t.getBlockType( firstBlock.name );\n\n\t\tif ( firstBlockType[ requiresWrapperOnCopy ] ) {\n\t\t\tconst { getBlockRootClientId, getBlockName, getBlockAttributes } =\n\t\t\t\tregistry.select( blockEditorStore );\n\t\t\tconst wrapperBlockClientId = getBlockRootClientId(\n\t\t\t\tfirstBlock.clientId\n\t\t\t);\n\t\t\tconst wrapperBlockName = getBlockName( wrapperBlockClientId );\n\n\t\t\tif ( wrapperBlockName ) {\n\t\t\t\t_blocks = createBlock(\n\t\t\t\t\twrapperBlockName,\n\t\t\t\t\tgetBlockAttributes( wrapperBlockClientId ),\n\t\t\t\t\t_blocks\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tconst serialized = serialize( _blocks );\n\n\tevent.clipboardData.setData( 'text/plain', toPlainText( serialized ) );\n\tevent.clipboardData.setData( 'text/html', serialized );\n}\n\n/**\n * Returns the blocks to be pasted from the clipboard event.\n *\n * @param {ClipboardEvent} event                    The clipboard event.\n * @param {boolean}        canUserUseUnfilteredHTML Whether the user can or can't post unfiltered HTML.\n * @return {Array|string} A list of blocks or a string, depending on `handlerMode`.\n */\nexport function getPasteBlocks( event, canUserUseUnfilteredHTML ) {\n\tconst { plainText, html, files } = getPasteEventData( event );\n\tlet blocks = [];\n\n\tif ( files.length ) {\n\t\tconst fromTransforms = getBlockTransforms( 'from' );\n\t\tblocks = files\n\t\t\t.reduce( ( accumulator, file ) => {\n\t\t\t\tconst transformation = findTransform(\n\t\t\t\t\tfromTransforms,\n\t\t\t\t\t( transform ) =>\n\t\t\t\t\t\ttransform.type === 'files' &&\n\t\t\t\t\t\ttransform.isMatch( [ file ] )\n\t\t\t\t);\n\t\t\t\tif ( transformation ) {\n\t\t\t\t\taccumulator.push( transformation.transform( [ file ] ) );\n\t\t\t\t}\n\t\t\t\treturn accumulator;\n\t\t\t}, [] )\n\t\t\t.flat();\n\t} else {\n\t\tblocks = pasteHandler( {\n\t\t\tHTML: html,\n\t\t\tplainText,\n\t\t\tmode: 'BLOCKS',\n\t\t\tcanUserUseUnfilteredHTML,\n\t\t} );\n\t}\n\n\treturn blocks;\n}\n\n/**\n * Given a string of HTML representing serialized blocks, returns the plain\n * text extracted after stripping the HTML of any tags and fixing line breaks.\n *\n * @param {string} html Serialized blocks.\n * @return {string} The plain-text content with any html removed.\n */\nfunction toPlainText( html ) {\n\t// Manually handle BR tags as line breaks prior to `stripHTML` call\n\thtml = html.replace( /<br>/g, '\\n' );\n\n\tconst plainText = stripHTML( html ).trim();\n\n\t// Merge any consecutive line breaks\n\treturn plainText.replace( /\\n\\n+/g, '\\n\\n' );\n}\n","/**\n * WordPress dependencies\n */\nimport {\n\tdocumentHasSelection,\n\tdocumentHasUncollapsedSelection,\n} from '@wordpress/dom';\nimport { useDispatch, useRegistry, useSelect } from '@wordpress/data';\nimport { useRefEffect } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport { useNotifyCopy } from '../../utils/use-notify-copy';\nimport { getPasteBlocks, setClipboardBlocks } from './utils';\n\nexport default function useClipboardHandler() {\n\tconst registry = useRegistry();\n\tconst {\n\t\tgetBlocksByClientId,\n\t\tgetSelectedBlockClientIds,\n\t\thasMultiSelection,\n\t\tgetSettings,\n\t\t__unstableIsFullySelected,\n\t\t__unstableIsSelectionCollapsed,\n\t\t__unstableIsSelectionMergeable,\n\t\t__unstableGetSelectedBlocksWithPartialSelection,\n\t\tcanInsertBlockType,\n\t} = useSelect( blockEditorStore );\n\tconst {\n\t\tflashBlock,\n\t\tremoveBlocks,\n\t\treplaceBlocks,\n\t\t__unstableDeleteSelection,\n\t\t__unstableExpandSelection,\n\t\tinsertBlocks,\n\t} = useDispatch( blockEditorStore );\n\tconst notifyCopy = useNotifyCopy();\n\n\treturn useRefEffect( ( node ) => {\n\t\tfunction handler( event ) {\n\t\t\tif ( event.defaultPrevented ) {\n\t\t\t\t// This was likely already handled in rich-text/use-paste-handler.js.\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst selectedBlockClientIds = getSelectedBlockClientIds();\n\n\t\t\tif ( selectedBlockClientIds.length === 0 ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Always handle multiple selected blocks.\n\t\t\tif ( ! hasMultiSelection() ) {\n\t\t\t\tconst { target } = event;\n\t\t\t\tconst { ownerDocument } = target;\n\t\t\t\t// If copying, only consider actual text selection as selection.\n\t\t\t\t// Otherwise, any focus on an input field is considered.\n\t\t\t\tconst hasSelection =\n\t\t\t\t\tevent.type === 'copy' || event.type === 'cut'\n\t\t\t\t\t\t? documentHasUncollapsedSelection( ownerDocument )\n\t\t\t\t\t\t: documentHasSelection( ownerDocument );\n\n\t\t\t\t// Let native copy behaviour take over in input fields.\n\t\t\t\tif ( hasSelection ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( ! node.contains( event.target.ownerDocument.activeElement ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tevent.preventDefault();\n\n\t\t\tconst isSelectionMergeable = __unstableIsSelectionMergeable();\n\t\t\tconst shouldHandleWholeBlocks =\n\t\t\t\t__unstableIsSelectionCollapsed() || __unstableIsFullySelected();\n\t\t\tconst expandSelectionIsNeeded =\n\t\t\t\t! shouldHandleWholeBlocks && ! isSelectionMergeable;\n\t\t\tif ( event.type === 'copy' || event.type === 'cut' ) {\n\t\t\t\tif ( selectedBlockClientIds.length === 1 ) {\n\t\t\t\t\tflashBlock( selectedBlockClientIds[ 0 ] );\n\t\t\t\t}\n\t\t\t\t// If we have a partial selection that is not mergeable, just\n\t\t\t\t// expand the selection to the whole blocks.\n\t\t\t\tif ( expandSelectionIsNeeded ) {\n\t\t\t\t\t__unstableExpandSelection();\n\t\t\t\t} else {\n\t\t\t\t\tnotifyCopy( event.type, selectedBlockClientIds );\n\t\t\t\t\tlet blocks;\n\t\t\t\t\t// Check if we have partial selection.\n\t\t\t\t\tif ( shouldHandleWholeBlocks ) {\n\t\t\t\t\t\tblocks = getBlocksByClientId( selectedBlockClientIds );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst [ head, tail ] =\n\t\t\t\t\t\t\t__unstableGetSelectedBlocksWithPartialSelection();\n\t\t\t\t\t\tconst inBetweenBlocks = getBlocksByClientId(\n\t\t\t\t\t\t\tselectedBlockClientIds.slice(\n\t\t\t\t\t\t\t\t1,\n\t\t\t\t\t\t\t\tselectedBlockClientIds.length - 1\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\t\t\t\t\t\tblocks = [ head, ...inBetweenBlocks, tail ];\n\t\t\t\t\t}\n\n\t\t\t\t\tsetClipboardBlocks( event, blocks, registry );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( event.type === 'cut' ) {\n\t\t\t\t// We need to also check if at the start we needed to\n\t\t\t\t// expand the selection, as in this point we might have\n\t\t\t\t// programmatically fully selected the blocks above.\n\t\t\t\tif ( shouldHandleWholeBlocks && ! expandSelectionIsNeeded ) {\n\t\t\t\t\tremoveBlocks( selectedBlockClientIds );\n\t\t\t\t} else {\n\t\t\t\t\tevent.target.ownerDocument.activeElement.contentEditable = false;\n\t\t\t\t\t__unstableDeleteSelection();\n\t\t\t\t}\n\t\t\t} else if ( event.type === 'paste' ) {\n\t\t\t\tconst {\n\t\t\t\t\t__experimentalCanUserUseUnfilteredHTML:\n\t\t\t\t\t\tcanUserUseUnfilteredHTML,\n\t\t\t\t} = getSettings();\n\t\t\t\tconst blocks = getPasteBlocks(\n\t\t\t\t\tevent,\n\t\t\t\t\tcanUserUseUnfilteredHTML\n\t\t\t\t);\n\n\t\t\t\tif ( selectedBlockClientIds.length === 1 ) {\n\t\t\t\t\tconst [ selectedBlockClientId ] = selectedBlockClientIds;\n\n\t\t\t\t\tif (\n\t\t\t\t\t\tblocks.every( ( block ) =>\n\t\t\t\t\t\t\tcanInsertBlockType(\n\t\t\t\t\t\t\t\tblock.name,\n\t\t\t\t\t\t\t\tselectedBlockClientId\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t\t) {\n\t\t\t\t\t\tinsertBlocks(\n\t\t\t\t\t\t\tblocks,\n\t\t\t\t\t\t\tundefined,\n\t\t\t\t\t\t\tselectedBlockClientId\n\t\t\t\t\t\t);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treplaceBlocks(\n\t\t\t\t\tselectedBlockClientIds,\n\t\t\t\t\tblocks,\n\t\t\t\t\tblocks.length - 1,\n\t\t\t\t\t-1\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tnode.ownerDocument.addEventListener( 'copy', handler );\n\t\tnode.ownerDocument.addEventListener( 'cut', handler );\n\t\tnode.ownerDocument.addEventListener( 'paste', handler );\n\n\t\treturn () => {\n\t\t\tnode.ownerDocument.removeEventListener( 'copy', handler );\n\t\t\tnode.ownerDocument.removeEventListener( 'cut', handler );\n\t\t\tnode.ownerDocument.removeEventListener( 'paste', handler );\n\t\t};\n\t}, [] );\n}\n","/**\r\n * External dependencies\r\n */\r\nimport classNames from 'classnames';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { useSelect } from '@wordpress/data';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { useMergeRefs, useRefEffect } from '@wordpress/compose';\r\nimport { forwardRef } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport useMultiSelection from './use-multi-selection';\r\nimport useTabNav from './use-tab-nav';\r\nimport useArrowNav from './use-arrow-nav';\r\nimport useSelectAll from './use-select-all';\r\nimport useDragSelection from './use-drag-selection';\r\nimport useSelectionObserver from './use-selection-observer';\r\nimport useClickSelection from './use-click-selection';\r\nimport useInput from './use-input';\r\nimport useClipboardHandler from './use-clipboard-handler';\r\nimport { store as blockEditorStore } from '../../store';\r\n\r\nexport function useWritingFlow() {\r\n\tconst [ before, ref, after ] = useTabNav();\r\n\tconst hasMultiSelection = useSelect(\r\n\t\t( select ) => select( blockEditorStore ).hasMultiSelection(),\r\n\t\t[]\r\n\t);\r\n\r\n\treturn [\r\n\t\tbefore,\r\n\t\tuseMergeRefs( [\r\n\t\t\tref,\r\n\t\t\tuseClipboardHandler(),\r\n\t\t\tuseInput(),\r\n\t\t\tuseDragSelection(),\r\n\t\t\tuseSelectionObserver(),\r\n\t\t\tuseClickSelection(),\r\n\t\t\tuseMultiSelection(),\r\n\t\t\tuseSelectAll(),\r\n\t\t\tuseArrowNav(),\r\n\t\t\tuseRefEffect(\r\n\t\t\t\t( node ) => {\r\n\t\t\t\t\tnode.tabIndex = 0;\r\n\r\n\t\t\t\t\tif ( ! hasMultiSelection ) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tnode.classList.add( 'has-multi-selection' );\r\n\t\t\t\t\tnode.setAttribute(\r\n\t\t\t\t\t\t'aria-label',\r\n\t\t\t\t\t\t__( 'Multiple selected blocks' )\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\treturn () => {\r\n\t\t\t\t\t\tnode.classList.remove( 'has-multi-selection' );\r\n\t\t\t\t\t\tnode.removeAttribute( 'aria-label' );\r\n\t\t\t\t\t};\r\n\t\t\t\t},\r\n\t\t\t\t[ hasMultiSelection ]\r\n\t\t\t),\r\n\t\t] ),\r\n\t\tafter,\r\n\t];\r\n}\r\n\r\nfunction WritingFlow( { children, ...props }, forwardedRef ) {\r\n\tconst [ before, ref, after ] = useWritingFlow();\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{ before }\r\n\t\t\t<div\r\n\t\t\t\t{ ...props }\r\n\t\t\t\tref={ useMergeRefs( [ ref, forwardedRef ] ) }\r\n\t\t\t\tclassName={ classNames(\r\n\t\t\t\t\tprops.className,\r\n\t\t\t\t\t'block-editor-writing-flow'\r\n\t\t\t\t) }\r\n\t\t\t>\r\n\t\t\t\t{ children }\r\n\t\t\t</div>\r\n\t\t\t{ after }\r\n\t\t</>\r\n\t);\r\n}\r\n\r\n/**\r\n * Handles selection and navigation across blocks. This component should be\r\n * wrapped around BlockList.\r\n *\r\n * @param {Object}  props          Component properties.\r\n * @param {Element} props.children Children to be rendered.\r\n */\r\nexport default forwardRef( WritingFlow );\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { focus, isFormElement } from '@wordpress/dom';\r\nimport { TAB, ESCAPE } from '@wordpress/keycodes';\r\nimport { useSelect, useDispatch } from '@wordpress/data';\r\nimport { useRefEffect, useMergeRefs } from '@wordpress/compose';\r\nimport { useRef } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as blockEditorStore } from '../../store';\r\nimport { isInSameBlock, isInsideRootBlock } from '../../utils/dom';\r\nimport { unlock } from '../../lock-unlock';\r\n\r\nexport default function useTabNav() {\r\n\tconst container = useRef();\r\n\tconst focusCaptureBeforeRef = useRef();\r\n\tconst focusCaptureAfterRef = useRef();\r\n\r\n\tconst { hasMultiSelection, getSelectedBlockClientId, getBlockCount } =\r\n\t\tuseSelect( blockEditorStore );\r\n\tconst { setNavigationMode, setLastFocus } = unlock(\r\n\t\tuseDispatch( blockEditorStore )\r\n\t);\r\n\tconst isNavigationMode = useSelect(\r\n\t\t( select ) => select( blockEditorStore ).isNavigationMode(),\r\n\t\t[]\r\n\t);\r\n\r\n\tconst { getLastFocus } = unlock( useSelect( blockEditorStore ) );\r\n\r\n\t// Don't allow tabbing to this element in Navigation mode.\r\n\tconst focusCaptureTabIndex = ! isNavigationMode ? '0' : undefined;\r\n\r\n\t// Reference that holds the a flag for enabling or disabling\r\n\t// capturing on the focus capture elements.\r\n\tconst noCapture = useRef();\r\n\r\n\tfunction onFocusCapture( event ) {\r\n\t\t// Do not capture incoming focus if set by us in WritingFlow.\r\n\t\tif ( noCapture.current ) {\r\n\t\t\tnoCapture.current = null;\r\n\t\t} else if ( hasMultiSelection() ) {\r\n\t\t\tcontainer.current.focus();\r\n\t\t} else if ( getSelectedBlockClientId() ) {\r\n\t\t\tgetLastFocus()?.current.focus();\r\n\t\t} else {\r\n\t\t\tsetNavigationMode( true );\r\n\r\n\t\t\tconst canvasElement =\r\n\t\t\t\tcontainer.current.ownerDocument === event.target.ownerDocument\r\n\t\t\t\t\t? container.current\r\n\t\t\t\t\t: container.current.ownerDocument.defaultView.frameElement;\r\n\r\n\t\t\tconst isBefore =\r\n\t\t\t\t// eslint-disable-next-line no-bitwise\r\n\t\t\t\tevent.target.compareDocumentPosition( canvasElement ) &\r\n\t\t\t\tevent.target.DOCUMENT_POSITION_FOLLOWING;\r\n\t\t\tconst tabbables = focus.tabbable.find( container.current );\r\n\r\n\t\t\tif ( tabbables.length ) {\r\n\t\t\t\tconst next = isBefore\r\n\t\t\t\t\t? tabbables[ 0 ]\r\n\t\t\t\t\t: tabbables[ tabbables.length - 1 ];\r\n\r\n\t\t\t\tnext.focus();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tconst before = (\r\n\t\t<div\r\n\t\t\tref={ focusCaptureBeforeRef }\r\n\t\t\ttabIndex={ focusCaptureTabIndex }\r\n\t\t\tonFocus={ onFocusCapture }\r\n\t\t/>\r\n\t);\r\n\r\n\tconst after = (\r\n\t\t<div\r\n\t\t\tref={ focusCaptureAfterRef }\r\n\t\t\ttabIndex={ focusCaptureTabIndex }\r\n\t\t\tonFocus={ onFocusCapture }\r\n\t\t/>\r\n\t);\r\n\r\n\tconst ref = useRefEffect( ( node ) => {\r\n\t\tfunction onKeyDown( event ) {\r\n\t\t\tif ( event.defaultPrevented ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif ( event.keyCode === ESCAPE && ! hasMultiSelection() ) {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tsetNavigationMode( true );\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// In Edit mode, Tab should focus the first tabbable element after\r\n\t\t\t// the content, which is normally the sidebar (with block controls)\r\n\t\t\t// and Shift+Tab should focus the first tabbable element before the\r\n\t\t\t// content, which is normally the block toolbar.\r\n\t\t\t// Arrow keys can be used, and Tab and arrow keys can be used in\r\n\t\t\t// Navigation mode (press Esc), to navigate through blocks.\r\n\t\t\tif ( event.keyCode !== TAB ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst isShift = event.shiftKey;\r\n\t\t\tconst direction = isShift ? 'findPrevious' : 'findNext';\r\n\r\n\t\t\tif ( ! hasMultiSelection() && ! getSelectedBlockClientId() ) {\r\n\t\t\t\t// Preserve the behaviour of entering navigation mode when\r\n\t\t\t\t// tabbing into the content without a block selection.\r\n\t\t\t\t// `onFocusCapture` already did this previously, but we need to\r\n\t\t\t\t// do it again here because after clearing block selection,\r\n\t\t\t\t// focus land on the writing flow container and pressing Tab\r\n\t\t\t\t// will no longer send focus through the focus capture element.\r\n\t\t\t\tif ( event.target === node ) setNavigationMode( true );\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst nextTabbable = focus.tabbable[ direction ]( event.target );\r\n\r\n\t\t\t// We want to constrain the tabbing to the block and its child blocks.\r\n\t\t\t// If the preceding form element is within a different block,\r\n\t\t\t// such as two sibling image blocks in the placeholder state,\r\n\t\t\t// we want shift + tab from the first form element to move to the image\r\n\t\t\t// block toolbar and not the previous image block's form element.\r\n\t\t\tconst currentBlock = event.target.closest( '[data-block]' );\r\n\t\t\tconst isElementPartOfSelectedBlock =\r\n\t\t\t\tcurrentBlock &&\r\n\t\t\t\tnextTabbable &&\r\n\t\t\t\t( isInSameBlock( currentBlock, nextTabbable ) ||\r\n\t\t\t\t\tisInsideRootBlock( currentBlock, nextTabbable ) );\r\n\r\n\t\t\t// Allow tabbing from the block wrapper to a form element,\r\n\t\t\t// and between form elements rendered in a block and its child blocks,\r\n\t\t\t// such as inside a placeholder. Form elements are generally\r\n\t\t\t// meant to be UI rather than part of the content. Ideally\r\n\t\t\t// these are not rendered in the content and perhaps in the\r\n\t\t\t// future they can be rendered in an iframe or shadow DOM.\r\n\t\t\tif (\r\n\t\t\t\tisFormElement( nextTabbable ) &&\r\n\t\t\t\tisElementPartOfSelectedBlock\r\n\t\t\t) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst next = isShift ? focusCaptureBeforeRef : focusCaptureAfterRef;\r\n\r\n\t\t\t// Disable focus capturing on the focus capture element, so it\r\n\t\t\t// doesn't refocus this block and so it allows default behaviour\r\n\t\t\t// (moving focus to the next tabbable element).\r\n\t\t\tnoCapture.current = true;\r\n\r\n\t\t\t// Focusing the focus capture element, which is located above and\r\n\t\t\t// below the editor, should not scroll the page all the way up or\r\n\t\t\t// down.\r\n\t\t\tnext.current.focus( { preventScroll: true } );\r\n\t\t}\r\n\r\n\t\tfunction onFocusOut( event ) {\r\n\t\t\tsetLastFocus( { ...getLastFocus(), current: event.target } );\r\n\r\n\t\t\tconst { ownerDocument } = node;\r\n\r\n\t\t\t// If focus disappears due to there being no blocks, move focus to\r\n\t\t\t// the writing flow wrapper.\r\n\t\t\tif (\r\n\t\t\t\t! event.relatedTarget &&\r\n\t\t\t\townerDocument.activeElement === ownerDocument.body &&\r\n\t\t\t\tgetBlockCount() === 0\r\n\t\t\t) {\r\n\t\t\t\tnode.focus();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// When tabbing back to an element in block list, this event handler prevents scrolling if the\r\n\t\t// focus capture divs (before/after) are outside of the viewport. (For example shift+tab back to a paragraph\r\n\t\t// when focus is on a sidebar element. This prevents the scrollable writing area from jumping either to the\r\n\t\t// top or bottom of the document.\r\n\t\t//\r\n\t\t// Note that it isn't possible to disable scrolling in the onFocus event. We need to intercept this\r\n\t\t// earlier in the keypress handler, and call focus( { preventScroll: true } ) instead.\r\n\t\t// https://developer.mozilla.org/en-US/docs/Web/API/HTMLOrForeignElement/focus#parameters\r\n\t\tfunction preventScrollOnTab( event ) {\r\n\t\t\tif ( event.keyCode !== TAB ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif ( event.target?.getAttribute( 'role' ) === 'region' ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif ( container.current === event.target ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst isShift = event.shiftKey;\r\n\t\t\tconst direction = isShift ? 'findPrevious' : 'findNext';\r\n\t\t\tconst target = focus.tabbable[ direction ]( event.target );\r\n\t\t\t// Only do something when the next tabbable is a focus capture div (before/after)\r\n\t\t\tif (\r\n\t\t\t\ttarget === focusCaptureBeforeRef.current ||\r\n\t\t\t\ttarget === focusCaptureAfterRef.current\r\n\t\t\t) {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\ttarget.focus( { preventScroll: true } );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst { ownerDocument } = node;\r\n\t\tconst { defaultView } = ownerDocument;\r\n\t\tdefaultView.addEventListener( 'keydown', preventScrollOnTab );\r\n\t\tnode.addEventListener( 'keydown', onKeyDown );\r\n\t\tnode.addEventListener( 'focusout', onFocusOut );\r\n\t\treturn () => {\r\n\t\t\tdefaultView.removeEventListener( 'keydown', preventScrollOnTab );\r\n\t\t\tnode.removeEventListener( 'keydown', onKeyDown );\r\n\t\t\tnode.removeEventListener( 'focusout', onFocusOut );\r\n\t\t};\r\n\t}, [] );\r\n\r\n\tconst mergedRefs = useMergeRefs( [ container, ref ] );\r\n\r\n\treturn [ before, mergedRefs, after ];\r\n}\r\n","let compatibilityStyles = null;\r\n\r\n/**\r\n * Returns a list of stylesheets that target the editor canvas. A stylesheet is\r\n * considered targetting the editor a canvas if it contains the\r\n * `editor-styles-wrapper`, `wp-block`, or `wp-block-*` class selectors.\r\n *\r\n * Ideally, this hook should be removed in the future and styles should be added\r\n * explicitly as editor styles.\r\n */\r\nexport function getCompatibilityStyles() {\r\n\tif ( compatibilityStyles ) {\r\n\t\treturn compatibilityStyles;\r\n\t}\r\n\r\n\t// Only memoize the result once on load, since these stylesheets should not\r\n\t// change.\r\n\tcompatibilityStyles = Array.from( document.styleSheets ).reduce(\r\n\t\t( accumulator, styleSheet ) => {\r\n\t\t\ttry {\r\n\t\t\t\t// May fail for external styles.\r\n\t\t\t\t// eslint-disable-next-line no-unused-expressions\r\n\t\t\t\tstyleSheet.cssRules;\r\n\t\t\t} catch ( e ) {\r\n\t\t\t\treturn accumulator;\r\n\t\t\t}\r\n\r\n\t\t\tconst { ownerNode, cssRules } = styleSheet;\r\n\r\n\t\t\t// Stylesheet is added by another stylesheet. See\r\n\t\t\t// https://developer.mozilla.org/en-US/docs/Web/API/StyleSheet/ownerNode#notes.\r\n\t\t\tif ( ownerNode === null ) {\r\n\t\t\t\treturn accumulator;\r\n\t\t\t}\r\n\r\n\t\t\tif ( ! cssRules ) {\r\n\t\t\t\treturn accumulator;\r\n\t\t\t}\r\n\r\n\t\t\t// Don't try to add the reset styles, which were removed as a dependency\r\n\t\t\t// from `edit-blocks` for the iframe since we don't need to reset admin\r\n\t\t\t// styles.\r\n\t\t\tif ( ownerNode.id === 'wp-reset-editor-styles-css' ) {\r\n\t\t\t\treturn accumulator;\r\n\t\t\t}\r\n\r\n\t\t\t// Don't try to add styles without ID. Styles enqueued via the WP dependency system will always have IDs.\r\n\t\t\tif ( ! ownerNode.id ) {\r\n\t\t\t\treturn accumulator;\r\n\t\t\t}\r\n\r\n\t\t\tfunction matchFromRules( _cssRules ) {\r\n\t\t\t\treturn Array.from( _cssRules ).find(\r\n\t\t\t\t\t( {\r\n\t\t\t\t\t\tselectorText,\r\n\t\t\t\t\t\tconditionText,\r\n\t\t\t\t\t\tcssRules: __cssRules,\r\n\t\t\t\t\t} ) => {\r\n\t\t\t\t\t\t// If the rule is conditional then it will not have selector text.\r\n\t\t\t\t\t\t// Recurse into child CSS ruleset to determine selector eligibility.\r\n\t\t\t\t\t\tif ( conditionText ) {\r\n\t\t\t\t\t\t\treturn matchFromRules( __cssRules );\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\tselectorText &&\r\n\t\t\t\t\t\t\t( selectorText.includes(\r\n\t\t\t\t\t\t\t\t'.editor-styles-wrapper'\r\n\t\t\t\t\t\t\t) ||\r\n\t\t\t\t\t\t\t\tselectorText.includes( '.wp-block' ) )\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\tif ( matchFromRules( cssRules ) ) {\r\n\t\t\t\tconst isInline = ownerNode.tagName === 'STYLE';\r\n\r\n\t\t\t\tif ( isInline ) {\r\n\t\t\t\t\t// If the current target is inline,\r\n\t\t\t\t\t// it could be a dependency of an existing stylesheet.\r\n\t\t\t\t\t// Look for that dependency and add it BEFORE the current target.\r\n\t\t\t\t\tconst mainStylesCssId = ownerNode.id.replace(\r\n\t\t\t\t\t\t'-inline-css',\r\n\t\t\t\t\t\t'-css'\r\n\t\t\t\t\t);\r\n\t\t\t\t\tconst mainStylesElement =\r\n\t\t\t\t\t\tdocument.getElementById( mainStylesCssId );\r\n\t\t\t\t\tif ( mainStylesElement ) {\r\n\t\t\t\t\t\taccumulator.push( mainStylesElement.cloneNode( true ) );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\taccumulator.push( ownerNode.cloneNode( true ) );\r\n\r\n\t\t\t\tif ( ! isInline ) {\r\n\t\t\t\t\t// If the current target is not inline,\r\n\t\t\t\t\t// we still look for inline styles that could be relevant for the current target.\r\n\t\t\t\t\t// If they exist, add them AFTER the current target.\r\n\t\t\t\t\tconst inlineStylesCssId = ownerNode.id.replace(\r\n\t\t\t\t\t\t'-css',\r\n\t\t\t\t\t\t'-inline-css'\r\n\t\t\t\t\t);\r\n\t\t\t\t\tconst inlineStylesElement =\r\n\t\t\t\t\t\tdocument.getElementById( inlineStylesCssId );\r\n\t\t\t\t\tif ( inlineStylesElement ) {\r\n\t\t\t\t\t\taccumulator.push(\r\n\t\t\t\t\t\t\tinlineStylesElement.cloneNode( true )\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn accumulator;\r\n\t\t},\r\n\t\t[]\r\n\t);\r\n\r\n\treturn compatibilityStyles;\r\n}\r\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tuseState,\n\tcreatePortal,\n\tforwardRef,\n\tuseMemo,\n\tuseEffect,\n} from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport {\n\tuseResizeObserver,\n\tuseMergeRefs,\n\tuseRefEffect,\n\tuseDisabled,\n} from '@wordpress/compose';\nimport { __experimentalStyleProvider as StyleProvider } from '@wordpress/components';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { useBlockSelectionClearer } from '../block-selection-clearer';\nimport { useWritingFlow } from '../writing-flow';\nimport { getCompatibilityStyles } from './get-compatibility-styles';\nimport { store as blockEditorStore } from '../../store';\n\nfunction bubbleEvent( event, Constructor, frame ) {\n\tconst init = {};\n\n\tfor ( const key in event ) {\n\t\tinit[ key ] = event[ key ];\n\t}\n\n\t// Check if the event is a MouseEvent generated within the iframe.\n\t// If so, adjust the coordinates to be relative to the position of\n\t// the iframe. This ensures that components such as Draggable\n\t// receive coordinates relative to the window, instead of relative\n\t// to the iframe. Without this, the Draggable event handler would\n\t// result in components \"jumping\" position as soon as the user\n\t// drags over the iframe.\n\tif ( event instanceof frame.contentDocument.defaultView.MouseEvent ) {\n\t\tconst rect = frame.getBoundingClientRect();\n\t\tinit.clientX += rect.left;\n\t\tinit.clientY += rect.top;\n\t}\n\n\tconst newEvent = new Constructor( event.type, init );\n\tif ( init.defaultPrevented ) {\n\t\tnewEvent.preventDefault();\n\t}\n\tconst cancelled = ! frame.dispatchEvent( newEvent );\n\n\tif ( cancelled ) {\n\t\tevent.preventDefault();\n\t}\n}\n\n/**\n * Bubbles some event types (keydown, keypress, and dragover) to parent document\n * document to ensure that the keyboard shortcuts and drag and drop work.\n *\n * Ideally, we should remove event bubbling in the future. Keyboard shortcuts\n * should be context dependent, e.g. actions on blocks like Cmd+A should not\n * work globally outside the block editor.\n *\n * @param {Document} iframeDocument Document to attach listeners to.\n */\nfunction useBubbleEvents( iframeDocument ) {\n\treturn useRefEffect( () => {\n\t\tconst { defaultView } = iframeDocument;\n\t\tif ( ! defaultView ) {\n\t\t\treturn;\n\t\t}\n\t\tconst { frameElement } = defaultView;\n\t\tconst html = iframeDocument.documentElement;\n\t\tconst eventTypes = [ 'dragover', 'mousemove' ];\n\t\tconst handlers = {};\n\t\tfor ( const name of eventTypes ) {\n\t\t\thandlers[ name ] = ( event ) => {\n\t\t\t\tconst prototype = Object.getPrototypeOf( event );\n\t\t\t\tconst constructorName = prototype.constructor.name;\n\t\t\t\tconst Constructor = window[ constructorName ];\n\t\t\t\tbubbleEvent( event, Constructor, frameElement );\n\t\t\t};\n\t\t\thtml.addEventListener( name, handlers[ name ] );\n\t\t}\n\n\t\treturn () => {\n\t\t\tfor ( const name of eventTypes ) {\n\t\t\t\thtml.removeEventListener( name, handlers[ name ] );\n\t\t\t}\n\t\t};\n\t} );\n}\n\nfunction Iframe( {\n\tcontentRef,\n\tchildren,\n\ttabIndex = 0,\n\tscale = 1,\n\tframeSize = 0,\n\treadonly,\n\tforwardedRef: ref,\n\ttitle = __( 'Editor canvas' ),\n\t...props\n} ) {\n\tconst { resolvedAssets, isPreviewMode } = useSelect( ( select ) => {\n\t\tconst { getSettings } = select( blockEditorStore );\n\t\tconst settings = getSettings();\n\t\treturn {\n\t\t\tresolvedAssets: settings.__unstableResolvedAssets,\n\t\t\tisPreviewMode: settings.__unstableIsPreviewMode,\n\t\t};\n\t}, [] );\n\tconst { styles = '', scripts = '' } = resolvedAssets;\n\tconst [ iframeDocument, setIframeDocument ] = useState();\n\tconst [ bodyClasses, setBodyClasses ] = useState( [] );\n\tconst clearerRef = useBlockSelectionClearer();\n\tconst [ before, writingFlowRef, after ] = useWritingFlow();\n\tconst [\n\t\tcontentResizeListener,\n\t\t{ height: contentHeight, width: contentWidth },\n\t] = useResizeObserver();\n\n\tconst setRef = useRefEffect( ( node ) => {\n\t\tnode._load = () => {\n\t\t\tsetIframeDocument( node.contentDocument );\n\t\t};\n\t\tlet iFrameDocument;\n\t\t// Prevent the default browser action for files dropped outside of dropzones.\n\t\tfunction preventFileDropDefault( event ) {\n\t\t\tevent.preventDefault();\n\t\t}\n\t\tfunction onLoad() {\n\t\t\tconst { contentDocument, ownerDocument } = node;\n\t\t\tconst { documentElement } = contentDocument;\n\t\t\tiFrameDocument = contentDocument;\n\n\t\t\tdocumentElement.classList.add( 'block-editor-iframe__html' );\n\n\t\t\tclearerRef( documentElement );\n\n\t\t\t// Ideally ALL classes that are added through get_body_class should\n\t\t\t// be added in the editor too, which we'll somehow have to get from\n\t\t\t// the server in the future (which will run the PHP filters).\n\t\t\tsetBodyClasses(\n\t\t\t\tArray.from( ownerDocument.body.classList ).filter(\n\t\t\t\t\t( name ) =>\n\t\t\t\t\t\tname.startsWith( 'admin-color-' ) ||\n\t\t\t\t\t\tname.startsWith( 'post-type-' ) ||\n\t\t\t\t\t\tname === 'wp-embed-responsive'\n\t\t\t\t)\n\t\t\t);\n\n\t\t\tcontentDocument.dir = ownerDocument.dir;\n\n\t\t\tfor ( const compatStyle of getCompatibilityStyles() ) {\n\t\t\t\tif ( contentDocument.getElementById( compatStyle.id ) ) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tcontentDocument.head.appendChild(\n\t\t\t\t\tcompatStyle.cloneNode( true )\n\t\t\t\t);\n\n\t\t\t\tif ( ! isPreviewMode ) {\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t`${ compatStyle.id } was added to the iframe incorrectly. Please use block.json or enqueue_block_assets to add styles to the iframe.`,\n\t\t\t\t\t\tcompatStyle\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tiFrameDocument.addEventListener(\n\t\t\t\t'dragover',\n\t\t\t\tpreventFileDropDefault,\n\t\t\t\tfalse\n\t\t\t);\n\t\t\tiFrameDocument.addEventListener(\n\t\t\t\t'drop',\n\t\t\t\tpreventFileDropDefault,\n\t\t\t\tfalse\n\t\t\t);\n\t\t}\n\n\t\tnode.addEventListener( 'load', onLoad );\n\n\t\treturn () => {\n\t\t\tdelete node._load;\n\t\t\tnode.removeEventListener( 'load', onLoad );\n\t\t\tiFrameDocument?.removeEventListener(\n\t\t\t\t'dragover',\n\t\t\t\tpreventFileDropDefault\n\t\t\t);\n\t\t\tiFrameDocument?.removeEventListener(\n\t\t\t\t'drop',\n\t\t\t\tpreventFileDropDefault\n\t\t\t);\n\t\t};\n\t}, [] );\n\n\tconst windowResizeRef = useRefEffect( ( node ) => {\n\t\tconst nodeWindow = node.ownerDocument.defaultView;\n\n\t\tconst onResize = () => {\n\t\t\tsetIframeWindowInnerHeight( nodeWindow.innerHeight );\n\t\t};\n\t\tnodeWindow.addEventListener( 'resize', onResize );\n\t\treturn () => {\n\t\t\tnodeWindow.removeEventListener( 'resize', onResize );\n\t\t};\n\t}, [] );\n\n\tconst [ iframeWindowInnerHeight, setIframeWindowInnerHeight ] = useState();\n\n\tconst disabledRef = useDisabled( { isDisabled: ! readonly } );\n\tconst bodyRef = useMergeRefs( [\n\t\tuseBubbleEvents( iframeDocument ),\n\t\tcontentRef,\n\t\tclearerRef,\n\t\twritingFlowRef,\n\t\tdisabledRef,\n\t\twindowResizeRef,\n\t] );\n\n\t// Correct doctype is required to enable rendering in standards\n\t// mode. Also preload the styles to avoid a flash of unstyled\n\t// content.\n\tconst html = `<!doctype html>\n<html>\n\t<head>\n\t\t<meta charset=\"utf-8\">\n\t\t<script>window.frameElement._load()</script>\n\t\t<style>\n\t\t\thtml{\n\t\t\t\theight: auto !important;\n\t\t\t\tmin-height: 100%;\n\t\t\t}\n\t\t\t/* Lowest specificity to not override global styles */\n\t\t\t:where(body) {\n\t\t\t\tmargin: 0;\n\t\t\t\t/* Default background color in case zoom out mode background\n\t\t\t\tcolors the html element */\n\t\t\t\tbackground-color: white;\n\t\t\t}\n\t\t</style>\n\t\t${ styles }\n\t\t${ scripts }\n\t</head>\n\t<body>\n\t\t<script>document.currentScript.parentElement.remove()</script>\n\t</body>\n</html>`;\n\n\tconst [ src, cleanup ] = useMemo( () => {\n\t\tconst _src = URL.createObjectURL(\n\t\t\tnew window.Blob( [ html ], { type: 'text/html' } )\n\t\t);\n\t\treturn [ _src, () => URL.revokeObjectURL( _src ) ];\n\t}, [ html ] );\n\n\tuseEffect( () => cleanup, [ cleanup ] );\n\n\tuseEffect( () => {\n\t\tif ( ! iframeDocument ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst _scale =\n\t\t\ttypeof scale === 'function'\n\t\t\t\t? scale( contentWidth, contentHeight )\n\t\t\t\t: scale;\n\n\t\tif ( _scale !== 1 ) {\n\t\t\t// Hack to get proper margins when scaling the iframe document.\n\t\t\tconst bottomFrameSize = frameSize - contentHeight * ( 1 - _scale );\n\n\t\t\tiframeDocument.body.classList.add( 'is-zoomed-out' );\n\n\t\t\tiframeDocument.documentElement.style.transform = `scale( ${ _scale } )`;\n\t\t\tiframeDocument.documentElement.style.marginTop = `${ frameSize }px`;\n\t\t\t// TODO: `marginBottom` doesn't work in Firefox. We need another way to do this.\n\t\t\tiframeDocument.documentElement.style.marginBottom = `${ bottomFrameSize }px`;\n\t\t\tif ( iframeWindowInnerHeight > contentHeight * _scale ) {\n\t\t\t\tiframeDocument.body.style.minHeight = `${ Math.floor(\n\t\t\t\t\t( iframeWindowInnerHeight - 2 * frameSize ) / _scale\n\t\t\t\t) }px`;\n\t\t\t}\n\n\t\t\treturn () => {\n\t\t\t\tiframeDocument.body.classList.remove( 'is-zoomed-out' );\n\t\t\t\tiframeDocument.documentElement.style.transform = '';\n\t\t\t\tiframeDocument.documentElement.style.marginTop = '';\n\t\t\t\tiframeDocument.documentElement.style.marginBottom = '';\n\t\t\t\tiframeDocument.body.style.minHeight = '';\n\t\t\t};\n\t\t}\n\t}, [\n\t\tscale,\n\t\tframeSize,\n\t\tiframeDocument,\n\t\tcontentHeight,\n\t\tiframeWindowInnerHeight,\n\t\tcontentWidth,\n\t] );\n\n\t// Make sure to not render the before and after focusable div elements in view\n\t// mode. They're only needed to capture focus in edit mode.\n\tconst shouldRenderFocusCaptureElements = tabIndex >= 0 && ! isPreviewMode;\n\n\treturn (\n\t\t<>\n\t\t\t{ shouldRenderFocusCaptureElements && before }\n\t\t\t{ /* eslint-disable-next-line jsx-a11y/no-noninteractive-element-interactions */ }\n\t\t\t<iframe\n\t\t\t\t{ ...props }\n\t\t\t\tstyle={ {\n\t\t\t\t\tborder: 0,\n\t\t\t\t\t...props.style,\n\t\t\t\t\theight: props.style?.height,\n\t\t\t\t\ttransition: 'all .3s',\n\t\t\t\t} }\n\t\t\t\tref={ useMergeRefs( [ ref, setRef ] ) }\n\t\t\t\ttabIndex={ tabIndex }\n\t\t\t\t// Correct doctype is required to enable rendering in standards\n\t\t\t\t// mode. Also preload the styles to avoid a flash of unstyled\n\t\t\t\t// content.\n\t\t\t\tsrc={ src }\n\t\t\t\ttitle={ title }\n\t\t\t\tonKeyDown={ ( event ) => {\n\t\t\t\t\tif ( props.onKeyDown ) {\n\t\t\t\t\t\tprops.onKeyDown( event );\n\t\t\t\t\t}\n\t\t\t\t\t// If the event originates from inside the iframe, it means\n\t\t\t\t\t// it bubbled through the portal, but only with React\n\t\t\t\t\t// events. We need to to bubble native events as well,\n\t\t\t\t\t// though by doing so we also trigger another React event,\n\t\t\t\t\t// so we need to stop the propagation of this event to avoid\n\t\t\t\t\t// duplication.\n\t\t\t\t\tif (\n\t\t\t\t\t\tevent.currentTarget.ownerDocument !==\n\t\t\t\t\t\tevent.target.ownerDocument\n\t\t\t\t\t) {\n\t\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\t\tbubbleEvent(\n\t\t\t\t\t\t\tevent,\n\t\t\t\t\t\t\twindow.KeyboardEvent,\n\t\t\t\t\t\t\tevent.currentTarget\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t} }\n\t\t\t>\n\t\t\t\t{ iframeDocument &&\n\t\t\t\t\tcreatePortal(\n\t\t\t\t\t\t// We want to prevent React events from bubbling throught the iframe\n\t\t\t\t\t\t// we bubble these manually.\n\t\t\t\t\t\t/* eslint-disable-next-line jsx-a11y/no-noninteractive-element-interactions */\n\t\t\t\t\t\t<body\n\t\t\t\t\t\t\tref={ bodyRef }\n\t\t\t\t\t\t\tclassName={ classnames(\n\t\t\t\t\t\t\t\t'block-editor-iframe__body',\n\t\t\t\t\t\t\t\t'editor-styles-wrapper',\n\t\t\t\t\t\t\t\t...bodyClasses\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ contentResizeListener }\n\t\t\t\t\t\t\t<StyleProvider document={ iframeDocument }>\n\t\t\t\t\t\t\t\t{ children }\n\t\t\t\t\t\t\t</StyleProvider>\n\t\t\t\t\t\t</body>,\n\t\t\t\t\t\tiframeDocument.documentElement\n\t\t\t\t\t) }\n\t\t\t</iframe>\n\t\t\t{ shouldRenderFocusCaptureElements && after }\n\t\t</>\n\t);\n}\n\nfunction IframeIfReady( props, ref ) {\n\tconst isInitialised = useSelect(\n\t\t( select ) =>\n\t\t\tselect( blockEditorStore ).getSettings().__internalIsInitialized,\n\t\t[]\n\t);\n\n\t// We shouldn't render the iframe until the editor settings are initialised.\n\t// The initial settings are needed to get the styles for the srcDoc, which\n\t// cannot be changed after the iframe is mounted. srcDoc is used to to set\n\t// the initial iframe HTML, which is required to avoid a flash of unstyled\n\t// content.\n\tif ( ! isInitialised ) {\n\t\treturn null;\n\t}\n\n\treturn <Iframe { ...props } forwardedRef={ ref } />;\n}\n\nexport default forwardRef( IframeIfReady );\n","import postcss from './postcss.js'\n\nexport default postcss\n\nexport const stringify = postcss.stringify\nexport const fromJSON = postcss.fromJSON\nexport const plugin = postcss.plugin\nexport const parse = postcss.parse\nexport const list = postcss.list\n\nexport const document = postcss.document\nexport const comment = postcss.comment\nexport const atRule = postcss.atRule\nexport const rule = postcss.rule\nexport const decl = postcss.decl\nexport const root = postcss.root\n\nexport const CssSyntaxError = postcss.CssSyntaxError\nexport const Declaration = postcss.Declaration\nexport const Container = postcss.Container\nexport const Processor = postcss.Processor\nexport const Document = postcss.Document\nexport const Comment = postcss.Comment\nexport const Warning = postcss.Warning\nexport const AtRule = postcss.AtRule\nexport const Result = postcss.Result\nexport const Input = postcss.Input\nexport const Rule = postcss.Rule\nexport const Root = postcss.Root\nexport const Node = postcss.Node\n","/**\n * External dependencies\n */\nimport postcss, { CssSyntaxError } from 'postcss';\nimport wrap from 'postcss-prefixwrap';\nimport rebaseUrl from 'postcss-urlrebase';\n\nconst transformStylesCache = new WeakMap();\n\nfunction transformStyle(\n\t{ css, ignoredSelectors = [], baseURL },\n\twrapperSelector = ''\n) {\n\t// When there is no wrapper selector or base URL, there is no need\n\t// to transform the CSS. This is most cases because in the default\n\t// iframed editor, no wrapping is needed, and not many styles\n\t// provide a base URL.\n\tif ( ! wrapperSelector && ! baseURL ) {\n\t\treturn css;\n\t}\n\n\tconst postcssFriendlyCSS = css.replace( ':where(body)', 'body' );\n\ttry {\n\t\treturn postcss(\n\t\t\t[\n\t\t\t\twrapperSelector &&\n\t\t\t\t\twrap( wrapperSelector, {\n\t\t\t\t\t\tignoredSelectors: [\n\t\t\t\t\t\t\t...ignoredSelectors,\n\t\t\t\t\t\t\twrapperSelector,\n\t\t\t\t\t\t],\n\t\t\t\t\t} ),\n\t\t\t\tbaseURL && rebaseUrl( { rootUrl: baseURL } ),\n\t\t\t].filter( Boolean )\n\t\t).process( postcssFriendlyCSS, {} ).css; // use sync PostCSS API\n\t} catch ( error ) {\n\t\tif ( error instanceof CssSyntaxError ) {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.warn(\n\t\t\t\t'wp.blockEditor.transformStyles Failed to transform CSS.',\n\t\t\t\terror.message + '\\n' + error.showSourceCode( false )\n\t\t\t);\n\t\t} else {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.warn(\n\t\t\t\t'wp.blockEditor.transformStyles Failed to transform CSS.',\n\t\t\t\terror\n\t\t\t);\n\t\t}\n\n\t\treturn null;\n\t}\n}\n\n/**\n * Applies a series of CSS rule transforms to wrap selectors inside a given class and/or rewrite URLs depending on the parameters passed.\n *\n * @typedef {Object} EditorStyle\n * @property {string}        css              the CSS block(s), as a single string.\n * @property {?string}       baseURL          the base URL to be used as the reference when rewritting urls.\n * @property {?string[]}     ignoredSelectors the selectors not to wrap.\n *\n * @param    {EditorStyle[]} styles           CSS rules.\n * @param    {string}        wrapperSelector  Wrapper selector.\n * @return {Array} converted rules.\n */\nconst transformStyles = ( styles, wrapperSelector = '' ) => {\n\treturn styles.map( ( style ) => {\n\t\tif ( transformStylesCache.has( style ) ) {\n\t\t\treturn transformStylesCache.get( style );\n\t\t}\n\n\t\tconst transformedStyle = transformStyle( style, wrapperSelector );\n\t\ttransformStylesCache.set( style, transformedStyle );\n\t\treturn transformedStyle;\n\t} );\n};\n\nexport default transformStyles;\n","/**\n * External dependencies\n */\nimport { colord, extend } from 'colord';\nimport namesPlugin from 'colord/plugins/names';\nimport a11yPlugin from 'colord/plugins/a11y';\n\n/**\n * WordPress dependencies\n */\nimport { SVG } from '@wordpress/components';\nimport { useCallback, useMemo } from '@wordpress/element';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport transformStyles from '../../utils/transform-styles';\nimport { store as blockEditorStore } from '../../store';\nimport { unlock } from '../../lock-unlock';\n\nextend( [ namesPlugin, a11yPlugin ] );\n\nfunction useDarkThemeBodyClassName( styles, scope ) {\n\treturn useCallback(\n\t\t( node ) => {\n\t\t\tif ( ! node ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst { ownerDocument } = node;\n\t\t\tconst { defaultView, body } = ownerDocument;\n\t\t\tconst canvas = scope ? ownerDocument.querySelector( scope ) : body;\n\n\t\t\tlet backgroundColor;\n\n\t\t\tif ( ! canvas ) {\n\t\t\t\t// The real .editor-styles-wrapper element might not exist in the\n\t\t\t\t// DOM, so calculate the background color by creating a fake\n\t\t\t\t// wrapper.\n\t\t\t\tconst tempCanvas = ownerDocument.createElement( 'div' );\n\t\t\t\ttempCanvas.classList.add( 'editor-styles-wrapper' );\n\t\t\t\tbody.appendChild( tempCanvas );\n\n\t\t\t\tbackgroundColor = defaultView\n\t\t\t\t\t?.getComputedStyle( tempCanvas, null )\n\t\t\t\t\t.getPropertyValue( 'background-color' );\n\n\t\t\t\tbody.removeChild( tempCanvas );\n\t\t\t} else {\n\t\t\t\tbackgroundColor = defaultView\n\t\t\t\t\t?.getComputedStyle( canvas, null )\n\t\t\t\t\t.getPropertyValue( 'background-color' );\n\t\t\t}\n\t\t\tconst colordBackgroundColor = colord( backgroundColor );\n\t\t\t// If background is transparent, it should be treated as light color.\n\t\t\tif (\n\t\t\t\tcolordBackgroundColor.luminance() > 0.5 ||\n\t\t\t\tcolordBackgroundColor.alpha() === 0\n\t\t\t) {\n\t\t\t\tbody.classList.remove( 'is-dark-theme' );\n\t\t\t} else {\n\t\t\t\tbody.classList.add( 'is-dark-theme' );\n\t\t\t}\n\t\t},\n\t\t[ styles, scope ]\n\t);\n}\n\nexport default function EditorStyles( { styles, scope } ) {\n\tconst overrides = useSelect(\n\t\t( select ) => unlock( select( blockEditorStore ) ).getStyleOverrides(),\n\t\t[]\n\t);\n\tconst [ transformedStyles, transformedSvgs ] = useMemo( () => {\n\t\tconst _styles = Object.values( styles ?? [] );\n\n\t\tfor ( const [ id, override ] of overrides ) {\n\t\t\tconst index = _styles.findIndex( ( { id: _id } ) => id === _id );\n\t\t\tconst overrideWithId = { ...override, id };\n\t\t\tif ( index === -1 ) {\n\t\t\t\t_styles.push( overrideWithId );\n\t\t\t} else {\n\t\t\t\t_styles[ index ] = overrideWithId;\n\t\t\t}\n\t\t}\n\n\t\treturn [\n\t\t\ttransformStyles(\n\t\t\t\t_styles.filter( ( style ) => style?.css ),\n\t\t\t\tscope\n\t\t\t),\n\t\t\t_styles\n\t\t\t\t.filter( ( style ) => style.__unstableType === 'svgs' )\n\t\t\t\t.map( ( style ) => style.assets )\n\t\t\t\t.join( '' ),\n\t\t];\n\t}, [ styles, overrides, scope ] );\n\n\treturn (\n\t\t<>\n\t\t\t{ /* Use an empty style element to have a document reference,\n\t\t\t     but this could be any element. */ }\n\t\t\t<style\n\t\t\t\tref={ useDarkThemeBodyClassName( transformedStyles, scope ) }\n\t\t\t/>\n\t\t\t{ transformedStyles.map( ( css, index ) => (\n\t\t\t\t<style key={ index }>{ css }</style>\n\t\t\t) ) }\n\t\t\t<SVG\n\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\tviewBox=\"0 0 0 0\"\n\t\t\t\twidth=\"0\"\n\t\t\t\theight=\"0\"\n\t\t\t\trole=\"none\"\n\t\t\t\tstyle={ {\n\t\t\t\t\tvisibility: 'hidden',\n\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\tleft: '-9999px',\n\t\t\t\t\toverflow: 'hidden',\n\t\t\t\t} }\n\t\t\t\tdangerouslySetInnerHTML={ { __html: transformedSvgs } }\n\t\t\t/>\n\t\t</>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useResizeObserver, useRefEffect } from '@wordpress/compose';\nimport { useSelect } from '@wordpress/data';\nimport { memo, useMemo } from '@wordpress/element';\nimport { Disabled } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport BlockList from '../block-list';\nimport Iframe from '../iframe';\nimport EditorStyles from '../editor-styles';\nimport { store } from '../../store';\n\n// This is used to avoid rendering the block list if the sizes change.\nlet MemoizedBlockList;\n\nconst MAX_HEIGHT = 2000;\nconst EMPTY_ADDITIONAL_STYLES = [];\n\nfunction ScaledBlockPreview( {\n\tviewportWidth,\n\tcontainerWidth,\n\tminHeight,\n\tadditionalStyles = EMPTY_ADDITIONAL_STYLES,\n} ) {\n\tif ( ! viewportWidth ) {\n\t\tviewportWidth = containerWidth;\n\t}\n\n\tconst [ contentResizeListener, { height: contentHeight } ] =\n\t\tuseResizeObserver();\n\tconst { styles } = useSelect( ( select ) => {\n\t\tconst settings = select( store ).getSettings();\n\t\treturn {\n\t\t\tstyles: settings.styles,\n\t\t};\n\t}, [] );\n\n\t// Avoid scrollbars for pattern previews.\n\tconst editorStyles = useMemo( () => {\n\t\tif ( styles ) {\n\t\t\treturn [\n\t\t\t\t...styles,\n\t\t\t\t{\n\t\t\t\t\tcss: 'body{height:auto;overflow:hidden;border:none;padding:0;}',\n\t\t\t\t\t__unstableType: 'presets',\n\t\t\t\t},\n\t\t\t\t...additionalStyles,\n\t\t\t];\n\t\t}\n\n\t\treturn styles;\n\t}, [ styles, additionalStyles ] );\n\n\t// Initialize on render instead of module top level, to avoid circular dependency issues.\n\tMemoizedBlockList = MemoizedBlockList || memo( BlockList );\n\n\tconst scale = containerWidth / viewportWidth;\n\tconst aspectRatio = contentHeight\n\t\t? containerWidth / ( contentHeight * scale )\n\t\t: 0;\n\treturn (\n\t\t<Disabled\n\t\t\tclassName=\"block-editor-block-preview__content\"\n\t\t\tstyle={ {\n\t\t\t\ttransform: `scale(${ scale })`,\n\t\t\t\t// Using width + aspect-ratio instead of height here triggers browsers' native\n\t\t\t\t// handling of scrollbar's visibility. It prevents the flickering issue seen\n\t\t\t\t// in https://github.com/WordPress/gutenberg/issues/52027.\n\t\t\t\t// See https://github.com/WordPress/gutenberg/pull/52921 for more info.\n\t\t\t\taspectRatio,\n\t\t\t\tmaxHeight:\n\t\t\t\t\tcontentHeight > MAX_HEIGHT ? MAX_HEIGHT * scale : undefined,\n\t\t\t\tminHeight,\n\t\t\t} }\n\t\t>\n\t\t\t<Iframe\n\t\t\t\tcontentRef={ useRefEffect( ( bodyElement ) => {\n\t\t\t\t\tconst {\n\t\t\t\t\t\townerDocument: { documentElement },\n\t\t\t\t\t} = bodyElement;\n\t\t\t\t\tdocumentElement.classList.add(\n\t\t\t\t\t\t'block-editor-block-preview__content-iframe'\n\t\t\t\t\t);\n\t\t\t\t\tdocumentElement.style.position = 'absolute';\n\t\t\t\t\tdocumentElement.style.width = '100%';\n\n\t\t\t\t\t// Necessary for contentResizeListener to work.\n\t\t\t\t\tbodyElement.style.boxSizing = 'border-box';\n\t\t\t\t\tbodyElement.style.position = 'absolute';\n\t\t\t\t\tbodyElement.style.width = '100%';\n\t\t\t\t}, [] ) }\n\t\t\t\taria-hidden\n\t\t\t\ttabIndex={ -1 }\n\t\t\t\tstyle={ {\n\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\twidth: viewportWidth,\n\t\t\t\t\theight: contentHeight,\n\t\t\t\t\tpointerEvents: 'none',\n\t\t\t\t\t// This is a catch-all max-height for patterns.\n\t\t\t\t\t// See: https://github.com/WordPress/gutenberg/pull/38175.\n\t\t\t\t\tmaxHeight: MAX_HEIGHT,\n\t\t\t\t\tminHeight:\n\t\t\t\t\t\tscale !== 0 && scale < 1 && minHeight\n\t\t\t\t\t\t\t? minHeight / scale\n\t\t\t\t\t\t\t: minHeight,\n\t\t\t\t} }\n\t\t\t>\n\t\t\t\t<EditorStyles styles={ editorStyles } />\n\t\t\t\t{ contentResizeListener }\n\t\t\t\t<MemoizedBlockList renderAppender={ false } />\n\t\t\t</Iframe>\n\t\t</Disabled>\n\t);\n}\n\nexport default function AutoBlockPreview( props ) {\n\tconst [ containerResizeListener, { width: containerWidth } ] =\n\t\tuseResizeObserver();\n\n\treturn (\n\t\t<>\n\t\t\t<div style={ { position: 'relative', width: '100%', height: 0 } }>\n\t\t\t\t{ containerResizeListener }\n\t\t\t</div>\n\t\t\t<div className=\"block-editor-block-preview__container\">\n\t\t\t\t{ !! containerWidth && (\n\t\t\t\t\t<ScaledBlockPreview\n\t\t\t\t\t\t{ ...props }\n\t\t\t\t\t\tcontainerWidth={ containerWidth }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t</div>\n\t\t</>\n\t);\n}\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { useDisabled, useMergeRefs } from '@wordpress/compose';\nimport { useSelect } from '@wordpress/data';\nimport { memo, useMemo } from '@wordpress/element';\nimport deprecated from '@wordpress/deprecated';\n\n/**\n * Internal dependencies\n */\nimport { ExperimentalBlockEditorProvider } from '../provider';\nimport AutoHeightBlockPreview from './auto';\nimport EditorStyles from '../editor-styles';\nimport { store as blockEditorStore } from '../../store';\nimport { BlockListItems } from '../block-list';\n\nconst EMPTY_ADDITIONAL_STYLES = [];\n\nexport function BlockPreview( {\n\tblocks,\n\tviewportWidth = 1200,\n\tminHeight,\n\tadditionalStyles = EMPTY_ADDITIONAL_STYLES,\n\t// Deprecated props:\n\t__experimentalMinHeight,\n\t__experimentalPadding,\n} ) {\n\tif ( __experimentalMinHeight ) {\n\t\tminHeight = __experimentalMinHeight;\n\t\tdeprecated( 'The __experimentalMinHeight prop', {\n\t\t\tsince: '6.2',\n\t\t\tversion: '6.4',\n\t\t\talternative: 'minHeight',\n\t\t} );\n\t}\n\tif ( __experimentalPadding ) {\n\t\tadditionalStyles = [\n\t\t\t...additionalStyles,\n\t\t\t{ css: `body { padding: ${ __experimentalPadding }px; }` },\n\t\t];\n\t\tdeprecated( 'The __experimentalPadding prop of BlockPreview', {\n\t\t\tsince: '6.2',\n\t\t\tversion: '6.4',\n\t\t\talternative: 'additionalStyles',\n\t\t} );\n\t}\n\n\tconst originalSettings = useSelect(\n\t\t( select ) => select( blockEditorStore ).getSettings(),\n\t\t[]\n\t);\n\tconst settings = useMemo(\n\t\t() => ( {\n\t\t\t...originalSettings,\n\t\t\tfocusMode: false, // Disable \"Spotlight mode\".\n\t\t\t__unstableIsPreviewMode: true,\n\t\t} ),\n\t\t[ originalSettings ]\n\t);\n\tconst renderedBlocks = useMemo(\n\t\t() => ( Array.isArray( blocks ) ? blocks : [ blocks ] ),\n\t\t[ blocks ]\n\t);\n\n\tif ( ! blocks || blocks.length === 0 ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<ExperimentalBlockEditorProvider\n\t\t\tvalue={ renderedBlocks }\n\t\t\tsettings={ settings }\n\t\t>\n\t\t\t<AutoHeightBlockPreview\n\t\t\t\tviewportWidth={ viewportWidth }\n\t\t\t\tminHeight={ minHeight }\n\t\t\t\tadditionalStyles={ additionalStyles }\n\t\t\t/>\n\t\t</ExperimentalBlockEditorProvider>\n\t);\n}\n\n/**\n * BlockPreview renders a preview of a block or array of blocks.\n *\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/block-preview/README.md\n *\n * @param {Object}       preview               options for how the preview should be shown\n * @param {Array|Object} preview.blocks        A block instance (object) or an array of blocks to be previewed.\n * @param {number}       preview.viewportWidth Width of the preview container in pixels. Controls at what size the blocks will be rendered inside the preview. Default: 700.\n *\n * @return {Component} The component to be rendered.\n */\nexport default memo( BlockPreview );\n\n/**\n * This hook is used to lightly mark an element as a block preview wrapper\n * element. Call this hook and pass the returned props to the element to mark as\n * a block preview wrapper, automatically rendering inner blocks as children. If\n * you define a ref for the element, it is important to pass the ref to this\n * hook, which the hook in turn will pass to the component through the props it\n * returns. Optionally, you can also pass any other props through this hook, and\n * they will be merged and returned.\n *\n * @param {Object}    options        Preview options.\n * @param {WPBlock[]} options.blocks Block objects.\n * @param {Object}    options.props  Optional. Props to pass to the element. Must contain\n *                                   the ref if one is defined.\n * @param {Object}    options.layout Layout settings to be used in the preview.\n */\nexport function useBlockPreview( { blocks, props = {}, layout } ) {\n\tconst originalSettings = useSelect(\n\t\t( select ) => select( blockEditorStore ).getSettings(),\n\t\t[]\n\t);\n\tconst settings = useMemo(\n\t\t() => ( {\n\t\t\t...originalSettings,\n\t\t\tstyles: undefined, // Clear styles included by the parent settings, as they are already output by the parent's EditorStyles.\n\t\t\tfocusMode: false, // Disable \"Spotlight mode\".\n\t\t\t__unstableIsPreviewMode: true,\n\t\t} ),\n\t\t[ originalSettings ]\n\t);\n\tconst disabledRef = useDisabled();\n\tconst ref = useMergeRefs( [ props.ref, disabledRef ] );\n\tconst renderedBlocks = useMemo(\n\t\t() => ( Array.isArray( blocks ) ? blocks : [ blocks ] ),\n\t\t[ blocks ]\n\t);\n\n\tconst children = (\n\t\t<ExperimentalBlockEditorProvider\n\t\t\tvalue={ renderedBlocks }\n\t\t\tsettings={ settings }\n\t\t>\n\t\t\t<EditorStyles />\n\t\t\t<BlockListItems renderAppender={ false } layout={ layout } />\n\t\t</ExperimentalBlockEditorProvider>\n\t);\n\n\treturn {\n\t\t...props,\n\t\tref,\n\t\tclassName: classnames(\n\t\t\tprops.className,\n\t\t\t'block-editor-block-preview__live-content',\n\t\t\t'components-disabled'\n\t\t),\n\t\tchildren: blocks?.length ? children : null,\n\t};\n}\n","/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\tisReusableBlock,\r\n\tcreateBlock,\r\n\tgetBlockFromExample,\r\n} from '@wordpress/blocks';\r\nimport { useMemo } from '@wordpress/element';\r\nimport { __ } from '@wordpress/i18n';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport BlockCard from '../block-card';\r\nimport BlockPreview from '../block-preview';\r\n\r\nfunction InserterPreviewPanel( { item } ) {\r\n\tconst { name, title, icon, description, initialAttributes, example } = item;\r\n\tconst isReusable = isReusableBlock( item );\r\n\tconst blocks = useMemo( () => {\r\n\t\tif ( ! example ) {\r\n\t\t\treturn createBlock( name, initialAttributes );\r\n\t\t}\r\n\t\treturn getBlockFromExample( name, {\r\n\t\t\tattributes: {\r\n\t\t\t\t...example.attributes,\r\n\t\t\t\t...initialAttributes,\r\n\t\t\t},\r\n\t\t\tinnerBlocks: example.innerBlocks,\r\n\t\t} );\r\n\t}, [ name, example, initialAttributes ] );\r\n\r\n\treturn (\r\n\t\t<div className=\"block-editor-inserter__preview-container\">\r\n\t\t\t<div className=\"block-editor-inserter__preview\">\r\n\t\t\t\t{ isReusable || example ? (\r\n\t\t\t\t\t<div className=\"block-editor-inserter__preview-content\">\r\n\t\t\t\t\t\t<BlockPreview\r\n\t\t\t\t\t\t\tblocks={ blocks }\r\n\t\t\t\t\t\t\tviewportWidth={ example?.viewportWidth ?? 500 }\r\n\t\t\t\t\t\t\tadditionalStyles={ [\r\n\t\t\t\t\t\t\t\t{ css: 'body { padding: 24px; }' },\r\n\t\t\t\t\t\t\t] }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<div className=\"block-editor-inserter__preview-content-missing\">\r\n\t\t\t\t\t\t{ __( 'No preview available.' ) }\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) }\r\n\t\t\t</div>\r\n\t\t\t{ ! isReusable && (\r\n\t\t\t\t<BlockCard\r\n\t\t\t\t\ttitle={ title }\r\n\t\t\t\t\ticon={ icon }\r\n\t\t\t\t\tdescription={ description }\r\n\t\t\t\t/>\r\n\t\t\t) }\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default InserterPreviewPanel;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\tButton,\r\n\tprivateApis as componentsPrivateApis,\r\n} from '@wordpress/components';\r\nimport { forwardRef } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { unlock } from '../../lock-unlock';\r\n\r\nconst { CompositeItemV2: CompositeItem } = unlock( componentsPrivateApis );\r\n\r\nfunction InserterListboxItem(\r\n\t{ isFirst, as: Component, children, ...props },\r\n\tref\r\n) {\r\n\treturn (\r\n\t\t<CompositeItem\r\n\t\t\tref={ ref }\r\n\t\t\trole=\"option\"\r\n\t\t\t// Use the CompositeItem `accessibleWhenDisabled` prop\r\n\t\t\t// over Button's `isFocusable`. The latter was shown to\r\n\t\t\t// cause an issue with tab order in the inserter list.\r\n\t\t\taccessibleWhenDisabled\r\n\t\t\t{ ...props }\r\n\t\t\trender={ ( htmlProps ) => {\r\n\t\t\t\tconst propsWithTabIndex = {\r\n\t\t\t\t\t...htmlProps,\r\n\t\t\t\t\ttabIndex: isFirst ? 0 : htmlProps.tabIndex,\r\n\t\t\t\t};\r\n\t\t\t\tif ( Component ) {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Component { ...propsWithTabIndex }>\r\n\t\t\t\t\t\t\t{ children }\r\n\t\t\t\t\t\t</Component>\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t\tif ( typeof children === 'function' ) {\r\n\t\t\t\t\treturn children( propsWithTabIndex );\r\n\t\t\t\t}\r\n\t\t\t\treturn <Button { ...propsWithTabIndex }>{ children }</Button>;\r\n\t\t\t} }\r\n\t\t/>\r\n\t);\r\n}\r\n\r\nexport default forwardRef( InserterListboxItem );\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst dragHandle = (\r\n\t<SVG\r\n\t\twidth=\"24\"\r\n\t\theight=\"24\"\r\n\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\tviewBox=\"0 0 24 24\"\r\n\t>\r\n\t\t<Path d=\"M8 7h2V5H8v2zm0 6h2v-2H8v2zm0 6h2v-2H8v2zm6-14v2h2V5h-2zm0 8h2v-2h-2v2zm0 6h2v-2h-2v2z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default dragHandle;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { __, _n, sprintf } from '@wordpress/i18n';\r\nimport { Flex, FlexItem } from '@wordpress/components';\r\nimport { dragHandle } from '@wordpress/icons';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport BlockIcon from '../block-icon';\r\n\r\nexport default function BlockDraggableChip( {\r\n\tcount,\r\n\ticon,\r\n\tisPattern,\r\n\tfadeWhenDisabled,\r\n} ) {\r\n\tconst patternLabel = isPattern && __( 'Pattern' );\r\n\treturn (\r\n\t\t<div className=\"block-editor-block-draggable-chip-wrapper\">\r\n\t\t\t<div\r\n\t\t\t\tclassName=\"block-editor-block-draggable-chip\"\r\n\t\t\t\tdata-testid=\"block-draggable-chip\"\r\n\t\t\t>\r\n\t\t\t\t<Flex\r\n\t\t\t\t\tjustify=\"center\"\r\n\t\t\t\t\tclassName=\"block-editor-block-draggable-chip__content\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<FlexItem>\r\n\t\t\t\t\t\t{ icon ? (\r\n\t\t\t\t\t\t\t<BlockIcon icon={ icon } />\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\tpatternLabel ||\r\n\t\t\t\t\t\t\tsprintf(\r\n\t\t\t\t\t\t\t\t/* translators: %d: Number of blocks. */\r\n\t\t\t\t\t\t\t\t_n( '%d block', '%d blocks', count ),\r\n\t\t\t\t\t\t\t\tcount\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t) }\r\n\t\t\t\t\t</FlexItem>\r\n\t\t\t\t\t<FlexItem>\r\n\t\t\t\t\t\t<BlockIcon icon={ dragHandle } />\r\n\t\t\t\t\t</FlexItem>\r\n\t\t\t\t\t{ fadeWhenDisabled && (\r\n\t\t\t\t\t\t<FlexItem className=\"block-editor-block-draggable-chip__disabled\">\r\n\t\t\t\t\t\t\t<span className=\"block-editor-block-draggable-chip__disabled-icon\"></span>\r\n\t\t\t\t\t\t</FlexItem>\r\n\t\t\t\t\t) }\r\n\t\t\t\t</Flex>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n","/**\n * WordPress dependencies\n */\nimport { Draggable } from '@wordpress/components';\nimport {\n\tcreateBlock,\n\tserialize,\n\tstore as blocksStore,\n} from '@wordpress/blocks';\nimport { useDispatch, useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport BlockDraggableChip from '../block-draggable/draggable-chip';\nimport { INSERTER_PATTERN_TYPES } from '../inserter/block-patterns-tab/utils';\nimport { store as blockEditorStore } from '../../store';\nimport { unlock } from '../../lock-unlock';\n\nconst InserterDraggableBlocks = ( {\n\tisEnabled,\n\tblocks,\n\ticon,\n\tchildren,\n\tpattern,\n} ) => {\n\tconst transferData = {\n\t\ttype: 'inserter',\n\t\tblocks,\n\t};\n\n\tconst blockTypeIcon = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getBlockType } = select( blocksStore );\n\t\t\treturn (\n\t\t\t\tblocks.length === 1 && getBlockType( blocks[ 0 ].name )?.icon\n\t\t\t);\n\t\t},\n\t\t[ blocks ]\n\t);\n\n\tconst { startDragging, stopDragging } = unlock(\n\t\tuseDispatch( blockEditorStore )\n\t);\n\n\treturn (\n\t\t<Draggable\n\t\t\t__experimentalTransferDataType=\"wp-blocks\"\n\t\t\ttransferData={ transferData }\n\t\t\tonDragStart={ ( event ) => {\n\t\t\t\tstartDragging();\n\t\t\t\tconst parsedBlocks =\n\t\t\t\t\tpattern?.type === INSERTER_PATTERN_TYPES.user &&\n\t\t\t\t\tpattern?.syncStatus !== 'unsynced'\n\t\t\t\t\t\t? [ createBlock( 'core/block', { ref: pattern.id } ) ]\n\t\t\t\t\t\t: blocks;\n\t\t\t\tevent.dataTransfer.setData(\n\t\t\t\t\t'text/html',\n\t\t\t\t\tserialize( parsedBlocks )\n\t\t\t\t);\n\t\t\t} }\n\t\t\tonDragEnd={ () => {\n\t\t\t\tstopDragging();\n\t\t\t} }\n\t\t\t__experimentalDragComponent={\n\t\t\t\t<BlockDraggableChip\n\t\t\t\t\tcount={ blocks.length }\n\t\t\t\t\ticon={ icon || ( ! pattern && blockTypeIcon ) }\n\t\t\t\t\tisPattern={ !! pattern }\n\t\t\t\t/>\n\t\t\t}\n\t\t>\n\t\t\t{ ( { onDraggableStart, onDraggableEnd } ) => {\n\t\t\t\treturn children( {\n\t\t\t\t\tdraggable: isEnabled,\n\t\t\t\t\tonDragStart: isEnabled ? onDraggableStart : undefined,\n\t\t\t\t\tonDragEnd: isEnabled ? onDraggableEnd : undefined,\n\t\t\t\t} );\n\t\t\t} }\n\t\t</Draggable>\n\t);\n};\n\nexport default InserterDraggableBlocks;\n","/**\r\n * External dependencies\r\n */\r\nimport classnames from 'classnames';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { useMemo, useRef, memo } from '@wordpress/element';\r\nimport {\r\n\tcreateBlock,\r\n\tcreateBlocksFromInnerBlocksTemplate,\r\n\tisReusableBlock,\r\n\tisTemplatePart,\r\n} from '@wordpress/blocks';\r\nimport { __experimentalTruncate as Truncate } from '@wordpress/components';\r\nimport { ENTER, isAppleOS } from '@wordpress/keycodes';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport BlockIcon from '../block-icon';\r\nimport { InserterListboxItem } from '../inserter-listbox';\r\nimport InserterDraggableBlocks from '../inserter-draggable-blocks';\r\n\r\nfunction InserterListItem( {\r\n\tclassName,\r\n\tisFirst,\r\n\titem,\r\n\tonSelect,\r\n\tonHover,\r\n\tisDraggable,\r\n\t...props\r\n} ) {\r\n\tconst isDragging = useRef( false );\r\n\tconst itemIconStyle = item.icon\r\n\t\t? {\r\n\t\t\t\tbackgroundColor: item.icon.background,\r\n\t\t\t\tcolor: item.icon.foreground,\r\n\t\t  }\r\n\t\t: {};\r\n\tconst blocks = useMemo(\r\n\t\t() => [\r\n\t\t\tcreateBlock(\r\n\t\t\t\titem.name,\r\n\t\t\t\titem.initialAttributes,\r\n\t\t\t\tcreateBlocksFromInnerBlocksTemplate( item.innerBlocks )\r\n\t\t\t),\r\n\t\t],\r\n\t\t[ item.name, item.initialAttributes, item.innerBlocks ]\r\n\t);\r\n\r\n\tconst isSynced =\r\n\t\t( isReusableBlock( item ) && item.syncStatus !== 'unsynced' ) ||\r\n\t\tisTemplatePart( item );\r\n\r\n\treturn (\r\n\t\t<InserterDraggableBlocks\r\n\t\t\tisEnabled={ isDraggable && ! item.isDisabled }\r\n\t\t\tblocks={ blocks }\r\n\t\t\ticon={ item.icon }\r\n\t\t>\r\n\t\t\t{ ( { draggable, onDragStart, onDragEnd } ) => (\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName={ classnames(\r\n\t\t\t\t\t\t'block-editor-block-types-list__list-item',\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t'is-synced': isSynced,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t) }\r\n\t\t\t\t\tdraggable={ draggable }\r\n\t\t\t\t\tonDragStart={ ( event ) => {\r\n\t\t\t\t\t\tisDragging.current = true;\r\n\t\t\t\t\t\tif ( onDragStart ) {\r\n\t\t\t\t\t\t\tonHover( null );\r\n\t\t\t\t\t\t\tonDragStart( event );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} }\r\n\t\t\t\t\tonDragEnd={ ( event ) => {\r\n\t\t\t\t\t\tisDragging.current = false;\r\n\t\t\t\t\t\tif ( onDragEnd ) {\r\n\t\t\t\t\t\t\tonDragEnd( event );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} }\r\n\t\t\t\t>\r\n\t\t\t\t\t<InserterListboxItem\r\n\t\t\t\t\t\tisFirst={ isFirst }\r\n\t\t\t\t\t\tclassName={ classnames(\r\n\t\t\t\t\t\t\t'block-editor-block-types-list__item',\r\n\t\t\t\t\t\t\tclassName\r\n\t\t\t\t\t\t) }\r\n\t\t\t\t\t\tdisabled={ item.isDisabled }\r\n\t\t\t\t\t\tonClick={ ( event ) => {\r\n\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\tonSelect(\r\n\t\t\t\t\t\t\t\titem,\r\n\t\t\t\t\t\t\t\tisAppleOS() ? event.metaKey : event.ctrlKey\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tonHover( null );\r\n\t\t\t\t\t\t} }\r\n\t\t\t\t\t\tonKeyDown={ ( event ) => {\r\n\t\t\t\t\t\t\tconst { keyCode } = event;\r\n\t\t\t\t\t\t\tif ( keyCode === ENTER ) {\r\n\t\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\t\tonSelect(\r\n\t\t\t\t\t\t\t\t\titem,\r\n\t\t\t\t\t\t\t\t\tisAppleOS() ? event.metaKey : event.ctrlKey\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\tonHover( null );\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} }\r\n\t\t\t\t\t\tonMouseEnter={ () => {\r\n\t\t\t\t\t\t\tif ( isDragging.current ) {\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tonHover( item );\r\n\t\t\t\t\t\t} }\r\n\t\t\t\t\t\tonMouseLeave={ () => onHover( null ) }\r\n\t\t\t\t\t\t{ ...props }\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\tclassName=\"block-editor-block-types-list__item-icon\"\r\n\t\t\t\t\t\t\tstyle={ itemIconStyle }\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<BlockIcon icon={ item.icon } showColors />\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t<span className=\"block-editor-block-types-list__item-title\">\r\n\t\t\t\t\t\t\t<Truncate numberOfLines={ 3 }>\r\n\t\t\t\t\t\t\t\t{ item.title }\r\n\t\t\t\t\t\t\t</Truncate>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</InserterListboxItem>\r\n\t\t\t\t</div>\r\n\t\t\t) }\r\n\t\t</InserterDraggableBlocks>\r\n\t);\r\n}\r\n\r\nexport default memo( InserterListItem );\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { forwardRef, useEffect, useState } from '@wordpress/element';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { speak } from '@wordpress/a11y';\r\n\r\nfunction InserterListboxGroup( props, ref ) {\r\n\tconst [ shouldSpeak, setShouldSpeak ] = useState( false );\r\n\r\n\tuseEffect( () => {\r\n\t\tif ( shouldSpeak ) {\r\n\t\t\tspeak(\r\n\t\t\t\t__( 'Use left and right arrow keys to move through blocks' )\r\n\t\t\t);\r\n\t\t}\r\n\t}, [ shouldSpeak ] );\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tref={ ref }\r\n\t\t\trole=\"listbox\"\r\n\t\t\taria-orientation=\"horizontal\"\r\n\t\t\tonFocus={ () => {\r\n\t\t\t\tsetShouldSpeak( true );\r\n\t\t\t} }\r\n\t\t\tonBlur={ ( event ) => {\r\n\t\t\t\tconst focusingOutsideGroup = ! event.currentTarget.contains(\r\n\t\t\t\t\tevent.relatedTarget\r\n\t\t\t\t);\r\n\t\t\t\tif ( focusingOutsideGroup ) {\r\n\t\t\t\t\tsetShouldSpeak( false );\r\n\t\t\t\t}\r\n\t\t\t} }\r\n\t\t\t{ ...props }\r\n\t\t/>\r\n\t);\r\n}\r\n\r\nexport default forwardRef( InserterListboxGroup );\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { forwardRef } from '@wordpress/element';\r\nimport { privateApis as componentsPrivateApis } from '@wordpress/components';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { unlock } from '../../lock-unlock';\r\n\r\nconst { CompositeGroupV2: CompositeGroup } = unlock( componentsPrivateApis );\r\n\r\nfunction InserterListboxRow( props, ref ) {\r\n\treturn <CompositeGroup role=\"presentation\" ref={ ref } { ...props } />;\r\n}\r\n\r\nexport default forwardRef( InserterListboxRow );\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { getBlockMenuDefaultClassName } from '@wordpress/blocks';\r\nimport { useInstanceId } from '@wordpress/compose';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport InserterListItem from '../inserter-list-item';\r\nimport { InserterListboxGroup, InserterListboxRow } from '../inserter-listbox';\r\n\r\nfunction chunk( array, size ) {\r\n\tconst chunks = [];\r\n\tfor ( let i = 0, j = array.length; i < j; i += size ) {\r\n\t\tchunks.push( array.slice( i, i + size ) );\r\n\t}\r\n\treturn chunks;\r\n}\r\n\r\nfunction BlockTypesList( {\r\n\titems = [],\r\n\tonSelect,\r\n\tonHover = () => {},\r\n\tchildren,\r\n\tlabel,\r\n\tisDraggable = true,\r\n} ) {\r\n\tconst className = 'block-editor-block-types-list';\r\n\tconst listId = useInstanceId( BlockTypesList, className );\r\n\treturn (\r\n\t\t<InserterListboxGroup className={ className } aria-label={ label }>\r\n\t\t\t{ chunk( items, 3 ).map( ( row, i ) => (\r\n\t\t\t\t<InserterListboxRow key={ i }>\r\n\t\t\t\t\t{ row.map( ( item, j ) => (\r\n\t\t\t\t\t\t<InserterListItem\r\n\t\t\t\t\t\t\tkey={ item.id }\r\n\t\t\t\t\t\t\titem={ item }\r\n\t\t\t\t\t\t\tclassName={ getBlockMenuDefaultClassName(\r\n\t\t\t\t\t\t\t\titem.id\r\n\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\tonSelect={ onSelect }\r\n\t\t\t\t\t\t\tonHover={ onHover }\r\n\t\t\t\t\t\t\tisDraggable={ isDraggable && ! item.isDisabled }\r\n\t\t\t\t\t\t\tisFirst={ i === 0 && j === 0 }\r\n\t\t\t\t\t\t\trowId={ `${ listId }-${ i }` }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t) ) }\r\n\t\t\t\t</InserterListboxRow>\r\n\t\t\t) ) }\r\n\t\t\t{ children }\r\n\t\t</InserterListboxGroup>\r\n\t);\r\n}\r\n\r\nexport default BlockTypesList;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { Icon } from '@wordpress/components';\r\n\r\nfunction InserterPanel( { title, icon, children } ) {\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div className=\"block-editor-inserter__panel-header\">\r\n\t\t\t\t<h2 className=\"block-editor-inserter__panel-title\">\r\n\t\t\t\t\t{ title }\r\n\t\t\t\t</h2>\r\n\t\t\t\t<Icon icon={ icon } />\r\n\t\t\t</div>\r\n\t\t\t<div className=\"block-editor-inserter__panel-content\">\r\n\t\t\t\t{ children }\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default InserterPanel;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { privateApis as componentsPrivateApis } from '@wordpress/components';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { unlock } from '../../lock-unlock';\r\n\r\nexport { default as InserterListboxGroup } from './group';\r\nexport { default as InserterListboxRow } from './row';\r\nexport { default as InserterListboxItem } from './item';\r\n\r\nconst { CompositeV2: Composite, useCompositeStoreV2: useCompositeStore } =\r\n\tunlock( componentsPrivateApis );\r\n\r\nfunction InserterListbox( { children } ) {\r\n\tconst store = useCompositeStore( {\r\n\t\tfocusShift: true,\r\n\t\tfocusWrap: 'horizontal',\r\n\t} );\r\n\r\n\treturn (\r\n\t\t<Composite store={ store } render={ <></> }>\r\n\t\t\t{ children }\r\n\t\t</Composite>\r\n\t);\r\n}\r\n\r\nexport default InserterListbox;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { __, _x } from '@wordpress/i18n';\r\nimport { useMemo, useEffect } from '@wordpress/element';\r\nimport { pipe, useAsyncList } from '@wordpress/compose';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport BlockTypesList from '../block-types-list';\r\nimport InserterPanel from './panel';\r\nimport useBlockTypesState from './hooks/use-block-types-state';\r\nimport InserterListbox from '../inserter-listbox';\r\nimport { orderBy } from '../../utils/sorting';\r\n\r\nconst getBlockNamespace = ( item ) => item.name.split( '/' )[ 0 ];\r\n\r\nconst MAX_SUGGESTED_ITEMS = 6;\r\n\r\n/**\r\n * Shared reference to an empty array for cases where it is important to avoid\r\n * returning a new array reference on every invocation and rerendering the component.\r\n *\r\n * @type {Array}\r\n */\r\nconst EMPTY_ARRAY = [];\r\n\r\nexport function BlockTypesTab( {\r\n\trootClientId,\r\n\tonInsert,\r\n\tonHover,\r\n\tshowMostUsedBlocks,\r\n} ) {\r\n\tconst [ items, categories, collections, onSelectItem ] = useBlockTypesState(\r\n\t\trootClientId,\r\n\t\tonInsert\r\n\t);\r\n\r\n\tconst suggestedItems = useMemo( () => {\r\n\t\treturn orderBy( items, 'frecency', 'desc' ).slice(\r\n\t\t\t0,\r\n\t\t\tMAX_SUGGESTED_ITEMS\r\n\t\t);\r\n\t}, [ items ] );\r\n\r\n\tconst uncategorizedItems = useMemo( () => {\r\n\t\treturn items.filter( ( item ) => ! item.category );\r\n\t}, [ items ] );\r\n\r\n\tconst itemsPerCategory = useMemo( () => {\r\n\t\treturn pipe(\r\n\t\t\t( itemList ) =>\r\n\t\t\t\titemList.filter(\r\n\t\t\t\t\t( item ) => item.category && item.category !== 'reusable'\r\n\t\t\t\t),\r\n\t\t\t( itemList ) =>\r\n\t\t\t\titemList.reduce( ( acc, item ) => {\r\n\t\t\t\t\tconst { category } = item;\r\n\t\t\t\t\tif ( ! acc[ category ] ) {\r\n\t\t\t\t\t\tacc[ category ] = [];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tacc[ category ].push( item );\r\n\t\t\t\t\treturn acc;\r\n\t\t\t\t}, {} )\r\n\t\t)( items );\r\n\t}, [ items ] );\r\n\r\n\tconst itemsPerCollection = useMemo( () => {\r\n\t\t// Create a new Object to avoid mutating collection.\r\n\t\tconst result = { ...collections };\r\n\t\tObject.keys( collections ).forEach( ( namespace ) => {\r\n\t\t\tresult[ namespace ] = items.filter(\r\n\t\t\t\t( item ) => getBlockNamespace( item ) === namespace\r\n\t\t\t);\r\n\t\t\tif ( result[ namespace ].length === 0 ) {\r\n\t\t\t\tdelete result[ namespace ];\r\n\t\t\t}\r\n\t\t} );\r\n\r\n\t\treturn result;\r\n\t}, [ items, collections ] );\r\n\r\n\t// Hide block preview on unmount.\r\n\tuseEffect( () => () => onHover( null ), [] );\r\n\r\n\t/**\r\n\t * The inserter contains a big number of blocks and opening it is a costful operation.\r\n\t * The rendering is the most costful part of it, in order to improve the responsiveness\r\n\t * of the \"opening\" action, these lazy lists allow us to render the inserter category per category,\r\n\t * once all the categories are rendered, we start rendering the collections and the uncategorized block types.\r\n\t */\r\n\tconst currentlyRenderedCategories = useAsyncList( categories );\r\n\tconst didRenderAllCategories =\r\n\t\tcategories.length === currentlyRenderedCategories.length;\r\n\r\n\t// Async List requires an array.\r\n\tconst collectionEntries = useMemo( () => {\r\n\t\treturn Object.entries( collections );\r\n\t}, [ collections ] );\r\n\tconst currentlyRenderedCollections = useAsyncList(\r\n\t\tdidRenderAllCategories ? collectionEntries : EMPTY_ARRAY\r\n\t);\r\n\r\n\treturn (\r\n\t\t<InserterListbox>\r\n\t\t\t<div>\r\n\t\t\t\t{ showMostUsedBlocks && !! suggestedItems.length && (\r\n\t\t\t\t\t<InserterPanel title={ _x( 'Most used', 'blocks' ) }>\r\n\t\t\t\t\t\t<BlockTypesList\r\n\t\t\t\t\t\t\titems={ suggestedItems }\r\n\t\t\t\t\t\t\tonSelect={ onSelectItem }\r\n\t\t\t\t\t\t\tonHover={ onHover }\r\n\t\t\t\t\t\t\tlabel={ _x( 'Most used', 'blocks' ) }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</InserterPanel>\r\n\t\t\t\t) }\r\n\r\n\t\t\t\t{ currentlyRenderedCategories.map( ( category ) => {\r\n\t\t\t\t\tconst categoryItems = itemsPerCategory[ category.slug ];\r\n\t\t\t\t\tif ( ! categoryItems || ! categoryItems.length ) {\r\n\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<InserterPanel\r\n\t\t\t\t\t\t\tkey={ category.slug }\r\n\t\t\t\t\t\t\ttitle={ category.title }\r\n\t\t\t\t\t\t\ticon={ category.icon }\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<BlockTypesList\r\n\t\t\t\t\t\t\t\titems={ categoryItems }\r\n\t\t\t\t\t\t\t\tonSelect={ onSelectItem }\r\n\t\t\t\t\t\t\t\tonHover={ onHover }\r\n\t\t\t\t\t\t\t\tlabel={ category.title }\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</InserterPanel>\r\n\t\t\t\t\t);\r\n\t\t\t\t} ) }\r\n\r\n\t\t\t\t{ didRenderAllCategories && uncategorizedItems.length > 0 && (\r\n\t\t\t\t\t<InserterPanel\r\n\t\t\t\t\t\tclassName=\"block-editor-inserter__uncategorized-blocks-panel\"\r\n\t\t\t\t\t\ttitle={ __( 'Uncategorized' ) }\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<BlockTypesList\r\n\t\t\t\t\t\t\titems={ uncategorizedItems }\r\n\t\t\t\t\t\t\tonSelect={ onSelectItem }\r\n\t\t\t\t\t\t\tonHover={ onHover }\r\n\t\t\t\t\t\t\tlabel={ __( 'Uncategorized' ) }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</InserterPanel>\r\n\t\t\t\t) }\r\n\r\n\t\t\t\t{ currentlyRenderedCollections.map(\r\n\t\t\t\t\t( [ namespace, collection ] ) => {\r\n\t\t\t\t\t\tconst collectionItems = itemsPerCollection[ namespace ];\r\n\t\t\t\t\t\tif ( ! collectionItems || ! collectionItems.length ) {\r\n\t\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<InserterPanel\r\n\t\t\t\t\t\t\t\tkey={ namespace }\r\n\t\t\t\t\t\t\t\ttitle={ collection.title }\r\n\t\t\t\t\t\t\t\ticon={ collection.icon }\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<BlockTypesList\r\n\t\t\t\t\t\t\t\t\titems={ collectionItems }\r\n\t\t\t\t\t\t\t\t\tonSelect={ onSelectItem }\r\n\t\t\t\t\t\t\t\t\tonHover={ onHover }\r\n\t\t\t\t\t\t\t\t\tlabel={ collection.title }\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</InserterPanel>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t) }\r\n\t\t\t</div>\r\n\t\t</InserterListbox>\r\n\t);\r\n}\r\n\r\nexport default BlockTypesTab;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { Button, SearchControl } from '@wordpress/components';\r\nimport { __ } from '@wordpress/i18n';\r\n\r\nfunction PatternCategoriesList( {\r\n\tselectedCategory,\r\n\tpatternCategories,\r\n\tonClickCategory,\r\n} ) {\r\n\tconst baseClassName = 'block-editor-block-patterns-explorer__sidebar';\r\n\treturn (\r\n\t\t<div className={ `${ baseClassName }__categories-list` }>\r\n\t\t\t{ patternCategories.map( ( { name, label } ) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tkey={ name }\r\n\t\t\t\t\t\tlabel={ label }\r\n\t\t\t\t\t\tclassName={ `${ baseClassName }__categories-list__item` }\r\n\t\t\t\t\t\tisPressed={ selectedCategory === name }\r\n\t\t\t\t\t\tonClick={ () => {\r\n\t\t\t\t\t\t\tonClickCategory( name );\r\n\t\t\t\t\t\t} }\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{ label }\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t);\r\n\t\t\t} ) }\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nfunction PatternsExplorerSearch( { searchValue, setSearchValue } ) {\r\n\tconst baseClassName = 'block-editor-block-patterns-explorer__search';\r\n\treturn (\r\n\t\t<div className={ baseClassName }>\r\n\t\t\t<SearchControl\r\n\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t\tonChange={ setSearchValue }\r\n\t\t\t\tvalue={ searchValue }\r\n\t\t\t\tlabel={ __( 'Search for patterns' ) }\r\n\t\t\t\tplaceholder={ __( 'Search' ) }\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nfunction PatternExplorerSidebar( {\r\n\tselectedCategory,\r\n\tpatternCategories,\r\n\tonClickCategory,\r\n\tsearchValue,\r\n\tsetSearchValue,\r\n} ) {\r\n\tconst baseClassName = 'block-editor-block-patterns-explorer__sidebar';\r\n\treturn (\r\n\t\t<div className={ baseClassName }>\r\n\t\t\t<PatternsExplorerSearch\r\n\t\t\t\tsearchValue={ searchValue }\r\n\t\t\t\tsetSearchValue={ setSearchValue }\r\n\t\t\t/>\r\n\t\t\t{ ! searchValue && (\r\n\t\t\t\t<PatternCategoriesList\r\n\t\t\t\t\tselectedCategory={ selectedCategory }\r\n\t\t\t\t\tpatternCategories={ patternCategories }\r\n\t\t\t\t\tonClickCategory={ onClickCategory }\r\n\t\t\t\t/>\r\n\t\t\t) }\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default PatternExplorerSidebar;\r\n","/**\n * WordPress dependencies\n */\nimport {\n\t__experimentalVStack as VStack,\n\t__experimentalHStack as HStack,\n\t__experimentalText as Text,\n\tButton,\n} from '@wordpress/components';\nimport { __, _x, _n, sprintf } from '@wordpress/i18n';\n\nexport default function Pagination( {\n\tcurrentPage,\n\tnumPages,\n\tchangePage,\n\ttotalItems,\n} ) {\n\treturn (\n\t\t<VStack className=\"block-editor-patterns__grid-pagination-wrapper\">\n\t\t\t<Text variant=\"muted\">\n\t\t\t\t{\n\t\t\t\t\t// translators: %s: Total number of patterns.\n\t\t\t\t\tsprintf(\n\t\t\t\t\t\t// translators: %s: Total number of patterns.\n\t\t\t\t\t\t_n( '%s item', '%s items', totalItems ),\n\t\t\t\t\t\ttotalItems\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t</Text>\n\n\t\t\t{ numPages > 1 && (\n\t\t\t\t<HStack\n\t\t\t\t\texpanded={ false }\n\t\t\t\t\tspacing={ 3 }\n\t\t\t\t\tjustify=\"flex-start\"\n\t\t\t\t\tclassName=\"block-editor-patterns__grid-pagination\"\n\t\t\t\t>\n\t\t\t\t\t<HStack\n\t\t\t\t\t\texpanded={ false }\n\t\t\t\t\t\tspacing={ 1 }\n\t\t\t\t\t\tclassName=\"block-editor-patterns__grid-pagination-previous\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"tertiary\"\n\t\t\t\t\t\t\tonClick={ () => changePage( 1 ) }\n\t\t\t\t\t\t\tdisabled={ currentPage === 1 }\n\t\t\t\t\t\t\taria-label={ __( 'First page' ) }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span></span>\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"tertiary\"\n\t\t\t\t\t\t\tonClick={ () => changePage( currentPage - 1 ) }\n\t\t\t\t\t\t\tdisabled={ currentPage === 1 }\n\t\t\t\t\t\t\taria-label={ __( 'Previous page' ) }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span></span>\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</HStack>\n\t\t\t\t\t<Text variant=\"muted\">\n\t\t\t\t\t\t{ sprintf(\n\t\t\t\t\t\t\t// translators: %1$s: Current page number, %2$s: Total number of pages.\n\t\t\t\t\t\t\t_x( '%1$s of %2$s', 'paging' ),\n\t\t\t\t\t\t\tcurrentPage,\n\t\t\t\t\t\t\tnumPages\n\t\t\t\t\t\t) }\n\t\t\t\t\t</Text>\n\t\t\t\t\t<HStack\n\t\t\t\t\t\texpanded={ false }\n\t\t\t\t\t\tspacing={ 1 }\n\t\t\t\t\t\tclassName=\"block-editor-patterns__grid-pagination-next\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"tertiary\"\n\t\t\t\t\t\t\tonClick={ () => changePage( currentPage + 1 ) }\n\t\t\t\t\t\t\tdisabled={ currentPage === numPages }\n\t\t\t\t\t\t\taria-label={ __( 'Next page' ) }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span></span>\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"tertiary\"\n\t\t\t\t\t\t\tonClick={ () => changePage( numPages ) }\n\t\t\t\t\t\t\tdisabled={ currentPage === numPages }\n\t\t\t\t\t\t\taria-label={ __( 'Last page' ) }\n\t\t\t\t\t\t\tsize=\"default\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span></span>\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</HStack>\n\t\t\t\t</HStack>\n\t\t\t) }\n\t\t</VStack>\n\t);\n}\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { useEffect, useState, forwardRef } from '@wordpress/element';\nimport {\n\tVisuallyHidden,\n\tTooltip,\n\tprivateApis as componentsPrivateApis,\n\t__experimentalHStack as HStack,\n} from '@wordpress/components';\nimport { useInstanceId } from '@wordpress/compose';\nimport { __ } from '@wordpress/i18n';\nimport { Icon, symbol } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport { unlock } from '../../lock-unlock';\nimport BlockPreview from '../block-preview';\nimport InserterDraggableBlocks from '../inserter-draggable-blocks';\nimport BlockPatternsPaging from '../block-patterns-paging';\nimport { INSERTER_PATTERN_TYPES } from '../inserter/block-patterns-tab/utils';\n\nconst {\n\tCompositeV2: Composite,\n\tCompositeItemV2: CompositeItem,\n\tuseCompositeStoreV2: useCompositeStore,\n} = unlock( componentsPrivateApis );\n\nconst WithToolTip = ( { showTooltip, title, children } ) => {\n\tif ( showTooltip ) {\n\t\treturn <Tooltip text={ title }>{ children }</Tooltip>;\n\t}\n\treturn <>{ children }</>;\n};\n\nfunction BlockPattern( {\n\tid,\n\tisDraggable,\n\tpattern,\n\tonClick,\n\tonHover,\n\tshowTitle = true,\n\tshowTooltip,\n} ) {\n\tconst [ isDragging, setIsDragging ] = useState( false );\n\tconst { blocks, viewportWidth } = pattern;\n\tconst instanceId = useInstanceId( BlockPattern );\n\tconst descriptionId = `block-editor-block-patterns-list__item-description-${ instanceId }`;\n\n\treturn (\n\t\t<InserterDraggableBlocks\n\t\t\tisEnabled={ isDraggable }\n\t\t\tblocks={ blocks }\n\t\t\tpattern={ pattern }\n\t\t>\n\t\t\t{ ( { draggable, onDragStart, onDragEnd } ) => (\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"block-editor-block-patterns-list__list-item\"\n\t\t\t\t\tdraggable={ draggable }\n\t\t\t\t\tonDragStart={ ( event ) => {\n\t\t\t\t\t\tsetIsDragging( true );\n\t\t\t\t\t\tif ( onDragStart ) {\n\t\t\t\t\t\t\tonHover?.( null );\n\t\t\t\t\t\t\tonDragStart( event );\n\t\t\t\t\t\t}\n\t\t\t\t\t} }\n\t\t\t\t\tonDragEnd={ ( event ) => {\n\t\t\t\t\t\tsetIsDragging( false );\n\t\t\t\t\t\tif ( onDragEnd ) {\n\t\t\t\t\t\t\tonDragEnd( event );\n\t\t\t\t\t\t}\n\t\t\t\t\t} }\n\t\t\t\t>\n\t\t\t\t\t<WithToolTip\n\t\t\t\t\t\tshowTooltip={\n\t\t\t\t\t\t\tshowTooltip &&\n\t\t\t\t\t\t\t! pattern.type !== INSERTER_PATTERN_TYPES.user\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttitle={ pattern.title }\n\t\t\t\t\t>\n\t\t\t\t\t\t<CompositeItem\n\t\t\t\t\t\t\trender={\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\trole=\"option\"\n\t\t\t\t\t\t\t\t\taria-label={ pattern.title }\n\t\t\t\t\t\t\t\t\taria-describedby={\n\t\t\t\t\t\t\t\t\t\tpattern.description\n\t\t\t\t\t\t\t\t\t\t\t? descriptionId\n\t\t\t\t\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tclassName={ classnames(\n\t\t\t\t\t\t\t\t\t\t'block-editor-block-patterns-list__item',\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t'block-editor-block-patterns-list__list-item-synced':\n\t\t\t\t\t\t\t\t\t\t\t\tpattern.type ===\n\t\t\t\t\t\t\t\t\t\t\t\t\tINSERTER_PATTERN_TYPES.user &&\n\t\t\t\t\t\t\t\t\t\t\t\t! pattern.syncStatus,\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tid={ id }\n\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\tonClick( pattern, blocks );\n\t\t\t\t\t\t\t\tonHover?.( null );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tonMouseEnter={ () => {\n\t\t\t\t\t\t\t\tif ( isDragging ) {\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tonHover?.( pattern );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tonMouseLeave={ () => onHover?.( null ) }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<BlockPreview\n\t\t\t\t\t\t\t\tblocks={ blocks }\n\t\t\t\t\t\t\t\tviewportWidth={ viewportWidth }\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t{ showTitle && (\n\t\t\t\t\t\t\t\t<HStack className=\"block-editor-patterns__pattern-details\">\n\t\t\t\t\t\t\t\t\t{ pattern.type ===\n\t\t\t\t\t\t\t\t\t\tINSERTER_PATTERN_TYPES.user &&\n\t\t\t\t\t\t\t\t\t\t! pattern.syncStatus && (\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"block-editor-patterns__pattern-icon-wrapper\">\n\t\t\t\t\t\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"block-editor-patterns__pattern-icon\"\n\t\t\t\t\t\t\t\t\t\t\t\t\ticon={ symbol }\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t{ ( ! showTooltip ||\n\t\t\t\t\t\t\t\t\t\tpattern.type ===\n\t\t\t\t\t\t\t\t\t\t\tINSERTER_PATTERN_TYPES.user ) && (\n\t\t\t\t\t\t\t\t\t\t<div className=\"block-editor-block-patterns-list__item-title\">\n\t\t\t\t\t\t\t\t\t\t\t{ pattern.title }\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t</HStack>\n\t\t\t\t\t\t\t) }\n\n\t\t\t\t\t\t\t{ !! pattern.description && (\n\t\t\t\t\t\t\t\t<VisuallyHidden id={ descriptionId }>\n\t\t\t\t\t\t\t\t\t{ pattern.description }\n\t\t\t\t\t\t\t\t</VisuallyHidden>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</CompositeItem>\n\t\t\t\t\t</WithToolTip>\n\t\t\t\t</div>\n\t\t\t) }\n\t\t</InserterDraggableBlocks>\n\t);\n}\n\nfunction BlockPatternPlaceholder() {\n\treturn (\n\t\t<div className=\"block-editor-block-patterns-list__item is-placeholder\" />\n\t);\n}\n\nfunction BlockPatternsList(\n\t{\n\t\tisDraggable,\n\t\tblockPatterns,\n\t\tshownPatterns,\n\t\tonHover,\n\t\tonClickPattern,\n\t\torientation,\n\t\tlabel = __( 'Block patterns' ),\n\t\tshowTitle = true,\n\t\tshowTitlesAsTooltip,\n\t\tpagingProps,\n\t},\n\tref\n) {\n\tconst compositeStore = useCompositeStore( { orientation } );\n\tconst { setActiveId } = compositeStore;\n\n\tuseEffect( () => {\n\t\t// We reset the active composite item whenever the\n\t\t// available patterns change, to make sure that\n\t\t// focus is put back to the start.\n\t\tsetActiveId( undefined );\n\t}, [ setActiveId, shownPatterns, blockPatterns ] );\n\n\treturn (\n\t\t<Composite\n\t\t\tstore={ compositeStore }\n\t\t\trole=\"listbox\"\n\t\t\tclassName=\"block-editor-block-patterns-list\"\n\t\t\taria-label={ label }\n\t\t\tref={ ref }\n\t\t>\n\t\t\t{ blockPatterns.map( ( pattern ) => {\n\t\t\t\tconst isShown = shownPatterns.includes( pattern );\n\t\t\t\treturn isShown ? (\n\t\t\t\t\t<BlockPattern\n\t\t\t\t\t\tkey={ pattern.name }\n\t\t\t\t\t\tid={ pattern.name }\n\t\t\t\t\t\tpattern={ pattern }\n\t\t\t\t\t\tonClick={ onClickPattern }\n\t\t\t\t\t\tonHover={ onHover }\n\t\t\t\t\t\tisDraggable={ isDraggable }\n\t\t\t\t\t\tshowTitle={ showTitle }\n\t\t\t\t\t\tshowTooltip={ showTitlesAsTooltip }\n\t\t\t\t\t/>\n\t\t\t\t) : (\n\t\t\t\t\t<BlockPatternPlaceholder key={ pattern.name } />\n\t\t\t\t);\n\t\t\t} ) }\n\t\t\t{ pagingProps && <BlockPatternsPaging { ...pagingProps } /> }\n\t\t</Composite>\n\t);\n}\n\nexport default forwardRef( BlockPatternsList );\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useDispatch, useSelect } from '@wordpress/data';\r\nimport { isUnmodifiedDefaultBlock } from '@wordpress/blocks';\r\nimport { _n, sprintf } from '@wordpress/i18n';\r\nimport { speak } from '@wordpress/a11y';\r\nimport { useCallback } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as blockEditorStore } from '../../../store';\r\n\r\n/**\r\n * @typedef WPInserterConfig\r\n *\r\n * @property {string=}   rootClientId   If set, insertion will be into the\r\n *                                      block with this ID.\r\n * @property {number=}   insertionIndex If set, insertion will be into this\r\n *                                      explicit position.\r\n * @property {string=}   clientId       If set, insertion will be after the\r\n *                                      block with this ID.\r\n * @property {boolean=}  isAppender     Whether the inserter is an appender\r\n *                                      or not.\r\n * @property {Function=} onSelect       Called after insertion.\r\n */\r\n\r\n/**\r\n * Returns the insertion point state given the inserter config.\r\n *\r\n * @param {WPInserterConfig} config Inserter Config.\r\n * @return {Array} Insertion Point State (rootClientID, onInsertBlocks and onToggle).\r\n */\r\nfunction useInsertionPoint( {\r\n\trootClientId = '',\r\n\tinsertionIndex,\r\n\tclientId,\r\n\tisAppender,\r\n\tonSelect,\r\n\tshouldFocusBlock = true,\r\n\tselectBlockOnInsert = true,\r\n} ) {\r\n\tconst { getSelectedBlock } = useSelect( blockEditorStore );\r\n\tconst { destinationRootClientId, destinationIndex } = useSelect(\r\n\t\t( select ) => {\r\n\t\t\tconst {\r\n\t\t\t\tgetSelectedBlockClientId,\r\n\t\t\t\tgetBlockRootClientId,\r\n\t\t\t\tgetBlockIndex,\r\n\t\t\t\tgetBlockOrder,\r\n\t\t\t} = select( blockEditorStore );\r\n\t\t\tconst selectedBlockClientId = getSelectedBlockClientId();\r\n\r\n\t\t\tlet _destinationRootClientId = rootClientId;\r\n\t\t\tlet _destinationIndex;\r\n\r\n\t\t\tif ( insertionIndex !== undefined ) {\r\n\t\t\t\t// Insert into a specific index.\r\n\t\t\t\t_destinationIndex = insertionIndex;\r\n\t\t\t} else if ( clientId ) {\r\n\t\t\t\t// Insert after a specific client ID.\r\n\t\t\t\t_destinationIndex = getBlockIndex( clientId );\r\n\t\t\t} else if ( ! isAppender && selectedBlockClientId ) {\r\n\t\t\t\t_destinationRootClientId = getBlockRootClientId(\r\n\t\t\t\t\tselectedBlockClientId\r\n\t\t\t\t);\r\n\t\t\t\t_destinationIndex = getBlockIndex( selectedBlockClientId ) + 1;\r\n\t\t\t} else {\r\n\t\t\t\t// Insert at the end of the list.\r\n\t\t\t\t_destinationIndex = getBlockOrder(\r\n\t\t\t\t\t_destinationRootClientId\r\n\t\t\t\t).length;\r\n\t\t\t}\r\n\r\n\t\t\treturn {\r\n\t\t\t\tdestinationRootClientId: _destinationRootClientId,\r\n\t\t\t\tdestinationIndex: _destinationIndex,\r\n\t\t\t};\r\n\t\t},\r\n\t\t[ rootClientId, insertionIndex, clientId, isAppender ]\r\n\t);\r\n\r\n\tconst {\r\n\t\treplaceBlocks,\r\n\t\tinsertBlocks,\r\n\t\tshowInsertionPoint,\r\n\t\thideInsertionPoint,\r\n\t} = useDispatch( blockEditorStore );\r\n\r\n\tconst onInsertBlocks = useCallback(\r\n\t\t( blocks, meta, shouldForceFocusBlock = false ) => {\r\n\t\t\tconst selectedBlock = getSelectedBlock();\r\n\r\n\t\t\tif (\r\n\t\t\t\t! isAppender &&\r\n\t\t\t\tselectedBlock &&\r\n\t\t\t\tisUnmodifiedDefaultBlock( selectedBlock )\r\n\t\t\t) {\r\n\t\t\t\treplaceBlocks(\r\n\t\t\t\t\tselectedBlock.clientId,\r\n\t\t\t\t\tblocks,\r\n\t\t\t\t\tnull,\r\n\t\t\t\t\tshouldFocusBlock || shouldForceFocusBlock ? 0 : null,\r\n\t\t\t\t\tmeta\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tinsertBlocks(\r\n\t\t\t\t\tblocks,\r\n\t\t\t\t\tdestinationIndex,\r\n\t\t\t\t\tdestinationRootClientId,\r\n\t\t\t\t\tselectBlockOnInsert,\r\n\t\t\t\t\tshouldFocusBlock || shouldForceFocusBlock ? 0 : null,\r\n\t\t\t\t\tmeta\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tconst blockLength = Array.isArray( blocks ) ? blocks.length : 1;\r\n\t\t\tconst message = sprintf(\r\n\t\t\t\t// translators: %d: the name of the block that has been added\r\n\t\t\t\t_n( '%d block added.', '%d blocks added.', blockLength ),\r\n\t\t\t\tblockLength\r\n\t\t\t);\r\n\t\t\tspeak( message );\r\n\r\n\t\t\tif ( onSelect ) {\r\n\t\t\t\tonSelect( blocks );\r\n\t\t\t}\r\n\t\t},\r\n\t\t[\r\n\t\t\tisAppender,\r\n\t\t\tgetSelectedBlock,\r\n\t\t\treplaceBlocks,\r\n\t\t\tinsertBlocks,\r\n\t\t\tdestinationRootClientId,\r\n\t\t\tdestinationIndex,\r\n\t\t\tonSelect,\r\n\t\t\tshouldFocusBlock,\r\n\t\t\tselectBlockOnInsert,\r\n\t\t]\r\n\t);\r\n\r\n\tconst onToggleInsertionPoint = useCallback(\r\n\t\t( show ) => {\r\n\t\t\tif ( show ) {\r\n\t\t\t\tshowInsertionPoint( destinationRootClientId, destinationIndex );\r\n\t\t\t} else {\r\n\t\t\t\thideInsertionPoint();\r\n\t\t\t}\r\n\t\t},\r\n\t\t[\r\n\t\t\tshowInsertionPoint,\r\n\t\t\thideInsertionPoint,\r\n\t\t\tdestinationRootClientId,\r\n\t\t\tdestinationIndex,\r\n\t\t]\r\n\t);\r\n\r\n\treturn [ destinationRootClientId, onInsertBlocks, onToggleInsertionPoint ];\r\n}\r\n\r\nexport default useInsertionPoint;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useCallback, useMemo } from '@wordpress/element';\r\nimport { cloneBlock, createBlock } from '@wordpress/blocks';\r\nimport { useDispatch, useSelect } from '@wordpress/data';\r\nimport { __, sprintf } from '@wordpress/i18n';\r\nimport { store as noticesStore } from '@wordpress/notices';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as blockEditorStore } from '../../../store';\r\nimport { INSERTER_PATTERN_TYPES } from '../block-patterns-tab/utils';\r\n\r\n/**\r\n * Retrieves the block patterns inserter state.\r\n *\r\n * @param {Function} onInsert     function called when inserter a list of blocks.\r\n * @param {string=}  rootClientId Insertion's root client ID.\r\n *\r\n * @return {Array} Returns the patterns state. (patterns, categories, onSelect handler)\r\n */\r\nconst usePatternsState = ( onInsert, rootClientId ) => {\r\n\tconst { patternCategories, patterns, userPatternCategories } = useSelect(\r\n\t\t( select ) => {\r\n\t\t\tconst { __experimentalGetAllowedPatterns, getSettings } =\r\n\t\t\t\tselect( blockEditorStore );\r\n\t\t\tconst {\r\n\t\t\t\t__experimentalUserPatternCategories,\r\n\t\t\t\t__experimentalBlockPatternCategories,\r\n\t\t\t} = getSettings();\r\n\t\t\treturn {\r\n\t\t\t\tpatterns: __experimentalGetAllowedPatterns( rootClientId ),\r\n\t\t\t\tuserPatternCategories: __experimentalUserPatternCategories,\r\n\t\t\t\tpatternCategories: __experimentalBlockPatternCategories,\r\n\t\t\t};\r\n\t\t},\r\n\t\t[ rootClientId ]\r\n\t);\r\n\r\n\tconst allCategories = useMemo( () => {\r\n\t\tconst categories = [ ...patternCategories ];\r\n\t\tuserPatternCategories?.forEach( ( userCategory ) => {\r\n\t\t\tif (\r\n\t\t\t\t! categories.find(\r\n\t\t\t\t\t( existingCategory ) =>\r\n\t\t\t\t\t\texistingCategory.name === userCategory.name\r\n\t\t\t\t)\r\n\t\t\t) {\r\n\t\t\t\tcategories.push( userCategory );\r\n\t\t\t}\r\n\t\t} );\r\n\t\treturn categories;\r\n\t}, [ patternCategories, userPatternCategories ] );\r\n\r\n\tconst { createSuccessNotice } = useDispatch( noticesStore );\r\n\tconst onClickPattern = useCallback(\r\n\t\t( pattern, blocks ) => {\r\n\t\t\tconst patternBlocks =\r\n\t\t\t\tpattern.type === INSERTER_PATTERN_TYPES.user &&\r\n\t\t\t\tpattern.syncStatus !== 'unsynced'\r\n\t\t\t\t\t? [ createBlock( 'core/block', { ref: pattern.id } ) ]\r\n\t\t\t\t\t: blocks;\r\n\t\t\tonInsert(\r\n\t\t\t\t( patternBlocks ?? [] ).map( ( block ) => cloneBlock( block ) ),\r\n\t\t\t\tpattern.name\r\n\t\t\t);\r\n\t\t\tcreateSuccessNotice(\r\n\t\t\t\tsprintf(\r\n\t\t\t\t\t/* translators: %s: block pattern title. */\r\n\t\t\t\t\t__( 'Block pattern \"%s\" inserted.' ),\r\n\t\t\t\t\tpattern.title\r\n\t\t\t\t),\r\n\t\t\t\t{\r\n\t\t\t\t\ttype: 'snackbar',\r\n\t\t\t\t\tid: 'block-pattern-inserted-notice',\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t},\r\n\t\t[ createSuccessNotice, onInsert ]\r\n\t);\r\n\r\n\treturn [ patterns, allCategories, onClickPattern ];\r\n};\r\n\r\nexport default usePatternsState;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useMemo, useState, useEffect } from '@wordpress/element';\r\nimport { useAsyncList, usePrevious } from '@wordpress/compose';\r\nimport { getScrollContainer } from '@wordpress/dom';\r\n\r\nconst PAGE_SIZE = 20;\r\nconst INITIAL_INSERTER_RESULTS = 5;\r\n\r\n/**\r\n * Supplies values needed to page the patterns list client side.\r\n *\r\n * @param {Array}  currentCategoryPatterns An array of the current patterns to display.\r\n * @param {string} currentCategory         The currently selected category.\r\n * @param {Object} scrollContainerRef      Ref of container to to find scroll container for when moving between pages.\r\n * @param {string} currentFilter           The currently search filter.\r\n *\r\n * @return {Object} Returns the relevant paging values. (totalItems, categoryPatternsList, numPages, changePage, currentPage)\r\n */\r\nexport default function usePatternsPaging(\r\n\tcurrentCategoryPatterns,\r\n\tcurrentCategory,\r\n\tscrollContainerRef,\r\n\tcurrentFilter = ''\r\n) {\r\n\tconst [ currentPage, setCurrentPage ] = useState( 1 );\r\n\tconst previousCategory = usePrevious( currentCategory );\r\n\tconst previousFilter = usePrevious( currentFilter );\r\n\tif (\r\n\t\t( previousCategory !== currentCategory ||\r\n\t\t\tpreviousFilter !== currentFilter ) &&\r\n\t\tcurrentPage !== 1\r\n\t) {\r\n\t\tsetCurrentPage( 1 );\r\n\t}\r\n\tconst totalItems = currentCategoryPatterns.length;\r\n\tconst pageIndex = currentPage - 1;\r\n\tconst categoryPatterns = useMemo( () => {\r\n\t\treturn currentCategoryPatterns.slice(\r\n\t\t\tpageIndex * PAGE_SIZE,\r\n\t\t\tpageIndex * PAGE_SIZE + PAGE_SIZE\r\n\t\t);\r\n\t}, [ pageIndex, currentCategoryPatterns ] );\r\n\tconst categoryPatternsAsyncList = useAsyncList( categoryPatterns, {\r\n\t\tstep: INITIAL_INSERTER_RESULTS,\r\n\t} );\r\n\tconst numPages = Math.ceil( currentCategoryPatterns.length / PAGE_SIZE );\r\n\tconst changePage = ( page ) => {\r\n\t\tconst scrollContainer = getScrollContainer(\r\n\t\t\tscrollContainerRef?.current\r\n\t\t);\r\n\t\tscrollContainer?.scrollTo( 0, 0 );\r\n\r\n\t\tsetCurrentPage( page );\r\n\t};\r\n\r\n\tuseEffect(\r\n\t\tfunction scrollToTopOnCategoryChange() {\r\n\t\t\tconst scrollContainer = getScrollContainer(\r\n\t\t\t\tscrollContainerRef?.current\r\n\t\t\t);\r\n\t\t\tscrollContainer?.scrollTo( 0, 0 );\r\n\t\t},\r\n\t\t[ currentCategory, scrollContainerRef ]\r\n\t);\r\n\r\n\treturn {\r\n\t\ttotalItems,\r\n\t\tcategoryPatterns,\r\n\t\tcategoryPatternsAsyncList,\r\n\t\tnumPages,\r\n\t\tchangePage,\r\n\t\tcurrentPage,\r\n\t};\r\n}\r\n","/**\n * WordPress dependencies\n */\nimport { useMemo, useEffect, useRef, useState } from '@wordpress/element';\nimport { _n, sprintf } from '@wordpress/i18n';\nimport { useDebounce } from '@wordpress/compose';\nimport { __experimentalHeading as Heading } from '@wordpress/components';\nimport { speak } from '@wordpress/a11y';\n\n/**\n * Internal dependencies\n */\nimport BlockPatternsList from '../../block-patterns-list';\nimport useInsertionPoint from '../hooks/use-insertion-point';\nimport usePatternsState from '../hooks/use-patterns-state';\nimport InserterListbox from '../../inserter-listbox';\nimport { searchItems } from '../search-items';\nimport BlockPatternsPaging from '../../block-patterns-paging';\nimport usePatternsPaging from '../hooks/use-patterns-paging';\nimport {\n\tINSERTER_PATTERN_TYPES,\n\tallPatternsCategory,\n\tmyPatternsCategory,\n} from '../block-patterns-tab/utils';\n\nfunction PatternsListHeader( { filterValue, filteredBlockPatternsLength } ) {\n\tif ( ! filterValue ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<Heading\n\t\t\tlevel={ 2 }\n\t\t\tlineHeight={ '48px' }\n\t\t\tclassName=\"block-editor-block-patterns-explorer__search-results-count\"\n\t\t>\n\t\t\t{ sprintf(\n\t\t\t\t/* translators: %d: number of patterns. */\n\t\t\t\t_n(\n\t\t\t\t\t'%d pattern found',\n\t\t\t\t\t'%d patterns found',\n\t\t\t\t\tfilteredBlockPatternsLength\n\t\t\t\t),\n\t\t\t\tfilteredBlockPatternsLength\n\t\t\t) }\n\t\t</Heading>\n\t);\n}\n\nfunction PatternList( {\n\tsearchValue,\n\tselectedCategory,\n\tpatternCategories,\n\trootClientId,\n} ) {\n\tconst container = useRef();\n\tconst debouncedSpeak = useDebounce( speak, 500 );\n\tconst [ destinationRootClientId, onInsertBlocks ] = useInsertionPoint( {\n\t\trootClientId,\n\t\tshouldFocusBlock: true,\n\t} );\n\tconst [ patterns, , onClickPattern ] = usePatternsState(\n\t\tonInsertBlocks,\n\t\tdestinationRootClientId\n\t);\n\n\tconst registeredPatternCategories = useMemo(\n\t\t() =>\n\t\t\tpatternCategories.map(\n\t\t\t\t( patternCategory ) => patternCategory.name\n\t\t\t),\n\t\t[ patternCategories ]\n\t);\n\n\tconst filteredBlockPatterns = useMemo( () => {\n\t\tconst filteredPatterns = patterns.filter( ( pattern ) => {\n\t\t\tif ( selectedCategory === allPatternsCategory.name ) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tif (\n\t\t\t\tselectedCategory === myPatternsCategory.name &&\n\t\t\t\tpattern.type === INSERTER_PATTERN_TYPES.user\n\t\t\t) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tif ( selectedCategory === 'uncategorized' ) {\n\t\t\t\tconst hasKnownCategory = pattern.categories.some(\n\t\t\t\t\t( category ) =>\n\t\t\t\t\t\tregisteredPatternCategories.includes( category )\n\t\t\t\t);\n\n\t\t\t\treturn ! pattern.categories?.length || ! hasKnownCategory;\n\t\t\t}\n\n\t\t\treturn pattern.categories?.includes( selectedCategory );\n\t\t} );\n\n\t\tif ( ! searchValue ) {\n\t\t\treturn filteredPatterns;\n\t\t}\n\n\t\treturn searchItems( filteredPatterns, searchValue );\n\t}, [\n\t\tsearchValue,\n\t\tpatterns,\n\t\tselectedCategory,\n\t\tregisteredPatternCategories,\n\t] );\n\n\t// Announce search results on change.\n\tuseEffect( () => {\n\t\tif ( ! searchValue ) {\n\t\t\treturn;\n\t\t}\n\t\tconst count = filteredBlockPatterns.length;\n\t\tconst resultsFoundMessage = sprintf(\n\t\t\t/* translators: %d: number of results. */\n\t\t\t_n( '%d result found.', '%d results found.', count ),\n\t\t\tcount\n\t\t);\n\t\tdebouncedSpeak( resultsFoundMessage );\n\t}, [ searchValue, debouncedSpeak, filteredBlockPatterns.length ] );\n\n\tconst pagingProps = usePatternsPaging(\n\t\tfilteredBlockPatterns,\n\t\tselectedCategory,\n\t\tcontainer\n\t);\n\n\t// Reset page when search value changes.\n\tconst [ previousSearchValue, setPreviousSearchValue ] =\n\t\tuseState( searchValue );\n\tif ( searchValue !== previousSearchValue ) {\n\t\tsetPreviousSearchValue( searchValue );\n\t\tpagingProps.changePage( 1 );\n\t}\n\n\tconst hasItems = !! filteredBlockPatterns?.length;\n\treturn (\n\t\t<div\n\t\t\tclassName=\"block-editor-block-patterns-explorer__list\"\n\t\t\tref={ container }\n\t\t>\n\t\t\t<PatternsListHeader\n\t\t\t\tfilterValue={ searchValue }\n\t\t\t\tfilteredBlockPatternsLength={ filteredBlockPatterns.length }\n\t\t\t/>\n\n\t\t\t<InserterListbox>\n\t\t\t\t{ hasItems && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<BlockPatternsList\n\t\t\t\t\t\t\tshownPatterns={\n\t\t\t\t\t\t\t\tpagingProps.categoryPatternsAsyncList\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tblockPatterns={ pagingProps.categoryPatterns }\n\t\t\t\t\t\t\tonClickPattern={ onClickPattern }\n\t\t\t\t\t\t\tisDraggable={ false }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<BlockPatternsPaging { ...pagingProps } />\n\t\t\t\t\t</>\n\t\t\t\t) }\n\t\t\t</InserterListbox>\n\t\t</div>\n\t);\n}\n\nexport default PatternList;\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useMemo } from '@wordpress/element';\r\nimport { _x, _n, sprintf } from '@wordpress/i18n';\r\n\r\nimport { speak } from '@wordpress/a11y';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport usePatternsState from '../hooks/use-patterns-state';\r\nimport {\r\n\tisPatternFiltered,\r\n\tallPatternsCategory,\r\n\tmyPatternsCategory,\r\n\tINSERTER_PATTERN_TYPES,\r\n} from './utils';\r\n\r\nfunction hasRegisteredCategory( pattern, allCategories ) {\r\n\tif ( ! pattern.categories || ! pattern.categories.length ) {\r\n\t\treturn false;\r\n\t}\r\n\r\n\treturn pattern.categories.some( ( cat ) =>\r\n\t\tallCategories.some( ( category ) => category.name === cat )\r\n\t);\r\n}\r\n\r\nexport function usePatternCategories( rootClientId, sourceFilter = 'all' ) {\r\n\tconst [ patterns, allCategories ] = usePatternsState(\r\n\t\tundefined,\r\n\t\trootClientId\r\n\t);\r\n\r\n\tconst filteredPatterns = useMemo(\r\n\t\t() =>\r\n\t\t\tsourceFilter === 'all'\r\n\t\t\t\t? patterns\r\n\t\t\t\t: patterns.filter(\r\n\t\t\t\t\t\t( pattern ) =>\r\n\t\t\t\t\t\t\t! isPatternFiltered( pattern, sourceFilter )\r\n\t\t\t\t  ),\r\n\t\t[ sourceFilter, patterns ]\r\n\t);\r\n\r\n\t// Remove any empty categories.\r\n\tconst populatedCategories = useMemo( () => {\r\n\t\tconst categories = allCategories\r\n\t\t\t.filter( ( category ) =>\r\n\t\t\t\tfilteredPatterns.some( ( pattern ) =>\r\n\t\t\t\t\tpattern.categories?.includes( category.name )\r\n\t\t\t\t)\r\n\t\t\t)\r\n\t\t\t.sort( ( a, b ) => a.label.localeCompare( b.label ) );\r\n\r\n\t\tif (\r\n\t\t\tfilteredPatterns.some(\r\n\t\t\t\t( pattern ) => ! hasRegisteredCategory( pattern, allCategories )\r\n\t\t\t) &&\r\n\t\t\t! categories.find(\r\n\t\t\t\t( category ) => category.name === 'uncategorized'\r\n\t\t\t)\r\n\t\t) {\r\n\t\t\tcategories.push( {\r\n\t\t\t\tname: 'uncategorized',\r\n\t\t\t\tlabel: _x( 'Uncategorized' ),\r\n\t\t\t} );\r\n\t\t}\r\n\t\tif (\r\n\t\t\tfilteredPatterns.some(\r\n\t\t\t\t( pattern ) => pattern.type === INSERTER_PATTERN_TYPES.user\r\n\t\t\t)\r\n\t\t) {\r\n\t\t\tcategories.unshift( myPatternsCategory );\r\n\t\t}\r\n\t\tif ( filteredPatterns.length > 0 ) {\r\n\t\t\tcategories.unshift( {\r\n\t\t\t\tname: allPatternsCategory.name,\r\n\t\t\t\tlabel: allPatternsCategory.label,\r\n\t\t\t} );\r\n\t\t}\r\n\t\tspeak(\r\n\t\t\tsprintf(\r\n\t\t\t\t/* translators: %d: number of categories . */\r\n\t\t\t\t_n(\r\n\t\t\t\t\t'%d category button displayed.',\r\n\t\t\t\t\t'%d category buttons displayed.',\r\n\t\t\t\t\tcategories.length\r\n\t\t\t\t),\r\n\t\t\t\tcategories.length\r\n\t\t\t)\r\n\t\t);\r\n\t\treturn categories;\r\n\t}, [ allCategories, filteredPatterns ] );\r\n\r\n\treturn populatedCategories;\r\n}\r\n","/**\n * WordPress dependencies\n */\nimport { Modal } from '@wordpress/components';\nimport { useState } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport PatternExplorerSidebar from './pattern-explorer-sidebar';\nimport PatternList from './pattern-list';\nimport { usePatternCategories } from '../block-patterns-tab/use-pattern-categories';\n\nfunction PatternsExplorer( { initialCategory, rootClientId } ) {\n\tconst [ searchValue, setSearchValue ] = useState( '' );\n\tconst [ selectedCategory, setSelectedCategory ] = useState(\n\t\tinitialCategory?.name\n\t);\n\n\tconst patternCategories = usePatternCategories( rootClientId );\n\n\treturn (\n\t\t<div className=\"block-editor-block-patterns-explorer\">\n\t\t\t<PatternExplorerSidebar\n\t\t\t\tselectedCategory={ selectedCategory }\n\t\t\t\tpatternCategories={ patternCategories }\n\t\t\t\tonClickCategory={ setSelectedCategory }\n\t\t\t\tsearchValue={ searchValue }\n\t\t\t\tsetSearchValue={ setSearchValue }\n\t\t\t/>\n\t\t\t<PatternList\n\t\t\t\tsearchValue={ searchValue }\n\t\t\t\tselectedCategory={ selectedCategory }\n\t\t\t\tpatternCategories={ patternCategories }\n\t\t\t\trootClientId={ rootClientId }\n\t\t\t/>\n\t\t</div>\n\t);\n}\n\nfunction PatternsExplorerModal( { onModalClose, ...restProps } ) {\n\treturn (\n\t\t<Modal\n\t\t\ttitle={ __( 'Patterns' ) }\n\t\t\tonRequestClose={ onModalClose }\n\t\t\tisFullScreen\n\t\t>\n\t\t\t<PatternsExplorer { ...restProps } />\n\t\t</Modal>\n\t);\n}\n\nexport default PatternsExplorerModal;\n","/**\n * WordPress dependencies\n */\nimport { __, isRTL } from '@wordpress/i18n';\nimport {\n\t__experimentalItemGroup as ItemGroup,\n\t__experimentalItem as Item,\n\t__experimentalHStack as HStack,\n\t__experimentalVStack as VStack,\n\t__experimentalSpacer as Spacer,\n\t__experimentalHeading as Heading,\n\t__experimentalView as View,\n\t__experimentalNavigatorProvider as NavigatorProvider,\n\t__experimentalNavigatorScreen as NavigatorScreen,\n\t__experimentalNavigatorButton as NavigatorButton,\n\t__experimentalNavigatorBackButton as NavigatorBackButton,\n\tFlexBlock,\n} from '@wordpress/components';\nimport { Icon, chevronRight, chevronLeft } from '@wordpress/icons';\n\nfunction ScreenHeader( { title } ) {\n\treturn (\n\t\t<VStack spacing={ 0 }>\n\t\t\t<View>\n\t\t\t\t<Spacer marginBottom={ 0 } paddingX={ 4 } paddingY={ 3 }>\n\t\t\t\t\t<HStack spacing={ 2 }>\n\t\t\t\t\t\t<NavigatorBackButton\n\t\t\t\t\t\t\tstyle={\n\t\t\t\t\t\t\t\t// TODO: This style override is also used in ToolsPanelHeader.\n\t\t\t\t\t\t\t\t// It should be supported out-of-the-box by Button.\n\t\t\t\t\t\t\t\t{ minWidth: 24, padding: 0 }\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ticon={ isRTL() ? chevronRight : chevronLeft }\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\tlabel={ __( 'Back' ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Spacer>\n\t\t\t\t\t\t\t<Heading level={ 5 }>{ title }</Heading>\n\t\t\t\t\t\t</Spacer>\n\t\t\t\t\t</HStack>\n\t\t\t\t</Spacer>\n\t\t\t</View>\n\t\t</VStack>\n\t);\n}\n\nexport default function MobileTabNavigation( { categories, children } ) {\n\treturn (\n\t\t<NavigatorProvider\n\t\t\tinitialPath=\"/\"\n\t\t\tclassName=\"block-editor-inserter__mobile-tab-navigation\"\n\t\t>\n\t\t\t<NavigatorScreen path=\"/\">\n\t\t\t\t<ItemGroup>\n\t\t\t\t\t{ categories.map( ( category ) => (\n\t\t\t\t\t\t<NavigatorButton\n\t\t\t\t\t\t\tkey={ category.name }\n\t\t\t\t\t\t\tpath={ `/category/${ category.name }` }\n\t\t\t\t\t\t\tas={ Item }\n\t\t\t\t\t\t\tisAction\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<HStack>\n\t\t\t\t\t\t\t\t<FlexBlock>{ category.label }</FlexBlock>\n\t\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\t\ticon={\n\t\t\t\t\t\t\t\t\t\tisRTL() ? chevronLeft : chevronRight\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</HStack>\n\t\t\t\t\t\t</NavigatorButton>\n\t\t\t\t\t) ) }\n\t\t\t\t</ItemGroup>\n\t\t\t</NavigatorScreen>\n\t\t\t{ categories.map( ( category ) => (\n\t\t\t\t<NavigatorScreen\n\t\t\t\t\tkey={ category.name }\n\t\t\t\t\tpath={ `/category/${ category.name }` }\n\t\t\t\t>\n\t\t\t\t\t<ScreenHeader title={ __( 'Back' ) } />\n\t\t\t\t\t{ children( category ) }\n\t\t\t\t</NavigatorScreen>\n\t\t\t) ) }\n\t\t</NavigatorProvider>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport {\n\tSVG,\n\tPath,\n\tDropdownMenu,\n\tMenuGroup,\n\tMenuItemsChoice,\n\tExternalLink,\n} from '@wordpress/components';\nimport { __, _x } from '@wordpress/i18n';\nimport { Icon } from '@wordpress/icons';\nimport { useMemo, createInterpolateElement } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport {\n\tmyPatternsCategory,\n\tINSERTER_SYNC_TYPES,\n\tINSERTER_PATTERN_TYPES,\n} from './utils';\n\nconst getShouldDisableSyncFilter = ( sourceFilter ) => sourceFilter !== 'all';\nconst getShouldDisableNonUserSources = ( category ) => {\n\treturn category.name === myPatternsCategory.name;\n};\n\nexport function PatternsFilter( {\n\tsetPatternSyncFilter,\n\tsetPatternSourceFilter,\n\tpatternSyncFilter,\n\tpatternSourceFilter,\n\tscrollContainerRef,\n\tcategory,\n} ) {\n\t// If the category is `myPatterns` then we need to set the source filter to `user`, but\n\t// we do this by deriving from props rather than calling setPatternSourceFilter otherwise\n\t// the user may be confused when switching to another category if the haven't explicity set\n\t// this filter themselves.\n\tconst currentPatternSourceFilter =\n\t\tcategory.name === myPatternsCategory.name\n\t\t\t? INSERTER_PATTERN_TYPES.user\n\t\t\t: patternSourceFilter;\n\n\t// We need to disable the sync filter option if the source filter is not 'all' or 'user'\n\t// otherwise applying them will just result in no patterns being shown.\n\tconst shouldDisableSyncFilter = getShouldDisableSyncFilter(\n\t\tcurrentPatternSourceFilter\n\t);\n\n\t// We also need to disable the directory and theme source filter options if the category\n\t// is `myPatterns` otherwise applying them will also just result in no patterns being shown.\n\tconst shouldDisableNonUserSources =\n\t\tgetShouldDisableNonUserSources( category );\n\n\tconst patternSyncMenuOptions = useMemo(\n\t\t() => [\n\t\t\t{\n\t\t\t\tvalue: 'all',\n\t\t\t\tlabel: _x( 'All', 'patterns' ),\n\t\t\t},\n\t\t\t{\n\t\t\t\tvalue: INSERTER_SYNC_TYPES.full,\n\t\t\t\tlabel: _x( 'Synced', 'patterns' ),\n\t\t\t\tdisabled: shouldDisableSyncFilter,\n\t\t\t},\n\t\t\t{\n\t\t\t\tvalue: INSERTER_SYNC_TYPES.unsynced,\n\t\t\t\tlabel: _x( 'Not synced', 'patterns' ),\n\t\t\t\tdisabled: shouldDisableSyncFilter,\n\t\t\t},\n\t\t],\n\t\t[ shouldDisableSyncFilter ]\n\t);\n\n\tconst patternSourceMenuOptions = useMemo(\n\t\t() => [\n\t\t\t{\n\t\t\t\tvalue: 'all',\n\t\t\t\tlabel: _x( 'All', 'patterns' ),\n\t\t\t\tdisabled: shouldDisableNonUserSources,\n\t\t\t},\n\t\t\t{\n\t\t\t\tvalue: INSERTER_PATTERN_TYPES.directory,\n\t\t\t\tlabel: __( 'Pattern Directory' ),\n\t\t\t\tdisabled: shouldDisableNonUserSources,\n\t\t\t},\n\t\t\t{\n\t\t\t\tvalue: INSERTER_PATTERN_TYPES.theme,\n\t\t\t\tlabel: __( 'Theme & Plugins' ),\n\t\t\t\tdisabled: shouldDisableNonUserSources,\n\t\t\t},\n\t\t\t{\n\t\t\t\tvalue: INSERTER_PATTERN_TYPES.user,\n\t\t\t\tlabel: __( 'User' ),\n\t\t\t},\n\t\t],\n\t\t[ shouldDisableNonUserSources ]\n\t);\n\n\tfunction handleSetSourceFilterChange( newSourceFilter ) {\n\t\tsetPatternSourceFilter( newSourceFilter );\n\t\tif ( getShouldDisableSyncFilter( newSourceFilter ) ) {\n\t\t\tsetPatternSyncFilter( 'all' );\n\t\t}\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<DropdownMenu\n\t\t\t\tpopoverProps={ {\n\t\t\t\t\tplacement: 'right-end',\n\t\t\t\t} }\n\t\t\t\tlabel=\"Filter patterns\"\n\t\t\t\ticon={\n\t\t\t\t\t<Icon\n\t\t\t\t\t\ticon={\n\t\t\t\t\t\t\t<SVG\n\t\t\t\t\t\t\t\twidth=\"24\"\n\t\t\t\t\t\t\t\theight=\"24\"\n\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Path\n\t\t\t\t\t\t\t\t\td=\"M10 17.5H14V16H10V17.5ZM6 6V7.5H18V6H6ZM8 12.5H16V11H8V12.5Z\"\n\t\t\t\t\t\t\t\t\tfill=\"#1E1E1E\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</SVG>\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t{ () => (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<MenuGroup label={ __( 'Source' ) }>\n\t\t\t\t\t\t\t<MenuItemsChoice\n\t\t\t\t\t\t\t\tchoices={ patternSourceMenuOptions }\n\t\t\t\t\t\t\t\tonSelect={ ( value ) => {\n\t\t\t\t\t\t\t\t\thandleSetSourceFilterChange( value );\n\t\t\t\t\t\t\t\t\tscrollContainerRef.current?.scrollTo(\n\t\t\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\t\t\t0\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\tvalue={ currentPatternSourceFilter }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</MenuGroup>\n\t\t\t\t\t\t<MenuGroup label={ __( 'Type' ) }>\n\t\t\t\t\t\t\t<MenuItemsChoice\n\t\t\t\t\t\t\t\tchoices={ patternSyncMenuOptions }\n\t\t\t\t\t\t\t\tonSelect={ ( value ) => {\n\t\t\t\t\t\t\t\t\tsetPatternSyncFilter( value );\n\t\t\t\t\t\t\t\t\tscrollContainerRef.current?.scrollTo(\n\t\t\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\t\t\t0\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\tvalue={ patternSyncFilter }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</MenuGroup>\n\t\t\t\t\t\t<div className=\"block-editor-tool-selector__help\">\n\t\t\t\t\t\t\t{ createInterpolateElement(\n\t\t\t\t\t\t\t\t__(\n\t\t\t\t\t\t\t\t\t'Patterns are available from the <Link>WordPress.org Pattern Directory</Link>, bundled in the active theme, or created by users on this site. Only patterns created on this site can be synced.'\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tLink: (\n\t\t\t\t\t\t\t\t\t\t<ExternalLink\n\t\t\t\t\t\t\t\t\t\t\thref={ __(\n\t\t\t\t\t\t\t\t\t\t\t\t'https://wordpress.org/patterns/'\n\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>\n\t\t\t\t) }\n\t\t\t</DropdownMenu>\n\t\t</>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport {\n\tuseMemo,\n\tuseState,\n\tuseCallback,\n\tuseRef,\n\tuseEffect,\n} from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\n\nimport {\n\t__experimentalHStack as HStack,\n\t__experimentalVStack as VStack,\n\t__experimentalHeading as Heading,\n\t__experimentalText as Text,\n\tFlexBlock,\n} from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport usePatternsState from '../hooks/use-patterns-state';\nimport BlockPatternsList from '../../block-patterns-list';\nimport usePatternsPaging from '../hooks/use-patterns-paging';\nimport { PatternsFilter } from './patterns-filter';\nimport { usePatternCategories } from './use-pattern-categories';\nimport {\n\tisPatternFiltered,\n\tallPatternsCategory,\n\tmyPatternsCategory,\n\tINSERTER_PATTERN_TYPES,\n} from './utils';\n\nconst noop = () => {};\n\nexport function PatternCategoryPreviews( {\n\trootClientId,\n\tonInsert,\n\tonHover = noop,\n\tcategory,\n\tshowTitlesAsTooltip,\n} ) {\n\tconst [ allPatterns, , onClickPattern ] = usePatternsState(\n\t\tonInsert,\n\t\trootClientId\n\t);\n\tconst [ patternSyncFilter, setPatternSyncFilter ] = useState( 'all' );\n\tconst [ patternSourceFilter, setPatternSourceFilter ] = useState( 'all' );\n\n\tconst availableCategories = usePatternCategories(\n\t\trootClientId,\n\t\tpatternSourceFilter\n\t);\n\tconst scrollContainerRef = useRef();\n\tconst currentCategoryPatterns = useMemo(\n\t\t() =>\n\t\t\tallPatterns.filter( ( pattern ) => {\n\t\t\t\tif (\n\t\t\t\t\tisPatternFiltered(\n\t\t\t\t\t\tpattern,\n\t\t\t\t\t\tpatternSourceFilter,\n\t\t\t\t\t\tpatternSyncFilter\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tif ( category.name === allPatternsCategory.name ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\tcategory.name === myPatternsCategory.name &&\n\t\t\t\t\tpattern.type === INSERTER_PATTERN_TYPES.user\n\t\t\t\t) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tif ( category.name === 'uncategorized' ) {\n\t\t\t\t\t// The uncategorized category should show all the patterns without any category...\n\t\t\t\t\tif ( ! pattern.categories ) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\n\t\t\t\t\t// ...or with no available category.\n\t\t\t\t\treturn ! pattern.categories.some( ( catName ) =>\n\t\t\t\t\t\tavailableCategories.some( ( c ) => c.name === catName )\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\treturn pattern.categories?.includes( category.name );\n\t\t\t} ),\n\t\t[\n\t\t\tallPatterns,\n\t\t\tavailableCategories,\n\t\t\tcategory.name,\n\t\t\tpatternSourceFilter,\n\t\t\tpatternSyncFilter,\n\t\t]\n\t);\n\n\tconst pagingProps = usePatternsPaging(\n\t\tcurrentCategoryPatterns,\n\t\tcategory,\n\t\tscrollContainerRef\n\t);\n\tconst { changePage } = pagingProps;\n\n\t// Hide block pattern preview on unmount.\n\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\tuseEffect( () => () => onHover( null ), [] );\n\n\tconst onSetPatternSyncFilter = useCallback(\n\t\t( value ) => {\n\t\t\tsetPatternSyncFilter( value );\n\t\t\tchangePage( 1 );\n\t\t},\n\t\t[ setPatternSyncFilter, changePage ]\n\t);\n\tconst onSetPatternSourceFilter = useCallback(\n\t\t( value ) => {\n\t\t\tsetPatternSourceFilter( value );\n\t\t\tchangePage( 1 );\n\t\t},\n\t\t[ setPatternSourceFilter, changePage ]\n\t);\n\n\treturn (\n\t\t<div className=\"block-editor-inserter__patterns-category-panel\">\n\t\t\t<VStack\n\t\t\t\tspacing={ 2 }\n\t\t\t\tclassName=\"block-editor-inserter__patterns-category-panel-header\"\n\t\t\t>\n\t\t\t\t<HStack>\n\t\t\t\t\t<FlexBlock>\n\t\t\t\t\t\t<Heading level={ 4 } as=\"div\">\n\t\t\t\t\t\t\t{ category.label }\n\t\t\t\t\t\t</Heading>\n\t\t\t\t\t</FlexBlock>\n\t\t\t\t\t<PatternsFilter\n\t\t\t\t\t\tpatternSyncFilter={ patternSyncFilter }\n\t\t\t\t\t\tpatternSourceFilter={ patternSourceFilter }\n\t\t\t\t\t\tsetPatternSyncFilter={ onSetPatternSyncFilter }\n\t\t\t\t\t\tsetPatternSourceFilter={ onSetPatternSourceFilter }\n\t\t\t\t\t\tscrollContainerRef={ scrollContainerRef }\n\t\t\t\t\t\tcategory={ category }\n\t\t\t\t\t/>\n\t\t\t\t</HStack>\n\t\t\t\t{ ! currentCategoryPatterns.length && (\n\t\t\t\t\t<Text\n\t\t\t\t\t\tvariant=\"muted\"\n\t\t\t\t\t\tclassName=\"block-editor-inserter__patterns-category-no-results\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'No results found' ) }\n\t\t\t\t\t</Text>\n\t\t\t\t) }\n\t\t\t</VStack>\n\n\t\t\t{ currentCategoryPatterns.length > 0 && (\n\t\t\t\t<BlockPatternsList\n\t\t\t\t\tref={ scrollContainerRef }\n\t\t\t\t\tshownPatterns={ pagingProps.categoryPatternsAsyncList }\n\t\t\t\t\tblockPatterns={ pagingProps.categoryPatterns }\n\t\t\t\t\tonClickPattern={ onClickPattern }\n\t\t\t\t\tonHover={ onHover }\n\t\t\t\t\tlabel={ category.label }\n\t\t\t\t\torientation=\"vertical\"\n\t\t\t\t\tcategory={ category.name }\n\t\t\t\t\tisDraggable\n\t\t\t\t\tshowTitlesAsTooltip={ showTitlesAsTooltip }\n\t\t\t\t\tpatternFilter={ patternSourceFilter }\n\t\t\t\t\tpagingProps={ pagingProps }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</div>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useState } from '@wordpress/element';\nimport { __, isRTL } from '@wordpress/i18n';\nimport { useViewportMatch } from '@wordpress/compose';\nimport {\n\t__experimentalItemGroup as ItemGroup,\n\t__experimentalItem as Item,\n\t__experimentalHStack as HStack,\n\tFlexBlock,\n\tButton,\n} from '@wordpress/components';\nimport { Icon, chevronRight, chevronLeft } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport PatternsExplorerModal from '../block-patterns-explorer';\nimport MobileTabNavigation from '../mobile-tab-navigation';\nimport { PatternCategoryPreviews } from './pattern-category-previews';\nimport { usePatternCategories } from './use-pattern-categories';\n\nfunction BlockPatternsTab( {\n\tonSelectCategory,\n\tselectedCategory,\n\tonInsert,\n\trootClientId,\n} ) {\n\tconst [ showPatternsExplorer, setShowPatternsExplorer ] = useState( false );\n\n\tconst categories = usePatternCategories( rootClientId );\n\n\tconst initialCategory = selectedCategory || categories[ 0 ];\n\tconst isMobile = useViewportMatch( 'medium', '<' );\n\n\treturn (\n\t\t<>\n\t\t\t{ ! isMobile && (\n\t\t\t\t<div className=\"block-editor-inserter__block-patterns-tabs-container\">\n\t\t\t\t\t<nav\n\t\t\t\t\t\taria-label={ __( 'Block pattern categories' ) }\n\t\t\t\t\t\tclassName=\"block-editor-inserter__block-patterns-tabs\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<ItemGroup role=\"list\">\n\t\t\t\t\t\t\t{ categories.map( ( category ) => (\n\t\t\t\t\t\t\t\t<Item\n\t\t\t\t\t\t\t\t\trole=\"listitem\"\n\t\t\t\t\t\t\t\t\tkey={ category.name }\n\t\t\t\t\t\t\t\t\tonClick={ () =>\n\t\t\t\t\t\t\t\t\t\tonSelectCategory( category )\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\tcategory === selectedCategory\n\t\t\t\t\t\t\t\t\t\t\t? 'block-editor-inserter__patterns-category block-editor-inserter__patterns-selected-category'\n\t\t\t\t\t\t\t\t\t\t\t: 'block-editor-inserter__patterns-category'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\taria-label={ category.label }\n\t\t\t\t\t\t\t\t\taria-current={\n\t\t\t\t\t\t\t\t\t\tcategory === selectedCategory\n\t\t\t\t\t\t\t\t\t\t\t? 'true'\n\t\t\t\t\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<HStack>\n\t\t\t\t\t\t\t\t\t\t<FlexBlock>\n\t\t\t\t\t\t\t\t\t\t\t{ category.label }\n\t\t\t\t\t\t\t\t\t\t</FlexBlock>\n\t\t\t\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\t\t\t\ticon={\n\t\t\t\t\t\t\t\t\t\t\t\tisRTL()\n\t\t\t\t\t\t\t\t\t\t\t\t\t? chevronLeft\n\t\t\t\t\t\t\t\t\t\t\t\t\t: chevronRight\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</HStack>\n\t\t\t\t\t\t\t\t</Item>\n\t\t\t\t\t\t\t) ) }\n\t\t\t\t\t\t\t<div role=\"listitem\">\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tclassName=\"block-editor-inserter__patterns-explore-button\"\n\t\t\t\t\t\t\t\t\tonClick={ () =>\n\t\t\t\t\t\t\t\t\t\tsetShowPatternsExplorer( true )\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ __( 'Explore all patterns' ) }\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</ItemGroup>\n\t\t\t\t\t</nav>\n\t\t\t\t</div>\n\t\t\t) }\n\t\t\t{ isMobile && (\n\t\t\t\t<MobileTabNavigation categories={ categories }>\n\t\t\t\t\t{ ( category ) => (\n\t\t\t\t\t\t<PatternCategoryPreviews\n\t\t\t\t\t\t\tkey={ category.name }\n\t\t\t\t\t\t\tonInsert={ onInsert }\n\t\t\t\t\t\t\trootClientId={ rootClientId }\n\t\t\t\t\t\t\tcategory={ category }\n\t\t\t\t\t\t\tshowTitlesAsTooltip={ false }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</MobileTabNavigation>\n\t\t\t) }\n\t\t\t{ showPatternsExplorer && (\n\t\t\t\t<PatternsExplorerModal\n\t\t\t\t\tinitialCategory={ initialCategory }\n\t\t\t\t\tpatternCategories={ categories }\n\t\t\t\t\tonModalClose={ () => setShowPatternsExplorer( false ) }\n\t\t\t\t\trootClientId={ rootClientId }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</>\n\t);\n}\n\nexport default BlockPatternsTab;\n","/**\n * WordPress dependencies\n */\nimport { useRef, useEffect } from '@wordpress/element';\n\nimport { focus } from '@wordpress/dom';\n\n/**\n * Internal dependencies\n */\n\nimport { PatternCategoryPreviews } from './pattern-category-previews';\nimport { useZoomOut } from '../../../hooks/use-zoom-out';\n\nexport function PatternCategoryPreviewPanel( {\n\trootClientId,\n\tonInsert,\n\tonHover,\n\tcategory,\n\tshowTitlesAsTooltip,\n\tpatternFilter,\n} ) {\n\tconst container = useRef();\n\n\tuseEffect( () => {\n\t\tconst timeout = setTimeout( () => {\n\t\t\tconst [ firstTabbable ] = focus.tabbable.find( container.current );\n\t\t\tfirstTabbable?.focus();\n\t\t} );\n\t\treturn () => clearTimeout( timeout );\n\t}, [ category ] );\n\n\t// Move to zoom out mode when this component is mounted\n\t// and back to the previous mode when unmounted.\n\tuseZoomOut();\n\n\treturn (\n\t\t<div\n\t\t\tref={ container }\n\t\t\tclassName=\"block-editor-inserter__patterns-category-dialog\"\n\t\t>\n\t\t\t<PatternCategoryPreviews\n\t\t\t\tkey={ category.name }\n\t\t\t\trootClientId={ rootClientId }\n\t\t\t\tonInsert={ onInsert }\n\t\t\t\tonHover={ onHover }\n\t\t\t\tcategory={ category }\n\t\t\t\tshowTitlesAsTooltip={ showTitlesAsTooltip }\n\t\t\t\tpatternFilter={ patternFilter }\n\t\t\t/>\n\t\t</div>\n\t);\n}\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useEffect, useState, useRef } from '@wordpress/element';\r\nimport { useSelect } from '@wordpress/data';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as blockEditorStore } from '../../../store';\r\nimport { unlock } from '../../../lock-unlock';\r\n\r\n/** @typedef {import('../../../store/actions').InserterMediaRequest} InserterMediaRequest */\r\n/** @typedef {import('../../../store/actions').InserterMediaItem} InserterMediaItem */\r\n\r\n/**\r\n * Fetches media items based on the provided category.\r\n * Each media category is responsible for providing a `fetch` function.\r\n *\r\n * @param {Object}               category The media category to fetch results for.\r\n * @param {InserterMediaRequest} query    The query args to use for the request.\r\n * @return {InserterMediaItem[]} The media results.\r\n */\r\nexport function useMediaResults( category, query = {} ) {\r\n\tconst [ mediaList, setMediaList ] = useState();\r\n\tconst [ isLoading, setIsLoading ] = useState( false );\r\n\t// We need to keep track of the last request made because\r\n\t// multiple request can be fired without knowing the order\r\n\t// of resolution, and we need to ensure we are showing\r\n\t// the results of the last request.\r\n\t// In the future we could use AbortController to cancel previous\r\n\t// requests, but we don't for now as it involves adding support\r\n\t// for this to `core-data` package.\r\n\tconst lastRequest = useRef();\r\n\tuseEffect( () => {\r\n\t\t( async () => {\r\n\t\t\tconst key = JSON.stringify( {\r\n\t\t\t\tcategory: category.name,\r\n\t\t\t\t...query,\r\n\t\t\t} );\r\n\t\t\tlastRequest.current = key;\r\n\t\t\tsetIsLoading( true );\r\n\t\t\tsetMediaList( [] ); // Empty the previous results.\r\n\t\t\tconst _media = await category.fetch?.( query );\r\n\t\t\tif ( key === lastRequest.current ) {\r\n\t\t\t\tsetMediaList( _media );\r\n\t\t\t\tsetIsLoading( false );\r\n\t\t\t}\r\n\t\t} )();\r\n\t}, [ category.name, ...Object.values( query ) ] );\r\n\treturn { mediaList, isLoading };\r\n}\r\n\r\nexport function useMediaCategories( rootClientId ) {\r\n\tconst [ categories, setCategories ] = useState( [] );\r\n\r\n\tconst inserterMediaCategories = useSelect(\r\n\t\t( select ) =>\r\n\t\t\tunlock( select( blockEditorStore ) ).getInserterMediaCategories(),\r\n\t\t[]\r\n\t);\r\n\tconst { canInsertImage, canInsertVideo, canInsertAudio } = useSelect(\r\n\t\t( select ) => {\r\n\t\t\tconst { canInsertBlockType } = select( blockEditorStore );\r\n\t\t\treturn {\r\n\t\t\t\tcanInsertImage: canInsertBlockType(\r\n\t\t\t\t\t'core/image',\r\n\t\t\t\t\trootClientId\r\n\t\t\t\t),\r\n\t\t\t\tcanInsertVideo: canInsertBlockType(\r\n\t\t\t\t\t'core/video',\r\n\t\t\t\t\trootClientId\r\n\t\t\t\t),\r\n\t\t\t\tcanInsertAudio: canInsertBlockType(\r\n\t\t\t\t\t'core/audio',\r\n\t\t\t\t\trootClientId\r\n\t\t\t\t),\r\n\t\t\t};\r\n\t\t},\r\n\t\t[ rootClientId ]\r\n\t);\r\n\tuseEffect( () => {\r\n\t\t( async () => {\r\n\t\t\tconst _categories = [];\r\n\t\t\t// If `inserterMediaCategories` is not defined in\r\n\t\t\t// block editor settings, do not show any media categories.\r\n\t\t\tif ( ! inserterMediaCategories ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t// Loop through categories to check if they have at least one media item.\r\n\t\t\tconst categoriesHaveMedia = new Map(\r\n\t\t\t\tawait Promise.all(\r\n\t\t\t\t\tinserterMediaCategories.map( async ( category ) => {\r\n\t\t\t\t\t\t// Some sources are external and we don't need to make a request.\r\n\t\t\t\t\t\tif ( category.isExternalResource ) {\r\n\t\t\t\t\t\t\treturn [ category.name, true ];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlet results = [];\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tresults = await category.fetch( {\r\n\t\t\t\t\t\t\t\tper_page: 1,\r\n\t\t\t\t\t\t\t} );\r\n\t\t\t\t\t\t} catch ( e ) {\r\n\t\t\t\t\t\t\t// If the request fails, we shallow the error and just don't show\r\n\t\t\t\t\t\t\t// the category, in order to not break the media tab.\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn [ category.name, !! results.length ];\r\n\t\t\t\t\t} )\r\n\t\t\t\t)\r\n\t\t\t);\r\n\t\t\t// We need to filter out categories that don't have any media items or\r\n\t\t\t// whose corresponding block type is not allowed to be inserted, based\r\n\t\t\t// on the category's `mediaType`.\r\n\t\t\tconst canInsertMediaType = {\r\n\t\t\t\timage: canInsertImage,\r\n\t\t\t\tvideo: canInsertVideo,\r\n\t\t\t\taudio: canInsertAudio,\r\n\t\t\t};\r\n\t\t\tinserterMediaCategories.forEach( ( category ) => {\r\n\t\t\t\tif (\r\n\t\t\t\t\tcanInsertMediaType[ category.mediaType ] &&\r\n\t\t\t\t\tcategoriesHaveMedia.get( category.name )\r\n\t\t\t\t) {\r\n\t\t\t\t\t_categories.push( category );\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\t\t\tif ( !! _categories.length ) {\r\n\t\t\t\tsetCategories( _categories );\r\n\t\t\t}\r\n\t\t} )();\r\n\t}, [\r\n\t\tcanInsertImage,\r\n\t\tcanInsertVideo,\r\n\t\tcanInsertAudio,\r\n\t\tinserterMediaCategories,\r\n\t] );\r\n\treturn categories;\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { Path, SVG } from '@wordpress/primitives';\r\n\r\nconst external = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M19.5 4.5h-7V6h4.44l-5.97 5.97 1.06 1.06L18 7.06v4.44h1.5v-7Zm-13 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-3H17v3a.5.5 0 0 1-.5.5h-10a.5.5 0 0 1-.5-.5v-10a.5.5 0 0 1 .5-.5h3V5.5h-3Z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default external;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { createBlock } from '@wordpress/blocks';\r\n\r\nconst mediaTypeTag = { image: 'img', video: 'video', audio: 'audio' };\r\n\r\n/** @typedef {import('./hooks').InserterMediaItem} InserterMediaItem */\r\n\r\n/**\r\n * Creates a block and a preview element from a media object.\r\n *\r\n * @param {InserterMediaItem}         media     The media object to create the block from.\r\n * @param {('image'|'audio'|'video')} mediaType The media type to create the block for.\r\n * @return {[WPBlock, JSX.Element]} An array containing the block and the preview element.\r\n */\r\nexport function getBlockAndPreviewFromMedia( media, mediaType ) {\r\n\t// Add the common attributes between the different media types.\r\n\tconst attributes = {\r\n\t\tid: media.id || undefined,\r\n\t\tcaption: media.caption || undefined,\r\n\t};\r\n\tconst mediaSrc = media.url;\r\n\tconst alt = media.alt || undefined;\r\n\tif ( mediaType === 'image' ) {\r\n\t\tattributes.url = mediaSrc;\r\n\t\tattributes.alt = alt;\r\n\t} else if ( [ 'video', 'audio' ].includes( mediaType ) ) {\r\n\t\tattributes.src = mediaSrc;\r\n\t}\r\n\tconst PreviewTag = mediaTypeTag[ mediaType ];\r\n\tconst preview = (\r\n\t\t<PreviewTag\r\n\t\t\tsrc={ media.previewUrl || mediaSrc }\r\n\t\t\talt={ alt }\r\n\t\t\tcontrols={ mediaType === 'audio' ? true : undefined }\r\n\t\t\tinert=\"true\"\r\n\t\t\tonError={ ( { currentTarget } ) => {\r\n\t\t\t\t// Fall back to the media source if the preview cannot be loaded.\r\n\t\t\t\tif ( currentTarget.src === media.previewUrl ) {\r\n\t\t\t\t\tcurrentTarget.src = mediaSrc;\r\n\t\t\t\t}\r\n\t\t\t} }\r\n\t\t/>\r\n\t);\r\n\treturn [ createBlock( `core/${ mediaType }`, attributes ), preview ];\r\n}\r\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tTooltip,\n\tDropdownMenu,\n\tMenuGroup,\n\tMenuItem,\n\tSpinner,\n\tModal,\n\tFlex,\n\tFlexItem,\n\tButton,\n\tprivateApis as componentsPrivateApis,\n\t__experimentalVStack as VStack,\n} from '@wordpress/components';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { useMemo, useCallback, useState } from '@wordpress/element';\nimport { cloneBlock } from '@wordpress/blocks';\nimport { moreVertical, external } from '@wordpress/icons';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { store as noticesStore } from '@wordpress/notices';\nimport { isBlobURL } from '@wordpress/blob';\n\n/**\n * Internal dependencies\n */\nimport InserterDraggableBlocks from '../../inserter-draggable-blocks';\nimport { getBlockAndPreviewFromMedia } from './utils';\nimport { store as blockEditorStore } from '../../../store';\nimport { unlock } from '../../../lock-unlock';\n\nconst ALLOWED_MEDIA_TYPES = [ 'image' ];\nconst MAXIMUM_TITLE_LENGTH = 25;\nconst MEDIA_OPTIONS_POPOVER_PROPS = {\n\tposition: 'bottom left',\n\tclassName:\n\t\t'block-editor-inserter__media-list__item-preview-options__popover',\n};\n\nconst { CompositeItemV2: CompositeItem } = unlock( componentsPrivateApis );\n\nfunction MediaPreviewOptions( { category, media } ) {\n\tif ( ! category.getReportUrl ) {\n\t\treturn null;\n\t}\n\tconst reportUrl = category.getReportUrl( media );\n\treturn (\n\t\t<DropdownMenu\n\t\t\tclassName=\"block-editor-inserter__media-list__item-preview-options\"\n\t\t\tlabel={ __( 'Options' ) }\n\t\t\tpopoverProps={ MEDIA_OPTIONS_POPOVER_PROPS }\n\t\t\ticon={ moreVertical }\n\t\t>\n\t\t\t{ () => (\n\t\t\t\t<MenuGroup>\n\t\t\t\t\t<MenuItem\n\t\t\t\t\t\tonClick={ () =>\n\t\t\t\t\t\t\twindow.open( reportUrl, '_blank' ).focus()\n\t\t\t\t\t\t}\n\t\t\t\t\t\ticon={ external }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ sprintf(\n\t\t\t\t\t\t\t/* translators: %s: The media type to report e.g: \"image\", \"video\", \"audio\" */\n\t\t\t\t\t\t\t__( 'Report %s' ),\n\t\t\t\t\t\t\tcategory.mediaType\n\t\t\t\t\t\t) }\n\t\t\t\t\t</MenuItem>\n\t\t\t\t</MenuGroup>\n\t\t\t) }\n\t\t</DropdownMenu>\n\t);\n}\n\nfunction InsertExternalImageModal( { onClose, onSubmit } ) {\n\treturn (\n\t\t<Modal\n\t\t\ttitle={ __( 'Insert external image' ) }\n\t\t\tonRequestClose={ onClose }\n\t\t\tclassName=\"block-editor-inserter-media-tab-media-preview-inserter-external-image-modal\"\n\t\t>\n\t\t\t<VStack spacing={ 3 }>\n\t\t\t\t<p>\n\t\t\t\t\t{ __(\n\t\t\t\t\t\t'This image cannot be uploaded to your Media Library, but it can still be inserted as an external image.'\n\t\t\t\t\t) }\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\t\t{ __(\n\t\t\t\t\t\t'External images can be removed by the external provider without warning and could even have legal compliance issues related to privacy legislation.'\n\t\t\t\t\t) }\n\t\t\t\t</p>\n\t\t\t</VStack>\n\t\t\t<Flex\n\t\t\t\tclassName=\"block-editor-block-lock-modal__actions\"\n\t\t\t\tjustify=\"flex-end\"\n\t\t\t\texpanded={ false }\n\t\t\t>\n\t\t\t\t<FlexItem>\n\t\t\t\t\t<Button variant=\"tertiary\" onClick={ onClose }>\n\t\t\t\t\t\t{ __( 'Cancel' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t</FlexItem>\n\t\t\t\t<FlexItem>\n\t\t\t\t\t<Button variant=\"primary\" onClick={ onSubmit }>\n\t\t\t\t\t\t{ __( 'Insert' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t</FlexItem>\n\t\t\t</Flex>\n\t\t</Modal>\n\t);\n}\n\nexport function MediaPreview( { media, onClick, category } ) {\n\tconst [ showExternalUploadModal, setShowExternalUploadModal ] =\n\t\tuseState( false );\n\tconst [ isHovered, setIsHovered ] = useState( false );\n\tconst [ isInserting, setIsInserting ] = useState( false );\n\tconst [ block, preview ] = useMemo(\n\t\t() => getBlockAndPreviewFromMedia( media, category.mediaType ),\n\t\t[ media, category.mediaType ]\n\t);\n\tconst { createErrorNotice, createSuccessNotice } =\n\t\tuseDispatch( noticesStore );\n\tconst mediaUpload = useSelect(\n\t\t( select ) => select( blockEditorStore ).getSettings().mediaUpload,\n\t\t[]\n\t);\n\tconst onMediaInsert = useCallback(\n\t\t( previewBlock ) => {\n\t\t\t// Prevent multiple uploads when we're in the process of inserting.\n\t\t\tif ( isInserting ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst clonedBlock = cloneBlock( previewBlock );\n\t\t\tconst { id, url, caption } = clonedBlock.attributes;\n\t\t\t// Media item already exists in library, so just insert it.\n\t\t\tif ( !! id ) {\n\t\t\t\tonClick( clonedBlock );\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tsetIsInserting( true );\n\t\t\t// Media item does not exist in library, so try to upload it.\n\t\t\t// Fist fetch the image data. This may fail if the image host\n\t\t\t// doesn't allow CORS with the domain.\n\t\t\t// If this happens, we insert the image block using the external\n\t\t\t// URL and let the user know about the possible implications.\n\t\t\twindow\n\t\t\t\t.fetch( url )\n\t\t\t\t.then( ( response ) => response.blob() )\n\t\t\t\t.then( ( blob ) => {\n\t\t\t\t\tmediaUpload( {\n\t\t\t\t\t\tfilesList: [ blob ],\n\t\t\t\t\t\tadditionalData: { caption },\n\t\t\t\t\t\tonFileChange( [ img ] ) {\n\t\t\t\t\t\t\tif ( isBlobURL( img.url ) ) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tonClick( {\n\t\t\t\t\t\t\t\t...clonedBlock,\n\t\t\t\t\t\t\t\tattributes: {\n\t\t\t\t\t\t\t\t\t...clonedBlock.attributes,\n\t\t\t\t\t\t\t\t\tid: img.id,\n\t\t\t\t\t\t\t\t\turl: img.url,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\tcreateSuccessNotice(\n\t\t\t\t\t\t\t\t__( 'Image uploaded and inserted.' ),\n\t\t\t\t\t\t\t\t{ type: 'snackbar' }\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tsetIsInserting( false );\n\t\t\t\t\t\t},\n\t\t\t\t\t\tallowedTypes: ALLOWED_MEDIA_TYPES,\n\t\t\t\t\t\tonError( message ) {\n\t\t\t\t\t\t\tcreateErrorNotice( message, { type: 'snackbar' } );\n\t\t\t\t\t\t\tsetIsInserting( false );\n\t\t\t\t\t\t},\n\t\t\t\t\t} );\n\t\t\t\t} )\n\t\t\t\t.catch( () => {\n\t\t\t\t\tsetShowExternalUploadModal( true );\n\t\t\t\t\tsetIsInserting( false );\n\t\t\t\t} );\n\t\t},\n\t\t[\n\t\t\tisInserting,\n\t\t\tonClick,\n\t\t\tmediaUpload,\n\t\t\tcreateErrorNotice,\n\t\t\tcreateSuccessNotice,\n\t\t]\n\t);\n\n\tconst title =\n\t\ttypeof media.title === 'string'\n\t\t\t? media.title\n\t\t\t: media.title?.rendered || __( 'no title' );\n\n\tlet truncatedTitle;\n\tif ( title.length > MAXIMUM_TITLE_LENGTH ) {\n\t\tconst omission = '...';\n\t\ttruncatedTitle =\n\t\t\ttitle.slice( 0, MAXIMUM_TITLE_LENGTH - omission.length ) + omission;\n\t}\n\tconst onMouseEnter = useCallback( () => setIsHovered( true ), [] );\n\tconst onMouseLeave = useCallback( () => setIsHovered( false ), [] );\n\treturn (\n\t\t<>\n\t\t\t<InserterDraggableBlocks isEnabled blocks={ [ block ] }>\n\t\t\t\t{ ( { draggable, onDragStart, onDragEnd } ) => (\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={ classnames(\n\t\t\t\t\t\t\t'block-editor-inserter__media-list__list-item',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t'is-hovered': isHovered,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t) }\n\t\t\t\t\t\tdraggable={ draggable }\n\t\t\t\t\t\tonDragStart={ onDragStart }\n\t\t\t\t\t\tonDragEnd={ onDragEnd }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ /* Adding `is-hovered` class to the wrapper element is needed\n\t\t\t\t\t\tbecause the options Popover is rendered outside of this node. */ }\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tonMouseEnter={ onMouseEnter }\n\t\t\t\t\t\t\tonMouseLeave={ onMouseLeave }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Tooltip text={ truncatedTitle || title }>\n\t\t\t\t\t\t\t\t<CompositeItem\n\t\t\t\t\t\t\t\t\trender={\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\taria-label={ title }\n\t\t\t\t\t\t\t\t\t\t\trole=\"option\"\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"block-editor-inserter__media-list__item\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tonClick={ () => onMediaInsert( block ) }\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div className=\"block-editor-inserter__media-list__item-preview\">\n\t\t\t\t\t\t\t\t\t\t{ preview }\n\t\t\t\t\t\t\t\t\t\t{ isInserting && (\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"block-editor-inserter__media-list__item-preview-spinner\">\n\t\t\t\t\t\t\t\t\t\t\t\t<Spinner />\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</CompositeItem>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t{ ! isInserting && (\n\t\t\t\t\t\t\t\t<MediaPreviewOptions\n\t\t\t\t\t\t\t\t\tcategory={ category }\n\t\t\t\t\t\t\t\t\tmedia={ media }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t\t</InserterDraggableBlocks>\n\t\t\t{ showExternalUploadModal && (\n\t\t\t\t<InsertExternalImageModal\n\t\t\t\t\tonClose={ () => setShowExternalUploadModal( false ) }\n\t\t\t\t\tonSubmit={ () => {\n\t\t\t\t\t\tonClick( cloneBlock( block ) );\n\t\t\t\t\t\tcreateSuccessNotice( __( 'Image inserted.' ), {\n\t\t\t\t\t\t\ttype: 'snackbar',\n\t\t\t\t\t\t} );\n\t\t\t\t\t\tsetShowExternalUploadModal( false );\n\t\t\t\t\t} }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</>\n\t);\n}\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { privateApis as componentsPrivateApis } from '@wordpress/components';\r\nimport { __ } from '@wordpress/i18n';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { MediaPreview } from './media-preview';\r\nimport { unlock } from '../../../lock-unlock';\r\n\r\nconst { CompositeV2: Composite, useCompositeStoreV2: useCompositeStore } =\r\n\tunlock( componentsPrivateApis );\r\n\r\nfunction MediaList( {\r\n\tmediaList,\r\n\tcategory,\r\n\tonClick,\r\n\tlabel = __( 'Media List' ),\r\n} ) {\r\n\tconst compositeStore = useCompositeStore();\r\n\treturn (\r\n\t\t<Composite\r\n\t\t\tstore={ compositeStore }\r\n\t\t\trole=\"listbox\"\r\n\t\t\tclassName=\"block-editor-inserter__media-list\"\r\n\t\t\taria-label={ label }\r\n\t\t>\r\n\t\t\t{ mediaList.map( ( media, index ) => (\r\n\t\t\t\t<MediaPreview\r\n\t\t\t\t\tkey={ media.id || media.sourceId || index }\r\n\t\t\t\t\tmedia={ media }\r\n\t\t\t\t\tcategory={ category }\r\n\t\t\t\t\tonClick={ onClick }\r\n\t\t\t\t/>\r\n\t\t\t) ) }\r\n\t\t</Composite>\r\n\t);\r\n}\r\n\r\nexport default MediaList;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { __ } from '@wordpress/i18n';\r\nimport { Icon, blockDefault } from '@wordpress/icons';\r\n\r\nfunction InserterNoResults() {\r\n\treturn (\r\n\t\t<div className=\"block-editor-inserter__no-results\">\r\n\t\t\t<Icon\r\n\t\t\t\tclassName=\"block-editor-inserter__no-results-icon\"\r\n\t\t\t\ticon={ blockDefault }\r\n\t\t\t/>\r\n\t\t\t<p>{ __( 'No results found.' ) }</p>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default InserterNoResults;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useRef, useEffect } from '@wordpress/element';\r\nimport { Spinner, SearchControl } from '@wordpress/components';\r\nimport { focus } from '@wordpress/dom';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { useDebouncedInput } from '@wordpress/compose';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport MediaList from './media-list';\r\nimport { useMediaResults } from './hooks';\r\nimport InserterNoResults from '../no-results';\r\n\r\nconst INITIAL_MEDIA_ITEMS_PER_PAGE = 10;\r\n\r\nexport function MediaCategoryDialog( { rootClientId, onInsert, category } ) {\r\n\tconst container = useRef();\r\n\tuseEffect( () => {\r\n\t\tconst timeout = setTimeout( () => {\r\n\t\t\tconst [ firstTabbable ] = focus.tabbable.find( container.current );\r\n\t\t\tfirstTabbable?.focus();\r\n\t\t} );\r\n\t\treturn () => clearTimeout( timeout );\r\n\t}, [ category ] );\r\n\treturn (\r\n\t\t<div ref={ container } className=\"block-editor-inserter__media-dialog\">\r\n\t\t\t<MediaCategoryPanel\r\n\t\t\t\trootClientId={ rootClientId }\r\n\t\t\t\tonInsert={ onInsert }\r\n\t\t\t\tcategory={ category }\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport function MediaCategoryPanel( { rootClientId, onInsert, category } ) {\r\n\tconst [ search, setSearch, debouncedSearch ] = useDebouncedInput();\r\n\tconst { mediaList, isLoading } = useMediaResults( category, {\r\n\t\tper_page: !! debouncedSearch ? 20 : INITIAL_MEDIA_ITEMS_PER_PAGE,\r\n\t\tsearch: debouncedSearch,\r\n\t} );\r\n\tconst baseCssClass = 'block-editor-inserter__media-panel';\r\n\tconst searchLabel = category.labels.search_items || __( 'Search' );\r\n\treturn (\r\n\t\t<div className={ baseCssClass }>\r\n\t\t\t<SearchControl\r\n\t\t\t\tclassName={ `${ baseCssClass }-search` }\r\n\t\t\t\tonChange={ setSearch }\r\n\t\t\t\tvalue={ search }\r\n\t\t\t\tlabel={ searchLabel }\r\n\t\t\t\tplaceholder={ searchLabel }\r\n\t\t\t/>\r\n\t\t\t{ isLoading && (\r\n\t\t\t\t<div className={ `${ baseCssClass }-spinner` }>\r\n\t\t\t\t\t<Spinner />\r\n\t\t\t\t</div>\r\n\t\t\t) }\r\n\t\t\t{ ! isLoading && ! mediaList?.length && <InserterNoResults /> }\r\n\t\t\t{ ! isLoading && !! mediaList?.length && (\r\n\t\t\t\t<MediaList\r\n\t\t\t\t\trootClientId={ rootClientId }\r\n\t\t\t\t\tonClick={ onInsert }\r\n\t\t\t\t\tmediaList={ mediaList }\r\n\t\t\t\t\tcategory={ category }\r\n\t\t\t\t/>\r\n\t\t\t) }\r\n\t\t</div>\r\n\t);\r\n}\r\n","/**\r\n * External dependencies\r\n */\r\nimport classNames from 'classnames';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { __, isRTL } from '@wordpress/i18n';\r\nimport { useViewportMatch } from '@wordpress/compose';\r\nimport {\r\n\t__experimentalItemGroup as ItemGroup,\r\n\t__experimentalItem as Item,\r\n\t__experimentalHStack as HStack,\r\n\tFlexBlock,\r\n\tButton,\r\n} from '@wordpress/components';\r\nimport { useCallback, useMemo } from '@wordpress/element';\r\nimport { Icon, chevronRight, chevronLeft } from '@wordpress/icons';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { MediaCategoryPanel } from './media-panel';\r\nimport MediaUploadCheck from '../../media-upload/check';\r\nimport MediaUpload from '../../media-upload';\r\nimport { useMediaCategories } from './hooks';\r\nimport { getBlockAndPreviewFromMedia } from './utils';\r\nimport MobileTabNavigation from '../mobile-tab-navigation';\r\n\r\nconst ALLOWED_MEDIA_TYPES = [ 'image', 'video', 'audio' ];\r\n\r\nfunction MediaTab( {\r\n\trootClientId,\r\n\tselectedCategory,\r\n\tonSelectCategory,\r\n\tonInsert,\r\n} ) {\r\n\tconst mediaCategories = useMediaCategories( rootClientId );\r\n\tconst isMobile = useViewportMatch( 'medium', '<' );\r\n\tconst baseCssClass = 'block-editor-inserter__media-tabs';\r\n\tconst onSelectMedia = useCallback(\r\n\t\t( media ) => {\r\n\t\t\tif ( ! media?.url ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst [ block ] = getBlockAndPreviewFromMedia( media, media.type );\r\n\t\t\tonInsert( block );\r\n\t\t},\r\n\t\t[ onInsert ]\r\n\t);\r\n\tconst mobileMediaCategories = useMemo(\r\n\t\t() =>\r\n\t\t\tmediaCategories.map( ( mediaCategory ) => ( {\r\n\t\t\t\t...mediaCategory,\r\n\t\t\t\tlabel: mediaCategory.labels.name,\r\n\t\t\t} ) ),\r\n\t\t[ mediaCategories ]\r\n\t);\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{ ! isMobile && (\r\n\t\t\t\t<div className={ `${ baseCssClass }-container` }>\r\n\t\t\t\t\t<nav aria-label={ __( 'Media categories' ) }>\r\n\t\t\t\t\t\t<ItemGroup role=\"list\" className={ baseCssClass }>\r\n\t\t\t\t\t\t\t{ mediaCategories.map( ( mediaCategory ) => (\r\n\t\t\t\t\t\t\t\t<Item\r\n\t\t\t\t\t\t\t\t\trole=\"listitem\"\r\n\t\t\t\t\t\t\t\t\tkey={ mediaCategory.name }\r\n\t\t\t\t\t\t\t\t\tonClick={ () =>\r\n\t\t\t\t\t\t\t\t\t\tonSelectCategory( mediaCategory )\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tclassName={ classNames(\r\n\t\t\t\t\t\t\t\t\t\t`${ baseCssClass }__media-category`,\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t'is-selected':\r\n\t\t\t\t\t\t\t\t\t\t\t\tselectedCategory ===\r\n\t\t\t\t\t\t\t\t\t\t\t\tmediaCategory,\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\t\t\taria-label={ mediaCategory.labels.name }\r\n\t\t\t\t\t\t\t\t\taria-current={\r\n\t\t\t\t\t\t\t\t\t\tmediaCategory === selectedCategory\r\n\t\t\t\t\t\t\t\t\t\t\t? 'true'\r\n\t\t\t\t\t\t\t\t\t\t\t: undefined\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<HStack>\r\n\t\t\t\t\t\t\t\t\t\t<FlexBlock>\r\n\t\t\t\t\t\t\t\t\t\t\t{ mediaCategory.labels.name }\r\n\t\t\t\t\t\t\t\t\t\t</FlexBlock>\r\n\t\t\t\t\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\t\t\t\t\ticon={\r\n\t\t\t\t\t\t\t\t\t\t\t\tisRTL()\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t? chevronLeft\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t: chevronRight\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</HStack>\r\n\t\t\t\t\t\t\t\t</Item>\r\n\t\t\t\t\t\t\t) ) }\r\n\t\t\t\t\t\t\t<div role=\"listitem\">\r\n\t\t\t\t\t\t\t\t<MediaUploadCheck>\r\n\t\t\t\t\t\t\t\t\t<MediaUpload\r\n\t\t\t\t\t\t\t\t\t\tmultiple={ false }\r\n\t\t\t\t\t\t\t\t\t\tonSelect={ onSelectMedia }\r\n\t\t\t\t\t\t\t\t\t\tallowedTypes={ ALLOWED_MEDIA_TYPES }\r\n\t\t\t\t\t\t\t\t\t\trender={ ( { open } ) => (\r\n\t\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={ ( event ) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t// Safari doesn't emit a focus event on button elements when\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t// clicked and we need to manually focus the button here.\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t// The reason is that core's Media Library modal explicitly triggers a\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t// focus event and therefore a `blur` event is triggered on a different\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t// element, which doesn't contain the `data-unstable-ignore-focus-outside-for-relatedtarget`\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t// attribute making the Inserter dialog to close.\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tevent.target.focus();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\topen();\r\n\t\t\t\t\t\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"block-editor-inserter__media-library-button\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"secondary\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tdata-unstable-ignore-focus-outside-for-relatedtarget=\".media-modal\"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{ __( 'Open Media Library' ) }\r\n\t\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</MediaUploadCheck>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</ItemGroup>\r\n\t\t\t\t\t</nav>\r\n\t\t\t\t</div>\r\n\t\t\t) }\r\n\t\t\t{ isMobile && (\r\n\t\t\t\t<MobileTabNavigation categories={ mobileMediaCategories }>\r\n\t\t\t\t\t{ ( category ) => (\r\n\t\t\t\t\t\t<MediaCategoryPanel\r\n\t\t\t\t\t\t\tonInsert={ onInsert }\r\n\t\t\t\t\t\t\trootClientId={ rootClientId }\r\n\t\t\t\t\t\t\tcategory={ category }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t) }\r\n\t\t\t\t</MobileTabNavigation>\r\n\t\t\t) }\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default MediaTab;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { createSlotFill } from '@wordpress/components';\r\n\r\nconst { Fill: __unstableInserterMenuExtension, Slot } = createSlotFill(\r\n\t'__unstableInserterMenuExtension'\r\n);\r\n\r\n__unstableInserterMenuExtension.Slot = Slot;\r\n\r\nexport default __unstableInserterMenuExtension;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useMemo, useEffect } from '@wordpress/element';\r\nimport { __, _n, sprintf } from '@wordpress/i18n';\r\nimport { VisuallyHidden } from '@wordpress/components';\r\nimport { useDebounce, useAsyncList } from '@wordpress/compose';\r\nimport { speak } from '@wordpress/a11y';\r\nimport { useSelect } from '@wordpress/data';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport BlockTypesList from '../block-types-list';\r\nimport BlockPatternsList from '../block-patterns-list';\r\nimport __unstableInserterMenuExtension from '../inserter-menu-extension';\r\nimport InserterPanel from './panel';\r\nimport InserterNoResults from './no-results';\r\nimport useInsertionPoint from './hooks/use-insertion-point';\r\nimport usePatternsState from './hooks/use-patterns-state';\r\nimport useBlockTypesState from './hooks/use-block-types-state';\r\nimport { searchBlockItems, searchItems } from './search-items';\r\nimport InserterListbox from '../inserter-listbox';\r\nimport { orderBy } from '../../utils/sorting';\r\nimport { orderInserterBlockItems } from '../../utils/order-inserter-block-items';\r\nimport { store as blockEditorStore } from '../../store';\r\n\r\nconst INITIAL_INSERTER_RESULTS = 9;\r\n/**\r\n * Shared reference to an empty array for cases where it is important to avoid\r\n * returning a new array reference on every invocation and rerendering the component.\r\n *\r\n * @type {Array}\r\n */\r\nconst EMPTY_ARRAY = [];\r\n\r\nfunction InserterSearchResults( {\r\n\tfilterValue,\r\n\tonSelect,\r\n\tonHover,\r\n\tonHoverPattern,\r\n\trootClientId,\r\n\tclientId,\r\n\tisAppender,\r\n\t__experimentalInsertionIndex,\r\n\tmaxBlockPatterns,\r\n\tmaxBlockTypes,\r\n\tshowBlockDirectory = false,\r\n\tisDraggable = true,\r\n\tshouldFocusBlock = true,\r\n\tprioritizePatterns,\r\n\tselectBlockOnInsert,\r\n} ) {\r\n\tconst debouncedSpeak = useDebounce( speak, 500 );\r\n\r\n\tconst { prioritizedBlocks } = useSelect(\r\n\t\t( select ) => {\r\n\t\t\tconst blockListSettings =\r\n\t\t\t\tselect( blockEditorStore ).getBlockListSettings( rootClientId );\r\n\r\n\t\t\treturn {\r\n\t\t\t\tprioritizedBlocks:\r\n\t\t\t\t\tblockListSettings?.prioritizedInserterBlocks || EMPTY_ARRAY,\r\n\t\t\t};\r\n\t\t},\r\n\t\t[ rootClientId ]\r\n\t);\r\n\r\n\tconst [ destinationRootClientId, onInsertBlocks ] = useInsertionPoint( {\r\n\t\tonSelect,\r\n\t\trootClientId,\r\n\t\tclientId,\r\n\t\tisAppender,\r\n\t\tinsertionIndex: __experimentalInsertionIndex,\r\n\t\tshouldFocusBlock,\r\n\t\tselectBlockOnInsert,\r\n\t} );\r\n\tconst [\r\n\t\tblockTypes,\r\n\t\tblockTypeCategories,\r\n\t\tblockTypeCollections,\r\n\t\tonSelectBlockType,\r\n\t] = useBlockTypesState( destinationRootClientId, onInsertBlocks );\r\n\tconst [ patterns, , onClickPattern ] = usePatternsState(\r\n\t\tonInsertBlocks,\r\n\t\tdestinationRootClientId\r\n\t);\r\n\r\n\tconst filteredBlockPatterns = useMemo( () => {\r\n\t\tif ( maxBlockPatterns === 0 ) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t\tconst results = searchItems( patterns, filterValue );\r\n\t\treturn maxBlockPatterns !== undefined\r\n\t\t\t? results.slice( 0, maxBlockPatterns )\r\n\t\t\t: results;\r\n\t}, [ filterValue, patterns, maxBlockPatterns ] );\r\n\r\n\tlet maxBlockTypesToShow = maxBlockTypes;\r\n\tif ( prioritizePatterns && filteredBlockPatterns.length > 2 ) {\r\n\t\tmaxBlockTypesToShow = 0;\r\n\t}\r\n\r\n\tconst filteredBlockTypes = useMemo( () => {\r\n\t\tif ( maxBlockTypesToShow === 0 ) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t\tconst nonPatternBlockTypes = blockTypes.filter(\r\n\t\t\t( blockType ) => blockType.name !== 'core/block'\r\n\t\t);\r\n\t\tlet orderedItems = orderBy( nonPatternBlockTypes, 'frecency', 'desc' );\r\n\r\n\t\tif ( ! filterValue && prioritizedBlocks.length ) {\r\n\t\t\torderedItems = orderInserterBlockItems(\r\n\t\t\t\torderedItems,\r\n\t\t\t\tprioritizedBlocks\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tconst results = searchBlockItems(\r\n\t\t\torderedItems,\r\n\t\t\tblockTypeCategories,\r\n\t\t\tblockTypeCollections,\r\n\t\t\tfilterValue\r\n\t\t);\r\n\r\n\t\treturn maxBlockTypesToShow !== undefined\r\n\t\t\t? results.slice( 0, maxBlockTypesToShow )\r\n\t\t\t: results;\r\n\t}, [\r\n\t\tfilterValue,\r\n\t\tblockTypes,\r\n\t\tblockTypeCategories,\r\n\t\tblockTypeCollections,\r\n\t\tmaxBlockTypesToShow,\r\n\t\tprioritizedBlocks,\r\n\t] );\r\n\r\n\t// Announce search results on change.\r\n\tuseEffect( () => {\r\n\t\tif ( ! filterValue ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst count = filteredBlockTypes.length + filteredBlockPatterns.length;\r\n\t\tconst resultsFoundMessage = sprintf(\r\n\t\t\t/* translators: %d: number of results. */\r\n\t\t\t_n( '%d result found.', '%d results found.', count ),\r\n\t\t\tcount\r\n\t\t);\r\n\t\tdebouncedSpeak( resultsFoundMessage );\r\n\t}, [\r\n\t\tfilterValue,\r\n\t\tdebouncedSpeak,\r\n\t\tfilteredBlockTypes,\r\n\t\tfilteredBlockPatterns,\r\n\t] );\r\n\r\n\tconst currentShownBlockTypes = useAsyncList( filteredBlockTypes, {\r\n\t\tstep: INITIAL_INSERTER_RESULTS,\r\n\t} );\r\n\tconst currentShownPatterns = useAsyncList(\r\n\t\tcurrentShownBlockTypes.length === filteredBlockTypes.length\r\n\t\t\t? filteredBlockPatterns\r\n\t\t\t: EMPTY_ARRAY\r\n\t);\r\n\r\n\tconst hasItems =\r\n\t\tfilteredBlockTypes.length > 0 || filteredBlockPatterns.length > 0;\r\n\r\n\tconst blocksUI = !! filteredBlockTypes.length && (\r\n\t\t<InserterPanel\r\n\t\t\ttitle={ <VisuallyHidden>{ __( 'Blocks' ) }</VisuallyHidden> }\r\n\t\t>\r\n\t\t\t<BlockTypesList\r\n\t\t\t\titems={ currentShownBlockTypes }\r\n\t\t\t\tonSelect={ onSelectBlockType }\r\n\t\t\t\tonHover={ onHover }\r\n\t\t\t\tlabel={ __( 'Blocks' ) }\r\n\t\t\t\tisDraggable={ isDraggable }\r\n\t\t\t/>\r\n\t\t</InserterPanel>\r\n\t);\r\n\r\n\tconst patternsUI = !! filteredBlockPatterns.length && (\r\n\t\t<InserterPanel\r\n\t\t\ttitle={\r\n\t\t\t\t<VisuallyHidden>{ __( 'Block patterns' ) }</VisuallyHidden>\r\n\t\t\t}\r\n\t\t>\r\n\t\t\t<div className=\"block-editor-inserter__quick-inserter-patterns\">\r\n\t\t\t\t<BlockPatternsList\r\n\t\t\t\t\tshownPatterns={ currentShownPatterns }\r\n\t\t\t\t\tblockPatterns={ filteredBlockPatterns }\r\n\t\t\t\t\tonClickPattern={ onClickPattern }\r\n\t\t\t\t\tonHover={ onHoverPattern }\r\n\t\t\t\t\tisDraggable={ isDraggable }\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t</InserterPanel>\r\n\t);\r\n\r\n\treturn (\r\n\t\t<InserterListbox>\r\n\t\t\t{ ! showBlockDirectory && ! hasItems && <InserterNoResults /> }\r\n\r\n\t\t\t{ prioritizePatterns ? patternsUI : blocksUI }\r\n\r\n\t\t\t{ !! filteredBlockTypes.length &&\r\n\t\t\t\t!! filteredBlockPatterns.length && (\r\n\t\t\t\t\t<div className=\"block-editor-inserter__quick-inserter-separator\" />\r\n\t\t\t\t) }\r\n\r\n\t\t\t{ prioritizePatterns ? blocksUI : patternsUI }\r\n\r\n\t\t\t{ showBlockDirectory && (\r\n\t\t\t\t<__unstableInserterMenuExtension.Slot\r\n\t\t\t\t\tfillProps={ {\r\n\t\t\t\t\t\tonSelect: onSelectBlockType,\r\n\t\t\t\t\t\tonHover,\r\n\t\t\t\t\t\tfilterValue,\r\n\t\t\t\t\t\thasItems,\r\n\t\t\t\t\t\trootClientId: destinationRootClientId,\r\n\t\t\t\t\t} }\r\n\t\t\t\t>\r\n\t\t\t\t\t{ ( fills ) => {\r\n\t\t\t\t\t\tif ( fills.length ) {\r\n\t\t\t\t\t\t\treturn fills;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif ( ! hasItems ) {\r\n\t\t\t\t\t\t\treturn <InserterNoResults />;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t} }\r\n\t\t\t\t</__unstableInserterMenuExtension.Slot>\r\n\t\t\t) }\r\n\t\t</InserterListbox>\r\n\t);\r\n}\r\n\r\nexport default InserterSearchResults;\r\n","/**\n * WordPress dependencies\n */\nimport { privateApis as componentsPrivateApis } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { unlock } from '../../lock-unlock';\n\nconst { Tabs } = unlock( componentsPrivateApis );\n\nconst blocksTab = {\n\tname: 'blocks',\n\t/* translators: Blocks tab title in the block inserter. */\n\ttitle: __( 'Blocks' ),\n};\nconst patternsTab = {\n\tname: 'patterns',\n\t/* translators: Theme and Directory Patterns tab title in the block inserter. */\n\ttitle: __( 'Patterns' ),\n};\n\nconst mediaTab = {\n\tname: 'media',\n\t/* translators: Media tab title in the block inserter. */\n\ttitle: __( 'Media' ),\n};\n\nfunction InserterTabs( {\n\tshowPatterns = false,\n\tshowMedia = false,\n\tonSelect,\n\ttabsContents,\n} ) {\n\tconst tabs = [\n\t\tblocksTab,\n\t\tshowPatterns && patternsTab,\n\t\tshowMedia && mediaTab,\n\t].filter( Boolean );\n\n\treturn (\n\t\t<div className=\"block-editor-inserter__tabs\">\n\t\t\t<Tabs onSelect={ onSelect }>\n\t\t\t\t<Tabs.TabList>\n\t\t\t\t\t{ tabs.map( ( tab ) => (\n\t\t\t\t\t\t<Tabs.Tab key={ tab.name } tabId={ tab.name }>\n\t\t\t\t\t\t\t{ tab.title }\n\t\t\t\t\t\t</Tabs.Tab>\n\t\t\t\t\t) ) }\n\t\t\t\t</Tabs.TabList>\n\t\t\t\t{ tabs.map( ( tab ) => (\n\t\t\t\t\t<Tabs.TabPanel\n\t\t\t\t\t\tkey={ tab.name }\n\t\t\t\t\t\ttabId={ tab.name }\n\t\t\t\t\t\tfocusable={ false }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ tabsContents[ tab.name ] }\n\t\t\t\t\t</Tabs.TabPanel>\n\t\t\t\t) ) }\n\t\t\t</Tabs>\n\t\t</div>\n\t);\n}\n\nexport default InserterTabs;\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tforwardRef,\n\tuseState,\n\tuseCallback,\n\tuseMemo,\n\tuseImperativeHandle,\n\tuseRef,\n} from '@wordpress/element';\nimport { VisuallyHidden, SearchControl, Popover } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { useSelect } from '@wordpress/data';\nimport { useDebouncedInput } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport { unlock } from '../../lock-unlock';\nimport Tips from './tips';\nimport InserterPreviewPanel from './preview-panel';\nimport BlockTypesTab from './block-types-tab';\nimport BlockPatternsTab from './block-patterns-tab';\nimport { PatternCategoryPreviewPanel } from './block-patterns-tab/pattern-category-preview-panel';\nimport { MediaTab, MediaCategoryDialog, useMediaCategories } from './media-tab';\nimport InserterSearchResults from './search-results';\nimport useInsertionPoint from './hooks/use-insertion-point';\nimport InserterTabs from './tabs';\nimport { store as blockEditorStore } from '../../store';\n\nconst NOOP = () => {};\nfunction InserterMenu(\n\t{\n\t\trootClientId,\n\t\tclientId,\n\t\tisAppender,\n\t\t__experimentalInsertionIndex,\n\t\tonSelect,\n\t\tshowInserterHelpPanel,\n\t\tshowMostUsedBlocks,\n\t\t__experimentalFilterValue = '',\n\t\tshouldFocusBlock = true,\n\t\t__experimentalOnPatternCategorySelection = NOOP,\n\t},\n\tref\n) {\n\tconst [ filterValue, setFilterValue, delayedFilterValue ] =\n\t\tuseDebouncedInput( __experimentalFilterValue );\n\tconst [ hoveredItem, setHoveredItem ] = useState( null );\n\tconst [ selectedPatternCategory, setSelectedPatternCategory ] =\n\t\tuseState( null );\n\tconst [ patternFilter, setPatternFilter ] = useState( 'all' );\n\tconst [ selectedMediaCategory, setSelectedMediaCategory ] =\n\t\tuseState( null );\n\tconst [ selectedTab, setSelectedTab ] = useState( null );\n\n\tconst [ destinationRootClientId, onInsertBlocks, onToggleInsertionPoint ] =\n\t\tuseInsertionPoint( {\n\t\t\trootClientId,\n\t\t\tclientId,\n\t\t\tisAppender,\n\t\t\tinsertionIndex: __experimentalInsertionIndex,\n\t\t\tshouldFocusBlock,\n\t\t} );\n\tconst { showPatterns } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { hasAllowedPatterns } = unlock( select( blockEditorStore ) );\n\t\t\treturn {\n\t\t\t\tshowPatterns: hasAllowedPatterns( destinationRootClientId ),\n\t\t\t};\n\t\t},\n\t\t[ destinationRootClientId ]\n\t);\n\n\tconst mediaCategories = useMediaCategories( destinationRootClientId );\n\tconst showMedia = mediaCategories.length > 0;\n\n\tconst onInsert = useCallback(\n\t\t( blocks, meta, shouldForceFocusBlock ) => {\n\t\t\tonInsertBlocks( blocks, meta, shouldForceFocusBlock );\n\t\t\tonSelect();\n\t\t},\n\t\t[ onInsertBlocks, onSelect ]\n\t);\n\n\tconst onInsertPattern = useCallback(\n\t\t( blocks, patternName ) => {\n\t\t\tonInsertBlocks( blocks, { patternName } );\n\t\t\tonSelect();\n\t\t},\n\t\t[ onInsertBlocks, onSelect ]\n\t);\n\n\tconst onHover = useCallback(\n\t\t( item ) => {\n\t\t\tonToggleInsertionPoint( !! item );\n\t\t\tsetHoveredItem( item );\n\t\t},\n\t\t[ onToggleInsertionPoint, setHoveredItem ]\n\t);\n\n\tconst onHoverPattern = useCallback(\n\t\t( item ) => {\n\t\t\tonToggleInsertionPoint( !! item );\n\t\t},\n\t\t[ onToggleInsertionPoint ]\n\t);\n\n\tconst isZoomedOutViewExperimentEnabled =\n\t\twindow?.__experimentalEnableZoomedOutView;\n\tconst onClickPatternCategory = useCallback(\n\t\t( patternCategory, filter ) => {\n\t\t\tsetSelectedPatternCategory( patternCategory );\n\t\t\tsetPatternFilter( filter );\n\t\t\tif ( isZoomedOutViewExperimentEnabled ) {\n\t\t\t\t__experimentalOnPatternCategorySelection();\n\t\t\t}\n\t\t},\n\t\t[ setSelectedPatternCategory, __experimentalOnPatternCategorySelection ]\n\t);\n\n\tconst blocksTab = useMemo(\n\t\t() => (\n\t\t\t<>\n\t\t\t\t<div className=\"block-editor-inserter__block-list\">\n\t\t\t\t\t<BlockTypesTab\n\t\t\t\t\t\trootClientId={ destinationRootClientId }\n\t\t\t\t\t\tonInsert={ onInsert }\n\t\t\t\t\t\tonHover={ onHover }\n\t\t\t\t\t\tshowMostUsedBlocks={ showMostUsedBlocks }\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t{ showInserterHelpPanel && (\n\t\t\t\t\t<div className=\"block-editor-inserter__tips\">\n\t\t\t\t\t\t<VisuallyHidden as=\"h2\">\n\t\t\t\t\t\t\t{ __( 'A tip for using the block editor' ) }\n\t\t\t\t\t\t</VisuallyHidden>\n\t\t\t\t\t\t<Tips />\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t\t</>\n\t\t),\n\t\t[\n\t\t\tdestinationRootClientId,\n\t\t\tonInsert,\n\t\t\tonHover,\n\t\t\tshowMostUsedBlocks,\n\t\t\tshowInserterHelpPanel,\n\t\t]\n\t);\n\n\tconst patternsTab = useMemo(\n\t\t() => (\n\t\t\t<BlockPatternsTab\n\t\t\t\trootClientId={ destinationRootClientId }\n\t\t\t\tonInsert={ onInsertPattern }\n\t\t\t\tonSelectCategory={ onClickPatternCategory }\n\t\t\t\tselectedCategory={ selectedPatternCategory }\n\t\t\t/>\n\t\t),\n\t\t[\n\t\t\tdestinationRootClientId,\n\t\t\tonInsertPattern,\n\t\t\tonClickPatternCategory,\n\t\t\tselectedPatternCategory,\n\t\t]\n\t);\n\n\tconst mediaTab = useMemo(\n\t\t() => (\n\t\t\t<MediaTab\n\t\t\t\trootClientId={ destinationRootClientId }\n\t\t\t\tselectedCategory={ selectedMediaCategory }\n\t\t\t\tonSelectCategory={ setSelectedMediaCategory }\n\t\t\t\tonInsert={ onInsert }\n\t\t\t/>\n\t\t),\n\t\t[\n\t\t\tdestinationRootClientId,\n\t\t\tonInsert,\n\t\t\tselectedMediaCategory,\n\t\t\tsetSelectedMediaCategory,\n\t\t]\n\t);\n\n\tconst inserterTabsContents = useMemo(\n\t\t() => ( {\n\t\t\tblocks: blocksTab,\n\t\t\tpatterns: patternsTab,\n\t\t\tmedia: mediaTab,\n\t\t} ),\n\t\t[ blocksTab, mediaTab, patternsTab ]\n\t);\n\n\tconst searchRef = useRef();\n\tuseImperativeHandle( ref, () => ( {\n\t\tfocusSearch: () => {\n\t\t\tsearchRef.current.focus();\n\t\t},\n\t} ) );\n\n\tconst showPatternPanel =\n\t\tselectedTab === 'patterns' &&\n\t\t! delayedFilterValue &&\n\t\tselectedPatternCategory;\n\tconst showAsTabs = ! delayedFilterValue && ( showPatterns || showMedia );\n\tconst showMediaPanel =\n\t\tselectedTab === 'media' &&\n\t\t! delayedFilterValue &&\n\t\tselectedMediaCategory;\n\n\tconst handleSetSelectedTab = ( value ) => {\n\t\t// If no longer on patterns tab remove the category setting.\n\t\tif ( value !== 'patterns' ) {\n\t\t\tsetSelectedPatternCategory( null );\n\t\t}\n\t\tsetSelectedTab( value );\n\t};\n\n\treturn (\n\t\t<div className=\"block-editor-inserter__menu\">\n\t\t\t<div\n\t\t\t\tclassName={ classnames( 'block-editor-inserter__main-area', {\n\t\t\t\t\t'show-as-tabs': showAsTabs,\n\t\t\t\t} ) }\n\t\t\t>\n\t\t\t\t<SearchControl\n\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\tclassName=\"block-editor-inserter__search\"\n\t\t\t\t\tonChange={ ( value ) => {\n\t\t\t\t\t\tif ( hoveredItem ) setHoveredItem( null );\n\t\t\t\t\t\tsetFilterValue( value );\n\t\t\t\t\t} }\n\t\t\t\t\tvalue={ filterValue }\n\t\t\t\t\tlabel={ __( 'Search for blocks and patterns' ) }\n\t\t\t\t\tplaceholder={ __( 'Search' ) }\n\t\t\t\t\tref={ searchRef }\n\t\t\t\t/>\n\t\t\t\t{ !! delayedFilterValue && (\n\t\t\t\t\t<div className=\"block-editor-inserter__no-tab-container\">\n\t\t\t\t\t\t<InserterSearchResults\n\t\t\t\t\t\t\tfilterValue={ delayedFilterValue }\n\t\t\t\t\t\t\tonSelect={ onSelect }\n\t\t\t\t\t\t\tonHover={ onHover }\n\t\t\t\t\t\t\tonHoverPattern={ onHoverPattern }\n\t\t\t\t\t\t\trootClientId={ rootClientId }\n\t\t\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\t\t\tisAppender={ isAppender }\n\t\t\t\t\t\t\t__experimentalInsertionIndex={\n\t\t\t\t\t\t\t\t__experimentalInsertionIndex\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tshowBlockDirectory\n\t\t\t\t\t\t\tshouldFocusBlock={ shouldFocusBlock }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t\t\t{ showAsTabs && (\n\t\t\t\t\t<InserterTabs\n\t\t\t\t\t\tshowPatterns={ showPatterns }\n\t\t\t\t\t\tshowMedia={ showMedia }\n\t\t\t\t\t\tonSelect={ handleSetSelectedTab }\n\t\t\t\t\t\ttabsContents={ inserterTabsContents }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t{ ! delayedFilterValue && ! showAsTabs && (\n\t\t\t\t\t<div className=\"block-editor-inserter__no-tab-container\">\n\t\t\t\t\t\t{ blocksTab }\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t\t</div>\n\t\t\t{ showMediaPanel && (\n\t\t\t\t<MediaCategoryDialog\n\t\t\t\t\trootClientId={ destinationRootClientId }\n\t\t\t\t\tonInsert={ onInsert }\n\t\t\t\t\tcategory={ selectedMediaCategory }\n\t\t\t\t/>\n\t\t\t) }\n\t\t\t{ showInserterHelpPanel && hoveredItem && (\n\t\t\t\t<Popover\n\t\t\t\t\tclassName=\"block-editor-inserter__preview-container__popover\"\n\t\t\t\t\tplacement=\"right-start\"\n\t\t\t\t\toffset={ 16 }\n\t\t\t\t\tfocusOnMount={ false }\n\t\t\t\t\tanimate={ false }\n\t\t\t\t>\n\t\t\t\t\t<InserterPreviewPanel item={ hoveredItem } />\n\t\t\t\t</Popover>\n\t\t\t) }\n\t\t\t{ showPatternPanel && (\n\t\t\t\t<PatternCategoryPreviewPanel\n\t\t\t\t\trootClientId={ destinationRootClientId }\n\t\t\t\t\tonInsert={ onInsertPattern }\n\t\t\t\t\tonHover={ onHoverPattern }\n\t\t\t\t\tcategory={ selectedPatternCategory }\n\t\t\t\t\tpatternFilter={ patternFilter }\n\t\t\t\t\tshowTitlesAsTooltip\n\t\t\t\t/>\n\t\t\t) }\n\t\t</div>\n\t);\n}\n\nexport default forwardRef( InserterMenu );\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { useState, useEffect } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport { Button, SearchControl } from '@wordpress/components';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport InserterSearchResults from './search-results';\nimport useInsertionPoint from './hooks/use-insertion-point';\nimport usePatternsState from './hooks/use-patterns-state';\nimport useBlockTypesState from './hooks/use-block-types-state';\nimport { store as blockEditorStore } from '../../store';\n\nconst SEARCH_THRESHOLD = 6;\nconst SHOWN_BLOCK_TYPES = 6;\nconst SHOWN_BLOCK_PATTERNS = 2;\nconst SHOWN_BLOCK_PATTERNS_WITH_PRIORITIZATION = 4;\n\nexport default function QuickInserter( {\n\tonSelect,\n\trootClientId,\n\tclientId,\n\tisAppender,\n\tprioritizePatterns,\n\tselectBlockOnInsert,\n\thasSearch = true,\n} ) {\n\tconst [ filterValue, setFilterValue ] = useState( '' );\n\tconst [ destinationRootClientId, onInsertBlocks ] = useInsertionPoint( {\n\t\tonSelect,\n\t\trootClientId,\n\t\tclientId,\n\t\tisAppender,\n\t\tselectBlockOnInsert,\n\t} );\n\tconst [ blockTypes ] = useBlockTypesState(\n\t\tdestinationRootClientId,\n\t\tonInsertBlocks\n\t);\n\n\tconst [ patterns ] = usePatternsState(\n\t\tonInsertBlocks,\n\t\tdestinationRootClientId\n\t);\n\n\tconst { setInserterIsOpened, insertionIndex } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getSettings, getBlockIndex, getBlockCount } =\n\t\t\t\tselect( blockEditorStore );\n\t\t\tconst settings = getSettings();\n\t\t\tconst index = getBlockIndex( clientId );\n\t\t\tconst blockCount = getBlockCount();\n\n\t\t\treturn {\n\t\t\t\tsetInserterIsOpened: settings.__experimentalSetIsInserterOpened,\n\t\t\t\tinsertionIndex: index === -1 ? blockCount : index,\n\t\t\t};\n\t\t},\n\t\t[ clientId ]\n\t);\n\n\tconst showPatterns =\n\t\tpatterns.length && ( !! filterValue || prioritizePatterns );\n\tconst showSearch =\n\t\thasSearch &&\n\t\t( ( showPatterns && patterns.length > SEARCH_THRESHOLD ) ||\n\t\t\tblockTypes.length > SEARCH_THRESHOLD );\n\n\tuseEffect( () => {\n\t\tif ( setInserterIsOpened ) {\n\t\t\tsetInserterIsOpened( false );\n\t\t}\n\t}, [ setInserterIsOpened ] );\n\n\t// When clicking Browse All select the appropriate block so as\n\t// the insertion point can work as expected.\n\tconst onBrowseAll = () => {\n\t\tsetInserterIsOpened( { rootClientId, insertionIndex, filterValue } );\n\t};\n\n\tlet maxBlockPatterns = 0;\n\tif ( showPatterns ) {\n\t\tmaxBlockPatterns = prioritizePatterns\n\t\t\t? SHOWN_BLOCK_PATTERNS_WITH_PRIORITIZATION\n\t\t\t: SHOWN_BLOCK_PATTERNS;\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tclassName={ classnames( 'block-editor-inserter__quick-inserter', {\n\t\t\t\t'has-search': showSearch,\n\t\t\t\t'has-expand': setInserterIsOpened,\n\t\t\t} ) }\n\t\t>\n\t\t\t{ showSearch && (\n\t\t\t\t<SearchControl\n\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\tclassName=\"block-editor-inserter__search\"\n\t\t\t\t\tvalue={ filterValue }\n\t\t\t\t\tonChange={ ( value ) => {\n\t\t\t\t\t\tsetFilterValue( value );\n\t\t\t\t\t} }\n\t\t\t\t\tlabel={ __( 'Search for blocks and patterns' ) }\n\t\t\t\t\tplaceholder={ __( 'Search' ) }\n\t\t\t\t/>\n\t\t\t) }\n\n\t\t\t<div className=\"block-editor-inserter__quick-inserter-results\">\n\t\t\t\t<InserterSearchResults\n\t\t\t\t\tfilterValue={ filterValue }\n\t\t\t\t\tonSelect={ onSelect }\n\t\t\t\t\trootClientId={ rootClientId }\n\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\tisAppender={ isAppender }\n\t\t\t\t\tmaxBlockPatterns={ maxBlockPatterns }\n\t\t\t\t\tmaxBlockTypes={ SHOWN_BLOCK_TYPES }\n\t\t\t\t\tisDraggable={ false }\n\t\t\t\t\tprioritizePatterns={ prioritizePatterns }\n\t\t\t\t\tselectBlockOnInsert={ selectBlockOnInsert }\n\t\t\t\t/>\n\t\t\t</div>\n\n\t\t\t{ setInserterIsOpened && (\n\t\t\t\t<Button\n\t\t\t\t\tclassName=\"block-editor-inserter__quick-inserter-expand\"\n\t\t\t\t\tonClick={ onBrowseAll }\n\t\t\t\t\taria-label={ __(\n\t\t\t\t\t\t'Browse all. This will open the main inserter panel in the editor toolbar.'\n\t\t\t\t\t) }\n\t\t\t\t>\n\t\t\t\t\t{ __( 'Browse all' ) }\n\t\t\t\t</Button>\n\t\t\t) }\n\t\t</div>\n\t);\n}\n","/**\r\n * External dependencies\r\n */\r\nimport classnames from 'classnames';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { speak } from '@wordpress/a11y';\r\nimport { __, _x, sprintf } from '@wordpress/i18n';\r\nimport { Dropdown, Button } from '@wordpress/components';\r\nimport { forwardRef, Component } from '@wordpress/element';\r\nimport { withDispatch, withSelect } from '@wordpress/data';\r\nimport { compose, ifCondition } from '@wordpress/compose';\r\nimport { createBlock, store as blocksStore } from '@wordpress/blocks';\r\nimport { plus } from '@wordpress/icons';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport InserterMenu from './menu';\r\nimport QuickInserter from './quick-inserter';\r\nimport { store as blockEditorStore } from '../../store';\r\n\r\nconst defaultRenderToggle = ( {\r\n\tonToggle,\r\n\tdisabled,\r\n\tisOpen,\r\n\tblockTitle,\r\n\thasSingleBlockType,\r\n\ttoggleProps = {},\r\n\tprioritizePatterns,\r\n} ) => {\r\n\tconst {\r\n\t\tas: Wrapper = Button,\r\n\t\tlabel: labelProp,\r\n\t\tonClick,\r\n\t\t...rest\r\n\t} = toggleProps;\r\n\r\n\tlet label = labelProp;\r\n\tif ( ! label && hasSingleBlockType ) {\r\n\t\tlabel = sprintf(\r\n\t\t\t// translators: %s: the name of the block when there is only one\r\n\t\t\t_x( 'Add %s', 'directly add the only allowed block' ),\r\n\t\t\tblockTitle\r\n\t\t);\r\n\t} else if ( ! label && prioritizePatterns ) {\r\n\t\tlabel = __( 'Add pattern' );\r\n\t} else if ( ! label ) {\r\n\t\tlabel = _x( 'Add block', 'Generic label for block inserter button' );\r\n\t}\r\n\r\n\t// Handle both onClick functions from the toggle and the parent component.\r\n\tfunction handleClick( event ) {\r\n\t\tif ( onToggle ) {\r\n\t\t\tonToggle( event );\r\n\t\t}\r\n\t\tif ( onClick ) {\r\n\t\t\tonClick( event );\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Wrapper\r\n\t\t\ticon={ plus }\r\n\t\t\tlabel={ label }\r\n\t\t\ttooltipPosition=\"bottom\"\r\n\t\t\tonClick={ handleClick }\r\n\t\t\tclassName=\"block-editor-inserter__toggle\"\r\n\t\t\taria-haspopup={ ! hasSingleBlockType ? 'true' : false }\r\n\t\t\taria-expanded={ ! hasSingleBlockType ? isOpen : false }\r\n\t\t\tdisabled={ disabled }\r\n\t\t\t{ ...rest }\r\n\t\t/>\r\n\t);\r\n};\r\n\r\nclass PrivateInserter extends Component {\r\n\tconstructor() {\r\n\t\tsuper( ...arguments );\r\n\r\n\t\tthis.onToggle = this.onToggle.bind( this );\r\n\t\tthis.renderToggle = this.renderToggle.bind( this );\r\n\t\tthis.renderContent = this.renderContent.bind( this );\r\n\t}\r\n\r\n\tonToggle( isOpen ) {\r\n\t\tconst { onToggle } = this.props;\r\n\r\n\t\t// Surface toggle callback to parent component.\r\n\t\tif ( onToggle ) {\r\n\t\t\tonToggle( isOpen );\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Render callback to display Dropdown toggle element.\r\n\t *\r\n\t * @param {Object}   options\r\n\t * @param {Function} options.onToggle Callback to invoke when toggle is\r\n\t *                                    pressed.\r\n\t * @param {boolean}  options.isOpen   Whether dropdown is currently open.\r\n\t *\r\n\t * @return {Element} Dropdown toggle element.\r\n\t */\r\n\trenderToggle( { onToggle, isOpen } ) {\r\n\t\tconst {\r\n\t\t\tdisabled,\r\n\t\t\tblockTitle,\r\n\t\t\thasSingleBlockType,\r\n\t\t\tdirectInsertBlock,\r\n\t\t\ttoggleProps,\r\n\t\t\thasItems,\r\n\t\t\trenderToggle = defaultRenderToggle,\r\n\t\t\tprioritizePatterns,\r\n\t\t} = this.props;\r\n\r\n\t\treturn renderToggle( {\r\n\t\t\tonToggle,\r\n\t\t\tisOpen,\r\n\t\t\tdisabled: disabled || ! hasItems,\r\n\t\t\tblockTitle,\r\n\t\t\thasSingleBlockType,\r\n\t\t\tdirectInsertBlock,\r\n\t\t\ttoggleProps,\r\n\t\t\tprioritizePatterns,\r\n\t\t} );\r\n\t}\r\n\r\n\t/**\r\n\t * Render callback to display Dropdown content element.\r\n\t *\r\n\t * @param {Object}   options\r\n\t * @param {Function} options.onClose Callback to invoke when dropdown is\r\n\t *                                   closed.\r\n\t *\r\n\t * @return {Element} Dropdown content element.\r\n\t */\r\n\trenderContent( { onClose } ) {\r\n\t\tconst {\r\n\t\t\trootClientId,\r\n\t\t\tclientId,\r\n\t\t\tisAppender,\r\n\t\t\tshowInserterHelpPanel,\r\n\r\n\t\t\t// This prop is experimental to give some time for the quick inserter to mature\r\n\t\t\t// Feel free to make them stable after a few releases.\r\n\t\t\t__experimentalIsQuick: isQuick,\r\n\t\t\tprioritizePatterns,\r\n\t\t\tonSelectOrClose,\r\n\t\t\tselectBlockOnInsert,\r\n\t\t} = this.props;\r\n\r\n\t\tif ( isQuick ) {\r\n\t\t\treturn (\r\n\t\t\t\t<QuickInserter\r\n\t\t\t\t\tonSelect={ ( blocks ) => {\r\n\t\t\t\t\t\tconst firstBlock =\r\n\t\t\t\t\t\t\tArray.isArray( blocks ) && blocks?.length\r\n\t\t\t\t\t\t\t\t? blocks[ 0 ]\r\n\t\t\t\t\t\t\t\t: blocks;\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tonSelectOrClose &&\r\n\t\t\t\t\t\t\ttypeof onSelectOrClose === 'function'\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tonSelectOrClose( firstBlock );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tonClose();\r\n\t\t\t\t\t} }\r\n\t\t\t\t\trootClientId={ rootClientId }\r\n\t\t\t\t\tclientId={ clientId }\r\n\t\t\t\t\tisAppender={ isAppender }\r\n\t\t\t\t\tprioritizePatterns={ prioritizePatterns }\r\n\t\t\t\t\tselectBlockOnInsert={ selectBlockOnInsert }\r\n\t\t\t\t/>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<InserterMenu\r\n\t\t\t\tonSelect={ () => {\r\n\t\t\t\t\tonClose();\r\n\t\t\t\t} }\r\n\t\t\t\trootClientId={ rootClientId }\r\n\t\t\t\tclientId={ clientId }\r\n\t\t\t\tisAppender={ isAppender }\r\n\t\t\t\tshowInserterHelpPanel={ showInserterHelpPanel }\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {\r\n\t\t\tposition,\r\n\t\t\thasSingleBlockType,\r\n\t\t\tdirectInsertBlock,\r\n\t\t\tinsertOnlyAllowedBlock,\r\n\t\t\t__experimentalIsQuick: isQuick,\r\n\t\t\tonSelectOrClose,\r\n\t\t} = this.props;\r\n\r\n\t\tif ( hasSingleBlockType || directInsertBlock ) {\r\n\t\t\treturn this.renderToggle( { onToggle: insertOnlyAllowedBlock } );\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<Dropdown\r\n\t\t\t\tclassName=\"block-editor-inserter\"\r\n\t\t\t\tcontentClassName={ classnames(\r\n\t\t\t\t\t'block-editor-inserter__popover',\r\n\t\t\t\t\t{ 'is-quick': isQuick }\r\n\t\t\t\t) }\r\n\t\t\t\tpopoverProps={ { position, shift: true } }\r\n\t\t\t\tonToggle={ this.onToggle }\r\n\t\t\t\texpandOnMobile\r\n\t\t\t\theaderTitle={ __( 'Add a block' ) }\r\n\t\t\t\trenderToggle={ this.renderToggle }\r\n\t\t\t\trenderContent={ this.renderContent }\r\n\t\t\t\tonClose={ onSelectOrClose }\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport const ComposedPrivateInserter = compose( [\r\n\twithSelect(\r\n\t\t( select, { clientId, rootClientId, shouldDirectInsert = true } ) => {\r\n\t\t\tconst {\r\n\t\t\t\tgetBlockRootClientId,\r\n\t\t\t\thasInserterItems,\r\n\t\t\t\tgetAllowedBlocks,\r\n\t\t\t\tgetDirectInsertBlock,\r\n\t\t\t\tgetSettings,\r\n\t\t\t} = select( blockEditorStore );\r\n\r\n\t\t\tconst { getBlockVariations } = select( blocksStore );\r\n\r\n\t\t\trootClientId =\r\n\t\t\t\trootClientId || getBlockRootClientId( clientId ) || undefined;\r\n\r\n\t\t\tconst allowedBlocks = getAllowedBlocks( rootClientId );\r\n\r\n\t\t\tconst directInsertBlock =\r\n\t\t\t\tshouldDirectInsert && getDirectInsertBlock( rootClientId );\r\n\r\n\t\t\tconst settings = getSettings();\r\n\r\n\t\t\tconst hasSingleBlockType =\r\n\t\t\t\tallowedBlocks?.length === 1 &&\r\n\t\t\t\tgetBlockVariations( allowedBlocks[ 0 ].name, 'inserter' )\r\n\t\t\t\t\t?.length === 0;\r\n\r\n\t\t\tlet allowedBlockType = false;\r\n\t\t\tif ( hasSingleBlockType ) {\r\n\t\t\t\tallowedBlockType = allowedBlocks[ 0 ];\r\n\t\t\t}\r\n\r\n\t\t\treturn {\r\n\t\t\t\thasItems: hasInserterItems( rootClientId ),\r\n\t\t\t\thasSingleBlockType,\r\n\t\t\t\tblockTitle: allowedBlockType ? allowedBlockType.title : '',\r\n\t\t\t\tallowedBlockType,\r\n\t\t\t\tdirectInsertBlock,\r\n\t\t\t\trootClientId,\r\n\t\t\t\tprioritizePatterns:\r\n\t\t\t\t\tsettings.__experimentalPreferPatternsOnRoot &&\r\n\t\t\t\t\t! rootClientId,\r\n\t\t\t};\r\n\t\t}\r\n\t),\r\n\twithDispatch( ( dispatch, ownProps, { select } ) => {\r\n\t\treturn {\r\n\t\t\tinsertOnlyAllowedBlock() {\r\n\t\t\t\tconst {\r\n\t\t\t\t\trootClientId,\r\n\t\t\t\t\tclientId,\r\n\t\t\t\t\tisAppender,\r\n\t\t\t\t\thasSingleBlockType,\r\n\t\t\t\t\tallowedBlockType,\r\n\t\t\t\t\tdirectInsertBlock,\r\n\t\t\t\t\tonSelectOrClose,\r\n\t\t\t\t\tselectBlockOnInsert,\r\n\t\t\t\t} = ownProps;\r\n\r\n\t\t\t\tif ( ! hasSingleBlockType && ! directInsertBlock ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction getAdjacentBlockAttributes( attributesToCopy ) {\r\n\t\t\t\t\tconst { getBlock, getPreviousBlockClientId } =\r\n\t\t\t\t\t\tselect( blockEditorStore );\r\n\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\t! attributesToCopy ||\r\n\t\t\t\t\t\t( ! clientId && ! rootClientId )\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\treturn {};\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconst result = {};\r\n\t\t\t\t\tlet adjacentAttributes = {};\r\n\r\n\t\t\t\t\t// If there is no clientId, then attempt to get attributes\r\n\t\t\t\t\t// from the last block within innerBlocks of the root block.\r\n\t\t\t\t\tif ( ! clientId ) {\r\n\t\t\t\t\t\tconst parentBlock = getBlock( rootClientId );\r\n\r\n\t\t\t\t\t\tif ( parentBlock?.innerBlocks?.length ) {\r\n\t\t\t\t\t\t\tconst lastInnerBlock =\r\n\t\t\t\t\t\t\t\tparentBlock.innerBlocks[\r\n\t\t\t\t\t\t\t\t\tparentBlock.innerBlocks.length - 1\r\n\t\t\t\t\t\t\t\t];\r\n\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\tdirectInsertBlock &&\r\n\t\t\t\t\t\t\t\tdirectInsertBlock?.name === lastInnerBlock.name\r\n\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\tadjacentAttributes = lastInnerBlock.attributes;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// Otherwise, attempt to get attributes from the\r\n\t\t\t\t\t\t// previous block relative to the current clientId.\r\n\t\t\t\t\t\tconst currentBlock = getBlock( clientId );\r\n\t\t\t\t\t\tconst previousBlock = getBlock(\r\n\t\t\t\t\t\t\tgetPreviousBlockClientId( clientId )\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tif ( currentBlock?.name === previousBlock?.name ) {\r\n\t\t\t\t\t\t\tadjacentAttributes =\r\n\t\t\t\t\t\t\t\tpreviousBlock?.attributes || {};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Copy over only those attributes flagged to be copied.\r\n\t\t\t\t\tattributesToCopy.forEach( ( attribute ) => {\r\n\t\t\t\t\t\tif ( adjacentAttributes.hasOwnProperty( attribute ) ) {\r\n\t\t\t\t\t\t\tresult[ attribute ] =\r\n\t\t\t\t\t\t\t\tadjacentAttributes[ attribute ];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} );\r\n\r\n\t\t\t\t\treturn result;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction getInsertionIndex() {\r\n\t\t\t\t\tconst {\r\n\t\t\t\t\t\tgetBlockIndex,\r\n\t\t\t\t\t\tgetBlockSelectionEnd,\r\n\t\t\t\t\t\tgetBlockOrder,\r\n\t\t\t\t\t\tgetBlockRootClientId,\r\n\t\t\t\t\t} = select( blockEditorStore );\r\n\r\n\t\t\t\t\t// If the clientId is defined, we insert at the position of the block.\r\n\t\t\t\t\tif ( clientId ) {\r\n\t\t\t\t\t\treturn getBlockIndex( clientId );\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// If there a selected block, we insert after the selected block.\r\n\t\t\t\t\tconst end = getBlockSelectionEnd();\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\t! isAppender &&\r\n\t\t\t\t\t\tend &&\r\n\t\t\t\t\t\tgetBlockRootClientId( end ) === rootClientId\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\treturn getBlockIndex( end ) + 1;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Otherwise, we insert at the end of the current rootClientId.\r\n\t\t\t\t\treturn getBlockOrder( rootClientId ).length;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst { insertBlock } = dispatch( blockEditorStore );\r\n\r\n\t\t\t\tlet blockToInsert;\r\n\r\n\t\t\t\t// Attempt to augment the directInsertBlock with attributes from an adjacent block.\r\n\t\t\t\t// This ensures styling from nearby blocks is preserved in the newly inserted block.\r\n\t\t\t\t// See: https://github.com/WordPress/gutenberg/issues/37904\r\n\t\t\t\tif ( directInsertBlock ) {\r\n\t\t\t\t\tconst newAttributes = getAdjacentBlockAttributes(\r\n\t\t\t\t\t\tdirectInsertBlock.attributesToCopy\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\tblockToInsert = createBlock( directInsertBlock.name, {\r\n\t\t\t\t\t\t...( directInsertBlock.attributes || {} ),\r\n\t\t\t\t\t\t...newAttributes,\r\n\t\t\t\t\t} );\r\n\t\t\t\t} else {\r\n\t\t\t\t\tblockToInsert = createBlock( allowedBlockType.name );\r\n\t\t\t\t}\r\n\r\n\t\t\t\tinsertBlock(\r\n\t\t\t\t\tblockToInsert,\r\n\t\t\t\t\tgetInsertionIndex(),\r\n\t\t\t\t\trootClientId,\r\n\t\t\t\t\tselectBlockOnInsert\r\n\t\t\t\t);\r\n\r\n\t\t\t\tif ( onSelectOrClose ) {\r\n\t\t\t\t\tonSelectOrClose( {\r\n\t\t\t\t\t\tclientId: blockToInsert?.clientId,\r\n\t\t\t\t\t} );\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst message = sprintf(\r\n\t\t\t\t\t// translators: %s: the name of the block that has been added\r\n\t\t\t\t\t__( '%s block added' ),\r\n\t\t\t\t\tallowedBlockType.title\r\n\t\t\t\t);\r\n\t\t\t\tspeak( message );\r\n\t\t\t},\r\n\t\t};\r\n\t} ),\r\n\t// The global inserter should always be visible, we are using ( ! isAppender && ! rootClientId && ! clientId ) as\r\n\t// a way to detect the global Inserter.\r\n\tifCondition(\r\n\t\t( { hasItems, isAppender, rootClientId, clientId } ) =>\r\n\t\t\thasItems || ( ! isAppender && ! rootClientId && ! clientId )\r\n\t),\r\n] )( PrivateInserter );\r\n\r\nconst Inserter = forwardRef( ( props, ref ) => {\r\n\treturn <ComposedPrivateInserter ref={ ref } { ...props } />;\r\n} );\r\n\r\nexport default Inserter;\r\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { decodeEntities } from '@wordpress/html-entities';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { ENTER, SPACE } from '@wordpress/keycodes';\n\n/**\n * Internal dependencies\n */\nimport Inserter from '../inserter';\nimport { store as blockEditorStore } from '../../store';\n\n/**\n * Zero width non-breaking space, used as padding for the paragraph when it is\n * empty.\n */\nexport const ZWNBSP = '\\ufeff';\n\nexport default function DefaultBlockAppender( { rootClientId } ) {\n\tconst { showPrompt, isLocked, placeholder } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getBlockCount, getSettings, getTemplateLock } =\n\t\t\t\tselect( blockEditorStore );\n\n\t\t\tconst isEmpty = ! getBlockCount( rootClientId );\n\t\t\tconst { bodyPlaceholder } = getSettings();\n\n\t\t\treturn {\n\t\t\t\tshowPrompt: isEmpty,\n\t\t\t\tisLocked: !! getTemplateLock( rootClientId ),\n\t\t\t\tplaceholder: bodyPlaceholder,\n\t\t\t};\n\t\t},\n\t\t[ rootClientId ]\n\t);\n\n\tconst { insertDefaultBlock, startTyping } = useDispatch( blockEditorStore );\n\n\tif ( isLocked ) {\n\t\treturn null;\n\t}\n\n\tconst value =\n\t\tdecodeEntities( placeholder ) || __( 'Type / to choose a block' );\n\n\tconst onAppend = () => {\n\t\tinsertDefaultBlock( undefined, rootClientId );\n\t\tstartTyping();\n\t};\n\n\treturn (\n\t\t<div\n\t\t\tdata-root-client-id={ rootClientId || '' }\n\t\t\tclassName={ classnames( 'block-editor-default-block-appender', {\n\t\t\t\t'has-visible-prompt': showPrompt,\n\t\t\t} ) }\n\t\t>\n\t\t\t<p\n\t\t\t\ttabIndex=\"0\"\n\t\t\t\t// We want this element to be styled as a paragraph by themes.\n\t\t\t\t// eslint-disable-next-line jsx-a11y/no-noninteractive-element-to-interactive-role\n\t\t\t\trole=\"button\"\n\t\t\t\taria-label={ __( 'Add default block' ) }\n\t\t\t\t// A wrapping container for this one already has the wp-block className.\n\t\t\t\tclassName=\"block-editor-default-block-appender__content\"\n\t\t\t\tonKeyDown={ ( event ) => {\n\t\t\t\t\tif ( ENTER === event.keyCode || SPACE === event.keyCode ) {\n\t\t\t\t\t\tonAppend();\n\t\t\t\t\t}\n\t\t\t\t} }\n\t\t\t\tonClick={ () => onAppend() }\n\t\t\t\tonFocus={ () => {\n\t\t\t\t\tif ( showPrompt ) {\n\t\t\t\t\t\tonAppend();\n\t\t\t\t\t}\n\t\t\t\t} }\n\t\t\t>\n\t\t\t\t{ showPrompt ? value : ZWNBSP }\n\t\t\t</p>\n\t\t\t<Inserter\n\t\t\t\trootClientId={ rootClientId }\n\t\t\t\tposition=\"bottom right\"\n\t\t\t\tisAppender\n\t\t\t\t__experimentalIsQuick\n\t\t\t/>\n\t\t</div>\n\t);\n}\n","/**\r\n * External dependencies\r\n */\r\nimport classnames from 'classnames';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { Button, Tooltip, VisuallyHidden } from '@wordpress/components';\r\nimport { forwardRef } from '@wordpress/element';\r\nimport { _x, sprintf } from '@wordpress/i18n';\r\nimport { Icon, plus } from '@wordpress/icons';\r\nimport deprecated from '@wordpress/deprecated';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport Inserter from '../inserter';\r\n\r\nfunction ButtonBlockAppender(\r\n\t{ rootClientId, className, onFocus, tabIndex },\r\n\tref\r\n) {\r\n\treturn (\r\n\t\t<Inserter\r\n\t\t\tposition=\"bottom center\"\r\n\t\t\trootClientId={ rootClientId }\r\n\t\t\t__experimentalIsQuick\r\n\t\t\trenderToggle={ ( {\r\n\t\t\t\tonToggle,\r\n\t\t\t\tdisabled,\r\n\t\t\t\tisOpen,\r\n\t\t\t\tblockTitle,\r\n\t\t\t\thasSingleBlockType,\r\n\t\t\t} ) => {\r\n\t\t\t\tlet label;\r\n\t\t\t\tif ( hasSingleBlockType ) {\r\n\t\t\t\t\tlabel = sprintf(\r\n\t\t\t\t\t\t// translators: %s: the name of the block when there is only one\r\n\t\t\t\t\t\t_x( 'Add %s', 'directly add the only allowed block' ),\r\n\t\t\t\t\t\tblockTitle\r\n\t\t\t\t\t);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlabel = _x(\r\n\t\t\t\t\t\t'Add block',\r\n\t\t\t\t\t\t'Generic label for block inserter button'\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t\tconst isToggleButton = ! hasSingleBlockType;\r\n\r\n\t\t\t\tlet inserterButton = (\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tref={ ref }\r\n\t\t\t\t\t\tonFocus={ onFocus }\r\n\t\t\t\t\t\ttabIndex={ tabIndex }\r\n\t\t\t\t\t\tclassName={ classnames(\r\n\t\t\t\t\t\t\tclassName,\r\n\t\t\t\t\t\t\t'block-editor-button-block-appender'\r\n\t\t\t\t\t\t) }\r\n\t\t\t\t\t\tonClick={ onToggle }\r\n\t\t\t\t\t\taria-haspopup={ isToggleButton ? 'true' : undefined }\r\n\t\t\t\t\t\taria-expanded={ isToggleButton ? isOpen : undefined }\r\n\t\t\t\t\t\tdisabled={ disabled }\r\n\t\t\t\t\t\tlabel={ label }\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{ ! hasSingleBlockType && (\r\n\t\t\t\t\t\t\t<VisuallyHidden as=\"span\">{ label }</VisuallyHidden>\r\n\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t<Icon icon={ plus } />\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t);\r\n\r\n\t\t\t\tif ( isToggleButton || hasSingleBlockType ) {\r\n\t\t\t\t\tinserterButton = (\r\n\t\t\t\t\t\t<Tooltip text={ label }>{ inserterButton }</Tooltip>\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t\treturn inserterButton;\r\n\t\t\t} }\r\n\t\t\tisAppender\r\n\t\t/>\r\n\t);\r\n}\r\n\r\n/**\r\n * Use `ButtonBlockAppender` instead.\r\n *\r\n * @deprecated\r\n */\r\nexport const ButtonBlockerAppender = forwardRef( ( props, ref ) => {\r\n\tdeprecated( `wp.blockEditor.ButtonBlockerAppender`, {\r\n\t\talternative: 'wp.blockEditor.ButtonBlockAppender',\r\n\t\tsince: '5.9',\r\n\t} );\r\n\r\n\treturn ButtonBlockAppender( props, ref );\r\n} );\r\n\r\n/**\r\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/button-block-appender/README.md\r\n */\r\nexport default forwardRef( ButtonBlockAppender );\r\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport { getDefaultBlockName } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport DefaultBlockAppender from '../default-block-appender';\nimport ButtonBlockAppender from '../button-block-appender';\nimport { store as blockEditorStore } from '../../store';\n\nfunction DefaultAppender( { rootClientId } ) {\n\tconst canInsertDefaultBlock = useSelect( ( select ) =>\n\t\tselect( blockEditorStore ).canInsertBlockType(\n\t\t\tgetDefaultBlockName(),\n\t\t\trootClientId\n\t\t)\n\t);\n\n\tif ( canInsertDefaultBlock ) {\n\t\t// Render the default block appender if the context supports use\n\t\t// of the default appender.\n\t\treturn <DefaultBlockAppender rootClientId={ rootClientId } />;\n\t}\n\n\t// Fallback in case the default block can't be inserted.\n\treturn (\n\t\t<ButtonBlockAppender\n\t\t\trootClientId={ rootClientId }\n\t\t\tclassName=\"block-list-appender__toggle\"\n\t\t/>\n\t);\n}\n\nexport default function BlockListAppender( {\n\trootClientId,\n\tCustomAppender,\n\tclassName,\n\ttagName: TagName = 'div',\n} ) {\n\tconst isDragOver = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tgetBlockInsertionPoint,\n\t\t\t\tisBlockInsertionPointVisible,\n\t\t\t\tgetBlockCount,\n\t\t\t} = select( blockEditorStore );\n\t\t\tconst insertionPoint = getBlockInsertionPoint();\n\t\t\t// Ideally we should also check for `isDragging` but currently it\n\t\t\t// requires a lot more setup. We can revisit this once we refactor\n\t\t\t// the DnD utility hooks.\n\t\t\treturn (\n\t\t\t\tisBlockInsertionPointVisible() &&\n\t\t\t\trootClientId === insertionPoint?.rootClientId &&\n\t\t\t\tgetBlockCount( rootClientId ) === 0\n\t\t\t);\n\t\t},\n\t\t[ rootClientId ]\n\t);\n\n\treturn (\n\t\t<TagName\n\t\t\t// A `tabIndex` is used on the wrapping `div` element in order to\n\t\t\t// force a focus event to occur when an appender `button` element\n\t\t\t// is clicked. In some browsers (Firefox, Safari), button clicks do\n\t\t\t// not emit a focus event, which could cause this event to propagate\n\t\t\t// unexpectedly. The `tabIndex` ensures that the interaction is\n\t\t\t// captured as a focus, without also adding an extra tab stop.\n\t\t\t//\n\t\t\t// See: https://developer.mozilla.org/en-US/docs/Web/HTML/Element/button#Clicking_and_focus\n\t\t\ttabIndex={ -1 }\n\t\t\tclassName={ classnames( 'block-list-appender wp-block', className, {\n\t\t\t\t'is-drag-over': isDragOver,\n\t\t\t} ) }\n\t\t\t// Needed in case the whole editor is content editable (for multi\n\t\t\t// selection). It fixes an edge case where ArrowDown and ArrowRight\n\t\t\t// should collapse the selection to the end of that selection and\n\t\t\t// not into the appender.\n\t\t\tcontentEditable={ false }\n\t\t\t// The appender exists to let you add the first Paragraph before\n\t\t\t// any is inserted. To that end, this appender should visually be\n\t\t\t// presented as a block. That means theme CSS should style it as if\n\t\t\t// it were an empty paragraph block. That means a `wp-block` class to\n\t\t\t// ensure the width is correct, and a [data-block] attribute to ensure\n\t\t\t// the correct margin is applied, especially for classic themes which\n\t\t\t// have commonly targeted that attribute for margins.\n\t\t\tdata-block\n\t\t>\n\t\t\t{ CustomAppender ? (\n\t\t\t\t<CustomAppender />\n\t\t\t) : (\n\t\t\t\t<DefaultAppender rootClientId={ rootClientId } />\n\t\t\t) }\n\t\t</TagName>\n\t);\n}\n","/**\r\n * External dependencies\r\n */\r\nimport classnames from 'classnames';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { useSelect } from '@wordpress/data';\r\nimport {\r\n\tuseMemo,\r\n\tcreateContext,\r\n\tuseReducer,\r\n\tuseLayoutEffect,\r\n} from '@wordpress/element';\r\nimport { Popover } from '@wordpress/components';\r\nimport { isRTL } from '@wordpress/i18n';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as blockEditorStore } from '../../store';\r\nimport { __unstableUseBlockElement as useBlockElement } from '../block-list/use-block-props/use-block-refs';\r\nimport usePopoverScroll from './use-popover-scroll';\r\n\r\nconst MAX_POPOVER_RECOMPUTE_COUNTER = Number.MAX_SAFE_INTEGER;\r\n\r\nexport const InsertionPointOpenRef = createContext();\r\n\r\nfunction BlockPopoverInbetween( {\r\n\tpreviousClientId,\r\n\tnextClientId,\r\n\tchildren,\r\n\t__unstablePopoverSlot,\r\n\t__unstableContentRef,\r\n\toperation = 'insert',\r\n\tnearestSide = 'right',\r\n\t...props\r\n} ) {\r\n\t// This is a temporary hack to get the inbetween inserter to recompute properly.\r\n\tconst [ popoverRecomputeCounter, forcePopoverRecompute ] = useReducer(\r\n\t\t// Module is there to make sure that the counter doesn't overflow.\r\n\t\t( s ) => ( s + 1 ) % MAX_POPOVER_RECOMPUTE_COUNTER,\r\n\t\t0\r\n\t);\r\n\r\n\tconst { orientation, rootClientId, isVisible } = useSelect(\r\n\t\t( select ) => {\r\n\t\t\tconst {\r\n\t\t\t\tgetBlockListSettings,\r\n\t\t\t\tgetBlockRootClientId,\r\n\t\t\t\tisBlockVisible,\r\n\t\t\t} = select( blockEditorStore );\r\n\r\n\t\t\tconst _rootClientId = getBlockRootClientId(\r\n\t\t\t\tpreviousClientId ?? nextClientId\r\n\t\t\t);\r\n\t\t\treturn {\r\n\t\t\t\torientation:\r\n\t\t\t\t\tgetBlockListSettings( _rootClientId )?.orientation ||\r\n\t\t\t\t\t'vertical',\r\n\t\t\t\trootClientId: _rootClientId,\r\n\t\t\t\tisVisible:\r\n\t\t\t\t\tisBlockVisible( previousClientId ) &&\r\n\t\t\t\t\tisBlockVisible( nextClientId ),\r\n\t\t\t};\r\n\t\t},\r\n\t\t[ previousClientId, nextClientId ]\r\n\t);\r\n\tconst previousElement = useBlockElement( previousClientId );\r\n\tconst nextElement = useBlockElement( nextClientId );\r\n\tconst isVertical = orientation === 'vertical';\r\n\r\n\tconst popoverAnchor = useMemo( () => {\r\n\t\tif (\r\n\t\t\t// popoverRecomputeCounter is by definition always equal or greater than 0.\r\n\t\t\t// This check is only there to satisfy the correctness of the\r\n\t\t\t// exhaustive-deps rule for the `useMemo` hook.\r\n\t\t\tpopoverRecomputeCounter < 0 ||\r\n\t\t\t( ! previousElement && ! nextElement ) ||\r\n\t\t\t! isVisible\r\n\t\t) {\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\r\n\t\tconst contextElement =\r\n\t\t\toperation === 'group'\r\n\t\t\t\t? nextElement || previousElement\r\n\t\t\t\t: previousElement || nextElement;\r\n\r\n\t\treturn {\r\n\t\t\tcontextElement,\r\n\t\t\tgetBoundingClientRect() {\r\n\t\t\t\tconst previousRect = previousElement\r\n\t\t\t\t\t? previousElement.getBoundingClientRect()\r\n\t\t\t\t\t: null;\r\n\t\t\t\tconst nextRect = nextElement\r\n\t\t\t\t\t? nextElement.getBoundingClientRect()\r\n\t\t\t\t\t: null;\r\n\r\n\t\t\t\tlet left = 0;\r\n\t\t\t\tlet top = 0;\r\n\t\t\t\tlet width = 0;\r\n\t\t\t\tlet height = 0;\r\n\r\n\t\t\t\tif ( operation === 'group' ) {\r\n\t\t\t\t\tconst targetRect = nextRect || previousRect;\r\n\t\t\t\t\ttop = targetRect.top;\r\n\t\t\t\t\t// No spacing is likely around blocks in this operation.\r\n\t\t\t\t\t// So width of the inserter containing rect is set to 0.\r\n\t\t\t\t\twidth = 0;\r\n\t\t\t\t\theight = targetRect.bottom - targetRect.top;\r\n\t\t\t\t\t// Popover calculates its distance from mid-block so some\r\n\t\t\t\t\t// adjustments are needed to make it appear in the right place.\r\n\t\t\t\t\tleft =\r\n\t\t\t\t\t\tnearestSide === 'left'\r\n\t\t\t\t\t\t\t? targetRect.left - 2\r\n\t\t\t\t\t\t\t: targetRect.right - 2;\r\n\t\t\t\t} else if ( isVertical ) {\r\n\t\t\t\t\t// vertical\r\n\t\t\t\t\ttop = previousRect ? previousRect.bottom : nextRect.top;\r\n\t\t\t\t\twidth = previousRect ? previousRect.width : nextRect.width;\r\n\t\t\t\t\theight =\r\n\t\t\t\t\t\tnextRect && previousRect\r\n\t\t\t\t\t\t\t? nextRect.top - previousRect.bottom\r\n\t\t\t\t\t\t\t: 0;\r\n\t\t\t\t\tleft = previousRect ? previousRect.left : nextRect.left;\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttop = previousRect ? previousRect.top : nextRect.top;\r\n\t\t\t\t\theight = previousRect\r\n\t\t\t\t\t\t? previousRect.height\r\n\t\t\t\t\t\t: nextRect.height;\r\n\r\n\t\t\t\t\tif ( isRTL() ) {\r\n\t\t\t\t\t\t// non vertical, rtl\r\n\t\t\t\t\t\tleft = nextRect ? nextRect.right : previousRect.left;\r\n\t\t\t\t\t\twidth =\r\n\t\t\t\t\t\t\tpreviousRect && nextRect\r\n\t\t\t\t\t\t\t\t? previousRect.left - nextRect.right\r\n\t\t\t\t\t\t\t\t: 0;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// non vertical, ltr\r\n\t\t\t\t\t\tleft = previousRect\r\n\t\t\t\t\t\t\t? previousRect.right\r\n\t\t\t\t\t\t\t: nextRect.left;\r\n\t\t\t\t\t\twidth =\r\n\t\t\t\t\t\t\tpreviousRect && nextRect\r\n\t\t\t\t\t\t\t\t? nextRect.left - previousRect.right\r\n\t\t\t\t\t\t\t\t: 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn new window.DOMRect( left, top, width, height );\r\n\t\t\t},\r\n\t\t};\r\n\t}, [\r\n\t\tpreviousElement,\r\n\t\tnextElement,\r\n\t\tpopoverRecomputeCounter,\r\n\t\tisVertical,\r\n\t\tisVisible,\r\n\t\toperation,\r\n\t\tnearestSide,\r\n\t] );\r\n\r\n\tconst popoverScrollRef = usePopoverScroll( __unstableContentRef );\r\n\r\n\t// This is only needed for a smooth transition when moving blocks.\r\n\t// When blocks are moved up/down, their position can be set by\r\n\t// updating the `transform` property manually (i.e. without using CSS\r\n\t// transitions or animations). The animation, which can also scroll the block\r\n\t// editor, can sometimes cause the position of the Popover to get out of sync.\r\n\t// A MutationObserver is therefore used to make sure that changes to the\r\n\t// selectedElement's attribute (i.e. `transform`) can be tracked and used to\r\n\t// trigger the Popover to rerender.\r\n\tuseLayoutEffect( () => {\r\n\t\tif ( ! previousElement ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst observer = new window.MutationObserver( forcePopoverRecompute );\r\n\t\tobserver.observe( previousElement, { attributes: true } );\r\n\r\n\t\treturn () => {\r\n\t\t\tobserver.disconnect();\r\n\t\t};\r\n\t}, [ previousElement ] );\r\n\r\n\tuseLayoutEffect( () => {\r\n\t\tif ( ! nextElement ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst observer = new window.MutationObserver( forcePopoverRecompute );\r\n\t\tobserver.observe( nextElement, { attributes: true } );\r\n\r\n\t\treturn () => {\r\n\t\t\tobserver.disconnect();\r\n\t\t};\r\n\t}, [ nextElement ] );\r\n\r\n\tuseLayoutEffect( () => {\r\n\t\tif ( ! previousElement ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tpreviousElement.ownerDocument.defaultView.addEventListener(\r\n\t\t\t'resize',\r\n\t\t\tforcePopoverRecompute\r\n\t\t);\r\n\t\treturn () => {\r\n\t\t\tpreviousElement.ownerDocument.defaultView?.removeEventListener(\r\n\t\t\t\t'resize',\r\n\t\t\t\tforcePopoverRecompute\r\n\t\t\t);\r\n\t\t};\r\n\t}, [ previousElement ] );\r\n\r\n\t// If there's either a previous or a next element, show the inbetween popover.\r\n\t// Note that drag and drop uses the inbetween popover to show the drop indicator\r\n\t// before the first block and after the last block.\r\n\tif ( ( ! previousElement && ! nextElement ) || ! isVisible ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\t/* eslint-disable jsx-a11y/no-static-element-interactions, jsx-a11y/click-events-have-key-events */\r\n\t// While ideally it would be enough to capture the\r\n\t// bubbling focus event from the Inserter, due to the\r\n\t// characteristics of click focusing of `button`s in\r\n\t// Firefox and Safari, it is not reliable.\r\n\t//\r\n\t// See: https://developer.mozilla.org/en-US/docs/Web/HTML/Element/button#Clicking_and_focus\r\n\treturn (\r\n\t\t<Popover\r\n\t\t\tref={ popoverScrollRef }\r\n\t\t\tanimate={ false }\r\n\t\t\tanchor={ popoverAnchor }\r\n\t\t\tfocusOnMount={ false }\r\n\t\t\t// Render in the old slot if needed for backward compatibility,\r\n\t\t\t// otherwise render in place (not in the default popover slot).\r\n\t\t\t__unstableSlotName={ __unstablePopoverSlot }\r\n\t\t\tinline={ ! __unstablePopoverSlot }\r\n\t\t\t// Forces a remount of the popover when its position changes\r\n\t\t\t// This makes sure the popover doesn't animate from its previous position.\r\n\t\t\tkey={ nextClientId + '--' + rootClientId }\r\n\t\t\t{ ...props }\r\n\t\t\tclassName={ classnames(\r\n\t\t\t\t'block-editor-block-popover',\r\n\t\t\t\t'block-editor-block-popover__inbetween',\r\n\t\t\t\tprops.className\r\n\t\t\t) }\r\n\t\t\tresize={ false }\r\n\t\t\tflip={ false }\r\n\t\t\tplacement=\"overlay\"\r\n\t\t\tvariant=\"unstyled\"\r\n\t\t>\r\n\t\t\t<div className=\"block-editor-block-popover__inbetween-container\">\r\n\t\t\t\t{ children }\r\n\t\t\t</div>\r\n\t\t</Popover>\r\n\t);\r\n\t/* eslint-enable jsx-a11y/no-static-element-interactions, jsx-a11y/click-events-have-key-events */\r\n}\r\n\r\nexport default BlockPopoverInbetween;\r\n","/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport { useReducedMotion } from '@wordpress/compose';\nimport { __unstableMotion as motion } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport BlockPopoverCover from './cover';\n\nconst animateVariants = {\n\thide: { opacity: 0, scaleY: 0.75 },\n\tshow: { opacity: 1, scaleY: 1 },\n\texit: { opacity: 0, scaleY: 0.9 },\n};\n\nfunction BlockDropZonePopover( {\n\t__unstablePopoverSlot,\n\t__unstableContentRef,\n} ) {\n\tconst { clientId } = useSelect( ( select ) => {\n\t\tconst { getBlockOrder, getBlockInsertionPoint } =\n\t\t\tselect( blockEditorStore );\n\t\tconst insertionPoint = getBlockInsertionPoint();\n\t\tconst order = getBlockOrder( insertionPoint.rootClientId );\n\n\t\tif ( ! order.length ) {\n\t\t\treturn {};\n\t\t}\n\n\t\treturn {\n\t\t\tclientId: order[ insertionPoint.index ],\n\t\t};\n\t}, [] );\n\tconst reducedMotion = useReducedMotion();\n\n\treturn (\n\t\t<BlockPopoverCover\n\t\t\tclientId={ clientId }\n\t\t\t__unstablePopoverSlot={ __unstablePopoverSlot }\n\t\t\t__unstableContentRef={ __unstableContentRef }\n\t\t\tclassName=\"block-editor-block-popover__drop-zone\"\n\t\t>\n\t\t\t<motion.div\n\t\t\t\tdata-testid=\"block-popover-drop-zone\"\n\t\t\t\tinitial={\n\t\t\t\t\treducedMotion ? animateVariants.show : animateVariants.hide\n\t\t\t\t}\n\t\t\t\tanimate={ animateVariants.show }\n\t\t\t\texit={\n\t\t\t\t\treducedMotion ? animateVariants.show : animateVariants.exit\n\t\t\t\t}\n\t\t\t\tclassName=\"block-editor-block-popover__drop-zone-foreground\"\n\t\t\t/>\n\t\t</BlockPopoverCover>\n\t);\n}\n\nexport default BlockDropZonePopover;\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { useRef, createContext, useContext } from '@wordpress/element';\nimport { __unstableMotion as motion } from '@wordpress/components';\nimport { useReducedMotion } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport Inserter from '../inserter';\nimport { store as blockEditorStore } from '../../store';\nimport BlockPopoverInbetween from '../block-popover/inbetween';\nimport BlockDropZonePopover from '../block-popover/drop-zone';\n\nexport const InsertionPointOpenRef = createContext();\n\nfunction InbetweenInsertionPointPopover( {\n\t__unstablePopoverSlot,\n\t__unstableContentRef,\n\toperation = 'insert',\n\tnearestSide = 'right',\n} ) {\n\tconst { selectBlock, hideInsertionPoint } = useDispatch( blockEditorStore );\n\tconst openRef = useContext( InsertionPointOpenRef );\n\tconst ref = useRef();\n\tconst {\n\t\torientation,\n\t\tpreviousClientId,\n\t\tnextClientId,\n\t\trootClientId,\n\t\tisInserterShown,\n\t\tisDistractionFree,\n\t\tisNavigationMode,\n\t} = useSelect( ( select ) => {\n\t\tconst {\n\t\t\tgetBlockOrder,\n\t\t\tgetBlockListSettings,\n\t\t\tgetBlockInsertionPoint,\n\t\t\tisBlockBeingDragged,\n\t\t\tgetPreviousBlockClientId,\n\t\t\tgetNextBlockClientId,\n\t\t\tgetSettings,\n\t\t\tisNavigationMode: _isNavigationMode,\n\t\t} = select( blockEditorStore );\n\t\tconst insertionPoint = getBlockInsertionPoint();\n\t\tconst order = getBlockOrder( insertionPoint.rootClientId );\n\n\t\tif ( ! order.length ) {\n\t\t\treturn {};\n\t\t}\n\n\t\tlet _previousClientId = order[ insertionPoint.index - 1 ];\n\t\tlet _nextClientId = order[ insertionPoint.index ];\n\n\t\twhile ( isBlockBeingDragged( _previousClientId ) ) {\n\t\t\t_previousClientId = getPreviousBlockClientId( _previousClientId );\n\t\t}\n\n\t\twhile ( isBlockBeingDragged( _nextClientId ) ) {\n\t\t\t_nextClientId = getNextBlockClientId( _nextClientId );\n\t\t}\n\n\t\tconst settings = getSettings();\n\n\t\treturn {\n\t\t\tpreviousClientId: _previousClientId,\n\t\t\tnextClientId: _nextClientId,\n\t\t\torientation:\n\t\t\t\tgetBlockListSettings( insertionPoint.rootClientId )\n\t\t\t\t\t?.orientation || 'vertical',\n\t\t\trootClientId: insertionPoint.rootClientId,\n\t\t\tisNavigationMode: _isNavigationMode(),\n\t\t\tisDistractionFree: settings.isDistractionFree,\n\t\t\tisInserterShown: insertionPoint?.__unstableWithInserter,\n\t\t};\n\t}, [] );\n\tconst { getBlockEditingMode } = useSelect( blockEditorStore );\n\n\tconst disableMotion = useReducedMotion();\n\n\tfunction onClick( event ) {\n\t\tif (\n\t\t\tevent.target === ref.current &&\n\t\t\tnextClientId &&\n\t\t\tgetBlockEditingMode( nextClientId ) !== 'disabled'\n\t\t) {\n\t\t\tselectBlock( nextClientId, -1 );\n\t\t}\n\t}\n\n\tfunction maybeHideInserterPoint( event ) {\n\t\t// Only hide the inserter if it's triggered on the wrapper,\n\t\t// and the inserter is not open.\n\t\tif ( event.target === ref.current && ! openRef.current ) {\n\t\t\thideInsertionPoint();\n\t\t}\n\t}\n\n\tfunction onFocus( event ) {\n\t\t// Only handle click on the wrapper specifically, and not an event\n\t\t// bubbled from the inserter itself.\n\t\tif ( event.target !== ref.current ) {\n\t\t\topenRef.current = true;\n\t\t}\n\t}\n\n\tconst lineVariants = {\n\t\t// Initial position starts from the center and invisible.\n\t\tstart: {\n\t\t\topacity: 0,\n\t\t\tscale: 0,\n\t\t},\n\t\t// The line expands to fill the container. If the inserter is visible it\n\t\t// is delayed so it appears orchestrated.\n\t\trest: {\n\t\t\topacity: 1,\n\t\t\tscale: 1,\n\t\t\ttransition: { delay: isInserterShown ? 0.5 : 0, type: 'tween' },\n\t\t},\n\t\thover: {\n\t\t\topacity: 1,\n\t\t\tscale: 1,\n\t\t\ttransition: { delay: 0.5, type: 'tween' },\n\t\t},\n\t};\n\n\tconst inserterVariants = {\n\t\tstart: {\n\t\t\tscale: disableMotion ? 1 : 0,\n\t\t},\n\t\trest: {\n\t\t\tscale: 1,\n\t\t\ttransition: { delay: 0.4, type: 'tween' },\n\t\t},\n\t};\n\n\tif ( isDistractionFree && ! isNavigationMode ) {\n\t\treturn null;\n\t}\n\n\tconst orientationClassname =\n\t\torientation === 'horizontal' || operation === 'group'\n\t\t\t? 'is-horizontal'\n\t\t\t: 'is-vertical';\n\n\tconst className = classnames(\n\t\t'block-editor-block-list__insertion-point',\n\t\torientationClassname\n\t);\n\n\treturn (\n\t\t<BlockPopoverInbetween\n\t\t\tpreviousClientId={ previousClientId }\n\t\t\tnextClientId={ nextClientId }\n\t\t\t__unstablePopoverSlot={ __unstablePopoverSlot }\n\t\t\t__unstableContentRef={ __unstableContentRef }\n\t\t\toperation={ operation }\n\t\t\tnearestSide={ nearestSide }\n\t\t>\n\t\t\t<motion.div\n\t\t\t\tlayout={ ! disableMotion }\n\t\t\t\tinitial={ disableMotion ? 'rest' : 'start' }\n\t\t\t\tanimate=\"rest\"\n\t\t\t\twhileHover=\"hover\"\n\t\t\t\twhileTap=\"pressed\"\n\t\t\t\texit=\"start\"\n\t\t\t\tref={ ref }\n\t\t\t\ttabIndex={ -1 }\n\t\t\t\tonClick={ onClick }\n\t\t\t\tonFocus={ onFocus }\n\t\t\t\tclassName={ classnames( className, {\n\t\t\t\t\t'is-with-inserter': isInserterShown,\n\t\t\t\t} ) }\n\t\t\t\tonHoverEnd={ maybeHideInserterPoint }\n\t\t\t>\n\t\t\t\t<motion.div\n\t\t\t\t\tvariants={ lineVariants }\n\t\t\t\t\tclassName=\"block-editor-block-list__insertion-point-indicator\"\n\t\t\t\t\tdata-testid=\"block-list-insertion-point-indicator\"\n\t\t\t\t/>\n\t\t\t\t{ isInserterShown && (\n\t\t\t\t\t<motion.div\n\t\t\t\t\t\tvariants={ inserterVariants }\n\t\t\t\t\t\tclassName={ classnames(\n\t\t\t\t\t\t\t'block-editor-block-list__insertion-point-inserter'\n\t\t\t\t\t\t) }\n\t\t\t\t\t>\n\t\t\t\t\t\t<Inserter\n\t\t\t\t\t\t\tposition=\"bottom center\"\n\t\t\t\t\t\t\tclientId={ nextClientId }\n\t\t\t\t\t\t\trootClientId={ rootClientId }\n\t\t\t\t\t\t\t__experimentalIsQuick\n\t\t\t\t\t\t\tonToggle={ ( isOpen ) => {\n\t\t\t\t\t\t\t\topenRef.current = isOpen;\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tonSelectOrClose={ () => {\n\t\t\t\t\t\t\t\topenRef.current = false;\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</motion.div>\n\t\t\t\t) }\n\t\t\t</motion.div>\n\t\t</BlockPopoverInbetween>\n\t);\n}\n\nexport default function InsertionPoint( props ) {\n\tconst { insertionPoint, isVisible, isBlockListEmpty } = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tgetBlockInsertionPoint,\n\t\t\t\tisBlockInsertionPointVisible,\n\t\t\t\tgetBlockCount,\n\t\t\t} = select( blockEditorStore );\n\t\t\tconst blockInsertionPoint = getBlockInsertionPoint();\n\t\t\treturn {\n\t\t\t\tinsertionPoint: blockInsertionPoint,\n\t\t\t\tisVisible: isBlockInsertionPointVisible(),\n\t\t\t\tisBlockListEmpty:\n\t\t\t\t\tgetBlockCount( blockInsertionPoint?.rootClientId ) === 0,\n\t\t\t};\n\t\t},\n\t\t[]\n\t);\n\n\tif (\n\t\t! isVisible ||\n\t\t// Don't render the insertion point if the block list is empty.\n\t\t// The insertion point will be represented by the appender instead.\n\t\tisBlockListEmpty\n\t) {\n\t\treturn null;\n\t}\n\n\t/**\n\t * Render a popover that overlays the block when the desired operation is to replace it.\n\t * Otherwise, render a popover in between blocks for the indication of inserting between them.\n\t */\n\treturn insertionPoint.operation === 'replace' ? (\n\t\t<BlockDropZonePopover\n\t\t\t// Force remount to trigger the animation.\n\t\t\tkey={ `${ insertionPoint.rootClientId }-${ insertionPoint.index }` }\n\t\t\t{ ...props }\n\t\t/>\n\t) : (\n\t\t<InbetweenInsertionPointPopover\n\t\t\toperation={ insertionPoint.operation }\n\t\t\tnearestSide={ insertionPoint.nearestSide }\n\t\t\t{ ...props }\n\t\t/>\n\t);\n}\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useRefEffect } from '@wordpress/compose';\r\nimport { useSelect, useDispatch } from '@wordpress/data';\r\nimport { useContext } from '@wordpress/element';\r\nimport { isRTL } from '@wordpress/i18n';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as blockEditorStore } from '../../store';\r\nimport { InsertionPointOpenRef } from '../block-tools/insertion-point';\r\n\r\nexport function useInBetweenInserter() {\r\n\tconst openRef = useContext( InsertionPointOpenRef );\r\n\tconst isInBetweenInserterDisabled = useSelect(\r\n\t\t( select ) =>\r\n\t\t\tselect( blockEditorStore ).getSettings().isDistractionFree ||\r\n\t\t\tselect( blockEditorStore ).__unstableGetEditorMode() === 'zoom-out',\r\n\t\t[]\r\n\t);\r\n\tconst {\r\n\t\tgetBlockListSettings,\r\n\t\tgetBlockIndex,\r\n\t\tisMultiSelecting,\r\n\t\tgetSelectedBlockClientIds,\r\n\t\tgetTemplateLock,\r\n\t\t__unstableIsWithinBlockOverlay,\r\n\t\tgetBlockEditingMode,\r\n\t\tgetBlockName,\r\n\t} = useSelect( blockEditorStore );\r\n\tconst { showInsertionPoint, hideInsertionPoint } =\r\n\t\tuseDispatch( blockEditorStore );\r\n\r\n\treturn useRefEffect(\r\n\t\t( node ) => {\r\n\t\t\tif ( isInBetweenInserterDisabled ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tfunction onMouseMove( event ) {\r\n\t\t\t\tif ( openRef.current ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Ignore text nodes sometimes detected in FireFox.\r\n\t\t\t\tif ( event.target.nodeType === event.target.TEXT_NODE ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( isMultiSelecting() ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (\r\n\t\t\t\t\t! event.target.classList.contains(\r\n\t\t\t\t\t\t'block-editor-block-list__layout'\r\n\t\t\t\t\t)\r\n\t\t\t\t) {\r\n\t\t\t\t\thideInsertionPoint();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet rootClientId;\r\n\t\t\t\tif (\r\n\t\t\t\t\t! event.target.classList.contains( 'is-root-container' )\r\n\t\t\t\t) {\r\n\t\t\t\t\tconst blockElement = !! event.target.getAttribute(\r\n\t\t\t\t\t\t'data-block'\r\n\t\t\t\t\t)\r\n\t\t\t\t\t\t? event.target\r\n\t\t\t\t\t\t: event.target.closest( '[data-block]' );\r\n\t\t\t\t\trootClientId = blockElement.getAttribute( 'data-block' );\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (\r\n\t\t\t\t\tgetTemplateLock( rootClientId ) ||\r\n\t\t\t\t\tgetBlockEditingMode( rootClientId ) === 'disabled' ||\r\n\t\t\t\t\tgetBlockName( rootClientId ) === 'core/block'\r\n\t\t\t\t) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst orientation =\r\n\t\t\t\t\tgetBlockListSettings( rootClientId )?.orientation ||\r\n\t\t\t\t\t'vertical';\r\n\t\t\t\tconst offsetTop = event.clientY;\r\n\t\t\t\tconst offsetLeft = event.clientX;\r\n\r\n\t\t\t\tconst children = Array.from( event.target.children );\r\n\t\t\t\tlet element = children.find( ( blockEl ) => {\r\n\t\t\t\t\tconst blockElRect = blockEl.getBoundingClientRect();\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t( blockEl.classList.contains( 'wp-block' ) &&\r\n\t\t\t\t\t\t\torientation === 'vertical' &&\r\n\t\t\t\t\t\t\tblockElRect.top > offsetTop ) ||\r\n\t\t\t\t\t\t( blockEl.classList.contains( 'wp-block' ) &&\r\n\t\t\t\t\t\t\torientation === 'horizontal' &&\r\n\t\t\t\t\t\t\t( isRTL()\r\n\t\t\t\t\t\t\t\t? blockElRect.right < offsetLeft\r\n\t\t\t\t\t\t\t\t: blockElRect.left > offsetLeft ) )\r\n\t\t\t\t\t);\r\n\t\t\t\t} );\r\n\r\n\t\t\t\tif ( ! element ) {\r\n\t\t\t\t\thideInsertionPoint();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// The block may be in an alignment wrapper, so check the first direct\r\n\t\t\t\t// child if the element has no ID.\r\n\t\t\t\tif ( ! element.id ) {\r\n\t\t\t\t\telement = element.firstElementChild;\r\n\r\n\t\t\t\t\tif ( ! element ) {\r\n\t\t\t\t\t\thideInsertionPoint();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Don't show the insertion point if a parent block has an \"overlay\"\r\n\t\t\t\t// See https://github.com/WordPress/gutenberg/pull/34012#pullrequestreview-727762337\r\n\t\t\t\tconst clientId = element.id.slice( 'block-'.length );\r\n\t\t\t\tif (\r\n\t\t\t\t\t! clientId ||\r\n\t\t\t\t\t__unstableIsWithinBlockOverlay( clientId )\r\n\t\t\t\t) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Don't show the inserter when hovering above (conflicts with\r\n\t\t\t\t// block toolbar) or inside selected block(s).\r\n\t\t\t\tif ( getSelectedBlockClientIds().includes( clientId ) ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst elementRect = element.getBoundingClientRect();\r\n\r\n\t\t\t\tif (\r\n\t\t\t\t\t( orientation === 'horizontal' &&\r\n\t\t\t\t\t\t( event.clientY > elementRect.bottom ||\r\n\t\t\t\t\t\t\tevent.clientY < elementRect.top ) ) ||\r\n\t\t\t\t\t( orientation === 'vertical' &&\r\n\t\t\t\t\t\t( event.clientX > elementRect.right ||\r\n\t\t\t\t\t\t\tevent.clientX < elementRect.left ) )\r\n\t\t\t\t) {\r\n\t\t\t\t\thideInsertionPoint();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst index = getBlockIndex( clientId );\r\n\r\n\t\t\t\t// Don't show the in-between inserter before the first block in\r\n\t\t\t\t// the list (preserves the original behaviour).\r\n\t\t\t\tif ( index === 0 ) {\r\n\t\t\t\t\thideInsertionPoint();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tshowInsertionPoint( rootClientId, index, {\r\n\t\t\t\t\t__unstableWithInserter: true,\r\n\t\t\t\t} );\r\n\t\t\t}\r\n\r\n\t\t\tnode.addEventListener( 'mousemove', onMouseMove );\r\n\r\n\t\t\treturn () => {\r\n\t\t\t\tnode.removeEventListener( 'mousemove', onMouseMove );\r\n\t\t\t};\r\n\t\t},\r\n\t\t[\r\n\t\t\topenRef,\r\n\t\t\tgetBlockListSettings,\r\n\t\t\tgetBlockIndex,\r\n\t\t\tisMultiSelecting,\r\n\t\t\tshowInsertionPoint,\r\n\t\t\thideInsertionPoint,\r\n\t\t\tgetSelectedBlockClientIds,\r\n\t\t\tisInBetweenInserterDisabled,\r\n\t\t]\r\n\t);\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { createHigherOrderComponent } from '@wordpress/compose';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { useBlockEditContext } from '../block-edit/context';\r\n\r\nconst withClientId = createHigherOrderComponent(\r\n\t( WrappedComponent ) => ( props ) => {\r\n\t\tconst { clientId } = useBlockEditContext();\r\n\t\treturn <WrappedComponent { ...props } clientId={ clientId } />;\r\n\t},\r\n\t'withClientId'\r\n);\r\n\r\nexport default withClientId;\r\n","/**\r\n * External dependencies\r\n */\r\nimport classnames from 'classnames';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport BaseButtonBlockAppender from '../button-block-appender';\r\nimport withClientId from './with-client-id';\r\n\r\nexport const ButtonBlockAppender = ( {\r\n\tclientId,\r\n\tshowSeparator,\r\n\tisFloating,\r\n\tonAddBlock,\r\n\tisToggle,\r\n} ) => {\r\n\treturn (\r\n\t\t<BaseButtonBlockAppender\r\n\t\t\tclassName={ classnames( {\r\n\t\t\t\t'block-list-appender__toggle': isToggle,\r\n\t\t\t} ) }\r\n\t\t\trootClientId={ clientId }\r\n\t\t\tshowSeparator={ showSeparator }\r\n\t\t\tisFloating={ isFloating }\r\n\t\t\tonAddBlock={ onAddBlock }\r\n\t\t/>\r\n\t);\r\n};\r\n\r\nexport default withClientId( ButtonBlockAppender );\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { compose } from '@wordpress/compose';\r\nimport { withSelect } from '@wordpress/data';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport BaseDefaultBlockAppender from '../default-block-appender';\r\nimport withClientId from './with-client-id';\r\nimport { store as blockEditorStore } from '../../store';\r\n\r\nexport const DefaultBlockAppender = ( { clientId } ) => {\r\n\treturn <BaseDefaultBlockAppender rootClientId={ clientId } />;\r\n};\r\n\r\nexport default compose( [\r\n\twithClientId,\r\n\twithSelect( ( select, { clientId } ) => {\r\n\t\tconst { getBlockOrder } = select( blockEditorStore );\r\n\r\n\t\tconst blockClientIds = getBlockOrder( clientId );\r\n\r\n\t\treturn {\r\n\t\t\tlastBlockClientId: blockClientIds[ blockClientIds.length - 1 ],\r\n\t\t};\r\n\t} ),\r\n] )( DefaultBlockAppender );\r\n","/**\n * WordPress dependencies\n */\nimport { useLayoutEffect, useMemo, useState } from '@wordpress/element';\nimport { useDispatch, useRegistry } from '@wordpress/data';\nimport deprecated from '@wordpress/deprecated';\nimport isShallowEqual from '@wordpress/is-shallow-equal';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport { getLayoutType } from '../../layouts';\n\n/** @typedef {import('../../selectors').WPDirectInsertBlock } WPDirectInsertBlock */\n\nconst pendingSettingsUpdates = new WeakMap();\n\nfunction useShallowMemo( value ) {\n\tconst [ prevValue, setPrevValue ] = useState( value );\n\tif ( ! isShallowEqual( prevValue, value ) ) {\n\t\tsetPrevValue( value );\n\t}\n\treturn prevValue;\n}\n\n/**\n * This hook is a side effect which updates the block-editor store when changes\n * happen to inner block settings. The given props are transformed into a\n * settings object, and if that is different from the current settings object in\n * the block-editor store, then the store is updated with the new settings which\n * came from props.\n *\n * @param {string}               clientId                   The client ID of the block to update.\n * @param {string}               parentLock\n * @param {string[]}             allowedBlocks              An array of block names which are permitted\n *                                                          in inner blocks.\n * @param {string[]}             prioritizedInserterBlocks  Block names and/or block variations to be prioritized in the inserter, in the format {blockName}/{variationName}.\n * @param {?WPDirectInsertBlock} defaultBlock               The default block to insert: [ blockName, { blockAttributes } ].\n * @param {?boolean}             directInsert               If a default block should be inserted directly by the appender.\n *\n * @param {?WPDirectInsertBlock} __experimentalDefaultBlock A deprecated prop for the default block to insert: [ blockName, { blockAttributes } ]. Use `defaultBlock` instead.\n *\n * @param {?boolean}             __experimentalDirectInsert A deprecated prop for whether a default block should be inserted directly by the appender. Use `directInsert` instead.\n *\n * @param {string}               [templateLock]             The template lock specified for the inner\n *                                                          blocks component. (e.g. \"all\")\n * @param {boolean}              captureToolbars            Whether or children toolbars should be shown\n *                                                          in the inner blocks component rather than on\n *                                                          the child block.\n * @param {string}               orientation                The direction in which the block\n *                                                          should face.\n * @param {Object}               layout                     The layout object for the block container.\n */\nexport default function useNestedSettingsUpdate(\n\tclientId,\n\tparentLock,\n\tallowedBlocks,\n\tprioritizedInserterBlocks,\n\tdefaultBlock,\n\tdirectInsert,\n\t__experimentalDefaultBlock,\n\t__experimentalDirectInsert,\n\ttemplateLock,\n\tcaptureToolbars,\n\torientation,\n\tlayout\n) {\n\t// Instead of adding a useSelect mapping here, please add to the useSelect\n\t// mapping in InnerBlocks! Every subscription impacts performance.\n\n\tconst { updateBlockListSettings } = useDispatch( blockEditorStore );\n\tconst registry = useRegistry();\n\n\t// Implementors often pass a new array on every render,\n\t// and the contents of the arrays are just strings, so the entire array\n\t// can be passed as dependencies but We need to include the length of the array,\n\t// otherwise if the arrays change length but the first elements are equal the comparison,\n\t// does not works as expected.\n\tconst _allowedBlocks = useShallowMemo( allowedBlocks );\n\n\tconst _prioritizedInserterBlocks = useMemo(\n\t\t() => prioritizedInserterBlocks,\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t\tprioritizedInserterBlocks\n\t);\n\n\tconst _templateLock =\n\t\ttemplateLock === undefined || parentLock === 'contentOnly'\n\t\t\t? parentLock\n\t\t\t: templateLock;\n\n\tuseLayoutEffect( () => {\n\t\tconst newSettings = {\n\t\t\tallowedBlocks: _allowedBlocks,\n\t\t\tprioritizedInserterBlocks: _prioritizedInserterBlocks,\n\t\t\ttemplateLock: _templateLock,\n\t\t};\n\n\t\t// These values are not defined for RN, so only include them if they\n\t\t// are defined.\n\t\tif ( captureToolbars !== undefined ) {\n\t\t\tnewSettings.__experimentalCaptureToolbars = captureToolbars;\n\t\t}\n\n\t\t// Orientation depends on layout,\n\t\t// ideally the separate orientation prop should be deprecated.\n\t\tif ( orientation !== undefined ) {\n\t\t\tnewSettings.orientation = orientation;\n\t\t} else {\n\t\t\tconst layoutType = getLayoutType( layout?.type );\n\t\t\tnewSettings.orientation = layoutType.getOrientation( layout );\n\t\t}\n\n\t\tif ( __experimentalDefaultBlock !== undefined ) {\n\t\t\tdeprecated( '__experimentalDefaultBlock', {\n\t\t\t\talternative: 'defaultBlock',\n\t\t\t\tsince: '6.3',\n\t\t\t\tversion: '6.4',\n\t\t\t} );\n\t\t\tnewSettings.defaultBlock = __experimentalDefaultBlock;\n\t\t}\n\n\t\tif ( defaultBlock !== undefined ) {\n\t\t\tnewSettings.defaultBlock = defaultBlock;\n\t\t}\n\n\t\tif ( __experimentalDirectInsert !== undefined ) {\n\t\t\tdeprecated( '__experimentalDirectInsert', {\n\t\t\t\talternative: 'directInsert',\n\t\t\t\tsince: '6.3',\n\t\t\t\tversion: '6.4',\n\t\t\t} );\n\t\t\tnewSettings.directInsert = __experimentalDirectInsert;\n\t\t}\n\n\t\tif ( directInsert !== undefined ) {\n\t\t\tnewSettings.directInsert = directInsert;\n\t\t}\n\n\t\tif (\n\t\t\tnewSettings.directInsert !== undefined &&\n\t\t\ttypeof newSettings.directInsert !== 'boolean'\n\t\t) {\n\t\t\tdeprecated( 'Using `Function` as a `directInsert` argument', {\n\t\t\t\talternative: '`boolean` values',\n\t\t\t\tsince: '6.5',\n\t\t\t} );\n\t\t}\n\n\t\t// Batch updates to block list settings to avoid triggering cascading renders\n\t\t// for each container block included in a tree and optimize initial render.\n\t\t// To avoid triggering updateBlockListSettings for each container block\n\t\t// causing X re-renderings for X container blocks,\n\t\t// we batch all the updatedBlockListSettings in a single \"data\" batch\n\t\t// which results in a single re-render.\n\t\tif ( ! pendingSettingsUpdates.get( registry ) ) {\n\t\t\tpendingSettingsUpdates.set( registry, [] );\n\t\t}\n\t\tpendingSettingsUpdates\n\t\t\t.get( registry )\n\t\t\t.push( [ clientId, newSettings ] );\n\t\twindow.queueMicrotask( () => {\n\t\t\tif ( pendingSettingsUpdates.get( registry )?.length ) {\n\t\t\t\tregistry.batch( () => {\n\t\t\t\t\tpendingSettingsUpdates\n\t\t\t\t\t\t.get( registry )\n\t\t\t\t\t\t.forEach( ( args ) => {\n\t\t\t\t\t\t\tupdateBlockListSettings( ...args );\n\t\t\t\t\t\t} );\n\t\t\t\t\tpendingSettingsUpdates.set( registry, [] );\n\t\t\t\t} );\n\t\t\t}\n\t\t} );\n\t}, [\n\t\tclientId,\n\t\t_allowedBlocks,\n\t\t_prioritizedInserterBlocks,\n\t\t_templateLock,\n\t\tdefaultBlock,\n\t\tdirectInsert,\n\t\t__experimentalDefaultBlock,\n\t\t__experimentalDirectInsert,\n\t\tcaptureToolbars,\n\t\torientation,\n\t\tupdateBlockListSettings,\n\t\tlayout,\n\t\tregistry,\n\t] );\n}\n","/**\n * WordPress dependencies\n */\nimport { useCallback } from '@wordpress/element';\nimport {\n\tcloneBlock,\n\tcreateBlock,\n\tfindTransform,\n\tgetBlockTransforms,\n\tpasteHandler,\n\tstore as blocksStore,\n} from '@wordpress/blocks';\nimport { useDispatch, useSelect, useRegistry } from '@wordpress/data';\nimport { getFilesFromDataTransfer } from '@wordpress/dom';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\n/** @typedef {import('react').SyntheticEvent} SyntheticEvent */\n/** @typedef {import('./types').WPDropOperation} WPDropOperation */\n\n/**\n * Retrieve the data for a block drop event.\n *\n * @param {SyntheticEvent} event The drop event.\n *\n * @return {Object} An object with block drag and drop data.\n */\nexport function parseDropEvent( event ) {\n\tlet result = {\n\t\tsrcRootClientId: null,\n\t\tsrcClientIds: null,\n\t\tsrcIndex: null,\n\t\ttype: null,\n\t\tblocks: null,\n\t};\n\n\tif ( ! event.dataTransfer ) {\n\t\treturn result;\n\t}\n\n\ttry {\n\t\tresult = Object.assign(\n\t\t\tresult,\n\t\t\tJSON.parse( event.dataTransfer.getData( 'wp-blocks' ) )\n\t\t);\n\t} catch ( err ) {\n\t\treturn result;\n\t}\n\n\treturn result;\n}\n\n/**\n * A function that returns an event handler function for block drop events.\n *\n * @param {string}   targetRootClientId        The root client id where the block(s) will be inserted.\n * @param {number}   targetBlockIndex          The index where the block(s) will be inserted.\n * @param {Function} getBlockIndex             A function that gets the index of a block.\n * @param {Function} getClientIdsOfDescendants A function that gets the client ids of descendant blocks.\n * @param {Function} moveBlocks                A function that moves blocks.\n * @param {Function} insertOrReplaceBlocks     A function that inserts or replaces blocks.\n * @param {Function} clearSelectedBlock        A function that clears block selection.\n * @param {string}   operation                 The type of operation to perform on drop. Could be `insert` or `replace` or `group`.\n * @param {Function} getBlock                  A function that returns a block given its client id.\n * @return {Function} The event handler for a block drop event.\n */\nexport function onBlockDrop(\n\ttargetRootClientId,\n\ttargetBlockIndex,\n\tgetBlockIndex,\n\tgetClientIdsOfDescendants,\n\tmoveBlocks,\n\tinsertOrReplaceBlocks,\n\tclearSelectedBlock,\n\toperation,\n\tgetBlock\n) {\n\treturn ( event ) => {\n\t\tconst {\n\t\t\tsrcRootClientId: sourceRootClientId,\n\t\t\tsrcClientIds: sourceClientIds,\n\t\t\ttype: dropType,\n\t\t\tblocks,\n\t\t} = parseDropEvent( event );\n\n\t\t// If the user is inserting a block.\n\t\tif ( dropType === 'inserter' ) {\n\t\t\tclearSelectedBlock();\n\t\t\tconst blocksToInsert = blocks.map( ( block ) =>\n\t\t\t\tcloneBlock( block )\n\t\t\t);\n\t\t\tinsertOrReplaceBlocks( blocksToInsert, true, null );\n\t\t}\n\n\t\t// If the user is moving a block.\n\t\tif ( dropType === 'block' ) {\n\t\t\tconst sourceBlockIndex = getBlockIndex( sourceClientIds[ 0 ] );\n\n\t\t\t// If the user is dropping to the same position, return early.\n\t\t\tif (\n\t\t\t\tsourceRootClientId === targetRootClientId &&\n\t\t\t\tsourceBlockIndex === targetBlockIndex\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// If the user is attempting to drop a block within its own\n\t\t\t// nested blocks, return early as this would create infinite\n\t\t\t// recursion.\n\t\t\tif (\n\t\t\t\tsourceClientIds.includes( targetRootClientId ) ||\n\t\t\t\tgetClientIdsOfDescendants( sourceClientIds ).some(\n\t\t\t\t\t( id ) => id === targetRootClientId\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// If the user is dropping a block over another block, replace both blocks\n\t\t\t// with a group block containing them\n\t\t\tif ( operation === 'group' ) {\n\t\t\t\tconst blocksToInsert = sourceClientIds.map( ( clientId ) =>\n\t\t\t\t\tgetBlock( clientId )\n\t\t\t\t);\n\t\t\t\tinsertOrReplaceBlocks(\n\t\t\t\t\tblocksToInsert,\n\t\t\t\t\ttrue,\n\t\t\t\t\tnull,\n\t\t\t\t\tsourceClientIds\n\t\t\t\t);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst isAtSameLevel = sourceRootClientId === targetRootClientId;\n\t\t\tconst draggedBlockCount = sourceClientIds.length;\n\n\t\t\t// If the block is kept at the same level and moved downwards,\n\t\t\t// subtract to take into account that the blocks being dragged\n\t\t\t// were removed from the block list above the insertion point.\n\t\t\tconst insertIndex =\n\t\t\t\tisAtSameLevel && sourceBlockIndex < targetBlockIndex\n\t\t\t\t\t? targetBlockIndex - draggedBlockCount\n\t\t\t\t\t: targetBlockIndex;\n\n\t\t\tmoveBlocks( sourceClientIds, sourceRootClientId, insertIndex );\n\t\t}\n\t};\n}\n\n/**\n * A function that returns an event handler function for block-related file drop events.\n *\n * @param {string}   targetRootClientId    The root client id where the block(s) will be inserted.\n * @param {Function} getSettings           A function that gets the block editor settings.\n * @param {Function} updateBlockAttributes A function that updates a block's attributes.\n * @param {Function} canInsertBlockType    A function that returns checks whether a block type can be inserted.\n * @param {Function} insertOrReplaceBlocks A function that inserts or replaces blocks.\n *\n * @return {Function} The event handler for a block-related file drop event.\n */\nexport function onFilesDrop(\n\ttargetRootClientId,\n\tgetSettings,\n\tupdateBlockAttributes,\n\tcanInsertBlockType,\n\tinsertOrReplaceBlocks\n) {\n\treturn ( files ) => {\n\t\tif ( ! getSettings().mediaUpload ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst transformation = findTransform(\n\t\t\tgetBlockTransforms( 'from' ),\n\t\t\t( transform ) =>\n\t\t\t\ttransform.type === 'files' &&\n\t\t\t\tcanInsertBlockType( transform.blockName, targetRootClientId ) &&\n\t\t\t\ttransform.isMatch( files )\n\t\t);\n\n\t\tif ( transformation ) {\n\t\t\tconst blocks = transformation.transform(\n\t\t\t\tfiles,\n\t\t\t\tupdateBlockAttributes\n\t\t\t);\n\t\t\tinsertOrReplaceBlocks( blocks );\n\t\t}\n\t};\n}\n\n/**\n * A function that returns an event handler function for block-related HTML drop events.\n *\n * @param {Function} insertOrReplaceBlocks A function that inserts or replaces blocks.\n *\n * @return {Function} The event handler for a block-related HTML drop event.\n */\nexport function onHTMLDrop( insertOrReplaceBlocks ) {\n\treturn ( HTML ) => {\n\t\tconst blocks = pasteHandler( { HTML, mode: 'BLOCKS' } );\n\n\t\tif ( blocks.length ) {\n\t\t\tinsertOrReplaceBlocks( blocks );\n\t\t}\n\t};\n}\n\n/**\n * A React hook for handling block drop events.\n *\n * @param {string}          targetRootClientId  The root client id where the block(s) will be inserted.\n * @param {number}          targetBlockIndex    The index where the block(s) will be inserted.\n * @param {Object}          options             The optional options.\n * @param {WPDropOperation} [options.operation] The type of operation to perform on drop. Could be `insert` or `replace` for now.\n *\n * @return {Function} A function to be passed to the onDrop handler.\n */\nexport default function useOnBlockDrop(\n\ttargetRootClientId,\n\ttargetBlockIndex,\n\toptions = {}\n) {\n\tconst { operation = 'insert', nearestSide = 'right' } = options;\n\tconst {\n\t\tcanInsertBlockType,\n\t\tgetBlockIndex,\n\t\tgetClientIdsOfDescendants,\n\t\tgetBlockOrder,\n\t\tgetBlocksByClientId,\n\t\tgetSettings,\n\t\tgetBlock,\n\t\tisGroupable,\n\t} = useSelect( blockEditorStore );\n\tconst { getGroupingBlockName } = useSelect( blocksStore );\n\tconst {\n\t\tinsertBlocks,\n\t\tmoveBlocksToPosition,\n\t\tupdateBlockAttributes,\n\t\tclearSelectedBlock,\n\t\treplaceBlocks,\n\t\tremoveBlocks,\n\t} = useDispatch( blockEditorStore );\n\tconst registry = useRegistry();\n\n\tconst insertOrReplaceBlocks = useCallback(\n\t\t(\n\t\t\tblocks,\n\t\t\tupdateSelection = true,\n\t\t\tinitialPosition = 0,\n\t\t\tclientIdsToReplace = []\n\t\t) => {\n\t\t\tif ( ! Array.isArray( blocks ) ) blocks = [ blocks ];\n\n\t\t\tconst clientIds = getBlockOrder( targetRootClientId );\n\t\t\tconst clientId = clientIds[ targetBlockIndex ];\n\t\t\tconst blocksClientIds = blocks.map( ( block ) => block.clientId );\n\t\t\tconst areGroupableBlocks = isGroupable( [\n\t\t\t\t...blocksClientIds,\n\t\t\t\tclientId,\n\t\t\t] );\n\t\t\tif ( operation === 'replace' ) {\n\t\t\t\treplaceBlocks( clientId, blocks, undefined, initialPosition );\n\t\t\t} else if ( operation === 'group' && areGroupableBlocks ) {\n\t\t\t\tconst targetBlock = getBlock( clientId );\n\t\t\t\tif ( nearestSide === 'left' ) {\n\t\t\t\t\tblocks.push( targetBlock );\n\t\t\t\t} else {\n\t\t\t\t\tblocks.unshift( targetBlock );\n\t\t\t\t}\n\n\t\t\t\tconst groupInnerBlocks = blocks.map( ( block ) => {\n\t\t\t\t\treturn createBlock(\n\t\t\t\t\t\tblock.name,\n\t\t\t\t\t\tblock.attributes,\n\t\t\t\t\t\tblock.innerBlocks\n\t\t\t\t\t);\n\t\t\t\t} );\n\n\t\t\t\tconst areAllImages = blocks.every( ( block ) => {\n\t\t\t\t\treturn block.name === 'core/image';\n\t\t\t\t} );\n\n\t\t\t\tconst galleryBlock = canInsertBlockType(\n\t\t\t\t\t'core/gallery',\n\t\t\t\t\ttargetRootClientId\n\t\t\t\t);\n\n\t\t\t\tconst wrappedBlocks = createBlock(\n\t\t\t\t\tareAllImages && galleryBlock\n\t\t\t\t\t\t? 'core/gallery'\n\t\t\t\t\t\t: getGroupingBlockName(),\n\t\t\t\t\t{\n\t\t\t\t\t\tlayout: {\n\t\t\t\t\t\t\ttype: 'flex',\n\t\t\t\t\t\t\tflexWrap:\n\t\t\t\t\t\t\t\tareAllImages && galleryBlock ? null : 'nowrap',\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tgroupInnerBlocks\n\t\t\t\t);\n\t\t\t\t// Need to make sure both the target block and the block being dragged are replaced\n\t\t\t\t// otherwise the dragged block will be duplicated.\n\t\t\t\treplaceBlocks(\n\t\t\t\t\t[ clientId, ...clientIdsToReplace ],\n\t\t\t\t\twrappedBlocks,\n\t\t\t\t\tundefined,\n\t\t\t\t\tinitialPosition\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tinsertBlocks(\n\t\t\t\t\tblocks,\n\t\t\t\t\ttargetBlockIndex,\n\t\t\t\t\ttargetRootClientId,\n\t\t\t\t\tupdateSelection,\n\t\t\t\t\tinitialPosition\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t\t[\n\t\t\tgetBlockOrder,\n\t\t\ttargetRootClientId,\n\t\t\ttargetBlockIndex,\n\t\t\tisGroupable,\n\t\t\toperation,\n\t\t\treplaceBlocks,\n\t\t\tgetBlock,\n\t\t\tnearestSide,\n\t\t\tcanInsertBlockType,\n\t\t\tgetGroupingBlockName,\n\t\t\tinsertBlocks,\n\t\t]\n\t);\n\n\tconst moveBlocks = useCallback(\n\t\t( sourceClientIds, sourceRootClientId, insertIndex ) => {\n\t\t\tif ( operation === 'replace' ) {\n\t\t\t\tconst sourceBlocks = getBlocksByClientId( sourceClientIds );\n\t\t\t\tconst targetBlockClientIds =\n\t\t\t\t\tgetBlockOrder( targetRootClientId );\n\t\t\t\tconst targetBlockClientId =\n\t\t\t\t\ttargetBlockClientIds[ targetBlockIndex ];\n\n\t\t\t\tregistry.batch( () => {\n\t\t\t\t\t// Remove the source blocks.\n\t\t\t\t\tremoveBlocks( sourceClientIds, false );\n\t\t\t\t\t// Replace the target block with the source blocks.\n\t\t\t\t\treplaceBlocks(\n\t\t\t\t\t\ttargetBlockClientId,\n\t\t\t\t\t\tsourceBlocks,\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\t0\n\t\t\t\t\t);\n\t\t\t\t} );\n\t\t\t} else {\n\t\t\t\tmoveBlocksToPosition(\n\t\t\t\t\tsourceClientIds,\n\t\t\t\t\tsourceRootClientId,\n\t\t\t\t\ttargetRootClientId,\n\t\t\t\t\tinsertIndex\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t\t[\n\t\t\toperation,\n\t\t\tgetBlockOrder,\n\t\t\tgetBlocksByClientId,\n\t\t\tmoveBlocksToPosition,\n\t\t\tregistry,\n\t\t\tremoveBlocks,\n\t\t\treplaceBlocks,\n\t\t\ttargetBlockIndex,\n\t\t\ttargetRootClientId,\n\t\t]\n\t);\n\n\tconst _onDrop = onBlockDrop(\n\t\ttargetRootClientId,\n\t\ttargetBlockIndex,\n\t\tgetBlockIndex,\n\t\tgetClientIdsOfDescendants,\n\t\tmoveBlocks,\n\t\tinsertOrReplaceBlocks,\n\t\tclearSelectedBlock,\n\t\toperation,\n\t\tgetBlock\n\t);\n\tconst _onFilesDrop = onFilesDrop(\n\t\ttargetRootClientId,\n\t\tgetSettings,\n\t\tupdateBlockAttributes,\n\t\tcanInsertBlockType,\n\t\tinsertOrReplaceBlocks\n\t);\n\tconst _onHTMLDrop = onHTMLDrop( insertOrReplaceBlocks );\n\n\treturn ( event ) => {\n\t\tconst files = getFilesFromDataTransfer( event.dataTransfer );\n\t\tconst html = event.dataTransfer.getData( 'text/html' );\n\n\t\t/**\n\t\t * From Windows Chrome 96, the `event.dataTransfer` returns both file object and HTML.\n\t\t * The order of the checks is important to recognise the HTML drop.\n\t\t */\n\t\tif ( html ) {\n\t\t\t_onHTMLDrop( html );\n\t\t} else if ( files.length ) {\n\t\t\t_onFilesDrop( files );\n\t\t} else {\n\t\t\t_onDrop( event );\n\t\t}\n\t};\n}\n","/**\r\n * A string representing the name of an edge.\r\n *\r\n * @typedef {'top'|'right'|'bottom'|'left'} WPEdgeName\r\n */\r\n\r\n/**\r\n * @typedef  {Object} WPPoint\r\n * @property {number} x The horizontal position.\r\n * @property {number} y The vertical position.\r\n */\r\n\r\n/**\r\n * Given a point, a DOMRect and the name of an edge, returns the distance to\r\n * that edge of the rect.\r\n *\r\n * This function works for edges that are horizontal or vertical (e.g. not\r\n * rotated), the following terms are used so that the function works in both\r\n * orientations:\r\n *\r\n * - Forward, meaning the axis running horizontally when an edge is vertical\r\n *   and vertically when an edge is horizontal.\r\n * - Lateral, meaning the axis running vertically when an edge is vertical\r\n *   and horizontally when an edge is horizontal.\r\n *\r\n * @param {WPPoint}    point The point to measure distance from.\r\n * @param {DOMRect}    rect  A DOM Rect containing edge positions.\r\n * @param {WPEdgeName} edge  The edge to measure to.\r\n */\r\nexport function getDistanceFromPointToEdge( point, rect, edge ) {\r\n\tconst isHorizontal = edge === 'top' || edge === 'bottom';\r\n\tconst { x, y } = point;\r\n\tconst pointLateralPosition = isHorizontal ? x : y;\r\n\tconst pointForwardPosition = isHorizontal ? y : x;\r\n\tconst edgeStart = isHorizontal ? rect.left : rect.top;\r\n\tconst edgeEnd = isHorizontal ? rect.right : rect.bottom;\r\n\tconst edgeForwardPosition = rect[ edge ];\r\n\r\n\t// Measure the straight line distance to the edge of the rect, when the\r\n\t// point is adjacent to the edge.\r\n\t// Else, if the point is positioned diagonally to the edge of the rect,\r\n\t// measure diagonally to the nearest corner that the edge meets.\r\n\tlet edgeLateralPosition;\r\n\tif (\r\n\t\tpointLateralPosition >= edgeStart &&\r\n\t\tpointLateralPosition <= edgeEnd\r\n\t) {\r\n\t\tedgeLateralPosition = pointLateralPosition;\r\n\t} else if ( pointLateralPosition < edgeEnd ) {\r\n\t\tedgeLateralPosition = edgeStart;\r\n\t} else {\r\n\t\tedgeLateralPosition = edgeEnd;\r\n\t}\r\n\r\n\treturn Math.sqrt(\r\n\t\t( pointLateralPosition - edgeLateralPosition ) ** 2 +\r\n\t\t\t( pointForwardPosition - edgeForwardPosition ) ** 2\r\n\t);\r\n}\r\n\r\n/**\r\n * Given a point, a DOMRect and a list of allowed edges returns the name of and\r\n * distance to the nearest edge.\r\n *\r\n * @param {WPPoint}      point        The point to measure distance from.\r\n * @param {DOMRect}      rect         A DOM Rect containing edge positions.\r\n * @param {WPEdgeName[]} allowedEdges A list of the edges included in the\r\n *                                    calculation. Defaults to all edges.\r\n *\r\n * @return {[number, string]} An array where the first value is the distance\r\n *                              and a second is the edge name.\r\n */\r\nexport function getDistanceToNearestEdge(\r\n\tpoint,\r\n\trect,\r\n\tallowedEdges = [ 'top', 'bottom', 'left', 'right' ]\r\n) {\r\n\tlet candidateDistance;\r\n\tlet candidateEdge;\r\n\r\n\tallowedEdges.forEach( ( edge ) => {\r\n\t\tconst distance = getDistanceFromPointToEdge( point, rect, edge );\r\n\r\n\t\tif ( candidateDistance === undefined || distance < candidateDistance ) {\r\n\t\t\tcandidateDistance = distance;\r\n\t\t\tcandidateEdge = edge;\r\n\t\t}\r\n\t} );\r\n\r\n\treturn [ candidateDistance, candidateEdge ];\r\n}\r\n\r\n/**\r\n * Is the point contained by the rectangle.\r\n *\r\n * @param {WPPoint} point The point.\r\n * @param {DOMRect} rect  The rectangle.\r\n *\r\n * @return {boolean} True if the point is contained by the rectangle, false otherwise.\r\n */\r\nexport function isPointContainedByRect( point, rect ) {\r\n\treturn (\r\n\t\trect.left <= point.x &&\r\n\t\trect.right >= point.x &&\r\n\t\trect.top <= point.y &&\r\n\t\trect.bottom >= point.y\r\n\t);\r\n}\r\n\r\n/**\r\n * Is the point within the top and bottom boundaries of the rectangle.\r\n *\r\n * @param {WPPoint} point The point.\r\n * @param {DOMRect} rect  The rectangle.\r\n *\r\n * @return {boolean} True if the point is within top and bottom of rectangle, false otherwise.\r\n */\r\nexport function isPointWithinTopAndBottomBoundariesOfRect( point, rect ) {\r\n\treturn rect.top <= point.y && rect.bottom >= point.y;\r\n}\r\n","/**\n * WordPress dependencies\n */\nimport { useDispatch, useSelect, useRegistry } from '@wordpress/data';\nimport { useCallback, useState } from '@wordpress/element';\nimport {\n\tuseThrottle,\n\t__experimentalUseDropZone as useDropZone,\n} from '@wordpress/compose';\nimport { isRTL } from '@wordpress/i18n';\nimport {\n\tisUnmodifiedDefaultBlock as getIsUnmodifiedDefaultBlock,\n\tstore as blocksStore,\n} from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport useOnBlockDrop from '../use-on-block-drop';\nimport {\n\tgetDistanceToNearestEdge,\n\tisPointContainedByRect,\n\tisPointWithinTopAndBottomBoundariesOfRect,\n} from '../../utils/math';\nimport { store as blockEditorStore } from '../../store';\nimport { unlock } from '../../lock-unlock';\n\nconst THRESHOLD_DISTANCE = 30;\nconst MINIMUM_HEIGHT_FOR_THRESHOLD = 120;\nconst MINIMUM_WIDTH_FOR_THRESHOLD = 120;\n\n/** @typedef {import('../../utils/math').WPPoint} WPPoint */\n/** @typedef {import('../use-on-block-drop/types').WPDropOperation} WPDropOperation */\n\n/**\n * The orientation of a block list.\n *\n * @typedef {'horizontal'|'vertical'|undefined} WPBlockListOrientation\n */\n\n/**\n * The insert position when dropping a block.\n *\n * @typedef {'before'|'after'} WPInsertPosition\n */\n\n/**\n * @typedef {Object} WPBlockData\n * @property {boolean}       isUnmodifiedDefaultBlock Is the block unmodified default block.\n * @property {() => DOMRect} getBoundingClientRect    Get the bounding client rect of the block.\n * @property {number}        blockIndex               The index of the block.\n */\n\n/**\n * Get the drop target position from a given drop point and the orientation.\n *\n * @param {WPBlockData[]}          blocksData  The block data list.\n * @param {WPPoint}                position    The position of the item being dragged.\n * @param {WPBlockListOrientation} orientation The orientation of the block list.\n * @param {Object}                 options     Additional options.\n * @return {[number, WPDropOperation]} The drop target position.\n */\nexport function getDropTargetPosition(\n\tblocksData,\n\tposition,\n\torientation = 'vertical',\n\toptions = {}\n) {\n\tconst allowedEdges =\n\t\torientation === 'horizontal'\n\t\t\t? [ 'left', 'right' ]\n\t\t\t: [ 'top', 'bottom' ];\n\n\tlet nearestIndex = 0;\n\tlet insertPosition = 'before';\n\tlet minDistance = Infinity;\n\tlet targetBlockIndex = null;\n\tlet nearestSide = 'right';\n\n\tconst {\n\t\tdropZoneElement,\n\t\tparentBlockOrientation,\n\t\trootBlockIndex = 0,\n\t} = options;\n\n\t// Allow before/after when dragging over the top/bottom edges of the drop zone.\n\tif ( dropZoneElement && parentBlockOrientation !== 'horizontal' ) {\n\t\tconst rect = dropZoneElement.getBoundingClientRect();\n\t\tconst [ distance, edge ] = getDistanceToNearestEdge( position, rect, [\n\t\t\t'top',\n\t\t\t'bottom',\n\t\t] );\n\n\t\t// If dragging over the top or bottom of the drop zone, insert the block\n\t\t// before or after the parent block. This only applies to blocks that use\n\t\t// a drop zone element, typically container blocks such as Group or Cover.\n\t\tif (\n\t\t\trect.height > MINIMUM_HEIGHT_FOR_THRESHOLD &&\n\t\t\tdistance < THRESHOLD_DISTANCE\n\t\t) {\n\t\t\tif ( edge === 'top' ) {\n\t\t\t\treturn [ rootBlockIndex, 'before' ];\n\t\t\t}\n\t\t\tif ( edge === 'bottom' ) {\n\t\t\t\treturn [ rootBlockIndex + 1, 'after' ];\n\t\t\t}\n\t\t}\n\t}\n\n\tconst isRightToLeft = isRTL();\n\n\t// Allow before/after when dragging over the left/right edges of the drop zone.\n\tif ( dropZoneElement && parentBlockOrientation === 'horizontal' ) {\n\t\tconst rect = dropZoneElement.getBoundingClientRect();\n\t\tconst [ distance, edge ] = getDistanceToNearestEdge( position, rect, [\n\t\t\t'left',\n\t\t\t'right',\n\t\t] );\n\n\t\t// If dragging over the left or right of the drop zone, insert the block\n\t\t// before or after the parent block. This only applies to blocks that use\n\t\t// a drop zone element, typically container blocks such as Group.\n\t\tif (\n\t\t\trect.width > MINIMUM_WIDTH_FOR_THRESHOLD &&\n\t\t\tdistance < THRESHOLD_DISTANCE\n\t\t) {\n\t\t\tif (\n\t\t\t\t( isRightToLeft && edge === 'right' ) ||\n\t\t\t\t( ! isRightToLeft && edge === 'left' )\n\t\t\t) {\n\t\t\t\treturn [ rootBlockIndex, 'before' ];\n\t\t\t}\n\t\t\tif (\n\t\t\t\t( isRightToLeft && edge === 'left' ) ||\n\t\t\t\t( ! isRightToLeft && edge === 'right' )\n\t\t\t) {\n\t\t\t\treturn [ rootBlockIndex + 1, 'after' ];\n\t\t\t}\n\t\t}\n\t}\n\n\tblocksData.forEach(\n\t\t( {\n\t\t\tisUnmodifiedDefaultBlock,\n\t\t\tgetBoundingClientRect,\n\t\t\tblockIndex,\n\t\t\tblockOrientation,\n\t\t} ) => {\n\t\t\tconst rect = getBoundingClientRect();\n\n\t\t\tlet [ distance, edge ] = getDistanceToNearestEdge(\n\t\t\t\tposition,\n\t\t\t\trect,\n\t\t\t\tallowedEdges\n\t\t\t);\n\t\t\t// If the the point is close to a side, prioritize that side.\n\t\t\tconst [ sideDistance, sideEdge ] = getDistanceToNearestEdge(\n\t\t\t\tposition,\n\t\t\t\trect,\n\t\t\t\t[ 'left', 'right' ]\n\t\t\t);\n\n\t\t\tconst isPointInsideRect = isPointContainedByRect( position, rect );\n\n\t\t\t// Prioritize the element if the point is inside of an unmodified default block.\n\t\t\tif ( isUnmodifiedDefaultBlock && isPointInsideRect ) {\n\t\t\t\tdistance = 0;\n\t\t\t} else if (\n\t\t\t\torientation === 'vertical' &&\n\t\t\t\tblockOrientation !== 'horizontal' &&\n\t\t\t\t( ( isPointInsideRect && sideDistance < THRESHOLD_DISTANCE ) ||\n\t\t\t\t\t( ! isPointInsideRect &&\n\t\t\t\t\t\tisPointWithinTopAndBottomBoundariesOfRect(\n\t\t\t\t\t\t\tposition,\n\t\t\t\t\t\t\trect\n\t\t\t\t\t\t) ) )\n\t\t\t) {\n\t\t\t\t/**\n\t\t\t\t * This condition should only apply when the layout is vertical (otherwise there's\n\t\t\t\t * no need to create a Row) and dropzones should only activate when the block is\n\t\t\t\t * either within and close to the sides of the target block or on its outer sides.\n\t\t\t\t */\n\t\t\t\ttargetBlockIndex = blockIndex;\n\t\t\t\tnearestSide = sideEdge;\n\t\t\t}\n\n\t\t\tif ( distance < minDistance ) {\n\t\t\t\t// Where the dropped block will be inserted on the nearest block.\n\t\t\t\tinsertPosition =\n\t\t\t\t\tedge === 'bottom' ||\n\t\t\t\t\t( ! isRightToLeft && edge === 'right' ) ||\n\t\t\t\t\t( isRightToLeft && edge === 'left' )\n\t\t\t\t\t\t? 'after'\n\t\t\t\t\t\t: 'before';\n\n\t\t\t\t// Update the currently known best candidate.\n\t\t\t\tminDistance = distance;\n\t\t\t\tnearestIndex = blockIndex;\n\t\t\t}\n\t\t}\n\t);\n\n\tconst adjacentIndex =\n\t\tnearestIndex + ( insertPosition === 'after' ? 1 : -1 );\n\tconst isNearestBlockUnmodifiedDefaultBlock =\n\t\t!! blocksData[ nearestIndex ]?.isUnmodifiedDefaultBlock;\n\tconst isAdjacentBlockUnmodifiedDefaultBlock =\n\t\t!! blocksData[ adjacentIndex ]?.isUnmodifiedDefaultBlock;\n\n\t// If the target index is set then group with the block at that index.\n\tif ( targetBlockIndex !== null ) {\n\t\treturn [ targetBlockIndex, 'group', nearestSide ];\n\t}\n\t// If both blocks are not unmodified default blocks then just insert between them.\n\tif (\n\t\t! isNearestBlockUnmodifiedDefaultBlock &&\n\t\t! isAdjacentBlockUnmodifiedDefaultBlock\n\t) {\n\t\t// If the user is dropping to the trailing edge of the block\n\t\t// add 1 to the index to represent dragging after.\n\t\tconst insertionIndex =\n\t\t\tinsertPosition === 'after' ? nearestIndex + 1 : nearestIndex;\n\t\treturn [ insertionIndex, 'insert' ];\n\t}\n\n\t// Otherwise, replace the nearest unmodified default block.\n\treturn [\n\t\tisNearestBlockUnmodifiedDefaultBlock ? nearestIndex : adjacentIndex,\n\t\t'replace',\n\t];\n}\n\n/**\n * Check if the dragged blocks can be dropped on the target.\n * @param {Function} getBlockType\n * @param {Object[]} allowedBlocks\n * @param {string[]} draggedBlockNames\n * @param {string}   targetBlockName\n * @return {boolean} Whether the dragged blocks can be dropped on the target.\n */\nexport function isDropTargetValid(\n\tgetBlockType,\n\tallowedBlocks,\n\tdraggedBlockNames,\n\ttargetBlockName\n) {\n\t// At root level allowedBlocks is undefined and all blocks are allowed.\n\t// Otherwise, check if all dragged blocks are allowed.\n\tlet areBlocksAllowed = true;\n\tif ( allowedBlocks ) {\n\t\tconst allowedBlockNames = allowedBlocks?.map( ( { name } ) => name );\n\n\t\tareBlocksAllowed = draggedBlockNames.every( ( name ) =>\n\t\t\tallowedBlockNames?.includes( name )\n\t\t);\n\t}\n\n\t// Work out if dragged blocks have an allowed parent and if so\n\t// check target block matches the allowed parent.\n\tconst draggedBlockTypes = draggedBlockNames.map( ( name ) =>\n\t\tgetBlockType( name )\n\t);\n\tconst targetMatchesDraggedBlockParents = draggedBlockTypes.every(\n\t\t( block ) => {\n\t\t\tconst [ allowedParentName ] = block?.parent || [];\n\t\t\tif ( ! allowedParentName ) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn allowedParentName === targetBlockName;\n\t\t}\n\t);\n\n\treturn areBlocksAllowed && targetMatchesDraggedBlockParents;\n}\n\n/**\n * @typedef  {Object} WPBlockDropZoneConfig\n * @property {?HTMLElement} dropZoneElement Optional element to be used as the drop zone.\n * @property {string}       rootClientId    The root client id for the block list.\n */\n\n/**\n * A React hook that can be used to make a block list handle drag and drop.\n *\n * @param {WPBlockDropZoneConfig} dropZoneConfig configuration data for the drop zone.\n */\nexport default function useBlockDropZone( {\n\tdropZoneElement,\n\t// An undefined value represents a top-level block. Default to an empty\n\t// string for this so that `targetRootClientId` can be easily compared to\n\t// values returned by the `getRootBlockClientId` selector, which also uses\n\t// an empty string to represent top-level blocks.\n\trootClientId: targetRootClientId = '',\n\tparentClientId: parentBlockClientId = '',\n\tisDisabled = false,\n} = {} ) {\n\tconst registry = useRegistry();\n\tconst [ dropTarget, setDropTarget ] = useState( {\n\t\tindex: null,\n\t\toperation: 'insert',\n\t} );\n\n\tconst { getBlockType } = useSelect( blocksStore );\n\tconst {\n\t\tgetBlockListSettings,\n\t\tgetBlocks,\n\t\tgetBlockIndex,\n\t\tgetDraggedBlockClientIds,\n\t\tgetBlockNamesByClientId,\n\t\tgetAllowedBlocks,\n\t\tisDragging,\n\t} = unlock( useSelect( blockEditorStore ) );\n\tconst {\n\t\tshowInsertionPoint,\n\t\thideInsertionPoint,\n\t\tstartDragging,\n\t\tstopDragging,\n\t} = unlock( useDispatch( blockEditorStore ) );\n\n\tconst onBlockDrop = useOnBlockDrop(\n\t\tdropTarget.operation === 'before' || dropTarget.operation === 'after'\n\t\t\t? parentBlockClientId\n\t\t\t: targetRootClientId,\n\t\tdropTarget.index,\n\t\t{\n\t\t\toperation: dropTarget.operation,\n\t\t\tnearestSide: dropTarget.nearestSide,\n\t\t}\n\t);\n\tconst throttled = useThrottle(\n\t\tuseCallback(\n\t\t\t( event, ownerDocument ) => {\n\t\t\t\tif ( ! isDragging() ) {\n\t\t\t\t\t// When dragging from the desktop, no drag start event is fired.\n\t\t\t\t\t// So, ensure that the drag state is set when the user drags over a drop zone.\n\t\t\t\t\tstartDragging();\n\t\t\t\t}\n\t\t\t\tconst allowedBlocks = getAllowedBlocks( targetRootClientId );\n\t\t\t\tconst targetBlockName = getBlockNamesByClientId( [\n\t\t\t\t\ttargetRootClientId,\n\t\t\t\t] )[ 0 ];\n\t\t\t\tconst draggedBlockNames = getBlockNamesByClientId(\n\t\t\t\t\tgetDraggedBlockClientIds()\n\t\t\t\t);\n\t\t\t\tconst isBlockDroppingAllowed = isDropTargetValid(\n\t\t\t\t\tgetBlockType,\n\t\t\t\t\tallowedBlocks,\n\t\t\t\t\tdraggedBlockNames,\n\t\t\t\t\ttargetBlockName\n\t\t\t\t);\n\t\t\t\tif ( ! isBlockDroppingAllowed ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst blocks = getBlocks( targetRootClientId );\n\n\t\t\t\t// The block list is empty, don't show the insertion point but still allow dropping.\n\t\t\t\tif ( blocks.length === 0 ) {\n\t\t\t\t\tregistry.batch( () => {\n\t\t\t\t\t\tsetDropTarget( {\n\t\t\t\t\t\t\tindex: 0,\n\t\t\t\t\t\t\toperation: 'insert',\n\t\t\t\t\t\t} );\n\t\t\t\t\t\tshowInsertionPoint( targetRootClientId, 0, {\n\t\t\t\t\t\t\toperation: 'insert',\n\t\t\t\t\t\t} );\n\t\t\t\t\t} );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst blocksData = blocks.map( ( block ) => {\n\t\t\t\t\tconst clientId = block.clientId;\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\tisUnmodifiedDefaultBlock:\n\t\t\t\t\t\t\tgetIsUnmodifiedDefaultBlock( block ),\n\t\t\t\t\t\tgetBoundingClientRect: () =>\n\t\t\t\t\t\t\townerDocument\n\t\t\t\t\t\t\t\t.getElementById( `block-${ clientId }` )\n\t\t\t\t\t\t\t\t.getBoundingClientRect(),\n\t\t\t\t\t\tblockIndex: getBlockIndex( clientId ),\n\t\t\t\t\t\tblockOrientation:\n\t\t\t\t\t\t\tgetBlockListSettings( clientId )?.orientation,\n\t\t\t\t\t};\n\t\t\t\t} );\n\n\t\t\t\tconst [ targetIndex, operation, nearestSide ] =\n\t\t\t\t\tgetDropTargetPosition(\n\t\t\t\t\t\tblocksData,\n\t\t\t\t\t\t{ x: event.clientX, y: event.clientY },\n\t\t\t\t\t\tgetBlockListSettings( targetRootClientId )?.orientation,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tdropZoneElement,\n\t\t\t\t\t\t\tparentBlockClientId,\n\t\t\t\t\t\t\tparentBlockOrientation: parentBlockClientId\n\t\t\t\t\t\t\t\t? getBlockListSettings( parentBlockClientId )\n\t\t\t\t\t\t\t\t\t\t?.orientation\n\t\t\t\t\t\t\t\t: undefined,\n\t\t\t\t\t\t\trootBlockIndex: getBlockIndex( targetRootClientId ),\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\n\t\t\t\tregistry.batch( () => {\n\t\t\t\t\tsetDropTarget( {\n\t\t\t\t\t\tindex: targetIndex,\n\t\t\t\t\t\toperation,\n\t\t\t\t\t\tnearestSide,\n\t\t\t\t\t} );\n\n\t\t\t\t\tconst insertionPointClientId = [\n\t\t\t\t\t\t'before',\n\t\t\t\t\t\t'after',\n\t\t\t\t\t].includes( operation )\n\t\t\t\t\t\t? parentBlockClientId\n\t\t\t\t\t\t: targetRootClientId;\n\n\t\t\t\t\tshowInsertionPoint( insertionPointClientId, targetIndex, {\n\t\t\t\t\t\toperation,\n\t\t\t\t\t\tnearestSide,\n\t\t\t\t\t} );\n\t\t\t\t} );\n\t\t\t},\n\t\t\t[\n\t\t\t\tgetAllowedBlocks,\n\t\t\t\ttargetRootClientId,\n\t\t\t\tgetBlockNamesByClientId,\n\t\t\t\tgetDraggedBlockClientIds,\n\t\t\t\tgetBlockType,\n\t\t\t\tgetBlocks,\n\t\t\t\tgetBlockListSettings,\n\t\t\t\tdropZoneElement,\n\t\t\t\tparentBlockClientId,\n\t\t\t\tgetBlockIndex,\n\t\t\t\tregistry,\n\t\t\t\tshowInsertionPoint,\n\t\t\t\tisDragging,\n\t\t\t\tstartDragging,\n\t\t\t]\n\t\t),\n\t\t200\n\t);\n\n\treturn useDropZone( {\n\t\tdropZoneElement,\n\t\tisDisabled,\n\t\tonDrop: onBlockDrop,\n\t\tonDragOver( event ) {\n\t\t\t// `currentTarget` is only available while the event is being\n\t\t\t// handled, so get it now and pass it to the thottled function.\n\t\t\t// https://developer.mozilla.org/en-US/docs/Web/API/Event/currentTarget\n\t\t\tthrottled( event, event.currentTarget.ownerDocument );\n\t\t},\n\t\tonDragLeave() {\n\t\t\tthrottled.cancel();\n\t\t\thideInsertionPoint();\n\t\t},\n\t\tonDragEnd() {\n\t\t\tthrottled.cancel();\n\t\t\tstopDragging();\n\t\t\thideInsertionPoint();\n\t\t},\n\t} );\n}\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { useMergeRefs } from '@wordpress/compose';\nimport { forwardRef, useMemo, memo } from '@wordpress/element';\nimport { useSelect } from '@wordpress/data';\nimport {\n\tgetBlockSupport,\n\tstore as blocksStore,\n\t__unstableGetInnerBlocksProps as getInnerBlocksProps,\n} from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport ButtonBlockAppender from './button-block-appender';\nimport DefaultBlockAppender from './default-block-appender';\nimport useNestedSettingsUpdate from './use-nested-settings-update';\nimport useInnerBlockTemplateSync from './use-inner-block-template-sync';\nimport useBlockContext from './use-block-context';\nimport { BlockListItems } from '../block-list';\nimport { BlockContextProvider } from '../block-context';\nimport { useBlockEditContext } from '../block-edit/context';\nimport useBlockSync from '../provider/use-block-sync';\nimport { store as blockEditorStore } from '../../store';\nimport useBlockDropZone from '../use-block-drop-zone';\nimport { unlock } from '../../lock-unlock';\n\nconst EMPTY_OBJECT = {};\n\nfunction BlockContext( { children, clientId } ) {\n\tconst context = useBlockContext( clientId );\n\treturn (\n\t\t<BlockContextProvider value={ context }>\n\t\t\t{ children }\n\t\t</BlockContextProvider>\n\t);\n}\n\nconst BlockListItemsMemo = memo( BlockListItems );\n\n/**\n * InnerBlocks is a component which allows a single block to have multiple blocks\n * as children. The UncontrolledInnerBlocks component is used whenever the inner\n * blocks are not controlled by another entity. In other words, it is normally\n * used for inner blocks in the post editor\n *\n * @param {Object} props The component props.\n */\nfunction UncontrolledInnerBlocks( props ) {\n\tconst {\n\t\tclientId,\n\t\tallowedBlocks,\n\t\tprioritizedInserterBlocks,\n\t\tdefaultBlock,\n\t\tdirectInsert,\n\t\t__experimentalDefaultBlock,\n\t\t__experimentalDirectInsert,\n\t\ttemplate,\n\t\ttemplateLock,\n\t\twrapperRef,\n\t\ttemplateInsertUpdatesSelection,\n\t\t__experimentalCaptureToolbars: captureToolbars,\n\t\t__experimentalAppenderTagName,\n\t\trenderAppender,\n\t\torientation,\n\t\tplaceholder,\n\t\tlayout,\n\t\tname,\n\t\tblockType,\n\t\tparentLock,\n\t\tdefaultLayout,\n\t} = props;\n\n\tuseNestedSettingsUpdate(\n\t\tclientId,\n\t\tparentLock,\n\t\tallowedBlocks,\n\t\tprioritizedInserterBlocks,\n\t\tdefaultBlock,\n\t\tdirectInsert,\n\t\t__experimentalDefaultBlock,\n\t\t__experimentalDirectInsert,\n\t\ttemplateLock,\n\t\tcaptureToolbars,\n\t\torientation,\n\t\tlayout\n\t);\n\n\tuseInnerBlockTemplateSync(\n\t\tclientId,\n\t\ttemplate,\n\t\ttemplateLock,\n\t\ttemplateInsertUpdatesSelection\n\t);\n\n\tconst defaultLayoutBlockSupport =\n\t\tgetBlockSupport( name, 'layout' ) ||\n\t\tgetBlockSupport( name, '__experimentalLayout' ) ||\n\t\tEMPTY_OBJECT;\n\n\tconst { allowSizingOnChildren = false } = defaultLayoutBlockSupport;\n\tconst usedLayout = layout || defaultLayoutBlockSupport;\n\n\tconst memoedLayout = useMemo(\n\t\t() => ( {\n\t\t\t// Default layout will know about any content/wide size defined by the theme.\n\t\t\t...defaultLayout,\n\t\t\t...usedLayout,\n\t\t\t...( allowSizingOnChildren && {\n\t\t\t\tallowSizingOnChildren: true,\n\t\t\t} ),\n\t\t} ),\n\t\t[ defaultLayout, usedLayout, allowSizingOnChildren ]\n\t);\n\n\t// For controlled inner blocks, we don't want a change in blocks to\n\t// re-render the blocks list.\n\tconst items = (\n\t\t<BlockListItemsMemo\n\t\t\trootClientId={ clientId }\n\t\t\trenderAppender={ renderAppender }\n\t\t\t__experimentalAppenderTagName={ __experimentalAppenderTagName }\n\t\t\tlayout={ memoedLayout }\n\t\t\twrapperRef={ wrapperRef }\n\t\t\tplaceholder={ placeholder }\n\t\t/>\n\t);\n\n\tif ( Object.keys( blockType.providesContext ).length === 0 ) {\n\t\treturn items;\n\t}\n\n\treturn <BlockContext clientId={ clientId }>{ items }</BlockContext>;\n}\n\n/**\n * The controlled inner blocks component wraps the uncontrolled inner blocks\n * component with the blockSync hook. This keeps the innerBlocks of the block in\n * the block-editor store in sync with the blocks of the controlling entity. An\n * example of an inner block controller is a template part block, which provides\n * its own blocks from the template part entity data source.\n *\n * @param {Object} props The component props.\n */\nfunction ControlledInnerBlocks( props ) {\n\tuseBlockSync( props );\n\treturn <UncontrolledInnerBlocks { ...props } />;\n}\n\nconst ForwardedInnerBlocks = forwardRef( ( props, ref ) => {\n\tconst innerBlocksProps = useInnerBlocksProps( { ref }, props );\n\treturn (\n\t\t<div className=\"block-editor-inner-blocks\">\n\t\t\t<div { ...innerBlocksProps } />\n\t\t</div>\n\t);\n} );\n\n/**\n * This hook is used to lightly mark an element as an inner blocks wrapper\n * element. Call this hook and pass the returned props to the element to mark as\n * an inner blocks wrapper, automatically rendering inner blocks as children. If\n * you define a ref for the element, it is important to pass the ref to this\n * hook, which the hook in turn will pass to the component through the props it\n * returns. Optionally, you can also pass any other props through this hook, and\n * they will be merged and returned.\n *\n * @param {Object} props   Optional. Props to pass to the element. Must contain\n *                         the ref if one is defined.\n * @param {Object} options Optional. Inner blocks options.\n *\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/inner-blocks/README.md\n */\nexport function useInnerBlocksProps( props = {}, options = {} ) {\n\tconst {\n\t\t__unstableDisableLayoutClassNames,\n\t\t__unstableDisableDropZone,\n\t\tdropZoneElement,\n\t} = options;\n\tconst {\n\t\tclientId,\n\t\tlayout = null,\n\t\t__unstableLayoutClassNames: layoutClassNames = '',\n\t} = useBlockEditContext();\n\tconst selected = useSelect(\n\t\t( select ) => {\n\t\t\tif ( ! clientId ) {\n\t\t\t\treturn {};\n\t\t\t}\n\n\t\t\tconst {\n\t\t\t\tgetBlockName,\n\t\t\t\tisBlockSelected,\n\t\t\t\thasSelectedInnerBlock,\n\t\t\t\t__unstableGetEditorMode,\n\t\t\t\tgetTemplateLock,\n\t\t\t\tgetBlockRootClientId,\n\t\t\t\tgetBlockEditingMode,\n\t\t\t\tgetBlockSettings,\n\t\t\t\tisDragging,\n\t\t\t} = unlock( select( blockEditorStore ) );\n\t\t\tconst { hasBlockSupport, getBlockType } = select( blocksStore );\n\t\t\tconst blockName = getBlockName( clientId );\n\t\t\tconst enableClickThrough =\n\t\t\t\t__unstableGetEditorMode() === 'navigation';\n\t\t\tconst blockEditingMode = getBlockEditingMode( clientId );\n\t\t\tconst parentClientId = getBlockRootClientId( clientId );\n\t\t\tconst [ defaultLayout ] = getBlockSettings( clientId, 'layout' );\n\t\t\treturn {\n\t\t\t\t__experimentalCaptureToolbars: hasBlockSupport(\n\t\t\t\t\tblockName,\n\t\t\t\t\t'__experimentalExposeControlsToChildren',\n\t\t\t\t\tfalse\n\t\t\t\t),\n\t\t\t\thasOverlay:\n\t\t\t\t\tblockName !== 'core/template' &&\n\t\t\t\t\t! isBlockSelected( clientId ) &&\n\t\t\t\t\t! hasSelectedInnerBlock( clientId, true ) &&\n\t\t\t\t\tenableClickThrough &&\n\t\t\t\t\t! isDragging(),\n\t\t\t\tname: blockName,\n\t\t\t\tblockType: getBlockType( blockName ),\n\t\t\t\tparentLock: getTemplateLock( parentClientId ),\n\t\t\t\tparentClientId,\n\t\t\t\tisDropZoneDisabled: blockEditingMode === 'disabled',\n\t\t\t\tdefaultLayout,\n\t\t\t};\n\t\t},\n\t\t[ clientId ]\n\t);\n\tconst {\n\t\t__experimentalCaptureToolbars,\n\t\thasOverlay,\n\t\tname,\n\t\tblockType,\n\t\tparentLock,\n\t\tparentClientId,\n\t\tisDropZoneDisabled,\n\t\tdefaultLayout,\n\t} = selected;\n\n\tconst blockDropZoneRef = useBlockDropZone( {\n\t\tdropZoneElement,\n\t\trootClientId: clientId,\n\t\tparentClientId,\n\t\tisDisabled: isDropZoneDisabled,\n\t} );\n\n\tconst ref = useMergeRefs( [\n\t\tprops.ref,\n\t\t__unstableDisableDropZone ? null : blockDropZoneRef,\n\t] );\n\n\tconst innerBlocksProps = {\n\t\t__experimentalCaptureToolbars,\n\t\tlayout,\n\t\tname,\n\t\tblockType,\n\t\tparentLock,\n\t\tdefaultLayout,\n\t\t...options,\n\t};\n\tconst InnerBlocks =\n\t\tinnerBlocksProps.value && innerBlocksProps.onChange\n\t\t\t? ControlledInnerBlocks\n\t\t\t: UncontrolledInnerBlocks;\n\n\treturn {\n\t\t...props,\n\t\tref,\n\t\tclassName: classnames(\n\t\t\tprops.className,\n\t\t\t'block-editor-block-list__layout',\n\t\t\t__unstableDisableLayoutClassNames ? '' : layoutClassNames,\n\t\t\t{\n\t\t\t\t'has-overlay': hasOverlay,\n\t\t\t}\n\t\t),\n\t\tchildren: clientId ? (\n\t\t\t<InnerBlocks { ...innerBlocksProps } clientId={ clientId } />\n\t\t) : (\n\t\t\t<BlockListItems { ...options } />\n\t\t),\n\t};\n}\n\nuseInnerBlocksProps.save = getInnerBlocksProps;\n\n// Expose default appender placeholders as components.\nForwardedInnerBlocks.DefaultBlockAppender = DefaultBlockAppender;\nForwardedInnerBlocks.ButtonBlockAppender = ButtonBlockAppender;\n\nForwardedInnerBlocks.Content = () => useInnerBlocksProps.save().children;\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/inner-blocks/README.md\n */\nexport default ForwardedInnerBlocks;\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { store as blocksStore } from '@wordpress/blocks';\r\nimport { useSelect } from '@wordpress/data';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as blockEditorStore } from '../../store';\r\n\r\n/**\r\n * Returns a context object for a given block.\r\n *\r\n * @param {string} clientId The block client ID.\r\n *\r\n * @return {Record<string,*>} Context value.\r\n */\r\nexport default function useBlockContext( clientId ) {\r\n\treturn useSelect(\r\n\t\t( select ) => {\r\n\t\t\tconst block = select( blockEditorStore ).getBlock( clientId );\r\n\t\t\tif ( ! block ) {\r\n\t\t\t\treturn undefined;\r\n\t\t\t}\r\n\r\n\t\t\tconst blockType = select( blocksStore ).getBlockType( block.name );\r\n\t\t\tif ( ! blockType ) {\r\n\t\t\t\treturn undefined;\r\n\t\t\t}\r\n\r\n\t\t\tif ( Object.keys( blockType.providesContext ).length === 0 ) {\r\n\t\t\t\treturn undefined;\r\n\t\t\t}\r\n\r\n\t\t\treturn Object.fromEntries(\r\n\t\t\t\tObject.entries( blockType.providesContext ).map(\r\n\t\t\t\t\t( [ contextName, attributeName ] ) => [\r\n\t\t\t\t\t\tcontextName,\r\n\t\t\t\t\t\tblock.attributes[ attributeName ],\r\n\t\t\t\t\t]\r\n\t\t\t\t)\r\n\t\t\t);\r\n\t\t},\r\n\t\t[ clientId ]\r\n\t);\r\n}\r\n","/**\n * External dependencies\n */\nimport fastDeepEqual from 'fast-deep-equal/es6';\n\n/**\n * WordPress dependencies\n */\nimport { useRef, useLayoutEffect } from '@wordpress/element';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { synchronizeBlocksWithTemplate } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\n/**\n * This hook makes sure that a block's inner blocks stay in sync with the given\n * block \"template\". The template is a block hierarchy to which inner blocks must\n * conform. If the blocks get \"out of sync\" with the template and the template\n * is meant to be locked (e.g. templateLock = \"all\" or templateLock = \"contentOnly\"),\n * then we replace the inner blocks with the correct value after synchronizing it with the template.\n *\n * @param {string}  clientId                       The block client ID.\n * @param {Object}  template                       The template to match.\n * @param {string}  templateLock                   The template lock state for the inner blocks. For\n *                                                 example, if the template lock is set to \"all\",\n *                                                 then the inner blocks will stay in sync with the\n *                                                 template. If not defined or set to false, then\n *                                                 the inner blocks will not be synchronized with\n *                                                 the given template.\n * @param {boolean} templateInsertUpdatesSelection Whether or not to update the\n *                                                 block-editor selection state when inner blocks\n *                                                 are replaced after template synchronization.\n */\nexport default function useInnerBlockTemplateSync(\n\tclientId,\n\ttemplate,\n\ttemplateLock,\n\ttemplateInsertUpdatesSelection\n) {\n\t// Instead of adding a useSelect mapping here, please add to the useSelect\n\t// mapping in InnerBlocks! Every subscription impacts performance.\n\n\tconst {\n\t\tgetBlocks,\n\t\tgetSelectedBlocksInitialCaretPosition,\n\t\tisBlockSelected,\n\t} = useSelect( blockEditorStore );\n\tconst { replaceInnerBlocks, __unstableMarkNextChangeAsNotPersistent } =\n\t\tuseDispatch( blockEditorStore );\n\n\t// Maintain a reference to the previous value so we can do a deep equality check.\n\tconst existingTemplate = useRef( null );\n\n\tuseLayoutEffect( () => {\n\t\tlet isCancelled = false;\n\n\t\t// There's an implicit dependency between useInnerBlockTemplateSync and useNestedSettingsUpdate\n\t\t// The former needs to happen after the latter and since the latter is using microtasks to batch updates (performance optimization),\n\t\t// we need to schedule this one in a microtask as well.\n\t\t// Example: If you remove queueMicrotask here, ctrl + click to insert quote block won't close the inserter.\n\t\twindow.queueMicrotask( () => {\n\t\t\tif ( isCancelled ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Only synchronize innerBlocks with template if innerBlocks are empty\n\t\t\t// or a locking \"all\" or \"contentOnly\" exists directly on the block.\n\t\t\tconst currentInnerBlocks = getBlocks( clientId );\n\t\t\tconst shouldApplyTemplate =\n\t\t\t\tcurrentInnerBlocks.length === 0 ||\n\t\t\t\ttemplateLock === 'all' ||\n\t\t\t\ttemplateLock === 'contentOnly';\n\n\t\t\tconst hasTemplateChanged = ! fastDeepEqual(\n\t\t\t\ttemplate,\n\t\t\t\texistingTemplate.current\n\t\t\t);\n\n\t\t\tif ( ! shouldApplyTemplate || ! hasTemplateChanged ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\texistingTemplate.current = template;\n\t\t\tconst nextBlocks = synchronizeBlocksWithTemplate(\n\t\t\t\tcurrentInnerBlocks,\n\t\t\t\ttemplate\n\t\t\t);\n\n\t\t\tif ( ! fastDeepEqual( nextBlocks, currentInnerBlocks ) ) {\n\t\t\t\t__unstableMarkNextChangeAsNotPersistent();\n\t\t\t\treplaceInnerBlocks(\n\t\t\t\t\tclientId,\n\t\t\t\t\tnextBlocks,\n\t\t\t\t\tcurrentInnerBlocks.length === 0 &&\n\t\t\t\t\t\ttemplateInsertUpdatesSelection &&\n\t\t\t\t\t\tnextBlocks.length !== 0 &&\n\t\t\t\t\t\tisBlockSelected( clientId ),\n\t\t\t\t\t// This ensures the \"initialPosition\" doesn't change when applying the template\n\t\t\t\t\t// If we're supposed to focus the block, we'll focus the first inner block\n\t\t\t\t\t// otherwise, we won't apply any auto-focus.\n\t\t\t\t\t// This ensures for instance that the focus stays in the inserter when inserting the \"buttons\" block.\n\t\t\t\t\tgetSelectedBlocksInitialCaretPosition()\n\t\t\t\t);\n\t\t\t}\n\t\t} );\n\n\t\treturn () => {\n\t\t\tisCancelled = true;\n\t\t};\n\t}, [ template, templateLock, clientId ] );\n}\n","/**\n * WordPress dependencies\n */\nimport { useRefEffect, useMergeRefs } from '@wordpress/compose';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { isTextField } from '@wordpress/dom';\nimport {\n\tUP,\n\tRIGHT,\n\tDOWN,\n\tLEFT,\n\tENTER,\n\tBACKSPACE,\n\tESCAPE,\n\tTAB,\n} from '@wordpress/keycodes';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\n/**\n * Set of key codes upon which typing is to be initiated on a keydown event.\n *\n * @type {Set<number>}\n */\nconst KEY_DOWN_ELIGIBLE_KEY_CODES = new Set( [\n\tUP,\n\tRIGHT,\n\tDOWN,\n\tLEFT,\n\tENTER,\n\tBACKSPACE,\n] );\n\n/**\n * Returns true if a given keydown event can be inferred as intent to start\n * typing, or false otherwise. A keydown is considered eligible if it is a\n * text navigation without shift active.\n *\n * @param {KeyboardEvent} event Keydown event to test.\n *\n * @return {boolean} Whether event is eligible to start typing.\n */\nfunction isKeyDownEligibleForStartTyping( event ) {\n\tconst { keyCode, shiftKey } = event;\n\treturn ! shiftKey && KEY_DOWN_ELIGIBLE_KEY_CODES.has( keyCode );\n}\n\n/**\n * Removes the `isTyping` flag when the mouse moves in the document of the given\n * element.\n */\nexport function useMouseMoveTypingReset() {\n\tconst isTyping = useSelect(\n\t\t( select ) => select( blockEditorStore ).isTyping(),\n\t\t[]\n\t);\n\tconst { stopTyping } = useDispatch( blockEditorStore );\n\n\treturn useRefEffect(\n\t\t( node ) => {\n\t\t\tif ( ! isTyping ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst { ownerDocument } = node;\n\t\t\tlet lastClientX;\n\t\t\tlet lastClientY;\n\n\t\t\t/**\n\t\t\t * On mouse move, unset typing flag if user has moved cursor.\n\t\t\t *\n\t\t\t * @param {MouseEvent} event Mousemove event.\n\t\t\t */\n\t\t\tfunction stopTypingOnMouseMove( event ) {\n\t\t\t\tconst { clientX, clientY } = event;\n\n\t\t\t\t// We need to check that the mouse really moved because Safari\n\t\t\t\t// triggers mousemove events when shift or ctrl are pressed.\n\t\t\t\tif (\n\t\t\t\t\tlastClientX &&\n\t\t\t\t\tlastClientY &&\n\t\t\t\t\t( lastClientX !== clientX || lastClientY !== clientY )\n\t\t\t\t) {\n\t\t\t\t\tstopTyping();\n\t\t\t\t}\n\n\t\t\t\tlastClientX = clientX;\n\t\t\t\tlastClientY = clientY;\n\t\t\t}\n\n\t\t\townerDocument.addEventListener(\n\t\t\t\t'mousemove',\n\t\t\t\tstopTypingOnMouseMove\n\t\t\t);\n\n\t\t\treturn () => {\n\t\t\t\townerDocument.removeEventListener(\n\t\t\t\t\t'mousemove',\n\t\t\t\t\tstopTypingOnMouseMove\n\t\t\t\t);\n\t\t\t};\n\t\t},\n\t\t[ isTyping, stopTyping ]\n\t);\n}\n\n/**\n * Sets and removes the `isTyping` flag based on user actions:\n *\n * - Sets the flag if the user types within the given element.\n * - Removes the flag when the user selects some text, focusses a non-text\n *   field, presses ESC or TAB, or moves the mouse in the document.\n */\nexport function useTypingObserver() {\n\tconst { isTyping } = useSelect( ( select ) => {\n\t\tconst { isTyping: _isTyping } = select( blockEditorStore );\n\t\treturn {\n\t\t\tisTyping: _isTyping(),\n\t\t};\n\t}, [] );\n\tconst { startTyping, stopTyping } = useDispatch( blockEditorStore );\n\n\tconst ref1 = useMouseMoveTypingReset();\n\tconst ref2 = useRefEffect(\n\t\t( node ) => {\n\t\t\tconst { ownerDocument } = node;\n\t\t\tconst { defaultView } = ownerDocument;\n\t\t\tconst selection = defaultView.getSelection();\n\n\t\t\t// Listeners to stop typing should only be added when typing.\n\t\t\t// Listeners to start typing should only be added when not typing.\n\t\t\tif ( isTyping ) {\n\t\t\t\tlet timerId;\n\n\t\t\t\t/**\n\t\t\t\t * Stops typing when focus transitions to a non-text field element.\n\t\t\t\t *\n\t\t\t\t * @param {FocusEvent} event Focus event.\n\t\t\t\t */\n\t\t\t\tfunction stopTypingOnNonTextField( event ) {\n\t\t\t\t\tconst { target } = event;\n\n\t\t\t\t\t// Since focus to a non-text field via arrow key will trigger\n\t\t\t\t\t// before the keydown event, wait until after current stack\n\t\t\t\t\t// before evaluating whether typing is to be stopped. Otherwise,\n\t\t\t\t\t// typing will re-start.\n\t\t\t\t\ttimerId = defaultView.setTimeout( () => {\n\t\t\t\t\t\tif ( ! isTextField( target ) ) {\n\t\t\t\t\t\t\tstopTyping();\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t}\n\n\t\t\t\t/**\n\t\t\t\t * Unsets typing flag if user presses Escape while typing flag is\n\t\t\t\t * active.\n\t\t\t\t *\n\t\t\t\t * @param {KeyboardEvent} event Keypress or keydown event to\n\t\t\t\t *                              interpret.\n\t\t\t\t */\n\t\t\t\tfunction stopTypingOnEscapeKey( event ) {\n\t\t\t\t\tconst { keyCode } = event;\n\n\t\t\t\t\tif ( keyCode === ESCAPE || keyCode === TAB ) {\n\t\t\t\t\t\tstopTyping();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t/**\n\t\t\t\t * On selection change, unset typing flag if user has made an\n\t\t\t\t * uncollapsed (shift) selection.\n\t\t\t\t */\n\t\t\t\tfunction stopTypingOnSelectionUncollapse() {\n\t\t\t\t\tif ( ! selection.isCollapsed ) {\n\t\t\t\t\t\tstopTyping();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tnode.addEventListener( 'focus', stopTypingOnNonTextField );\n\t\t\t\tnode.addEventListener( 'keydown', stopTypingOnEscapeKey );\n\n\t\t\t\townerDocument.addEventListener(\n\t\t\t\t\t'selectionchange',\n\t\t\t\t\tstopTypingOnSelectionUncollapse\n\t\t\t\t);\n\n\t\t\t\treturn () => {\n\t\t\t\t\tdefaultView.clearTimeout( timerId );\n\t\t\t\t\tnode.removeEventListener(\n\t\t\t\t\t\t'focus',\n\t\t\t\t\t\tstopTypingOnNonTextField\n\t\t\t\t\t);\n\t\t\t\t\tnode.removeEventListener(\n\t\t\t\t\t\t'keydown',\n\t\t\t\t\t\tstopTypingOnEscapeKey\n\t\t\t\t\t);\n\t\t\t\t\townerDocument.removeEventListener(\n\t\t\t\t\t\t'selectionchange',\n\t\t\t\t\t\tstopTypingOnSelectionUncollapse\n\t\t\t\t\t);\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Handles a keypress or keydown event to infer intention to start\n\t\t\t * typing.\n\t\t\t *\n\t\t\t * @param {KeyboardEvent} event Keypress or keydown event to interpret.\n\t\t\t */\n\t\t\tfunction startTypingInTextField( event ) {\n\t\t\t\tconst { type, target } = event;\n\n\t\t\t\t// Abort early if already typing, or key press is incurred outside a\n\t\t\t\t// text field (e.g. arrow-ing through toolbar buttons).\n\t\t\t\t// Ignore typing if outside the current DOM container\n\t\t\t\tif ( ! isTextField( target ) || ! node.contains( target ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Special-case keydown because certain keys do not emit a keypress\n\t\t\t\t// event. Conversely avoid keydown as the canonical event since\n\t\t\t\t// there are many keydown which are explicitly not targeted for\n\t\t\t\t// typing.\n\t\t\t\tif (\n\t\t\t\t\ttype === 'keydown' &&\n\t\t\t\t\t! isKeyDownEligibleForStartTyping( event )\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tstartTyping();\n\t\t\t}\n\n\t\t\tnode.addEventListener( 'keypress', startTypingInTextField );\n\t\t\tnode.addEventListener( 'keydown', startTypingInTextField );\n\n\t\t\treturn () => {\n\t\t\t\tnode.removeEventListener( 'keypress', startTypingInTextField );\n\t\t\t\tnode.removeEventListener( 'keydown', startTypingInTextField );\n\t\t\t};\n\t\t},\n\t\t[ isTyping, startTyping, stopTyping ]\n\t);\n\n\treturn useMergeRefs( [ ref1, ref2 ] );\n}\n\nfunction ObserveTyping( { children } ) {\n\treturn <div ref={ useTypingObserver() }>{ children }</div>;\n}\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/observe-typing/README.md\n */\nexport default ObserveTyping;\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tAsyncModeProvider,\n\tuseSelect,\n\tuseDispatch,\n\tuseRegistry,\n} from '@wordpress/data';\nimport {\n\tuseViewportMatch,\n\tuseMergeRefs,\n\tuseDebounce,\n} from '@wordpress/compose';\nimport {\n\tcreateContext,\n\tuseMemo,\n\tuseCallback,\n\tuseEffect,\n} from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport BlockListBlock from './block';\nimport BlockListAppender from '../block-list-appender';\nimport { useInBetweenInserter } from './use-in-between-inserter';\nimport { store as blockEditorStore } from '../../store';\nimport { LayoutProvider, defaultLayout } from './layout';\nimport { useBlockSelectionClearer } from '../block-selection-clearer';\nimport { useInnerBlocksProps } from '../inner-blocks';\nimport {\n\tBlockEditContextProvider,\n\tDEFAULT_BLOCK_EDIT_CONTEXT,\n} from '../block-edit/context';\nimport { useTypingObserver } from '../observe-typing';\nimport { unlock } from '../../lock-unlock';\n\nexport const IntersectionObserver = createContext();\nconst pendingBlockVisibilityUpdatesPerRegistry = new WeakMap();\n\nfunction Root( { className, ...settings } ) {\n\tconst isLargeViewport = useViewportMatch( 'medium' );\n\tconst {\n\t\tisOutlineMode,\n\t\tisFocusMode,\n\t\teditorMode,\n\t\ttemporarilyEditingAsBlocks,\n\t} = useSelect( ( select ) => {\n\t\tconst {\n\t\t\tgetSettings,\n\t\t\t__unstableGetEditorMode,\n\t\t\t__unstableGetTemporarilyEditingAsBlocks,\n\t\t} = select( blockEditorStore );\n\t\tconst { outlineMode, focusMode } = getSettings();\n\t\treturn {\n\t\t\tisOutlineMode: outlineMode,\n\t\t\tisFocusMode: focusMode,\n\t\t\teditorMode: __unstableGetEditorMode(),\n\t\t\ttemporarilyEditingAsBlocks:\n\t\t\t\t__unstableGetTemporarilyEditingAsBlocks(),\n\t\t};\n\t}, [] );\n\tconst registry = useRegistry();\n\tconst { setBlockVisibility } = useDispatch( blockEditorStore );\n\n\tconst delayedBlockVisibilityUpdates = useDebounce(\n\t\tuseCallback( () => {\n\t\t\tconst updates = {};\n\t\t\tpendingBlockVisibilityUpdatesPerRegistry\n\t\t\t\t.get( registry )\n\t\t\t\t.forEach( ( [ id, isIntersecting ] ) => {\n\t\t\t\t\tupdates[ id ] = isIntersecting;\n\t\t\t\t} );\n\t\t\tsetBlockVisibility( updates );\n\t\t}, [ registry ] ),\n\t\t300,\n\t\t{\n\t\t\ttrailing: true,\n\t\t}\n\t);\n\tconst intersectionObserver = useMemo( () => {\n\t\tconst { IntersectionObserver: Observer } = window;\n\n\t\tif ( ! Observer ) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn new Observer( ( entries ) => {\n\t\t\tif ( ! pendingBlockVisibilityUpdatesPerRegistry.get( registry ) ) {\n\t\t\t\tpendingBlockVisibilityUpdatesPerRegistry.set( registry, [] );\n\t\t\t}\n\t\t\tfor ( const entry of entries ) {\n\t\t\t\tconst clientId = entry.target.getAttribute( 'data-block' );\n\t\t\t\tpendingBlockVisibilityUpdatesPerRegistry\n\t\t\t\t\t.get( registry )\n\t\t\t\t\t.push( [ clientId, entry.isIntersecting ] );\n\t\t\t}\n\t\t\tdelayedBlockVisibilityUpdates();\n\t\t} );\n\t}, [] );\n\tconst innerBlocksProps = useInnerBlocksProps(\n\t\t{\n\t\t\tref: useMergeRefs( [\n\t\t\t\tuseBlockSelectionClearer(),\n\t\t\t\tuseInBetweenInserter(),\n\t\t\t\tuseTypingObserver(),\n\t\t\t] ),\n\t\t\tclassName: classnames( 'is-root-container', className, {\n\t\t\t\t'is-outline-mode': isOutlineMode,\n\t\t\t\t'is-focus-mode': isFocusMode && isLargeViewport,\n\t\t\t\t'is-navigate-mode': editorMode === 'navigation',\n\t\t\t} ),\n\t\t},\n\t\tsettings\n\t);\n\treturn (\n\t\t<IntersectionObserver.Provider value={ intersectionObserver }>\n\t\t\t<div { ...innerBlocksProps } />\n\t\t\t{ !! temporarilyEditingAsBlocks && (\n\t\t\t\t<StopEditingAsBlocksOnOutsideSelect\n\t\t\t\t\tclientId={ temporarilyEditingAsBlocks }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</IntersectionObserver.Provider>\n\t);\n}\n\nfunction StopEditingAsBlocksOnOutsideSelect( { clientId } ) {\n\tconst { stopEditingAsBlocks } = unlock( useDispatch( blockEditorStore ) );\n\tconst isBlockOrDescendantSelected = useSelect(\n\t\t( select ) => {\n\t\t\tconst { isBlockSelected, hasSelectedInnerBlock } =\n\t\t\t\tselect( blockEditorStore );\n\t\t\treturn (\n\t\t\t\tisBlockSelected( clientId ) ||\n\t\t\t\thasSelectedInnerBlock( clientId, true )\n\t\t\t);\n\t\t},\n\t\t[ clientId ]\n\t);\n\tuseEffect( () => {\n\t\tif ( ! isBlockOrDescendantSelected ) {\n\t\t\tstopEditingAsBlocks( clientId );\n\t\t}\n\t}, [ isBlockOrDescendantSelected, clientId, stopEditingAsBlocks ] );\n\treturn null;\n}\n\nexport default function BlockList( settings ) {\n\treturn (\n\t\t<BlockEditContextProvider value={ DEFAULT_BLOCK_EDIT_CONTEXT }>\n\t\t\t<Root { ...settings } />\n\t\t</BlockEditContextProvider>\n\t);\n}\n\nfunction Items( {\n\tplaceholder,\n\trootClientId,\n\trenderAppender: CustomAppender,\n\t__experimentalAppenderTagName,\n\tlayout = defaultLayout,\n} ) {\n\t// Avoid passing CustomAppender to useSelect because it could be a new\n\t// function on every render.\n\tconst hasAppender = CustomAppender !== false;\n\tconst hasCustomAppender = !! CustomAppender;\n\tconst { order, selectedBlocks, visibleBlocks, shouldRenderAppender } =\n\t\tuseSelect(\n\t\t\t( select ) => {\n\t\t\t\tconst {\n\t\t\t\t\tgetBlockOrder,\n\t\t\t\t\tgetSelectedBlockClientId,\n\t\t\t\t\tgetSelectedBlockClientIds,\n\t\t\t\t\t__unstableGetVisibleBlocks,\n\t\t\t\t\tgetTemplateLock,\n\t\t\t\t\tgetBlockEditingMode,\n\t\t\t\t\t__unstableGetEditorMode,\n\t\t\t\t} = select( blockEditorStore );\n\t\t\t\tconst selectedBlockClientId = getSelectedBlockClientId();\n\t\t\t\treturn {\n\t\t\t\t\torder: getBlockOrder( rootClientId ),\n\t\t\t\t\tselectedBlocks: getSelectedBlockClientIds(),\n\t\t\t\t\tvisibleBlocks: __unstableGetVisibleBlocks(),\n\t\t\t\t\tshouldRenderAppender:\n\t\t\t\t\t\thasAppender &&\n\t\t\t\t\t\t( hasCustomAppender\n\t\t\t\t\t\t\t? ! getTemplateLock( rootClientId ) &&\n\t\t\t\t\t\t\t  getBlockEditingMode( rootClientId ) !==\n\t\t\t\t\t\t\t\t\t'disabled' &&\n\t\t\t\t\t\t\t  __unstableGetEditorMode() !== 'zoom-out'\n\t\t\t\t\t\t\t: rootClientId === selectedBlockClientId ||\n\t\t\t\t\t\t\t  ( ! rootClientId && ! selectedBlockClientId ) ),\n\t\t\t\t};\n\t\t\t},\n\t\t\t[ rootClientId, hasAppender, hasCustomAppender ]\n\t\t);\n\n\treturn (\n\t\t<LayoutProvider value={ layout }>\n\t\t\t{ order.map( ( clientId ) => (\n\t\t\t\t<AsyncModeProvider\n\t\t\t\t\tkey={ clientId }\n\t\t\t\t\tvalue={\n\t\t\t\t\t\t// Only provide data asynchronously if the block is\n\t\t\t\t\t\t// not visible and not selected.\n\t\t\t\t\t\t! visibleBlocks.has( clientId ) &&\n\t\t\t\t\t\t! selectedBlocks.includes( clientId )\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t<BlockListBlock\n\t\t\t\t\t\trootClientId={ rootClientId }\n\t\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\t/>\n\t\t\t\t</AsyncModeProvider>\n\t\t\t) ) }\n\t\t\t{ order.length < 1 && placeholder }\n\t\t\t{ shouldRenderAppender && (\n\t\t\t\t<BlockListAppender\n\t\t\t\t\ttagName={ __experimentalAppenderTagName }\n\t\t\t\t\trootClientId={ rootClientId }\n\t\t\t\t\tCustomAppender={ CustomAppender }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</LayoutProvider>\n\t);\n}\n\nexport function BlockListItems( props ) {\n\t// This component needs to always be synchronous as it's the one changing\n\t// the async mode depending on the block selection.\n\treturn (\n\t\t<AsyncModeProvider value={ false }>\n\t\t\t<Items { ...props } />\n\t\t</AsyncModeProvider>\n\t);\n}\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useRefEffect } from '@wordpress/compose';\r\nimport { useSelect } from '@wordpress/data';\r\nimport { getScrollContainer } from '@wordpress/dom';\r\nimport {\r\n\tuseCallback,\r\n\tuseLayoutEffect,\r\n\tuseMemo,\r\n\tuseState,\r\n} from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as blockEditorStore } from '../../store';\r\nimport { __unstableUseBlockElement as useBlockElement } from '../block-list/use-block-props/use-block-refs';\r\nimport { hasStickyOrFixedPositionValue } from '../../hooks/position';\r\n\r\nconst COMMON_PROPS = {\r\n\tplacement: 'top-start',\r\n};\r\n\r\n// By default the toolbar sets the `shift` prop. If the user scrolls the page\r\n// down the toolbar will stay on screen by adopting a sticky position at the\r\n// top of the viewport.\r\nconst DEFAULT_PROPS = {\r\n\t...COMMON_PROPS,\r\n\tflip: false,\r\n\tshift: true,\r\n};\r\n\r\n// When there isn't enough height between the top of the block and the editor\r\n// canvas, the `shift` prop is set to `false`, as it will cause the block to be\r\n// obscured. The `flip` behavior is enabled, which positions the toolbar below\r\n// the block. This only happens if the block is smaller than the viewport, as\r\n// otherwise the toolbar will be off-screen.\r\nconst RESTRICTED_HEIGHT_PROPS = {\r\n\t...COMMON_PROPS,\r\n\tflip: true,\r\n\tshift: false,\r\n};\r\n\r\n/**\r\n * Get the popover props for the block toolbar, determined by the space at the top of the canvas and the toolbar height.\r\n *\r\n * @param {Element} contentElement       The DOM element that represents the editor content or canvas.\r\n * @param {Element} selectedBlockElement The outer DOM element of the first selected block.\r\n * @param {Element} scrollContainer      The scrollable container for the contentElement.\r\n * @param {number}  toolbarHeight        The height of the toolbar in pixels.\r\n * @param {boolean} isSticky             Whether or not the selected block is sticky or fixed.\r\n *\r\n * @return {Object} The popover props used to determine the position of the toolbar.\r\n */\r\nfunction getProps(\r\n\tcontentElement,\r\n\tselectedBlockElement,\r\n\tscrollContainer,\r\n\ttoolbarHeight,\r\n\tisSticky\r\n) {\r\n\tif ( ! contentElement || ! selectedBlockElement ) {\r\n\t\treturn DEFAULT_PROPS;\r\n\t}\r\n\r\n\t// Get how far the content area has been scrolled.\r\n\tconst scrollTop = scrollContainer?.scrollTop || 0;\r\n\r\n\tconst blockRect = selectedBlockElement.getBoundingClientRect();\r\n\tconst contentRect = contentElement.getBoundingClientRect();\r\n\r\n\t// Get the vertical position of top of the visible content area.\r\n\tconst topOfContentElementInViewport = scrollTop + contentRect.top;\r\n\r\n\t// The document element's clientHeight represents the viewport height.\r\n\tconst viewportHeight =\r\n\t\tcontentElement.ownerDocument.documentElement.clientHeight;\r\n\r\n\t// The restricted height area is calculated as the sum of the\r\n\t// vertical position of the visible content area, plus the height\r\n\t// of the block toolbar.\r\n\tconst restrictedTopArea = topOfContentElementInViewport + toolbarHeight;\r\n\tconst hasSpaceForToolbarAbove = blockRect.top > restrictedTopArea;\r\n\r\n\tconst isBlockTallerThanViewport =\r\n\t\tblockRect.height > viewportHeight - toolbarHeight;\r\n\r\n\t// Sticky blocks are treated as if they will never have enough space for the toolbar above.\r\n\tif (\r\n\t\t! isSticky &&\r\n\t\t( hasSpaceForToolbarAbove || isBlockTallerThanViewport )\r\n\t) {\r\n\t\treturn DEFAULT_PROPS;\r\n\t}\r\n\r\n\treturn RESTRICTED_HEIGHT_PROPS;\r\n}\r\n\r\n/**\r\n * Determines the desired popover positioning behavior, returning a set of appropriate props.\r\n *\r\n * @param {Object}  elements\r\n * @param {Element} elements.contentElement The DOM element that represents the editor content or canvas.\r\n * @param {string}  elements.clientId       The clientId of the first selected block.\r\n *\r\n * @return {Object} The popover props used to determine the position of the toolbar.\r\n */\r\nexport default function useBlockToolbarPopoverProps( {\r\n\tcontentElement,\r\n\tclientId,\r\n} ) {\r\n\tconst selectedBlockElement = useBlockElement( clientId );\r\n\tconst [ toolbarHeight, setToolbarHeight ] = useState( 0 );\r\n\tconst { blockIndex, isSticky } = useSelect(\r\n\t\t( select ) => {\r\n\t\t\tconst { getBlockIndex, getBlockAttributes } =\r\n\t\t\t\tselect( blockEditorStore );\r\n\t\t\treturn {\r\n\t\t\t\tblockIndex: getBlockIndex( clientId ),\r\n\t\t\t\tisSticky: hasStickyOrFixedPositionValue(\r\n\t\t\t\t\tgetBlockAttributes( clientId )\r\n\t\t\t\t),\r\n\t\t\t};\r\n\t\t},\r\n\t\t[ clientId ]\r\n\t);\r\n\tconst scrollContainer = useMemo( () => {\r\n\t\tif ( ! contentElement ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\treturn getScrollContainer( contentElement );\r\n\t}, [ contentElement ] );\r\n\tconst [ props, setProps ] = useState( () =>\r\n\t\tgetProps(\r\n\t\t\tcontentElement,\r\n\t\t\tselectedBlockElement,\r\n\t\t\tscrollContainer,\r\n\t\t\ttoolbarHeight,\r\n\t\t\tisSticky\r\n\t\t)\r\n\t);\r\n\r\n\tconst popoverRef = useRefEffect( ( popoverNode ) => {\r\n\t\tsetToolbarHeight( popoverNode.offsetHeight );\r\n\t}, [] );\r\n\r\n\tconst updateProps = useCallback(\r\n\t\t() =>\r\n\t\t\tsetProps(\r\n\t\t\t\tgetProps(\r\n\t\t\t\t\tcontentElement,\r\n\t\t\t\t\tselectedBlockElement,\r\n\t\t\t\t\tscrollContainer,\r\n\t\t\t\t\ttoolbarHeight,\r\n\t\t\t\t\tisSticky\r\n\t\t\t\t)\r\n\t\t\t),\r\n\t\t[ contentElement, selectedBlockElement, scrollContainer, toolbarHeight ]\r\n\t);\r\n\r\n\t// Update props when the block is moved. This also ensures the props are\r\n\t// correct on initial mount, and when the selected block or content element\r\n\t// changes (since the callback ref will update).\r\n\tuseLayoutEffect( updateProps, [ blockIndex, updateProps ] );\r\n\r\n\t// Update props when the viewport is resized or the block is resized.\r\n\tuseLayoutEffect( () => {\r\n\t\tif ( ! contentElement || ! selectedBlockElement ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Update the toolbar props on viewport resize.\r\n\t\tconst contentView = contentElement?.ownerDocument?.defaultView;\r\n\t\tcontentView?.addEventHandler?.( 'resize', updateProps );\r\n\r\n\t\t// Update the toolbar props on block resize.\r\n\t\tlet resizeObserver;\r\n\t\tconst blockView = selectedBlockElement?.ownerDocument?.defaultView;\r\n\t\tif ( blockView.ResizeObserver ) {\r\n\t\t\tresizeObserver = new blockView.ResizeObserver( updateProps );\r\n\t\t\tresizeObserver.observe( selectedBlockElement );\r\n\t\t}\r\n\r\n\t\treturn () => {\r\n\t\t\tcontentView?.removeEventHandler?.( 'resize', updateProps );\r\n\r\n\t\t\tif ( resizeObserver ) {\r\n\t\t\t\tresizeObserver.disconnect();\r\n\t\t\t}\r\n\t\t};\r\n\t}, [ updateProps, contentElement, selectedBlockElement ] );\r\n\r\n\treturn {\r\n\t\t...props,\r\n\t\tref: popoverRef,\r\n\t};\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useSelect } from '@wordpress/data';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as blockEditorStore } from '../../store';\r\n\r\n/**\r\n * Returns props for the selected block tools and empty block inserter.\r\n *\r\n * @param {string} clientId Selected block client ID.\r\n */\r\nexport default function useSelectedBlockToolProps( clientId ) {\r\n\tconst selectedBlockProps = useSelect(\r\n\t\t( select ) => {\r\n\t\t\tconst {\r\n\t\t\t\tgetBlockRootClientId,\r\n\t\t\t\tgetBlockParents,\r\n\t\t\t\t__experimentalGetBlockListSettingsForBlocks,\r\n\t\t\t\tisBlockInsertionPointVisible,\r\n\t\t\t\tgetBlockInsertionPoint,\r\n\t\t\t\tgetBlockOrder,\r\n\t\t\t\thasMultiSelection,\r\n\t\t\t\tgetLastMultiSelectedBlockClientId,\r\n\t\t\t} = select( blockEditorStore );\r\n\r\n\t\t\tconst blockParentsClientIds = getBlockParents( clientId );\r\n\r\n\t\t\t// Get Block List Settings for all ancestors of the current Block clientId.\r\n\t\t\tconst parentBlockListSettings =\r\n\t\t\t\t__experimentalGetBlockListSettingsForBlocks(\r\n\t\t\t\t\tblockParentsClientIds\r\n\t\t\t\t);\r\n\r\n\t\t\t// Get the clientId of the topmost parent with the capture toolbars setting.\r\n\t\t\tconst capturingClientId = blockParentsClientIds.find(\r\n\t\t\t\t( parentClientId ) =>\r\n\t\t\t\t\tparentBlockListSettings[ parentClientId ]\r\n\t\t\t\t\t\t?.__experimentalCaptureToolbars\r\n\t\t\t);\r\n\r\n\t\t\tlet isInsertionPointVisible = false;\r\n\t\t\tif ( isBlockInsertionPointVisible() ) {\r\n\t\t\t\tconst insertionPoint = getBlockInsertionPoint();\r\n\t\t\t\tconst order = getBlockOrder( insertionPoint.rootClientId );\r\n\t\t\t\tisInsertionPointVisible =\r\n\t\t\t\t\torder[ insertionPoint.index ] === clientId;\r\n\t\t\t}\r\n\r\n\t\t\treturn {\r\n\t\t\t\tcapturingClientId,\r\n\t\t\t\tisInsertionPointVisible,\r\n\t\t\t\tlastClientId: hasMultiSelection()\r\n\t\t\t\t\t? getLastMultiSelectedBlockClientId()\r\n\t\t\t\t\t: null,\r\n\t\t\t\trootClientId: getBlockRootClientId( clientId ),\r\n\t\t\t};\r\n\t\t},\r\n\t\t[ clientId ]\r\n\t);\r\n\r\n\treturn selectedBlockProps;\r\n}\r\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * Internal dependencies\n */\nimport BlockPopoverCover from '../block-popover/cover';\nimport useBlockToolbarPopoverProps from './use-block-toolbar-popover-props';\nimport Inserter from '../inserter';\nimport useSelectedBlockToolProps from './use-selected-block-tool-props';\n\nexport default function EmptyBlockInserter( {\n\tclientId,\n\t__unstableContentRef,\n} ) {\n\tconst {\n\t\tcapturingClientId,\n\t\tisInsertionPointVisible,\n\t\tlastClientId,\n\t\trootClientId,\n\t} = useSelectedBlockToolProps( clientId );\n\n\tconst popoverProps = useBlockToolbarPopoverProps( {\n\t\tcontentElement: __unstableContentRef?.current,\n\t\tclientId,\n\t} );\n\n\treturn (\n\t\t<BlockPopoverCover\n\t\t\tclientId={ capturingClientId || clientId }\n\t\t\tbottomClientId={ lastClientId }\n\t\t\tclassName={ classnames(\n\t\t\t\t'block-editor-block-list__block-side-inserter-popover',\n\t\t\t\t{\n\t\t\t\t\t'is-insertion-point-visible': isInsertionPointVisible,\n\t\t\t\t}\n\t\t\t) }\n\t\t\t__unstableContentRef={ __unstableContentRef }\n\t\t\t{ ...popoverProps }\n\t\t>\n\t\t\t<div className=\"block-editor-block-list__empty-block-inserter\">\n\t\t\t\t<Inserter\n\t\t\t\t\tposition=\"bottom right\"\n\t\t\t\t\trootClientId={ rootClientId }\n\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\t__experimentalIsQuick\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</BlockPopoverCover>\n\t);\n}\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { store as blocksStore } from '@wordpress/blocks';\r\nimport { Draggable } from '@wordpress/components';\r\nimport { useSelect, useDispatch } from '@wordpress/data';\r\nimport { useEffect, useRef } from '@wordpress/element';\r\nimport { throttle } from '@wordpress/compose';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport BlockDraggableChip from './draggable-chip';\r\nimport useScrollWhenDragging from './use-scroll-when-dragging';\r\nimport { store as blockEditorStore } from '../../store';\r\nimport { __unstableUseBlockRef as useBlockRef } from '../block-list/use-block-props/use-block-refs';\r\nimport { isDropTargetValid } from '../use-block-drop-zone';\r\n\r\nconst BlockDraggable = ( {\r\n\tappendToOwnerDocument,\r\n\tchildren,\r\n\tclientIds,\r\n\tcloneClassname,\r\n\telementId,\r\n\tonDragStart,\r\n\tonDragEnd,\r\n\tfadeWhenDisabled = false,\r\n\tdragComponent,\r\n} ) => {\r\n\tconst {\r\n\t\tsrcRootClientId,\r\n\t\tisDraggable,\r\n\t\ticon,\r\n\t\tvisibleInserter,\r\n\t\tgetBlockType,\r\n\t} = useSelect(\r\n\t\t( select ) => {\r\n\t\t\tconst {\r\n\t\t\t\tcanMoveBlocks,\r\n\t\t\t\tgetBlockRootClientId,\r\n\t\t\t\tgetBlockName,\r\n\t\t\t\tgetBlockAttributes,\r\n\t\t\t\tisBlockInsertionPointVisible,\r\n\t\t\t} = select( blockEditorStore );\r\n\t\t\tconst { getBlockType: _getBlockType, getActiveBlockVariation } =\r\n\t\t\t\tselect( blocksStore );\r\n\t\t\tconst rootClientId = getBlockRootClientId( clientIds[ 0 ] );\r\n\t\t\tconst blockName = getBlockName( clientIds[ 0 ] );\r\n\t\t\tconst variation = getActiveBlockVariation(\r\n\t\t\t\tblockName,\r\n\t\t\t\tgetBlockAttributes( clientIds[ 0 ] )\r\n\t\t\t);\r\n\r\n\t\t\treturn {\r\n\t\t\t\tsrcRootClientId: rootClientId,\r\n\t\t\t\tisDraggable: canMoveBlocks( clientIds, rootClientId ),\r\n\t\t\t\ticon: variation?.icon || _getBlockType( blockName )?.icon,\r\n\t\t\t\tvisibleInserter: isBlockInsertionPointVisible(),\r\n\t\t\t\tgetBlockType: _getBlockType,\r\n\t\t\t};\r\n\t\t},\r\n\t\t[ clientIds ]\r\n\t);\r\n\r\n\tconst isDragging = useRef( false );\r\n\tconst [ startScrolling, scrollOnDragOver, stopScrolling ] =\r\n\t\tuseScrollWhenDragging();\r\n\r\n\tconst { getAllowedBlocks, getBlockNamesByClientId, getBlockRootClientId } =\r\n\t\tuseSelect( blockEditorStore );\r\n\r\n\tconst { startDraggingBlocks, stopDraggingBlocks } =\r\n\t\tuseDispatch( blockEditorStore );\r\n\r\n\t// Stop dragging blocks if the block draggable is unmounted.\r\n\tuseEffect( () => {\r\n\t\treturn () => {\r\n\t\t\tif ( isDragging.current ) {\r\n\t\t\t\tstopDraggingBlocks();\r\n\t\t\t}\r\n\t\t};\r\n\t}, [] );\r\n\r\n\t// Find the root of the editor iframe.\r\n\tconst blockRef = useBlockRef( clientIds[ 0 ] );\r\n\tconst editorRoot = blockRef.current?.closest( 'body' );\r\n\r\n\t/*\r\n\t * Add a dragover event listener to the editor root to track the blocks being dragged over.\r\n\t * The listener has to be inside the editor iframe otherwise the target isn't accessible.\r\n\t */\r\n\tuseEffect( () => {\r\n\t\tif ( ! editorRoot || ! fadeWhenDisabled ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst onDragOver = ( event ) => {\r\n\t\t\tif ( ! event.target.closest( '[data-block]' ) ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst draggedBlockNames = getBlockNamesByClientId( clientIds );\r\n\t\t\tconst targetClientId = event.target\r\n\t\t\t\t.closest( '[data-block]' )\r\n\t\t\t\t.getAttribute( 'data-block' );\r\n\r\n\t\t\tconst allowedBlocks = getAllowedBlocks( targetClientId );\r\n\t\t\tconst targetBlockName = getBlockNamesByClientId( [\r\n\t\t\t\ttargetClientId,\r\n\t\t\t] )[ 0 ];\r\n\r\n\t\t\t/*\r\n\t\t\t * Check if the target is valid to drop in.\r\n\t\t\t * If the target's allowedBlocks is an empty array,\r\n\t\t\t * it isn't a container block, in which case we check\r\n\t\t\t * its parent's validity instead.\r\n\t\t\t */\r\n\t\t\tlet dropTargetValid;\r\n\t\t\tif ( allowedBlocks?.length === 0 ) {\r\n\t\t\t\tconst targetRootClientId =\r\n\t\t\t\t\tgetBlockRootClientId( targetClientId );\r\n\t\t\t\tconst targetRootBlockName = getBlockNamesByClientId( [\r\n\t\t\t\t\ttargetRootClientId,\r\n\t\t\t\t] )[ 0 ];\r\n\t\t\t\tconst rootAllowedBlocks =\r\n\t\t\t\t\tgetAllowedBlocks( targetRootClientId );\r\n\t\t\t\tdropTargetValid = isDropTargetValid(\r\n\t\t\t\t\tgetBlockType,\r\n\t\t\t\t\trootAllowedBlocks,\r\n\t\t\t\t\tdraggedBlockNames,\r\n\t\t\t\t\ttargetRootBlockName\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tdropTargetValid = isDropTargetValid(\r\n\t\t\t\t\tgetBlockType,\r\n\t\t\t\t\tallowedBlocks,\r\n\t\t\t\t\tdraggedBlockNames,\r\n\t\t\t\t\ttargetBlockName\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\t/*\r\n\t\t\t * Update the body class to reflect if drop target is valid.\r\n\t\t\t * This has to be done on the document body because the draggable\r\n\t\t\t * chip is rendered outside of the editor iframe.\r\n\t\t\t */\r\n\t\t\tif ( ! dropTargetValid && ! visibleInserter ) {\r\n\t\t\t\twindow?.document?.body?.classList?.add(\r\n\t\t\t\t\t'block-draggable-invalid-drag-token'\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\twindow?.document?.body?.classList?.remove(\r\n\t\t\t\t\t'block-draggable-invalid-drag-token'\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tconst throttledOnDragOver = throttle( onDragOver, 200 );\r\n\r\n\t\teditorRoot.addEventListener( 'dragover', throttledOnDragOver );\r\n\r\n\t\treturn () => {\r\n\t\t\teditorRoot.removeEventListener( 'dragover', throttledOnDragOver );\r\n\t\t};\r\n\t}, [\r\n\t\tclientIds,\r\n\t\teditorRoot,\r\n\t\tfadeWhenDisabled,\r\n\t\tgetAllowedBlocks,\r\n\t\tgetBlockNamesByClientId,\r\n\t\tgetBlockRootClientId,\r\n\t\tgetBlockType,\r\n\t\tvisibleInserter,\r\n\t] );\r\n\r\n\tif ( ! isDraggable ) {\r\n\t\treturn children( { draggable: false } );\r\n\t}\r\n\r\n\tconst transferData = {\r\n\t\ttype: 'block',\r\n\t\tsrcClientIds: clientIds,\r\n\t\tsrcRootClientId,\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Draggable\r\n\t\t\tappendToOwnerDocument={ appendToOwnerDocument }\r\n\t\t\tcloneClassname={ cloneClassname }\r\n\t\t\t__experimentalTransferDataType=\"wp-blocks\"\r\n\t\t\ttransferData={ transferData }\r\n\t\t\tonDragStart={ ( event ) => {\r\n\t\t\t\t// Defer hiding the dragged source element to the next\r\n\t\t\t\t// frame to enable dragging.\r\n\t\t\t\twindow.requestAnimationFrame( () => {\r\n\t\t\t\t\tstartDraggingBlocks( clientIds );\r\n\t\t\t\t\tisDragging.current = true;\r\n\r\n\t\t\t\t\tstartScrolling( event );\r\n\r\n\t\t\t\t\tif ( onDragStart ) {\r\n\t\t\t\t\t\tonDragStart();\r\n\t\t\t\t\t}\r\n\t\t\t\t} );\r\n\t\t\t} }\r\n\t\t\tonDragOver={ scrollOnDragOver }\r\n\t\t\tonDragEnd={ () => {\r\n\t\t\t\tstopDraggingBlocks();\r\n\t\t\t\tisDragging.current = false;\r\n\r\n\t\t\t\tstopScrolling();\r\n\r\n\t\t\t\tif ( onDragEnd ) {\r\n\t\t\t\t\tonDragEnd();\r\n\t\t\t\t}\r\n\t\t\t} }\r\n\t\t\t__experimentalDragComponent={\r\n\t\t\t\t// Check against `undefined` so that `null` can be used to disable\r\n\t\t\t\t// the default drag component.\r\n\t\t\t\tdragComponent !== undefined ? (\r\n\t\t\t\t\tdragComponent\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<BlockDraggableChip\r\n\t\t\t\t\t\tcount={ clientIds.length }\r\n\t\t\t\t\t\ticon={ icon }\r\n\t\t\t\t\t\tfadeWhenDisabled\r\n\t\t\t\t\t/>\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t\telementId={ elementId }\r\n\t\t>\r\n\t\t\t{ ( { onDraggableStart, onDraggableEnd } ) => {\r\n\t\t\t\treturn children( {\r\n\t\t\t\t\tdraggable: true,\r\n\t\t\t\t\tonDragStart: onDraggableStart,\r\n\t\t\t\t\tonDragEnd: onDraggableEnd,\r\n\t\t\t\t} );\r\n\t\t\t} }\r\n\t\t</Draggable>\r\n\t);\r\n};\r\n\r\nexport default BlockDraggable;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { getScrollContainer } from '@wordpress/dom';\r\nimport { useCallback, useEffect, useRef } from '@wordpress/element';\r\n\r\nconst SCROLL_INACTIVE_DISTANCE_PX = 50;\r\nconst SCROLL_INTERVAL_MS = 25;\r\nconst PIXELS_PER_SECOND_PER_PERCENTAGE = 1000;\r\nconst VELOCITY_MULTIPLIER =\r\n\tPIXELS_PER_SECOND_PER_PERCENTAGE * ( SCROLL_INTERVAL_MS / 1000 );\r\n\r\n/**\r\n * React hook that scrolls the scroll container when a block is being dragged.\r\n *\r\n * @return {Function[]} `startScrolling`, `scrollOnDragOver`, `stopScrolling`\r\n *                      functions to be called in `onDragStart`, `onDragOver`\r\n *                      and `onDragEnd` events respectively.\r\n */\r\nexport default function useScrollWhenDragging() {\r\n\tconst dragStartY = useRef( null );\r\n\tconst velocityY = useRef( null );\r\n\tconst scrollParentY = useRef( null );\r\n\tconst scrollEditorInterval = useRef( null );\r\n\r\n\t// Clear interval when unmounting.\r\n\tuseEffect(\r\n\t\t() => () => {\r\n\t\t\tif ( scrollEditorInterval.current ) {\r\n\t\t\t\tclearInterval( scrollEditorInterval.current );\r\n\t\t\t\tscrollEditorInterval.current = null;\r\n\t\t\t}\r\n\t\t},\r\n\t\t[]\r\n\t);\r\n\r\n\tconst startScrolling = useCallback( ( event ) => {\r\n\t\tdragStartY.current = event.clientY;\r\n\r\n\t\t// Find nearest parent(s) to scroll.\r\n\t\tscrollParentY.current = getScrollContainer( event.target );\r\n\r\n\t\tscrollEditorInterval.current = setInterval( () => {\r\n\t\t\tif ( scrollParentY.current && velocityY.current ) {\r\n\t\t\t\tconst newTop =\r\n\t\t\t\t\tscrollParentY.current.scrollTop + velocityY.current;\r\n\r\n\t\t\t\t// Setting `behavior: 'smooth'` as a scroll property seems to hurt performance.\r\n\t\t\t\t// Better to use a small scroll interval.\r\n\t\t\t\tscrollParentY.current.scroll( {\r\n\t\t\t\t\ttop: newTop,\r\n\t\t\t\t} );\r\n\t\t\t}\r\n\t\t}, SCROLL_INTERVAL_MS );\r\n\t}, [] );\r\n\r\n\tconst scrollOnDragOver = useCallback( ( event ) => {\r\n\t\tif ( ! scrollParentY.current ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst scrollParentHeight = scrollParentY.current.offsetHeight;\r\n\t\tconst offsetDragStartPosition =\r\n\t\t\tdragStartY.current - scrollParentY.current.offsetTop;\r\n\t\tconst offsetDragPosition =\r\n\t\t\tevent.clientY - scrollParentY.current.offsetTop;\r\n\r\n\t\tif ( event.clientY > offsetDragStartPosition ) {\r\n\t\t\t// User is dragging downwards.\r\n\t\t\tconst moveableDistance = Math.max(\r\n\t\t\t\tscrollParentHeight -\r\n\t\t\t\t\toffsetDragStartPosition -\r\n\t\t\t\t\tSCROLL_INACTIVE_DISTANCE_PX,\r\n\t\t\t\t0\r\n\t\t\t);\r\n\t\t\tconst dragDistance = Math.max(\r\n\t\t\t\toffsetDragPosition -\r\n\t\t\t\t\toffsetDragStartPosition -\r\n\t\t\t\t\tSCROLL_INACTIVE_DISTANCE_PX,\r\n\t\t\t\t0\r\n\t\t\t);\r\n\t\t\tconst distancePercentage =\r\n\t\t\t\tmoveableDistance === 0 || dragDistance === 0\r\n\t\t\t\t\t? 0\r\n\t\t\t\t\t: dragDistance / moveableDistance;\r\n\t\t\tvelocityY.current = VELOCITY_MULTIPLIER * distancePercentage;\r\n\t\t} else if ( event.clientY < offsetDragStartPosition ) {\r\n\t\t\t// User is dragging upwards.\r\n\t\t\tconst moveableDistance = Math.max(\r\n\t\t\t\toffsetDragStartPosition - SCROLL_INACTIVE_DISTANCE_PX,\r\n\t\t\t\t0\r\n\t\t\t);\r\n\t\t\tconst dragDistance = Math.max(\r\n\t\t\t\toffsetDragStartPosition -\r\n\t\t\t\t\toffsetDragPosition -\r\n\t\t\t\t\tSCROLL_INACTIVE_DISTANCE_PX,\r\n\t\t\t\t0\r\n\t\t\t);\r\n\t\t\tconst distancePercentage =\r\n\t\t\t\tmoveableDistance === 0 || dragDistance === 0\r\n\t\t\t\t\t? 0\r\n\t\t\t\t\t: dragDistance / moveableDistance;\r\n\t\t\tvelocityY.current = -VELOCITY_MULTIPLIER * distancePercentage;\r\n\t\t} else {\r\n\t\t\tvelocityY.current = 0;\r\n\t\t}\r\n\t}, [] );\r\n\r\n\tconst stopScrolling = () => {\r\n\t\tdragStartY.current = null;\r\n\t\tscrollParentY.current = null;\r\n\r\n\t\tif ( scrollEditorInterval.current ) {\r\n\t\t\tclearInterval( scrollEditorInterval.current );\r\n\t\t\tscrollEditorInterval.current = null;\r\n\t\t}\r\n\t};\r\n\r\n\treturn [ startScrolling, scrollOnDragOver, stopScrolling ];\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst chevronUp = (\r\n\t<SVG viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n\t\t<Path d=\"M6.5 12.4L12 8l5.5 4.4-.9 1.2L12 10l-4.5 3.6-1-1.2z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default chevronUp;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst chevronDown = (\r\n\t<SVG viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n\t\t<Path d=\"M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default chevronDown;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { __, sprintf, isRTL } from '@wordpress/i18n';\r\n\r\nconst getMovementDirection = ( moveDirection, orientation ) => {\r\n\tif ( moveDirection === 'up' ) {\r\n\t\tif ( orientation === 'horizontal' ) {\r\n\t\t\treturn isRTL() ? 'right' : 'left';\r\n\t\t}\r\n\t\treturn 'up';\r\n\t} else if ( moveDirection === 'down' ) {\r\n\t\tif ( orientation === 'horizontal' ) {\r\n\t\t\treturn isRTL() ? 'left' : 'right';\r\n\t\t}\r\n\t\treturn 'down';\r\n\t}\r\n\treturn null;\r\n};\r\n\r\n/**\r\n * Return a label for the block movement controls depending on block position.\r\n *\r\n * @param {number}  selectedCount Number of blocks selected.\r\n * @param {string}  type          Block type - in the case of a single block, should\r\n *                                define its 'type'. I.e. 'Text', 'Heading', 'Image' etc.\r\n * @param {number}  firstIndex    The index (position - 1) of the first block selected.\r\n * @param {boolean} isFirst       This is the first block.\r\n * @param {boolean} isLast        This is the last block.\r\n * @param {number}  dir           Direction of movement (> 0 is considered to be going\r\n *                                down, < 0 is up).\r\n * @param {string}  orientation   The orientation of the block movers, vertical or\r\n *                                horizontal.\r\n *\r\n * @return {string | undefined} Label for the block movement controls.\r\n */\r\nexport function getBlockMoverDescription(\r\n\tselectedCount,\r\n\ttype,\r\n\tfirstIndex,\r\n\tisFirst,\r\n\tisLast,\r\n\tdir,\r\n\torientation\r\n) {\r\n\tconst position = firstIndex + 1;\r\n\r\n\tif ( selectedCount > 1 ) {\r\n\t\treturn getMultiBlockMoverDescription(\r\n\t\t\tselectedCount,\r\n\t\t\tfirstIndex,\r\n\t\t\tisFirst,\r\n\t\t\tisLast,\r\n\t\t\tdir,\r\n\t\t\torientation\r\n\t\t);\r\n\t}\r\n\r\n\tif ( isFirst && isLast ) {\r\n\t\treturn sprintf(\r\n\t\t\t// translators: %s: Type of block (i.e. Text, Image etc)\r\n\t\t\t__( 'Block %s is the only block, and cannot be moved' ),\r\n\t\t\ttype\r\n\t\t);\r\n\t}\r\n\r\n\tif ( dir > 0 && ! isLast ) {\r\n\t\t// Moving down.\r\n\t\tconst movementDirection = getMovementDirection( 'down', orientation );\r\n\r\n\t\tif ( movementDirection === 'down' ) {\r\n\t\t\treturn sprintf(\r\n\t\t\t\t// translators: 1: Type of block (i.e. Text, Image etc), 2: Position of selected block, 3: New position\r\n\t\t\t\t__(\r\n\t\t\t\t\t'Move %1$s block from position %2$d down to position %3$d'\r\n\t\t\t\t),\r\n\t\t\t\ttype,\r\n\t\t\t\tposition,\r\n\t\t\t\tposition + 1\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tif ( movementDirection === 'left' ) {\r\n\t\t\treturn sprintf(\r\n\t\t\t\t// translators: 1: Type of block (i.e. Text, Image etc), 2: Position of selected block, 3: New position\r\n\t\t\t\t__(\r\n\t\t\t\t\t'Move %1$s block from position %2$d left to position %3$d'\r\n\t\t\t\t),\r\n\t\t\t\ttype,\r\n\t\t\t\tposition,\r\n\t\t\t\tposition + 1\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tif ( movementDirection === 'right' ) {\r\n\t\t\treturn sprintf(\r\n\t\t\t\t// translators: 1: Type of block (i.e. Text, Image etc), 2: Position of selected block, 3: New position\r\n\t\t\t\t__(\r\n\t\t\t\t\t'Move %1$s block from position %2$d right to position %3$d'\r\n\t\t\t\t),\r\n\t\t\t\ttype,\r\n\t\t\t\tposition,\r\n\t\t\t\tposition + 1\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\tif ( dir > 0 && isLast ) {\r\n\t\t// Moving down, and is the last item.\r\n\t\tconst movementDirection = getMovementDirection( 'down', orientation );\r\n\r\n\t\tif ( movementDirection === 'down' ) {\r\n\t\t\treturn sprintf(\r\n\t\t\t\t// translators: 1: Type of block (i.e. Text, Image etc)\r\n\t\t\t\t__(\r\n\t\t\t\t\t'Block %1$s is at the end of the content and cant be moved down'\r\n\t\t\t\t),\r\n\t\t\t\ttype\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tif ( movementDirection === 'left' ) {\r\n\t\t\treturn sprintf(\r\n\t\t\t\t// translators: 1: Type of block (i.e. Text, Image etc)\r\n\t\t\t\t__(\r\n\t\t\t\t\t'Block %1$s is at the end of the content and cant be moved left'\r\n\t\t\t\t),\r\n\t\t\t\ttype\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tif ( movementDirection === 'right' ) {\r\n\t\t\treturn sprintf(\r\n\t\t\t\t// translators: 1: Type of block (i.e. Text, Image etc)\r\n\t\t\t\t__(\r\n\t\t\t\t\t'Block %1$s is at the end of the content and cant be moved right'\r\n\t\t\t\t),\r\n\t\t\t\ttype\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\tif ( dir < 0 && ! isFirst ) {\r\n\t\t// Moving up.\r\n\t\tconst movementDirection = getMovementDirection( 'up', orientation );\r\n\r\n\t\tif ( movementDirection === 'up' ) {\r\n\t\t\treturn sprintf(\r\n\t\t\t\t// translators: 1: Type of block (i.e. Text, Image etc), 2: Position of selected block, 3: New position\r\n\t\t\t\t__( 'Move %1$s block from position %2$d up to position %3$d' ),\r\n\t\t\t\ttype,\r\n\t\t\t\tposition,\r\n\t\t\t\tposition - 1\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tif ( movementDirection === 'left' ) {\r\n\t\t\treturn sprintf(\r\n\t\t\t\t// translators: 1: Type of block (i.e. Text, Image etc), 2: Position of selected block, 3: New position\r\n\t\t\t\t__(\r\n\t\t\t\t\t'Move %1$s block from position %2$d left to position %3$d'\r\n\t\t\t\t),\r\n\t\t\t\ttype,\r\n\t\t\t\tposition,\r\n\t\t\t\tposition - 1\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tif ( movementDirection === 'right' ) {\r\n\t\t\treturn sprintf(\r\n\t\t\t\t// translators: 1: Type of block (i.e. Text, Image etc), 2: Position of selected block, 3: New position\r\n\t\t\t\t__(\r\n\t\t\t\t\t'Move %1$s block from position %2$d right to position %3$d'\r\n\t\t\t\t),\r\n\t\t\t\ttype,\r\n\t\t\t\tposition,\r\n\t\t\t\tposition - 1\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\tif ( dir < 0 && isFirst ) {\r\n\t\t// Moving up, and is the first item.\r\n\t\tconst movementDirection = getMovementDirection( 'up', orientation );\r\n\r\n\t\tif ( movementDirection === 'up' ) {\r\n\t\t\treturn sprintf(\r\n\t\t\t\t// translators: 1: Type of block (i.e. Text, Image etc)\r\n\t\t\t\t__(\r\n\t\t\t\t\t'Block %1$s is at the beginning of the content and cant be moved up'\r\n\t\t\t\t),\r\n\t\t\t\ttype\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tif ( movementDirection === 'left' ) {\r\n\t\t\treturn sprintf(\r\n\t\t\t\t// translators: 1: Type of block (i.e. Text, Image etc)\r\n\t\t\t\t__(\r\n\t\t\t\t\t'Block %1$s is at the beginning of the content and cant be moved left'\r\n\t\t\t\t),\r\n\t\t\t\ttype\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tif ( movementDirection === 'right' ) {\r\n\t\t\treturn sprintf(\r\n\t\t\t\t// translators: 1: Type of block (i.e. Text, Image etc)\r\n\t\t\t\t__(\r\n\t\t\t\t\t'Block %1$s is at the beginning of the content and cant be moved right'\r\n\t\t\t\t),\r\n\t\t\t\ttype\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/**\r\n * Return a label for the block movement controls depending on block position.\r\n *\r\n * @param {number}  selectedCount Number of blocks selected.\r\n * @param {number}  firstIndex    The index (position - 1) of the first block selected.\r\n * @param {boolean} isFirst       This is the first block.\r\n * @param {boolean} isLast        This is the last block.\r\n * @param {number}  dir           Direction of movement (> 0 is considered to be going\r\n *                                down, < 0 is up).\r\n * @param {string}  orientation   The orientation of the block movers, vertical or\r\n *                                horizontal.\r\n *\r\n * @return {string | undefined} Label for the block movement controls.\r\n */\r\nexport function getMultiBlockMoverDescription(\r\n\tselectedCount,\r\n\tfirstIndex,\r\n\tisFirst,\r\n\tisLast,\r\n\tdir,\r\n\torientation\r\n) {\r\n\tconst position = firstIndex + 1;\r\n\r\n\tif ( isFirst && isLast ) {\r\n\t\t// All blocks are selected\r\n\t\treturn __( 'All blocks are selected, and cannot be moved' );\r\n\t}\r\n\r\n\tif ( dir > 0 && ! isLast ) {\r\n\t\t// moving down\r\n\t\tconst movementDirection = getMovementDirection( 'down', orientation );\r\n\r\n\t\tif ( movementDirection === 'down' ) {\r\n\t\t\treturn sprintf(\r\n\t\t\t\t// translators: 1: Number of selected blocks, 2: Position of selected blocks\r\n\t\t\t\t__( 'Move %1$d blocks from position %2$d down by one place' ),\r\n\t\t\t\tselectedCount,\r\n\t\t\t\tposition\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tif ( movementDirection === 'left' ) {\r\n\t\t\treturn sprintf(\r\n\t\t\t\t// translators: 1: Number of selected blocks, 2: Position of selected blocks\r\n\t\t\t\t__( 'Move %1$d blocks from position %2$d left by one place' ),\r\n\t\t\t\tselectedCount,\r\n\t\t\t\tposition\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tif ( movementDirection === 'right' ) {\r\n\t\t\treturn sprintf(\r\n\t\t\t\t// translators: 1: Number of selected blocks, 2: Position of selected blocks\r\n\t\t\t\t__( 'Move %1$d blocks from position %2$d right by one place' ),\r\n\t\t\t\tselectedCount,\r\n\t\t\t\tposition\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\tif ( dir > 0 && isLast ) {\r\n\t\t// moving down, and the selected blocks are the last item\r\n\t\tconst movementDirection = getMovementDirection( 'down', orientation );\r\n\r\n\t\tif ( movementDirection === 'down' ) {\r\n\t\t\treturn __(\r\n\t\t\t\t'Blocks cannot be moved down as they are already at the bottom'\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tif ( movementDirection === 'left' ) {\r\n\t\t\treturn __(\r\n\t\t\t\t'Blocks cannot be moved left as they are already are at the leftmost position'\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tif ( movementDirection === 'right' ) {\r\n\t\t\treturn __(\r\n\t\t\t\t'Blocks cannot be moved right as they are already are at the rightmost position'\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\tif ( dir < 0 && ! isFirst ) {\r\n\t\t// moving up\r\n\t\tconst movementDirection = getMovementDirection( 'up', orientation );\r\n\r\n\t\tif ( movementDirection === 'up' ) {\r\n\t\t\treturn sprintf(\r\n\t\t\t\t// translators: 1: Number of selected blocks, 2: Position of selected blocks\r\n\t\t\t\t__( 'Move %1$d blocks from position %2$d up by one place' ),\r\n\t\t\t\tselectedCount,\r\n\t\t\t\tposition\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tif ( movementDirection === 'left' ) {\r\n\t\t\treturn sprintf(\r\n\t\t\t\t// translators: 1: Number of selected blocks, 2: Position of selected blocks\r\n\t\t\t\t__( 'Move %1$d blocks from position %2$d left by one place' ),\r\n\t\t\t\tselectedCount,\r\n\t\t\t\tposition\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tif ( movementDirection === 'right' ) {\r\n\t\t\treturn sprintf(\r\n\t\t\t\t// translators: 1: Number of selected blocks, 2: Position of selected blocks\r\n\t\t\t\t__( 'Move %1$d blocks from position %2$d right by one place' ),\r\n\t\t\t\tselectedCount,\r\n\t\t\t\tposition\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\tif ( dir < 0 && isFirst ) {\r\n\t\t// moving up, and the selected blocks are the first item\r\n\t\tconst movementDirection = getMovementDirection( 'up', orientation );\r\n\r\n\t\tif ( movementDirection === 'up' ) {\r\n\t\t\treturn __(\r\n\t\t\t\t'Blocks cannot be moved up as they are already at the top'\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tif ( movementDirection === 'left' ) {\r\n\t\t\treturn __(\r\n\t\t\t\t'Blocks cannot be moved left as they are already are at the leftmost position'\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tif ( movementDirection === 'right' ) {\r\n\t\t\treturn __(\r\n\t\t\t\t'Blocks cannot be moved right as they are already are at the rightmost position'\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n}\r\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { getBlockType } from '@wordpress/blocks';\nimport { Button, VisuallyHidden } from '@wordpress/components';\nimport { useInstanceId } from '@wordpress/compose';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { forwardRef } from '@wordpress/element';\nimport { __, isRTL } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport {\n\tchevronLeft,\n\tchevronRight,\n\tchevronUp,\n\tchevronDown,\n} from '@wordpress/icons';\nimport { getBlockMoverDescription } from './mover-description';\nimport { store as blockEditorStore } from '../../store';\n\nconst getArrowIcon = ( direction, orientation ) => {\n\tif ( direction === 'up' ) {\n\t\tif ( orientation === 'horizontal' ) {\n\t\t\treturn isRTL() ? chevronRight : chevronLeft;\n\t\t}\n\t\treturn chevronUp;\n\t} else if ( direction === 'down' ) {\n\t\tif ( orientation === 'horizontal' ) {\n\t\t\treturn isRTL() ? chevronLeft : chevronRight;\n\t\t}\n\t\treturn chevronDown;\n\t}\n\treturn null;\n};\n\nconst getMovementDirectionLabel = ( moveDirection, orientation ) => {\n\tif ( moveDirection === 'up' ) {\n\t\tif ( orientation === 'horizontal' ) {\n\t\t\treturn isRTL() ? __( 'Move right' ) : __( 'Move left' );\n\t\t}\n\t\treturn __( 'Move up' );\n\t} else if ( moveDirection === 'down' ) {\n\t\tif ( orientation === 'horizontal' ) {\n\t\t\treturn isRTL() ? __( 'Move left' ) : __( 'Move right' );\n\t\t}\n\t\treturn __( 'Move down' );\n\t}\n\treturn null;\n};\n\nconst BlockMoverButton = forwardRef(\n\t(\n\t\t{ clientIds, direction, orientation: moverOrientation, ...props },\n\t\tref\n\t) => {\n\t\tconst instanceId = useInstanceId( BlockMoverButton );\n\t\tconst normalizedClientIds = Array.isArray( clientIds )\n\t\t\t? clientIds\n\t\t\t: [ clientIds ];\n\t\tconst blocksCount = normalizedClientIds.length;\n\t\tconst { disabled } = props;\n\n\t\tconst {\n\t\t\tblockType,\n\t\t\tisDisabled,\n\t\t\trootClientId,\n\t\t\tisFirst,\n\t\t\tisLast,\n\t\t\tfirstIndex,\n\t\t\torientation = 'vertical',\n\t\t} = useSelect(\n\t\t\t( select ) => {\n\t\t\t\tconst {\n\t\t\t\t\tgetBlockIndex,\n\t\t\t\t\tgetBlockRootClientId,\n\t\t\t\t\tgetBlockOrder,\n\t\t\t\t\tgetBlock,\n\t\t\t\t\tgetBlockListSettings,\n\t\t\t\t} = select( blockEditorStore );\n\t\t\t\tconst firstClientId = normalizedClientIds[ 0 ];\n\t\t\t\tconst blockRootClientId = getBlockRootClientId( firstClientId );\n\t\t\t\tconst firstBlockIndex = getBlockIndex( firstClientId );\n\t\t\t\tconst lastBlockIndex = getBlockIndex(\n\t\t\t\t\tnormalizedClientIds[ normalizedClientIds.length - 1 ]\n\t\t\t\t);\n\t\t\t\tconst blockOrder = getBlockOrder( blockRootClientId );\n\t\t\t\tconst block = getBlock( firstClientId );\n\t\t\t\tconst isFirstBlock = firstBlockIndex === 0;\n\t\t\t\tconst isLastBlock = lastBlockIndex === blockOrder.length - 1;\n\t\t\t\tconst { orientation: blockListOrientation } =\n\t\t\t\t\tgetBlockListSettings( blockRootClientId ) || {};\n\n\t\t\t\treturn {\n\t\t\t\t\tblockType: block ? getBlockType( block.name ) : null,\n\t\t\t\t\tisDisabled:\n\t\t\t\t\t\tdisabled ||\n\t\t\t\t\t\t( direction === 'up' ? isFirstBlock : isLastBlock ),\n\t\t\t\t\trootClientId: blockRootClientId,\n\t\t\t\t\tfirstIndex: firstBlockIndex,\n\t\t\t\t\tisFirst: isFirstBlock,\n\t\t\t\t\tisLast: isLastBlock,\n\t\t\t\t\torientation: moverOrientation || blockListOrientation,\n\t\t\t\t};\n\t\t\t},\n\t\t\t[ clientIds, direction ]\n\t\t);\n\n\t\tconst { moveBlocksDown, moveBlocksUp } =\n\t\t\tuseDispatch( blockEditorStore );\n\t\tconst moverFunction =\n\t\t\tdirection === 'up' ? moveBlocksUp : moveBlocksDown;\n\n\t\tconst onClick = ( event ) => {\n\t\t\tmoverFunction( clientIds, rootClientId );\n\t\t\tif ( props.onClick ) {\n\t\t\t\tprops.onClick( event );\n\t\t\t}\n\t\t};\n\n\t\tconst descriptionId = `block-editor-block-mover-button__description-${ instanceId }`;\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<Button\n\t\t\t\t\tref={ ref }\n\t\t\t\t\tclassName={ classnames(\n\t\t\t\t\t\t'block-editor-block-mover-button',\n\t\t\t\t\t\t`is-${ direction }-button`\n\t\t\t\t\t) }\n\t\t\t\t\ticon={ getArrowIcon( direction, orientation ) }\n\t\t\t\t\tlabel={ getMovementDirectionLabel(\n\t\t\t\t\t\tdirection,\n\t\t\t\t\t\torientation\n\t\t\t\t\t) }\n\t\t\t\t\taria-describedby={ descriptionId }\n\t\t\t\t\t{ ...props }\n\t\t\t\t\tonClick={ isDisabled ? null : onClick }\n\t\t\t\t\tdisabled={ isDisabled }\n\t\t\t\t\t__experimentalIsFocusable\n\t\t\t\t/>\n\t\t\t\t<VisuallyHidden id={ descriptionId }>\n\t\t\t\t\t{ getBlockMoverDescription(\n\t\t\t\t\t\tblocksCount,\n\t\t\t\t\t\tblockType && blockType.title,\n\t\t\t\t\t\tfirstIndex,\n\t\t\t\t\t\tisFirst,\n\t\t\t\t\t\tisLast,\n\t\t\t\t\t\tdirection === 'up' ? -1 : 1,\n\t\t\t\t\t\torientation\n\t\t\t\t\t) }\n\t\t\t\t</VisuallyHidden>\n\t\t\t</>\n\t\t);\n\t}\n);\n\nexport const BlockMoverUpButton = forwardRef( ( props, ref ) => {\n\treturn <BlockMoverButton direction=\"up\" ref={ ref } { ...props } />;\n} );\n\nexport const BlockMoverDownButton = forwardRef( ( props, ref ) => {\n\treturn <BlockMoverButton direction=\"down\" ref={ ref } { ...props } />;\n} );\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\n\nimport { dragHandle } from '@wordpress/icons';\nimport { ToolbarGroup, ToolbarItem, Button } from '@wordpress/components';\nimport { useSelect } from '@wordpress/data';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport BlockDraggable from '../block-draggable';\nimport { BlockMoverUpButton, BlockMoverDownButton } from './button';\nimport { store as blockEditorStore } from '../../store';\n\nfunction BlockMover( {\n\tclientIds,\n\thideDragHandle,\n\tisBlockMoverUpButtonDisabled,\n\tisBlockMoverDownButtonDisabled,\n} ) {\n\tconst { canMove, rootClientId, isFirst, isLast, orientation } = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tgetBlockIndex,\n\t\t\t\tgetBlockListSettings,\n\t\t\t\tcanMoveBlocks,\n\t\t\t\tgetBlockOrder,\n\t\t\t\tgetBlockRootClientId,\n\t\t\t} = select( blockEditorStore );\n\t\t\tconst normalizedClientIds = Array.isArray( clientIds )\n\t\t\t\t? clientIds\n\t\t\t\t: [ clientIds ];\n\t\t\tconst firstClientId = normalizedClientIds[ 0 ];\n\t\t\tconst _rootClientId = getBlockRootClientId( firstClientId );\n\t\t\tconst firstIndex = getBlockIndex( firstClientId );\n\t\t\tconst lastIndex = getBlockIndex(\n\t\t\t\tnormalizedClientIds[ normalizedClientIds.length - 1 ]\n\t\t\t);\n\t\t\tconst blockOrder = getBlockOrder( _rootClientId );\n\n\t\t\treturn {\n\t\t\t\tcanMove: canMoveBlocks( clientIds, _rootClientId ),\n\t\t\t\trootClientId: _rootClientId,\n\t\t\t\tisFirst: firstIndex === 0,\n\t\t\t\tisLast: lastIndex === blockOrder.length - 1,\n\t\t\t\torientation: getBlockListSettings( _rootClientId )?.orientation,\n\t\t\t};\n\t\t},\n\t\t[ clientIds ]\n\t);\n\n\tif ( ! canMove || ( isFirst && isLast && ! rootClientId ) ) {\n\t\treturn null;\n\t}\n\n\tconst dragHandleLabel = __( 'Drag' );\n\n\treturn (\n\t\t<ToolbarGroup\n\t\t\tclassName={ classnames( 'block-editor-block-mover', {\n\t\t\t\t'is-horizontal': orientation === 'horizontal',\n\t\t\t} ) }\n\t\t>\n\t\t\t{ ! hideDragHandle && (\n\t\t\t\t<BlockDraggable clientIds={ clientIds } fadeWhenDisabled>\n\t\t\t\t\t{ ( draggableProps ) => (\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\ticon={ dragHandle }\n\t\t\t\t\t\t\tclassName=\"block-editor-block-mover__drag-handle\"\n\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\tlabel={ dragHandleLabel }\n\t\t\t\t\t\t\t// Should not be able to tab to drag handle as this\n\t\t\t\t\t\t\t// button can only be used with a pointer device.\n\t\t\t\t\t\t\ttabIndex=\"-1\"\n\t\t\t\t\t\t\t{ ...draggableProps }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</BlockDraggable>\n\t\t\t) }\n\t\t\t<div className=\"block-editor-block-mover__move-button-container\">\n\t\t\t\t<ToolbarItem>\n\t\t\t\t\t{ ( itemProps ) => (\n\t\t\t\t\t\t<BlockMoverUpButton\n\t\t\t\t\t\t\tdisabled={ isBlockMoverUpButtonDisabled }\n\t\t\t\t\t\t\tclientIds={ clientIds }\n\t\t\t\t\t\t\t{ ...itemProps }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</ToolbarItem>\n\t\t\t\t<ToolbarItem>\n\t\t\t\t\t{ ( itemProps ) => (\n\t\t\t\t\t\t<BlockMoverDownButton\n\t\t\t\t\t\t\tdisabled={ isBlockMoverDownButtonDisabled }\n\t\t\t\t\t\t\tclientIds={ clientIds }\n\t\t\t\t\t\t\t{ ...itemProps }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</ToolbarItem>\n\t\t\t</div>\n\t\t</ToolbarGroup>\n\t);\n}\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/block-mover/README.md\n */\nexport default BlockMover;\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useSelect, useDispatch } from '@wordpress/data';\r\nimport { useState, useRef, useEffect } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as blockEditorStore } from '../../store';\r\n\r\nconst { clearTimeout, setTimeout } = window;\r\nconst DEBOUNCE_TIMEOUT = 200;\r\n\r\n/**\r\n * Hook that creates debounced callbacks when the node is hovered or focused.\r\n *\r\n * @param {Object}  props                       Component props.\r\n * @param {Object}  props.ref                   Element reference.\r\n * @param {boolean} props.isFocused             Whether the component has current focus.\r\n * @param {number}  props.highlightParent       Whether to highlight the parent block. It defaults in highlighting the selected block.\r\n * @param {number}  [props.debounceTimeout=250] Debounce timeout in milliseconds.\r\n */\r\nfunction useDebouncedShowGestures( {\r\n\tref,\r\n\tisFocused,\r\n\thighlightParent,\r\n\tdebounceTimeout = DEBOUNCE_TIMEOUT,\r\n} ) {\r\n\tconst { getSelectedBlockClientId, getBlockRootClientId } =\r\n\t\tuseSelect( blockEditorStore );\r\n\tconst { toggleBlockHighlight } = useDispatch( blockEditorStore );\r\n\tconst timeoutRef = useRef();\r\n\tconst isDistractionFree = useSelect(\r\n\t\t( select ) =>\r\n\t\t\tselect( blockEditorStore ).getSettings().isDistractionFree,\r\n\t\t[]\r\n\t);\r\n\tconst handleOnChange = ( nextIsFocused ) => {\r\n\t\tif ( nextIsFocused && isDistractionFree ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst selectedBlockClientId = getSelectedBlockClientId();\r\n\t\tconst clientId = highlightParent\r\n\t\t\t? getBlockRootClientId( selectedBlockClientId )\r\n\t\t\t: selectedBlockClientId;\r\n\t\ttoggleBlockHighlight( clientId, nextIsFocused );\r\n\t};\r\n\r\n\tconst getIsHovered = () => {\r\n\t\treturn ref?.current && ref.current.matches( ':hover' );\r\n\t};\r\n\r\n\tconst shouldHideGestures = () => {\r\n\t\tconst isHovered = getIsHovered();\r\n\t\treturn ! isFocused && ! isHovered;\r\n\t};\r\n\r\n\tconst clearTimeoutRef = () => {\r\n\t\tconst timeout = timeoutRef.current;\r\n\r\n\t\tif ( timeout && clearTimeout ) {\r\n\t\t\tclearTimeout( timeout );\r\n\t\t}\r\n\t};\r\n\r\n\tconst debouncedShowGestures = ( event ) => {\r\n\t\tif ( event ) {\r\n\t\t\tevent.stopPropagation();\r\n\t\t}\r\n\r\n\t\tclearTimeoutRef();\r\n\t\thandleOnChange( true );\r\n\t};\r\n\r\n\tconst debouncedHideGestures = ( event ) => {\r\n\t\tif ( event ) {\r\n\t\t\tevent.stopPropagation();\r\n\t\t}\r\n\r\n\t\tclearTimeoutRef();\r\n\r\n\t\ttimeoutRef.current = setTimeout( () => {\r\n\t\t\tif ( shouldHideGestures() ) {\r\n\t\t\t\thandleOnChange( false );\r\n\t\t\t}\r\n\t\t}, debounceTimeout );\r\n\t};\r\n\r\n\tuseEffect(\r\n\t\t() => () => {\r\n\t\t\t/**\r\n\t\t\t * We need to call the change handler with `isFocused`\r\n\t\t\t * set to false on unmount because we also clear the\r\n\t\t\t * timeout that would handle that.\r\n\t\t\t */\r\n\t\t\thandleOnChange( false );\r\n\t\t\tclearTimeoutRef();\r\n\t\t},\r\n\t\t[]\r\n\t);\r\n\r\n\treturn {\r\n\t\tdebouncedShowGestures,\r\n\t\tdebouncedHideGestures,\r\n\t};\r\n}\r\n\r\n/**\r\n * Hook that provides gesture events for DOM elements\r\n * that interact with the isFocused state.\r\n *\r\n * @param {Object} props                         Component props.\r\n * @param {Object} props.ref                     Element reference.\r\n * @param {number} [props.highlightParent=false] Whether to highlight the parent block. It defaults to highlighting the selected block.\r\n * @param {number} [props.debounceTimeout=250]   Debounce timeout in milliseconds.\r\n */\r\nexport function useShowHoveredOrFocusedGestures( {\r\n\tref,\r\n\thighlightParent = false,\r\n\tdebounceTimeout = DEBOUNCE_TIMEOUT,\r\n} ) {\r\n\tconst [ isFocused, setIsFocused ] = useState( false );\r\n\tconst { debouncedShowGestures, debouncedHideGestures } =\r\n\t\tuseDebouncedShowGestures( {\r\n\t\t\tref,\r\n\t\t\tdebounceTimeout,\r\n\t\t\tisFocused,\r\n\t\t\thighlightParent,\r\n\t\t} );\r\n\r\n\tconst registerRef = useRef( false );\r\n\r\n\tconst isFocusedWithin = () => {\r\n\t\treturn (\r\n\t\t\tref?.current &&\r\n\t\t\tref.current.contains( ref.current.ownerDocument.activeElement )\r\n\t\t);\r\n\t};\r\n\r\n\tuseEffect( () => {\r\n\t\tconst node = ref.current;\r\n\r\n\t\tconst handleOnFocus = () => {\r\n\t\t\tif ( isFocusedWithin() ) {\r\n\t\t\t\tsetIsFocused( true );\r\n\t\t\t\tdebouncedShowGestures();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tconst handleOnBlur = () => {\r\n\t\t\tif ( ! isFocusedWithin() ) {\r\n\t\t\t\tsetIsFocused( false );\r\n\t\t\t\tdebouncedHideGestures();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Events are added via DOM events (vs. React synthetic events),\r\n\t\t * as the child React components swallow mouse events.\r\n\t\t */\r\n\t\tif ( node && ! registerRef.current ) {\r\n\t\t\tnode.addEventListener( 'focus', handleOnFocus, true );\r\n\t\t\tnode.addEventListener( 'blur', handleOnBlur, true );\r\n\t\t\tregisterRef.current = true;\r\n\t\t}\r\n\r\n\t\treturn () => {\r\n\t\t\tif ( node ) {\r\n\t\t\t\tnode.removeEventListener( 'focus', handleOnFocus );\r\n\t\t\t\tnode.removeEventListener( 'blur', handleOnBlur );\r\n\t\t\t}\r\n\t\t};\r\n\t}, [\r\n\t\tref,\r\n\t\tregisterRef,\r\n\t\tsetIsFocused,\r\n\t\tdebouncedShowGestures,\r\n\t\tdebouncedHideGestures,\r\n\t] );\r\n\r\n\treturn {\r\n\t\tonMouseMove: debouncedShowGestures,\r\n\t\tonMouseLeave: debouncedHideGestures,\r\n\t};\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { getBlockType, store as blocksStore } from '@wordpress/blocks';\r\nimport { ToolbarButton } from '@wordpress/components';\r\nimport { useSelect, useDispatch } from '@wordpress/data';\r\nimport { __, sprintf } from '@wordpress/i18n';\r\nimport { useRef } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport useBlockDisplayInformation from '../use-block-display-information';\r\nimport BlockIcon from '../block-icon';\r\nimport { useShowHoveredOrFocusedGestures } from '../block-toolbar/utils';\r\nimport { store as blockEditorStore } from '../../store';\r\n\r\n/**\r\n * Block parent selector component, displaying the hierarchy of the\r\n * current block selection as a single icon to \"go up\" a level.\r\n *\r\n * @return {Component} Parent block selector.\r\n */\r\nexport default function BlockParentSelector() {\r\n\tconst { selectBlock } = useDispatch( blockEditorStore );\r\n\tconst { firstParentClientId, isVisible } = useSelect( ( select ) => {\r\n\t\tconst {\r\n\t\t\tgetBlockName,\r\n\t\t\tgetBlockParents,\r\n\t\t\tgetSelectedBlockClientId,\r\n\t\t\tgetBlockEditingMode,\r\n\t\t} = select( blockEditorStore );\r\n\t\tconst { hasBlockSupport } = select( blocksStore );\r\n\t\tconst selectedBlockClientId = getSelectedBlockClientId();\r\n\t\tconst parents = getBlockParents( selectedBlockClientId );\r\n\t\tconst _firstParentClientId = parents[ parents.length - 1 ];\r\n\t\tconst parentBlockName = getBlockName( _firstParentClientId );\r\n\t\tconst _parentBlockType = getBlockType( parentBlockName );\r\n\t\treturn {\r\n\t\t\tfirstParentClientId: _firstParentClientId,\r\n\t\t\tisVisible:\r\n\t\t\t\t_firstParentClientId &&\r\n\t\t\t\tgetBlockEditingMode( _firstParentClientId ) === 'default' &&\r\n\t\t\t\thasBlockSupport(\r\n\t\t\t\t\t_parentBlockType,\r\n\t\t\t\t\t'__experimentalParentSelector',\r\n\t\t\t\t\ttrue\r\n\t\t\t\t),\r\n\t\t};\r\n\t}, [] );\r\n\tconst blockInformation = useBlockDisplayInformation( firstParentClientId );\r\n\r\n\t// Allows highlighting the parent block outline when focusing or hovering\r\n\t// the parent block selector within the child.\r\n\tconst nodeRef = useRef();\r\n\tconst showHoveredOrFocusedGestures = useShowHoveredOrFocusedGestures( {\r\n\t\tref: nodeRef,\r\n\t\thighlightParent: true,\r\n\t} );\r\n\r\n\tif ( ! isVisible ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName=\"block-editor-block-parent-selector\"\r\n\t\t\tkey={ firstParentClientId }\r\n\t\t\tref={ nodeRef }\r\n\t\t\t{ ...showHoveredOrFocusedGestures }\r\n\t\t>\r\n\t\t\t<ToolbarButton\r\n\t\t\t\tclassName=\"block-editor-block-parent-selector__button\"\r\n\t\t\t\tonClick={ () => selectBlock( firstParentClientId ) }\r\n\t\t\t\tlabel={ sprintf(\r\n\t\t\t\t\t/* translators: %s: Name of the block's parent. */\r\n\t\t\t\t\t__( 'Select parent block: %s' ),\r\n\t\t\t\t\tblockInformation?.title\r\n\t\t\t\t) }\r\n\t\t\t\tshowTooltip\r\n\t\t\t\ticon={ <BlockIcon icon={ blockInformation?.icon } /> }\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst copy = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path\r\n\t\t\tfillRule=\"evenodd\"\r\n\t\t\tclipRule=\"evenodd\"\r\n\t\t\td=\"M5 4.5h11a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V5a.5.5 0 0 1 .5-.5ZM3 5a2 2 0 0 1 2-2h11a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5Zm17 3v10.75c0 .69-.56 1.25-1.25 1.25H6v1.5h12.75a2.75 2.75 0 0 0 2.75-2.75V8H20Z\"\r\n\t\t/>\r\n\t</SVG>\r\n);\r\n\r\nexport default copy;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { __ } from '@wordpress/i18n';\r\nimport { Popover } from '@wordpress/components';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport BlockPreview from '../block-preview';\r\n\r\nexport default function PreviewBlockPopover( { blocks } ) {\r\n\treturn (\r\n\t\t<div className=\"block-editor-block-switcher__popover__preview__parent\">\r\n\t\t\t<div className=\"block-editor-block-switcher__popover__preview__container\">\r\n\t\t\t\t<Popover\r\n\t\t\t\t\tclassName=\"block-editor-block-switcher__preview__popover\"\r\n\t\t\t\t\tplacement=\"bottom-start\"\r\n\t\t\t\t\tfocusOnMount={ false }\r\n\t\t\t\t>\r\n\t\t\t\t\t<div className=\"block-editor-block-switcher__preview\">\r\n\t\t\t\t\t\t<div className=\"block-editor-block-switcher__preview-title\">\r\n\t\t\t\t\t\t\t{ __( 'Preview' ) }\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<BlockPreview viewportWidth={ 500 } blocks={ blocks } />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Popover>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { MenuItem } from '@wordpress/components';\r\nimport {\r\n\tgetBlockMenuDefaultClassName,\r\n\tcloneBlock,\r\n\tstore as blocksStore,\r\n} from '@wordpress/blocks';\r\nimport { useSelect } from '@wordpress/data';\r\nimport { useState, useMemo } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as blockEditorStore } from '../../store';\r\nimport BlockIcon from '../block-icon';\r\nimport PreviewBlockPopover from './preview-block-popover';\r\n\r\nconst EMPTY_OBJECT = {};\r\n\r\nexport function useBlockVariationTransforms( { clientIds, blocks } ) {\r\n\tconst { activeBlockVariation, blockVariationTransformations } = useSelect(\r\n\t\t( select ) => {\r\n\t\t\tconst {\r\n\t\t\t\tgetBlockRootClientId,\r\n\t\t\t\tgetBlockAttributes,\r\n\t\t\t\tcanRemoveBlocks,\r\n\t\t\t} = select( blockEditorStore );\r\n\t\t\tconst { getActiveBlockVariation, getBlockVariations } =\r\n\t\t\t\tselect( blocksStore );\r\n\t\t\tconst rootClientId = getBlockRootClientId(\r\n\t\t\t\tArray.isArray( clientIds ) ? clientIds[ 0 ] : clientIds\r\n\t\t\t);\r\n\t\t\tconst canRemove = canRemoveBlocks( clientIds, rootClientId );\r\n\t\t\t// Only handle single selected blocks for now.\r\n\t\t\tif ( blocks.length !== 1 || ! canRemove ) {\r\n\t\t\t\treturn EMPTY_OBJECT;\r\n\t\t\t}\r\n\t\t\tconst [ firstBlock ] = blocks;\r\n\t\t\treturn {\r\n\t\t\t\tblockVariationTransformations: getBlockVariations(\r\n\t\t\t\t\tfirstBlock.name,\r\n\t\t\t\t\t'transform'\r\n\t\t\t\t),\r\n\t\t\t\tactiveBlockVariation: getActiveBlockVariation(\r\n\t\t\t\t\tfirstBlock.name,\r\n\t\t\t\t\tgetBlockAttributes( firstBlock.clientId )\r\n\t\t\t\t),\r\n\t\t\t};\r\n\t\t},\r\n\t\t[ clientIds, blocks ]\r\n\t);\r\n\tconst transformations = useMemo( () => {\r\n\t\treturn blockVariationTransformations?.filter(\r\n\t\t\t( { name } ) => name !== activeBlockVariation?.name\r\n\t\t);\r\n\t}, [ blockVariationTransformations, activeBlockVariation ] );\r\n\treturn transformations;\r\n}\r\n\r\nconst BlockVariationTransformations = ( {\r\n\ttransformations,\r\n\tonSelect,\r\n\tblocks,\r\n} ) => {\r\n\tconst [ hoveredTransformItemName, setHoveredTransformItemName ] =\r\n\t\tuseState();\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{ hoveredTransformItemName && (\r\n\t\t\t\t<PreviewBlockPopover\r\n\t\t\t\t\tblocks={ cloneBlock(\r\n\t\t\t\t\t\tblocks[ 0 ],\r\n\t\t\t\t\t\ttransformations.find(\r\n\t\t\t\t\t\t\t( { name } ) => name === hoveredTransformItemName\r\n\t\t\t\t\t\t).attributes\r\n\t\t\t\t\t) }\r\n\t\t\t\t/>\r\n\t\t\t) }\r\n\t\t\t{ transformations?.map( ( item ) => (\r\n\t\t\t\t<BlockVariationTranformationItem\r\n\t\t\t\t\tkey={ item.name }\r\n\t\t\t\t\titem={ item }\r\n\t\t\t\t\tonSelect={ onSelect }\r\n\t\t\t\t\tsetHoveredTransformItemName={ setHoveredTransformItemName }\r\n\t\t\t\t/>\r\n\t\t\t) ) }\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nfunction BlockVariationTranformationItem( {\r\n\titem,\r\n\tonSelect,\r\n\tsetHoveredTransformItemName,\r\n} ) {\r\n\tconst { name, icon, title } = item;\r\n\treturn (\r\n\t\t<MenuItem\r\n\t\t\tclassName={ getBlockMenuDefaultClassName( name ) }\r\n\t\t\tonClick={ ( event ) => {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tonSelect( name );\r\n\t\t\t} }\r\n\t\t\tonMouseLeave={ () => setHoveredTransformItemName( null ) }\r\n\t\t\tonMouseEnter={ () => setHoveredTransformItemName( name ) }\r\n\t\t>\r\n\t\t\t<BlockIcon icon={ icon } showColors />\r\n\t\t\t{ title }\r\n\t\t</MenuItem>\r\n\t);\r\n}\r\n\r\nexport default BlockVariationTransformations;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { __ } from '@wordpress/i18n';\r\nimport { MenuGroup, MenuItem } from '@wordpress/components';\r\nimport {\r\n\tgetBlockMenuDefaultClassName,\r\n\tswitchToBlockType,\r\n} from '@wordpress/blocks';\r\nimport { useState, useMemo } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport BlockIcon from '../block-icon';\r\nimport PreviewBlockPopover from './preview-block-popover';\r\nimport BlockVariationTransformations from './block-variation-transformations';\r\n\r\n/**\r\n * Helper hook to group transformations to display them in a specific order in the UI.\r\n * For now we group only priority content driven transformations(ex. paragraph -> heading).\r\n *\r\n * Later on we could also group 'layout' transformations(ex. paragraph -> group) and\r\n * display them in different sections.\r\n *\r\n * @param {Object[]} possibleBlockTransformations The available block transformations.\r\n * @return {Record<string, Object[]>} The grouped block transformations.\r\n */\r\nfunction useGroupedTransforms( possibleBlockTransformations ) {\r\n\tconst priorityContentTranformationBlocks = {\r\n\t\t'core/paragraph': 1,\r\n\t\t'core/heading': 2,\r\n\t\t'core/list': 3,\r\n\t\t'core/quote': 4,\r\n\t};\r\n\tconst transformations = useMemo( () => {\r\n\t\tconst priorityTextTranformsNames = Object.keys(\r\n\t\t\tpriorityContentTranformationBlocks\r\n\t\t);\r\n\t\tconst groupedPossibleTransforms = possibleBlockTransformations.reduce(\r\n\t\t\t( accumulator, item ) => {\r\n\t\t\t\tconst { name } = item;\r\n\t\t\t\tif ( priorityTextTranformsNames.includes( name ) ) {\r\n\t\t\t\t\taccumulator.priorityTextTransformations.push( item );\r\n\t\t\t\t} else {\r\n\t\t\t\t\taccumulator.restTransformations.push( item );\r\n\t\t\t\t}\r\n\t\t\t\treturn accumulator;\r\n\t\t\t},\r\n\t\t\t{ priorityTextTransformations: [], restTransformations: [] }\r\n\t\t);\r\n\t\t/**\r\n\t\t * If there is only one priority text transformation and it's a Quote,\r\n\t\t * is should move to the rest transformations. This is because Quote can\r\n\t\t * be a container for any block type, so in multi-block selection it will\r\n\t\t * always be suggested, even for non-text blocks.\r\n\t\t */\r\n\t\tif (\r\n\t\t\tgroupedPossibleTransforms.priorityTextTransformations.length ===\r\n\t\t\t\t1 &&\r\n\t\t\tgroupedPossibleTransforms.priorityTextTransformations[ 0 ].name ===\r\n\t\t\t\t'core/quote'\r\n\t\t) {\r\n\t\t\tconst singleQuote =\r\n\t\t\t\tgroupedPossibleTransforms.priorityTextTransformations.pop();\r\n\t\t\tgroupedPossibleTransforms.restTransformations.push( singleQuote );\r\n\t\t}\r\n\t\treturn groupedPossibleTransforms;\r\n\t}, [ possibleBlockTransformations ] );\r\n\r\n\t// Order the priority text transformations.\r\n\ttransformations.priorityTextTransformations.sort(\r\n\t\t( { name: currentName }, { name: nextName } ) => {\r\n\t\t\treturn priorityContentTranformationBlocks[ currentName ] <\r\n\t\t\t\tpriorityContentTranformationBlocks[ nextName ]\r\n\t\t\t\t? -1\r\n\t\t\t\t: 1;\r\n\t\t}\r\n\t);\r\n\treturn transformations;\r\n}\r\n\r\nconst BlockTransformationsMenu = ( {\r\n\tclassName,\r\n\tpossibleBlockTransformations,\r\n\tpossibleBlockVariationTransformations,\r\n\tonSelect,\r\n\tonSelectVariation,\r\n\tblocks,\r\n} ) => {\r\n\tconst [ hoveredTransformItemName, setHoveredTransformItemName ] =\r\n\t\tuseState();\r\n\r\n\tconst { priorityTextTransformations, restTransformations } =\r\n\t\tuseGroupedTransforms( possibleBlockTransformations );\r\n\t// We have to check if both content transformations(priority and rest) are set\r\n\t// in order to create a separate MenuGroup for them.\r\n\tconst hasBothContentTransformations =\r\n\t\tpriorityTextTransformations.length && restTransformations.length;\r\n\tconst restTransformItems = !! restTransformations.length && (\r\n\t\t<RestTransformationItems\r\n\t\t\trestTransformations={ restTransformations }\r\n\t\t\tonSelect={ onSelect }\r\n\t\t\tsetHoveredTransformItemName={ setHoveredTransformItemName }\r\n\t\t/>\r\n\t);\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<MenuGroup label={ __( 'Transform to' ) } className={ className }>\r\n\t\t\t\t{ hoveredTransformItemName && (\r\n\t\t\t\t\t<PreviewBlockPopover\r\n\t\t\t\t\t\tblocks={ switchToBlockType(\r\n\t\t\t\t\t\t\tblocks,\r\n\t\t\t\t\t\t\thoveredTransformItemName\r\n\t\t\t\t\t\t) }\r\n\t\t\t\t\t/>\r\n\t\t\t\t) }\r\n\t\t\t\t{ !! possibleBlockVariationTransformations?.length && (\r\n\t\t\t\t\t<BlockVariationTransformations\r\n\t\t\t\t\t\ttransformations={\r\n\t\t\t\t\t\t\tpossibleBlockVariationTransformations\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tblocks={ blocks }\r\n\t\t\t\t\t\tonSelect={ onSelectVariation }\r\n\t\t\t\t\t/>\r\n\t\t\t\t) }\r\n\t\t\t\t{ priorityTextTransformations.map( ( item ) => (\r\n\t\t\t\t\t<BlockTranformationItem\r\n\t\t\t\t\t\tkey={ item.name }\r\n\t\t\t\t\t\titem={ item }\r\n\t\t\t\t\t\tonSelect={ onSelect }\r\n\t\t\t\t\t\tsetHoveredTransformItemName={\r\n\t\t\t\t\t\t\tsetHoveredTransformItemName\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t/>\r\n\t\t\t\t) ) }\r\n\t\t\t\t{ ! hasBothContentTransformations && restTransformItems }\r\n\t\t\t</MenuGroup>\r\n\t\t\t{ !! hasBothContentTransformations && (\r\n\t\t\t\t<MenuGroup className={ className }>\r\n\t\t\t\t\t{ restTransformItems }\r\n\t\t\t\t</MenuGroup>\r\n\t\t\t) }\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nfunction RestTransformationItems( {\r\n\trestTransformations,\r\n\tonSelect,\r\n\tsetHoveredTransformItemName,\r\n} ) {\r\n\treturn restTransformations.map( ( item ) => (\r\n\t\t<BlockTranformationItem\r\n\t\t\tkey={ item.name }\r\n\t\t\titem={ item }\r\n\t\t\tonSelect={ onSelect }\r\n\t\t\tsetHoveredTransformItemName={ setHoveredTransformItemName }\r\n\t\t/>\r\n\t) );\r\n}\r\n\r\nfunction BlockTranformationItem( {\r\n\titem,\r\n\tonSelect,\r\n\tsetHoveredTransformItemName,\r\n} ) {\r\n\tconst { name, icon, title, isDisabled } = item;\r\n\treturn (\r\n\t\t<MenuItem\r\n\t\t\tclassName={ getBlockMenuDefaultClassName( name ) }\r\n\t\t\tonClick={ ( event ) => {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tonSelect( name );\r\n\t\t\t} }\r\n\t\t\tdisabled={ isDisabled }\r\n\t\t\tonMouseLeave={ () => setHoveredTransformItemName( null ) }\r\n\t\t\tonMouseEnter={ () => setHoveredTransformItemName( name ) }\r\n\t\t>\r\n\t\t\t<BlockIcon icon={ icon } showColors />\r\n\t\t\t{ title }\r\n\t\t</MenuItem>\r\n\t);\r\n}\r\n\r\nexport default BlockTransformationsMenu;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport TokenList from '@wordpress/token-list';\r\nimport { _x } from '@wordpress/i18n';\r\n\r\n/**\r\n * Returns the active style from the given className.\r\n *\r\n * @param {Array}  styles    Block styles.\r\n * @param {string} className Class name\r\n *\r\n * @return {Object?} The active style.\r\n */\r\nexport function getActiveStyle( styles, className ) {\r\n\tfor ( const style of new TokenList( className ).values() ) {\r\n\t\tif ( style.indexOf( 'is-style-' ) === -1 ) {\r\n\t\t\tcontinue;\r\n\t\t}\r\n\r\n\t\tconst potentialStyleName = style.substring( 9 );\r\n\t\tconst activeStyle = styles?.find(\r\n\t\t\t( { name } ) => name === potentialStyleName\r\n\t\t);\r\n\t\tif ( activeStyle ) {\r\n\t\t\treturn activeStyle;\r\n\t\t}\r\n\t}\r\n\r\n\treturn getDefaultStyle( styles );\r\n}\r\n\r\n/**\r\n * Replaces the active style in the block's className.\r\n *\r\n * @param {string}  className   Class name.\r\n * @param {Object?} activeStyle The replaced style.\r\n * @param {Object}  newStyle    The replacing style.\r\n *\r\n * @return {string} The updated className.\r\n */\r\nexport function replaceActiveStyle( className, activeStyle, newStyle ) {\r\n\tconst list = new TokenList( className );\r\n\r\n\tif ( activeStyle ) {\r\n\t\tlist.remove( 'is-style-' + activeStyle.name );\r\n\t}\r\n\r\n\tlist.add( 'is-style-' + newStyle.name );\r\n\r\n\treturn list.value;\r\n}\r\n\r\n/**\r\n * Returns a collection of styles that can be represented on the frontend.\r\n * The function checks a style collection for a default style. If none is found, it adds one to\r\n * act as a fallback for when there is no active style applied to a block. The default item also serves\r\n * as a switch on the frontend to deactivate non-default styles.\r\n *\r\n * @param {Array} styles Block styles.\r\n *\r\n * @return {Array<Object?>}        The style collection.\r\n */\r\nexport function getRenderedStyles( styles ) {\r\n\tif ( ! styles || styles.length === 0 ) {\r\n\t\treturn [];\r\n\t}\r\n\r\n\treturn getDefaultStyle( styles )\r\n\t\t? styles\r\n\t\t: [\r\n\t\t\t\t{\r\n\t\t\t\t\tname: 'default',\r\n\t\t\t\t\tlabel: _x( 'Default', 'block style' ),\r\n\t\t\t\t\tisDefault: true,\r\n\t\t\t\t},\r\n\t\t\t\t...styles,\r\n\t\t  ];\r\n}\r\n\r\n/**\r\n * Returns a style object from a collection of styles where that style object is the default block style.\r\n *\r\n * @param {Array} styles Block styles.\r\n *\r\n * @return {Object?}        The default style object, if found.\r\n */\r\nexport function getDefaultStyle( styles ) {\r\n\treturn styles?.find( ( style ) => style.isDefault );\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useDispatch, useSelect } from '@wordpress/data';\r\nimport {\r\n\tcloneBlock,\r\n\tgetBlockType,\r\n\tgetBlockFromExample,\r\n\tstore as blocksStore,\r\n} from '@wordpress/blocks';\r\nimport { useMemo } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { getActiveStyle, getRenderedStyles, replaceActiveStyle } from './utils';\r\nimport { store as blockEditorStore } from '../../store';\r\n\r\n/**\r\n *\r\n * @param {WPBlock}     block Block object.\r\n * @param {WPBlockType} type  Block type settings.\r\n * @return {WPBlock}          A generic block ready for styles preview.\r\n */\r\nfunction useGenericPreviewBlock( block, type ) {\r\n\treturn useMemo( () => {\r\n\t\tconst example = type?.example;\r\n\t\tconst blockName = type?.name;\r\n\r\n\t\tif ( example && blockName ) {\r\n\t\t\treturn getBlockFromExample( blockName, {\r\n\t\t\t\tattributes: example.attributes,\r\n\t\t\t\tinnerBlocks: example.innerBlocks,\r\n\t\t\t} );\r\n\t\t}\r\n\r\n\t\tif ( block ) {\r\n\t\t\treturn cloneBlock( block );\r\n\t\t}\r\n\t}, [ type?.example ? block?.name : block, type ] );\r\n}\r\n\r\n/**\r\n * @typedef useStylesForBlocksArguments\r\n * @property {string}     clientId Block client ID.\r\n * @property {() => void} onSwitch Block style switch callback function.\r\n */\r\n\r\n/**\r\n *\r\n * @param {useStylesForBlocksArguments} useStylesForBlocks arguments.\r\n * @return {Object}                                         Results of the select methods.\r\n */\r\nexport default function useStylesForBlocks( { clientId, onSwitch } ) {\r\n\tconst selector = ( select ) => {\r\n\t\tconst { getBlock } = select( blockEditorStore );\r\n\t\tconst block = getBlock( clientId );\r\n\r\n\t\tif ( ! block ) {\r\n\t\t\treturn {};\r\n\t\t}\r\n\t\tconst blockType = getBlockType( block.name );\r\n\t\tconst { getBlockStyles } = select( blocksStore );\r\n\r\n\t\treturn {\r\n\t\t\tblock,\r\n\t\t\tblockType,\r\n\t\t\tstyles: getBlockStyles( block.name ),\r\n\t\t\tclassName: block.attributes.className || '',\r\n\t\t};\r\n\t};\r\n\tconst { styles, block, blockType, className } = useSelect( selector, [\r\n\t\tclientId,\r\n\t] );\r\n\tconst { updateBlockAttributes } = useDispatch( blockEditorStore );\r\n\tconst stylesToRender = getRenderedStyles( styles );\r\n\tconst activeStyle = getActiveStyle( stylesToRender, className );\r\n\tconst genericPreviewBlock = useGenericPreviewBlock( block, blockType );\r\n\r\n\tconst onSelect = ( style ) => {\r\n\t\tconst styleClassName = replaceActiveStyle(\r\n\t\t\tclassName,\r\n\t\t\tactiveStyle,\r\n\t\t\tstyle\r\n\t\t);\r\n\t\tupdateBlockAttributes( clientId, {\r\n\t\t\tclassName: styleClassName,\r\n\t\t} );\r\n\t\tonSwitch();\r\n\t};\r\n\r\n\treturn {\r\n\t\tonSelect,\r\n\t\tstylesToRender,\r\n\t\tactiveStyle,\r\n\t\tgenericPreviewBlock,\r\n\t\tclassName,\r\n\t};\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { MenuItem, __experimentalText as Text } from '@wordpress/components';\r\nimport { check } from '@wordpress/icons';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport useStylesForBlocks from './use-styles-for-block';\r\n\r\nconst noop = () => {};\r\n\r\nexport default function BlockStylesMenuItems( { clientId, onSwitch = noop } ) {\r\n\tconst { onSelect, stylesToRender, activeStyle } = useStylesForBlocks( {\r\n\t\tclientId,\r\n\t\tonSwitch,\r\n\t} );\r\n\r\n\tif ( ! stylesToRender || stylesToRender.length === 0 ) {\r\n\t\treturn null;\r\n\t}\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{ stylesToRender.map( ( style ) => {\r\n\t\t\t\tconst menuItemText = style.label || style.name;\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<MenuItem\r\n\t\t\t\t\t\tkey={ style.name }\r\n\t\t\t\t\t\ticon={ activeStyle.name === style.name ? check : null }\r\n\t\t\t\t\t\tonClick={ () => onSelect( style ) }\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Text\r\n\t\t\t\t\t\t\tas=\"span\"\r\n\t\t\t\t\t\t\tlimit={ 18 }\r\n\t\t\t\t\t\t\tellipsizeMode=\"tail\"\r\n\t\t\t\t\t\t\ttruncate\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{ menuItemText }\r\n\t\t\t\t\t\t</Text>\r\n\t\t\t\t\t</MenuItem>\r\n\t\t\t\t);\r\n\t\t\t} ) }\r\n\t\t</>\r\n\t);\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { __ } from '@wordpress/i18n';\r\nimport { MenuGroup } from '@wordpress/components';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport BlockStylesMenuItems from '../block-styles/menu-items';\r\n\r\nexport default function BlockStylesMenu( { hoveredBlock, onSwitch } ) {\r\n\tconst { clientId } = hoveredBlock;\r\n\r\n\treturn (\r\n\t\t<MenuGroup\r\n\t\t\tlabel={ __( 'Styles' ) }\r\n\t\t\tclassName=\"block-editor-block-switcher__styles__menugroup\"\r\n\t\t>\r\n\t\t\t<BlockStylesMenuItems clientId={ clientId } onSwitch={ onSwitch } />\r\n\t\t</MenuGroup>\r\n\t);\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { __experimentalGetBlockAttributesNamesByRole as getBlockAttributesNamesByRole } from '@wordpress/blocks';\r\n\r\n/**\r\n * Try to find a matching block by a block's name in a provided\r\n * block. We recurse through InnerBlocks and return the reference\r\n * of the matched block (it could be an InnerBlock).\r\n * If no match is found return nothing.\r\n *\r\n * @param {WPBlock} block             The block to try to find a match.\r\n * @param {string}  selectedBlockName The block's name to use for matching condition.\r\n * @param {Set}     consumedBlocks    A set holding the previously matched/consumed blocks.\r\n *\r\n * @return {WPBlock | undefined} The matched block if found or nothing(`undefined`).\r\n */\r\nexport const getMatchingBlockByName = (\r\n\tblock,\r\n\tselectedBlockName,\r\n\tconsumedBlocks = new Set()\r\n) => {\r\n\tconst { clientId, name, innerBlocks = [] } = block;\r\n\t// Check if block has been consumed already.\r\n\tif ( consumedBlocks.has( clientId ) ) return;\r\n\tif ( name === selectedBlockName ) return block;\r\n\t// Try to find a matching block from InnerBlocks recursively.\r\n\tfor ( const innerBlock of innerBlocks ) {\r\n\t\tconst match = getMatchingBlockByName(\r\n\t\t\tinnerBlock,\r\n\t\t\tselectedBlockName,\r\n\t\t\tconsumedBlocks\r\n\t\t);\r\n\t\tif ( match ) return match;\r\n\t}\r\n};\r\n\r\n/**\r\n * Find and return the block attributes to retain through\r\n * the transformation, based on Block Type's `role:content`\r\n * attributes. If no `role:content` attributes exist,\r\n * return selected block's attributes.\r\n *\r\n * @param {string} name       Block type's namespaced name.\r\n * @param {Object} attributes Selected block's attributes.\r\n * @return {Object} The block's attributes to retain.\r\n */\r\nexport const getRetainedBlockAttributes = ( name, attributes ) => {\r\n\tconst contentAttributes = getBlockAttributesNamesByRole( name, 'content' );\r\n\tif ( ! contentAttributes?.length ) return attributes;\r\n\r\n\treturn contentAttributes.reduce( ( _accumulator, attribute ) => {\r\n\t\tif ( attributes[ attribute ] )\r\n\t\t\t_accumulator[ attribute ] = attributes[ attribute ];\r\n\t\treturn _accumulator;\r\n\t}, {} );\r\n};\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useMemo } from '@wordpress/element';\r\nimport { cloneBlock } from '@wordpress/blocks';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { getMatchingBlockByName, getRetainedBlockAttributes } from './utils';\r\n\r\n/**\r\n * Mutate the matched block's attributes by getting\r\n * which block type's attributes to retain and prioritize\r\n * them in the merging of the attributes.\r\n *\r\n * @param {WPBlock} match         The matched block.\r\n * @param {WPBlock} selectedBlock The selected block.\r\n * @return {void}\r\n */\r\nexport const transformMatchingBlock = ( match, selectedBlock ) => {\r\n\t// Get the block attributes to retain through the transformation.\r\n\tconst retainedBlockAttributes = getRetainedBlockAttributes(\r\n\t\tselectedBlock.name,\r\n\t\tselectedBlock.attributes\r\n\t);\r\n\tmatch.attributes = {\r\n\t\t...match.attributes,\r\n\t\t...retainedBlockAttributes,\r\n\t};\r\n};\r\n\r\n/**\r\n * By providing the selected blocks and pattern's blocks\r\n * find the matching blocks, transform them and return them.\r\n * If not all selected blocks are matched, return nothing.\r\n *\r\n * @param {WPBlock[]} selectedBlocks The selected blocks.\r\n * @param {WPBlock[]} patternBlocks  The pattern's blocks.\r\n * @return {WPBlock[]|void} The transformed pattern's blocks or undefined if not all selected blocks have been matched.\r\n */\r\nexport const getPatternTransformedBlocks = (\r\n\tselectedBlocks,\r\n\tpatternBlocks\r\n) => {\r\n\t// Clone Pattern's blocks to produce new clientIds and be able to mutate the matches.\r\n\tconst _patternBlocks = patternBlocks.map( ( block ) =>\r\n\t\tcloneBlock( block )\r\n\t);\r\n\t/**\r\n\t * Keep track of the consumed pattern blocks.\r\n\t * This is needed because we loop the selected blocks\r\n\t * and for example we may have selected two paragraphs and\r\n\t * the pattern's blocks could have more `paragraphs`.\r\n\t */\r\n\tconst consumedBlocks = new Set();\r\n\tfor ( const selectedBlock of selectedBlocks ) {\r\n\t\tlet isMatch = false;\r\n\t\tfor ( const patternBlock of _patternBlocks ) {\r\n\t\t\tconst match = getMatchingBlockByName(\r\n\t\t\t\tpatternBlock,\r\n\t\t\t\tselectedBlock.name,\r\n\t\t\t\tconsumedBlocks\r\n\t\t\t);\r\n\t\t\tif ( ! match ) continue;\r\n\t\t\tisMatch = true;\r\n\t\t\tconsumedBlocks.add( match.clientId );\r\n\t\t\t// We update (mutate) the matching pattern block.\r\n\t\t\ttransformMatchingBlock( match, selectedBlock );\r\n\t\t\t// No need to loop through other pattern's blocks.\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\t// Bail eary if a selected block has not been matched.\r\n\t\tif ( ! isMatch ) return;\r\n\t}\r\n\treturn _patternBlocks;\r\n};\r\n\r\n/**\r\n * @typedef {WPBlockPattern & {transformedBlocks: WPBlock[]}} TransformedBlockPattern\r\n */\r\n\r\n/**\r\n * Custom hook that accepts patterns from state and the selected\r\n * blocks and tries to match these with the pattern's blocks.\r\n * If all selected blocks are matched with a Pattern's block,\r\n * we transform them by retaining block's attributes with `role:content`.\r\n * The transformed pattern's blocks are set to a new pattern\r\n * property `transformedBlocks`.\r\n *\r\n * @param {WPBlockPattern[]} patterns       Patterns from state.\r\n * @param {WPBlock[]}        selectedBlocks The currently selected blocks.\r\n * @return {TransformedBlockPattern[]} Returns the eligible matched patterns with all the selected blocks.\r\n */\r\nconst useTransformedPatterns = ( patterns, selectedBlocks ) => {\r\n\treturn useMemo(\r\n\t\t() =>\r\n\t\t\tpatterns.reduce( ( accumulator, _pattern ) => {\r\n\t\t\t\tconst transformedBlocks = getPatternTransformedBlocks(\r\n\t\t\t\t\tselectedBlocks,\r\n\t\t\t\t\t_pattern.blocks\r\n\t\t\t\t);\r\n\t\t\t\tif ( transformedBlocks ) {\r\n\t\t\t\t\taccumulator.push( {\r\n\t\t\t\t\t\t..._pattern,\r\n\t\t\t\t\t\ttransformedBlocks,\r\n\t\t\t\t\t} );\r\n\t\t\t\t}\r\n\t\t\t\treturn accumulator;\r\n\t\t\t}, [] ),\r\n\t\t[ patterns, selectedBlocks ]\r\n\t);\r\n};\r\n\r\nexport default useTransformedPatterns;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { __ } from '@wordpress/i18n';\r\nimport { useState } from '@wordpress/element';\r\nimport { useInstanceId } from '@wordpress/compose';\r\nimport { chevronRight } from '@wordpress/icons';\r\n\r\nimport {\r\n\tMenuGroup,\r\n\tMenuItem,\r\n\tPopover,\r\n\tVisuallyHidden,\r\n\tprivateApis as componentsPrivateApis,\r\n} from '@wordpress/components';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport BlockPreview from '../block-preview';\r\nimport useTransformedPatterns from './use-transformed-patterns';\r\nimport { unlock } from '../../lock-unlock';\r\n\r\nconst {\r\n\tCompositeV2: Composite,\r\n\tCompositeItemV2: CompositeItem,\r\n\tuseCompositeStoreV2: useCompositeStore,\r\n} = unlock( componentsPrivateApis );\r\n\r\nfunction PatternTransformationsMenu( {\r\n\tblocks,\r\n\tpatterns: statePatterns,\r\n\tonSelect,\r\n} ) {\r\n\tconst [ showTransforms, setShowTransforms ] = useState( false );\r\n\tconst patterns = useTransformedPatterns( statePatterns, blocks );\r\n\tif ( ! patterns.length ) return null;\r\n\r\n\treturn (\r\n\t\t<MenuGroup className=\"block-editor-block-switcher__pattern__transforms__menugroup\">\r\n\t\t\t{ showTransforms && (\r\n\t\t\t\t<PreviewPatternsPopover\r\n\t\t\t\t\tpatterns={ patterns }\r\n\t\t\t\t\tonSelect={ onSelect }\r\n\t\t\t\t/>\r\n\t\t\t) }\r\n\t\t\t<MenuItem\r\n\t\t\t\tonClick={ ( event ) => {\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\tsetShowTransforms( ! showTransforms );\r\n\t\t\t\t} }\r\n\t\t\t\ticon={ chevronRight }\r\n\t\t\t>\r\n\t\t\t\t{ __( 'Patterns' ) }\r\n\t\t\t</MenuItem>\r\n\t\t</MenuGroup>\r\n\t);\r\n}\r\n\r\nfunction PreviewPatternsPopover( { patterns, onSelect } ) {\r\n\treturn (\r\n\t\t<div className=\"block-editor-block-switcher__popover__preview__parent\">\r\n\t\t\t<div className=\"block-editor-block-switcher__popover__preview__container\">\r\n\t\t\t\t<Popover\r\n\t\t\t\t\tclassName=\"block-editor-block-switcher__preview__popover\"\r\n\t\t\t\t\tposition=\"bottom right\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<div className=\"block-editor-block-switcher__preview is-pattern-list-preview\">\r\n\t\t\t\t\t\t<BlockPatternsList\r\n\t\t\t\t\t\t\tpatterns={ patterns }\r\n\t\t\t\t\t\t\tonSelect={ onSelect }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Popover>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nfunction BlockPatternsList( { patterns, onSelect } ) {\r\n\tconst composite = useCompositeStore();\r\n\treturn (\r\n\t\t<Composite\r\n\t\t\tstore={ composite }\r\n\t\t\trole=\"listbox\"\r\n\t\t\tclassName=\"block-editor-block-switcher__preview-patterns-container\"\r\n\t\t\taria-label={ __( 'Patterns list' ) }\r\n\t\t>\r\n\t\t\t{ patterns.map( ( pattern ) => (\r\n\t\t\t\t<BlockPattern\r\n\t\t\t\t\tkey={ pattern.name }\r\n\t\t\t\t\tpattern={ pattern }\r\n\t\t\t\t\tonSelect={ onSelect }\r\n\t\t\t\t/>\r\n\t\t\t) ) }\r\n\t\t</Composite>\r\n\t);\r\n}\r\n\r\nfunction BlockPattern( { pattern, onSelect } ) {\r\n\t// TODO check pattern/preview width...\r\n\tconst baseClassName =\r\n\t\t'block-editor-block-switcher__preview-patterns-container';\r\n\tconst descriptionId = useInstanceId(\r\n\t\tBlockPattern,\r\n\t\t`${ baseClassName }-list__item-description`\r\n\t);\r\n\treturn (\r\n\t\t<div className={ `${ baseClassName }-list__list-item` }>\r\n\t\t\t<CompositeItem\r\n\t\t\t\trender={\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\trole=\"option\"\r\n\t\t\t\t\t\taria-label={ pattern.title }\r\n\t\t\t\t\t\taria-describedby={\r\n\t\t\t\t\t\t\tpattern.description ? descriptionId : undefined\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tclassName={ `${ baseClassName }-list__item` }\r\n\t\t\t\t\t/>\r\n\t\t\t\t}\r\n\t\t\t\tonClick={ () => onSelect( pattern.transformedBlocks ) }\r\n\t\t\t>\r\n\t\t\t\t<BlockPreview\r\n\t\t\t\t\tblocks={ pattern.transformedBlocks }\r\n\t\t\t\t\tviewportWidth={ pattern.viewportWidth || 500 }\r\n\t\t\t\t/>\r\n\t\t\t\t<div className={ `${ baseClassName }-list__item-title` }>\r\n\t\t\t\t\t{ pattern.title }\r\n\t\t\t\t</div>\r\n\t\t\t</CompositeItem>\r\n\t\t\t{ !! pattern.description && (\r\n\t\t\t\t<VisuallyHidden id={ descriptionId }>\r\n\t\t\t\t\t{ pattern.description }\r\n\t\t\t\t</VisuallyHidden>\r\n\t\t\t) }\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default PatternTransformationsMenu;\r\n","/**\n * WordPress dependencies\n */\nimport { __, _n, sprintf } from '@wordpress/i18n';\nimport {\n\tDropdownMenu,\n\tToolbarButton,\n\tToolbarGroup,\n\tToolbarItem,\n} from '@wordpress/components';\nimport {\n\tswitchToBlockType,\n\tstore as blocksStore,\n\tisReusableBlock,\n\tisTemplatePart,\n} from '@wordpress/blocks';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { copy } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport BlockIcon from '../block-icon';\nimport BlockTransformationsMenu from './block-transformations-menu';\nimport { useBlockVariationTransforms } from './block-variation-transformations';\nimport BlockStylesMenu from './block-styles-menu';\nimport PatternTransformationsMenu from './pattern-transformations-menu';\nimport useBlockDisplayTitle from '../block-title/use-block-display-title';\n\nfunction BlockSwitcherDropdownMenuContents( {\n\tonClose,\n\tclientIds,\n\thasBlockStyles,\n\tcanRemove,\n} ) {\n\tconst { replaceBlocks, multiSelect, updateBlockAttributes } =\n\t\tuseDispatch( blockEditorStore );\n\tconst { possibleBlockTransformations, patterns, blocks } = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tgetBlocksByClientId,\n\t\t\t\tgetBlockRootClientId,\n\t\t\t\tgetBlockTransformItems,\n\t\t\t\t__experimentalGetPatternTransformItems,\n\t\t\t} = select( blockEditorStore );\n\t\t\tconst rootClientId = getBlockRootClientId(\n\t\t\t\tArray.isArray( clientIds ) ? clientIds[ 0 ] : clientIds\n\t\t\t);\n\t\t\tconst _blocks = getBlocksByClientId( clientIds );\n\t\t\treturn {\n\t\t\t\tblocks: _blocks,\n\t\t\t\tpossibleBlockTransformations: getBlockTransformItems(\n\t\t\t\t\t_blocks,\n\t\t\t\t\trootClientId\n\t\t\t\t),\n\t\t\t\tpatterns: __experimentalGetPatternTransformItems(\n\t\t\t\t\t_blocks,\n\t\t\t\t\trootClientId\n\t\t\t\t),\n\t\t\t};\n\t\t},\n\t\t[ clientIds ]\n\t);\n\tconst blockVariationTransformations = useBlockVariationTransforms( {\n\t\tclientIds,\n\t\tblocks,\n\t} );\n\tfunction selectForMultipleBlocks( insertedBlocks ) {\n\t\tif ( insertedBlocks.length > 1 ) {\n\t\t\tmultiSelect(\n\t\t\t\tinsertedBlocks[ 0 ].clientId,\n\t\t\t\tinsertedBlocks[ insertedBlocks.length - 1 ].clientId\n\t\t\t);\n\t\t}\n\t}\n\t// Simple block tranformation based on the `Block Transforms` API.\n\tfunction onBlockTransform( name ) {\n\t\tconst newBlocks = switchToBlockType( blocks, name );\n\t\treplaceBlocks( clientIds, newBlocks );\n\t\tselectForMultipleBlocks( newBlocks );\n\t}\n\tfunction onBlockVariationTransform( name ) {\n\t\tupdateBlockAttributes( blocks[ 0 ].clientId, {\n\t\t\t...blockVariationTransformations.find(\n\t\t\t\t( { name: variationName } ) => variationName === name\n\t\t\t).attributes,\n\t\t} );\n\t}\n\t// Pattern transformation through the `Patterns` API.\n\tfunction onPatternTransform( transformedBlocks ) {\n\t\treplaceBlocks( clientIds, transformedBlocks );\n\t\tselectForMultipleBlocks( transformedBlocks );\n\t}\n\t/**\n\t * The `isTemplate` check is a stopgap solution here.\n\t * Ideally, the Transforms API should handle this\n\t * by allowing to exclude blocks from wildcard transformations.\n\t */\n\tconst isSingleBlock = blocks.length === 1;\n\tconst isTemplate = isSingleBlock && isTemplatePart( blocks[ 0 ] );\n\tconst hasPossibleBlockTransformations =\n\t\t!! possibleBlockTransformations.length && canRemove && ! isTemplate;\n\tconst hasPossibleBlockVariationTransformations =\n\t\t!! blockVariationTransformations?.length;\n\tconst hasPatternTransformation = !! patterns?.length && canRemove;\n\tconst hasBlockOrBlockVariationTransforms =\n\t\thasPossibleBlockTransformations ||\n\t\thasPossibleBlockVariationTransformations;\n\tconst hasContents =\n\t\thasBlockStyles ||\n\t\thasBlockOrBlockVariationTransforms ||\n\t\thasPatternTransformation;\n\tif ( ! hasContents ) {\n\t\treturn (\n\t\t\t<p className=\"block-editor-block-switcher__no-transforms\">\n\t\t\t\t{ __( 'No transforms.' ) }\n\t\t\t</p>\n\t\t);\n\t}\n\treturn (\n\t\t<div className=\"block-editor-block-switcher__container\">\n\t\t\t{ hasPatternTransformation && (\n\t\t\t\t<PatternTransformationsMenu\n\t\t\t\t\tblocks={ blocks }\n\t\t\t\t\tpatterns={ patterns }\n\t\t\t\t\tonSelect={ ( transformedBlocks ) => {\n\t\t\t\t\t\tonPatternTransform( transformedBlocks );\n\t\t\t\t\t\tonClose();\n\t\t\t\t\t} }\n\t\t\t\t/>\n\t\t\t) }\n\t\t\t{ hasBlockOrBlockVariationTransforms && (\n\t\t\t\t<BlockTransformationsMenu\n\t\t\t\t\tclassName=\"block-editor-block-switcher__transforms__menugroup\"\n\t\t\t\t\tpossibleBlockTransformations={\n\t\t\t\t\t\tpossibleBlockTransformations\n\t\t\t\t\t}\n\t\t\t\t\tpossibleBlockVariationTransformations={\n\t\t\t\t\t\tblockVariationTransformations\n\t\t\t\t\t}\n\t\t\t\t\tblocks={ blocks }\n\t\t\t\t\tonSelect={ ( name ) => {\n\t\t\t\t\t\tonBlockTransform( name );\n\t\t\t\t\t\tonClose();\n\t\t\t\t\t} }\n\t\t\t\t\tonSelectVariation={ ( name ) => {\n\t\t\t\t\t\tonBlockVariationTransform( name );\n\t\t\t\t\t\tonClose();\n\t\t\t\t\t} }\n\t\t\t\t/>\n\t\t\t) }\n\t\t\t{ hasBlockStyles && (\n\t\t\t\t<BlockStylesMenu\n\t\t\t\t\thoveredBlock={ blocks[ 0 ] }\n\t\t\t\t\tonSwitch={ onClose }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</div>\n\t);\n}\n\nexport const BlockSwitcher = ( { clientIds, disabled } ) => {\n\tconst {\n\t\tcanRemove,\n\t\thasBlockStyles,\n\t\ticon,\n\t\tinvalidBlocks,\n\t\tisReusable,\n\t\tisTemplate,\n\t} = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tgetBlockRootClientId,\n\t\t\t\tgetBlocksByClientId,\n\t\t\t\tgetBlockAttributes,\n\t\t\t\tcanRemoveBlocks,\n\t\t\t} = select( blockEditorStore );\n\t\t\tconst { getBlockStyles, getBlockType, getActiveBlockVariation } =\n\t\t\t\tselect( blocksStore );\n\t\t\tconst _blocks = getBlocksByClientId( clientIds );\n\t\t\tif ( ! _blocks.length || _blocks.some( ( block ) => ! block ) ) {\n\t\t\t\treturn { invalidBlocks: true };\n\t\t\t}\n\t\t\tconst rootClientId = getBlockRootClientId(\n\t\t\t\tArray.isArray( clientIds ) ? clientIds[ 0 ] : clientIds\n\t\t\t);\n\t\t\tconst [ { name: firstBlockName } ] = _blocks;\n\t\t\tconst _isSingleBlockSelected = _blocks.length === 1;\n\t\t\tconst blockType = getBlockType( firstBlockName );\n\n\t\t\tlet _icon;\n\t\t\tif ( _isSingleBlockSelected ) {\n\t\t\t\tconst match = getActiveBlockVariation(\n\t\t\t\t\tfirstBlockName,\n\t\t\t\t\tgetBlockAttributes( clientIds[ 0 ] )\n\t\t\t\t);\n\t\t\t\t// Take into account active block variations.\n\t\t\t\t_icon = match?.icon || blockType.icon;\n\t\t\t} else {\n\t\t\t\tconst isSelectionOfSameType =\n\t\t\t\t\tnew Set( _blocks.map( ( { name } ) => name ) ).size === 1;\n\t\t\t\t// When selection consists of blocks of multiple types, display an\n\t\t\t\t// appropriate icon to communicate the non-uniformity.\n\t\t\t\t_icon = isSelectionOfSameType ? blockType.icon : copy;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tcanRemove: canRemoveBlocks( clientIds, rootClientId ),\n\t\t\t\thasBlockStyles:\n\t\t\t\t\t_isSingleBlockSelected &&\n\t\t\t\t\t!! getBlockStyles( firstBlockName )?.length,\n\t\t\t\ticon: _icon,\n\t\t\t\tisReusable:\n\t\t\t\t\t_isSingleBlockSelected && isReusableBlock( _blocks[ 0 ] ),\n\t\t\t\tisTemplate:\n\t\t\t\t\t_isSingleBlockSelected && isTemplatePart( _blocks[ 0 ] ),\n\t\t\t};\n\t\t},\n\t\t[ clientIds ]\n\t);\n\tconst blockTitle = useBlockDisplayTitle( {\n\t\tclientId: clientIds?.[ 0 ],\n\t\tmaximumLength: 35,\n\t} );\n\tif ( invalidBlocks ) {\n\t\treturn null;\n\t}\n\n\tconst isSingleBlock = clientIds.length === 1;\n\tconst blockSwitcherLabel = isSingleBlock\n\t\t? blockTitle\n\t\t: __( 'Multiple blocks selected' );\n\n\tconst hideDropdown = disabled || ( ! hasBlockStyles && ! canRemove );\n\tif ( hideDropdown ) {\n\t\treturn (\n\t\t\t<ToolbarGroup>\n\t\t\t\t<ToolbarButton\n\t\t\t\t\tdisabled\n\t\t\t\t\tclassName=\"block-editor-block-switcher__no-switcher-icon\"\n\t\t\t\t\ttitle={ blockSwitcherLabel }\n\t\t\t\t\ticon={\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<BlockIcon icon={ icon } showColors />\n\t\t\t\t\t\t\t{ ( isReusable || isTemplate ) && (\n\t\t\t\t\t\t\t\t<span className=\"block-editor-block-switcher__toggle-text\">\n\t\t\t\t\t\t\t\t\t{ blockTitle }\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</>\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t</ToolbarGroup>\n\t\t);\n\t}\n\n\tconst blockSwitcherDescription = isSingleBlock\n\t\t? __( 'Change block type or style' )\n\t\t: sprintf(\n\t\t\t\t/* translators: %d: number of blocks. */\n\t\t\t\t_n(\n\t\t\t\t\t'Change type of %d block',\n\t\t\t\t\t'Change type of %d blocks',\n\t\t\t\t\tclientIds.length\n\t\t\t\t),\n\t\t\t\tclientIds.length\n\t\t  );\n\treturn (\n\t\t<ToolbarGroup>\n\t\t\t<ToolbarItem>\n\t\t\t\t{ ( toggleProps ) => (\n\t\t\t\t\t<DropdownMenu\n\t\t\t\t\t\tclassName=\"block-editor-block-switcher\"\n\t\t\t\t\t\tlabel={ blockSwitcherLabel }\n\t\t\t\t\t\tpopoverProps={ {\n\t\t\t\t\t\t\tplacement: 'bottom-start',\n\t\t\t\t\t\t\tclassName: 'block-editor-block-switcher__popover',\n\t\t\t\t\t\t} }\n\t\t\t\t\t\ticon={\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<BlockIcon\n\t\t\t\t\t\t\t\t\ticon={ icon }\n\t\t\t\t\t\t\t\t\tclassName=\"block-editor-block-switcher__toggle\"\n\t\t\t\t\t\t\t\t\tshowColors\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{ ( isReusable || isTemplate ) && (\n\t\t\t\t\t\t\t\t\t<span className=\"block-editor-block-switcher__toggle-text\">\n\t\t\t\t\t\t\t\t\t\t{ blockTitle }\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttoggleProps={ {\n\t\t\t\t\t\t\tdescribedBy: blockSwitcherDescription,\n\t\t\t\t\t\t\t...toggleProps,\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tmenuProps={ { orientation: 'both' } }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ ( { onClose } ) => (\n\t\t\t\t\t\t\t<BlockSwitcherDropdownMenuContents\n\t\t\t\t\t\t\t\tonClose={ onClose }\n\t\t\t\t\t\t\t\tclientIds={ clientIds }\n\t\t\t\t\t\t\t\thasBlockStyles={ hasBlockStyles }\n\t\t\t\t\t\t\t\tcanRemove={ canRemove }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</DropdownMenu>\n\t\t\t\t) }\n\t\t\t</ToolbarItem>\n\t\t</ToolbarGroup>\n\t);\n};\n\nexport default BlockSwitcher;\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { createSlotFill } from '@wordpress/components';\r\n\r\nconst { Fill: __unstableBlockToolbarLastItem, Slot } = createSlotFill(\r\n\t'__unstableBlockToolbarLastItem'\r\n);\r\n\r\n__unstableBlockToolbarLastItem.Slot = Slot;\r\n\r\nexport default __unstableBlockToolbarLastItem;\r\n","/**\n * WordPress dependencies\n */\nimport { getBlockSupport, hasBlockSupport } from '@wordpress/blocks';\nimport { Platform } from '@wordpress/element';\n\nconst ALIGN_SUPPORT_KEY = 'align';\nconst ALIGN_WIDE_SUPPORT_KEY = 'alignWide';\nconst BORDER_SUPPORT_KEY = '__experimentalBorder';\nconst COLOR_SUPPORT_KEY = 'color';\nconst CUSTOM_CLASS_NAME_SUPPORT_KEY = 'customClassName';\nconst FONT_FAMILY_SUPPORT_KEY = 'typography.__experimentalFontFamily';\nconst FONT_SIZE_SUPPORT_KEY = 'typography.fontSize';\nconst LINE_HEIGHT_SUPPORT_KEY = 'typography.lineHeight';\n/**\n * Key within block settings' support array indicating support for font style.\n */\nconst FONT_STYLE_SUPPORT_KEY = 'typography.__experimentalFontStyle';\n/**\n * Key within block settings' support array indicating support for font weight.\n */\nconst FONT_WEIGHT_SUPPORT_KEY = 'typography.__experimentalFontWeight';\n/**\n * Key within block settings' supports array indicating support for text\n * columns e.g. settings found in `block.json`.\n */\nconst TEXT_COLUMNS_SUPPORT_KEY = 'typography.textColumns';\n/**\n * Key within block settings' supports array indicating support for text\n * decorations e.g. settings found in `block.json`.\n */\nconst TEXT_DECORATION_SUPPORT_KEY = 'typography.__experimentalTextDecoration';\n/**\n * Key within block settings' supports array indicating support for writing mode\n * e.g. settings found in `block.json`.\n */\nconst WRITING_MODE_SUPPORT_KEY = 'typography.__experimentalWritingMode';\n/**\n * Key within block settings' supports array indicating support for text\n * transforms e.g. settings found in `block.json`.\n */\nconst TEXT_TRANSFORM_SUPPORT_KEY = 'typography.__experimentalTextTransform';\n\n/**\n * Key within block settings' supports array indicating support for letter-spacing\n * e.g. settings found in `block.json`.\n */\nconst LETTER_SPACING_SUPPORT_KEY = 'typography.__experimentalLetterSpacing';\nconst LAYOUT_SUPPORT_KEY = 'layout';\nconst TYPOGRAPHY_SUPPORT_KEYS = [\n\tLINE_HEIGHT_SUPPORT_KEY,\n\tFONT_SIZE_SUPPORT_KEY,\n\tFONT_STYLE_SUPPORT_KEY,\n\tFONT_WEIGHT_SUPPORT_KEY,\n\tFONT_FAMILY_SUPPORT_KEY,\n\tTEXT_COLUMNS_SUPPORT_KEY,\n\tTEXT_DECORATION_SUPPORT_KEY,\n\tTEXT_TRANSFORM_SUPPORT_KEY,\n\tWRITING_MODE_SUPPORT_KEY,\n\tLETTER_SPACING_SUPPORT_KEY,\n];\nconst EFFECTS_SUPPORT_KEYS = [ 'shadow' ];\nconst SPACING_SUPPORT_KEY = 'spacing';\nconst styleSupportKeys = [\n\t...EFFECTS_SUPPORT_KEYS,\n\t...TYPOGRAPHY_SUPPORT_KEYS,\n\tBORDER_SUPPORT_KEY,\n\tCOLOR_SUPPORT_KEY,\n\tSPACING_SUPPORT_KEY,\n];\n\n/**\n * Returns true if the block defines support for align.\n *\n * @param {string|Object} nameOrType Block name or type object.\n * @return {boolean} Whether the block supports the feature.\n */\nexport const hasAlignSupport = ( nameOrType ) =>\n\thasBlockSupport( nameOrType, ALIGN_SUPPORT_KEY );\n\n/**\n * Returns the block support value for align, if defined.\n *\n * @param {string|Object} nameOrType Block name or type object.\n * @return {unknown} The block support value.\n */\nexport const getAlignSupport = ( nameOrType ) =>\n\tgetBlockSupport( nameOrType, ALIGN_SUPPORT_KEY );\n\n/**\n * Returns true if the block defines support for align wide.\n *\n * @param {string|Object} nameOrType Block name or type object.\n * @return {boolean} Whether the block supports the feature.\n */\nexport const hasAlignWideSupport = ( nameOrType ) =>\n\thasBlockSupport( nameOrType, ALIGN_WIDE_SUPPORT_KEY );\n\n/**\n * Returns the block support value for align wide, if defined.\n *\n * @param {string|Object} nameOrType Block name or type object.\n * @return {unknown} The block support value.\n */\nexport const getAlignWideSupport = ( nameOrType ) =>\n\tgetBlockSupport( nameOrType, ALIGN_WIDE_SUPPORT_KEY );\n\n/**\n * Determine whether there is block support for border properties.\n *\n * @param {string|Object} nameOrType Block name or type object.\n * @param {string}        feature    Border feature to check support for.\n *\n * @return {boolean} Whether there is support.\n */\nexport function hasBorderSupport( nameOrType, feature = 'any' ) {\n\tif ( Platform.OS !== 'web' ) {\n\t\treturn false;\n\t}\n\n\tconst support = getBlockSupport( nameOrType, BORDER_SUPPORT_KEY );\n\n\tif ( support === true ) {\n\t\treturn true;\n\t}\n\n\tif ( feature === 'any' ) {\n\t\treturn !! (\n\t\t\tsupport?.color ||\n\t\t\tsupport?.radius ||\n\t\t\tsupport?.width ||\n\t\t\tsupport?.style\n\t\t);\n\t}\n\n\treturn !! support?.[ feature ];\n}\n\n/**\n * Get block support for border properties.\n *\n * @param {string|Object} nameOrType Block name or type object.\n * @param {string}        feature    Border feature to get.\n *\n * @return {unknown} The block support.\n */\nexport const getBorderSupport = ( nameOrType, feature ) =>\n\tgetBlockSupport( nameOrType, [ BORDER_SUPPORT_KEY, feature ] );\n\n/**\n * Returns true if the block defines support for color.\n *\n * @param {string|Object} nameOrType Block name or type object.\n * @return {boolean} Whether the block supports the feature.\n */\nexport const hasColorSupport = ( nameOrType ) => {\n\tconst colorSupport = getBlockSupport( nameOrType, COLOR_SUPPORT_KEY );\n\treturn (\n\t\tcolorSupport &&\n\t\t( colorSupport.link === true ||\n\t\t\tcolorSupport.gradient === true ||\n\t\t\tcolorSupport.background !== false ||\n\t\t\tcolorSupport.text !== false )\n\t);\n};\n\n/**\n * Returns true if the block defines support for link color.\n *\n * @param {string|Object} nameOrType Block name or type object.\n * @return {boolean} Whether the block supports the feature.\n */\nexport const hasLinkColorSupport = ( nameOrType ) => {\n\tif ( Platform.OS !== 'web' ) {\n\t\treturn false;\n\t}\n\n\tconst colorSupport = getBlockSupport( nameOrType, COLOR_SUPPORT_KEY );\n\n\treturn (\n\t\tcolorSupport !== null &&\n\t\ttypeof colorSupport === 'object' &&\n\t\t!! colorSupport.link\n\t);\n};\n\n/**\n * Returns true if the block defines support for gradient color.\n *\n * @param {string|Object} nameOrType Block name or type object.\n * @return {boolean} Whether the block supports the feature.\n */\nexport const hasGradientSupport = ( nameOrType ) => {\n\tconst colorSupport = getBlockSupport( nameOrType, COLOR_SUPPORT_KEY );\n\n\treturn (\n\t\tcolorSupport !== null &&\n\t\ttypeof colorSupport === 'object' &&\n\t\t!! colorSupport.gradients\n\t);\n};\n\n/**\n * Returns true if the block defines support for background color.\n *\n * @param {string|Object} nameOrType Block name or type object.\n * @return {boolean} Whether the block supports the feature.\n */\nexport const hasBackgroundColorSupport = ( nameOrType ) => {\n\tconst colorSupport = getBlockSupport( nameOrType, COLOR_SUPPORT_KEY );\n\n\treturn colorSupport && colorSupport.background !== false;\n};\n\n/**\n * Returns true if the block defines support for background color.\n *\n * @param {string|Object} nameOrType Block name or type object.\n * @return {boolean} Whether the block supports the feature.\n */\nexport const hasTextColorSupport = ( nameOrType ) => {\n\tconst colorSupport = getBlockSupport( nameOrType, COLOR_SUPPORT_KEY );\n\n\treturn colorSupport && colorSupport.text !== false;\n};\n\n/**\n * Get block support for color properties.\n *\n * @param {string|Object} nameOrType Block name or type object.\n * @param {string}        feature    Color feature to get.\n *\n * @return {unknown} The block support.\n */\nexport const getColorSupport = ( nameOrType, feature ) =>\n\tgetBlockSupport( nameOrType, [ COLOR_SUPPORT_KEY, feature ] );\n\n/**\n * Returns true if the block defines support for custom class name.\n *\n * @param {string|Object} nameOrType Block name or type object.\n * @return {boolean} Whether the block supports the feature.\n */\nexport const hasCustomClassNameSupport = ( nameOrType ) =>\n\thasBlockSupport( nameOrType, CUSTOM_CLASS_NAME_SUPPORT_KEY, true );\n\n/**\n * Returns the block support value for custom class name, if defined.\n *\n * @param {string|Object} nameOrType Block name or type object.\n * @return {unknown} The block support value.\n */\nexport const getCustomClassNameSupport = ( nameOrType ) =>\n\tgetBlockSupport( nameOrType, CUSTOM_CLASS_NAME_SUPPORT_KEY, true );\n\n/**\n * Returns true if the block defines support for font family.\n *\n * @param {string|Object} nameOrType Block name or type object.\n * @return {boolean} Whether the block supports the feature.\n */\nexport const hasFontFamilySupport = ( nameOrType ) =>\n\thasBlockSupport( nameOrType, FONT_FAMILY_SUPPORT_KEY );\n\n/**\n * Returns the block support value for font family, if defined.\n *\n * @param {string|Object} nameOrType Block name or type object.\n * @return {unknown} The block support value.\n */\nexport const getFontFamilySupport = ( nameOrType ) =>\n\tgetBlockSupport( nameOrType, FONT_FAMILY_SUPPORT_KEY );\n\n/**\n * Returns true if the block defines support for font size.\n *\n * @param {string|Object} nameOrType Block name or type object.\n * @return {boolean} Whether the block supports the feature.\n */\nexport const hasFontSizeSupport = ( nameOrType ) =>\n\thasBlockSupport( nameOrType, FONT_SIZE_SUPPORT_KEY );\n\n/**\n * Returns the block support value for font size, if defined.\n *\n * @param {string|Object} nameOrType Block name or type object.\n * @return {unknown} The block support value.\n */\nexport const getFontSizeSupport = ( nameOrType ) =>\n\tgetBlockSupport( nameOrType, FONT_SIZE_SUPPORT_KEY );\n\n/**\n * Returns true if the block defines support for layout.\n *\n * @param {string|Object} nameOrType Block name or type object.\n * @return {boolean} Whether the block supports the feature.\n */\nexport const hasLayoutSupport = ( nameOrType ) =>\n\thasBlockSupport( nameOrType, LAYOUT_SUPPORT_KEY );\n\n/**\n * Returns the block support value for layout, if defined.\n *\n * @param {string|Object} nameOrType Block name or type object.\n * @return {unknown} The block support value.\n */\nexport const getLayoutSupport = ( nameOrType ) =>\n\tgetBlockSupport( nameOrType, LAYOUT_SUPPORT_KEY );\n\n/**\n * Returns true if the block defines support for style.\n *\n * @param {string|Object} nameOrType Block name or type object.\n * @return {boolean} Whether the block supports the feature.\n */\nexport const hasStyleSupport = ( nameOrType ) =>\n\tstyleSupportKeys.some( ( key ) => hasBlockSupport( nameOrType, key ) );\n","/**\n * WordPress dependencies\n */\nimport { useCallback } from '@wordpress/element';\nimport { getBlockType, parse } from '@wordpress/blocks';\nimport { useDispatch, useRegistry } from '@wordpress/data';\nimport { store as noticesStore } from '@wordpress/notices';\nimport { __, sprintf } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport {\n\thasAlignSupport,\n\thasBorderSupport,\n\thasBackgroundColorSupport,\n\thasTextColorSupport,\n\thasGradientSupport,\n\thasCustomClassNameSupport,\n\thasFontFamilySupport,\n\thasFontSizeSupport,\n\thasLayoutSupport,\n\thasStyleSupport,\n} from '../../hooks/supports';\n\n/**\n * Determine if the copied text looks like serialized blocks or not.\n * Since plain text will always get parsed into a freeform block,\n * we check that if the parsed blocks is anything other than that.\n *\n * @param {string} text The copied text.\n * @return {boolean} True if the text looks like serialized blocks, false otherwise.\n */\nfunction hasSerializedBlocks( text ) {\n\ttry {\n\t\tconst blocks = parse( text, {\n\t\t\t__unstableSkipMigrationLogs: true,\n\t\t\t__unstableSkipAutop: true,\n\t\t} );\n\t\tif ( blocks.length === 1 && blocks[ 0 ].name === 'core/freeform' ) {\n\t\t\t// It's likely that the text is just plain text and not serialized blocks.\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t} catch ( err ) {\n\t\t// Parsing error, the text is not serialized blocks.\n\t\t// (Even though that it technically won't happen)\n\t\treturn false;\n\t}\n}\n\n/**\n * Style attributes are attributes being added in `block-editor/src/hooks/*`.\n * (Except for some unrelated to style like `anchor` or `settings`.)\n * They generally represent the default block supports.\n */\nconst STYLE_ATTRIBUTES = {\n\talign: hasAlignSupport,\n\tborderColor: ( nameOrType ) => hasBorderSupport( nameOrType, 'color' ),\n\tbackgroundColor: hasBackgroundColorSupport,\n\ttextColor: hasTextColorSupport,\n\tgradient: hasGradientSupport,\n\tclassName: hasCustomClassNameSupport,\n\tfontFamily: hasFontFamilySupport,\n\tfontSize: hasFontSizeSupport,\n\tlayout: hasLayoutSupport,\n\tstyle: hasStyleSupport,\n};\n\n/**\n * Get the \"style attributes\" from a given block to a target block.\n *\n * @param {WPBlock} sourceBlock The source block.\n * @param {WPBlock} targetBlock The target block.\n * @return {Object} the filtered attributes object.\n */\nfunction getStyleAttributes( sourceBlock, targetBlock ) {\n\treturn Object.entries( STYLE_ATTRIBUTES ).reduce(\n\t\t( attributes, [ attributeKey, hasSupport ] ) => {\n\t\t\t// Only apply the attribute if both blocks support it.\n\t\t\tif (\n\t\t\t\thasSupport( sourceBlock.name ) &&\n\t\t\t\thasSupport( targetBlock.name )\n\t\t\t) {\n\t\t\t\t// Override attributes that are not present in the block to their defaults.\n\t\t\t\tattributes[ attributeKey ] =\n\t\t\t\t\tsourceBlock.attributes[ attributeKey ];\n\t\t\t}\n\t\t\treturn attributes;\n\t\t},\n\t\t{}\n\t);\n}\n\n/**\n * Update the target blocks with style attributes recursively.\n *\n * @param {WPBlock[]} targetBlocks          The target blocks to be updated.\n * @param {WPBlock[]} sourceBlocks          The source blocks to get th style attributes from.\n * @param {Function}  updateBlockAttributes The function to update the attributes.\n */\nfunction recursivelyUpdateBlockAttributes(\n\ttargetBlocks,\n\tsourceBlocks,\n\tupdateBlockAttributes\n) {\n\tfor (\n\t\tlet index = 0;\n\t\tindex < Math.min( sourceBlocks.length, targetBlocks.length );\n\t\tindex += 1\n\t) {\n\t\tupdateBlockAttributes(\n\t\t\ttargetBlocks[ index ].clientId,\n\t\t\tgetStyleAttributes( sourceBlocks[ index ], targetBlocks[ index ] )\n\t\t);\n\n\t\trecursivelyUpdateBlockAttributes(\n\t\t\ttargetBlocks[ index ].innerBlocks,\n\t\t\tsourceBlocks[ index ].innerBlocks,\n\t\t\tupdateBlockAttributes\n\t\t);\n\t}\n}\n\n/**\n * A hook to return a pasteStyles event function for handling pasting styles to blocks.\n *\n * @return {Function} A function to update the styles to the blocks.\n */\nexport default function usePasteStyles() {\n\tconst registry = useRegistry();\n\tconst { updateBlockAttributes } = useDispatch( blockEditorStore );\n\tconst { createSuccessNotice, createWarningNotice, createErrorNotice } =\n\t\tuseDispatch( noticesStore );\n\n\treturn useCallback(\n\t\tasync ( targetBlocks ) => {\n\t\t\tlet html = '';\n\t\t\ttry {\n\t\t\t\t// `http:` sites won't have the clipboard property on navigator.\n\t\t\t\t// (with the exception of localhost.)\n\t\t\t\tif ( ! window.navigator.clipboard ) {\n\t\t\t\t\tcreateErrorNotice(\n\t\t\t\t\t\t__(\n\t\t\t\t\t\t\t'Unable to paste styles. This feature is only available on secure (https) sites in supporting browsers.'\n\t\t\t\t\t\t),\n\t\t\t\t\t\t{ type: 'snackbar' }\n\t\t\t\t\t);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\thtml = await window.navigator.clipboard.readText();\n\t\t\t} catch ( error ) {\n\t\t\t\t// Possibly the permission is denied.\n\t\t\t\tcreateErrorNotice(\n\t\t\t\t\t__(\n\t\t\t\t\t\t'Unable to paste styles. Please allow browser clipboard permissions before continuing.'\n\t\t\t\t\t),\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'snackbar',\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Abort if the copied text is empty or doesn't look like serialized blocks.\n\t\t\tif ( ! html || ! hasSerializedBlocks( html ) ) {\n\t\t\t\tcreateWarningNotice(\n\t\t\t\t\t__(\n\t\t\t\t\t\t\"Unable to paste styles. Block styles couldn't be found within the copied content.\"\n\t\t\t\t\t),\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'snackbar',\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst copiedBlocks = parse( html );\n\n\t\t\tif ( copiedBlocks.length === 1 ) {\n\t\t\t\t// Apply styles of the block to all the target blocks.\n\t\t\t\tregistry.batch( () => {\n\t\t\t\t\trecursivelyUpdateBlockAttributes(\n\t\t\t\t\t\ttargetBlocks,\n\t\t\t\t\t\ttargetBlocks.map( () => copiedBlocks[ 0 ] ),\n\t\t\t\t\t\tupdateBlockAttributes\n\t\t\t\t\t);\n\t\t\t\t} );\n\t\t\t} else {\n\t\t\t\tregistry.batch( () => {\n\t\t\t\t\trecursivelyUpdateBlockAttributes(\n\t\t\t\t\t\ttargetBlocks,\n\t\t\t\t\t\tcopiedBlocks,\n\t\t\t\t\t\tupdateBlockAttributes\n\t\t\t\t\t);\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\tif ( targetBlocks.length === 1 ) {\n\t\t\t\tconst title = getBlockType( targetBlocks[ 0 ].name )?.title;\n\t\t\t\tcreateSuccessNotice(\n\t\t\t\t\tsprintf(\n\t\t\t\t\t\t// Translators: Name of the block being pasted, e.g. \"Paragraph\".\n\t\t\t\t\t\t__( 'Pasted styles to %s.' ),\n\t\t\t\t\t\ttitle\n\t\t\t\t\t),\n\t\t\t\t\t{ type: 'snackbar' }\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tcreateSuccessNotice(\n\t\t\t\t\tsprintf(\n\t\t\t\t\t\t// Translators: The number of the blocks.\n\t\t\t\t\t\t__( 'Pasted styles to %d blocks.' ),\n\t\t\t\t\t\ttargetBlocks.length\n\t\t\t\t\t),\n\t\t\t\t\t{ type: 'snackbar' }\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t\t[\n\t\t\tregistry.batch,\n\t\t\tupdateBlockAttributes,\n\t\t\tcreateSuccessNotice,\n\t\t\tcreateWarningNotice,\n\t\t\tcreateErrorNotice,\n\t\t]\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport {\n\thasBlockSupport,\n\tswitchToBlockType,\n\tstore as blocksStore,\n} from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport { useNotifyCopy } from '../../utils/use-notify-copy';\nimport usePasteStyles from '../use-paste-styles';\nimport { store as blockEditorStore } from '../../store';\n\nexport default function BlockActions( {\n\tclientIds,\n\tchildren,\n\t__experimentalUpdateSelection: updateSelection,\n} ) {\n\tconst { getDefaultBlockName, getGroupingBlockName } =\n\t\tuseSelect( blocksStore );\n\tconst selected = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tcanInsertBlockType,\n\t\t\t\tgetBlockRootClientId,\n\t\t\t\tgetBlocksByClientId,\n\t\t\t\tgetDirectInsertBlock,\n\t\t\t\tcanMoveBlocks,\n\t\t\t\tcanRemoveBlocks,\n\t\t\t} = select( blockEditorStore );\n\n\t\t\tconst blocks = getBlocksByClientId( clientIds );\n\t\t\tconst rootClientId = getBlockRootClientId( clientIds[ 0 ] );\n\t\t\tconst canInsertDefaultBlock = canInsertBlockType(\n\t\t\t\tgetDefaultBlockName(),\n\t\t\t\trootClientId\n\t\t\t);\n\t\t\tconst directInsertBlock = rootClientId\n\t\t\t\t? getDirectInsertBlock( rootClientId )\n\t\t\t\t: null;\n\n\t\t\treturn {\n\t\t\t\tcanMove: canMoveBlocks( clientIds, rootClientId ),\n\t\t\t\tcanRemove: canRemoveBlocks( clientIds, rootClientId ),\n\t\t\t\tcanInsertBlock: canInsertDefaultBlock || !! directInsertBlock,\n\t\t\t\tcanCopyStyles: blocks.every( ( block ) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t!! block &&\n\t\t\t\t\t\t( hasBlockSupport( block.name, 'color' ) ||\n\t\t\t\t\t\t\thasBlockSupport( block.name, 'typography' ) )\n\t\t\t\t\t);\n\t\t\t\t} ),\n\t\t\t\tcanDuplicate: blocks.every( ( block ) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t!! block &&\n\t\t\t\t\t\thasBlockSupport( block.name, 'multiple', true ) &&\n\t\t\t\t\t\tcanInsertBlockType( block.name, rootClientId )\n\t\t\t\t\t);\n\t\t\t\t} ),\n\t\t\t};\n\t\t},\n\t\t[ clientIds, getDefaultBlockName ]\n\t);\n\tconst { getBlocksByClientId, getBlocks } = useSelect( blockEditorStore );\n\n\tconst { canMove, canRemove, canInsertBlock, canCopyStyles, canDuplicate } =\n\t\tselected;\n\n\tconst {\n\t\tremoveBlocks,\n\t\treplaceBlocks,\n\t\tduplicateBlocks,\n\t\tinsertAfterBlock,\n\t\tinsertBeforeBlock,\n\t\tflashBlock,\n\t\tsetBlockMovingClientId,\n\t\tsetNavigationMode,\n\t\tselectBlock,\n\t} = useDispatch( blockEditorStore );\n\n\tconst notifyCopy = useNotifyCopy();\n\tconst pasteStyles = usePasteStyles();\n\n\treturn children( {\n\t\tcanCopyStyles,\n\t\tcanDuplicate,\n\t\tcanInsertBlock,\n\t\tcanMove,\n\t\tcanRemove,\n\t\tonDuplicate() {\n\t\t\treturn duplicateBlocks( clientIds, updateSelection );\n\t\t},\n\t\tonRemove() {\n\t\t\treturn removeBlocks( clientIds, updateSelection );\n\t\t},\n\t\tonInsertBefore() {\n\t\t\tinsertBeforeBlock( clientIds[ 0 ] );\n\t\t},\n\t\tonInsertAfter() {\n\t\t\tinsertAfterBlock( clientIds[ clientIds.length - 1 ] );\n\t\t},\n\t\tonMoveTo() {\n\t\t\tsetNavigationMode( true );\n\t\t\tselectBlock( clientIds[ 0 ] );\n\t\t\tsetBlockMovingClientId( clientIds[ 0 ] );\n\t\t},\n\t\tonGroup() {\n\t\t\tif ( ! clientIds.length ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst groupingBlockName = getGroupingBlockName();\n\n\t\t\t// Activate the `transform` on `core/group` which does the conversion.\n\t\t\tconst newBlocks = switchToBlockType(\n\t\t\t\tgetBlocksByClientId( clientIds ),\n\t\t\t\tgroupingBlockName\n\t\t\t);\n\n\t\t\tif ( ! newBlocks ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\treplaceBlocks( clientIds, newBlocks );\n\t\t},\n\t\tonUngroup() {\n\t\t\tif ( ! clientIds.length ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst innerBlocks = getBlocks( clientIds[ 0 ] );\n\t\t\tif ( ! innerBlocks.length ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\treplaceBlocks( clientIds, innerBlocks );\n\t\t},\n\t\tonCopy() {\n\t\t\tif ( clientIds.length === 1 ) {\n\t\t\t\tflashBlock( clientIds[ 0 ] );\n\t\t\t}\n\t\t\tnotifyCopy( 'copy', clientIds );\n\t\t},\n\t\tasync onPasteStyles() {\n\t\t\tawait pasteStyles( getBlocksByClientId( clientIds ) );\n\t\t},\n\t} );\n}\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { __ } from '@wordpress/i18n';\r\nimport { MenuItem } from '@wordpress/components';\r\nimport { rawHandler, getBlockContent } from '@wordpress/blocks';\r\nimport { useDispatch, useSelect } from '@wordpress/data';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as blockEditorStore } from '../../store';\r\n\r\nfunction BlockHTMLConvertButton( { clientId } ) {\r\n\tconst block = useSelect(\r\n\t\t( select ) => select( blockEditorStore ).getBlock( clientId ),\r\n\t\t[ clientId ]\r\n\t);\r\n\tconst { replaceBlocks } = useDispatch( blockEditorStore );\r\n\r\n\tif ( ! block || block.name !== 'core/html' ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<MenuItem\r\n\t\t\tonClick={ () =>\r\n\t\t\t\treplaceBlocks(\r\n\t\t\t\t\tclientId,\r\n\t\t\t\t\trawHandler( { HTML: getBlockContent( block ) } )\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t>\r\n\t\t\t{ __( 'Convert to Blocks' ) }\r\n\t\t</MenuItem>\r\n\t);\r\n}\r\n\r\nexport default BlockHTMLConvertButton;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { createSlotFill } from '@wordpress/components';\r\n\r\nconst { Fill: __unstableBlockSettingsMenuFirstItem, Slot } = createSlotFill(\r\n\t'__unstableBlockSettingsMenuFirstItem'\r\n);\r\n\r\n__unstableBlockSettingsMenuFirstItem.Slot = Slot;\r\n\r\nexport default __unstableBlockSettingsMenuFirstItem;\r\n","/**\n * WordPress dependencies\n */\nimport { useRef } from '@wordpress/element';\nimport { MenuItem } from '@wordpress/components';\nimport { useViewportMatch } from '@wordpress/compose';\nimport { useDispatch } from '@wordpress/data';\nimport { __, sprintf } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport BlockIcon from '../block-icon';\nimport { useShowHoveredOrFocusedGestures } from '../block-toolbar/utils';\nimport { store as blockEditorStore } from '../../store';\n\nexport default function BlockParentSelectorMenuItem( {\n\tparentClientId,\n\tparentBlockType,\n} ) {\n\tconst isSmallViewport = useViewportMatch( 'medium', '<' );\n\tconst { selectBlock } = useDispatch( blockEditorStore );\n\n\t// Allows highlighting the parent block outline when focusing or hovering\n\t// the parent block selector within the child.\n\tconst menuItemRef = useRef();\n\tconst gesturesProps = useShowHoveredOrFocusedGestures( {\n\t\tref: menuItemRef,\n\t\thighlightParent: true,\n\t} );\n\n\tif ( ! isSmallViewport ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<MenuItem\n\t\t\t{ ...gesturesProps }\n\t\t\tref={ menuItemRef }\n\t\t\ticon={ <BlockIcon icon={ parentBlockType.icon } /> }\n\t\t\tonClick={ () => selectBlock( parentClientId ) }\n\t\t>\n\t\t\t{ sprintf(\n\t\t\t\t/* translators: %s: Name of the block's parent. */\n\t\t\t\t__( 'Select parent block (%s)' ),\n\t\t\t\tparentBlockType.title\n\t\t\t) }\n\t\t</MenuItem>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport {\n\tgetBlockType,\n\tserialize,\n\tstore as blocksStore,\n} from '@wordpress/blocks';\nimport { DropdownMenu, MenuGroup, MenuItem } from '@wordpress/components';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { moreVertical } from '@wordpress/icons';\nimport { Children, cloneElement } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport { displayShortcut } from '@wordpress/keycodes';\nimport {\n\tstore as keyboardShortcutsStore,\n\t__unstableUseShortcutEventMatch,\n} from '@wordpress/keyboard-shortcuts';\nimport { pipe, useCopyToClipboard } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport BlockActions from '../block-actions';\nimport BlockHTMLConvertButton from './block-html-convert-button';\nimport __unstableBlockSettingsMenuFirstItem from './block-settings-menu-first-item';\nimport BlockSettingsMenuControls from '../block-settings-menu-controls';\nimport BlockParentSelectorMenuItem from './block-parent-selector-menu-item';\nimport { store as blockEditorStore } from '../../store';\nimport { unlock } from '../../lock-unlock';\n\nconst POPOVER_PROPS = {\n\tclassName: 'block-editor-block-settings-menu__popover',\n\tplacement: 'bottom-start',\n};\n\nfunction CopyMenuItem( { clientIds, onCopy, label, shortcut } ) {\n\tconst { getBlocksByClientId } = useSelect( blockEditorStore );\n\tconst ref = useCopyToClipboard(\n\t\t() => serialize( getBlocksByClientId( clientIds ) ),\n\t\tonCopy\n\t);\n\tconst copyMenuItemLabel = label ? label : __( 'Copy' );\n\treturn (\n\t\t<MenuItem ref={ ref } shortcut={ shortcut }>\n\t\t\t{ copyMenuItemLabel }\n\t\t</MenuItem>\n\t);\n}\n\nexport function BlockSettingsDropdown( {\n\tblock,\n\tclientIds,\n\tchildren,\n\t__experimentalSelectBlock,\n\t...props\n} ) {\n\t// Get the client id of the current block for this menu, if one is set.\n\tconst currentClientId = block?.clientId;\n\tconst count = clientIds.length;\n\tconst firstBlockClientId = clientIds[ 0 ];\n\tconst {\n\t\tfirstParentClientId,\n\t\tonlyBlock,\n\t\tparentBlockType,\n\t\tpreviousBlockClientId,\n\t\tselectedBlockClientIds,\n\t\topenedBlockSettingsMenu,\n\t} = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tgetBlockCount,\n\t\t\t\tgetBlockName,\n\t\t\t\tgetBlockRootClientId,\n\t\t\t\tgetPreviousBlockClientId,\n\t\t\t\tgetSelectedBlockClientIds,\n\t\t\t\tgetBlockAttributes,\n\t\t\t\tgetOpenedBlockSettingsMenu,\n\t\t\t} = unlock( select( blockEditorStore ) );\n\n\t\t\tconst { getActiveBlockVariation } = select( blocksStore );\n\n\t\t\tconst _firstParentClientId =\n\t\t\t\tgetBlockRootClientId( firstBlockClientId );\n\t\t\tconst parentBlockName =\n\t\t\t\t_firstParentClientId && getBlockName( _firstParentClientId );\n\n\t\t\treturn {\n\t\t\t\tfirstParentClientId: _firstParentClientId,\n\t\t\t\tonlyBlock: 1 === getBlockCount( _firstParentClientId ),\n\t\t\t\tparentBlockType:\n\t\t\t\t\t_firstParentClientId &&\n\t\t\t\t\t( getActiveBlockVariation(\n\t\t\t\t\t\tparentBlockName,\n\t\t\t\t\t\tgetBlockAttributes( _firstParentClientId )\n\t\t\t\t\t) ||\n\t\t\t\t\t\tgetBlockType( parentBlockName ) ),\n\t\t\t\tpreviousBlockClientId:\n\t\t\t\t\tgetPreviousBlockClientId( firstBlockClientId ),\n\t\t\t\tselectedBlockClientIds: getSelectedBlockClientIds(),\n\t\t\t\topenedBlockSettingsMenu: getOpenedBlockSettingsMenu(),\n\t\t\t};\n\t\t},\n\t\t[ firstBlockClientId ]\n\t);\n\tconst { getBlockOrder, getSelectedBlockClientIds } =\n\t\tuseSelect( blockEditorStore );\n\n\tconst { setOpenedBlockSettingsMenu } = unlock(\n\t\tuseDispatch( blockEditorStore )\n\t);\n\n\tconst shortcuts = useSelect( ( select ) => {\n\t\tconst { getShortcutRepresentation } = select( keyboardShortcutsStore );\n\t\treturn {\n\t\t\tduplicate: getShortcutRepresentation(\n\t\t\t\t'core/block-editor/duplicate'\n\t\t\t),\n\t\t\tremove: getShortcutRepresentation( 'core/block-editor/remove' ),\n\t\t\tinsertAfter: getShortcutRepresentation(\n\t\t\t\t'core/block-editor/insert-after'\n\t\t\t),\n\t\t\tinsertBefore: getShortcutRepresentation(\n\t\t\t\t'core/block-editor/insert-before'\n\t\t\t),\n\t\t};\n\t}, [] );\n\tconst isMatch = __unstableUseShortcutEventMatch();\n\tconst hasSelectedBlocks = selectedBlockClientIds.length > 0;\n\n\tasync function updateSelectionAfterDuplicate( clientIdsPromise ) {\n\t\tif ( ! __experimentalSelectBlock ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst ids = await clientIdsPromise;\n\t\tif ( ids && ids[ 0 ] ) {\n\t\t\t__experimentalSelectBlock( ids[ 0 ], false );\n\t\t}\n\t}\n\n\tfunction updateSelectionAfterRemove() {\n\t\tif ( ! __experimentalSelectBlock ) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet blockToFocus = previousBlockClientId || firstParentClientId;\n\n\t\t// Focus the first block if there's no previous block nor parent block.\n\t\tif ( ! blockToFocus ) {\n\t\t\tblockToFocus = getBlockOrder()[ 0 ];\n\t\t}\n\n\t\t// Only update the selection if the original selection is removed.\n\t\tconst shouldUpdateSelection =\n\t\t\thasSelectedBlocks && getSelectedBlockClientIds().length === 0;\n\n\t\t__experimentalSelectBlock( blockToFocus, shouldUpdateSelection );\n\t}\n\n\t// This can occur when the selected block (the parent)\n\t// displays child blocks within a List View.\n\tconst parentBlockIsSelected =\n\t\tselectedBlockClientIds?.includes( firstParentClientId );\n\n\t// When a currentClientId is in use, treat the menu as a controlled component.\n\t// This ensures that only one block settings menu is open at a time.\n\t// This is a temporary solution to work around an issue with `onFocusOutside`\n\t// where it does not allow a dropdown to be closed if focus was never within\n\t// the dropdown to begin with. Examples include a user either CMD+Clicking or\n\t// right clicking into an inactive window.\n\t// See: https://github.com/WordPress/gutenberg/pull/54083\n\tconst open = ! currentClientId\n\t\t? undefined\n\t\t: openedBlockSettingsMenu === currentClientId || false;\n\n\tfunction onToggle( localOpen ) {\n\t\tif ( localOpen && openedBlockSettingsMenu !== currentClientId ) {\n\t\t\tsetOpenedBlockSettingsMenu( currentClientId );\n\t\t} else if (\n\t\t\t! localOpen &&\n\t\t\topenedBlockSettingsMenu &&\n\t\t\topenedBlockSettingsMenu === currentClientId\n\t\t) {\n\t\t\tsetOpenedBlockSettingsMenu( undefined );\n\t\t}\n\t}\n\n\treturn (\n\t\t<BlockActions\n\t\t\tclientIds={ clientIds }\n\t\t\t__experimentalUpdateSelection={ ! __experimentalSelectBlock }\n\t\t>\n\t\t\t{ ( {\n\t\t\t\tcanCopyStyles,\n\t\t\t\tcanDuplicate,\n\t\t\t\tcanInsertBlock,\n\t\t\t\tcanMove,\n\t\t\t\tcanRemove,\n\t\t\t\tonDuplicate,\n\t\t\t\tonInsertAfter,\n\t\t\t\tonInsertBefore,\n\t\t\t\tonRemove,\n\t\t\t\tonCopy,\n\t\t\t\tonPasteStyles,\n\t\t\t\tonMoveTo,\n\t\t\t} ) => (\n\t\t\t\t<DropdownMenu\n\t\t\t\t\ticon={ moreVertical }\n\t\t\t\t\tlabel={ __( 'Options' ) }\n\t\t\t\t\tclassName=\"block-editor-block-settings-menu\"\n\t\t\t\t\tpopoverProps={ POPOVER_PROPS }\n\t\t\t\t\topen={ open }\n\t\t\t\t\tonToggle={ onToggle }\n\t\t\t\t\tnoIcons\n\t\t\t\t\tmenuProps={ {\n\t\t\t\t\t\t/**\n\t\t\t\t\t\t * @param {KeyboardEvent} event\n\t\t\t\t\t\t */\n\t\t\t\t\t\tonKeyDown( event ) {\n\t\t\t\t\t\t\tif ( event.defaultPrevented ) return;\n\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tisMatch( 'core/block-editor/remove', event ) &&\n\t\t\t\t\t\t\t\tcanRemove\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\t\tonRemove();\n\t\t\t\t\t\t\t\tupdateSelectionAfterRemove();\n\t\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\t\tisMatch(\n\t\t\t\t\t\t\t\t\t'core/block-editor/duplicate',\n\t\t\t\t\t\t\t\t\tevent\n\t\t\t\t\t\t\t\t) &&\n\t\t\t\t\t\t\t\tcanDuplicate\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\t\tupdateSelectionAfterDuplicate( onDuplicate() );\n\t\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\t\tisMatch(\n\t\t\t\t\t\t\t\t\t'core/block-editor/insert-after',\n\t\t\t\t\t\t\t\t\tevent\n\t\t\t\t\t\t\t\t) &&\n\t\t\t\t\t\t\t\tcanInsertBlock\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\t\tsetOpenedBlockSettingsMenu( undefined );\n\t\t\t\t\t\t\t\tonInsertAfter();\n\t\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\t\tisMatch(\n\t\t\t\t\t\t\t\t\t'core/block-editor/insert-before',\n\t\t\t\t\t\t\t\t\tevent\n\t\t\t\t\t\t\t\t) &&\n\t\t\t\t\t\t\t\tcanInsertBlock\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\t\tsetOpenedBlockSettingsMenu( undefined );\n\t\t\t\t\t\t\t\tonInsertBefore();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t} }\n\t\t\t\t\t{ ...props }\n\t\t\t\t>\n\t\t\t\t\t{ ( { onClose } ) => (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<MenuGroup>\n\t\t\t\t\t\t\t\t<__unstableBlockSettingsMenuFirstItem.Slot\n\t\t\t\t\t\t\t\t\tfillProps={ { onClose } }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{ ! parentBlockIsSelected &&\n\t\t\t\t\t\t\t\t\t!! firstParentClientId && (\n\t\t\t\t\t\t\t\t\t\t<BlockParentSelectorMenuItem\n\t\t\t\t\t\t\t\t\t\t\tparentClientId={\n\t\t\t\t\t\t\t\t\t\t\t\tfirstParentClientId\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tparentBlockType={ parentBlockType }\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t{ count === 1 && (\n\t\t\t\t\t\t\t\t\t<BlockHTMLConvertButton\n\t\t\t\t\t\t\t\t\t\tclientId={ firstBlockClientId }\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t<CopyMenuItem\n\t\t\t\t\t\t\t\t\tclientIds={ clientIds }\n\t\t\t\t\t\t\t\t\tonCopy={ onCopy }\n\t\t\t\t\t\t\t\t\tshortcut={ displayShortcut.primary( 'c' ) }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{ canDuplicate && (\n\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\tonClick={ pipe(\n\t\t\t\t\t\t\t\t\t\t\tonClose,\n\t\t\t\t\t\t\t\t\t\t\tonDuplicate,\n\t\t\t\t\t\t\t\t\t\t\tupdateSelectionAfterDuplicate\n\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\tshortcut={ shortcuts.duplicate }\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{ __( 'Duplicate' ) }\n\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t{ canInsertBlock && (\n\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\t\tonClick={ pipe(\n\t\t\t\t\t\t\t\t\t\t\t\tonClose,\n\t\t\t\t\t\t\t\t\t\t\t\tonInsertBefore\n\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t\tshortcut={ shortcuts.insertBefore }\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{ __( 'Add before' ) }\n\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\t\tonClick={ pipe(\n\t\t\t\t\t\t\t\t\t\t\t\tonClose,\n\t\t\t\t\t\t\t\t\t\t\t\tonInsertAfter\n\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t\tshortcut={ shortcuts.insertAfter }\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{ __( 'Add after' ) }\n\t\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</MenuGroup>\n\t\t\t\t\t\t\t{ canCopyStyles && (\n\t\t\t\t\t\t\t\t<MenuGroup>\n\t\t\t\t\t\t\t\t\t<CopyMenuItem\n\t\t\t\t\t\t\t\t\t\tclientIds={ clientIds }\n\t\t\t\t\t\t\t\t\t\tonCopy={ onCopy }\n\t\t\t\t\t\t\t\t\t\tlabel={ __( 'Copy styles' ) }\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<MenuItem onClick={ onPasteStyles }>\n\t\t\t\t\t\t\t\t\t\t{ __( 'Paste styles' ) }\n\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t</MenuGroup>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t<BlockSettingsMenuControls.Slot\n\t\t\t\t\t\t\t\tfillProps={ {\n\t\t\t\t\t\t\t\t\tonClose,\n\t\t\t\t\t\t\t\t\tcanMove,\n\t\t\t\t\t\t\t\t\tonMoveTo,\n\t\t\t\t\t\t\t\t\tonlyBlock,\n\t\t\t\t\t\t\t\t\tcount,\n\t\t\t\t\t\t\t\t\tfirstBlockClientId,\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\tclientIds={ clientIds }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{ typeof children === 'function'\n\t\t\t\t\t\t\t\t? children( { onClose } )\n\t\t\t\t\t\t\t\t: Children.map( ( child ) =>\n\t\t\t\t\t\t\t\t\t\tcloneElement( child, { onClose } )\n\t\t\t\t\t\t\t\t  ) }\n\t\t\t\t\t\t\t{ canRemove && (\n\t\t\t\t\t\t\t\t<MenuGroup>\n\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\tonClick={ pipe(\n\t\t\t\t\t\t\t\t\t\t\tonClose,\n\t\t\t\t\t\t\t\t\t\t\tonRemove,\n\t\t\t\t\t\t\t\t\t\t\tupdateSelectionAfterRemove\n\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\tshortcut={ shortcuts.remove }\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{ __( 'Delete' ) }\n\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t</MenuGroup>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</>\n\t\t\t\t\t) }\n\t\t\t\t</DropdownMenu>\n\t\t\t) }\n\t\t</BlockActions>\n\t);\n}\n\nexport default BlockSettingsDropdown;\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { ToolbarGroup, ToolbarItem } from '@wordpress/components';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport BlockSettingsDropdown from './block-settings-dropdown';\r\n\r\nexport function BlockSettingsMenu( { clientIds, ...props } ) {\r\n\treturn (\r\n\t\t<ToolbarGroup>\r\n\t\t\t<ToolbarItem>\r\n\t\t\t\t{ ( toggleProps ) => (\r\n\t\t\t\t\t<BlockSettingsDropdown\r\n\t\t\t\t\t\tclientIds={ clientIds }\r\n\t\t\t\t\t\ttoggleProps={ toggleProps }\r\n\t\t\t\t\t\t{ ...props }\r\n\t\t\t\t\t/>\r\n\t\t\t\t) }\r\n\t\t\t</ToolbarItem>\r\n\t\t</ToolbarGroup>\r\n\t);\r\n}\r\n\r\nexport default BlockSettingsMenu;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { __ } from '@wordpress/i18n';\r\nimport { ToolbarButton, ToolbarGroup } from '@wordpress/components';\r\nimport { useReducer, useRef, useEffect } from '@wordpress/element';\r\nimport { lock, unlock } from '@wordpress/icons';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport BlockLockModal from './modal';\r\nimport useBlockLock from './use-block-lock';\r\n\r\nexport default function BlockLockToolbar( { clientId } ) {\r\n\tconst { canLock, isLocked } = useBlockLock( clientId );\r\n\r\n\tconst [ isModalOpen, toggleModal ] = useReducer(\r\n\t\t( isActive ) => ! isActive,\r\n\t\tfalse\r\n\t);\r\n\r\n\tconst hasLockButtonShown = useRef( false );\r\n\r\n\t// If the block lock button has been shown, we don't want to remove it\r\n\t// from the toolbar until the toolbar is rendered again without it.\r\n\t// Removing it beforehand can cause focus loss issues, such as when\r\n\t// unlocking the block from the modal. It needs to return focus from\r\n\t// whence it came, and to do that, we need to leave the button in the toolbar.\r\n\tuseEffect( () => {\r\n\t\tif ( isLocked ) {\r\n\t\t\thasLockButtonShown.current = true;\r\n\t\t}\r\n\t}, [ isLocked ] );\r\n\r\n\tif ( ! isLocked && ! hasLockButtonShown.current ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tlet label = isLocked ? __( 'Unlock' ) : __( 'Lock' );\r\n\r\n\tif ( ! canLock && isLocked ) {\r\n\t\tlabel = __( 'Locked' );\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<ToolbarGroup className=\"block-editor-block-lock-toolbar\">\r\n\t\t\t\t<ToolbarButton\r\n\t\t\t\t\taccessibleWhenDisabled\r\n\t\t\t\t\tdisabled={ ! canLock }\r\n\t\t\t\t\ticon={ isLocked ? lock : unlock }\r\n\t\t\t\t\tlabel={ label }\r\n\t\t\t\t\tonClick={ toggleModal }\r\n\t\t\t\t\taria-expanded={ isModalOpen }\r\n\t\t\t\t\taria-haspopup=\"dialog\"\r\n\t\t\t\t/>\r\n\t\t\t</ToolbarGroup>\r\n\t\t\t{ isModalOpen && (\r\n\t\t\t\t<BlockLockModal clientId={ clientId } onClose={ toggleModal } />\r\n\t\t\t) }\r\n\t\t</>\r\n\t);\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { Path, SVG } from '@wordpress/primitives';\r\n\r\nconst group = (\r\n\t<SVG viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n\t\t<Path d=\"M18 4h-7c-1.1 0-2 .9-2 2v3H6c-1.1 0-2 .9-2 2v7c0 1.1.9 2 2 2h7c1.1 0 2-.9 2-2v-3h3c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-4.5 14c0 .3-.2.5-.5.5H6c-.3 0-.5-.2-.5-.5v-7c0-.3.2-.5.5-.5h3V13c0 1.1.9 2 2 2h2.5v3zm0-4.5H11c-.3 0-.5-.2-.5-.5v-2.5H13c.3 0 .5.2.5.5v2.5zm5-.5c0 .3-.2.5-.5.5h-3V11c0-1.1-.9-2-2-2h-2.5V6c0-.3.2-.5.5-.5h7c.3 0 .5.2.5.5v7z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default group;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst row = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M4 6.5h5a2 2 0 0 1 2 2v7a2 2 0 0 1-2 2H4V16h5a.5.5 0 0 0 .5-.5v-7A.5.5 0 0 0 9 8H4V6.5Zm16 0h-5a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h5V16h-5a.5.5 0 0 1-.5-.5v-7A.5.5 0 0 1 15 8h5V6.5Z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default row;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst stack = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M17.5 4v5a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V4H8v5a.5.5 0 0 0 .5.5h7A.5.5 0 0 0 16 9V4h1.5Zm0 16v-5a2 2 0 0 0-2-2h-7a2 2 0 0 0-2 2v5H8v-5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 .5.5v5h1.5Z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default stack;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst grid = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path\r\n\t\t\td=\"m3 5c0-1.10457.89543-2 2-2h13.5c1.1046 0 2 .89543 2 2v13.5c0 1.1046-.8954 2-2 2h-13.5c-1.10457 0-2-.8954-2-2zm2-.5h6v6.5h-6.5v-6c0-.27614.22386-.5.5-.5zm-.5 8v6c0 .2761.22386.5.5.5h6v-6.5zm8 0v6.5h6c.2761 0 .5-.2239.5-.5v-6zm0-8v6.5h6.5v-6c0-.27614-.2239-.5-.5-.5z\"\r\n\t\t\tfillRule=\"evenodd\"\r\n\t\t\tclipRule=\"evenodd\"\r\n\t\t/>\r\n\t</SVG>\r\n);\r\n\r\nexport default grid;\r\n","/**\n * WordPress dependencies\n */\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { switchToBlockType, store as blocksStore } from '@wordpress/blocks';\nimport { ToolbarButton, ToolbarGroup } from '@wordpress/components';\nimport { group, row, stack, grid } from '@wordpress/icons';\nimport { _x } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { useConvertToGroupButtonProps } from '../convert-to-group-buttons';\nimport { store as blockEditorStore } from '../../store';\n\nconst layouts = {\n\tgroup: { type: 'constrained' },\n\trow: { type: 'flex', flexWrap: 'nowrap' },\n\tstack: { type: 'flex', orientation: 'vertical' },\n\tgrid: { type: 'grid' },\n};\n\nfunction BlockGroupToolbar() {\n\tconst { blocksSelection, clientIds, groupingBlockName, isGroupable } =\n\t\tuseConvertToGroupButtonProps();\n\tconst { replaceBlocks } = useDispatch( blockEditorStore );\n\n\tconst { canRemove, variations } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { canRemoveBlocks } = select( blockEditorStore );\n\t\t\tconst { getBlockVariations } = select( blocksStore );\n\n\t\t\treturn {\n\t\t\t\tcanRemove: canRemoveBlocks( clientIds ),\n\t\t\t\tvariations: getBlockVariations(\n\t\t\t\t\tgroupingBlockName,\n\t\t\t\t\t'transform'\n\t\t\t\t),\n\t\t\t};\n\t\t},\n\t\t[ clientIds, groupingBlockName ]\n\t);\n\n\tconst onConvertToGroup = ( layout ) => {\n\t\tconst newBlocks = switchToBlockType(\n\t\t\tblocksSelection,\n\t\t\tgroupingBlockName\n\t\t);\n\n\t\tif ( typeof layout !== 'string' ) {\n\t\t\tlayout = 'group';\n\t\t}\n\n\t\tif ( newBlocks && newBlocks.length > 0 ) {\n\t\t\t// Because the block is not in the store yet we can't use\n\t\t\t// updateBlockAttributes so need to manually update attributes.\n\t\t\tnewBlocks[ 0 ].attributes.layout = layouts[ layout ];\n\t\t\treplaceBlocks( clientIds, newBlocks );\n\t\t}\n\t};\n\n\tconst onConvertToRow = () => onConvertToGroup( 'row' );\n\tconst onConvertToStack = () => onConvertToGroup( 'stack' );\n\tconst onConvertToGrid = () => onConvertToGroup( 'grid' );\n\n\t// Don't render the button if the current selection cannot be grouped.\n\t// A good example is selecting multiple button blocks within a Buttons block:\n\t// The group block is not a valid child of Buttons, so we should not show the button.\n\t// Any blocks that are locked against removal also cannot be grouped.\n\tif ( ! isGroupable || ! canRemove ) {\n\t\treturn null;\n\t}\n\n\tconst canInsertRow = !! variations.find(\n\t\t( { name } ) => name === 'group-row'\n\t);\n\tconst canInsertStack = !! variations.find(\n\t\t( { name } ) => name === 'group-stack'\n\t);\n\tconst canInsertGrid = !! variations.find(\n\t\t( { name } ) => name === 'group-grid'\n\t);\n\n\treturn (\n\t\t<ToolbarGroup>\n\t\t\t<ToolbarButton\n\t\t\t\ticon={ group }\n\t\t\t\tlabel={ _x( 'Group', 'verb' ) }\n\t\t\t\tonClick={ onConvertToGroup }\n\t\t\t/>\n\t\t\t{ canInsertRow && (\n\t\t\t\t<ToolbarButton\n\t\t\t\t\ticon={ row }\n\t\t\t\t\tlabel={ _x( 'Row', 'single horizontal line' ) }\n\t\t\t\t\tonClick={ onConvertToRow }\n\t\t\t\t/>\n\t\t\t) }\n\t\t\t{ canInsertStack && (\n\t\t\t\t<ToolbarButton\n\t\t\t\t\ticon={ stack }\n\t\t\t\t\tlabel={ _x( 'Stack', 'verb' ) }\n\t\t\t\t\tonClick={ onConvertToStack }\n\t\t\t\t/>\n\t\t\t) }\n\t\t\t{ canInsertGrid && (\n\t\t\t\t<ToolbarButton\n\t\t\t\t\ticon={ grid }\n\t\t\t\t\tlabel={ _x( 'Grid', 'verb' ) }\n\t\t\t\t\tonClick={ onConvertToGrid }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</ToolbarGroup>\n\t);\n}\n\nexport default BlockGroupToolbar;\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { ToolbarButton, ToolbarGroup } from '@wordpress/components';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { useSelect, useDispatch } from '@wordpress/data';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as blockEditorStore } from '../../store';\r\n\r\nexport default function BlockEditVisuallyButton( { clientIds } ) {\r\n\t// Edit visually only works for single block selection.\r\n\tconst clientId = clientIds.length === 1 ? clientIds[ 0 ] : undefined;\r\n\tconst canEditVisually = useSelect(\r\n\t\t( select ) =>\r\n\t\t\t!! clientId &&\r\n\t\t\tselect( blockEditorStore ).getBlockMode( clientId ) === 'html',\r\n\t\t[ clientId ]\r\n\t);\r\n\tconst { toggleBlockMode } = useDispatch( blockEditorStore );\r\n\r\n\tif ( ! canEditVisually ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<ToolbarGroup>\r\n\t\t\t<ToolbarButton\r\n\t\t\t\tonClick={ () => {\r\n\t\t\t\t\ttoggleBlockMode( clientId );\r\n\t\t\t\t} }\r\n\t\t\t>\r\n\t\t\t\t{ __( 'Edit visually' ) }\r\n\t\t\t</ToolbarButton>\r\n\t\t</ToolbarGroup>\r\n\t);\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { createContext } from '@wordpress/element';\r\n\r\nconst __unstableBlockNameContext = createContext( '' );\r\n\r\nexport default __unstableBlockNameContext;\r\n","/**\n * WordPress dependencies\n */\nimport { NavigableMenu, Toolbar } from '@wordpress/components';\nimport {\n\tuseState,\n\tuseRef,\n\tuseLayoutEffect,\n\tuseEffect,\n\tuseCallback,\n} from '@wordpress/element';\nimport { useSelect } from '@wordpress/data';\nimport deprecated from '@wordpress/deprecated';\nimport { focus } from '@wordpress/dom';\nimport { useShortcut } from '@wordpress/keyboard-shortcuts';\nimport { ESCAPE } from '@wordpress/keycodes';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport { unlock } from '../../lock-unlock';\n\nfunction hasOnlyToolbarItem( elements ) {\n\tconst dataProp = 'toolbarItem';\n\treturn ! elements.some( ( element ) => ! ( dataProp in element.dataset ) );\n}\n\nfunction getAllFocusableToolbarItemsIn( container ) {\n\treturn Array.from(\n\t\tcontainer.querySelectorAll( '[data-toolbar-item]:not([disabled])' )\n\t);\n}\n\nfunction hasFocusWithin( container ) {\n\treturn container.contains( container.ownerDocument.activeElement );\n}\n\nfunction focusFirstTabbableIn( container ) {\n\tconst [ firstTabbable ] = focus.tabbable.find( container );\n\n\tif ( firstTabbable ) {\n\t\tfirstTabbable.focus( {\n\t\t\t// When focusing newly mounted toolbars,\n\t\t\t// the position of the popover is often not right on the first render\n\t\t\t// This prevents the layout shifts when focusing the dialogs.\n\t\t\tpreventScroll: true,\n\t\t} );\n\t}\n}\n\nfunction useIsAccessibleToolbar( toolbarRef ) {\n\t/*\n\t * By default, we'll assume the starting accessible state of the Toolbar\n\t * is true, as it seems to be the most common case.\n\t *\n\t * Transitioning from an (initial) false to true state causes the\n\t * <Toolbar /> component to mount twice, which is causing undesired\n\t * side-effects. These side-effects appear to only affect certain\n\t * E2E tests.\n\t *\n\t * This was initial discovered in this pull-request:\n\t * https://github.com/WordPress/gutenberg/pull/23425\n\t */\n\tconst initialAccessibleToolbarState = true;\n\n\t// By default, it's gonna render NavigableMenu. If all the tabbable elements\n\t// inside the toolbar are ToolbarItem components (or derived components like\n\t// ToolbarButton), then we can wrap them with the accessible Toolbar\n\t// component.\n\tconst [ isAccessibleToolbar, setIsAccessibleToolbar ] = useState(\n\t\tinitialAccessibleToolbarState\n\t);\n\n\tconst determineIsAccessibleToolbar = useCallback( () => {\n\t\tconst tabbables = focus.tabbable.find( toolbarRef.current );\n\t\tconst onlyToolbarItem = hasOnlyToolbarItem( tabbables );\n\t\tif ( ! onlyToolbarItem ) {\n\t\t\tdeprecated( 'Using custom components as toolbar controls', {\n\t\t\t\tsince: '5.6',\n\t\t\t\talternative:\n\t\t\t\t\t'ToolbarItem, ToolbarButton or ToolbarDropdownMenu components',\n\t\t\t\tlink: 'https://developer.wordpress.org/block-editor/components/toolbar-button/#inside-blockcontrols',\n\t\t\t} );\n\t\t}\n\t\tsetIsAccessibleToolbar( onlyToolbarItem );\n\t}, [ toolbarRef ] );\n\n\tuseLayoutEffect( () => {\n\t\t// Toolbar buttons may be rendered asynchronously, so we use\n\t\t// MutationObserver to check if the toolbar subtree has been modified.\n\t\tconst observer = new window.MutationObserver(\n\t\t\tdetermineIsAccessibleToolbar\n\t\t);\n\t\tobserver.observe( toolbarRef.current, {\n\t\t\tchildList: true,\n\t\t\tsubtree: true,\n\t\t} );\n\t\treturn () => observer.disconnect();\n\t}, [ determineIsAccessibleToolbar, isAccessibleToolbar, toolbarRef ] );\n\n\treturn isAccessibleToolbar;\n}\n\nfunction useToolbarFocus( {\n\ttoolbarRef,\n\tfocusOnMount,\n\tisAccessibleToolbar,\n\tdefaultIndex,\n\tonIndexChange,\n\tshouldUseKeyboardFocusShortcut,\n\tfocusEditorOnEscape,\n} ) {\n\t// Make sure we don't use modified versions of this prop.\n\tconst [ initialFocusOnMount ] = useState( focusOnMount );\n\tconst [ initialIndex ] = useState( defaultIndex );\n\n\tconst focusToolbar = useCallback( () => {\n\t\tfocusFirstTabbableIn( toolbarRef.current );\n\t}, [ toolbarRef ] );\n\n\tconst focusToolbarViaShortcut = () => {\n\t\tif ( shouldUseKeyboardFocusShortcut ) {\n\t\t\tfocusToolbar();\n\t\t}\n\t};\n\n\t// Focus on toolbar when pressing alt+F10 when the toolbar is visible.\n\tuseShortcut( 'core/block-editor/focus-toolbar', focusToolbarViaShortcut );\n\n\tuseEffect( () => {\n\t\tif ( initialFocusOnMount ) {\n\t\t\tfocusToolbar();\n\t\t}\n\t}, [ isAccessibleToolbar, initialFocusOnMount, focusToolbar ] );\n\n\tuseEffect( () => {\n\t\t// Store ref so we have access on useEffect cleanup: https://legacy.reactjs.org/blog/2020/08/10/react-v17-rc.html#effect-cleanup-timing\n\t\tconst navigableToolbarRef = toolbarRef.current;\n\t\t// If initialIndex is passed, we focus on that toolbar item when the\n\t\t// toolbar gets mounted and initial focus is not forced.\n\t\t// We have to wait for the next browser paint because block controls aren't\n\t\t// rendered right away when the toolbar gets mounted.\n\t\tlet raf = 0;\n\n\t\t// If the toolbar already had focus before the render, we don't want to move it.\n\t\t// https://github.com/WordPress/gutenberg/issues/58511\n\t\tif (\n\t\t\t! initialFocusOnMount &&\n\t\t\t! hasFocusWithin( navigableToolbarRef )\n\t\t) {\n\t\t\traf = window.requestAnimationFrame( () => {\n\t\t\t\tconst items =\n\t\t\t\t\tgetAllFocusableToolbarItemsIn( navigableToolbarRef );\n\t\t\t\tconst index = initialIndex || 0;\n\t\t\t\tif ( items[ index ] && hasFocusWithin( navigableToolbarRef ) ) {\n\t\t\t\t\titems[ index ].focus( {\n\t\t\t\t\t\t// When focusing newly mounted toolbars,\n\t\t\t\t\t\t// the position of the popover is often not right on the first render\n\t\t\t\t\t\t// This prevents the layout shifts when focusing the dialogs.\n\t\t\t\t\t\tpreventScroll: true,\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t\treturn () => {\n\t\t\twindow.cancelAnimationFrame( raf );\n\t\t\tif ( ! onIndexChange || ! navigableToolbarRef ) return;\n\t\t\t// When the toolbar element is unmounted and onIndexChange is passed, we\n\t\t\t// pass the focused toolbar item index so it can be hydrated later.\n\t\t\tconst items = getAllFocusableToolbarItemsIn( navigableToolbarRef );\n\t\t\tconst index = items.findIndex( ( item ) => item.tabIndex === 0 );\n\t\t\tonIndexChange( index );\n\t\t};\n\t}, [ initialIndex, initialFocusOnMount, onIndexChange, toolbarRef ] );\n\n\tconst { getLastFocus } = unlock( useSelect( blockEditorStore ) );\n\t/**\n\t * Handles returning focus to the block editor canvas when pressing escape.\n\t */\n\tuseEffect( () => {\n\t\tconst navigableToolbarRef = toolbarRef.current;\n\n\t\tif ( focusEditorOnEscape ) {\n\t\t\tconst handleKeyDown = ( event ) => {\n\t\t\t\tconst lastFocus = getLastFocus();\n\t\t\t\tif ( event.keyCode === ESCAPE && lastFocus?.current ) {\n\t\t\t\t\t// Focus the last focused element when pressing escape.\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tlastFocus.current.focus();\n\t\t\t\t}\n\t\t\t};\n\t\t\tnavigableToolbarRef.addEventListener( 'keydown', handleKeyDown );\n\t\t\treturn () => {\n\t\t\t\tnavigableToolbarRef.removeEventListener(\n\t\t\t\t\t'keydown',\n\t\t\t\t\thandleKeyDown\n\t\t\t\t);\n\t\t\t};\n\t\t}\n\t}, [ focusEditorOnEscape, getLastFocus, toolbarRef ] );\n}\n\nexport default function NavigableToolbar( {\n\tchildren,\n\tfocusOnMount,\n\tfocusEditorOnEscape = false,\n\tshouldUseKeyboardFocusShortcut = true,\n\t__experimentalInitialIndex: initialIndex,\n\t__experimentalOnIndexChange: onIndexChange,\n\t...props\n} ) {\n\tconst toolbarRef = useRef();\n\tconst isAccessibleToolbar = useIsAccessibleToolbar( toolbarRef );\n\n\tuseToolbarFocus( {\n\t\ttoolbarRef,\n\t\tfocusOnMount,\n\t\tdefaultIndex: initialIndex,\n\t\tonIndexChange,\n\t\tisAccessibleToolbar,\n\t\tshouldUseKeyboardFocusShortcut,\n\t\tfocusEditorOnEscape,\n\t} );\n\n\tif ( isAccessibleToolbar ) {\n\t\treturn (\n\t\t\t<Toolbar\n\t\t\t\tlabel={ props[ 'aria-label' ] }\n\t\t\t\tref={ toolbarRef }\n\t\t\t\t{ ...props }\n\t\t\t>\n\t\t\t\t{ children }\n\t\t\t</Toolbar>\n\t\t);\n\t}\n\n\treturn (\n\t\t<NavigableMenu\n\t\t\torientation=\"horizontal\"\n\t\t\trole=\"toolbar\"\n\t\t\tref={ toolbarRef }\n\t\t\t{ ...props }\n\t\t>\n\t\t\t{ children }\n\t\t</NavigableMenu>\n\t);\n}\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst shuffle = (\r\n\t<SVG viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/SVG\">\r\n\t\t<Path d=\"M17.192 6.75L15.47 5.03l1.06-1.06 3.537 3.53-3.537 3.53-1.06-1.06 1.723-1.72h-3.19c-.602 0-.993.202-1.28.498-.309.319-.538.792-.695 1.383-.13.488-.222 1.023-.296 1.508-.034.664-.116 1.413-.303 2.117-.193.721-.513 1.467-1.068 2.04-.575.594-1.359.954-2.357.954H4v-1.5h4.003c.601 0 .993-.202 1.28-.498.308-.319.538-.792.695-1.383.149-.557.216-1.093.288-1.662l.039-.31a9.653 9.653 0 0 1 .272-1.653c.193-.722.513-1.467 1.067-2.04.576-.594 1.36-.954 2.358-.954h3.19zM8.004 6.75c.8 0 1.46.23 1.988.628a6.24 6.24 0 0 0-.684 1.396 1.725 1.725 0 0 0-.024-.026c-.287-.296-.679-.498-1.28-.498H4v-1.5h4.003zM12.699 14.726c-.161.459-.38.94-.684 1.396.527.397 1.188.628 1.988.628h3.19l-1.722 1.72 1.06 1.06L20.067 16l-3.537-3.53-1.06 1.06 1.723 1.72h-3.19c-.602 0-.993-.202-1.28-.498a1.96 1.96 0 0 1-.024-.026z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default shuffle;\r\n","/**\n * WordPress dependencies\n */\nimport { shuffle } from '@wordpress/icons';\nimport { ToolbarButton, ToolbarGroup } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { useMemo } from '@wordpress/element';\nimport { useSelect, useDispatch } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\nconst EMPTY_ARRAY = [];\n\nfunction Container( props ) {\n\treturn (\n\t\t<ToolbarGroup>\n\t\t\t<ToolbarButton { ...props } />\n\t\t</ToolbarGroup>\n\t);\n}\n\nexport default function Shuffle( { clientId, as = Container } ) {\n\tconst { categories, patterns, patternName } = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tgetBlockAttributes,\n\t\t\t\tgetBlockRootClientId,\n\t\t\t\t__experimentalGetAllowedPatterns,\n\t\t\t} = select( blockEditorStore );\n\t\t\tconst attributes = getBlockAttributes( clientId );\n\t\t\tconst _categories = attributes?.metadata?.categories || EMPTY_ARRAY;\n\t\t\tconst _patternName = attributes?.metadata?.patternName;\n\t\t\tconst rootBlock = getBlockRootClientId( clientId );\n\t\t\tconst _patterns = __experimentalGetAllowedPatterns( rootBlock );\n\t\t\treturn {\n\t\t\t\tcategories: _categories,\n\t\t\t\tpatterns: _patterns,\n\t\t\t\tpatternName: _patternName,\n\t\t\t};\n\t\t},\n\t\t[ clientId ]\n\t);\n\tconst { replaceBlocks } = useDispatch( blockEditorStore );\n\tconst sameCategoryPatternsWithSingleWrapper = useMemo( () => {\n\t\tif (\n\t\t\t! categories ||\n\t\t\tcategories.length === 0 ||\n\t\t\t! patterns ||\n\t\t\tpatterns.length === 0\n\t\t) {\n\t\t\treturn EMPTY_ARRAY;\n\t\t}\n\t\treturn patterns.filter( ( pattern ) => {\n\t\t\treturn (\n\t\t\t\t// Check if the pattern has only one top level block,\n\t\t\t\t// otherwise we may shuffle to pattern that will not allow to continue shuffling.\n\t\t\t\tpattern.blocks.length === 1 &&\n\t\t\t\tpattern.categories?.some( ( category ) => {\n\t\t\t\t\treturn categories.includes( category );\n\t\t\t\t} )\n\t\t\t);\n\t\t} );\n\t}, [ categories, patterns ] );\n\tif ( sameCategoryPatternsWithSingleWrapper.length === 0 ) {\n\t\treturn null;\n\t}\n\n\tfunction getNextPattern() {\n\t\tconst numberOfPatterns = sameCategoryPatternsWithSingleWrapper.length;\n\t\tconst patternIndex = sameCategoryPatternsWithSingleWrapper.findIndex(\n\t\t\t( { name } ) => name === patternName\n\t\t);\n\t\tconst nextPatternIndex =\n\t\t\tpatternIndex + 1 < numberOfPatterns ? patternIndex + 1 : 0;\n\t\treturn sameCategoryPatternsWithSingleWrapper[ nextPatternIndex ];\n\t}\n\n\tconst ComponentToUse = as;\n\treturn (\n\t\t<ComponentToUse\n\t\t\tlabel={ __( 'Shuffle' ) }\n\t\t\ticon={ shuffle }\n\t\t\tonClick={ () => {\n\t\t\t\tconst nextPattern = getNextPattern();\n\t\t\t\tnextPattern.blocks[ 0 ].attributes = {\n\t\t\t\t\t...nextPattern.blocks[ 0 ].attributes,\n\t\t\t\t\tmetadata: {\n\t\t\t\t\t\t...nextPattern.blocks[ 0 ].attributes.metadata,\n\t\t\t\t\t\tcategories,\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t\treplaceBlocks( clientId, nextPattern.blocks );\n\t\t\t} }\n\t\t/>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\n\nconst connection = (\n\t<SVG\n\t\tviewBox=\"0 0 24 24\"\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\tfillRule=\"evenodd\"\n\t>\n\t\t<Path d=\"M19.53 4.47a.75.75 0 0 1 0 1.06L17.06 8l.77.769a3.155 3.155 0 0 1 .685 3.439 3.15 3.15 0 0 1-.685 1.022v.001L13.23 17.83v.001a3.15 3.15 0 0 1-4.462 0L8 17.06l-2.47 2.47a.75.75 0 0 1-1.06-1.06L6.94 16l-.77-.769a3.154 3.154 0 0 1-.685-3.439 3.15 3.15 0 0 1 .685-1.023l4.599-4.598a3.152 3.152 0 0 1 4.462 0l.769.768 2.47-2.47a.75.75 0 0 1 1.06 0Zm-2.76 7.7L15 13.94 10.06 9l1.771-1.77a1.65 1.65 0 0 1 2.338 0L16.77 9.83a1.649 1.649 0 0 1 0 2.338h-.001ZM13.94 15 9 10.06l-1.77 1.771a1.65 1.65 0 0 0 0 2.338l2.601 2.602a1.649 1.649 0 0 0 2.338 0v-.001L13.94 15Z\" />\n\t</SVG>\n);\n\nexport default connection;\n","/**\n * WordPress dependencies\n */\nimport { ToolbarItem, ToolbarGroup, Icon } from '@wordpress/components';\nimport { connection } from '@wordpress/icons';\nimport { _x } from '@wordpress/i18n';\n\nexport default function BlockBindingsToolbarIndicator() {\n\treturn (\n\t\t<ToolbarGroup>\n\t\t\t<ToolbarItem\n\t\t\t\tas={ 'div' }\n\t\t\t\taria-label={ _x( 'Connected', 'block toolbar button label' ) }\n\t\t\t\tclassName=\"block-editor-block-bindings-toolbar-indicator\"\n\t\t\t>\n\t\t\t\t<Icon icon={ connection } size={ 24 } />\n\t\t\t</ToolbarItem>\n\t\t</ToolbarGroup>\n\t);\n}\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { __experimentalUseSlotFills as useSlotFills } from '@wordpress/components';\r\nimport warning from '@wordpress/warning';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport groups from './groups';\r\n\r\nexport function useHasAnyBlockControls() {\r\n\tlet hasAnyBlockControls = false;\r\n\tfor ( const group in groups ) {\r\n\t\t// It is safe to violate the rules of hooks here as the `groups` object\r\n\t\t// is static and will not change length between renders. Do not return\r\n\t\t// early as that will cause the hook to be called a different number of\r\n\t\t// times between renders.\r\n\t\t// eslint-disable-next-line react-hooks/rules-of-hooks\r\n\t\tif ( useHasBlockControls( group ) ) {\r\n\t\t\thasAnyBlockControls = true;\r\n\t\t}\r\n\t}\r\n\treturn hasAnyBlockControls;\r\n}\r\n\r\nexport function useHasBlockControls( group = 'default' ) {\r\n\tconst Slot = groups[ group ]?.Slot;\r\n\tconst fills = useSlotFills( Slot?.__unstableName );\r\n\tif ( ! Slot ) {\r\n\t\twarning( `Unknown BlockControls group \"${ group }\" provided.` );\r\n\t\treturn null;\r\n\t}\r\n\treturn !! fills?.length;\r\n}\r\n","/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport { getBlockType, hasBlockSupport } from '@wordpress/blocks';\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport { useHasAnyBlockControls } from '../block-controls/use-has-block-controls';\n\n/**\n * Returns true if the block toolbar should be shown.\n *\n * @return {boolean} Whether the block toolbar component will be rendered.\n */\nexport function useHasBlockToolbar() {\n\tconst hasAnyBlockControls = useHasAnyBlockControls();\n\treturn useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tgetBlockEditingMode,\n\t\t\t\tgetBlockName,\n\t\t\t\tgetSelectedBlockClientIds,\n\t\t\t} = select( blockEditorStore );\n\n\t\t\tconst selectedBlockClientIds = getSelectedBlockClientIds();\n\t\t\tconst selectedBlockClientId = selectedBlockClientIds[ 0 ];\n\t\t\tconst isDefaultEditingMode =\n\t\t\t\tgetBlockEditingMode( selectedBlockClientId ) === 'default';\n\t\t\tconst blockType =\n\t\t\t\tselectedBlockClientId &&\n\t\t\t\tgetBlockType( getBlockName( selectedBlockClientId ) );\n\t\t\tconst isToolbarEnabled =\n\t\t\t\tblockType &&\n\t\t\t\thasBlockSupport( blockType, '__experimentalToolbar', true );\n\n\t\t\tif (\n\t\t\t\t! isToolbarEnabled ||\n\t\t\t\t( ! isDefaultEditingMode && ! hasAnyBlockControls )\n\t\t\t) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\t\t[ hasAnyBlockControls ]\n\t);\n}\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { useSelect } from '@wordpress/data';\nimport { useRef } from '@wordpress/element';\nimport { useViewportMatch } from '@wordpress/compose';\nimport {\n\tgetBlockType,\n\thasBlockSupport,\n\tisReusableBlock,\n\tisTemplatePart,\n} from '@wordpress/blocks';\nimport { ToolbarGroup } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport BlockMover from '../block-mover';\nimport BlockParentSelector from '../block-parent-selector';\nimport BlockSwitcher from '../block-switcher';\nimport BlockControls from '../block-controls';\nimport __unstableBlockToolbarLastItem from './block-toolbar-last-item';\nimport BlockSettingsMenu from '../block-settings-menu';\nimport { BlockLockToolbar } from '../block-lock';\nimport { BlockGroupToolbar } from '../convert-to-group-buttons';\nimport BlockEditVisuallyButton from '../block-edit-visually-button';\nimport { useShowHoveredOrFocusedGestures } from './utils';\nimport { store as blockEditorStore } from '../../store';\nimport __unstableBlockNameContext from './block-name-context';\nimport NavigableToolbar from '../navigable-toolbar';\nimport Shuffle from './shuffle';\nimport BlockBindingsIndicator from '../block-bindings-toolbar-indicator';\nimport { useHasBlockToolbar } from './use-has-block-toolbar';\nimport { canBindBlock } from '../../hooks/use-bindings-attributes';\n/**\n * Renders the block toolbar.\n *\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/block-toolbar/README.md\n *\n * @param {Object}   props                             Components props.\n * @param {boolean}  props.hideDragHandle              Show or hide the Drag Handle for drag and drop functionality.\n * @param {boolean}  props.focusOnMount                Focus the toolbar when mounted.\n * @param {number}   props.__experimentalInitialIndex  The initial index of the toolbar item to focus.\n * @param {Function} props.__experimentalOnIndexChange Callback function to be called when the index of the focused toolbar item changes.\n * @param {string}   props.variant                     Style variant of the toolbar, also passed to the Dropdowns rendered from Block Toolbar Buttons.\n */\nexport function PrivateBlockToolbar( {\n\thideDragHandle,\n\tfocusOnMount,\n\t__experimentalInitialIndex,\n\t__experimentalOnIndexChange,\n\tvariant = 'unstyled',\n} ) {\n\tconst {\n\t\tblockClientId,\n\t\tblockClientIds,\n\t\tisDefaultEditingMode,\n\t\tblockType,\n\t\tblockName,\n\t\ttoolbarKey,\n\t\tshouldShowVisualToolbar,\n\t\tshowParentSelector,\n\t\tisUsingBindings,\n\t} = useSelect( ( select ) => {\n\t\tconst {\n\t\t\tgetBlockName,\n\t\t\tgetBlockMode,\n\t\t\tgetBlockParents,\n\t\t\tgetSelectedBlockClientIds,\n\t\t\tisBlockValid,\n\t\t\tgetBlockRootClientId,\n\t\t\tgetBlockEditingMode,\n\t\t\tgetBlockAttributes,\n\t\t} = select( blockEditorStore );\n\t\tconst selectedBlockClientIds = getSelectedBlockClientIds();\n\t\tconst selectedBlockClientId = selectedBlockClientIds[ 0 ];\n\t\tconst blockRootClientId = getBlockRootClientId( selectedBlockClientId );\n\t\tconst parents = getBlockParents( selectedBlockClientId );\n\t\tconst firstParentClientId = parents[ parents.length - 1 ];\n\t\tconst parentBlockName = getBlockName( firstParentClientId );\n\t\tconst parentBlockType = getBlockType( parentBlockName );\n\t\tconst _isDefaultEditingMode =\n\t\t\tgetBlockEditingMode( selectedBlockClientId ) === 'default';\n\t\tconst _blockName = getBlockName( selectedBlockClientId );\n\t\tconst isValid = selectedBlockClientIds.every( ( id ) =>\n\t\t\tisBlockValid( id )\n\t\t);\n\t\tconst isVisual = selectedBlockClientIds.every(\n\t\t\t( id ) => getBlockMode( id ) === 'visual'\n\t\t);\n\t\tconst _isUsingBindings = !! getBlockAttributes( selectedBlockClientId )\n\t\t\t?.metadata?.bindings;\n\t\treturn {\n\t\t\tblockClientId: selectedBlockClientId,\n\t\t\tblockClientIds: selectedBlockClientIds,\n\t\t\tisDefaultEditingMode: _isDefaultEditingMode,\n\t\t\tblockName: _blockName,\n\t\t\tblockType: selectedBlockClientId && getBlockType( _blockName ),\n\t\t\tshouldShowVisualToolbar: isValid && isVisual,\n\t\t\trootClientId: blockRootClientId,\n\t\t\ttoolbarKey: `${ selectedBlockClientId }${ firstParentClientId }`,\n\t\t\tshowParentSelector:\n\t\t\t\tparentBlockType &&\n\t\t\t\tgetBlockEditingMode( firstParentClientId ) === 'default' &&\n\t\t\t\thasBlockSupport(\n\t\t\t\t\tparentBlockType,\n\t\t\t\t\t'__experimentalParentSelector',\n\t\t\t\t\ttrue\n\t\t\t\t) &&\n\t\t\t\tselectedBlockClientIds.length === 1 &&\n\t\t\t\t_isDefaultEditingMode,\n\t\t\tisUsingBindings: _isUsingBindings,\n\t\t};\n\t}, [] );\n\n\tconst toolbarWrapperRef = useRef( null );\n\n\t// Handles highlighting the current block outline on hover or focus of the\n\t// block type toolbar area.\n\tconst nodeRef = useRef();\n\tconst showHoveredOrFocusedGestures = useShowHoveredOrFocusedGestures( {\n\t\tref: nodeRef,\n\t} );\n\n\tconst isLargeViewport = ! useViewportMatch( 'medium', '<' );\n\n\tconst hasBlockToolbar = useHasBlockToolbar();\n\tif ( ! hasBlockToolbar ) {\n\t\treturn null;\n\t}\n\n\tconst isMultiToolbar = blockClientIds.length > 1;\n\tconst isSynced =\n\t\tisReusableBlock( blockType ) || isTemplatePart( blockType );\n\n\t// Shifts the toolbar to make room for the parent block selector.\n\tconst classes = classnames( 'block-editor-block-contextual-toolbar', {\n\t\t'has-parent': showParentSelector,\n\t} );\n\n\tconst innerClasses = classnames( 'block-editor-block-toolbar', {\n\t\t'is-synced': isSynced,\n\t} );\n\n\treturn (\n\t\t<NavigableToolbar\n\t\t\tfocusEditorOnEscape\n\t\t\tclassName={ classes }\n\t\t\t/* translators: accessibility text for the block toolbar */\n\t\t\taria-label={ __( 'Block tools' ) }\n\t\t\t// The variant is applied as \"toolbar\" when undefined, which is the black border style of the dropdown from the toolbar popover.\n\t\t\tvariant={ variant === 'toolbar' ? undefined : variant }\n\t\t\tfocusOnMount={ focusOnMount }\n\t\t\t__experimentalInitialIndex={ __experimentalInitialIndex }\n\t\t\t__experimentalOnIndexChange={ __experimentalOnIndexChange }\n\t\t\t// Resets the index whenever the active block changes so\n\t\t\t// this is not persisted. See https://github.com/WordPress/gutenberg/pull/25760#issuecomment-717906169\n\t\t\tkey={ toolbarKey }\n\t\t>\n\t\t\t<div ref={ toolbarWrapperRef } className={ innerClasses }>\n\t\t\t\t{ ! isMultiToolbar &&\n\t\t\t\t\tisLargeViewport &&\n\t\t\t\t\tisDefaultEditingMode && <BlockParentSelector /> }\n\t\t\t\t{ isUsingBindings && canBindBlock( blockName ) && (\n\t\t\t\t\t<BlockBindingsIndicator />\n\t\t\t\t) }\n\t\t\t\t{ ( shouldShowVisualToolbar || isMultiToolbar ) && (\n\t\t\t\t\t<div ref={ nodeRef } { ...showHoveredOrFocusedGestures }>\n\t\t\t\t\t\t<ToolbarGroup className=\"block-editor-block-toolbar__block-controls\">\n\t\t\t\t\t\t\t<BlockSwitcher\n\t\t\t\t\t\t\t\tclientIds={ blockClientIds }\n\t\t\t\t\t\t\t\tdisabled={ ! isDefaultEditingMode }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{ isDefaultEditingMode && (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t{ ! isMultiToolbar && (\n\t\t\t\t\t\t\t\t\t\t<BlockLockToolbar\n\t\t\t\t\t\t\t\t\t\t\tclientId={ blockClientId }\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t<BlockMover\n\t\t\t\t\t\t\t\t\t\tclientIds={ blockClientIds }\n\t\t\t\t\t\t\t\t\t\thideDragHandle={ hideDragHandle }\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</ToolbarGroup>\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t\t\t<Shuffle clientId={ blockClientId } />\n\t\t\t\t{ shouldShowVisualToolbar && isMultiToolbar && (\n\t\t\t\t\t<BlockGroupToolbar />\n\t\t\t\t) }\n\t\t\t\t{ shouldShowVisualToolbar && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<BlockControls.Slot\n\t\t\t\t\t\t\tgroup=\"parent\"\n\t\t\t\t\t\t\tclassName=\"block-editor-block-toolbar__slot\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<BlockControls.Slot\n\t\t\t\t\t\t\tgroup=\"block\"\n\t\t\t\t\t\t\tclassName=\"block-editor-block-toolbar__slot\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<BlockControls.Slot className=\"block-editor-block-toolbar__slot\" />\n\t\t\t\t\t\t<BlockControls.Slot\n\t\t\t\t\t\t\tgroup=\"inline\"\n\t\t\t\t\t\t\tclassName=\"block-editor-block-toolbar__slot\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<BlockControls.Slot\n\t\t\t\t\t\t\tgroup=\"other\"\n\t\t\t\t\t\t\tclassName=\"block-editor-block-toolbar__slot\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<__unstableBlockNameContext.Provider\n\t\t\t\t\t\t\tvalue={ blockType?.name }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<__unstableBlockToolbarLastItem.Slot />\n\t\t\t\t\t\t</__unstableBlockNameContext.Provider>\n\t\t\t\t\t</>\n\t\t\t\t) }\n\t\t\t\t<BlockEditVisuallyButton clientIds={ blockClientIds } />\n\t\t\t\t{ isDefaultEditingMode && (\n\t\t\t\t\t<BlockSettingsMenu clientIds={ blockClientIds } />\n\t\t\t\t) }\n\t\t\t</div>\n\t\t</NavigableToolbar>\n\t);\n}\n\n/**\n * Renders the block toolbar.\n *\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/block-toolbar/README.md\n *\n * @param {Object}  props                Components props.\n * @param {boolean} props.hideDragHandle Show or hide the Drag Handle for drag and drop functionality.\n * @param {string}  props.variant        Style variant of the toolbar, also passed to the Dropdowns rendered from Block Toolbar Buttons.\n */\nexport default function BlockToolbar( { hideDragHandle, variant } ) {\n\treturn (\n\t\t<PrivateBlockToolbar\n\t\t\thideDragHandle={ hideDragHandle }\n\t\t\tvariant={ variant }\n\t\t\tfocusOnMount={ undefined }\n\t\t\t__experimentalInitialIndex={ undefined }\n\t\t\t__experimentalOnIndexChange={ undefined }\n\t\t/>\n\t);\n}\n","/**\r\n * External dependencies\r\n */\r\nimport classnames from 'classnames';\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { useDispatch } from '@wordpress/data';\r\nimport { useEffect, useRef } from '@wordpress/element';\r\nimport { useShortcut } from '@wordpress/keyboard-shortcuts';\r\n/**\r\n * Internal dependencies\r\n */\r\nimport BlockPopover from '../block-popover';\r\nimport useBlockToolbarPopoverProps from './use-block-toolbar-popover-props';\r\nimport useSelectedBlockToolProps from './use-selected-block-tool-props';\r\nimport { store as blockEditorStore } from '../../store';\r\nimport { PrivateBlockToolbar } from '../block-toolbar';\r\n\r\nexport default function BlockToolbarPopover( {\r\n\tclientId,\r\n\tisTyping,\r\n\t__unstableContentRef,\r\n} ) {\r\n\tconst { capturingClientId, isInsertionPointVisible, lastClientId } =\r\n\t\tuseSelectedBlockToolProps( clientId );\r\n\r\n\t// Stores the active toolbar item index so the block toolbar can return focus\r\n\t// to it when re-mounting.\r\n\tconst initialToolbarItemIndexRef = useRef();\r\n\r\n\tuseEffect( () => {\r\n\t\t// Resets the index whenever the active block changes so this is not\r\n\t\t// persisted. See https://github.com/WordPress/gutenberg/pull/25760#issuecomment-717906169\r\n\t\tinitialToolbarItemIndexRef.current = undefined;\r\n\t}, [ clientId ] );\r\n\r\n\tconst { stopTyping } = useDispatch( blockEditorStore );\r\n\tconst isToolbarForced = useRef( false );\r\n\r\n\tuseShortcut( 'core/block-editor/focus-toolbar', () => {\r\n\t\tisToolbarForced.current = true;\r\n\t\tstopTyping( true );\r\n\t} );\r\n\r\n\tuseEffect( () => {\r\n\t\tisToolbarForced.current = false;\r\n\t} );\r\n\r\n\tconst popoverProps = useBlockToolbarPopoverProps( {\r\n\t\tcontentElement: __unstableContentRef?.current,\r\n\t\tclientId,\r\n\t} );\r\n\r\n\treturn (\r\n\t\t! isTyping && (\r\n\t\t\t<BlockPopover\r\n\t\t\t\tclientId={ capturingClientId || clientId }\r\n\t\t\t\tbottomClientId={ lastClientId }\r\n\t\t\t\tclassName={ classnames(\r\n\t\t\t\t\t'block-editor-block-list__block-popover',\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'is-insertion-point-visible': isInsertionPointVisible,\r\n\t\t\t\t\t}\r\n\t\t\t\t) }\r\n\t\t\t\tresize={ false }\r\n\t\t\t\t{ ...popoverProps }\r\n\t\t\t>\r\n\t\t\t\t<PrivateBlockToolbar\r\n\t\t\t\t\t// If the toolbar is being shown because of being forced\r\n\t\t\t\t\t// it should focus the toolbar right after the mount.\r\n\t\t\t\t\tfocusOnMount={ isToolbarForced.current }\r\n\t\t\t\t\t__experimentalInitialIndex={\r\n\t\t\t\t\t\tinitialToolbarItemIndexRef.current\r\n\t\t\t\t\t}\r\n\t\t\t\t\t__experimentalOnIndexChange={ ( index ) => {\r\n\t\t\t\t\t\tinitialToolbarItemIndexRef.current = index;\r\n\t\t\t\t\t} }\r\n\t\t\t\t\tvariant=\"toolbar\"\r\n\t\t\t\t/>\r\n\t\t\t</BlockPopover>\r\n\t\t)\r\n\t);\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst trash = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path\r\n\t\t\tfillRule=\"evenodd\"\r\n\t\t\tclipRule=\"evenodd\"\r\n\t\t\td=\"M12 5.5A2.25 2.25 0 0 0 9.878 7h4.244A2.251 2.251 0 0 0 12 5.5ZM12 4a3.751 3.751 0 0 0-3.675 3H5v1.5h1.27l.818 8.997a2.75 2.75 0 0 0 2.739 2.501h4.347a2.75 2.75 0 0 0 2.738-2.5L17.73 8.5H19V7h-3.325A3.751 3.751 0 0 0 12 4Zm4.224 4.5H7.776l.806 8.861a1.25 1.25 0 0 0 1.245 1.137h4.347a1.25 1.25 0 0 0 1.245-1.137l.805-8.861Z\"\r\n\t\t/>\r\n\t</SVG>\r\n);\r\n\r\nexport default trash;\r\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { dragHandle, trash } from '@wordpress/icons';\nimport { Button, Flex, FlexItem, ToolbarButton } from '@wordpress/components';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { useEffect, useRef } from '@wordpress/element';\nimport {\n\tBACKSPACE,\n\tDELETE,\n\tUP,\n\tDOWN,\n\tLEFT,\n\tRIGHT,\n\tTAB,\n\tESCAPE,\n\tENTER,\n\tSPACE,\n} from '@wordpress/keycodes';\nimport {\n\t__experimentalGetAccessibleBlockLabel as getAccessibleBlockLabel,\n\tstore as blocksStore,\n} from '@wordpress/blocks';\nimport { speak } from '@wordpress/a11y';\nimport { focus } from '@wordpress/dom';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport BlockTitle from '../block-title';\nimport BlockIcon from '../block-icon';\nimport { store as blockEditorStore } from '../../store';\nimport BlockDraggable from '../block-draggable';\nimport { __unstableUseBlockElement as useBlockElement } from '../block-list/use-block-props/use-block-refs';\nimport BlockMover from '../block-mover';\nimport Shuffle from '../block-toolbar/shuffle';\n\n/**\n * Block selection button component, displaying the label of the block. If the block\n * descends from a root block, a button is displayed enabling the user to select\n * the root block.\n *\n * @param {string} props          Component props.\n * @param {string} props.clientId Client ID of block.\n *\n * @return {Component} The component to be rendered.\n */\nfunction BlockSelectionButton( { clientId, rootClientId } ) {\n\tconst selected = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tgetBlock,\n\t\t\t\tgetBlockIndex,\n\t\t\t\thasBlockMovingClientId,\n\t\t\t\tgetBlockListSettings,\n\t\t\t\t__unstableGetEditorMode,\n\t\t\t\tgetNextBlockClientId,\n\t\t\t\tgetPreviousBlockClientId,\n\t\t\t\tcanRemoveBlock,\n\t\t\t} = select( blockEditorStore );\n\t\t\tconst { getActiveBlockVariation, getBlockType } =\n\t\t\t\tselect( blocksStore );\n\t\t\tconst index = getBlockIndex( clientId );\n\t\t\tconst { name, attributes } = getBlock( clientId );\n\t\t\tconst blockType = getBlockType( name );\n\t\t\tconst orientation =\n\t\t\t\tgetBlockListSettings( rootClientId )?.orientation;\n\t\t\tconst match = getActiveBlockVariation( name, attributes );\n\t\t\tconst isBlockTemplatePart =\n\t\t\t\tblockType?.name === 'core/template-part';\n\n\t\t\tlet isNextBlockTemplatePart = false;\n\t\t\tconst nextClientId = getNextBlockClientId();\n\t\t\tif ( nextClientId ) {\n\t\t\t\tconst { name: nextName } = getBlock( nextClientId );\n\t\t\t\tconst nextBlockType = getBlockType( nextName );\n\t\t\t\tisNextBlockTemplatePart =\n\t\t\t\t\tnextBlockType?.name === 'core/template-part';\n\t\t\t}\n\n\t\t\tlet isPrevBlockTemplatePart = false;\n\t\t\tconst prevClientId = getPreviousBlockClientId();\n\t\t\tif ( prevClientId ) {\n\t\t\t\tconst { name: prevName } = getBlock( prevClientId );\n\t\t\t\tconst prevBlockType = getBlockType( prevName );\n\t\t\t\tisPrevBlockTemplatePart =\n\t\t\t\t\tprevBlockType?.name === 'core/template-part';\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tblockMovingMode: hasBlockMovingClientId(),\n\t\t\t\teditorMode: __unstableGetEditorMode(),\n\t\t\t\ticon: match?.icon || blockType.icon,\n\t\t\t\tlabel: getAccessibleBlockLabel(\n\t\t\t\t\tblockType,\n\t\t\t\t\tattributes,\n\t\t\t\t\tindex + 1,\n\t\t\t\t\torientation\n\t\t\t\t),\n\t\t\t\tisBlockTemplatePart,\n\t\t\t\tisNextBlockTemplatePart,\n\t\t\t\tisPrevBlockTemplatePart,\n\t\t\t\tcanRemove: canRemoveBlock( clientId, rootClientId ),\n\t\t\t};\n\t\t},\n\t\t[ clientId, rootClientId ]\n\t);\n\tconst {\n\t\tlabel,\n\t\ticon,\n\t\tblockMovingMode,\n\t\teditorMode,\n\t\tisBlockTemplatePart,\n\t\tisNextBlockTemplatePart,\n\t\tisPrevBlockTemplatePart,\n\t\tcanRemove,\n\t} = selected;\n\tconst { setNavigationMode, removeBlock } = useDispatch( blockEditorStore );\n\tconst ref = useRef();\n\n\t// Focus the breadcrumb in navigation mode.\n\tuseEffect( () => {\n\t\tif ( editorMode === 'navigation' ) {\n\t\t\tref.current.focus();\n\t\t\tspeak( label );\n\t\t}\n\t}, [ label, editorMode ] );\n\tconst blockElement = useBlockElement( clientId );\n\n\tconst {\n\t\thasBlockMovingClientId,\n\t\tgetBlockIndex,\n\t\tgetBlockRootClientId,\n\t\tgetClientIdsOfDescendants,\n\t\tgetSelectedBlockClientId,\n\t\tgetMultiSelectedBlocksEndClientId,\n\t\tgetPreviousBlockClientId,\n\t\tgetNextBlockClientId,\n\t} = useSelect( blockEditorStore );\n\tconst {\n\t\tselectBlock,\n\t\tclearSelectedBlock,\n\t\tsetBlockMovingClientId,\n\t\tmoveBlockToPosition,\n\t} = useDispatch( blockEditorStore );\n\n\tfunction onKeyDown( event ) {\n\t\tconst { keyCode } = event;\n\t\tconst isUp = keyCode === UP;\n\t\tconst isDown = keyCode === DOWN;\n\t\tconst isLeft = keyCode === LEFT;\n\t\tconst isRight = keyCode === RIGHT;\n\t\tconst isTab = keyCode === TAB;\n\t\tconst isEscape = keyCode === ESCAPE;\n\t\tconst isEnter = keyCode === ENTER;\n\t\tconst isSpace = keyCode === SPACE;\n\t\tconst isShift = event.shiftKey;\n\t\tif ( isEscape && editorMode === 'navigation' ) {\n\t\t\tsetNavigationMode( false );\n\t\t\tevent.preventDefault();\n\t\t\treturn;\n\t\t}\n\n\t\tif ( keyCode === BACKSPACE || keyCode === DELETE ) {\n\t\t\tremoveBlock( clientId );\n\t\t\tevent.preventDefault();\n\t\t\treturn;\n\t\t}\n\n\t\tconst selectedBlockClientId = getSelectedBlockClientId();\n\t\tconst selectionEndClientId = getMultiSelectedBlocksEndClientId();\n\t\tconst selectionBeforeEndClientId = getPreviousBlockClientId(\n\t\t\tselectionEndClientId || selectedBlockClientId\n\t\t);\n\t\tconst selectionAfterEndClientId = getNextBlockClientId(\n\t\t\tselectionEndClientId || selectedBlockClientId\n\t\t);\n\n\t\tconst navigateUp = ( isTab && isShift ) || isUp;\n\t\tconst navigateDown = ( isTab && ! isShift ) || isDown;\n\t\t// Move out of current nesting level (no effect if at root level).\n\t\tconst navigateOut = isLeft;\n\t\t// Move into next nesting level (no effect if the current block has no innerBlocks).\n\t\tconst navigateIn = isRight;\n\n\t\tlet focusedBlockUid;\n\t\tif ( navigateUp ) {\n\t\t\tfocusedBlockUid = selectionBeforeEndClientId;\n\t\t} else if ( navigateDown ) {\n\t\t\tfocusedBlockUid = selectionAfterEndClientId;\n\t\t} else if ( navigateOut ) {\n\t\t\tfocusedBlockUid =\n\t\t\t\tgetBlockRootClientId( selectedBlockClientId ) ??\n\t\t\t\tselectedBlockClientId;\n\t\t} else if ( navigateIn ) {\n\t\t\tfocusedBlockUid =\n\t\t\t\tgetClientIdsOfDescendants( selectedBlockClientId )[ 0 ] ??\n\t\t\t\tselectedBlockClientId;\n\t\t}\n\t\tconst startingBlockClientId = hasBlockMovingClientId();\n\t\tif ( isEscape && startingBlockClientId && ! event.defaultPrevented ) {\n\t\t\tsetBlockMovingClientId( null );\n\t\t\tevent.preventDefault();\n\t\t}\n\t\tif ( ( isEnter || isSpace ) && startingBlockClientId ) {\n\t\t\tconst sourceRoot = getBlockRootClientId( startingBlockClientId );\n\t\t\tconst destRoot = getBlockRootClientId( selectedBlockClientId );\n\t\t\tconst sourceBlockIndex = getBlockIndex( startingBlockClientId );\n\t\t\tlet destinationBlockIndex = getBlockIndex( selectedBlockClientId );\n\t\t\tif (\n\t\t\t\tsourceBlockIndex < destinationBlockIndex &&\n\t\t\t\tsourceRoot === destRoot\n\t\t\t) {\n\t\t\t\tdestinationBlockIndex -= 1;\n\t\t\t}\n\t\t\tmoveBlockToPosition(\n\t\t\t\tstartingBlockClientId,\n\t\t\t\tsourceRoot,\n\t\t\t\tdestRoot,\n\t\t\t\tdestinationBlockIndex\n\t\t\t);\n\t\t\tselectBlock( startingBlockClientId );\n\t\t\tsetBlockMovingClientId( null );\n\t\t}\n\t\t// Prevent the block from being moved into itself.\n\t\tif (\n\t\t\tstartingBlockClientId &&\n\t\t\tselectedBlockClientId === startingBlockClientId &&\n\t\t\tnavigateIn\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\tif ( navigateDown || navigateUp || navigateOut || navigateIn ) {\n\t\t\tif ( focusedBlockUid ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tselectBlock( focusedBlockUid );\n\t\t\t} else if ( isTab && selectedBlockClientId ) {\n\t\t\t\tlet nextTabbable;\n\n\t\t\t\tif ( navigateDown ) {\n\t\t\t\t\tnextTabbable = blockElement;\n\t\t\t\t\tdo {\n\t\t\t\t\t\tnextTabbable = focus.tabbable.findNext( nextTabbable );\n\t\t\t\t\t} while (\n\t\t\t\t\t\tnextTabbable &&\n\t\t\t\t\t\tblockElement.contains( nextTabbable )\n\t\t\t\t\t);\n\n\t\t\t\t\tif ( ! nextTabbable ) {\n\t\t\t\t\t\tnextTabbable =\n\t\t\t\t\t\t\tblockElement.ownerDocument.defaultView.frameElement;\n\t\t\t\t\t\tnextTabbable = focus.tabbable.findNext( nextTabbable );\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tnextTabbable = focus.tabbable.findPrevious( blockElement );\n\t\t\t\t}\n\n\t\t\t\tif ( nextTabbable ) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tnextTabbable.focus();\n\t\t\t\t\tclearSelectedBlock();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tconst classNames = classnames(\n\t\t'block-editor-block-list__block-selection-button',\n\t\t{\n\t\t\t'is-block-moving-mode': !! blockMovingMode,\n\t\t}\n\t);\n\n\tconst dragHandleLabel = __( 'Drag' );\n\n\treturn (\n\t\t<div className={ classNames }>\n\t\t\t<Flex\n\t\t\t\tjustify=\"center\"\n\t\t\t\tclassName=\"block-editor-block-list__block-selection-button__content\"\n\t\t\t>\n\t\t\t\t<FlexItem>\n\t\t\t\t\t<BlockIcon icon={ icon } showColors />\n\t\t\t\t</FlexItem>\n\t\t\t\t<FlexItem>\n\t\t\t\t\t{ editorMode === 'zoom-out' && ! isBlockTemplatePart && (\n\t\t\t\t\t\t<BlockMover\n\t\t\t\t\t\t\tclientIds={ [ clientId ] }\n\t\t\t\t\t\t\thideDragHandle\n\t\t\t\t\t\t\tisBlockMoverUpButtonDisabled={\n\t\t\t\t\t\t\t\tisPrevBlockTemplatePart\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tisBlockMoverDownButtonDisabled={\n\t\t\t\t\t\t\t\tisNextBlockTemplatePart\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t\t{ editorMode === 'navigation' && (\n\t\t\t\t\t\t<BlockDraggable clientIds={ [ clientId ] }>\n\t\t\t\t\t\t\t{ ( draggableProps ) => (\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\ticon={ dragHandle }\n\t\t\t\t\t\t\t\t\tclassName=\"block-selection-button_drag-handle\"\n\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\t\t\tlabel={ dragHandleLabel }\n\t\t\t\t\t\t\t\t\t// Should not be able to tab to drag handle as this\n\t\t\t\t\t\t\t\t\t// button can only be used with a pointer device.\n\t\t\t\t\t\t\t\t\ttabIndex=\"-1\"\n\t\t\t\t\t\t\t\t\t{ ...draggableProps }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</BlockDraggable>\n\t\t\t\t\t) }\n\t\t\t\t</FlexItem>\n\t\t\t\t{ editorMode === 'zoom-out' && (\n\t\t\t\t\t<Shuffle clientId={ clientId } as={ Button } />\n\t\t\t\t) }\n\t\t\t\t{ canRemove &&\n\t\t\t\t\teditorMode === 'zoom-out' &&\n\t\t\t\t\t! isBlockTemplatePart && (\n\t\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\t\ticon={ trash }\n\t\t\t\t\t\t\tlabel=\"Delete\"\n\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\tremoveBlock( clientId );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t<FlexItem>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tref={ ref }\n\t\t\t\t\t\tonClick={\n\t\t\t\t\t\t\teditorMode === 'navigation'\n\t\t\t\t\t\t\t\t? () => setNavigationMode( false )\n\t\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonKeyDown={ onKeyDown }\n\t\t\t\t\t\tlabel={ label }\n\t\t\t\t\t\tshowTooltip={ false }\n\t\t\t\t\t\tclassName=\"block-selection-button_select-button\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<BlockTitle\n\t\t\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\t\t\tmaximumLength={ 35 }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Button>\n\t\t\t\t</FlexItem>\n\t\t\t</Flex>\n\t\t</div>\n\t);\n}\n\nexport default BlockSelectionButton;\n","/**\r\n * External dependencies\r\n */\r\nimport classnames from 'classnames';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport BlockSelectionButton from './block-selection-button';\r\nimport BlockPopover from '../block-popover';\r\nimport useBlockToolbarPopoverProps from './use-block-toolbar-popover-props';\r\nimport useSelectedBlockToolProps from './use-selected-block-tool-props';\r\n\r\nexport default function BlockToolbarBreadcrumb( {\r\n\tclientId,\r\n\t__unstableContentRef,\r\n} ) {\r\n\tconst {\r\n\t\tcapturingClientId,\r\n\t\tisInsertionPointVisible,\r\n\t\tlastClientId,\r\n\t\trootClientId,\r\n\t} = useSelectedBlockToolProps( clientId );\r\n\r\n\tconst popoverProps = useBlockToolbarPopoverProps( {\r\n\t\tcontentElement: __unstableContentRef?.current,\r\n\t\tclientId,\r\n\t} );\r\n\r\n\treturn (\r\n\t\t<BlockPopover\r\n\t\t\tclientId={ capturingClientId || clientId }\r\n\t\t\tbottomClientId={ lastClientId }\r\n\t\t\tclassName={ classnames( 'block-editor-block-list__block-popover', {\r\n\t\t\t\t'is-insertion-point-visible': isInsertionPointVisible,\r\n\t\t\t} ) }\r\n\t\t\tresize={ false }\r\n\t\t\t{ ...popoverProps }\r\n\t\t>\r\n\t\t\t<BlockSelectionButton\r\n\t\t\t\tclientId={ clientId }\r\n\t\t\t\trootClientId={ rootClientId }\r\n\t\t\t/>\r\n\t\t</BlockPopover>\r\n\t);\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useSelect } from '@wordpress/data';\r\nimport { useEffect, useState } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport BlockPopoverInbetween from '../block-popover/inbetween';\r\nimport { store as blockEditorStore } from '../../store';\r\nimport Inserter from '../inserter';\r\n\r\nfunction ZoomOutModeInserters( { __unstableContentRef } ) {\r\n\tconst [ isReady, setIsReady ] = useState( false );\r\n\tconst blockOrder = useSelect( ( select ) => {\r\n\t\treturn select( blockEditorStore ).getBlockOrder();\r\n\t}, [] );\r\n\r\n\t// Defer the initial rendering to avoid the jumps due to the animation.\r\n\tuseEffect( () => {\r\n\t\tconst timeout = setTimeout( () => {\r\n\t\t\tsetIsReady( true );\r\n\t\t}, 500 );\r\n\t\treturn () => {\r\n\t\t\tclearTimeout( timeout );\r\n\t\t};\r\n\t}, [] );\r\n\r\n\tif ( ! isReady ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn blockOrder.map( ( clientId, index ) => {\r\n\t\tif ( index === blockOrder.length - 1 ) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<BlockPopoverInbetween\r\n\t\t\t\tkey={ clientId }\r\n\t\t\t\tpreviousClientId={ clientId }\r\n\t\t\t\tnextClientId={ blockOrder[ index + 1 ] }\r\n\t\t\t\t__unstableContentRef={ __unstableContentRef }\r\n\t\t\t>\r\n\t\t\t\t<div className=\"block-editor-block-list__insertion-point-inserter is-with-inserter\">\r\n\t\t\t\t\t<Inserter\r\n\t\t\t\t\t\tposition=\"bottom center\"\r\n\t\t\t\t\t\tclientId={ blockOrder[ index + 1 ] }\r\n\t\t\t\t\t\t__experimentalIsQuick\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t</BlockPopoverInbetween>\r\n\t\t);\r\n\t} );\r\n}\r\n\r\nexport default ZoomOutModeInserters;\r\n","/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport { isUnmodifiedDefaultBlock } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport { useHasBlockToolbar } from '../block-toolbar/use-has-block-toolbar';\n\n/**\n * Source of truth for which block tools are showing in the block editor.\n *\n * @return {Object} Object of which block tools will be shown.\n */\nexport function useShowBlockTools() {\n\tconst hasBlockToolbar = useHasBlockToolbar();\n\n\treturn useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tgetSelectedBlockClientId,\n\t\t\t\tgetFirstMultiSelectedBlockClientId,\n\t\t\t\tgetBlock,\n\t\t\t\tgetSettings,\n\t\t\t\thasMultiSelection,\n\t\t\t\t__unstableGetEditorMode,\n\t\t\t\tisTyping,\n\t\t\t} = select( blockEditorStore );\n\n\t\t\tconst clientId =\n\t\t\t\tgetSelectedBlockClientId() ||\n\t\t\t\tgetFirstMultiSelectedBlockClientId();\n\n\t\t\tconst { name = '', attributes = {} } = getBlock( clientId ) || {};\n\t\t\tconst editorMode = __unstableGetEditorMode();\n\t\t\tconst hasSelectedBlock = clientId && name;\n\t\t\tconst isEmptyDefaultBlock = isUnmodifiedDefaultBlock( {\n\t\t\t\tname,\n\t\t\t\tattributes,\n\t\t\t} );\n\t\t\tconst _showEmptyBlockSideInserter =\n\t\t\t\tclientId &&\n\t\t\t\t! isTyping() &&\n\t\t\t\teditorMode === 'edit' &&\n\t\t\t\tisUnmodifiedDefaultBlock( { name, attributes } );\n\t\t\tconst maybeShowBreadcrumb =\n\t\t\t\thasSelectedBlock &&\n\t\t\t\t! hasMultiSelection() &&\n\t\t\t\t( editorMode === 'navigation' || editorMode === 'zoom-out' );\n\n\t\t\treturn {\n\t\t\t\tshowEmptyBlockSideInserter: _showEmptyBlockSideInserter,\n\t\t\t\tshowBreadcrumb:\n\t\t\t\t\t! _showEmptyBlockSideInserter && maybeShowBreadcrumb,\n\t\t\t\tshowBlockToolbarPopover:\n\t\t\t\t\thasBlockToolbar &&\n\t\t\t\t\t! getSettings().hasFixedToolbar &&\n\t\t\t\t\t! _showEmptyBlockSideInserter &&\n\t\t\t\t\thasSelectedBlock &&\n\t\t\t\t\t! isEmptyDefaultBlock &&\n\t\t\t\t\t! maybeShowBreadcrumb,\n\t\t\t\tshowFixedToolbar:\n\t\t\t\t\teditorMode !== 'zoom-out' &&\n\t\t\t\t\thasBlockToolbar &&\n\t\t\t\t\tgetSettings().hasFixedToolbar,\n\t\t\t};\n\t\t},\n\t\t[ hasBlockToolbar ]\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { isTextField } from '@wordpress/dom';\nimport { Popover } from '@wordpress/components';\nimport { __unstableUseShortcutEventMatch as useShortcutEventMatch } from '@wordpress/keyboard-shortcuts';\nimport { useRef } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport EmptyBlockInserter from './empty-block-inserter';\nimport {\n\tInsertionPointOpenRef,\n\tdefault as InsertionPoint,\n} from './insertion-point';\nimport BlockToolbarPopover from './block-toolbar-popover';\nimport BlockToolbarBreadcrumb from './block-toolbar-breadcrumb';\nimport { store as blockEditorStore } from '../../store';\nimport usePopoverScroll from '../block-popover/use-popover-scroll';\nimport ZoomOutModeInserters from './zoom-out-mode-inserters';\nimport { useShowBlockTools } from './use-show-block-tools';\nimport { unlock } from '../../lock-unlock';\n\nfunction selector( select ) {\n\tconst {\n\t\tgetSelectedBlockClientId,\n\t\tgetFirstMultiSelectedBlockClientId,\n\t\tgetSettings,\n\t\t__unstableGetEditorMode,\n\t\tisTyping,\n\t} = select( blockEditorStore );\n\n\tconst clientId =\n\t\tgetSelectedBlockClientId() || getFirstMultiSelectedBlockClientId();\n\n\tconst editorMode = __unstableGetEditorMode();\n\n\treturn {\n\t\tclientId,\n\t\thasFixedToolbar: getSettings().hasFixedToolbar,\n\t\tisTyping: isTyping(),\n\t\tisZoomOutMode: editorMode === 'zoom-out',\n\t};\n}\n\n/**\n * Renders block tools (the block toolbar, select/navigation mode toolbar, the\n * insertion point and a slot for the inline rich text toolbar). Must be wrapped\n * around the block content and editor styles wrapper or iframe.\n *\n * @param {Object} $0                      Props.\n * @param {Object} $0.children             The block content and style container.\n * @param {Object} $0.__unstableContentRef Ref holding the content scroll container.\n */\nexport default function BlockTools( {\n\tchildren,\n\t__unstableContentRef,\n\t...props\n} ) {\n\tconst { clientId, hasFixedToolbar, isTyping, isZoomOutMode } = useSelect(\n\t\tselector,\n\t\t[]\n\t);\n\tconst isMatch = useShortcutEventMatch();\n\tconst { getSelectedBlockClientIds, getBlockRootClientId } =\n\t\tuseSelect( blockEditorStore );\n\n\tconst {\n\t\tshowEmptyBlockSideInserter,\n\t\tshowBreadcrumb,\n\t\tshowBlockToolbarPopover,\n\t} = useShowBlockTools();\n\n\tconst {\n\t\tduplicateBlocks,\n\t\tremoveBlocks,\n\t\tinsertAfterBlock,\n\t\tinsertBeforeBlock,\n\t\tselectBlock,\n\t\tmoveBlocksUp,\n\t\tmoveBlocksDown,\n\t\texpandBlock,\n\t} = unlock( useDispatch( blockEditorStore ) );\n\n\tfunction onKeyDown( event ) {\n\t\tif ( event.defaultPrevented ) return;\n\n\t\tif ( isMatch( 'core/block-editor/move-up', event ) ) {\n\t\t\tconst clientIds = getSelectedBlockClientIds();\n\t\t\tif ( clientIds.length ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tconst rootClientId = getBlockRootClientId( clientIds[ 0 ] );\n\t\t\t\tmoveBlocksUp( clientIds, rootClientId );\n\t\t\t}\n\t\t} else if ( isMatch( 'core/block-editor/move-down', event ) ) {\n\t\t\tconst clientIds = getSelectedBlockClientIds();\n\t\t\tif ( clientIds.length ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tconst rootClientId = getBlockRootClientId( clientIds[ 0 ] );\n\t\t\t\tmoveBlocksDown( clientIds, rootClientId );\n\t\t\t}\n\t\t} else if ( isMatch( 'core/block-editor/duplicate', event ) ) {\n\t\t\tconst clientIds = getSelectedBlockClientIds();\n\t\t\tif ( clientIds.length ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tduplicateBlocks( clientIds );\n\t\t\t}\n\t\t} else if ( isMatch( 'core/block-editor/remove', event ) ) {\n\t\t\tconst clientIds = getSelectedBlockClientIds();\n\t\t\tif ( clientIds.length ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tremoveBlocks( clientIds );\n\t\t\t}\n\t\t} else if ( isMatch( 'core/block-editor/insert-after', event ) ) {\n\t\t\tconst clientIds = getSelectedBlockClientIds();\n\t\t\tif ( clientIds.length ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tinsertAfterBlock( clientIds[ clientIds.length - 1 ] );\n\t\t\t}\n\t\t} else if ( isMatch( 'core/block-editor/insert-before', event ) ) {\n\t\t\tconst clientIds = getSelectedBlockClientIds();\n\t\t\tif ( clientIds.length ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tinsertBeforeBlock( clientIds[ 0 ] );\n\t\t\t}\n\t\t} else if ( isMatch( 'core/block-editor/unselect', event ) ) {\n\t\t\tif ( event.target.closest( '[role=toolbar]' ) ) {\n\t\t\t\t// This shouldn't be necessary, but we have a combination of a few things all combining to create a situation where:\n\t\t\t\t// - Because the block toolbar uses createPortal to populate the block toolbar fills, we can't rely on the React event bubbling to hit the onKeyDown listener for the block toolbar\n\t\t\t\t// - Since we can't use the React tree, we use the DOM tree which _should_ handle the event bubbling correctly from a `createPortal` element.\n\t\t\t\t// - This bubbles via the React tree, which hits this `unselect` escape keypress before the block toolbar DOM event listener has access to it.\n\t\t\t\t// An alternative would be to remove the addEventListener on the navigableToolbar and use this event to handle it directly right here. That feels hacky too though.\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst clientIds = getSelectedBlockClientIds();\n\t\t\tif ( clientIds.length > 1 ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\t// If there is more than one block selected, select the first\n\t\t\t\t// block so that focus is directed back to the beginning of the selection.\n\t\t\t\t// In effect, to the user this feels like deselecting the multi-selection.\n\t\t\t\tselectBlock( clientIds[ 0 ] );\n\t\t\t}\n\t\t} else if ( isMatch( 'core/block-editor/collapse-list-view', event ) ) {\n\t\t\t// If focus is currently within a text field, such as a rich text block or other editable field,\n\t\t\t// skip collapsing the list view, and allow the keyboard shortcut to be handled by the text field.\n\t\t\t// This condition checks for both the active element and the active element within an iframed editor.\n\t\t\tif (\n\t\t\t\tisTextField( event.target ) ||\n\t\t\t\tisTextField(\n\t\t\t\t\tevent.target?.contentWindow?.document?.activeElement\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tevent.preventDefault();\n\t\t\texpandBlock( clientId );\n\t\t}\n\t}\n\n\tconst blockToolbarRef = usePopoverScroll( __unstableContentRef );\n\tconst blockToolbarAfterRef = usePopoverScroll( __unstableContentRef );\n\n\treturn (\n\t\t// eslint-disable-next-line jsx-a11y/no-static-element-interactions\n\t\t<div { ...props } onKeyDown={ onKeyDown }>\n\t\t\t<InsertionPointOpenRef.Provider value={ useRef( false ) }>\n\t\t\t\t{ ! isTyping && (\n\t\t\t\t\t<InsertionPoint\n\t\t\t\t\t\t__unstableContentRef={ __unstableContentRef }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\n\t\t\t\t{ showEmptyBlockSideInserter && (\n\t\t\t\t\t<EmptyBlockInserter\n\t\t\t\t\t\t__unstableContentRef={ __unstableContentRef }\n\t\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\n\t\t\t\t{ showBlockToolbarPopover && (\n\t\t\t\t\t<BlockToolbarPopover\n\t\t\t\t\t\t__unstableContentRef={ __unstableContentRef }\n\t\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\t\tisTyping={ isTyping }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\n\t\t\t\t{ showBreadcrumb && (\n\t\t\t\t\t<BlockToolbarBreadcrumb\n\t\t\t\t\t\t__unstableContentRef={ __unstableContentRef }\n\t\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\n\t\t\t\t{ /* Used for the inline rich text toolbar. Until this toolbar is combined into BlockToolbar, someone implementing their own BlockToolbar will also need to use this to see the image caption toolbar. */ }\n\t\t\t\t{ ! isZoomOutMode && ! hasFixedToolbar && (\n\t\t\t\t\t<Popover.Slot\n\t\t\t\t\t\tname=\"block-toolbar\"\n\t\t\t\t\t\tref={ blockToolbarRef }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t{ children }\n\t\t\t\t{ /* Used for inline rich text popovers. */ }\n\t\t\t\t<Popover.Slot\n\t\t\t\t\tname=\"__unstable-block-tools-after\"\n\t\t\t\t\tref={ blockToolbarAfterRef }\n\t\t\t\t/>\n\t\t\t\t{ isZoomOutMode && (\n\t\t\t\t\t<ZoomOutModeInserters\n\t\t\t\t\t\t__unstableContentRef={ __unstableContentRef }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t</InsertionPointOpenRef.Provider>\n\t\t</div>\n\t);\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"commands\"];","/**\r\n * WordPress dependencies\r\n */\r\nimport { Path, SVG } from '@wordpress/primitives';\r\n\r\nconst moveTo = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M19.75 9c0-1.257-.565-2.197-1.39-2.858-.797-.64-1.827-1.017-2.815-1.247-1.802-.42-3.703-.403-4.383-.396L11 4.5V6l.177-.001c.696-.006 2.416-.02 4.028.356.887.207 1.67.518 2.216.957.52.416.829.945.829 1.688 0 .592-.167.966-.407 1.23-.255.281-.656.508-1.236.674-1.19.34-2.82.346-4.607.346h-.077c-1.692 0-3.527 0-4.942.404-.732.209-1.424.545-1.935 1.108-.526.579-.796 1.33-.796 2.238 0 1.257.565 2.197 1.39 2.858.797.64 1.827 1.017 2.815 1.247 1.802.42 3.703.403 4.383.396L13 19.5h.714V22L18 18.5 13.714 15v3H13l-.177.001c-.696.006-2.416.02-4.028-.356-.887-.207-1.67-.518-2.216-.957-.52-.416-.829-.945-.829-1.688 0-.592.167-.966.407-1.23.255-.281.656-.508 1.237-.674 1.189-.34 2.819-.346 4.606-.346h.077c1.692 0 3.527 0 4.941-.404.732-.209 1.425-.545 1.936-1.108.526-.579.796-1.33.796-2.238z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default moveTo;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst ungroup = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M18 4h-7c-1.1 0-2 .9-2 2v7c0 1.1.9 2 2 2h7c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm.5 9c0 .3-.2.5-.5.5h-7c-.3 0-.5-.2-.5-.5V6c0-.3.2-.5.5-.5h7c.3 0 .5.2.5.5v7zm-5 5c0 .3-.2.5-.5.5H6c-.3 0-.5-.2-.5-.5v-7c0-.3.2-.5.5-.5h1V9H6c-1.1 0-2 .9-2 2v7c0 1.1.9 2 2 2h7c1.1 0 2-.9 2-2v-1h-1.5v1z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default ungroup;\r\n","/**\n * WordPress dependencies\n */\nimport { __, sprintf } from '@wordpress/i18n';\nimport {\n\thasBlockSupport,\n\tstore as blocksStore,\n\tswitchToBlockType,\n\tisTemplatePart,\n} from '@wordpress/blocks';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { useCommandLoader } from '@wordpress/commands';\nimport {\n\tcopy,\n\ttrash as remove,\n\tplus as add,\n\tgroup,\n\tungroup,\n\tmoveTo as move,\n} from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport BlockIcon from '../block-icon';\nimport { store as blockEditorStore } from '../../store';\n\nexport const useTransformCommands = () => {\n\tconst { replaceBlocks, multiSelect } = useDispatch( blockEditorStore );\n\tconst { blocks, clientIds, canRemove, possibleBlockTransformations } =\n\t\tuseSelect( ( select ) => {\n\t\t\tconst {\n\t\t\t\tgetBlockRootClientId,\n\t\t\t\tgetBlockTransformItems,\n\t\t\t\tgetSelectedBlockClientIds,\n\t\t\t\tgetBlocksByClientId,\n\t\t\t\tcanRemoveBlocks,\n\t\t\t} = select( blockEditorStore );\n\n\t\t\tconst selectedBlockClientIds = getSelectedBlockClientIds();\n\t\t\tconst selectedBlocks = getBlocksByClientId(\n\t\t\t\tselectedBlockClientIds\n\t\t\t);\n\t\t\tconst rootClientId = getBlockRootClientId(\n\t\t\t\tselectedBlockClientIds[ 0 ]\n\t\t\t);\n\t\t\treturn {\n\t\t\t\tblocks: selectedBlocks,\n\t\t\t\tclientIds: selectedBlockClientIds,\n\t\t\t\tpossibleBlockTransformations: getBlockTransformItems(\n\t\t\t\t\tselectedBlocks,\n\t\t\t\t\trootClientId\n\t\t\t\t),\n\t\t\t\tcanRemove: canRemoveBlocks(\n\t\t\t\t\tselectedBlockClientIds,\n\t\t\t\t\trootClientId\n\t\t\t\t),\n\t\t\t};\n\t\t}, [] );\n\n\tconst isTemplate = blocks.length === 1 && isTemplatePart( blocks[ 0 ] );\n\n\tfunction selectForMultipleBlocks( insertedBlocks ) {\n\t\tif ( insertedBlocks.length > 1 ) {\n\t\t\tmultiSelect(\n\t\t\t\tinsertedBlocks[ 0 ].clientId,\n\t\t\t\tinsertedBlocks[ insertedBlocks.length - 1 ].clientId\n\t\t\t);\n\t\t}\n\t}\n\n\t// Simple block tranformation based on the `Block Transforms` API.\n\tfunction onBlockTransform( name ) {\n\t\tconst newBlocks = switchToBlockType( blocks, name );\n\t\treplaceBlocks( clientIds, newBlocks );\n\t\tselectForMultipleBlocks( newBlocks );\n\t}\n\n\t/**\n\t * The `isTemplate` check is a stopgap solution here.\n\t * Ideally, the Transforms API should handle this\n\t * by allowing to exclude blocks from wildcard transformations.\n\t */\n\tconst hasPossibleBlockTransformations =\n\t\t!! possibleBlockTransformations.length && canRemove && ! isTemplate;\n\n\tif (\n\t\t! clientIds ||\n\t\tclientIds.length < 1 ||\n\t\t! hasPossibleBlockTransformations\n\t) {\n\t\treturn { isLoading: false, commands: [] };\n\t}\n\n\tconst commands = possibleBlockTransformations.map( ( transformation ) => {\n\t\tconst { name, title, icon } = transformation;\n\t\treturn {\n\t\t\tname: 'core/block-editor/transform-to-' + name.replace( '/', '-' ),\n\t\t\t// translators: %s: block title/name.\n\t\t\tlabel: sprintf( __( 'Transform to %s' ), title ),\n\t\t\ticon: <BlockIcon icon={ icon } />,\n\t\t\tcallback: ( { close } ) => {\n\t\t\t\tonBlockTransform( name );\n\t\t\t\tclose();\n\t\t\t},\n\t\t};\n\t} );\n\n\treturn { isLoading: false, commands };\n};\n\nconst useActionsCommands = () => {\n\tconst { clientIds } = useSelect( ( select ) => {\n\t\tconst { getSelectedBlockClientIds } = select( blockEditorStore );\n\t\tconst selectedBlockClientIds = getSelectedBlockClientIds();\n\n\t\treturn {\n\t\t\tclientIds: selectedBlockClientIds,\n\t\t};\n\t}, [] );\n\n\tconst { getBlockRootClientId, canMoveBlocks, getBlockCount } =\n\t\tuseSelect( blockEditorStore );\n\n\tconst { setBlockMovingClientId, setNavigationMode, selectBlock } =\n\t\tuseDispatch( blockEditorStore );\n\n\tif ( ! clientIds || clientIds.length < 1 ) {\n\t\treturn { isLoading: false, commands: [] };\n\t}\n\n\tconst rootClientId = getBlockRootClientId( clientIds[ 0 ] );\n\n\tconst canMove =\n\t\tcanMoveBlocks( clientIds, rootClientId ) &&\n\t\tgetBlockCount( rootClientId ) !== 1;\n\n\tconst commands = [];\n\n\tif ( canMove ) {\n\t\tcommands.push( {\n\t\t\tname: 'move-to',\n\t\t\tlabel: __( 'Move to' ),\n\t\t\tcallback: () => {\n\t\t\t\tsetNavigationMode( true );\n\t\t\t\tselectBlock( clientIds[ 0 ] );\n\t\t\t\tsetBlockMovingClientId( clientIds[ 0 ] );\n\t\t\t},\n\t\t\ticon: move,\n\t\t} );\n\t}\n\n\treturn {\n\t\tisLoading: false,\n\t\tcommands: commands.map( ( command ) => ( {\n\t\t\t...command,\n\t\t\tname: 'core/block-editor/action-' + command.name,\n\t\t\tcallback: ( { close } ) => {\n\t\t\t\tcommand.callback();\n\t\t\t\tclose();\n\t\t\t},\n\t\t} ) ),\n\t};\n};\n\nconst useQuickActionsCommands = () => {\n\tconst { clientIds, isUngroupable, isGroupable } = useSelect( ( select ) => {\n\t\tconst {\n\t\t\tgetSelectedBlockClientIds,\n\t\t\tisUngroupable: _isUngroupable,\n\t\t\tisGroupable: _isGroupable,\n\t\t} = select( blockEditorStore );\n\t\tconst selectedBlockClientIds = getSelectedBlockClientIds();\n\n\t\treturn {\n\t\t\tclientIds: selectedBlockClientIds,\n\t\t\tisUngroupable: _isUngroupable(),\n\t\t\tisGroupable: _isGroupable(),\n\t\t};\n\t}, [] );\n\tconst {\n\t\tcanInsertBlockType,\n\t\tgetBlockRootClientId,\n\t\tgetBlocksByClientId,\n\t\tcanRemoveBlocks,\n\t} = useSelect( blockEditorStore );\n\tconst { getDefaultBlockName, getGroupingBlockName } =\n\t\tuseSelect( blocksStore );\n\n\tconst blocks = getBlocksByClientId( clientIds );\n\n\tconst {\n\t\tremoveBlocks,\n\t\treplaceBlocks,\n\t\tduplicateBlocks,\n\t\tinsertAfterBlock,\n\t\tinsertBeforeBlock,\n\t} = useDispatch( blockEditorStore );\n\n\tconst onGroup = () => {\n\t\tif ( ! blocks.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst groupingBlockName = getGroupingBlockName();\n\n\t\t// Activate the `transform` on `core/group` which does the conversion.\n\t\tconst newBlocks = switchToBlockType( blocks, groupingBlockName );\n\n\t\tif ( ! newBlocks ) {\n\t\t\treturn;\n\t\t}\n\t\treplaceBlocks( clientIds, newBlocks );\n\t};\n\tconst onUngroup = () => {\n\t\tif ( ! blocks.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst innerBlocks = blocks[ 0 ].innerBlocks;\n\n\t\tif ( ! innerBlocks.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\treplaceBlocks( clientIds, innerBlocks );\n\t};\n\n\tif ( ! clientIds || clientIds.length < 1 ) {\n\t\treturn { isLoading: false, commands: [] };\n\t}\n\n\tconst rootClientId = getBlockRootClientId( clientIds[ 0 ] );\n\tconst canInsertDefaultBlock = canInsertBlockType(\n\t\tgetDefaultBlockName(),\n\t\trootClientId\n\t);\n\tconst canDuplicate = blocks.every( ( block ) => {\n\t\treturn (\n\t\t\t!! block &&\n\t\t\thasBlockSupport( block.name, 'multiple', true ) &&\n\t\t\tcanInsertBlockType( block.name, rootClientId )\n\t\t);\n\t} );\n\tconst canRemove = canRemoveBlocks( clientIds, rootClientId );\n\n\tconst commands = [];\n\n\tif ( canDuplicate ) {\n\t\tcommands.push( {\n\t\t\tname: 'duplicate',\n\t\t\tlabel: __( 'Duplicate' ),\n\t\t\tcallback: () => duplicateBlocks( clientIds, true ),\n\t\t\ticon: copy,\n\t\t} );\n\t}\n\n\tif ( canInsertDefaultBlock ) {\n\t\tcommands.push(\n\t\t\t{\n\t\t\t\tname: 'add-before',\n\t\t\t\tlabel: __( 'Add before' ),\n\t\t\t\tcallback: () => {\n\t\t\t\t\tconst clientId = Array.isArray( clientIds )\n\t\t\t\t\t\t? clientIds[ 0 ]\n\t\t\t\t\t\t: clientId;\n\t\t\t\t\tinsertBeforeBlock( clientId );\n\t\t\t\t},\n\t\t\t\ticon: add,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'add-after',\n\t\t\t\tlabel: __( 'Add after' ),\n\t\t\t\tcallback: () => {\n\t\t\t\t\tconst clientId = Array.isArray( clientIds )\n\t\t\t\t\t\t? clientIds[ clientIds.length - 1 ]\n\t\t\t\t\t\t: clientId;\n\t\t\t\t\tinsertAfterBlock( clientId );\n\t\t\t\t},\n\t\t\t\ticon: add,\n\t\t\t}\n\t\t);\n\t}\n\n\tif ( isGroupable ) {\n\t\tcommands.push( {\n\t\t\tname: 'Group',\n\t\t\tlabel: __( 'Group' ),\n\t\t\tcallback: onGroup,\n\t\t\ticon: group,\n\t\t} );\n\t}\n\n\tif ( isUngroupable ) {\n\t\tcommands.push( {\n\t\t\tname: 'ungroup',\n\t\t\tlabel: __( 'Ungroup' ),\n\t\t\tcallback: onUngroup,\n\t\t\ticon: ungroup,\n\t\t} );\n\t}\n\n\tif ( canRemove ) {\n\t\tcommands.push( {\n\t\t\tname: 'remove',\n\t\t\tlabel: __( 'Delete' ),\n\t\t\tcallback: () => removeBlocks( clientIds, true ),\n\t\t\ticon: remove,\n\t\t} );\n\t}\n\n\treturn {\n\t\tisLoading: false,\n\t\tcommands: commands.map( ( command ) => ( {\n\t\t\t...command,\n\t\t\tname: 'core/block-editor/action-' + command.name,\n\t\t\tcallback: ( { close } ) => {\n\t\t\t\tcommand.callback();\n\t\t\t\tclose();\n\t\t\t},\n\t\t} ) ),\n\t};\n};\n\nexport const useBlockCommands = () => {\n\tuseCommandLoader( {\n\t\tname: 'core/block-editor/blockTransforms',\n\t\thook: useTransformCommands,\n\t} );\n\tuseCommandLoader( {\n\t\tname: 'core/block-editor/blockActions',\n\t\thook: useActionsCommands,\n\t} );\n\tuseCommandLoader( {\n\t\tname: 'core/block-editor/blockQuickActions',\n\t\thook: useQuickActionsCommands,\n\t\tcontext: 'block-selection-edit',\n\t} );\n};\n","/**\n * WordPress dependencies\n */\nimport { useMergeRefs } from '@wordpress/compose';\nimport { useRef } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport BlockList from '../block-list';\nimport BlockTools from '../block-tools';\nimport EditorStyles from '../editor-styles';\nimport Iframe from '../iframe';\nimport WritingFlow from '../writing-flow';\nimport { useMouseMoveTypingReset } from '../observe-typing';\nimport { useBlockSelectionClearer } from '../block-selection-clearer';\nimport { useBlockCommands } from '../use-block-commands';\n\nexport function ExperimentalBlockCanvas( {\n\tshouldIframe = true,\n\theight = '300px',\n\tchildren = <BlockList />,\n\tstyles,\n\tcontentRef: contentRefProp,\n\tiframeProps,\n} ) {\n\tuseBlockCommands();\n\tconst resetTypingRef = useMouseMoveTypingReset();\n\tconst clearerRef = useBlockSelectionClearer();\n\tconst localRef = useRef();\n\tconst contentRef = useMergeRefs( [ contentRefProp, clearerRef, localRef ] );\n\n\tif ( ! shouldIframe ) {\n\t\treturn (\n\t\t\t<BlockTools\n\t\t\t\t__unstableContentRef={ localRef }\n\t\t\t\tstyle={ { height, display: 'flex' } }\n\t\t\t>\n\t\t\t\t<EditorStyles\n\t\t\t\t\tstyles={ styles }\n\t\t\t\t\tscope=\".editor-styles-wrapper\"\n\t\t\t\t/>\n\t\t\t\t<WritingFlow\n\t\t\t\t\tref={ contentRef }\n\t\t\t\t\tclassName=\"editor-styles-wrapper\"\n\t\t\t\t\ttabIndex={ -1 }\n\t\t\t\t\tstyle={ {\n\t\t\t\t\t\theight: '100%',\n\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t} }\n\t\t\t\t>\n\t\t\t\t\t{ children }\n\t\t\t\t</WritingFlow>\n\t\t\t</BlockTools>\n\t\t);\n\t}\n\n\treturn (\n\t\t<BlockTools\n\t\t\t__unstableContentRef={ localRef }\n\t\t\tstyle={ { height, display: 'flex' } }\n\t\t>\n\t\t\t<Iframe\n\t\t\t\t{ ...iframeProps }\n\t\t\t\tref={ resetTypingRef }\n\t\t\t\tcontentRef={ contentRef }\n\t\t\t\tstyle={ {\n\t\t\t\t\t...iframeProps?.style,\n\t\t\t\t} }\n\t\t\t\tname=\"editor-canvas\"\n\t\t\t>\n\t\t\t\t<EditorStyles styles={ styles } />\n\t\t\t\t{ children }\n\t\t\t</Iframe>\n\t\t</BlockTools>\n\t);\n}\n\n/**\n * BlockCanvas component is a component used to display the canvas of the block editor.\n * What we call the canvas is an iframe containing the block list that you can manipulate.\n * The component is also responsible of wiring up all the necessary hooks to enable\n * the keyboard navigation across blocks in the editor and inject content styles into the iframe.\n *\n * @example\n *\n * ```jsx\n * function MyBlockEditor() {\n *   const [ blocks, updateBlocks ] = useState([]);\n *   return (\n *     <BlockEditorProvider\n *       value={ blocks }\n *       onInput={ updateBlocks }\n *       onChange={ persistBlocks }\n *      >\n *        <BlockCanvas height=\"400px\" />\n *      </BlockEditorProvider>\n *    );\n * }\n * ```\n *\n * @param {Object}  props          Component props.\n * @param {string}  props.height   Canvas height, defaults to 300px.\n * @param {Array}   props.styles   Content styles to inject into the iframe.\n * @param {Element} props.children Content of the canvas, defaults to the BlockList component.\n * @return {Element}               Block Breadcrumb.\n */\nfunction BlockCanvas( { children, height, styles } ) {\n\treturn (\n\t\t<ExperimentalBlockCanvas height={ height } styles={ styles }>\n\t\t\t{ children }\n\t\t</ExperimentalBlockCanvas>\n\t);\n}\n\nexport default BlockCanvas;\n","/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\tToolbarButton,\r\n\tDropdown,\r\n\tToolbarGroup,\r\n\tSVG,\r\n\tPath,\r\n} from '@wordpress/components';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { DOWN } from '@wordpress/keycodes';\r\nimport deprecated from '@wordpress/deprecated';\r\n\r\nconst ColorSelectorSVGIcon = () => (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\">\r\n\t\t<Path d=\"M7.434 5l3.18 9.16H8.538l-.692-2.184H4.628l-.705 2.184H2L5.18 5h2.254zm-1.13 1.904h-.115l-1.148 3.593H7.44L6.304 6.904zM14.348 7.006c1.853 0 2.9.876 2.9 2.374v4.78h-1.79v-.914h-.114c-.362.64-1.123 1.022-2.031 1.022-1.346 0-2.292-.826-2.292-2.108 0-1.27.972-2.006 2.71-2.107l1.696-.102V9.38c0-.584-.42-.914-1.18-.914-.667 0-1.112.228-1.264.647h-1.701c.12-1.295 1.307-2.107 3.066-2.107zm1.079 4.1l-1.416.09c-.793.056-1.18.342-1.18.844 0 .52.45.837 1.091.837.857 0 1.505-.545 1.505-1.256v-.515z\" />\r\n\t</SVG>\r\n);\r\n\r\n/**\r\n * Color Selector Icon component.\r\n *\r\n * @param {Object} props           Component properties.\r\n * @param {Object} props.style     Style object.\r\n * @param {string} props.className Class name for component.\r\n *\r\n * @return {*} React Icon component.\r\n */\r\nconst ColorSelectorIcon = ( { style, className } ) => {\r\n\treturn (\r\n\t\t<div className=\"block-library-colors-selector__icon-container\">\r\n\t\t\t<div\r\n\t\t\t\tclassName={ `${ className } block-library-colors-selector__state-selection` }\r\n\t\t\t\tstyle={ style }\r\n\t\t\t>\r\n\t\t\t\t<ColorSelectorSVGIcon />\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\n/**\r\n * Renders the Colors Selector Toolbar with the icon button.\r\n *\r\n * @param {Object} props                 Component properties.\r\n * @param {Object} props.TextColor       Text color component that wraps icon.\r\n * @param {Object} props.BackgroundColor Background color component that wraps icon.\r\n *\r\n * @return {*} React toggle button component.\r\n */\r\nconst renderToggleComponent =\r\n\t( { TextColor, BackgroundColor } ) =>\r\n\t( { onToggle, isOpen } ) => {\r\n\t\tconst openOnArrowDown = ( event ) => {\r\n\t\t\tif ( ! isOpen && event.keyCode === DOWN ) {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tonToggle();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\treturn (\r\n\t\t\t<ToolbarGroup>\r\n\t\t\t\t<ToolbarButton\r\n\t\t\t\t\tclassName=\"components-toolbar__control block-library-colors-selector__toggle\"\r\n\t\t\t\t\tlabel={ __( 'Open Colors Selector' ) }\r\n\t\t\t\t\tonClick={ onToggle }\r\n\t\t\t\t\tonKeyDown={ openOnArrowDown }\r\n\t\t\t\t\ticon={\r\n\t\t\t\t\t\t<BackgroundColor>\r\n\t\t\t\t\t\t\t<TextColor>\r\n\t\t\t\t\t\t\t\t<ColorSelectorIcon />\r\n\t\t\t\t\t\t\t</TextColor>\r\n\t\t\t\t\t\t</BackgroundColor>\r\n\t\t\t\t\t}\r\n\t\t\t\t/>\r\n\t\t\t</ToolbarGroup>\r\n\t\t);\r\n\t};\r\n\r\nconst BlockColorsStyleSelector = ( { children, ...other } ) => {\r\n\tdeprecated( `wp.blockEditor.BlockColorsStyleSelector`, {\r\n\t\talternative: 'block supports API',\r\n\t\tsince: '6.1',\r\n\t\tversion: '6.3',\r\n\t} );\r\n\r\n\treturn (\r\n\t\t<Dropdown\r\n\t\t\tpopoverProps={ { placement: 'bottom-start' } }\r\n\t\t\tclassName=\"block-library-colors-selector\"\r\n\t\t\tcontentClassName=\"block-library-colors-selector__popover\"\r\n\t\t\trenderToggle={ renderToggleComponent( other ) }\r\n\t\t\trenderContent={ () => children }\r\n\t\t/>\r\n\t);\r\n};\r\n\r\nexport default BlockColorsStyleSelector;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst listView = (\r\n\t<SVG viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n\t\t<Path d=\"M3 6h11v1.5H3V6Zm3.5 5.5h11V13h-11v-1.5ZM21 17H10v1.5h11V17Z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default listView;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { createContext, useContext } from '@wordpress/element';\r\n\r\nexport const ListViewContext = createContext( {} );\r\n\r\nexport const useListViewContext = () => useContext( ListViewContext );\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useRef, useEffect } from '@wordpress/element';\r\n\r\n/**\r\n * A component specifically designed to be used as an element referenced\r\n * by ARIA attributes such as `aria-labelledby` or `aria-describedby`.\r\n *\r\n * @param {Object}                    props          Props.\r\n * @param {import('react').ReactNode} props.children\r\n */\r\nexport default function AriaReferencedText( { children, ...props } ) {\r\n\tconst ref = useRef();\r\n\r\n\tuseEffect( () => {\r\n\t\tif ( ref.current ) {\r\n\t\t\t// This seems like a no-op, but it fixes a bug in Firefox where\r\n\t\t\t// it fails to recompute the text when only the text node changes.\r\n\t\t\t// @see https://github.com/WordPress/gutenberg/pull/51035\r\n\t\t\tref.current.textContent = ref.current.textContent;\r\n\t\t}\r\n\t}, [ children ] );\r\n\r\n\treturn (\r\n\t\t<div hidden { ...props } ref={ ref }>\r\n\t\t\t{ children }\r\n\t\t</div>\r\n\t);\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useInstanceId } from '@wordpress/compose';\r\nimport { speak } from '@wordpress/a11y';\r\nimport { useSelect } from '@wordpress/data';\r\nimport { forwardRef, useEffect } from '@wordpress/element';\r\nimport { __, sprintf } from '@wordpress/i18n';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as blockEditorStore } from '../../store';\r\nimport useBlockDisplayTitle from '../block-title/use-block-display-title';\r\nimport { useListViewContext } from './context';\r\nimport Inserter from '../inserter';\r\nimport AriaReferencedText from './aria-referenced-text';\r\n\r\nexport const Appender = forwardRef(\r\n\t( { nestingLevel, blockCount, clientId, ...props }, ref ) => {\r\n\t\tconst { insertedBlock, setInsertedBlock } = useListViewContext();\r\n\r\n\t\tconst instanceId = useInstanceId( Appender );\r\n\t\tconst hideInserter = useSelect(\r\n\t\t\t( select ) => {\r\n\t\t\t\tconst { getTemplateLock, __unstableGetEditorMode } =\r\n\t\t\t\t\tselect( blockEditorStore );\r\n\r\n\t\t\t\treturn (\r\n\t\t\t\t\t!! getTemplateLock( clientId ) ||\r\n\t\t\t\t\t__unstableGetEditorMode() === 'zoom-out'\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\t[ clientId ]\r\n\t\t);\r\n\r\n\t\tconst blockTitle = useBlockDisplayTitle( {\r\n\t\t\tclientId,\r\n\t\t\tcontext: 'list-view',\r\n\t\t} );\r\n\r\n\t\tconst insertedBlockTitle = useBlockDisplayTitle( {\r\n\t\t\tclientId: insertedBlock?.clientId,\r\n\t\t\tcontext: 'list-view',\r\n\t\t} );\r\n\r\n\t\tuseEffect( () => {\r\n\t\t\tif ( ! insertedBlockTitle?.length ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tspeak(\r\n\t\t\t\tsprintf(\r\n\t\t\t\t\t// translators: %s: name of block being inserted (i.e. Paragraph, Image, Group etc)\r\n\t\t\t\t\t__( '%s block inserted' ),\r\n\t\t\t\t\tinsertedBlockTitle\r\n\t\t\t\t),\r\n\t\t\t\t'assertive'\r\n\t\t\t);\r\n\t\t}, [ insertedBlockTitle ] );\r\n\r\n\t\tif ( hideInserter ) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tconst descriptionId = `list-view-appender__${ instanceId }`;\r\n\t\tconst description = sprintf(\r\n\t\t\t/* translators: 1: The name of the block. 2: The numerical position of the block. 3: The level of nesting for the block. */\r\n\t\t\t__( 'Append to %1$s block at position %2$d, Level %3$d' ),\r\n\t\t\tblockTitle,\r\n\t\t\tblockCount + 1,\r\n\t\t\tnestingLevel\r\n\t\t);\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"list-view-appender\">\r\n\t\t\t\t<Inserter\r\n\t\t\t\t\tref={ ref }\r\n\t\t\t\t\trootClientId={ clientId }\r\n\t\t\t\t\tposition=\"bottom right\"\r\n\t\t\t\t\tisAppender\r\n\t\t\t\t\tselectBlockOnInsert={ false }\r\n\t\t\t\t\tshouldDirectInsert={ false }\r\n\t\t\t\t\t__experimentalIsQuick\r\n\t\t\t\t\t{ ...props }\r\n\t\t\t\t\ttoggleProps={ { 'aria-describedby': descriptionId } }\r\n\t\t\t\t\tonSelectOrClose={ ( maybeInsertedBlock ) => {\r\n\t\t\t\t\t\tif ( maybeInsertedBlock?.clientId ) {\r\n\t\t\t\t\t\t\tsetInsertedBlock( maybeInsertedBlock );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} }\r\n\t\t\t\t/>\r\n\t\t\t\t<AriaReferencedText id={ descriptionId }>\r\n\t\t\t\t\t{ description }\r\n\t\t\t\t</AriaReferencedText>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n);\r\n","/**\r\n * External dependencies\r\n */\r\nimport { animated } from '@react-spring/web';\r\nimport classnames from 'classnames';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { __experimentalTreeGridRow as TreeGridRow } from '@wordpress/components';\r\nimport { useMergeRefs } from '@wordpress/compose';\r\nimport { forwardRef } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport useMovingAnimation from '../use-moving-animation';\r\n\r\nconst AnimatedTreeGridRow = animated( TreeGridRow );\r\n\r\nconst ListViewLeaf = forwardRef(\r\n\t(\r\n\t\t{\r\n\t\t\tisDragged,\r\n\t\t\tisSelected,\r\n\t\t\tposition,\r\n\t\t\tlevel,\r\n\t\t\trowCount,\r\n\t\t\tchildren,\r\n\t\t\tclassName,\r\n\t\t\tpath,\r\n\t\t\t...props\r\n\t\t},\r\n\t\tref\r\n\t) => {\r\n\t\tconst animationRef = useMovingAnimation( {\r\n\t\t\tclientId: props[ 'data-block' ],\r\n\t\t\tenableAnimation: true,\r\n\t\t\ttriggerAnimationOnChange: path,\r\n\t\t} );\r\n\r\n\t\tconst mergedRef = useMergeRefs( [ ref, animationRef ] );\r\n\r\n\t\treturn (\r\n\t\t\t<AnimatedTreeGridRow\r\n\t\t\t\tref={ mergedRef }\r\n\t\t\t\tclassName={ classnames(\r\n\t\t\t\t\t'block-editor-list-view-leaf',\r\n\t\t\t\t\tclassName\r\n\t\t\t\t) }\r\n\t\t\t\tlevel={ level }\r\n\t\t\t\tpositionInSet={ position }\r\n\t\t\t\tsetSize={ rowCount }\r\n\t\t\t\tisExpanded={ undefined }\r\n\t\t\t\t{ ...props }\r\n\t\t\t>\r\n\t\t\t\t{ children }\r\n\t\t\t</AnimatedTreeGridRow>\r\n\t\t);\r\n\t}\r\n);\r\n\r\nexport default ListViewLeaf;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst pinSmall = (\r\n\t<SVG\r\n\t\twidth=\"24\"\r\n\t\theight=\"24\"\r\n\t\tviewBox=\"0 0 24 24\"\r\n\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t>\r\n\t\t<Path d=\"M10.97 10.159a3.382 3.382 0 0 0-2.857.955l1.724 1.723-2.836 2.913L7 17h1.25l2.913-2.837 1.723 1.723a3.38 3.38 0 0 0 .606-.825c.33-.63.446-1.343.35-2.032L17 10.695 13.305 7l-2.334 3.159Z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default pinSmall;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst lockSmall = (\r\n\t<SVG viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n\t\t<Path\r\n\t\t\tfillRule=\"evenodd\"\r\n\t\t\tclipRule=\"evenodd\"\r\n\t\t\td=\"M15 11h-.2V9c0-1.5-1.2-2.8-2.8-2.8S9.2 7.5 9.2 9v2H9c-.6 0-1 .4-1 1v4c0 .6.4 1 1 1h6c.6 0 1-.4 1-1v-4c0-.6-.4-1-1-1zm-1.8 0h-2.5V9c0-.7.6-1.2 1.2-1.2s1.2.6 1.2 1.2v2z\"\r\n\t\t/>\r\n\t</SVG>\r\n);\r\n\r\nexport default lockSmall;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { chevronRightSmall, chevronLeftSmall, Icon } from '@wordpress/icons';\r\nimport { isRTL } from '@wordpress/i18n';\r\n\r\nexport default function ListViewExpander( { onClick } ) {\r\n\treturn (\r\n\t\t// Keyboard events are handled by TreeGrid see: components/src/tree-grid/index.js\r\n\t\t//\r\n\t\t// The expander component is implemented as a pseudo element in the w3 example\r\n\t\t// https://www.w3.org/TR/wai-aria-practices/examples/treegrid/treegrid-1.html\r\n\t\t//\r\n\t\t// We've mimicked this by adding an icon with aria-hidden set to true to hide this from the accessibility tree.\r\n\t\t// For the current tree grid implementation, please do not try to make this a button.\r\n\t\t//\r\n\t\t// eslint-disable-next-line jsx-a11y/click-events-have-key-events,jsx-a11y/no-static-element-interactions\r\n\t\t<span\r\n\t\t\tclassName=\"block-editor-list-view__expander\"\r\n\t\t\tonClick={ ( event ) => onClick( event, { forceToggle: true } ) }\r\n\t\t\taria-hidden=\"true\"\r\n\t\t\tdata-testid=\"list-view-expander\"\r\n\t\t>\r\n\t\t\t<Icon icon={ isRTL() ? chevronLeftSmall : chevronRightSmall } />\r\n\t\t</span>\r\n\t);\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useMemo } from '@wordpress/element';\r\nimport { useSelect } from '@wordpress/data';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as blockEditorStore } from '../../store';\r\n\r\n// Maximum number of images to display in a list view row.\r\nconst MAX_IMAGES = 3;\r\n\r\nfunction getImage( block ) {\r\n\tif ( block.name !== 'core/image' ) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tif ( block.attributes?.url ) {\r\n\t\treturn {\r\n\t\t\turl: block.attributes.url,\r\n\t\t\talt: block.attributes.alt,\r\n\t\t\tclientId: block.clientId,\r\n\t\t};\r\n\t}\r\n}\r\n\r\nfunction getImagesFromGallery( block ) {\r\n\tif ( block.name !== 'core/gallery' || ! block.innerBlocks ) {\r\n\t\treturn [];\r\n\t}\r\n\r\n\tconst images = [];\r\n\r\n\tfor ( const innerBlock of block.innerBlocks ) {\r\n\t\tconst img = getImage( innerBlock );\r\n\t\tif ( img ) {\r\n\t\t\timages.push( img );\r\n\t\t}\r\n\t\tif ( images.length >= MAX_IMAGES ) {\r\n\t\t\treturn images;\r\n\t\t}\r\n\t}\r\n\r\n\treturn images;\r\n}\r\n\r\nfunction getImagesFromBlock( block, isExpanded ) {\r\n\tconst img = getImage( block );\r\n\tif ( img ) {\r\n\t\treturn [ img ];\r\n\t}\r\n\treturn isExpanded ? [] : getImagesFromGallery( block );\r\n}\r\n\r\n/**\r\n * Get a block's preview images for display within a list view row.\r\n *\r\n * TODO: Currently only supports images from the core/image and core/gallery\r\n * blocks. This should be expanded to support other blocks that have images,\r\n * potentially via an API that blocks can opt into / provide their own logic.\r\n *\r\n * @param {Object}  props            Hook properties.\r\n * @param {string}  props.clientId   The block's clientId.\r\n * @param {boolean} props.isExpanded Whether or not the block is expanded in the list view.\r\n * @return {Array} Images.\r\n */\r\nexport default function useListViewImages( { clientId, isExpanded } ) {\r\n\tconst { block } = useSelect(\r\n\t\t( select ) => {\r\n\t\t\tconst _block = select( blockEditorStore ).getBlock( clientId );\r\n\t\t\treturn { block: _block };\r\n\t\t},\r\n\t\t[ clientId ]\r\n\t);\r\n\r\n\tconst images = useMemo( () => {\r\n\t\treturn getImagesFromBlock( block, isExpanded );\r\n\t}, [ block, isExpanded ] );\r\n\r\n\treturn images;\r\n}\r\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { hasBlockSupport } from '@wordpress/blocks';\nimport {\n\tButton,\n\t__experimentalHStack as HStack,\n\t__experimentalTruncate as Truncate,\n\tTooltip,\n} from '@wordpress/components';\nimport { forwardRef } from '@wordpress/element';\nimport { Icon, lockSmall as lock, pinSmall } from '@wordpress/icons';\nimport { SPACE, ENTER, BACKSPACE, DELETE } from '@wordpress/keycodes';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { __unstableUseShortcutEventMatch as useShortcutEventMatch } from '@wordpress/keyboard-shortcuts';\nimport { __, sprintf } from '@wordpress/i18n';\nimport isShallowEqual from '@wordpress/is-shallow-equal';\n\n/**\n * Internal dependencies\n */\nimport BlockIcon from '../block-icon';\nimport useBlockDisplayInformation from '../use-block-display-information';\nimport useBlockDisplayTitle from '../block-title/use-block-display-title';\nimport ListViewExpander from './expander';\nimport { useBlockLock } from '../block-lock';\nimport { store as blockEditorStore } from '../../store';\nimport useListViewImages from './use-list-view-images';\nimport { useListViewContext } from './context';\n\nfunction ListViewBlockSelectButton(\n\t{\n\t\tclassName,\n\t\tblock: { clientId },\n\t\tonClick,\n\t\tonContextMenu,\n\t\tonMouseDown,\n\t\tonToggleExpanded,\n\t\ttabIndex,\n\t\tonFocus,\n\t\tonDragStart,\n\t\tonDragEnd,\n\t\tdraggable,\n\t\tisExpanded,\n\t\tariaDescribedBy,\n\t\tupdateFocusAndSelection,\n\t},\n\tref\n) {\n\tconst blockInformation = useBlockDisplayInformation( clientId );\n\tconst blockTitle = useBlockDisplayTitle( {\n\t\tclientId,\n\t\tcontext: 'list-view',\n\t} );\n\tconst { isLocked } = useBlockLock( clientId );\n\tconst {\n\t\tcanInsertBlockType,\n\t\tgetSelectedBlockClientIds,\n\t\tgetPreviousBlockClientId,\n\t\tgetBlockRootClientId,\n\t\tgetBlockOrder,\n\t\tgetBlockParents,\n\t\tgetBlocksByClientId,\n\t\tcanRemoveBlocks,\n\t} = useSelect( blockEditorStore );\n\tconst { duplicateBlocks, multiSelect, removeBlocks } =\n\t\tuseDispatch( blockEditorStore );\n\tconst isMatch = useShortcutEventMatch();\n\tconst isSticky = blockInformation?.positionType === 'sticky';\n\tconst images = useListViewImages( { clientId, isExpanded } );\n\tconst { collapseAll, expand, rootClientId } = useListViewContext();\n\n\tconst positionLabel = blockInformation?.positionLabel\n\t\t? sprintf(\n\t\t\t\t// translators: 1: Position of selected block, e.g. \"Sticky\" or \"Fixed\".\n\t\t\t\t__( 'Position: %1$s' ),\n\t\t\t\tblockInformation.positionLabel\n\t\t  )\n\t\t: '';\n\n\t// The `href` attribute triggers the browser's native HTML drag operations.\n\t// When the link is dragged, the element's outerHTML is set in DataTransfer object as text/html.\n\t// We need to clear any HTML drag data to prevent `pasteHandler` from firing\n\t// inside the `useOnBlockDrop` hook.\n\tconst onDragStartHandler = ( event ) => {\n\t\tevent.dataTransfer.clearData();\n\t\tonDragStart?.( event );\n\t};\n\n\t// Determine which blocks to update:\n\t// If the current (focused) block is part of the block selection, use the whole selection.\n\t// If the focused block is not part of the block selection, only update the focused block.\n\tfunction getBlocksToUpdate() {\n\t\tconst selectedBlockClientIds = getSelectedBlockClientIds();\n\t\tconst isUpdatingSelectedBlocks =\n\t\t\tselectedBlockClientIds.includes( clientId );\n\t\tconst firstBlockClientId = isUpdatingSelectedBlocks\n\t\t\t? selectedBlockClientIds[ 0 ]\n\t\t\t: clientId;\n\t\tconst firstBlockRootClientId =\n\t\t\tgetBlockRootClientId( firstBlockClientId );\n\n\t\tconst blocksToUpdate = isUpdatingSelectedBlocks\n\t\t\t? selectedBlockClientIds\n\t\t\t: [ clientId ];\n\n\t\treturn {\n\t\t\tblocksToUpdate,\n\t\t\tfirstBlockClientId,\n\t\t\tfirstBlockRootClientId,\n\t\t\tselectedBlockClientIds,\n\t\t};\n\t}\n\n\t/**\n\t * @param {KeyboardEvent} event\n\t */\n\tasync function onKeyDownHandler( event ) {\n\t\tif ( event.keyCode === ENTER || event.keyCode === SPACE ) {\n\t\t\tonClick( event );\n\t\t} else if (\n\t\t\tevent.keyCode === BACKSPACE ||\n\t\t\tevent.keyCode === DELETE ||\n\t\t\tisMatch( 'core/block-editor/remove', event )\n\t\t) {\n\t\t\tconst {\n\t\t\t\tblocksToUpdate: blocksToDelete,\n\t\t\t\tfirstBlockClientId,\n\t\t\t\tfirstBlockRootClientId,\n\t\t\t\tselectedBlockClientIds,\n\t\t\t} = getBlocksToUpdate();\n\n\t\t\t// Don't update the selection if the blocks cannot be deleted.\n\t\t\tif ( ! canRemoveBlocks( blocksToDelete, firstBlockRootClientId ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet blockToFocus =\n\t\t\t\tgetPreviousBlockClientId( firstBlockClientId ) ??\n\t\t\t\t// If the previous block is not found (when the first block is deleted),\n\t\t\t\t// fallback to focus the parent block.\n\t\t\t\tfirstBlockRootClientId;\n\n\t\t\tremoveBlocks( blocksToDelete, false );\n\n\t\t\t// Update the selection if the original selection has been removed.\n\t\t\tconst shouldUpdateSelection =\n\t\t\t\tselectedBlockClientIds.length > 0 &&\n\t\t\t\tgetSelectedBlockClientIds().length === 0;\n\n\t\t\t// If there's no previous block nor parent block, focus the first block.\n\t\t\tif ( ! blockToFocus ) {\n\t\t\t\tblockToFocus = getBlockOrder()[ 0 ];\n\t\t\t}\n\n\t\t\tupdateFocusAndSelection( blockToFocus, shouldUpdateSelection );\n\t\t} else if ( isMatch( 'core/block-editor/duplicate', event ) ) {\n\t\t\tif ( event.defaultPrevented ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tevent.preventDefault();\n\n\t\t\tconst { blocksToUpdate, firstBlockRootClientId } =\n\t\t\t\tgetBlocksToUpdate();\n\n\t\t\tconst canDuplicate = getBlocksByClientId( blocksToUpdate ).every(\n\t\t\t\t( block ) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t!! block &&\n\t\t\t\t\t\thasBlockSupport( block.name, 'multiple', true ) &&\n\t\t\t\t\t\tcanInsertBlockType( block.name, firstBlockRootClientId )\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tif ( canDuplicate ) {\n\t\t\t\tconst updatedBlocks = await duplicateBlocks(\n\t\t\t\t\tblocksToUpdate,\n\t\t\t\t\tfalse\n\t\t\t\t);\n\n\t\t\t\tif ( updatedBlocks?.length ) {\n\t\t\t\t\t// If blocks have been duplicated, focus the first duplicated block.\n\t\t\t\t\tupdateFocusAndSelection( updatedBlocks[ 0 ], false );\n\t\t\t\t}\n\t\t\t}\n\t\t} else if ( isMatch( 'core/block-editor/select-all', event ) ) {\n\t\t\tif ( event.defaultPrevented ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tevent.preventDefault();\n\n\t\t\tconst { firstBlockRootClientId, selectedBlockClientIds } =\n\t\t\t\tgetBlocksToUpdate();\n\t\t\tconst blockClientIds = getBlockOrder( firstBlockRootClientId );\n\t\t\tif ( ! blockClientIds.length ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// If we have selected all sibling nested blocks, try selecting up a level.\n\t\t\t// This is a similar implementation to that used by `useSelectAll`.\n\t\t\t// `isShallowEqual` is used for the list view instead of a length check,\n\t\t\t// as the array of siblings of the currently focused block may be a different\n\t\t\t// set of blocks from the current block selection if the user is focused\n\t\t\t// on a different part of the list view from the block selection.\n\t\t\tif ( isShallowEqual( selectedBlockClientIds, blockClientIds ) ) {\n\t\t\t\t// Only select up a level if the first block is not the root block.\n\t\t\t\t// This ensures that the block selection can't break out of the root block\n\t\t\t\t// used by the list view, if the list view is only showing a partial hierarchy.\n\t\t\t\tif (\n\t\t\t\t\tfirstBlockRootClientId &&\n\t\t\t\t\tfirstBlockRootClientId !== rootClientId\n\t\t\t\t) {\n\t\t\t\t\tupdateFocusAndSelection( firstBlockRootClientId, true );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Select all while passing `null` to skip focusing to the editor canvas,\n\t\t\t// and retain focus within the list view.\n\t\t\tmultiSelect(\n\t\t\t\tblockClientIds[ 0 ],\n\t\t\t\tblockClientIds[ blockClientIds.length - 1 ],\n\t\t\t\tnull\n\t\t\t);\n\t\t} else if ( isMatch( 'core/block-editor/collapse-list-view', event ) ) {\n\t\t\tif ( event.defaultPrevented ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tevent.preventDefault();\n\t\t\tconst { firstBlockClientId } = getBlocksToUpdate();\n\t\t\tconst blockParents = getBlockParents( firstBlockClientId, false );\n\t\t\t// Collapse all blocks.\n\t\t\tcollapseAll();\n\t\t\t// Expand all parents of the current block.\n\t\t\texpand( blockParents );\n\t\t}\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<Button\n\t\t\t\tclassName={ classnames(\n\t\t\t\t\t'block-editor-list-view-block-select-button',\n\t\t\t\t\tclassName\n\t\t\t\t) }\n\t\t\t\tonClick={ onClick }\n\t\t\t\tonContextMenu={ onContextMenu }\n\t\t\t\tonKeyDown={ onKeyDownHandler }\n\t\t\t\tonMouseDown={ onMouseDown }\n\t\t\t\tref={ ref }\n\t\t\t\ttabIndex={ tabIndex }\n\t\t\t\tonFocus={ onFocus }\n\t\t\t\tonDragStart={ onDragStartHandler }\n\t\t\t\tonDragEnd={ onDragEnd }\n\t\t\t\tdraggable={ draggable }\n\t\t\t\thref={ `#block-${ clientId }` }\n\t\t\t\taria-describedby={ ariaDescribedBy }\n\t\t\t\taria-expanded={ isExpanded }\n\t\t\t>\n\t\t\t\t<ListViewExpander onClick={ onToggleExpanded } />\n\t\t\t\t<BlockIcon\n\t\t\t\t\ticon={ blockInformation?.icon }\n\t\t\t\t\tshowColors\n\t\t\t\t\tcontext=\"list-view\"\n\t\t\t\t/>\n\t\t\t\t<HStack\n\t\t\t\t\talignment=\"center\"\n\t\t\t\t\tclassName=\"block-editor-list-view-block-select-button__label-wrapper\"\n\t\t\t\t\tjustify=\"flex-start\"\n\t\t\t\t\tspacing={ 1 }\n\t\t\t\t>\n\t\t\t\t\t<span className=\"block-editor-list-view-block-select-button__title\">\n\t\t\t\t\t\t<Truncate ellipsizeMode=\"auto\">{ blockTitle }</Truncate>\n\t\t\t\t\t</span>\n\t\t\t\t\t{ blockInformation?.anchor && (\n\t\t\t\t\t\t<span className=\"block-editor-list-view-block-select-button__anchor-wrapper\">\n\t\t\t\t\t\t\t<Truncate\n\t\t\t\t\t\t\t\tclassName=\"block-editor-list-view-block-select-button__anchor\"\n\t\t\t\t\t\t\t\tellipsizeMode=\"auto\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ blockInformation.anchor }\n\t\t\t\t\t\t\t</Truncate>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t) }\n\t\t\t\t\t{ positionLabel && isSticky && (\n\t\t\t\t\t\t<Tooltip text={ positionLabel }>\n\t\t\t\t\t\t\t<Icon icon={ pinSmall } />\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t) }\n\t\t\t\t\t{ images.length ? (\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tclassName=\"block-editor-list-view-block-select-button__images\"\n\t\t\t\t\t\t\taria-hidden\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ images.map( ( image, index ) => (\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\tclassName=\"block-editor-list-view-block-select-button__image\"\n\t\t\t\t\t\t\t\t\tkey={ image.clientId }\n\t\t\t\t\t\t\t\t\tstyle={ {\n\t\t\t\t\t\t\t\t\t\tbackgroundImage: `url(${ image.url })`,\n\t\t\t\t\t\t\t\t\t\tzIndex: images.length - index, // Ensure the first image is on top, and subsequent images are behind.\n\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) ) }\n\t\t\t\t\t\t</span>\n\t\t\t\t\t) : null }\n\t\t\t\t\t{ isLocked && (\n\t\t\t\t\t\t<span className=\"block-editor-list-view-block-select-button__lock\">\n\t\t\t\t\t\t\t<Icon icon={ lock } />\n\t\t\t\t\t\t</span>\n\t\t\t\t\t) }\n\t\t\t\t</HStack>\n\t\t\t</Button>\n\t\t</>\n\t);\n}\n\nexport default forwardRef( ListViewBlockSelectButton );\n","/**\r\n * External dependencies\r\n */\r\nimport classnames from 'classnames';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { useSelect } from '@wordpress/data';\r\nimport { forwardRef } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport ListViewBlockSelectButton from './block-select-button';\r\nimport BlockDraggable from '../block-draggable';\r\nimport { store as blockEditorStore } from '../../store';\r\nimport { useListViewContext } from './context';\r\n\r\nconst ListViewBlockContents = forwardRef(\r\n\t(\r\n\t\t{\r\n\t\t\tonClick,\r\n\t\t\tonToggleExpanded,\r\n\t\t\tblock,\r\n\t\t\tisSelected,\r\n\t\t\tposition,\r\n\t\t\tsiblingBlockCount,\r\n\t\t\tlevel,\r\n\t\t\tisExpanded,\r\n\t\t\tselectedClientIds,\r\n\t\t\t...props\r\n\t\t},\r\n\t\tref\r\n\t) => {\r\n\t\tconst { clientId } = block;\r\n\r\n\t\tconst { blockMovingClientId, selectedBlockInBlockEditor } = useSelect(\r\n\t\t\t( select ) => {\r\n\t\t\t\tconst { hasBlockMovingClientId, getSelectedBlockClientId } =\r\n\t\t\t\t\tselect( blockEditorStore );\r\n\t\t\t\treturn {\r\n\t\t\t\t\tblockMovingClientId: hasBlockMovingClientId(),\r\n\t\t\t\t\tselectedBlockInBlockEditor: getSelectedBlockClientId(),\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\t[]\r\n\t\t);\r\n\r\n\t\tconst { AdditionalBlockContent, insertedBlock, setInsertedBlock } =\r\n\t\t\tuseListViewContext();\r\n\r\n\t\tconst isBlockMoveTarget =\r\n\t\t\tblockMovingClientId && selectedBlockInBlockEditor === clientId;\r\n\r\n\t\tconst className = classnames( 'block-editor-list-view-block-contents', {\r\n\t\t\t'is-dropping-before': isBlockMoveTarget,\r\n\t\t} );\r\n\r\n\t\t// Only include all selected blocks if the currently clicked on block\r\n\t\t// is one of the selected blocks. This ensures that if a user attempts\r\n\t\t// to drag a block that isn't part of the selection, they're still able\r\n\t\t// to drag it and rearrange its position.\r\n\t\tconst draggableClientIds = selectedClientIds.includes( clientId )\r\n\t\t\t? selectedClientIds\r\n\t\t\t: [ clientId ];\r\n\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t{ AdditionalBlockContent && (\r\n\t\t\t\t\t<AdditionalBlockContent\r\n\t\t\t\t\t\tblock={ block }\r\n\t\t\t\t\t\tinsertedBlock={ insertedBlock }\r\n\t\t\t\t\t\tsetInsertedBlock={ setInsertedBlock }\r\n\t\t\t\t\t/>\r\n\t\t\t\t) }\r\n\t\t\t\t<BlockDraggable\r\n\t\t\t\t\tappendToOwnerDocument\r\n\t\t\t\t\tclientIds={ draggableClientIds }\r\n\t\t\t\t\tcloneClassname={ 'block-editor-list-view-draggable-chip' }\r\n\t\t\t\t>\r\n\t\t\t\t\t{ ( { draggable, onDragStart, onDragEnd } ) => (\r\n\t\t\t\t\t\t<ListViewBlockSelectButton\r\n\t\t\t\t\t\t\tref={ ref }\r\n\t\t\t\t\t\t\tclassName={ className }\r\n\t\t\t\t\t\t\tblock={ block }\r\n\t\t\t\t\t\t\tonClick={ onClick }\r\n\t\t\t\t\t\t\tonToggleExpanded={ onToggleExpanded }\r\n\t\t\t\t\t\t\tisSelected={ isSelected }\r\n\t\t\t\t\t\t\tposition={ position }\r\n\t\t\t\t\t\t\tsiblingBlockCount={ siblingBlockCount }\r\n\t\t\t\t\t\t\tlevel={ level }\r\n\t\t\t\t\t\t\tdraggable={ draggable }\r\n\t\t\t\t\t\t\tonDragStart={ onDragStart }\r\n\t\t\t\t\t\t\tonDragEnd={ onDragEnd }\r\n\t\t\t\t\t\t\tisExpanded={ isExpanded }\r\n\t\t\t\t\t\t\t{ ...props }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t) }\r\n\t\t\t\t</BlockDraggable>\r\n\t\t\t</>\r\n\t\t);\r\n\t}\r\n);\r\n\r\nexport default ListViewBlockContents;\r\n","/**\n * WordPress dependencies\n */\nimport { __, sprintf } from '@wordpress/i18n';\nimport { focus } from '@wordpress/dom';\n\nexport const getBlockPositionDescription = ( position, siblingCount, level ) =>\n\tsprintf(\n\t\t/* translators: 1: The numerical position of the block. 2: The total number of blocks. 3. The level of nesting for the block. */\n\t\t__( 'Block %1$d of %2$d, Level %3$d.' ),\n\t\tposition,\n\t\tsiblingCount,\n\t\tlevel\n\t);\n\nexport const getBlockPropertiesDescription = ( isLocked ) =>\n\tisLocked ? __( 'This block is locked.' ) : '';\n\n/**\n * Returns true if the client ID occurs within the block selection or multi-selection,\n * or false otherwise.\n *\n * @param {string}          clientId               Block client ID.\n * @param {string|string[]} selectedBlockClientIds Selected block client ID, or an array of multi-selected blocks client IDs.\n *\n * @return {boolean} Whether the block is in multi-selection set.\n */\nexport const isClientIdSelected = ( clientId, selectedBlockClientIds ) =>\n\tArray.isArray( selectedBlockClientIds ) && selectedBlockClientIds.length\n\t\t? selectedBlockClientIds.indexOf( clientId ) !== -1\n\t\t: selectedBlockClientIds === clientId;\n\n/**\n * From a start and end clientId of potentially different nesting levels,\n * return the nearest-depth ids that have a common level of depth in the\n * nesting hierarchy. For multiple block selection, this ensure that the\n * selection is always at the same nesting level, and not split across\n * separate levels.\n *\n * @param {string}   startId      The first id of a selection.\n * @param {string}   endId        The end id of a selection, usually one that has been clicked on.\n * @param {string[]} startParents An array of ancestor ids for the start id, in descending order.\n * @param {string[]} endParents   An array of ancestor ids for the end id, in descending order.\n * @return {Object} An object containing the start and end ids.\n */\nexport function getCommonDepthClientIds(\n\tstartId,\n\tendId,\n\tstartParents,\n\tendParents\n) {\n\tconst startPath = [ ...startParents, startId ];\n\tconst endPath = [ ...endParents, endId ];\n\tconst depth = Math.min( startPath.length, endPath.length ) - 1;\n\tconst start = startPath[ depth ];\n\tconst end = endPath[ depth ];\n\n\treturn {\n\t\tstart,\n\t\tend,\n\t};\n}\n\n/**\n * Shift focus to the list view item associated with a particular clientId.\n *\n * @typedef {import('@wordpress/element').RefObject} RefObject\n *\n * @param {string}       focusClientId   The client ID of the block to focus.\n * @param {?HTMLElement} treeGridElement The container element to search within.\n */\nexport function focusListItem( focusClientId, treeGridElement ) {\n\tconst getFocusElement = () => {\n\t\tconst row = treeGridElement?.querySelector(\n\t\t\t`[role=row][data-block=\"${ focusClientId }\"]`\n\t\t);\n\t\tif ( ! row ) return null;\n\t\t// Focus the first focusable in the row, which is the ListViewBlockSelectButton.\n\t\treturn focus.focusable.find( row )[ 0 ];\n\t};\n\n\tlet focusElement = getFocusElement();\n\tif ( focusElement ) {\n\t\tfocusElement.focus();\n\t} else {\n\t\t// The element hasn't been painted yet. Defer focusing on the next frame.\n\t\t// This could happen when all blocks have been deleted and the default block\n\t\t// hasn't been added to the editor yet.\n\t\twindow.requestAnimationFrame( () => {\n\t\t\tfocusElement = getFocusElement();\n\n\t\t\t// Ignore if the element still doesn't exist.\n\t\t\tif ( focusElement ) {\n\t\t\t\tfocusElement.focus();\n\t\t\t}\n\t\t} );\n\t}\n}\n\n/**\n * Get values for the block that flag whether the block should be displaced up or down,\n * whether the block is being nested, and whether the block appears after the dragged\n * blocks. These values are used to determine the class names to apply to the block.\n * The list view rows are displaced visually via CSS rules. Displacement rules:\n * - `normal`: no displacement  used to apply a translateY of `0` so that the block\n *  appears in its original position, and moves to that position smoothly when dragging\n *  outside of the list view area.\n * - `up`: the block should be displaced up, creating room beneath the block for the drop indicator.\n * - `down`: the block should be displaced down, creating room above the block for the drop indicator.\n *\n * @param {Object}                props\n * @param {Object}                props.blockIndexes           The indexes of all the blocks in the list view, keyed by clientId.\n * @param {number|null|undefined} props.blockDropTargetIndex   The index of the block that the user is dropping to.\n * @param {?string}               props.blockDropPosition      The position relative to the block that the user is dropping to.\n * @param {string}                props.clientId               The client id for the current block.\n * @param {?number}               props.firstDraggedBlockIndex The index of the first dragged block.\n * @param {?boolean}              props.isDragged              Whether the current block is being dragged. Dragged blocks skip displacement.\n * @return {Object} An object containing the `displacement`, `isAfterDraggedBlocks` and `isNesting` values.\n */\nexport function getDragDisplacementValues( {\n\tblockIndexes,\n\tblockDropTargetIndex,\n\tblockDropPosition,\n\tclientId,\n\tfirstDraggedBlockIndex,\n\tisDragged,\n} ) {\n\tlet displacement;\n\tlet isNesting;\n\tlet isAfterDraggedBlocks;\n\n\tif ( ! isDragged ) {\n\t\tisNesting = false;\n\t\tconst thisBlockIndex = blockIndexes[ clientId ];\n\t\tisAfterDraggedBlocks = thisBlockIndex > firstDraggedBlockIndex;\n\n\t\t// Determine where to displace the position of the current block, relative\n\t\t// to the blocks being dragged (in their original position) and the drop target\n\t\t// (the position where a user is currently dragging the blocks to).\n\t\tif (\n\t\t\tblockDropTargetIndex !== undefined &&\n\t\t\tblockDropTargetIndex !== null &&\n\t\t\tfirstDraggedBlockIndex !== undefined\n\t\t) {\n\t\t\t// If the block is being dragged and there is a valid drop target,\n\t\t\t// determine if the block being rendered should be displaced up or down.\n\n\t\t\tif ( thisBlockIndex !== undefined ) {\n\t\t\t\tif (\n\t\t\t\t\tthisBlockIndex >= firstDraggedBlockIndex &&\n\t\t\t\t\tthisBlockIndex < blockDropTargetIndex\n\t\t\t\t) {\n\t\t\t\t\t// If the current block appears after the set of dragged blocks\n\t\t\t\t\t// (in their original position), but is before the drop target,\n\t\t\t\t\t// then the current block should be displaced up.\n\t\t\t\t\tdisplacement = 'up';\n\t\t\t\t} else if (\n\t\t\t\t\tthisBlockIndex < firstDraggedBlockIndex &&\n\t\t\t\t\tthisBlockIndex >= blockDropTargetIndex\n\t\t\t\t) {\n\t\t\t\t\t// If the current block appears before the set of dragged blocks\n\t\t\t\t\t// (in their original position), but is after the drop target,\n\t\t\t\t\t// then the current block should be displaced down.\n\t\t\t\t\tdisplacement = 'down';\n\t\t\t\t} else {\n\t\t\t\t\tdisplacement = 'normal';\n\t\t\t\t}\n\t\t\t\tisNesting =\n\t\t\t\t\ttypeof blockDropTargetIndex === 'number' &&\n\t\t\t\t\tblockDropTargetIndex - 1 === thisBlockIndex &&\n\t\t\t\t\tblockDropPosition === 'inside';\n\t\t\t}\n\t\t} else if (\n\t\t\tblockDropTargetIndex === null &&\n\t\t\tfirstDraggedBlockIndex !== undefined\n\t\t) {\n\t\t\t// A `null` value for `blockDropTargetIndex` indicates that the\n\t\t\t// drop target is outside of the valid areas within the list view.\n\t\t\t// In this case, the drag is still active, but as there is no\n\t\t\t// valid drop target, we should remove the gap indicating where\n\t\t\t// the block would be inserted.\n\t\t\tif (\n\t\t\t\tthisBlockIndex !== undefined &&\n\t\t\t\tthisBlockIndex >= firstDraggedBlockIndex\n\t\t\t) {\n\t\t\t\tdisplacement = 'up';\n\t\t\t} else {\n\t\t\t\tdisplacement = 'normal';\n\t\t\t}\n\t\t} else if (\n\t\t\tblockDropTargetIndex !== undefined &&\n\t\t\tblockDropTargetIndex !== null &&\n\t\t\tfirstDraggedBlockIndex === undefined\n\t\t) {\n\t\t\t// If the blockdrop target is defined, but there are no dragged blocks,\n\t\t\t// then the block should be displaced relative to the drop target.\n\t\t\tif ( thisBlockIndex !== undefined ) {\n\t\t\t\tif ( thisBlockIndex < blockDropTargetIndex ) {\n\t\t\t\t\tdisplacement = 'normal';\n\t\t\t\t} else {\n\t\t\t\t\tdisplacement = 'down';\n\t\t\t\t}\n\t\t\t}\n\t\t} else if ( blockDropTargetIndex === null ) {\n\t\t\tdisplacement = 'normal';\n\t\t}\n\t}\n\n\treturn {\n\t\tdisplacement,\n\t\tisNesting,\n\t\tisAfterDraggedBlocks,\n\t};\n}\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { hasBlockSupport } from '@wordpress/blocks';\nimport {\n\t__experimentalTreeGridCell as TreeGridCell,\n\t__experimentalTreeGridItem as TreeGridItem,\n} from '@wordpress/components';\nimport { useInstanceId } from '@wordpress/compose';\nimport { moreVertical } from '@wordpress/icons';\nimport {\n\tuseCallback,\n\tuseMemo,\n\tuseState,\n\tuseRef,\n\tmemo,\n} from '@wordpress/element';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { __ } from '@wordpress/i18n';\nimport { ESCAPE } from '@wordpress/keycodes';\n\n/**\n * Internal dependencies\n */\nimport ListViewLeaf from './leaf';\nimport useListViewScrollIntoView from './use-list-view-scroll-into-view';\nimport {\n\tBlockMoverUpButton,\n\tBlockMoverDownButton,\n} from '../block-mover/button';\nimport ListViewBlockContents from './block-contents';\nimport { useListViewContext } from './context';\nimport {\n\tgetBlockPositionDescription,\n\tgetBlockPropertiesDescription,\n\tfocusListItem,\n} from './utils';\nimport { store as blockEditorStore } from '../../store';\nimport useBlockDisplayInformation from '../use-block-display-information';\nimport { useBlockLock } from '../block-lock';\nimport AriaReferencedText from './aria-referenced-text';\n\nfunction ListViewBlock( {\n\tblock: { clientId },\n\tdisplacement,\n\tisAfterDraggedBlocks,\n\tisDragged,\n\tisNesting,\n\tisSelected,\n\tisBranchSelected,\n\tselectBlock,\n\tposition,\n\tlevel,\n\trowCount,\n\tsiblingBlockCount,\n\tshowBlockMovers,\n\tpath,\n\tisExpanded,\n\tselectedClientIds,\n\tisSyncedBranch,\n} ) {\n\tconst cellRef = useRef( null );\n\tconst rowRef = useRef( null );\n\tconst settingsRef = useRef( null );\n\tconst [ isHovered, setIsHovered ] = useState( false );\n\tconst [ settingsAnchorRect, setSettingsAnchorRect ] = useState();\n\n\tconst { isLocked, canEdit, canMove } = useBlockLock( clientId );\n\n\tconst isFirstSelectedBlock =\n\t\tisSelected && selectedClientIds[ 0 ] === clientId;\n\tconst isLastSelectedBlock =\n\t\tisSelected &&\n\t\tselectedClientIds[ selectedClientIds.length - 1 ] === clientId;\n\n\tconst { toggleBlockHighlight } = useDispatch( blockEditorStore );\n\n\tconst blockInformation = useBlockDisplayInformation( clientId );\n\n\tconst { block, blockName, blockEditingMode } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getBlock, getBlockName, getBlockEditingMode } =\n\t\t\t\tselect( blockEditorStore );\n\n\t\t\treturn {\n\t\t\t\tblock: getBlock( clientId ),\n\t\t\t\tblockName: getBlockName( clientId ),\n\t\t\t\tblockEditingMode: getBlockEditingMode( clientId ),\n\t\t\t};\n\t\t},\n\t\t[ clientId ]\n\t);\n\n\tconst allowRightClickOverrides = useSelect(\n\t\t( select ) =>\n\t\t\tselect( blockEditorStore ).getSettings().allowRightClickOverrides,\n\t\t[]\n\t);\n\n\tconst showBlockActions =\n\t\t// When a block hides its toolbar it also hides the block settings menu,\n\t\t// since that menu is part of the toolbar in the editor canvas.\n\t\t// List View respects this by also hiding the block settings menu.\n\t\thasBlockSupport( blockName, '__experimentalToolbar', true ) &&\n\t\t// Don't show the settings menu if block is disabled or content only.\n\t\tblockEditingMode === 'default';\n\tconst instanceId = useInstanceId( ListViewBlock );\n\tconst descriptionId = `list-view-block-select-button__description-${ instanceId }`;\n\n\tconst {\n\t\texpand,\n\t\tcollapse,\n\t\tBlockSettingsMenu,\n\t\tlistViewInstanceId,\n\t\texpandedState,\n\t\tsetInsertedBlock,\n\t\ttreeGridElementRef,\n\t} = useListViewContext();\n\n\t// If multiple blocks are selected, deselect all blocks when the user\n\t// presses the escape key.\n\tconst onKeyDown = ( event ) => {\n\t\tif (\n\t\t\tevent.keyCode === ESCAPE &&\n\t\t\t! event.defaultPrevented &&\n\t\t\tselectedClientIds.length > 0\n\t\t) {\n\t\t\tevent.stopPropagation();\n\t\t\tevent.preventDefault();\n\t\t\tselectBlock( event, undefined );\n\t\t}\n\t};\n\n\tconst onMouseEnter = useCallback( () => {\n\t\tsetIsHovered( true );\n\t\ttoggleBlockHighlight( clientId, true );\n\t}, [ clientId, setIsHovered, toggleBlockHighlight ] );\n\tconst onMouseLeave = useCallback( () => {\n\t\tsetIsHovered( false );\n\t\ttoggleBlockHighlight( clientId, false );\n\t}, [ clientId, setIsHovered, toggleBlockHighlight ] );\n\n\tconst selectEditorBlock = useCallback(\n\t\t( event ) => {\n\t\t\tselectBlock( event, clientId );\n\t\t\tevent.preventDefault();\n\t\t},\n\t\t[ clientId, selectBlock ]\n\t);\n\n\tconst updateFocusAndSelection = useCallback(\n\t\t( focusClientId, shouldSelectBlock ) => {\n\t\t\tif ( shouldSelectBlock ) {\n\t\t\t\tselectBlock( undefined, focusClientId, null, null );\n\t\t\t}\n\n\t\t\tfocusListItem( focusClientId, treeGridElementRef?.current );\n\t\t},\n\t\t[ selectBlock, treeGridElementRef ]\n\t);\n\n\tconst toggleExpanded = useCallback(\n\t\t( event ) => {\n\t\t\t// Prevent shift+click from opening link in a new window when toggling.\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t\tif ( isExpanded === true ) {\n\t\t\t\tcollapse( clientId );\n\t\t\t} else if ( isExpanded === false ) {\n\t\t\t\texpand( clientId );\n\t\t\t}\n\t\t},\n\t\t[ clientId, expand, collapse, isExpanded ]\n\t);\n\n\t// Allow right-clicking an item in the List View to open up the block settings dropdown.\n\tconst onContextMenu = useCallback(\n\t\t( event ) => {\n\t\t\tif ( showBlockActions && allowRightClickOverrides ) {\n\t\t\t\tsettingsRef.current?.click();\n\t\t\t\t// Ensure the position of the settings dropdown is at the cursor.\n\t\t\t\tsetSettingsAnchorRect(\n\t\t\t\t\tnew window.DOMRect( event.clientX, event.clientY, 0, 0 )\n\t\t\t\t);\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t},\n\t\t[ allowRightClickOverrides, settingsRef, showBlockActions ]\n\t);\n\n\tconst onMouseDown = useCallback(\n\t\t( event ) => {\n\t\t\t// Prevent right-click from focusing the block,\n\t\t\t// because focus will be handled when opening the block settings dropdown.\n\t\t\tif ( allowRightClickOverrides && event.button === 2 ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t},\n\t\t[ allowRightClickOverrides ]\n\t);\n\n\tconst settingsPopoverAnchor = useMemo( () => {\n\t\tconst { ownerDocument } = rowRef?.current || {};\n\n\t\t// If no custom position is set, the settings dropdown will be anchored to the\n\t\t// DropdownMenu toggle button.\n\t\tif ( ! settingsAnchorRect || ! ownerDocument ) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\t// Position the settings dropdown at the cursor when right-clicking a block.\n\t\treturn {\n\t\t\townerDocument,\n\t\t\tgetBoundingClientRect() {\n\t\t\t\treturn settingsAnchorRect;\n\t\t\t},\n\t\t};\n\t}, [ settingsAnchorRect ] );\n\n\tconst clearSettingsAnchorRect = useCallback( () => {\n\t\t// Clear the custom position for the settings dropdown so that it is restored back\n\t\t// to being anchored to the DropdownMenu toggle button.\n\t\tsetSettingsAnchorRect( undefined );\n\t}, [ setSettingsAnchorRect ] );\n\n\t// Pass in a ref to the row, so that it can be scrolled\n\t// into view when selected. For long lists, the placeholder for the\n\t// selected block is also observed, within ListViewLeafPlaceholder.\n\tuseListViewScrollIntoView( {\n\t\tisSelected,\n\t\trowItemRef: rowRef,\n\t\tselectedClientIds,\n\t} );\n\n\t// When switching between rendering modes (such as template preview and content only),\n\t// it is possible for a block to temporarily be unavailable. In this case, we should not\n\t// render the leaf, to avoid errors further down the tree.\n\tif ( ! block ) {\n\t\treturn null;\n\t}\n\n\tconst blockPositionDescription = getBlockPositionDescription(\n\t\tposition,\n\t\tsiblingBlockCount,\n\t\tlevel\n\t);\n\n\tconst blockPropertiesDescription =\n\t\tgetBlockPropertiesDescription( isLocked );\n\n\tconst hasSiblings = siblingBlockCount > 0;\n\tconst hasRenderedMovers = showBlockMovers && hasSiblings;\n\tconst moverCellClassName = classnames(\n\t\t'block-editor-list-view-block__mover-cell',\n\t\t{ 'is-visible': isHovered || isSelected }\n\t);\n\n\tconst listViewBlockSettingsClassName = classnames(\n\t\t'block-editor-list-view-block__menu-cell',\n\t\t{ 'is-visible': isHovered || isFirstSelectedBlock }\n\t);\n\n\tlet colSpan;\n\tif ( hasRenderedMovers ) {\n\t\tcolSpan = 2;\n\t} else if ( ! showBlockActions ) {\n\t\tcolSpan = 3;\n\t}\n\n\tconst classes = classnames( {\n\t\t'is-selected': isSelected,\n\t\t'is-first-selected': isFirstSelectedBlock,\n\t\t'is-last-selected': isLastSelectedBlock,\n\t\t'is-branch-selected': isBranchSelected,\n\t\t'is-synced-branch': isSyncedBranch,\n\t\t'is-dragging': isDragged,\n\t\t'has-single-cell': ! showBlockActions,\n\t\t'is-synced': blockInformation?.isSynced,\n\t\t'is-draggable': canMove,\n\t\t'is-displacement-normal': displacement === 'normal',\n\t\t'is-displacement-up': displacement === 'up',\n\t\t'is-displacement-down': displacement === 'down',\n\t\t'is-after-dragged-blocks': isAfterDraggedBlocks,\n\t\t'is-nesting': isNesting,\n\t} );\n\n\t// Only include all selected blocks if the currently clicked on block\n\t// is one of the selected blocks. This ensures that if a user attempts\n\t// to alter a block that isn't part of the selection, they're still able\n\t// to do so.\n\tconst dropdownClientIds = selectedClientIds.includes( clientId )\n\t\t? selectedClientIds\n\t\t: [ clientId ];\n\n\t// Detect if there is a block in the canvas currently being edited and multi-selection is not happening.\n\tconst currentlyEditingBlockInCanvas =\n\t\tisSelected && selectedClientIds.length === 1;\n\n\treturn (\n\t\t<ListViewLeaf\n\t\t\tclassName={ classes }\n\t\t\tisDragged={ isDragged }\n\t\t\tonKeyDown={ onKeyDown }\n\t\t\tonMouseEnter={ onMouseEnter }\n\t\t\tonMouseLeave={ onMouseLeave }\n\t\t\tonFocus={ onMouseEnter }\n\t\t\tonBlur={ onMouseLeave }\n\t\t\tlevel={ level }\n\t\t\tposition={ position }\n\t\t\trowCount={ rowCount }\n\t\t\tpath={ path }\n\t\t\tid={ `list-view-${ listViewInstanceId }-block-${ clientId }` }\n\t\t\tdata-block={ clientId }\n\t\t\tdata-expanded={ canEdit ? isExpanded : undefined }\n\t\t\tref={ rowRef }\n\t\t>\n\t\t\t<TreeGridCell\n\t\t\t\tclassName=\"block-editor-list-view-block__contents-cell\"\n\t\t\t\tcolSpan={ colSpan }\n\t\t\t\tref={ cellRef }\n\t\t\t\taria-selected={ !! isSelected }\n\t\t\t>\n\t\t\t\t{ ( { ref, tabIndex, onFocus } ) => (\n\t\t\t\t\t<div className=\"block-editor-list-view-block__contents-container\">\n\t\t\t\t\t\t<ListViewBlockContents\n\t\t\t\t\t\t\tblock={ block }\n\t\t\t\t\t\t\tonClick={ selectEditorBlock }\n\t\t\t\t\t\t\tonContextMenu={ onContextMenu }\n\t\t\t\t\t\t\tonMouseDown={ onMouseDown }\n\t\t\t\t\t\t\tonToggleExpanded={ toggleExpanded }\n\t\t\t\t\t\t\tisSelected={ isSelected }\n\t\t\t\t\t\t\tposition={ position }\n\t\t\t\t\t\t\tsiblingBlockCount={ siblingBlockCount }\n\t\t\t\t\t\t\tlevel={ level }\n\t\t\t\t\t\t\tref={ ref }\n\t\t\t\t\t\t\ttabIndex={\n\t\t\t\t\t\t\t\tcurrentlyEditingBlockInCanvas ? 0 : tabIndex\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tonFocus={ onFocus }\n\t\t\t\t\t\t\tisExpanded={ canEdit ? isExpanded : undefined }\n\t\t\t\t\t\t\tselectedClientIds={ selectedClientIds }\n\t\t\t\t\t\t\tariaDescribedBy={ descriptionId }\n\t\t\t\t\t\t\tupdateFocusAndSelection={ updateFocusAndSelection }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<AriaReferencedText id={ descriptionId }>\n\t\t\t\t\t\t\t{ `${ blockPositionDescription } ${ blockPropertiesDescription }` }\n\t\t\t\t\t\t</AriaReferencedText>\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t\t</TreeGridCell>\n\t\t\t{ hasRenderedMovers && (\n\t\t\t\t<>\n\t\t\t\t\t<TreeGridCell\n\t\t\t\t\t\tclassName={ moverCellClassName }\n\t\t\t\t\t\twithoutGridItem\n\t\t\t\t\t>\n\t\t\t\t\t\t<TreeGridItem>\n\t\t\t\t\t\t\t{ ( { ref, tabIndex, onFocus } ) => (\n\t\t\t\t\t\t\t\t<BlockMoverUpButton\n\t\t\t\t\t\t\t\t\torientation=\"vertical\"\n\t\t\t\t\t\t\t\t\tclientIds={ [ clientId ] }\n\t\t\t\t\t\t\t\t\tref={ ref }\n\t\t\t\t\t\t\t\t\ttabIndex={ tabIndex }\n\t\t\t\t\t\t\t\t\tonFocus={ onFocus }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</TreeGridItem>\n\t\t\t\t\t\t<TreeGridItem>\n\t\t\t\t\t\t\t{ ( { ref, tabIndex, onFocus } ) => (\n\t\t\t\t\t\t\t\t<BlockMoverDownButton\n\t\t\t\t\t\t\t\t\torientation=\"vertical\"\n\t\t\t\t\t\t\t\t\tclientIds={ [ clientId ] }\n\t\t\t\t\t\t\t\t\tref={ ref }\n\t\t\t\t\t\t\t\t\ttabIndex={ tabIndex }\n\t\t\t\t\t\t\t\t\tonFocus={ onFocus }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</TreeGridItem>\n\t\t\t\t\t</TreeGridCell>\n\t\t\t\t</>\n\t\t\t) }\n\n\t\t\t{ showBlockActions && BlockSettingsMenu && (\n\t\t\t\t<TreeGridCell\n\t\t\t\t\tclassName={ listViewBlockSettingsClassName }\n\t\t\t\t\taria-selected={ !! isSelected }\n\t\t\t\t\tref={ settingsRef }\n\t\t\t\t>\n\t\t\t\t\t{ ( { ref, tabIndex, onFocus } ) => (\n\t\t\t\t\t\t<BlockSettingsMenu\n\t\t\t\t\t\t\tclientIds={ dropdownClientIds }\n\t\t\t\t\t\t\tblock={ block }\n\t\t\t\t\t\t\ticon={ moreVertical }\n\t\t\t\t\t\t\tlabel={ __( 'Options' ) }\n\t\t\t\t\t\t\tpopoverProps={ {\n\t\t\t\t\t\t\t\tanchor: settingsPopoverAnchor, // Used to position the settings at the cursor on right-click.\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\ttoggleProps={ {\n\t\t\t\t\t\t\t\tref,\n\t\t\t\t\t\t\t\tclassName: 'block-editor-list-view-block__menu',\n\t\t\t\t\t\t\t\ttabIndex,\n\t\t\t\t\t\t\t\tonClick: clearSettingsAnchorRect,\n\t\t\t\t\t\t\t\tonFocus,\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tdisableOpenOnArrowDown\n\t\t\t\t\t\t\texpand={ expand }\n\t\t\t\t\t\t\texpandedState={ expandedState }\n\t\t\t\t\t\t\tsetInsertedBlock={ setInsertedBlock }\n\t\t\t\t\t\t\t__experimentalSelectBlock={\n\t\t\t\t\t\t\t\tupdateFocusAndSelection\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</TreeGridCell>\n\t\t\t) }\n\t\t</ListViewLeaf>\n\t);\n}\n\nexport default memo( ListViewBlock );\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { getScrollContainer } from '@wordpress/dom';\r\nimport { useLayoutEffect } from '@wordpress/element';\r\n\r\nexport default function useListViewScrollIntoView( {\r\n\tisSelected,\r\n\tselectedClientIds,\r\n\trowItemRef,\r\n} ) {\r\n\tconst isSingleSelection = selectedClientIds.length === 1;\r\n\r\n\tuseLayoutEffect( () => {\r\n\t\t// Skip scrolling into view if this particular block isn't selected,\r\n\t\t// or if more than one block is selected overall. This is to avoid\r\n\t\t// scrolling the view in a multi selection where the user has intentionally\r\n\t\t// selected multiple blocks within the list view, but the initially\r\n\t\t// selected block may be out of view.\r\n\t\tif ( ! isSelected || ! isSingleSelection || ! rowItemRef.current ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst scrollContainer = getScrollContainer( rowItemRef.current );\r\n\t\tconst { ownerDocument } = rowItemRef.current;\r\n\r\n\t\tconst windowScroll =\r\n\t\t\tscrollContainer === ownerDocument.body ||\r\n\t\t\tscrollContainer === ownerDocument.documentElement;\r\n\r\n\t\t// If the there is no scroll container, of if the scroll container is the window,\r\n\t\t// do not scroll into view, as the block is already in view.\r\n\t\tif ( windowScroll || ! scrollContainer ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst rowRect = rowItemRef.current.getBoundingClientRect();\r\n\t\tconst scrollContainerRect = scrollContainer.getBoundingClientRect();\r\n\r\n\t\t// If the selected block is not currently visible, scroll to it.\r\n\t\tif (\r\n\t\t\trowRect.top < scrollContainerRect.top ||\r\n\t\t\trowRect.bottom > scrollContainerRect.bottom\r\n\t\t) {\r\n\t\t\trowItemRef.current.scrollIntoView();\r\n\t\t}\r\n\t}, [ isSelected, isSingleSelection, rowItemRef ] );\r\n}\r\n","/**\n * WordPress dependencies\n */\nimport {\n\t__experimentalTreeGridRow as TreeGridRow,\n\t__experimentalTreeGridCell as TreeGridCell,\n} from '@wordpress/components';\nimport { memo } from '@wordpress/element';\nimport { AsyncModeProvider, useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { Appender } from './appender';\nimport ListViewBlock from './block';\nimport { useListViewContext } from './context';\nimport { getDragDisplacementValues, isClientIdSelected } from './utils';\nimport { store as blockEditorStore } from '../../store';\nimport useBlockDisplayInformation from '../use-block-display-information';\n\n/**\n * Given a block, returns the total number of blocks in that subtree. This is used to help determine\n * the list position of a block.\n *\n * When a block is collapsed, we do not count their children as part of that total. In the current drag\n * implementation dragged blocks and their children are not counted.\n *\n * @param {Object}  block               block tree\n * @param {Object}  expandedState       state that notes which branches are collapsed\n * @param {Array}   draggedClientIds    a list of dragged client ids\n * @param {boolean} isExpandedByDefault flag to determine the default fallback expanded state.\n * @return {number} block count\n */\nfunction countBlocks(\n\tblock,\n\texpandedState,\n\tdraggedClientIds,\n\tisExpandedByDefault\n) {\n\tconst isDragged = draggedClientIds?.includes( block.clientId );\n\tif ( isDragged ) {\n\t\treturn 0;\n\t}\n\tconst isExpanded = expandedState[ block.clientId ] ?? isExpandedByDefault;\n\n\tif ( isExpanded ) {\n\t\treturn (\n\t\t\t1 +\n\t\t\tblock.innerBlocks.reduce(\n\t\t\t\tcountReducer(\n\t\t\t\t\texpandedState,\n\t\t\t\t\tdraggedClientIds,\n\t\t\t\t\tisExpandedByDefault\n\t\t\t\t),\n\t\t\t\t0\n\t\t\t)\n\t\t);\n\t}\n\treturn 1;\n}\nconst countReducer =\n\t( expandedState, draggedClientIds, isExpandedByDefault ) =>\n\t( count, block ) => {\n\t\tconst isDragged = draggedClientIds?.includes( block.clientId );\n\t\tif ( isDragged ) {\n\t\t\treturn count;\n\t\t}\n\t\tconst isExpanded =\n\t\t\texpandedState[ block.clientId ] ?? isExpandedByDefault;\n\t\tif ( isExpanded && block.innerBlocks.length > 0 ) {\n\t\t\treturn (\n\t\t\t\tcount +\n\t\t\t\tcountBlocks(\n\t\t\t\t\tblock,\n\t\t\t\t\texpandedState,\n\t\t\t\t\tdraggedClientIds,\n\t\t\t\t\tisExpandedByDefault\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t\treturn count + 1;\n\t};\n\nconst noop = () => {};\n\nfunction ListViewBranch( props ) {\n\tconst {\n\t\tblocks,\n\t\tselectBlock = noop,\n\t\tshowBlockMovers,\n\t\tselectedClientIds,\n\t\tlevel = 1,\n\t\tpath = '',\n\t\tisBranchSelected = false,\n\t\tlistPosition = 0,\n\t\tfixedListWindow,\n\t\tisExpanded,\n\t\tparentId,\n\t\tshouldShowInnerBlocks = true,\n\t\tisSyncedBranch = false,\n\t\tshowAppender: showAppenderProp = true,\n\t} = props;\n\n\tconst parentBlockInformation = useBlockDisplayInformation( parentId );\n\tconst syncedBranch = isSyncedBranch || !! parentBlockInformation?.isSynced;\n\n\tconst canParentExpand = useSelect(\n\t\t( select ) => {\n\t\t\tif ( ! parentId ) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn select( blockEditorStore ).canEditBlock( parentId );\n\t\t},\n\t\t[ parentId ]\n\t);\n\n\tconst {\n\t\tblockDropPosition,\n\t\tblockDropTargetIndex,\n\t\tfirstDraggedBlockIndex,\n\t\tblockIndexes,\n\t\texpandedState,\n\t\tdraggedClientIds,\n\t} = useListViewContext();\n\n\tif ( ! canParentExpand ) {\n\t\treturn null;\n\t}\n\n\t// Only show the appender at the first level.\n\tconst showAppender = showAppenderProp && level === 1;\n\tconst filteredBlocks = blocks.filter( Boolean );\n\tconst blockCount = filteredBlocks.length;\n\t// The appender means an extra row in List View, so add 1 to the row count.\n\tconst rowCount = showAppender ? blockCount + 1 : blockCount;\n\tlet nextPosition = listPosition;\n\n\treturn (\n\t\t<>\n\t\t\t{ filteredBlocks.map( ( block, index ) => {\n\t\t\t\tconst { clientId, innerBlocks } = block;\n\n\t\t\t\tif ( index > 0 ) {\n\t\t\t\t\tnextPosition += countBlocks(\n\t\t\t\t\t\tfilteredBlocks[ index - 1 ],\n\t\t\t\t\t\texpandedState,\n\t\t\t\t\t\tdraggedClientIds,\n\t\t\t\t\t\tisExpanded\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tconst isDragged = !! draggedClientIds?.includes( clientId );\n\n\t\t\t\t// Determine the displacement of the block while dragging. This\n\t\t\t\t// works out whether the current block should be displaced up or\n\t\t\t\t// down, relative to the dragged blocks and the drop target.\n\t\t\t\tconst { displacement, isAfterDraggedBlocks, isNesting } =\n\t\t\t\t\tgetDragDisplacementValues( {\n\t\t\t\t\t\tblockIndexes,\n\t\t\t\t\t\tblockDropTargetIndex,\n\t\t\t\t\t\tblockDropPosition,\n\t\t\t\t\t\tclientId,\n\t\t\t\t\t\tfirstDraggedBlockIndex,\n\t\t\t\t\t\tisDragged,\n\t\t\t\t\t} );\n\n\t\t\t\tconst { itemInView } = fixedListWindow;\n\t\t\t\tconst blockInView = itemInView( nextPosition );\n\n\t\t\t\tconst position = index + 1;\n\t\t\t\tconst updatedPath =\n\t\t\t\t\tpath.length > 0\n\t\t\t\t\t\t? `${ path }_${ position }`\n\t\t\t\t\t\t: `${ position }`;\n\t\t\t\tconst hasNestedBlocks = !! innerBlocks?.length;\n\n\t\t\t\tconst shouldExpand =\n\t\t\t\t\thasNestedBlocks && shouldShowInnerBlocks\n\t\t\t\t\t\t? expandedState[ clientId ] ?? isExpanded\n\t\t\t\t\t\t: undefined;\n\n\t\t\t\t// Make updates to the selected or dragged blocks synchronous,\n\t\t\t\t// but asynchronous for any other block.\n\t\t\t\tconst isSelected = isClientIdSelected(\n\t\t\t\t\tclientId,\n\t\t\t\t\tselectedClientIds\n\t\t\t\t);\n\t\t\t\tconst isSelectedBranch =\n\t\t\t\t\tisBranchSelected || ( isSelected && hasNestedBlocks );\n\n\t\t\t\t// To avoid performance issues, we only render blocks that are in view,\n\t\t\t\t// or blocks that are selected or dragged. If a block is selected,\n\t\t\t\t// it is only counted if it is the first of the block selection.\n\t\t\t\t// This prevents the entire tree from being rendered when a branch is\n\t\t\t\t// selected, or a user selects all blocks, while still enabling scroll\n\t\t\t\t// into view behavior when selecting a block or opening the list view.\n\t\t\t\tconst showBlock =\n\t\t\t\t\tisDragged ||\n\t\t\t\t\tblockInView ||\n\t\t\t\t\t( isSelected && clientId === selectedClientIds[ 0 ] );\n\t\t\t\treturn (\n\t\t\t\t\t<AsyncModeProvider key={ clientId } value={ ! isSelected }>\n\t\t\t\t\t\t{ showBlock && (\n\t\t\t\t\t\t\t<ListViewBlock\n\t\t\t\t\t\t\t\tblock={ block }\n\t\t\t\t\t\t\t\tselectBlock={ selectBlock }\n\t\t\t\t\t\t\t\tisSelected={ isSelected }\n\t\t\t\t\t\t\t\tisBranchSelected={ isSelectedBranch }\n\t\t\t\t\t\t\t\tisDragged={ isDragged }\n\t\t\t\t\t\t\t\tlevel={ level }\n\t\t\t\t\t\t\t\tposition={ position }\n\t\t\t\t\t\t\t\trowCount={ rowCount }\n\t\t\t\t\t\t\t\tsiblingBlockCount={ blockCount }\n\t\t\t\t\t\t\t\tshowBlockMovers={ showBlockMovers }\n\t\t\t\t\t\t\t\tpath={ updatedPath }\n\t\t\t\t\t\t\t\tisExpanded={ isDragged ? false : shouldExpand }\n\t\t\t\t\t\t\t\tlistPosition={ nextPosition }\n\t\t\t\t\t\t\t\tselectedClientIds={ selectedClientIds }\n\t\t\t\t\t\t\t\tisSyncedBranch={ syncedBranch }\n\t\t\t\t\t\t\t\tdisplacement={ displacement }\n\t\t\t\t\t\t\t\tisAfterDraggedBlocks={ isAfterDraggedBlocks }\n\t\t\t\t\t\t\t\tisNesting={ isNesting }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t{ ! showBlock && (\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td className=\"block-editor-list-view-placeholder\" />\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t{ hasNestedBlocks && shouldExpand && ! isDragged && (\n\t\t\t\t\t\t\t<ListViewBranch\n\t\t\t\t\t\t\t\tparentId={ clientId }\n\t\t\t\t\t\t\t\tblocks={ innerBlocks }\n\t\t\t\t\t\t\t\tselectBlock={ selectBlock }\n\t\t\t\t\t\t\t\tshowBlockMovers={ showBlockMovers }\n\t\t\t\t\t\t\t\tlevel={ level + 1 }\n\t\t\t\t\t\t\t\tpath={ updatedPath }\n\t\t\t\t\t\t\t\tlistPosition={ nextPosition + 1 }\n\t\t\t\t\t\t\t\tfixedListWindow={ fixedListWindow }\n\t\t\t\t\t\t\t\tisBranchSelected={ isSelectedBranch }\n\t\t\t\t\t\t\t\tselectedClientIds={ selectedClientIds }\n\t\t\t\t\t\t\t\tisExpanded={ isExpanded }\n\t\t\t\t\t\t\t\tisSyncedBranch={ syncedBranch }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</AsyncModeProvider>\n\t\t\t\t);\n\t\t\t} ) }\n\t\t\t{ showAppender && (\n\t\t\t\t<TreeGridRow\n\t\t\t\t\tlevel={ level }\n\t\t\t\t\tsetSize={ rowCount }\n\t\t\t\t\tpositionInSet={ rowCount }\n\t\t\t\t\tisExpanded\n\t\t\t\t>\n\t\t\t\t\t<TreeGridCell>\n\t\t\t\t\t\t{ ( treeGridCellProps ) => (\n\t\t\t\t\t\t\t<Appender\n\t\t\t\t\t\t\t\tclientId={ parentId }\n\t\t\t\t\t\t\t\tnestingLevel={ level }\n\t\t\t\t\t\t\t\tblockCount={ blockCount }\n\t\t\t\t\t\t\t\t{ ...treeGridCellProps }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</TreeGridCell>\n\t\t\t\t</TreeGridRow>\n\t\t\t) }\n\t\t</>\n\t);\n}\n\nexport default memo( ListViewBranch );\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport {\n\t__experimentalHStack as HStack,\n\t__experimentalTruncate as Truncate,\n\tPopover,\n} from '@wordpress/components';\n\nimport { getScrollContainer } from '@wordpress/dom';\nimport { useCallback, useMemo } from '@wordpress/element';\nimport { isRTL } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport BlockIcon from '../block-icon';\nimport useBlockDisplayInformation from '../use-block-display-information';\nimport useBlockDisplayTitle from '../block-title/use-block-display-title';\nimport ListViewExpander from './expander';\n\nexport default function ListViewDropIndicatorPreview( {\n\tdraggedBlockClientId,\n\tlistViewRef,\n\tblockDropTarget,\n} ) {\n\tconst blockInformation = useBlockDisplayInformation( draggedBlockClientId );\n\tconst blockTitle = useBlockDisplayTitle( {\n\t\tclientId: draggedBlockClientId,\n\t\tcontext: 'list-view',\n\t} );\n\n\tconst { rootClientId, clientId, dropPosition } = blockDropTarget || {};\n\n\tconst [ rootBlockElement, blockElement ] = useMemo( () => {\n\t\tif ( ! listViewRef.current ) {\n\t\t\treturn [];\n\t\t}\n\n\t\t// The rootClientId will be defined whenever dropping into inner\n\t\t// block lists, but is undefined when dropping at the root level.\n\t\tconst _rootBlockElement = rootClientId\n\t\t\t? listViewRef.current.querySelector(\n\t\t\t\t\t`[data-block=\"${ rootClientId }\"]`\n\t\t\t  )\n\t\t\t: undefined;\n\n\t\t// The clientId represents the sibling block, the dragged block will\n\t\t// usually be inserted adjacent to it. It will be undefined when\n\t\t// dropping a block into an empty block list.\n\t\tconst _blockElement = clientId\n\t\t\t? listViewRef.current.querySelector(\n\t\t\t\t\t`[data-block=\"${ clientId }\"]`\n\t\t\t  )\n\t\t\t: undefined;\n\n\t\treturn [ _rootBlockElement, _blockElement ];\n\t}, [ listViewRef, rootClientId, clientId ] );\n\n\t// The targetElement is the element that the drop indicator will appear\n\t// before or after. When dropping into an empty block list, blockElement\n\t// is undefined, so the indicator will appear after the rootBlockElement.\n\tconst targetElement = blockElement || rootBlockElement;\n\n\tconst rtl = isRTL();\n\n\tconst getDropIndicatorWidth = useCallback(\n\t\t( targetElementRect, indent ) => {\n\t\t\tif ( ! targetElement ) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\t// Default to assuming that the width of the drop indicator\n\t\t\t// should be the same as the target element.\n\t\t\tlet width = targetElement.offsetWidth;\n\n\t\t\t// In deeply nested lists, where a scrollbar is present,\n\t\t\t// the width of the drop indicator should be the width of\n\t\t\t// the scroll container, minus the distance from the left\n\t\t\t// edge of the scroll container to the left edge of the\n\t\t\t// target element.\n\t\t\tconst scrollContainer = getScrollContainer(\n\t\t\t\ttargetElement,\n\t\t\t\t'horizontal'\n\t\t\t);\n\n\t\t\tconst ownerDocument = targetElement.ownerDocument;\n\t\t\tconst windowScroll =\n\t\t\t\tscrollContainer === ownerDocument.body ||\n\t\t\t\tscrollContainer === ownerDocument.documentElement;\n\n\t\t\tif ( scrollContainer && ! windowScroll ) {\n\t\t\t\tconst scrollContainerRect =\n\t\t\t\t\tscrollContainer.getBoundingClientRect();\n\n\t\t\t\tconst distanceBetweenContainerAndTarget = isRTL()\n\t\t\t\t\t? scrollContainerRect.right - targetElementRect.right\n\t\t\t\t\t: targetElementRect.left - scrollContainerRect.left;\n\n\t\t\t\tconst scrollContainerWidth = scrollContainer.clientWidth;\n\n\t\t\t\tif (\n\t\t\t\t\tscrollContainerWidth <\n\t\t\t\t\twidth + distanceBetweenContainerAndTarget\n\t\t\t\t) {\n\t\t\t\t\twidth =\n\t\t\t\t\t\tscrollContainerWidth -\n\t\t\t\t\t\tdistanceBetweenContainerAndTarget;\n\t\t\t\t}\n\n\t\t\t\t// LTR logic for ensuring the drop indicator does not extend\n\t\t\t\t// beyond the right edge of the scroll container.\n\t\t\t\tif (\n\t\t\t\t\t! rtl &&\n\t\t\t\t\ttargetElementRect.left + indent < scrollContainerRect.left\n\t\t\t\t) {\n\t\t\t\t\twidth -= scrollContainerRect.left - targetElementRect.left;\n\t\t\t\t\treturn width;\n\t\t\t\t}\n\n\t\t\t\t// RTL logic for ensuring the drop indicator does not extend\n\t\t\t\t// beyond the right edge of the scroll container.\n\t\t\t\tif (\n\t\t\t\t\trtl &&\n\t\t\t\t\ttargetElementRect.right - indent > scrollContainerRect.right\n\t\t\t\t) {\n\t\t\t\t\twidth -=\n\t\t\t\t\t\ttargetElementRect.right - scrollContainerRect.right;\n\t\t\t\t\treturn width;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Subtract the indent from the final width of the indicator.\n\t\t\treturn width - indent;\n\t\t},\n\t\t[ rtl, targetElement ]\n\t);\n\n\tconst style = useMemo( () => {\n\t\tif ( ! targetElement ) {\n\t\t\treturn {};\n\t\t}\n\n\t\tconst targetElementRect = targetElement.getBoundingClientRect();\n\n\t\treturn {\n\t\t\twidth: getDropIndicatorWidth( targetElementRect, 0 ),\n\t\t};\n\t}, [ getDropIndicatorWidth, targetElement ] );\n\n\tconst horizontalScrollOffsetStyle = useMemo( () => {\n\t\tif ( ! targetElement ) {\n\t\t\treturn {};\n\t\t}\n\n\t\tconst scrollContainer = getScrollContainer( targetElement );\n\t\tconst ownerDocument = targetElement.ownerDocument;\n\t\tconst windowScroll =\n\t\t\tscrollContainer === ownerDocument.body ||\n\t\t\tscrollContainer === ownerDocument.documentElement;\n\n\t\tif ( scrollContainer && ! windowScroll ) {\n\t\t\tconst scrollContainerRect = scrollContainer.getBoundingClientRect();\n\t\t\tconst targetElementRect = targetElement.getBoundingClientRect();\n\n\t\t\tconst distanceBetweenContainerAndTarget = rtl\n\t\t\t\t? scrollContainerRect.right - targetElementRect.right\n\t\t\t\t: targetElementRect.left - scrollContainerRect.left;\n\n\t\t\tif ( ! rtl && scrollContainerRect.left > targetElementRect.left ) {\n\t\t\t\treturn {\n\t\t\t\t\ttransform: `translateX( ${ distanceBetweenContainerAndTarget }px )`,\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tif ( rtl && scrollContainerRect.right < targetElementRect.right ) {\n\t\t\t\treturn {\n\t\t\t\t\ttransform: `translateX( ${\n\t\t\t\t\t\tdistanceBetweenContainerAndTarget * -1\n\t\t\t\t\t}px )`,\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\treturn {};\n\t}, [ rtl, targetElement ] );\n\n\tconst ariaLevel = useMemo( () => {\n\t\tif ( ! rootBlockElement ) {\n\t\t\treturn 1;\n\t\t}\n\n\t\tconst _ariaLevel = parseInt(\n\t\t\trootBlockElement.getAttribute( 'aria-level' ),\n\t\t\t10\n\t\t);\n\n\t\treturn _ariaLevel ? _ariaLevel + 1 : 1;\n\t}, [ rootBlockElement ] );\n\n\tconst hasAdjacentSelectedBranch = useMemo( () => {\n\t\tif ( ! targetElement ) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn targetElement.classList.contains( 'is-branch-selected' );\n\t}, [ targetElement ] );\n\n\tconst popoverAnchor = useMemo( () => {\n\t\tconst isValidDropPosition =\n\t\t\tdropPosition === 'top' ||\n\t\t\tdropPosition === 'bottom' ||\n\t\t\tdropPosition === 'inside';\n\t\tif ( ! targetElement || ! isValidDropPosition ) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn {\n\t\t\tcontextElement: targetElement,\n\t\t\tgetBoundingClientRect() {\n\t\t\t\tconst rect = targetElement.getBoundingClientRect();\n\t\t\t\t// In RTL languages, the drop indicator should be positioned\n\t\t\t\t// to the left of the target element, with the width of the\n\t\t\t\t// indicator determining the indent at the right edge of the\n\t\t\t\t// target element. In LTR languages, the drop indicator should\n\t\t\t\t// end at the right edge of the target element, with the indent\n\t\t\t\t// added to the position of the left edge of the target element.\n\t\t\t\t// let left = rtl ? rect.left : rect.left + indent;\n\t\t\t\tlet left = rect.left;\n\t\t\t\tlet top = 0;\n\n\t\t\t\t// In deeply nested lists, where a scrollbar is present,\n\t\t\t\t// the width of the drop indicator should be the width of\n\t\t\t\t// the visible area of the scroll container. Additionally,\n\t\t\t\t// the left edge of the drop indicator line needs to be\n\t\t\t\t// offset by the distance the left edge of the target element\n\t\t\t\t// and the left edge of the scroll container. The ensures\n\t\t\t\t// that the drop indicator position never breaks out of the\n\t\t\t\t// visible area of the scroll container.\n\t\t\t\tconst scrollContainer = getScrollContainer(\n\t\t\t\t\ttargetElement,\n\t\t\t\t\t'horizontal'\n\t\t\t\t);\n\n\t\t\t\tconst doc = targetElement.ownerDocument;\n\t\t\t\tconst windowScroll =\n\t\t\t\t\tscrollContainer === doc.body ||\n\t\t\t\t\tscrollContainer === doc.documentElement;\n\n\t\t\t\t// If the scroll container is not the window, offset the left position, if need be.\n\t\t\t\tif ( scrollContainer && ! windowScroll ) {\n\t\t\t\t\tconst scrollContainerRect =\n\t\t\t\t\t\tscrollContainer.getBoundingClientRect();\n\n\t\t\t\t\t// In RTL languages, a vertical scrollbar is present on the\n\t\t\t\t\t// left edge of the scroll container. The width of the\n\t\t\t\t\t// scrollbar needs to be accounted for when positioning the\n\t\t\t\t\t// drop indicator.\n\t\t\t\t\tconst scrollbarWidth = rtl\n\t\t\t\t\t\t? scrollContainer.offsetWidth -\n\t\t\t\t\t\t  scrollContainer.clientWidth\n\t\t\t\t\t\t: 0;\n\n\t\t\t\t\tif ( left < scrollContainerRect.left + scrollbarWidth ) {\n\t\t\t\t\t\tleft = scrollContainerRect.left + scrollbarWidth;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( dropPosition === 'top' ) {\n\t\t\t\t\ttop = rect.top - rect.height * 2;\n\t\t\t\t} else {\n\t\t\t\t\t// `dropPosition` is either `bottom` or `inside`\n\t\t\t\t\ttop = rect.top;\n\t\t\t\t}\n\n\t\t\t\tconst width = getDropIndicatorWidth( rect, 0 );\n\t\t\t\tconst height = rect.height;\n\n\t\t\t\treturn new window.DOMRect( left, top, width, height );\n\t\t\t},\n\t\t};\n\t}, [ targetElement, dropPosition, getDropIndicatorWidth, rtl ] );\n\n\tif ( ! targetElement ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<Popover\n\t\t\tanimate={ false }\n\t\t\tanchor={ popoverAnchor }\n\t\t\tfocusOnMount={ false }\n\t\t\tclassName=\"block-editor-list-view-drop-indicator--preview\"\n\t\t\tvariant=\"unstyled\"\n\t\t\tflip={ false }\n\t\t\tresize\n\t\t>\n\t\t\t<div\n\t\t\t\tstyle={ style }\n\t\t\t\tclassName={ classnames(\n\t\t\t\t\t'block-editor-list-view-drop-indicator__line',\n\t\t\t\t\t{\n\t\t\t\t\t\t'block-editor-list-view-drop-indicator__line--darker':\n\t\t\t\t\t\t\thasAdjacentSelectedBranch,\n\t\t\t\t\t}\n\t\t\t\t) }\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"block-editor-list-view-leaf\"\n\t\t\t\t\taria-level={ ariaLevel }\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={ classnames(\n\t\t\t\t\t\t\t'block-editor-list-view-block-select-button',\n\t\t\t\t\t\t\t'block-editor-list-view-block-contents'\n\t\t\t\t\t\t) }\n\t\t\t\t\t\tstyle={ horizontalScrollOffsetStyle }\n\t\t\t\t\t>\n\t\t\t\t\t\t<ListViewExpander onClick={ () => {} } />\n\t\t\t\t\t\t<BlockIcon\n\t\t\t\t\t\t\ticon={ blockInformation?.icon }\n\t\t\t\t\t\t\tshowColors\n\t\t\t\t\t\t\tcontext=\"list-view\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<HStack\n\t\t\t\t\t\t\talignment=\"center\"\n\t\t\t\t\t\t\tclassName=\"block-editor-list-view-block-select-button__label-wrapper\"\n\t\t\t\t\t\t\tjustify=\"flex-start\"\n\t\t\t\t\t\t\tspacing={ 1 }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span className=\"block-editor-list-view-block-select-button__title\">\n\t\t\t\t\t\t\t\t<Truncate ellipsizeMode=\"auto\">\n\t\t\t\t\t\t\t\t\t{ blockTitle }\n\t\t\t\t\t\t\t\t</Truncate>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</HStack>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"block-editor-list-view-block__menu-cell\"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Popover>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport { useState, useCallback, useEffect } from '@wordpress/element';\nimport {\n\tuseThrottle,\n\t__experimentalUseDropZone as useDropZone,\n\tusePrevious,\n} from '@wordpress/compose';\nimport { isRTL } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport {\n\tgetDistanceToNearestEdge,\n\tisPointContainedByRect,\n} from '../../utils/math';\nimport useOnBlockDrop from '../use-on-block-drop';\nimport { store as blockEditorStore } from '../../store';\n\n/** @typedef {import('../../utils/math').WPPoint} WPPoint */\n\n/**\n * The type of a drag event.\n *\n * @typedef {'default'|'file'|'html'} WPDragEventType\n */\n\n/**\n * An object representing data for blocks in the DOM used by drag and drop.\n *\n * @typedef {Object} WPListViewDropZoneBlock\n * @property {string}  clientId                        The client id for the block.\n * @property {string}  rootClientId                    The root client id for the block.\n * @property {number}  blockIndex                      The block's index.\n * @property {Element} element                         The DOM element representing the block.\n * @property {number}  innerBlockCount                 The number of inner blocks the block has.\n * @property {boolean} isDraggedBlock                  Whether the block is currently being dragged.\n * @property {boolean} isExpanded                      Whether the block is expanded in the UI.\n * @property {boolean} canInsertDraggedBlocksAsSibling Whether the dragged block can be a sibling of this block.\n * @property {boolean} canInsertDraggedBlocksAsChild   Whether the dragged block can be a child of this block.\n */\n\n/**\n * An array representing data for blocks in the DOM used by drag and drop.\n *\n * @typedef {WPListViewDropZoneBlock[]} WPListViewDropZoneBlocks\n */\n\n/**\n * An object containing details of a drop target.\n *\n * @typedef {Object} WPListViewDropZoneTarget\n * @property {string}                  blockIndex   The insertion index.\n * @property {string}                  rootClientId The root client id for the block.\n * @property {string|undefined}        clientId     The client id for the block.\n * @property {'top'|'bottom'|'inside'} dropPosition The position relative to the block that the user is dropping to.\n *                                                  'inside' refers to nesting as an inner block.\n */\n\n// When the indentation level, the corresponding left margin in `style.scss`\n// must be updated as well to ensure the drop zone is aligned with the indentation.\nexport const NESTING_LEVEL_INDENTATION = 28;\n\n/**\n * Determines whether the user is positioning the dragged block to be\n * moved up to a parent level.\n *\n * Determined based on nesting level indentation of the current block.\n *\n * @param {WPPoint} point        The point representing the cursor position when dragging.\n * @param {DOMRect} rect         The rectangle.\n * @param {number}  nestingLevel The nesting level of the block.\n * @param {boolean} rtl          Whether the editor is in RTL mode.\n * @return {boolean} Whether the gesture is an upward gesture.\n */\nfunction isUpGesture( point, rect, nestingLevel = 1, rtl = false ) {\n\t// If the block is nested, and the user is dragging to the bottom\n\t// left of the block (or bottom right in RTL languages), then it is an upward gesture.\n\tconst blockIndentPosition = rtl\n\t\t? rect.right - nestingLevel * NESTING_LEVEL_INDENTATION\n\t\t: rect.left + nestingLevel * NESTING_LEVEL_INDENTATION;\n\treturn rtl ? point.x > blockIndentPosition : point.x < blockIndentPosition;\n}\n\n/**\n * Returns how many nesting levels up the user is attempting to drag to.\n *\n * The relative parent level is calculated based on how far\n * the cursor is from the provided nesting level (e.g. of a candidate block\n * that the user is hovering over). The nesting level is considered \"desired\"\n * because it is not guaranteed that the user will be able to drag to the desired level.\n *\n * The returned integer can be used to access an ascending array\n * of parent blocks, where the first item is the block the user\n * is hovering over, and the last item is the root block.\n *\n * @param {WPPoint} point        The point representing the cursor position when dragging.\n * @param {DOMRect} rect         The rectangle.\n * @param {number}  nestingLevel The nesting level of the block.\n * @param {boolean} rtl          Whether the editor is in RTL mode.\n * @return {number} The desired relative parent level.\n */\nfunction getDesiredRelativeParentLevel(\n\tpoint,\n\trect,\n\tnestingLevel = 1,\n\trtl = false\n) {\n\t// In RTL languages, the block indent position is from the right edge of the block.\n\t// In LTR languages, the block indent position is from the left edge of the block.\n\tconst blockIndentPosition = rtl\n\t\t? rect.right - nestingLevel * NESTING_LEVEL_INDENTATION\n\t\t: rect.left + nestingLevel * NESTING_LEVEL_INDENTATION;\n\n\tconst distanceBetweenPointAndBlockIndentPosition = rtl\n\t\t? blockIndentPosition - point.x\n\t\t: point.x - blockIndentPosition;\n\n\tconst desiredParentLevel = Math.round(\n\t\tdistanceBetweenPointAndBlockIndentPosition / NESTING_LEVEL_INDENTATION\n\t);\n\n\treturn Math.abs( desiredParentLevel );\n}\n\n/**\n * Returns an array of the parent blocks of the block the user is dropping to.\n *\n * @param {WPListViewDropZoneBlock}  candidateBlockData The block the user is dropping to.\n * @param {WPListViewDropZoneBlocks} blocksData         Data about the blocks in list view.\n * @return {WPListViewDropZoneBlocks} An array of block parents, including the block the user is dropping to.\n */\nfunction getCandidateBlockParents( candidateBlockData, blocksData ) {\n\tconst candidateBlockParents = [];\n\tlet currentBlockData = candidateBlockData;\n\n\twhile ( currentBlockData ) {\n\t\tcandidateBlockParents.push( { ...currentBlockData } );\n\t\tcurrentBlockData = blocksData.find(\n\t\t\t( blockData ) =>\n\t\t\t\tblockData.clientId === currentBlockData.rootClientId\n\t\t);\n\t}\n\n\treturn candidateBlockParents;\n}\n\n/**\n * Given a list of blocks data and a block index, return the next non-dragged\n * block. This is used to determine the block that the user is dropping to,\n * while ignoring the dragged block.\n *\n * @param {WPListViewDropZoneBlocks} blocksData Data about the blocks in list view.\n * @param {number}                   index      The index to begin searching from.\n * @return {WPListViewDropZoneBlock | undefined} The next non-dragged block.\n */\nfunction getNextNonDraggedBlock( blocksData, index ) {\n\tconst nextBlockData = blocksData[ index + 1 ];\n\tif ( nextBlockData && nextBlockData.isDraggedBlock ) {\n\t\treturn getNextNonDraggedBlock( blocksData, index + 1 );\n\t}\n\n\treturn nextBlockData;\n}\n\n/**\n * Determines whether the user positioning the dragged block to nest as an\n * inner block.\n *\n * Determined based on nesting level indentation of the current block, plus\n * the indentation of the next level of nesting. The vertical position of the\n * cursor must also be within the block.\n *\n * @param {WPPoint} point        The point representing the cursor position when dragging.\n * @param {DOMRect} rect         The rectangle.\n * @param {number}  nestingLevel The nesting level of the block.\n * @param {boolean} rtl          Whether the editor is in RTL mode.\n */\nfunction isNestingGesture( point, rect, nestingLevel = 1, rtl = false ) {\n\tconst blockIndentPosition = rtl\n\t\t? rect.right - nestingLevel * NESTING_LEVEL_INDENTATION\n\t\t: rect.left + nestingLevel * NESTING_LEVEL_INDENTATION;\n\n\tconst isNestingHorizontalGesture = rtl\n\t\t? point.x < blockIndentPosition - NESTING_LEVEL_INDENTATION\n\t\t: point.x > blockIndentPosition + NESTING_LEVEL_INDENTATION;\n\n\treturn isNestingHorizontalGesture && point.y < rect.bottom;\n}\n\n// Block navigation is always a vertical list, so only allow dropping\n// to the above or below a block.\nconst ALLOWED_DROP_EDGES = [ 'top', 'bottom' ];\n\n/**\n * Given blocks data and the cursor position, compute the drop target.\n *\n * @param {WPListViewDropZoneBlocks} blocksData Data about the blocks in list view.\n * @param {WPPoint}                  position   The point representing the cursor position when dragging.\n * @param {boolean}                  rtl        Whether the editor is in RTL mode.\n *\n * @return {WPListViewDropZoneTarget | undefined} An object containing data about the drop target.\n */\nexport function getListViewDropTarget( blocksData, position, rtl = false ) {\n\tlet candidateEdge;\n\tlet candidateBlockData;\n\tlet candidateDistance;\n\tlet candidateRect;\n\tlet candidateBlockIndex;\n\n\tfor ( let i = 0; i < blocksData.length; i++ ) {\n\t\tconst blockData = blocksData[ i ];\n\t\tif ( blockData.isDraggedBlock ) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tconst rect = blockData.element.getBoundingClientRect();\n\t\tconst [ distance, edge ] = getDistanceToNearestEdge(\n\t\t\tposition,\n\t\t\trect,\n\t\t\tALLOWED_DROP_EDGES\n\t\t);\n\n\t\tconst isCursorWithinBlock = isPointContainedByRect( position, rect );\n\t\tif (\n\t\t\tcandidateDistance === undefined ||\n\t\t\tdistance < candidateDistance ||\n\t\t\tisCursorWithinBlock\n\t\t) {\n\t\t\tcandidateDistance = distance;\n\n\t\t\tconst index = blocksData.indexOf( blockData );\n\t\t\tconst previousBlockData = blocksData[ index - 1 ];\n\n\t\t\t// If dragging near the top of a block and the preceding block\n\t\t\t// is at the same level, use the preceding block as the candidate\n\t\t\t// instead, as later it makes determining a nesting drop easier.\n\t\t\tif (\n\t\t\t\tedge === 'top' &&\n\t\t\t\tpreviousBlockData &&\n\t\t\t\tpreviousBlockData.rootClientId === blockData.rootClientId &&\n\t\t\t\t! previousBlockData.isDraggedBlock\n\t\t\t) {\n\t\t\t\tcandidateBlockData = previousBlockData;\n\t\t\t\tcandidateEdge = 'bottom';\n\t\t\t\tcandidateRect =\n\t\t\t\t\tpreviousBlockData.element.getBoundingClientRect();\n\t\t\t\tcandidateBlockIndex = index - 1;\n\t\t\t} else {\n\t\t\t\tcandidateBlockData = blockData;\n\t\t\t\tcandidateEdge = edge;\n\t\t\t\tcandidateRect = rect;\n\t\t\t\tcandidateBlockIndex = index;\n\t\t\t}\n\n\t\t\t// If the mouse position is within the block, break early\n\t\t\t// as the user would intend to drop either before or after\n\t\t\t// this block.\n\t\t\t//\n\t\t\t// This solves an issue where some rows in the list view\n\t\t\t// tree overlap slightly due to sub-pixel rendering.\n\t\t\tif ( isCursorWithinBlock ) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tif ( ! candidateBlockData ) {\n\t\treturn;\n\t}\n\n\tconst candidateBlockParents = getCandidateBlockParents(\n\t\tcandidateBlockData,\n\t\tblocksData\n\t);\n\n\tconst isDraggingBelow = candidateEdge === 'bottom';\n\n\t// If the user is dragging towards the bottom of the block check whether\n\t// they might be trying to nest the block as a child.\n\t// If the block already has inner blocks, and is expanded, this should be treated\n\t// as nesting since the next block in the tree will be the first child.\n\t// However, if the block is collapsed, dragging beneath the block should\n\t// still be allowed, as the next visible block in the tree will be a sibling.\n\tif (\n\t\tisDraggingBelow &&\n\t\tcandidateBlockData.canInsertDraggedBlocksAsChild &&\n\t\t( ( candidateBlockData.innerBlockCount > 0 &&\n\t\t\tcandidateBlockData.isExpanded ) ||\n\t\t\tisNestingGesture(\n\t\t\t\tposition,\n\t\t\t\tcandidateRect,\n\t\t\t\tcandidateBlockParents.length,\n\t\t\t\trtl\n\t\t\t) )\n\t) {\n\t\t// If the block is expanded, insert the block as the first child.\n\t\t// Otherwise, for collapsed blocks, insert the block as the last child.\n\t\tconst newBlockIndex = candidateBlockData.isExpanded\n\t\t\t? 0\n\t\t\t: candidateBlockData.innerBlockCount || 0;\n\n\t\treturn {\n\t\t\trootClientId: candidateBlockData.clientId,\n\t\t\tclientId: candidateBlockData.clientId,\n\t\t\tblockIndex: newBlockIndex,\n\t\t\tdropPosition: 'inside',\n\t\t};\n\t}\n\n\t// If the user is dragging towards the bottom of the block check whether\n\t// they might be trying to move the block to be at a parent level.\n\tif (\n\t\tisDraggingBelow &&\n\t\tcandidateBlockData.rootClientId &&\n\t\tisUpGesture(\n\t\t\tposition,\n\t\t\tcandidateRect,\n\t\t\tcandidateBlockParents.length,\n\t\t\trtl\n\t\t)\n\t) {\n\t\tconst nextBlock = getNextNonDraggedBlock(\n\t\t\tblocksData,\n\t\t\tcandidateBlockIndex\n\t\t);\n\t\tconst currentLevel = candidateBlockData.nestingLevel;\n\t\tconst nextLevel = nextBlock ? nextBlock.nestingLevel : 1;\n\n\t\tif ( currentLevel && nextLevel ) {\n\t\t\t// Determine the desired relative level of the block to be dropped.\n\t\t\tconst desiredRelativeLevel = getDesiredRelativeParentLevel(\n\t\t\t\tposition,\n\t\t\t\tcandidateRect,\n\t\t\t\tcandidateBlockParents.length,\n\t\t\t\trtl\n\t\t\t);\n\n\t\t\tconst targetParentIndex = Math.max(\n\t\t\t\tMath.min( desiredRelativeLevel, currentLevel - nextLevel ),\n\t\t\t\t0\n\t\t\t);\n\n\t\t\tif ( candidateBlockParents[ targetParentIndex ] ) {\n\t\t\t\t// Default to the block index of the candidate block.\n\t\t\t\tlet newBlockIndex = candidateBlockData.blockIndex;\n\n\t\t\t\t// If the next block is at the same level, use that as the default\n\t\t\t\t// block index. This ensures that the block is dropped in the correct\n\t\t\t\t// position when dragging to the bottom of a block.\n\t\t\t\tif (\n\t\t\t\t\tcandidateBlockParents[ targetParentIndex ].nestingLevel ===\n\t\t\t\t\tnextBlock?.nestingLevel\n\t\t\t\t) {\n\t\t\t\t\tnewBlockIndex = nextBlock?.blockIndex;\n\t\t\t\t} else {\n\t\t\t\t\t// Otherwise, search from the current block index back\n\t\t\t\t\t// to find the last block index within the same target parent.\n\t\t\t\t\tfor ( let i = candidateBlockIndex; i >= 0; i-- ) {\n\t\t\t\t\t\tconst blockData = blocksData[ i ];\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tblockData.rootClientId ===\n\t\t\t\t\t\t\tcandidateBlockParents[ targetParentIndex ]\n\t\t\t\t\t\t\t\t.rootClientId\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tnewBlockIndex = blockData.blockIndex + 1;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\trootClientId:\n\t\t\t\t\t\tcandidateBlockParents[ targetParentIndex ].rootClientId,\n\t\t\t\t\tclientId: candidateBlockData.clientId,\n\t\t\t\t\tblockIndex: newBlockIndex,\n\t\t\t\t\tdropPosition: candidateEdge,\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t}\n\n\t// If dropping as a sibling, but block cannot be inserted in\n\t// this context, return early.\n\tif ( ! candidateBlockData.canInsertDraggedBlocksAsSibling ) {\n\t\treturn;\n\t}\n\n\tconst offset = isDraggingBelow ? 1 : 0;\n\treturn {\n\t\trootClientId: candidateBlockData.rootClientId,\n\t\tclientId: candidateBlockData.clientId,\n\t\tblockIndex: candidateBlockData.blockIndex + offset,\n\t\tdropPosition: candidateEdge,\n\t};\n}\n\n// Throttle options need to be defined outside of the hook to avoid\n// re-creating the object on every render. This is due to a limitation\n// of the `useThrottle` hook, where the options object is included\n// in the dependency array for memoization.\nconst EXPAND_THROTTLE_OPTIONS = {\n\tleading: false, // Don't call the function immediately on the first call.\n\ttrailing: true, // Do call the function on the last call.\n};\n\n/**\n * A react hook for implementing a drop zone in list view.\n *\n * @param {Object}       props                    Named parameters.\n * @param {?HTMLElement} [props.dropZoneElement]  Optional element to be used as the drop zone.\n * @param {Object}       [props.expandedState]    The expanded state of the blocks in the list view.\n * @param {Function}     [props.setExpandedState] Function to set the expanded state of a list of block clientIds.\n *\n * @return {WPListViewDropZoneTarget} The drop target.\n */\nexport default function useListViewDropZone( {\n\tdropZoneElement,\n\texpandedState,\n\tsetExpandedState,\n} ) {\n\tconst {\n\t\tgetBlockRootClientId,\n\t\tgetBlockIndex,\n\t\tgetBlockCount,\n\t\tgetDraggedBlockClientIds,\n\t\tcanInsertBlocks,\n\t} = useSelect( blockEditorStore );\n\tconst [ target, setTarget ] = useState();\n\tconst { rootClientId: targetRootClientId, blockIndex: targetBlockIndex } =\n\t\ttarget || {};\n\n\tconst onBlockDrop = useOnBlockDrop( targetRootClientId, targetBlockIndex );\n\n\tconst rtl = isRTL();\n\n\tconst previousRootClientId = usePrevious( targetRootClientId );\n\n\tconst maybeExpandBlock = useCallback(\n\t\t( _expandedState, _target ) => {\n\t\t\t// If the user is attempting to drop a block inside a collapsed block,\n\t\t\t// that is, using a nesting gesture flagged by 'inside' dropPosition,\n\t\t\t// expand the block within the list view, if it isn't already.\n\t\t\tconst { rootClientId } = _target || {};\n\t\t\tif ( ! rootClientId ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (\n\t\t\t\t_target?.dropPosition === 'inside' &&\n\t\t\t\t! _expandedState[ rootClientId ]\n\t\t\t) {\n\t\t\t\tsetExpandedState( {\n\t\t\t\t\ttype: 'expand',\n\t\t\t\t\tclientIds: [ rootClientId ],\n\t\t\t\t} );\n\t\t\t}\n\t\t},\n\t\t[ setExpandedState ]\n\t);\n\n\t// Throttle the maybeExpandBlock function to avoid expanding the block\n\t// too quickly when the user is dragging over the block. This is to\n\t// avoid expanding the block when the user is just passing over it.\n\tconst throttledMaybeExpandBlock = useThrottle(\n\t\tmaybeExpandBlock,\n\t\t500,\n\t\tEXPAND_THROTTLE_OPTIONS\n\t);\n\n\tuseEffect( () => {\n\t\tif (\n\t\t\ttarget?.dropPosition !== 'inside' ||\n\t\t\tpreviousRootClientId !== target?.rootClientId\n\t\t) {\n\t\t\tthrottledMaybeExpandBlock.cancel();\n\t\t\treturn;\n\t\t}\n\t\tthrottledMaybeExpandBlock( expandedState, target );\n\t}, [\n\t\texpandedState,\n\t\tpreviousRootClientId,\n\t\ttarget,\n\t\tthrottledMaybeExpandBlock,\n\t] );\n\n\tconst draggedBlockClientIds = getDraggedBlockClientIds();\n\tconst throttled = useThrottle(\n\t\tuseCallback(\n\t\t\t( event, currentTarget ) => {\n\t\t\t\tconst position = { x: event.clientX, y: event.clientY };\n\t\t\t\tconst isBlockDrag = !! draggedBlockClientIds?.length;\n\n\t\t\t\tconst blockElements = Array.from(\n\t\t\t\t\tcurrentTarget.querySelectorAll( '[data-block]' )\n\t\t\t\t);\n\n\t\t\t\tconst blocksData = blockElements.map( ( blockElement ) => {\n\t\t\t\t\tconst clientId = blockElement.dataset.block;\n\t\t\t\t\tconst isExpanded = blockElement.dataset.expanded === 'true';\n\t\t\t\t\tconst isDraggedBlock =\n\t\t\t\t\t\tblockElement.classList.contains( 'is-dragging' );\n\n\t\t\t\t\t// Get nesting level from `aria-level` attribute because Firefox does not support `element.ariaLevel`.\n\t\t\t\t\tconst nestingLevel = parseInt(\n\t\t\t\t\t\tblockElement.getAttribute( 'aria-level' ),\n\t\t\t\t\t\t10\n\t\t\t\t\t);\n\t\t\t\t\tconst rootClientId = getBlockRootClientId( clientId );\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\tclientId,\n\t\t\t\t\t\tisExpanded,\n\t\t\t\t\t\trootClientId,\n\t\t\t\t\t\tblockIndex: getBlockIndex( clientId ),\n\t\t\t\t\t\telement: blockElement,\n\t\t\t\t\t\tnestingLevel: nestingLevel || undefined,\n\t\t\t\t\t\tisDraggedBlock: isBlockDrag ? isDraggedBlock : false,\n\t\t\t\t\t\tinnerBlockCount: getBlockCount( clientId ),\n\t\t\t\t\t\tcanInsertDraggedBlocksAsSibling: isBlockDrag\n\t\t\t\t\t\t\t? canInsertBlocks(\n\t\t\t\t\t\t\t\t\tdraggedBlockClientIds,\n\t\t\t\t\t\t\t\t\trootClientId\n\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t\t: true,\n\t\t\t\t\t\tcanInsertDraggedBlocksAsChild: isBlockDrag\n\t\t\t\t\t\t\t? canInsertBlocks( draggedBlockClientIds, clientId )\n\t\t\t\t\t\t\t: true,\n\t\t\t\t\t};\n\t\t\t\t} );\n\n\t\t\t\tconst newTarget = getListViewDropTarget(\n\t\t\t\t\tblocksData,\n\t\t\t\t\tposition,\n\t\t\t\t\trtl\n\t\t\t\t);\n\n\t\t\t\tif ( newTarget ) {\n\t\t\t\t\tsetTarget( newTarget );\n\t\t\t\t}\n\t\t\t},\n\t\t\t[\n\t\t\t\tcanInsertBlocks,\n\t\t\t\tdraggedBlockClientIds,\n\t\t\t\tgetBlockCount,\n\t\t\t\tgetBlockIndex,\n\t\t\t\tgetBlockRootClientId,\n\t\t\t\trtl,\n\t\t\t]\n\t\t),\n\t\t50\n\t);\n\n\tconst ref = useDropZone( {\n\t\tdropZoneElement,\n\t\tonDrop( event ) {\n\t\t\tif ( target ) {\n\t\t\t\tonBlockDrop( event );\n\t\t\t}\n\t\t},\n\t\tonDragLeave() {\n\t\t\tthrottled.cancel();\n\t\t\t// Use `null` value to indicate that the drop target is not valid,\n\t\t\t// but that the drag is still active. This allows for styling rules\n\t\t\t// that are active only when a user drags outside of the list view.\n\t\t\tsetTarget( null );\n\t\t},\n\t\tonDragOver( event ) {\n\t\t\t// `currentTarget` is only available while the event is being\n\t\t\t// handled, so get it now and pass it to the thottled function.\n\t\t\t// https://developer.mozilla.org/en-US/docs/Web/API/Event/currentTarget\n\t\t\tthrottled( event, event.currentTarget );\n\t\t},\n\t\tonDragEnd() {\n\t\t\tthrottled.cancel();\n\t\t\t// Use `undefined` value to indicate that the drag has concluded.\n\t\t\t// This allows styling rules that are active only when a user is\n\t\t\t// dragging to be removed.\n\t\t\tsetTarget( undefined );\n\t\t},\n\t} );\n\n\treturn { ref, target };\n}\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tuseInstanceId,\n\tuseMergeRefs,\n\t__experimentalUseFixedWindowList as useFixedWindowList,\n} from '@wordpress/compose';\nimport {\n\t__experimentalTreeGrid as TreeGrid,\n\tVisuallyHidden,\n} from '@wordpress/components';\nimport { AsyncModeProvider, useSelect } from '@wordpress/data';\nimport deprecated from '@wordpress/deprecated';\nimport {\n\tuseCallback,\n\tuseEffect,\n\tuseMemo,\n\tuseRef,\n\tuseReducer,\n\tforwardRef,\n\tuseState,\n} from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport ListViewBranch from './branch';\nimport { ListViewContext } from './context';\nimport ListViewDropIndicatorPreview from './drop-indicator';\nimport useBlockSelection from './use-block-selection';\nimport useListViewBlockIndexes from './use-list-view-block-indexes';\nimport useListViewClientIds from './use-list-view-client-ids';\nimport useListViewCollapseItems from './use-list-view-collapse-items';\nimport useListViewDropZone from './use-list-view-drop-zone';\nimport useListViewExpandSelectedItem from './use-list-view-expand-selected-item';\nimport { store as blockEditorStore } from '../../store';\nimport { BlockSettingsDropdown } from '../block-settings-menu/block-settings-dropdown';\nimport { focusListItem } from './utils';\nimport useClipboardHandler from './use-clipboard-handler';\n\nconst expanded = ( state, action ) => {\n\tif ( action.type === 'clear' ) {\n\t\treturn {};\n\t}\n\tif ( Array.isArray( action.clientIds ) ) {\n\t\treturn {\n\t\t\t...state,\n\t\t\t...action.clientIds.reduce(\n\t\t\t\t( newState, id ) => ( {\n\t\t\t\t\t...newState,\n\t\t\t\t\t[ id ]: action.type === 'expand',\n\t\t\t\t} ),\n\t\t\t\t{}\n\t\t\t),\n\t\t};\n\t}\n\treturn state;\n};\n\nexport const BLOCK_LIST_ITEM_HEIGHT = 36;\n\n/** @typedef {import('react').ComponentType} ComponentType */\n/** @typedef {import('react').Ref<HTMLElement>} Ref */\n\n/**\n * Show a hierarchical list of blocks.\n *\n * @param {Object}         props                        Components props.\n * @param {string}         props.id                     An HTML element id for the root element of ListView.\n * @param {Array}          props.blocks                 _deprecated_ Custom subset of block client IDs to be used instead of the default hierarchy.\n * @param {?HTMLElement}   props.dropZoneElement        Optional element to be used as the drop zone.\n * @param {?boolean}       props.showBlockMovers        Flag to enable block movers. Defaults to `false`.\n * @param {?boolean}       props.isExpanded             Flag to determine whether nested levels are expanded by default. Defaults to `false`.\n * @param {?boolean}       props.showAppender           Flag to show or hide the block appender. Defaults to `false`.\n * @param {?ComponentType} props.blockSettingsMenu      Optional more menu substitution. Defaults to the standard `BlockSettingsDropdown` component.\n * @param {string}         props.rootClientId           The client id of the root block from which we determine the blocks to show in the list.\n * @param {string}         props.description            Optional accessible description for the tree grid component.\n * @param {?Function}      props.onSelect               Optional callback to be invoked when a block is selected. Receives the block object that was selected.\n * @param {?ComponentType} props.additionalBlockContent Component that renders additional block content UI.\n * @param {Ref}            ref                          Forwarded ref\n */\nfunction ListViewComponent(\n\t{\n\t\tid,\n\t\tblocks,\n\t\tdropZoneElement,\n\t\tshowBlockMovers = false,\n\t\tisExpanded = false,\n\t\tshowAppender = false,\n\t\tblockSettingsMenu: BlockSettingsMenu = BlockSettingsDropdown,\n\t\trootClientId,\n\t\tdescription,\n\t\tonSelect,\n\t\tadditionalBlockContent: AdditionalBlockContent,\n\t},\n\tref\n) {\n\t// This can be removed once we no longer need to support the blocks prop.\n\tif ( blocks ) {\n\t\tdeprecated(\n\t\t\t'`blocks` property in `wp.blockEditor.__experimentalListView`',\n\t\t\t{\n\t\t\t\tsince: '6.3',\n\t\t\t\talternative: '`rootClientId` property',\n\t\t\t}\n\t\t);\n\t}\n\n\tconst instanceId = useInstanceId( ListViewComponent );\n\tconst { clientIdsTree, draggedClientIds, selectedClientIds } =\n\t\tuseListViewClientIds( { blocks, rootClientId } );\n\tconst blockIndexes = useListViewBlockIndexes( clientIdsTree );\n\n\tconst { getBlock } = useSelect( blockEditorStore );\n\tconst { visibleBlockCount, shouldShowInnerBlocks } = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tgetGlobalBlockCount,\n\t\t\t\tgetClientIdsOfDescendants,\n\t\t\t\t__unstableGetEditorMode,\n\t\t\t} = select( blockEditorStore );\n\t\t\tconst draggedBlockCount =\n\t\t\t\tdraggedClientIds?.length > 0\n\t\t\t\t\t? getClientIdsOfDescendants( draggedClientIds ).length + 1\n\t\t\t\t\t: 0;\n\t\t\treturn {\n\t\t\t\tvisibleBlockCount: getGlobalBlockCount() - draggedBlockCount,\n\t\t\t\tshouldShowInnerBlocks: __unstableGetEditorMode() !== 'zoom-out',\n\t\t\t};\n\t\t},\n\t\t[ draggedClientIds ]\n\t);\n\n\tconst { updateBlockSelection } = useBlockSelection();\n\n\tconst [ expandedState, setExpandedState ] = useReducer( expanded, {} );\n\n\tconst [ insertedBlock, setInsertedBlock ] = useState( null );\n\n\tconst { setSelectedTreeId } = useListViewExpandSelectedItem( {\n\t\tfirstSelectedBlockClientId: selectedClientIds[ 0 ],\n\t\tsetExpandedState,\n\t} );\n\tconst selectEditorBlock = useCallback(\n\t\t/**\n\t\t * @param {MouseEvent | KeyboardEvent | undefined} event\n\t\t * @param {string}                                 blockClientId\n\t\t * @param {null | undefined | -1 | 1}              focusPosition\n\t\t */\n\t\t( event, blockClientId, focusPosition ) => {\n\t\t\tupdateBlockSelection( event, blockClientId, null, focusPosition );\n\t\t\tsetSelectedTreeId( blockClientId );\n\t\t\tif ( onSelect ) {\n\t\t\t\tonSelect( getBlock( blockClientId ) );\n\t\t\t}\n\t\t},\n\t\t[ setSelectedTreeId, updateBlockSelection, onSelect, getBlock ]\n\t);\n\n\tconst { ref: dropZoneRef, target: blockDropTarget } = useListViewDropZone( {\n\t\tdropZoneElement,\n\t\texpandedState,\n\t\tsetExpandedState,\n\t} );\n\tconst elementRef = useRef();\n\n\t// Allow handling of copy, cut, and paste events.\n\tconst clipBoardRef = useClipboardHandler( {\n\t\tselectBlock: selectEditorBlock,\n\t} );\n\n\tconst treeGridRef = useMergeRefs( [\n\t\tclipBoardRef,\n\t\telementRef,\n\t\tdropZoneRef,\n\t\tref,\n\t] );\n\n\tuseEffect( () => {\n\t\t// If a blocks are already selected when the list view is initially\n\t\t// mounted, shift focus to the first selected block.\n\t\tif ( selectedClientIds?.length ) {\n\t\t\tfocusListItem( selectedClientIds[ 0 ], elementRef?.current );\n\t\t}\n\t\t// Disable reason: Only focus on the selected item when the list view is mounted.\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [] );\n\n\tconst expand = useCallback(\n\t\t( clientId ) => {\n\t\t\tif ( ! clientId ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst clientIds = Array.isArray( clientId )\n\t\t\t\t? clientId\n\t\t\t\t: [ clientId ];\n\t\t\tsetExpandedState( { type: 'expand', clientIds } );\n\t\t},\n\t\t[ setExpandedState ]\n\t);\n\tconst collapse = useCallback(\n\t\t( clientId ) => {\n\t\t\tif ( ! clientId ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tsetExpandedState( { type: 'collapse', clientIds: [ clientId ] } );\n\t\t},\n\t\t[ setExpandedState ]\n\t);\n\tconst collapseAll = useCallback( () => {\n\t\tsetExpandedState( { type: 'clear' } );\n\t}, [ setExpandedState ] );\n\tconst expandRow = useCallback(\n\t\t( row ) => {\n\t\t\texpand( row?.dataset?.block );\n\t\t},\n\t\t[ expand ]\n\t);\n\tconst collapseRow = useCallback(\n\t\t( row ) => {\n\t\t\tcollapse( row?.dataset?.block );\n\t\t},\n\t\t[ collapse ]\n\t);\n\tconst focusRow = useCallback(\n\t\t( event, startRow, endRow ) => {\n\t\t\tif ( event.shiftKey ) {\n\t\t\t\tupdateBlockSelection(\n\t\t\t\t\tevent,\n\t\t\t\t\tstartRow?.dataset?.block,\n\t\t\t\t\tendRow?.dataset?.block\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t\t[ updateBlockSelection ]\n\t);\n\n\tuseListViewCollapseItems( {\n\t\tcollapseAll,\n\t\texpand,\n\t} );\n\n\tconst firstDraggedBlockClientId = draggedClientIds?.[ 0 ];\n\n\t// Convert a blockDropTarget into indexes relative to the blocks in the list view.\n\t// These values are used to determine which blocks should be displaced to make room\n\t// for the drop indicator. See `ListViewBranch` and `getDragDisplacementValues`.\n\tconst { blockDropTargetIndex, blockDropPosition, firstDraggedBlockIndex } =\n\t\tuseMemo( () => {\n\t\t\tlet _blockDropTargetIndex, _firstDraggedBlockIndex;\n\n\t\t\tif ( blockDropTarget?.clientId ) {\n\t\t\t\tconst foundBlockIndex =\n\t\t\t\t\tblockIndexes[ blockDropTarget.clientId ];\n\t\t\t\t// If dragging below or inside the block, treat the drop target as the next block.\n\t\t\t\t_blockDropTargetIndex =\n\t\t\t\t\tfoundBlockIndex === undefined ||\n\t\t\t\t\tblockDropTarget?.dropPosition === 'top'\n\t\t\t\t\t\t? foundBlockIndex\n\t\t\t\t\t\t: foundBlockIndex + 1;\n\t\t\t} else if ( blockDropTarget === null ) {\n\t\t\t\t// A `null` value is used to indicate that the user is dragging outside of the list view.\n\t\t\t\t_blockDropTargetIndex = null;\n\t\t\t}\n\n\t\t\tif ( firstDraggedBlockClientId ) {\n\t\t\t\tconst foundBlockIndex =\n\t\t\t\t\tblockIndexes[ firstDraggedBlockClientId ];\n\t\t\t\t_firstDraggedBlockIndex =\n\t\t\t\t\tfoundBlockIndex === undefined ||\n\t\t\t\t\tblockDropTarget?.dropPosition === 'top'\n\t\t\t\t\t\t? foundBlockIndex\n\t\t\t\t\t\t: foundBlockIndex + 1;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tblockDropTargetIndex: _blockDropTargetIndex,\n\t\t\t\tblockDropPosition: blockDropTarget?.dropPosition,\n\t\t\t\tfirstDraggedBlockIndex: _firstDraggedBlockIndex,\n\t\t\t};\n\t\t}, [ blockDropTarget, blockIndexes, firstDraggedBlockClientId ] );\n\n\tconst contextValue = useMemo(\n\t\t() => ( {\n\t\t\tblockDropPosition,\n\t\t\tblockDropTargetIndex,\n\t\t\tblockIndexes,\n\t\t\tdraggedClientIds,\n\t\t\texpandedState,\n\t\t\texpand,\n\t\t\tfirstDraggedBlockIndex,\n\t\t\tcollapse,\n\t\t\tcollapseAll,\n\t\t\tBlockSettingsMenu,\n\t\t\tlistViewInstanceId: instanceId,\n\t\t\tAdditionalBlockContent,\n\t\t\tinsertedBlock,\n\t\t\tsetInsertedBlock,\n\t\t\ttreeGridElementRef: elementRef,\n\t\t\trootClientId,\n\t\t} ),\n\t\t[\n\t\t\tblockDropPosition,\n\t\t\tblockDropTargetIndex,\n\t\t\tblockIndexes,\n\t\t\tdraggedClientIds,\n\t\t\texpandedState,\n\t\t\texpand,\n\t\t\tfirstDraggedBlockIndex,\n\t\t\tcollapse,\n\t\t\tcollapseAll,\n\t\t\tBlockSettingsMenu,\n\t\t\tinstanceId,\n\t\t\tAdditionalBlockContent,\n\t\t\tinsertedBlock,\n\t\t\tsetInsertedBlock,\n\t\t\trootClientId,\n\t\t]\n\t);\n\n\t// List View renders a fixed number of items and relies on each having a fixed item height of 36px.\n\t// If this value changes, we should also change the itemHeight value set in useFixedWindowList.\n\t// See: https://github.com/WordPress/gutenberg/pull/35230 for additional context.\n\tconst [ fixedListWindow ] = useFixedWindowList(\n\t\telementRef,\n\t\tBLOCK_LIST_ITEM_HEIGHT,\n\t\tvisibleBlockCount,\n\t\t{\n\t\t\t// Ensure that the windowing logic is recalculated when the expanded state changes.\n\t\t\t// This is necessary because expanding a collapsed block in a short list view can\n\t\t\t// switch the list view to a tall list view with a scrollbar, and vice versa.\n\t\t\t// When this happens, the windowing logic needs to be recalculated to ensure that\n\t\t\t// the correct number of blocks are rendered, by rechecking for a scroll container.\n\t\t\texpandedState,\n\t\t\tuseWindowing: true,\n\t\t\twindowOverscan: 40,\n\t\t}\n\t);\n\n\t// If there are no blocks to show and we're not showing the appender, do not render the list view.\n\tif ( ! clientIdsTree.length && ! showAppender ) {\n\t\treturn null;\n\t}\n\n\tconst describedById =\n\t\tdescription && `block-editor-list-view-description-${ instanceId }`;\n\n\treturn (\n\t\t<AsyncModeProvider value>\n\t\t\t<ListViewDropIndicatorPreview\n\t\t\t\tdraggedBlockClientId={ firstDraggedBlockClientId }\n\t\t\t\tlistViewRef={ elementRef }\n\t\t\t\tblockDropTarget={ blockDropTarget }\n\t\t\t/>\n\t\t\t{ description && (\n\t\t\t\t<VisuallyHidden id={ describedById }>\n\t\t\t\t\t{ description }\n\t\t\t\t</VisuallyHidden>\n\t\t\t) }\n\t\t\t<TreeGrid\n\t\t\t\tid={ id }\n\t\t\t\tclassName={ classnames( 'block-editor-list-view-tree', {\n\t\t\t\t\t'is-dragging':\n\t\t\t\t\t\tdraggedClientIds?.length > 0 &&\n\t\t\t\t\t\tblockDropTargetIndex !== undefined,\n\t\t\t\t} ) }\n\t\t\t\taria-label={ __( 'Block navigation structure' ) }\n\t\t\t\tref={ treeGridRef }\n\t\t\t\tonCollapseRow={ collapseRow }\n\t\t\t\tonExpandRow={ expandRow }\n\t\t\t\tonFocusRow={ focusRow }\n\t\t\t\tapplicationAriaLabel={ __( 'Block navigation structure' ) }\n\t\t\t\taria-describedby={ describedById }\n\t\t\t\tstyle={ {\n\t\t\t\t\t'--wp-admin--list-view-dragged-items-height':\n\t\t\t\t\t\tdraggedClientIds?.length\n\t\t\t\t\t\t\t? `${\n\t\t\t\t\t\t\t\t\tBLOCK_LIST_ITEM_HEIGHT *\n\t\t\t\t\t\t\t\t\t( draggedClientIds.length - 1 )\n\t\t\t\t\t\t\t  }px`\n\t\t\t\t\t\t\t: null,\n\t\t\t\t} }\n\t\t\t>\n\t\t\t\t<ListViewContext.Provider value={ contextValue }>\n\t\t\t\t\t<ListViewBranch\n\t\t\t\t\t\tblocks={ clientIdsTree }\n\t\t\t\t\t\tparentId={ rootClientId }\n\t\t\t\t\t\tselectBlock={ selectEditorBlock }\n\t\t\t\t\t\tshowBlockMovers={ showBlockMovers }\n\t\t\t\t\t\tfixedListWindow={ fixedListWindow }\n\t\t\t\t\t\tselectedClientIds={ selectedClientIds }\n\t\t\t\t\t\tisExpanded={ isExpanded }\n\t\t\t\t\t\tshouldShowInnerBlocks={ shouldShowInnerBlocks }\n\t\t\t\t\t\tshowAppender={ showAppender }\n\t\t\t\t\t/>\n\t\t\t\t</ListViewContext.Provider>\n\t\t\t</TreeGrid>\n\t\t</AsyncModeProvider>\n\t);\n}\n\n// This is the private API for the ListView component.\n// It allows access to all props, not just the public ones.\nexport const PrivateListView = forwardRef( ListViewComponent );\n\n// This is the public API for the ListView component.\n// We wrap the PrivateListView component to hide some props from the public API.\nexport default forwardRef( ( props, ref ) => {\n\treturn (\n\t\t<PrivateListView\n\t\t\tref={ ref }\n\t\t\t{ ...props }\n\t\t\tshowAppender={ false }\n\t\t\trootClientId={ null }\n\t\t\tonSelect={ null }\n\t\t\tadditionalBlockContent={ null }\n\t\t\tblockSettingsMenu={ undefined }\n\t\t/>\n\t);\n} );\n","/**\r\n * WordPress dependencies\r\n */\r\n\r\nimport { useSelect } from '@wordpress/data';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as blockEditorStore } from '../../store';\r\nimport { unlock } from '../../lock-unlock';\r\n\r\nexport default function useListViewClientIds( { blocks, rootClientId } ) {\r\n\treturn useSelect(\r\n\t\t( select ) => {\r\n\t\t\tconst {\r\n\t\t\t\tgetDraggedBlockClientIds,\r\n\t\t\t\tgetSelectedBlockClientIds,\r\n\t\t\t\tgetEnabledClientIdsTree,\r\n\t\t\t} = unlock( select( blockEditorStore ) );\r\n\r\n\t\t\treturn {\r\n\t\t\t\tselectedClientIds: getSelectedBlockClientIds(),\r\n\t\t\t\tdraggedClientIds: getDraggedBlockClientIds(),\r\n\t\t\t\tclientIdsTree:\r\n\t\t\t\t\tblocks ?? getEnabledClientIdsTree( rootClientId ),\r\n\t\t\t};\r\n\t\t},\r\n\t\t[ blocks, rootClientId ]\r\n\t);\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useMemo } from '@wordpress/element';\r\n\r\nexport default function useListViewBlockIndexes( blocks ) {\r\n\tconst blockIndexes = useMemo( () => {\r\n\t\tconst indexes = {};\r\n\r\n\t\tlet currentGlobalIndex = 0;\r\n\r\n\t\tconst traverseBlocks = ( blockList ) => {\r\n\t\t\tblockList.forEach( ( block ) => {\r\n\t\t\t\tindexes[ block.clientId ] = currentGlobalIndex;\r\n\t\t\t\tcurrentGlobalIndex++;\r\n\r\n\t\t\t\tif ( block.innerBlocks.length > 0 ) {\r\n\t\t\t\t\ttraverseBlocks( block.innerBlocks );\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\t\t};\r\n\r\n\t\ttraverseBlocks( blocks );\r\n\r\n\t\treturn indexes;\r\n\t}, [ blocks ] );\r\n\r\n\treturn blockIndexes;\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { speak } from '@wordpress/a11y';\r\nimport { __, sprintf } from '@wordpress/i18n';\r\nimport { useDispatch, useSelect } from '@wordpress/data';\r\nimport { useCallback } from '@wordpress/element';\r\nimport { UP, DOWN, HOME, END, ESCAPE } from '@wordpress/keycodes';\r\nimport { store as blocksStore } from '@wordpress/blocks';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as blockEditorStore } from '../../store';\r\nimport { getCommonDepthClientIds } from './utils';\r\n\r\nexport default function useBlockSelection() {\r\n\tconst { clearSelectedBlock, multiSelect, selectBlock } =\r\n\t\tuseDispatch( blockEditorStore );\r\n\tconst {\r\n\t\tgetBlockName,\r\n\t\tgetBlockParents,\r\n\t\tgetBlockSelectionStart,\r\n\t\tgetSelectedBlockClientIds,\r\n\t\thasMultiSelection,\r\n\t\thasSelectedBlock,\r\n\t} = useSelect( blockEditorStore );\r\n\r\n\tconst { getBlockType } = useSelect( blocksStore );\r\n\r\n\tconst updateBlockSelection = useCallback(\r\n\t\tasync ( event, clientId, destinationClientId, focusPosition ) => {\r\n\t\t\tif ( ! event?.shiftKey && event?.keyCode !== ESCAPE ) {\r\n\t\t\t\tselectBlock( clientId, focusPosition );\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// To handle multiple block selection via the `SHIFT` key, prevent\r\n\t\t\t// the browser default behavior of opening the link in a new window.\r\n\t\t\tevent.preventDefault();\r\n\r\n\t\t\tconst isOnlyDeselection =\r\n\t\t\t\tevent.type === 'keydown' && event.keyCode === ESCAPE;\r\n\t\t\tconst isKeyPress =\r\n\t\t\t\tevent.type === 'keydown' &&\r\n\t\t\t\t( event.keyCode === UP ||\r\n\t\t\t\t\tevent.keyCode === DOWN ||\r\n\t\t\t\t\tevent.keyCode === HOME ||\r\n\t\t\t\t\tevent.keyCode === END );\r\n\r\n\t\t\t// Handle clicking on a block when no blocks are selected, and return early.\r\n\t\t\tif (\r\n\t\t\t\t! isKeyPress &&\r\n\t\t\t\t! hasSelectedBlock() &&\r\n\t\t\t\t! hasMultiSelection()\r\n\t\t\t) {\r\n\t\t\t\tselectBlock( clientId, null );\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst selectedBlocks = getSelectedBlockClientIds();\r\n\t\t\tconst clientIdWithParents = [\r\n\t\t\t\t...getBlockParents( clientId ),\r\n\t\t\t\tclientId,\r\n\t\t\t];\r\n\r\n\t\t\tif (\r\n\t\t\t\tisOnlyDeselection ||\r\n\t\t\t\t( isKeyPress &&\r\n\t\t\t\t\t! selectedBlocks.some( ( blockId ) =>\r\n\t\t\t\t\t\tclientIdWithParents.includes( blockId )\r\n\t\t\t\t\t) )\r\n\t\t\t) {\r\n\t\t\t\t// Ensure that shift-selecting blocks via the keyboard only\r\n\t\t\t\t// expands the current selection if focusing over already\r\n\t\t\t\t// selected blocks. Otherwise, clear the selection so that\r\n\t\t\t\t// a user can create a new selection entirely by keyboard.\r\n\t\t\t\tawait clearSelectedBlock();\r\n\t\t\t}\r\n\r\n\t\t\t// Update selection, if not only clearing the selection.\r\n\t\t\tif ( ! isOnlyDeselection ) {\r\n\t\t\t\tlet startTarget = getBlockSelectionStart();\r\n\t\t\t\tlet endTarget = clientId;\r\n\r\n\t\t\t\t// Handle keyboard behavior for selecting multiple blocks.\r\n\t\t\t\tif ( isKeyPress ) {\r\n\t\t\t\t\tif ( ! hasSelectedBlock() && ! hasMultiSelection() ) {\r\n\t\t\t\t\t\t// Set the starting point of the selection to the currently\r\n\t\t\t\t\t\t// focused block, if there are no blocks currently selected.\r\n\t\t\t\t\t\t// This ensures that as the selection is expanded or contracted,\r\n\t\t\t\t\t\t// the starting point of the selection is anchored to that block.\r\n\t\t\t\t\t\tstartTarget = clientId;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( destinationClientId ) {\r\n\t\t\t\t\t\t// If the user presses UP or DOWN, we want to ensure that the block they're\r\n\t\t\t\t\t\t// moving to is the target for selection, and not the currently focused one.\r\n\t\t\t\t\t\tendTarget = destinationClientId;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst startParents = getBlockParents( startTarget );\r\n\t\t\t\tconst endParents = getBlockParents( endTarget );\r\n\r\n\t\t\t\tconst { start, end } = getCommonDepthClientIds(\r\n\t\t\t\t\tstartTarget,\r\n\t\t\t\t\tendTarget,\r\n\t\t\t\t\tstartParents,\r\n\t\t\t\t\tendParents\r\n\t\t\t\t);\r\n\t\t\t\tawait multiSelect( start, end, null );\r\n\t\t\t}\r\n\r\n\t\t\t// Announce deselected block, or number of deselected blocks if\r\n\t\t\t// the total number of blocks deselected is greater than one.\r\n\t\t\tconst updatedSelectedBlocks = getSelectedBlockClientIds();\r\n\r\n\t\t\t// If the selection is greater than 1 and the Home or End keys\r\n\t\t\t// were used to generate the selection, then skip announcing the\r\n\t\t\t// deselected blocks.\r\n\t\t\tif (\r\n\t\t\t\t( event.keyCode === HOME || event.keyCode === END ) &&\r\n\t\t\t\tupdatedSelectedBlocks.length > 1\r\n\t\t\t) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst selectionDiff = selectedBlocks.filter(\r\n\t\t\t\t( blockId ) => ! updatedSelectedBlocks.includes( blockId )\r\n\t\t\t);\r\n\r\n\t\t\tlet label;\r\n\t\t\tif ( selectionDiff.length === 1 ) {\r\n\t\t\t\tconst title = getBlockType(\r\n\t\t\t\t\tgetBlockName( selectionDiff[ 0 ] )\r\n\t\t\t\t)?.title;\r\n\t\t\t\tif ( title ) {\r\n\t\t\t\t\tlabel = sprintf(\r\n\t\t\t\t\t\t/* translators: %s: block name */\r\n\t\t\t\t\t\t__( '%s deselected.' ),\r\n\t\t\t\t\t\ttitle\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t} else if ( selectionDiff.length > 1 ) {\r\n\t\t\t\tlabel = sprintf(\r\n\t\t\t\t\t/* translators: %s: number of deselected blocks */\r\n\t\t\t\t\t__( '%s blocks deselected.' ),\r\n\t\t\t\t\tselectionDiff.length\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\tif ( label ) {\r\n\t\t\t\tspeak( label, 'assertive' );\r\n\t\t\t}\r\n\t\t},\r\n\t\t[\r\n\t\t\tclearSelectedBlock,\r\n\t\t\tgetBlockName,\r\n\t\t\tgetBlockType,\r\n\t\t\tgetBlockParents,\r\n\t\t\tgetBlockSelectionStart,\r\n\t\t\tgetSelectedBlockClientIds,\r\n\t\t\thasMultiSelection,\r\n\t\t\thasSelectedBlock,\r\n\t\t\tmultiSelect,\r\n\t\t\tselectBlock,\r\n\t\t]\r\n\t);\r\n\r\n\treturn {\r\n\t\tupdateBlockSelection,\r\n\t};\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useEffect, useState } from '@wordpress/element';\r\nimport { useSelect } from '@wordpress/data';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as blockEditorStore } from '../../store';\r\n\r\nexport default function useListViewExpandSelectedItem( {\r\n\tfirstSelectedBlockClientId,\r\n\tsetExpandedState,\r\n} ) {\r\n\tconst [ selectedTreeId, setSelectedTreeId ] = useState( null );\r\n\tconst { selectedBlockParentClientIds } = useSelect(\r\n\t\t( select ) => {\r\n\t\t\tconst { getBlockParents } = select( blockEditorStore );\r\n\t\t\treturn {\r\n\t\t\t\tselectedBlockParentClientIds: getBlockParents(\r\n\t\t\t\t\tfirstSelectedBlockClientId,\r\n\t\t\t\t\tfalse\r\n\t\t\t\t),\r\n\t\t\t};\r\n\t\t},\r\n\t\t[ firstSelectedBlockClientId ]\r\n\t);\r\n\r\n\t// Expand tree when a block is selected.\r\n\tuseEffect( () => {\r\n\t\t// If the selectedTreeId is the same as the selected block,\r\n\t\t// it means that the block was selected using the block list tree.\r\n\t\tif ( selectedTreeId === firstSelectedBlockClientId ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// If the selected block has parents, get the top-level parent.\r\n\t\tif ( selectedBlockParentClientIds?.length ) {\r\n\t\t\t// If the selected block has parents,\r\n\t\t\t// expand the tree branch.\r\n\t\t\tsetExpandedState( {\r\n\t\t\t\ttype: 'expand',\r\n\t\t\t\tclientIds: selectedBlockParentClientIds,\r\n\t\t\t} );\r\n\t\t}\r\n\t}, [\r\n\t\tfirstSelectedBlockClientId,\r\n\t\tselectedBlockParentClientIds,\r\n\t\tselectedTreeId,\r\n\t\tsetExpandedState,\r\n\t] );\r\n\r\n\treturn {\r\n\t\tsetSelectedTreeId,\r\n\t};\r\n}\r\n","/**\n * WordPress dependencies\n */\nimport { useDispatch, useRegistry, useSelect } from '@wordpress/data';\nimport { useRefEffect } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport { useNotifyCopy } from '../../utils/use-notify-copy';\nimport { focusListItem } from './utils';\nimport { getPasteBlocks, setClipboardBlocks } from '../writing-flow/utils';\n\n// This hook borrows from useClipboardHandler in ../writing-flow/use-clipboard-handler.js\n// and adds behaviour for the list view, while skipping partial selection.\nexport default function useClipboardHandler( { selectBlock } ) {\n\tconst registry = useRegistry();\n\tconst {\n\t\tgetBlockOrder,\n\t\tgetBlockRootClientId,\n\t\tgetBlocksByClientId,\n\t\tgetPreviousBlockClientId,\n\t\tgetSelectedBlockClientIds,\n\t\tgetSettings,\n\t\tcanInsertBlockType,\n\t\tcanRemoveBlocks,\n\t} = useSelect( blockEditorStore );\n\tconst { flashBlock, removeBlocks, replaceBlocks, insertBlocks } =\n\t\tuseDispatch( blockEditorStore );\n\tconst notifyCopy = useNotifyCopy();\n\n\treturn useRefEffect( ( node ) => {\n\t\tfunction updateFocusAndSelection( focusClientId, shouldSelectBlock ) {\n\t\t\tif ( shouldSelectBlock ) {\n\t\t\t\tselectBlock( undefined, focusClientId, null, null );\n\t\t\t}\n\n\t\t\tfocusListItem( focusClientId, node );\n\t\t}\n\n\t\t// Determine which blocks to update:\n\t\t// If the current (focused) block is part of the block selection, use the whole selection.\n\t\t// If the focused block is not part of the block selection, only update the focused block.\n\t\tfunction getBlocksToUpdate( clientId ) {\n\t\t\tconst selectedBlockClientIds = getSelectedBlockClientIds();\n\t\t\tconst isUpdatingSelectedBlocks =\n\t\t\t\tselectedBlockClientIds.includes( clientId );\n\t\t\tconst firstBlockClientId = isUpdatingSelectedBlocks\n\t\t\t\t? selectedBlockClientIds[ 0 ]\n\t\t\t\t: clientId;\n\t\t\tconst firstBlockRootClientId =\n\t\t\t\tgetBlockRootClientId( firstBlockClientId );\n\n\t\t\tconst blocksToUpdate = isUpdatingSelectedBlocks\n\t\t\t\t? selectedBlockClientIds\n\t\t\t\t: [ clientId ];\n\n\t\t\treturn {\n\t\t\t\tblocksToUpdate,\n\t\t\t\tfirstBlockClientId,\n\t\t\t\tfirstBlockRootClientId,\n\t\t\t\toriginallySelectedBlockClientIds: selectedBlockClientIds,\n\t\t\t};\n\t\t}\n\n\t\tfunction handler( event ) {\n\t\t\tif ( event.defaultPrevented ) {\n\t\t\t\t// This was possibly already handled in rich-text/use-paste-handler.js.\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Only handle events that occur within the list view.\n\t\t\tif ( ! node.contains( event.target.ownerDocument.activeElement ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Retrieve the block clientId associated with the focused list view row.\n\t\t\t// This enables applying copy / cut / paste behavior to the focused block,\n\t\t\t// rather than just the blocks that are currently selected.\n\t\t\tconst listViewRow =\n\t\t\t\tevent.target.ownerDocument.activeElement?.closest(\n\t\t\t\t\t'[role=row]'\n\t\t\t\t);\n\t\t\tconst clientId = listViewRow?.dataset?.block;\n\t\t\tif ( ! clientId ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst {\n\t\t\t\tblocksToUpdate: selectedBlockClientIds,\n\t\t\t\tfirstBlockClientId,\n\t\t\t\tfirstBlockRootClientId,\n\t\t\t\toriginallySelectedBlockClientIds,\n\t\t\t} = getBlocksToUpdate( clientId );\n\n\t\t\tif ( selectedBlockClientIds.length === 0 ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tevent.preventDefault();\n\n\t\t\tif ( event.type === 'copy' || event.type === 'cut' ) {\n\t\t\t\tif ( selectedBlockClientIds.length === 1 ) {\n\t\t\t\t\tflashBlock( selectedBlockClientIds[ 0 ] );\n\t\t\t\t}\n\n\t\t\t\tnotifyCopy( event.type, selectedBlockClientIds );\n\t\t\t\tconst blocks = getBlocksByClientId( selectedBlockClientIds );\n\t\t\t\tsetClipboardBlocks( event, blocks, registry );\n\t\t\t}\n\n\t\t\tif ( event.type === 'cut' ) {\n\t\t\t\t// Don't update the selection if the blocks cannot be deleted.\n\t\t\t\tif (\n\t\t\t\t\t! canRemoveBlocks(\n\t\t\t\t\t\tselectedBlockClientIds,\n\t\t\t\t\t\tfirstBlockRootClientId\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tlet blockToFocus =\n\t\t\t\t\tgetPreviousBlockClientId( firstBlockClientId ) ??\n\t\t\t\t\t// If the previous block is not found (when the first block is deleted),\n\t\t\t\t\t// fallback to focus the parent block.\n\t\t\t\t\tfirstBlockRootClientId;\n\n\t\t\t\t// Remove blocks, but don't update selection, and it will be handled below.\n\t\t\t\tremoveBlocks( selectedBlockClientIds, false );\n\n\t\t\t\t// Update the selection if the original selection has been removed.\n\t\t\t\tconst shouldUpdateSelection =\n\t\t\t\t\toriginallySelectedBlockClientIds.length > 0 &&\n\t\t\t\t\tgetSelectedBlockClientIds().length === 0;\n\n\t\t\t\t// If there's no previous block nor parent block, focus the first block.\n\t\t\t\tif ( ! blockToFocus ) {\n\t\t\t\t\tblockToFocus = getBlockOrder()[ 0 ];\n\t\t\t\t}\n\n\t\t\t\tupdateFocusAndSelection( blockToFocus, shouldUpdateSelection );\n\t\t\t} else if ( event.type === 'paste' ) {\n\t\t\t\tconst {\n\t\t\t\t\t__experimentalCanUserUseUnfilteredHTML:\n\t\t\t\t\t\tcanUserUseUnfilteredHTML,\n\t\t\t\t} = getSettings();\n\t\t\t\tconst blocks = getPasteBlocks(\n\t\t\t\t\tevent,\n\t\t\t\t\tcanUserUseUnfilteredHTML\n\t\t\t\t);\n\n\t\t\t\tif ( selectedBlockClientIds.length === 1 ) {\n\t\t\t\t\tconst [ selectedBlockClientId ] = selectedBlockClientIds;\n\n\t\t\t\t\t// If a single block is focused, and the blocks to be posted can\n\t\t\t\t\t// be inserted within the block, then append the pasted blocks\n\t\t\t\t\t// within the focused block. For example, if you have copied a paragraph\n\t\t\t\t\t// block and paste it within a single Group block, this will append\n\t\t\t\t\t// the paragraph block within the Group block.\n\t\t\t\t\tif (\n\t\t\t\t\t\tblocks.every( ( block ) =>\n\t\t\t\t\t\t\tcanInsertBlockType(\n\t\t\t\t\t\t\t\tblock.name,\n\t\t\t\t\t\t\t\tselectedBlockClientId\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t\t) {\n\t\t\t\t\t\tinsertBlocks(\n\t\t\t\t\t\t\tblocks,\n\t\t\t\t\t\t\tundefined,\n\t\t\t\t\t\t\tselectedBlockClientId\n\t\t\t\t\t\t);\n\t\t\t\t\t\tupdateFocusAndSelection( blocks[ 0 ]?.clientId, false );\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treplaceBlocks(\n\t\t\t\t\tselectedBlockClientIds,\n\t\t\t\t\tblocks,\n\t\t\t\t\tblocks.length - 1,\n\t\t\t\t\t-1\n\t\t\t\t);\n\t\t\t\tupdateFocusAndSelection( blocks[ 0 ]?.clientId, false );\n\t\t\t}\n\t\t}\n\n\t\tnode.ownerDocument.addEventListener( 'copy', handler );\n\t\tnode.ownerDocument.addEventListener( 'cut', handler );\n\t\tnode.ownerDocument.addEventListener( 'paste', handler );\n\n\t\treturn () => {\n\t\t\tnode.ownerDocument.removeEventListener( 'copy', handler );\n\t\t\tnode.ownerDocument.removeEventListener( 'cut', handler );\n\t\t\tnode.ownerDocument.removeEventListener( 'paste', handler );\n\t\t};\n\t}, [] );\n}\n","/**\n * WordPress dependencies\n */\nimport { useEffect } from '@wordpress/element';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport { unlock } from '../../lock-unlock';\n\nexport default function useListViewCollapseItems( { collapseAll, expand } ) {\n\tconst { expandedBlock, getBlockParents } = useSelect( ( select ) => {\n\t\tconst { getBlockParents: _getBlockParents, getExpandedBlock } = unlock(\n\t\t\tselect( blockEditorStore )\n\t\t);\n\t\treturn {\n\t\t\texpandedBlock: getExpandedBlock(),\n\t\t\tgetBlockParents: _getBlockParents,\n\t\t};\n\t}, [] );\n\n\t// Collapse all but the specified block when the expanded block client Id changes.\n\tuseEffect( () => {\n\t\tif ( expandedBlock ) {\n\t\t\tconst blockParents = getBlockParents( expandedBlock, false );\n\t\t\t// Collapse all blocks and expand the block's parents.\n\t\t\tcollapseAll();\n\t\t\texpand( blockParents );\n\t\t}\n\t}, [ collapseAll, expand, expandedBlock, getBlockParents ] );\n}\n","/**\r\n * WordPress dependencies\r\n */\r\nimport deprecated from '@wordpress/deprecated';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { Button, Dropdown } from '@wordpress/components';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { useSelect } from '@wordpress/data';\r\nimport { forwardRef } from '@wordpress/element';\r\nimport { listView } from '@wordpress/icons';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport ListView from '../list-view';\r\nimport { store as blockEditorStore } from '../../store';\r\n\r\nfunction BlockNavigationDropdownToggle( {\r\n\tisEnabled,\r\n\tonToggle,\r\n\tisOpen,\r\n\tinnerRef,\r\n\t...props\r\n} ) {\r\n\treturn (\r\n\t\t<Button\r\n\t\t\t{ ...props }\r\n\t\t\tref={ innerRef }\r\n\t\t\ticon={ listView }\r\n\t\t\taria-expanded={ isOpen }\r\n\t\t\taria-haspopup=\"true\"\r\n\t\t\tonClick={ isEnabled ? onToggle : undefined }\r\n\t\t\t/* translators: button label text should, if possible, be under 16 characters. */\r\n\t\t\tlabel={ __( 'List view' ) }\r\n\t\t\tclassName=\"block-editor-block-navigation\"\r\n\t\t\taria-disabled={ ! isEnabled }\r\n\t\t/>\r\n\t);\r\n}\r\n\r\nfunction BlockNavigationDropdown( { isDisabled, ...props }, ref ) {\r\n\tdeprecated( 'wp.blockEditor.BlockNavigationDropdown', {\r\n\t\tsince: '6.1',\r\n\t\talternative: 'wp.components.Dropdown and wp.blockEditor.ListView',\r\n\t} );\r\n\r\n\tconst hasBlocks = useSelect(\r\n\t\t( select ) => !! select( blockEditorStore ).getBlockCount(),\r\n\t\t[]\r\n\t);\r\n\tconst isEnabled = hasBlocks && ! isDisabled;\r\n\r\n\treturn (\r\n\t\t<Dropdown\r\n\t\t\tcontentClassName=\"block-editor-block-navigation__popover\"\r\n\t\t\tpopoverProps={ { placement: 'bottom-start' } }\r\n\t\t\trenderToggle={ ( { isOpen, onToggle } ) => (\r\n\t\t\t\t<BlockNavigationDropdownToggle\r\n\t\t\t\t\t{ ...props }\r\n\t\t\t\t\tinnerRef={ ref }\r\n\t\t\t\t\tisOpen={ isOpen }\r\n\t\t\t\t\tonToggle={ onToggle }\r\n\t\t\t\t\tisEnabled={ isEnabled }\r\n\t\t\t\t/>\r\n\t\t\t) }\r\n\t\t\trenderContent={ () => (\r\n\t\t\t\t<div className=\"block-editor-block-navigation__container\">\r\n\t\t\t\t\t<p className=\"block-editor-block-navigation__label\">\r\n\t\t\t\t\t\t{ __( 'List view' ) }\r\n\t\t\t\t\t</p>\r\n\r\n\t\t\t\t\t<ListView />\r\n\t\t\t\t</div>\r\n\t\t\t) }\r\n\t\t/>\r\n\t);\r\n}\r\n\r\nexport default forwardRef( BlockNavigationDropdown );\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { getBlockType } from '@wordpress/blocks';\r\nimport { useMemo } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport InserterPreviewPanel from '../inserter/preview-panel';\r\nimport { replaceActiveStyle } from './utils';\r\n\r\nexport default function BlockStylesPreviewPanel( {\r\n\tgenericPreviewBlock,\r\n\tstyle,\r\n\tclassName,\r\n\tactiveStyle,\r\n} ) {\r\n\tconst example = getBlockType( genericPreviewBlock.name )?.example;\r\n\tconst styleClassName = replaceActiveStyle( className, activeStyle, style );\r\n\tconst previewBlocks = useMemo( () => {\r\n\t\treturn {\r\n\t\t\t...genericPreviewBlock,\r\n\t\t\ttitle: style.label || style.name,\r\n\t\t\tdescription: style.description,\r\n\t\t\tinitialAttributes: {\r\n\t\t\t\t...genericPreviewBlock.attributes,\r\n\t\t\t\tclassName:\r\n\t\t\t\t\tstyleClassName +\r\n\t\t\t\t\t' block-editor-block-styles__block-preview-container',\r\n\t\t\t},\r\n\t\t\texample,\r\n\t\t};\r\n\t}, [ genericPreviewBlock, styleClassName ] );\r\n\r\n\treturn <InserterPreviewPanel item={ previewBlocks } />;\r\n}\r\n","/**\r\n * External dependencies\r\n */\r\nimport classnames from 'classnames';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { useState } from '@wordpress/element';\r\nimport { debounce, useViewportMatch } from '@wordpress/compose';\r\nimport {\r\n\tButton,\r\n\t__experimentalTruncate as Truncate,\r\n\tPopover,\r\n} from '@wordpress/components';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport BlockStylesPreviewPanel from './preview-panel';\r\nimport useStylesForBlocks from './use-styles-for-block';\r\n\r\nconst noop = () => {};\r\n\r\n// Block Styles component for the Settings Sidebar.\r\nfunction BlockStyles( { clientId, onSwitch = noop, onHoverClassName = noop } ) {\r\n\tconst {\r\n\t\tonSelect,\r\n\t\tstylesToRender,\r\n\t\tactiveStyle,\r\n\t\tgenericPreviewBlock,\r\n\t\tclassName: previewClassName,\r\n\t} = useStylesForBlocks( {\r\n\t\tclientId,\r\n\t\tonSwitch,\r\n\t} );\r\n\tconst [ hoveredStyle, setHoveredStyle ] = useState( null );\r\n\tconst isMobileViewport = useViewportMatch( 'medium', '<' );\r\n\r\n\tif ( ! stylesToRender || stylesToRender.length === 0 ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tconst debouncedSetHoveredStyle = debounce( setHoveredStyle, 250 );\r\n\r\n\tconst onSelectStylePreview = ( style ) => {\r\n\t\tonSelect( style );\r\n\t\tonHoverClassName( null );\r\n\t\tsetHoveredStyle( null );\r\n\t\tdebouncedSetHoveredStyle.cancel();\r\n\t};\r\n\r\n\tconst styleItemHandler = ( item ) => {\r\n\t\tif ( hoveredStyle === item ) {\r\n\t\t\tdebouncedSetHoveredStyle.cancel();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tdebouncedSetHoveredStyle( item );\r\n\t\tonHoverClassName( item?.name ?? null );\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className=\"block-editor-block-styles\">\r\n\t\t\t<div className=\"block-editor-block-styles__variants\">\r\n\t\t\t\t{ stylesToRender.map( ( style ) => {\r\n\t\t\t\t\tconst buttonText = style.label || style.name;\r\n\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t__next40pxDefaultSize\r\n\t\t\t\t\t\t\tclassName={ classnames(\r\n\t\t\t\t\t\t\t\t'block-editor-block-styles__item',\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t'is-active':\r\n\t\t\t\t\t\t\t\t\t\tactiveStyle.name === style.name,\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\tkey={ style.name }\r\n\t\t\t\t\t\t\tvariant=\"secondary\"\r\n\t\t\t\t\t\t\tlabel={ buttonText }\r\n\t\t\t\t\t\t\tonMouseEnter={ () => styleItemHandler( style ) }\r\n\t\t\t\t\t\t\tonFocus={ () => styleItemHandler( style ) }\r\n\t\t\t\t\t\t\tonMouseLeave={ () => styleItemHandler( null ) }\r\n\t\t\t\t\t\t\tonBlur={ () => styleItemHandler( null ) }\r\n\t\t\t\t\t\t\tonClick={ () => onSelectStylePreview( style ) }\r\n\t\t\t\t\t\t\taria-current={ activeStyle.name === style.name }\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Truncate\r\n\t\t\t\t\t\t\t\tnumberOfLines={ 1 }\r\n\t\t\t\t\t\t\t\tclassName=\"block-editor-block-styles__item-text\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{ buttonText }\r\n\t\t\t\t\t\t\t</Truncate>\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t);\r\n\t\t\t\t} ) }\r\n\t\t\t</div>\r\n\t\t\t{ hoveredStyle && ! isMobileViewport && (\r\n\t\t\t\t<Popover\r\n\t\t\t\t\tplacement=\"left-start\"\r\n\t\t\t\t\toffset={ 34 }\r\n\t\t\t\t\tfocusOnMount={ false }\r\n\t\t\t\t>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName=\"block-editor-block-styles__preview-panel\"\r\n\t\t\t\t\t\tonMouseLeave={ () => styleItemHandler( null ) }\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<BlockStylesPreviewPanel\r\n\t\t\t\t\t\t\tactiveStyle={ activeStyle }\r\n\t\t\t\t\t\t\tclassName={ previewClassName }\r\n\t\t\t\t\t\t\tgenericPreviewBlock={ genericPreviewBlock }\r\n\t\t\t\t\t\t\tstyle={ hoveredStyle }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Popover>\r\n\t\t\t) }\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default BlockStyles;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\theadingLevel1,\r\n\theadingLevel2,\r\n\theadingLevel3,\r\n\theadingLevel4,\r\n\theadingLevel5,\r\n\theadingLevel6,\r\n\tparagraph,\r\n} from '@wordpress/icons';\r\nimport { Icon } from '@wordpress/components';\r\n\r\n/** @typedef {import('react').ComponentType} ComponentType */\r\n\r\n/**\r\n * HeadingLevelIcon props.\r\n *\r\n * @typedef WPHeadingLevelIconProps\r\n *\r\n * @property {number} level The heading level to show an icon for.\r\n */\r\n\r\nconst LEVEL_TO_PATH = {\r\n\t0: paragraph,\r\n\t1: headingLevel1,\r\n\t2: headingLevel2,\r\n\t3: headingLevel3,\r\n\t4: headingLevel4,\r\n\t5: headingLevel5,\r\n\t6: headingLevel6,\r\n};\r\n\r\n/**\r\n * Heading level icon.\r\n *\r\n * @param {WPHeadingLevelIconProps} props Component props.\r\n *\r\n * @return {?ComponentType} The icon.\r\n */\r\nexport default function HeadingLevelIcon( { level } ) {\r\n\tif ( LEVEL_TO_PATH[ level ] ) {\r\n\t\treturn <Icon icon={ LEVEL_TO_PATH[ level ] } />;\r\n\t}\r\n\r\n\treturn null;\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst paragraph = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"m9.99609 14v-.2251l.00391.0001v6.225h1.5v-14.5h2.5v14.5h1.5v-14.5h3v-1.5h-8.50391c-2.76142 0-5 2.23858-5 5 0 2.7614 2.23858 5 5 5z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default paragraph;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst headingLevel1 = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M17.6 7c-.6.9-1.5 1.7-2.6 2v1h2v7h2V7h-1.4zM11 11H7V7H5v10h2v-4h4v4h2V7h-2v4z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default headingLevel1;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst headingLevel2 = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M9 11.1H5v-4H3v10h2v-4h4v4h2v-10H9v4zm8 4c.5-.4.6-.6 1.1-1.1.4-.4.8-.8 1.2-1.3.3-.4.6-.8.9-1.3.2-.4.3-.8.3-1.3 0-.4-.1-.9-.3-1.3-.2-.4-.4-.7-.8-1-.3-.3-.7-.5-1.2-.6-.5-.2-1-.2-1.5-.2-.4 0-.7 0-1.1.1-.3.1-.7.2-1 .3-.3.1-.6.3-.9.5-.3.2-.6.4-.8.7l1.2 1.2c.3-.3.6-.5 1-.7.4-.2.7-.3 1.2-.3s.9.1 1.3.4c.3.3.5.7.5 1.1 0 .4-.1.8-.4 1.1-.3.5-.6.9-1 1.2-.4.4-1 .9-1.6 1.4-.6.5-1.4 1.1-2.2 1.6v1.5h8v-2H17z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default headingLevel2;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst headingLevel3 = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M9 11H5V7H3v10h2v-4h4v4h2V7H9v4zm11.3 1.7c-.4-.4-1-.7-1.6-.8v-.1c.6-.2 1.1-.5 1.5-.9.3-.4.5-.8.5-1.3 0-.4-.1-.8-.3-1.1-.2-.3-.5-.6-.8-.8-.4-.2-.8-.4-1.2-.5-.6-.1-1.1-.2-1.6-.2-.6 0-1.3.1-1.8.3s-1.1.5-1.6.9l1.2 1.4c.4-.2.7-.4 1.1-.6.3-.2.7-.3 1.1-.3.4 0 .8.1 1.1.3.3.2.4.5.4.8 0 .4-.2.7-.6.9-.7.3-1.5.5-2.2.4v1.6c.5 0 1 0 1.5.1.3.1.7.2 1 .3.2.1.4.2.5.4s.1.4.1.6c0 .3-.2.7-.5.8-.4.2-.9.3-1.4.3s-1-.1-1.4-.3c-.4-.2-.8-.4-1.2-.7L13 15.6c.5.4 1 .8 1.6 1 .7.3 1.5.4 2.3.4.6 0 1.1-.1 1.6-.2.4-.1.9-.2 1.3-.5.4-.2.7-.5.9-.9.2-.4.3-.8.3-1.2 0-.6-.3-1.1-.7-1.5z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default headingLevel3;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst headingLevel4 = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M20 13V7h-3l-4 6v2h5v2h2v-2h1v-2h-1zm-2 0h-2.8L18 9v4zm-9-2H5V7H3v10h2v-4h4v4h2V7H9v4z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default headingLevel4;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst headingLevel5 = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M9 11H5V7H3v10h2v-4h4v4h2V7H9v4zm11.7 1.2c-.2-.3-.5-.7-.8-.9-.3-.3-.7-.5-1.1-.6-.5-.1-.9-.2-1.4-.2-.2 0-.5.1-.7.1-.2.1-.5.1-.7.2l.1-1.9h4.3V7H14l-.3 5 1 .6.5-.2.4-.1c.1-.1.3-.1.4-.1h.5c.5 0 1 .1 1.4.4.4.2.6.7.6 1.1 0 .4-.2.8-.6 1.1-.4.3-.9.4-1.4.4-.4 0-.9-.1-1.3-.3-.4-.2-.7-.4-1.1-.7 0 0-1.1 1.4-1 1.5.5.4 1 .8 1.6 1 .7.3 1.5.4 2.3.4.5 0 1-.1 1.5-.3s.9-.4 1.3-.7c.4-.3.7-.7.9-1.1s.3-.9.3-1.4-.1-1-.3-1.4z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default headingLevel5;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst headingLevel6 = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M20.7 12.4c-.2-.3-.4-.6-.7-.9s-.6-.5-1-.6c-.4-.2-.8-.2-1.2-.2-.5 0-.9.1-1.3.3s-.8.5-1.2.8c0-.5 0-.9.2-1.4l.6-.9c.2-.2.5-.4.8-.5.6-.2 1.3-.2 1.9 0 .3.1.6.3.8.5 0 0 1.3-1.3 1.3-1.4-.4-.3-.9-.6-1.4-.8-.6-.2-1.3-.3-2-.3-.6 0-1.1.1-1.7.4-.5.2-1 .5-1.4.9-.4.4-.8 1-1 1.6-.3.7-.4 1.5-.4 2.3s.1 1.5.3 2.1c.2.6.6 1.1 1 1.5.4.4.9.7 1.4.9 1 .3 2 .3 3 0 .4-.1.8-.3 1.2-.6.3-.3.6-.6.8-1 .2-.5.3-.9.3-1.4s-.1-.9-.3-1.3zm-2 2.1c-.1.2-.3.4-.4.5-.1.1-.3.2-.5.2-.2.1-.4.1-.6.1-.2.1-.5 0-.7-.1-.2 0-.3-.2-.5-.3-.1-.2-.3-.4-.4-.6-.2-.3-.3-.7-.3-1 .3-.3.6-.5 1-.7.3-.1.7-.2 1-.2.4 0 .8.1 1.1.3.3.3.4.7.4 1.1 0 .2 0 .5-.1.7zM9 11H5V7H3v10h2v-4h4v4h2V7H9v4z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default headingLevel6;\r\n","/**\n * WordPress dependencies\n */\nimport { ToolbarDropdownMenu } from '@wordpress/components';\nimport { __, sprintf } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport HeadingLevelIcon from './heading-level-icon';\n\nconst HEADING_LEVELS = [ 1, 2, 3, 4, 5, 6 ];\n\nconst POPOVER_PROPS = {\n\tclassName: 'block-library-heading-level-dropdown',\n};\n\n/** @typedef {import('react').ComponentType} ComponentType */\n\n/**\n * HeadingLevelDropdown props.\n *\n * @typedef WPHeadingLevelDropdownProps\n *\n * @property {number}     value    The chosen heading level.\n * @property {number[]}   options  An array of supported heading levels.\n * @property {()=>number} onChange Function called with\n *                                 the selected value changes.\n */\n\n/**\n * Dropdown for selecting a heading level (1 through 6) or paragraph (0).\n *\n * @param {WPHeadingLevelDropdownProps} props Component props.\n *\n * @return {ComponentType} The toolbar.\n */\nexport default function HeadingLevelDropdown( {\n\toptions = HEADING_LEVELS,\n\tvalue,\n\tonChange,\n} ) {\n\treturn (\n\t\t<ToolbarDropdownMenu\n\t\t\tpopoverProps={ POPOVER_PROPS }\n\t\t\ticon={ <HeadingLevelIcon level={ value } /> }\n\t\t\tlabel={ __( 'Change level' ) }\n\t\t\tcontrols={ options.map( ( targetLevel ) => {\n\t\t\t\tconst isActive = targetLevel === value;\n\t\t\t\treturn {\n\t\t\t\t\ticon: <HeadingLevelIcon level={ targetLevel } />,\n\t\t\t\t\ttitle:\n\t\t\t\t\t\ttargetLevel === 0\n\t\t\t\t\t\t\t? __( 'Paragraph' )\n\t\t\t\t\t\t\t: sprintf(\n\t\t\t\t\t\t\t\t\t// translators: %d: heading level e.g: \"1\", \"2\", \"3\"\n\t\t\t\t\t\t\t\t\t__( 'Heading %d' ),\n\t\t\t\t\t\t\t\t\ttargetLevel\n\t\t\t\t\t\t\t  ),\n\t\t\t\t\tisActive,\n\t\t\t\t\tonClick() {\n\t\t\t\t\t\tonChange( targetLevel );\n\t\t\t\t\t},\n\t\t\t\t\trole: 'menuitemradio',\n\t\t\t\t};\n\t\t\t} ) }\n\t\t/>\n\t);\n}\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst layout = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M18 5.5H6a.5.5 0 00-.5.5v3h13V6a.5.5 0 00-.5-.5zm.5 5H10v8h8a.5.5 0 00.5-.5v-7.5zm-10 0h-3V18a.5.5 0 00.5.5h2.5v-8zM6 4h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default layout;\r\n","/**\r\n * External dependencies\r\n */\r\nimport classnames from 'classnames';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { __ } from '@wordpress/i18n';\r\nimport { Button, Placeholder } from '@wordpress/components';\r\nimport { layout } from '@wordpress/icons';\r\n\r\nfunction BlockVariationPicker( {\r\n\ticon = layout,\r\n\tlabel = __( 'Choose variation' ),\r\n\tinstructions = __( 'Select a variation to start with.' ),\r\n\tvariations,\r\n\tonSelect,\r\n\tallowSkip,\r\n} ) {\r\n\tconst classes = classnames( 'block-editor-block-variation-picker', {\r\n\t\t'has-many-variations': variations.length > 4,\r\n\t} );\r\n\r\n\treturn (\r\n\t\t<Placeholder\r\n\t\t\ticon={ icon }\r\n\t\t\tlabel={ label }\r\n\t\t\tinstructions={ instructions }\r\n\t\t\tclassName={ classes }\r\n\t\t>\r\n\t\t\t{ /*\r\n\t\t\t * Disable reason: The `list` ARIA role is redundant but\r\n\t\t\t * Safari+VoiceOver won't announce the list otherwise.\r\n\t\t\t */\r\n\t\t\t/* eslint-disable jsx-a11y/no-redundant-roles */ }\r\n\t\t\t<ul\r\n\t\t\t\tclassName=\"block-editor-block-variation-picker__variations\"\r\n\t\t\t\trole=\"list\"\r\n\t\t\t\taria-label={ __( 'Block variations' ) }\r\n\t\t\t>\r\n\t\t\t\t{ variations.map( ( variation ) => (\r\n\t\t\t\t\t<li key={ variation.name }>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tvariant=\"secondary\"\r\n\t\t\t\t\t\t\ticon={\r\n\t\t\t\t\t\t\t\tvariation.icon && variation.icon.src\r\n\t\t\t\t\t\t\t\t\t? variation.icon.src\r\n\t\t\t\t\t\t\t\t\t: variation.icon\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\ticonSize={ 48 }\r\n\t\t\t\t\t\t\tonClick={ () => onSelect( variation ) }\r\n\t\t\t\t\t\t\tclassName=\"block-editor-block-variation-picker__variation\"\r\n\t\t\t\t\t\t\tlabel={ variation.description || variation.title }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<span className=\"block-editor-block-variation-picker__variation-label\">\r\n\t\t\t\t\t\t\t{ variation.title }\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t) ) }\r\n\t\t\t</ul>\r\n\t\t\t{ /* eslint-enable jsx-a11y/no-redundant-roles */ }\r\n\t\t\t{ allowSkip && (\r\n\t\t\t\t<div className=\"block-editor-block-variation-picker__skip\">\r\n\t\t\t\t\t<Button variant=\"link\" onClick={ () => onSelect() }>\r\n\t\t\t\t\t\t{ __( 'Skip' ) }\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</div>\r\n\t\t\t) }\r\n\t\t</Placeholder>\r\n\t);\r\n}\r\n\r\nexport default BlockVariationPicker;\r\n","export const VIEWMODES = {\r\n\tcarousel: 'carousel',\r\n\tgrid: 'grid',\r\n};\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { __ } from '@wordpress/i18n';\r\nimport { Button } from '@wordpress/components';\r\nimport {\r\n\tchevronRight,\r\n\tchevronLeft,\r\n\tgrid,\r\n\tstretchFullWidth,\r\n} from '@wordpress/icons';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { VIEWMODES } from './constants';\r\n\r\nconst Actions = ( { onBlockPatternSelect } ) => (\r\n\t<div className=\"block-editor-block-pattern-setup__actions\">\r\n\t\t<Button variant=\"primary\" onClick={ onBlockPatternSelect }>\r\n\t\t\t{ __( 'Choose' ) }\r\n\t\t</Button>\r\n\t</div>\r\n);\r\n\r\nconst CarouselNavigation = ( {\r\n\thandlePrevious,\r\n\thandleNext,\r\n\tactiveSlide,\r\n\ttotalSlides,\r\n} ) => (\r\n\t<div className=\"block-editor-block-pattern-setup__navigation\">\r\n\t\t<Button\r\n\t\t\ticon={ chevronLeft }\r\n\t\t\tlabel={ __( 'Previous pattern' ) }\r\n\t\t\tonClick={ handlePrevious }\r\n\t\t\tdisabled={ activeSlide === 0 }\r\n\t\t\t__experimentalIsFocusable\r\n\t\t/>\r\n\t\t<Button\r\n\t\t\ticon={ chevronRight }\r\n\t\t\tlabel={ __( 'Next pattern' ) }\r\n\t\t\tonClick={ handleNext }\r\n\t\t\tdisabled={ activeSlide === totalSlides - 1 }\r\n\t\t\t__experimentalIsFocusable\r\n\t\t/>\r\n\t</div>\r\n);\r\n\r\nconst SetupToolbar = ( {\r\n\tviewMode,\r\n\tsetViewMode,\r\n\thandlePrevious,\r\n\thandleNext,\r\n\tactiveSlide,\r\n\ttotalSlides,\r\n\tonBlockPatternSelect,\r\n} ) => {\r\n\tconst isCarouselView = viewMode === VIEWMODES.carousel;\r\n\tconst displayControls = (\r\n\t\t<div className=\"block-editor-block-pattern-setup__display-controls\">\r\n\t\t\t<Button\r\n\t\t\t\ticon={ stretchFullWidth }\r\n\t\t\t\tlabel={ __( 'Carousel view' ) }\r\n\t\t\t\tonClick={ () => setViewMode( VIEWMODES.carousel ) }\r\n\t\t\t\tisPressed={ isCarouselView }\r\n\t\t\t/>\r\n\t\t\t<Button\r\n\t\t\t\ticon={ grid }\r\n\t\t\t\tlabel={ __( 'Grid view' ) }\r\n\t\t\t\tonClick={ () => setViewMode( VIEWMODES.grid ) }\r\n\t\t\t\tisPressed={ viewMode === VIEWMODES.grid }\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n\treturn (\r\n\t\t<div className=\"block-editor-block-pattern-setup__toolbar\">\r\n\t\t\t{ isCarouselView && (\r\n\t\t\t\t<CarouselNavigation\r\n\t\t\t\t\thandlePrevious={ handlePrevious }\r\n\t\t\t\t\thandleNext={ handleNext }\r\n\t\t\t\t\tactiveSlide={ activeSlide }\r\n\t\t\t\t\ttotalSlides={ totalSlides }\r\n\t\t\t\t/>\r\n\t\t\t) }\r\n\t\t\t{ displayControls }\r\n\t\t\t{ isCarouselView && (\r\n\t\t\t\t<Actions onBlockPatternSelect={ onBlockPatternSelect } />\r\n\t\t\t) }\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default SetupToolbar;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useDispatch } from '@wordpress/data';\r\nimport { cloneBlock } from '@wordpress/blocks';\r\nimport {\r\n\tVisuallyHidden,\r\n\tprivateApis as componentsPrivateApis,\r\n} from '@wordpress/components';\r\n\r\nimport { useState } from '@wordpress/element';\r\nimport { useInstanceId } from '@wordpress/compose';\r\nimport { __ } from '@wordpress/i18n';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as blockEditorStore } from '../../store';\r\nimport BlockPreview from '../block-preview';\r\nimport SetupToolbar from './setup-toolbar';\r\nimport usePatternsSetup from './use-patterns-setup';\r\nimport { VIEWMODES } from './constants';\r\nimport { unlock } from '../../lock-unlock';\r\n\r\nconst {\r\n\tCompositeV2: Composite,\r\n\tCompositeItemV2: CompositeItem,\r\n\tuseCompositeStoreV2: useCompositeStore,\r\n} = unlock( componentsPrivateApis );\r\n\r\nconst SetupContent = ( {\r\n\tviewMode,\r\n\tactiveSlide,\r\n\tpatterns,\r\n\tonBlockPatternSelect,\r\n\tshowTitles,\r\n} ) => {\r\n\tconst compositeStore = useCompositeStore();\r\n\tconst containerClass = 'block-editor-block-pattern-setup__container';\r\n\r\n\tif ( viewMode === VIEWMODES.carousel ) {\r\n\t\tconst slideClass = new Map( [\r\n\t\t\t[ activeSlide, 'active-slide' ],\r\n\t\t\t[ activeSlide - 1, 'previous-slide' ],\r\n\t\t\t[ activeSlide + 1, 'next-slide' ],\r\n\t\t] );\r\n\t\treturn (\r\n\t\t\t<div className=\"block-editor-block-pattern-setup__carousel\">\r\n\t\t\t\t<div className={ containerClass }>\r\n\t\t\t\t\t<div className=\"carousel-container\">\r\n\t\t\t\t\t\t{ patterns.map( ( pattern, index ) => (\r\n\t\t\t\t\t\t\t<BlockPatternSlide\r\n\t\t\t\t\t\t\t\tactive={ index === activeSlide }\r\n\t\t\t\t\t\t\t\tclassName={ slideClass.get( index ) || '' }\r\n\t\t\t\t\t\t\t\tkey={ pattern.name }\r\n\t\t\t\t\t\t\t\tpattern={ pattern }\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t) ) }\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"block-editor-block-pattern-setup__grid\">\r\n\t\t\t<Composite\r\n\t\t\t\tstore={ compositeStore }\r\n\t\t\t\trole=\"listbox\"\r\n\t\t\t\tclassName={ containerClass }\r\n\t\t\t\taria-label={ __( 'Patterns list' ) }\r\n\t\t\t>\r\n\t\t\t\t{ patterns.map( ( pattern ) => (\r\n\t\t\t\t\t<BlockPattern\r\n\t\t\t\t\t\tkey={ pattern.name }\r\n\t\t\t\t\t\tpattern={ pattern }\r\n\t\t\t\t\t\tonSelect={ onBlockPatternSelect }\r\n\t\t\t\t\t\tshowTitles={ showTitles }\r\n\t\t\t\t\t/>\r\n\t\t\t\t) ) }\r\n\t\t\t</Composite>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nfunction BlockPattern( { pattern, onSelect, showTitles } ) {\r\n\tconst baseClassName = 'block-editor-block-pattern-setup-list';\r\n\tconst { blocks, description, viewportWidth = 700 } = pattern;\r\n\tconst descriptionId = useInstanceId(\r\n\t\tBlockPattern,\r\n\t\t`${ baseClassName }__item-description`\r\n\t);\r\n\treturn (\r\n\t\t<div className={ `${ baseClassName }__list-item` }>\r\n\t\t\t<CompositeItem\r\n\t\t\t\trender={\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\taria-describedby={\r\n\t\t\t\t\t\t\tdescription ? descriptionId : undefined\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\taria-label={ pattern.title }\r\n\t\t\t\t\t\tclassName={ `${ baseClassName }__item` }\r\n\t\t\t\t\t/>\r\n\t\t\t\t}\r\n\t\t\t\tid={ `${ baseClassName }__pattern__${ pattern.name }` }\r\n\t\t\t\trole=\"option\"\r\n\t\t\t\tonClick={ () => onSelect( blocks ) }\r\n\t\t\t>\r\n\t\t\t\t<BlockPreview\r\n\t\t\t\t\tblocks={ blocks }\r\n\t\t\t\t\tviewportWidth={ viewportWidth }\r\n\t\t\t\t/>\r\n\t\t\t\t{ showTitles && (\r\n\t\t\t\t\t<div className={ `${ baseClassName }__item-title` }>\r\n\t\t\t\t\t\t{ pattern.title }\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) }\r\n\t\t\t\t{ !! description && (\r\n\t\t\t\t\t<VisuallyHidden id={ descriptionId }>\r\n\t\t\t\t\t\t{ description }\r\n\t\t\t\t\t</VisuallyHidden>\r\n\t\t\t\t) }\r\n\t\t\t</CompositeItem>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nfunction BlockPatternSlide( { active, className, pattern, minHeight } ) {\r\n\tconst { blocks, title, description } = pattern;\r\n\tconst descriptionId = useInstanceId(\r\n\t\tBlockPatternSlide,\r\n\t\t'block-editor-block-pattern-setup-list__item-description'\r\n\t);\r\n\treturn (\r\n\t\t<div\r\n\t\t\taria-hidden={ ! active }\r\n\t\t\trole=\"img\"\r\n\t\t\tclassName={ `pattern-slide ${ className }` }\r\n\t\t\taria-label={ title }\r\n\t\t\taria-describedby={ description ? descriptionId : undefined }\r\n\t\t>\r\n\t\t\t<BlockPreview blocks={ blocks } minHeight={ minHeight } />\r\n\t\t\t{ !! description && (\r\n\t\t\t\t<VisuallyHidden id={ descriptionId }>\r\n\t\t\t\t\t{ description }\r\n\t\t\t\t</VisuallyHidden>\r\n\t\t\t) }\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst BlockPatternSetup = ( {\r\n\tclientId,\r\n\tblockName,\r\n\tfilterPatternsFn,\r\n\tonBlockPatternSelect,\r\n\tinitialViewMode = VIEWMODES.carousel,\r\n\tshowTitles = false,\r\n} ) => {\r\n\tconst [ viewMode, setViewMode ] = useState( initialViewMode );\r\n\tconst [ activeSlide, setActiveSlide ] = useState( 0 );\r\n\tconst { replaceBlock } = useDispatch( blockEditorStore );\r\n\tconst patterns = usePatternsSetup( clientId, blockName, filterPatternsFn );\r\n\r\n\tif ( ! patterns?.length ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tconst onBlockPatternSelectDefault = ( blocks ) => {\r\n\t\tconst clonedBlocks = blocks.map( ( block ) => cloneBlock( block ) );\r\n\t\treplaceBlock( clientId, clonedBlocks );\r\n\t};\r\n\tconst onPatternSelectCallback =\r\n\t\tonBlockPatternSelect || onBlockPatternSelectDefault;\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div\r\n\t\t\t\tclassName={ `block-editor-block-pattern-setup view-mode-${ viewMode }` }\r\n\t\t\t>\r\n\t\t\t\t<SetupContent\r\n\t\t\t\t\tviewMode={ viewMode }\r\n\t\t\t\t\tactiveSlide={ activeSlide }\r\n\t\t\t\t\tpatterns={ patterns }\r\n\t\t\t\t\tonBlockPatternSelect={ onPatternSelectCallback }\r\n\t\t\t\t\tshowTitles={ showTitles }\r\n\t\t\t\t/>\r\n\t\t\t\t<SetupToolbar\r\n\t\t\t\t\tviewMode={ viewMode }\r\n\t\t\t\t\tsetViewMode={ setViewMode }\r\n\t\t\t\t\tactiveSlide={ activeSlide }\r\n\t\t\t\t\ttotalSlides={ patterns.length }\r\n\t\t\t\t\thandleNext={ () => {\r\n\t\t\t\t\t\tsetActiveSlide( ( active ) =>\r\n\t\t\t\t\t\t\tMath.min( active + 1, patterns.length - 1 )\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t} }\r\n\t\t\t\t\thandlePrevious={ () => {\r\n\t\t\t\t\t\tsetActiveSlide( ( active ) =>\r\n\t\t\t\t\t\t\tMath.max( active - 1, 0 )\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t} }\r\n\t\t\t\t\tonBlockPatternSelect={ () => {\r\n\t\t\t\t\t\tonPatternSelectCallback(\r\n\t\t\t\t\t\t\tpatterns[ activeSlide ].blocks\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t} }\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default BlockPatternSetup;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useSelect } from '@wordpress/data';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as blockEditorStore } from '../../store';\r\n\r\nfunction usePatternsSetup( clientId, blockName, filterPatternsFn ) {\r\n\treturn useSelect(\r\n\t\t( select ) => {\r\n\t\t\tconst {\r\n\t\t\t\tgetBlockRootClientId,\r\n\t\t\t\tgetPatternsByBlockTypes,\r\n\t\t\t\t__experimentalGetAllowedPatterns,\r\n\t\t\t} = select( blockEditorStore );\r\n\t\t\tconst rootClientId = getBlockRootClientId( clientId );\r\n\t\t\tif ( filterPatternsFn ) {\r\n\t\t\t\treturn __experimentalGetAllowedPatterns( rootClientId ).filter(\r\n\t\t\t\t\tfilterPatternsFn\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\treturn getPatternsByBlockTypes( blockName, rootClientId );\r\n\t\t},\r\n\t\t[ clientId, blockName, filterPatternsFn ]\r\n\t);\r\n}\r\n\r\nexport default usePatternsSetup;\r\n","/**\n * WordPress dependencies\n */\nimport { store as blocksStore } from '@wordpress/blocks';\nimport { __, sprintf } from '@wordpress/i18n';\nimport {\n\tButton,\n\tDropdownMenu,\n\tMenuGroup,\n\tMenuItemsChoice,\n\t__experimentalToggleGroupControl as ToggleGroupControl,\n\t__experimentalToggleGroupControlOptionIcon as ToggleGroupControlOptionIcon,\n\tVisuallyHidden,\n} from '@wordpress/components';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { useMemo } from '@wordpress/element';\nimport { chevronDown } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport BlockIcon from '../block-icon';\nimport { store as blockEditorStore } from '../../store';\n\nfunction VariationsButtons( {\n\tclassName,\n\tonSelectVariation,\n\tselectedValue,\n\tvariations,\n} ) {\n\treturn (\n\t\t<fieldset className={ className }>\n\t\t\t<VisuallyHidden as=\"legend\">\n\t\t\t\t{ __( 'Transform to variation' ) }\n\t\t\t</VisuallyHidden>\n\t\t\t{ variations.map( ( variation ) => (\n\t\t\t\t<Button\n\t\t\t\t\tkey={ variation.name }\n\t\t\t\t\ticon={ <BlockIcon icon={ variation.icon } showColors /> }\n\t\t\t\t\tisPressed={ selectedValue === variation.name }\n\t\t\t\t\tlabel={\n\t\t\t\t\t\tselectedValue === variation.name\n\t\t\t\t\t\t\t? variation.title\n\t\t\t\t\t\t\t: sprintf(\n\t\t\t\t\t\t\t\t\t/* translators: %s: Name of the block variation */\n\t\t\t\t\t\t\t\t\t__( 'Transform to %s' ),\n\t\t\t\t\t\t\t\t\tvariation.title\n\t\t\t\t\t\t\t  )\n\t\t\t\t\t}\n\t\t\t\t\tonClick={ () => onSelectVariation( variation.name ) }\n\t\t\t\t\taria-label={ variation.title }\n\t\t\t\t\tshowTooltip\n\t\t\t\t/>\n\t\t\t) ) }\n\t\t</fieldset>\n\t);\n}\n\nfunction VariationsDropdown( {\n\tclassName,\n\tonSelectVariation,\n\tselectedValue,\n\tvariations,\n} ) {\n\tconst selectOptions = variations.map(\n\t\t( { name, title, description } ) => ( {\n\t\t\tvalue: name,\n\t\t\tlabel: title,\n\t\t\tinfo: description,\n\t\t} )\n\t);\n\n\treturn (\n\t\t<DropdownMenu\n\t\t\tclassName={ className }\n\t\t\tlabel={ __( 'Transform to variation' ) }\n\t\t\ttext={ __( 'Transform to variation' ) }\n\t\t\tpopoverProps={ {\n\t\t\t\tposition: 'bottom center',\n\t\t\t\tclassName: `${ className }__popover`,\n\t\t\t} }\n\t\t\ticon={ chevronDown }\n\t\t\ttoggleProps={ { iconPosition: 'right' } }\n\t\t>\n\t\t\t{ () => (\n\t\t\t\t<div className={ `${ className }__container` }>\n\t\t\t\t\t<MenuGroup>\n\t\t\t\t\t\t<MenuItemsChoice\n\t\t\t\t\t\t\tchoices={ selectOptions }\n\t\t\t\t\t\t\tvalue={ selectedValue }\n\t\t\t\t\t\t\tonSelect={ onSelectVariation }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</MenuGroup>\n\t\t\t\t</div>\n\t\t\t) }\n\t\t</DropdownMenu>\n\t);\n}\n\nfunction VariationsToggleGroupControl( {\n\tclassName,\n\tonSelectVariation,\n\tselectedValue,\n\tvariations,\n} ) {\n\treturn (\n\t\t<div className={ className }>\n\t\t\t<ToggleGroupControl\n\t\t\t\tlabel={ __( 'Transform to variation' ) }\n\t\t\t\tvalue={ selectedValue }\n\t\t\t\thideLabelFromVision\n\t\t\t\tonChange={ onSelectVariation }\n\t\t\t\t__next40pxDefaultSize\n\t\t\t\t__nextHasNoMarginBottom\n\t\t\t>\n\t\t\t\t{ variations.map( ( variation ) => (\n\t\t\t\t\t<ToggleGroupControlOptionIcon\n\t\t\t\t\t\tkey={ variation.name }\n\t\t\t\t\t\ticon={ variation.icon }\n\t\t\t\t\t\tvalue={ variation.name }\n\t\t\t\t\t\tlabel={\n\t\t\t\t\t\t\tselectedValue === variation.name\n\t\t\t\t\t\t\t\t? variation.title\n\t\t\t\t\t\t\t\t: sprintf(\n\t\t\t\t\t\t\t\t\t\t/* translators: %s: Name of the block variation */\n\t\t\t\t\t\t\t\t\t\t__( 'Transform to %s' ),\n\t\t\t\t\t\t\t\t\t\tvariation.title\n\t\t\t\t\t\t\t\t  )\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t) ) }\n\t\t\t</ToggleGroupControl>\n\t\t</div>\n\t);\n}\n\nfunction __experimentalBlockVariationTransforms( { blockClientId } ) {\n\tconst { updateBlockAttributes } = useDispatch( blockEditorStore );\n\tconst { activeBlockVariation, variations } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getActiveBlockVariation, getBlockVariations } =\n\t\t\t\tselect( blocksStore );\n\t\t\tconst { getBlockName, getBlockAttributes } =\n\t\t\t\tselect( blockEditorStore );\n\t\t\tconst name = blockClientId && getBlockName( blockClientId );\n\t\t\treturn {\n\t\t\t\tactiveBlockVariation: getActiveBlockVariation(\n\t\t\t\t\tname,\n\t\t\t\t\tgetBlockAttributes( blockClientId )\n\t\t\t\t),\n\t\t\t\tvariations: name && getBlockVariations( name, 'transform' ),\n\t\t\t};\n\t\t},\n\t\t[ blockClientId ]\n\t);\n\n\tconst selectedValue = activeBlockVariation?.name;\n\n\t// Check if each variation has a unique icon.\n\tconst hasUniqueIcons = useMemo( () => {\n\t\tconst variationIcons = new Set();\n\t\tif ( ! variations ) {\n\t\t\treturn false;\n\t\t}\n\t\tvariations.forEach( ( variation ) => {\n\t\t\tif ( variation.icon ) {\n\t\t\t\tvariationIcons.add( variation.icon?.src || variation.icon );\n\t\t\t}\n\t\t} );\n\t\treturn variationIcons.size === variations.length;\n\t}, [ variations ] );\n\n\tconst onSelectVariation = ( variationName ) => {\n\t\tupdateBlockAttributes( blockClientId, {\n\t\t\t...variations.find( ( { name } ) => name === variationName )\n\t\t\t\t.attributes,\n\t\t} );\n\t};\n\n\t// Skip rendering if there are no variations\n\tif ( ! variations?.length ) return null;\n\n\tconst baseClass = 'block-editor-block-variation-transforms';\n\n\t// Show buttons if there are more than 5 variations because the ToggleGroupControl does not wrap\n\tconst showButtons = variations.length > 5;\n\n\tconst ButtonComponent = showButtons\n\t\t? VariationsButtons\n\t\t: VariationsToggleGroupControl;\n\n\tconst Component = hasUniqueIcons ? ButtonComponent : VariationsDropdown;\n\n\treturn (\n\t\t<Component\n\t\t\tclassName={ baseClass }\n\t\t\tonSelectVariation={ onSelectVariation }\n\t\t\tselectedValue={ selectedValue }\n\t\t\tvariations={ variations }\n\t\t/>\n\t);\n}\n\nexport default __experimentalBlockVariationTransforms;\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { createHigherOrderComponent } from '@wordpress/compose';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { useSettings } from '../use-settings';\r\n\r\nexport default createHigherOrderComponent( ( WrappedComponent ) => {\r\n\treturn ( props ) => {\r\n\t\tconst [ colorsFeature, enableCustomColors ] = useSettings(\r\n\t\t\t'color.palette',\r\n\t\t\t'color.custom'\r\n\t\t);\r\n\t\tconst {\r\n\t\t\tcolors = colorsFeature,\r\n\t\t\tdisableCustomColors = ! enableCustomColors,\r\n\t\t} = props;\r\n\t\tconst hasColorsToChoose =\r\n\t\t\t( colors && colors.length > 0 ) || ! disableCustomColors;\r\n\t\treturn (\r\n\t\t\t<WrappedComponent\r\n\t\t\t\t{ ...{\r\n\t\t\t\t\t...props,\r\n\t\t\t\t\tcolors,\r\n\t\t\t\t\tdisableCustomColors,\r\n\t\t\t\t\thasColorsToChoose,\r\n\t\t\t\t} }\r\n\t\t\t/>\r\n\t\t);\r\n\t};\r\n}, 'withColorContext' );\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { ColorPalette } from '@wordpress/components';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport withColorContext from './with-color-context';\r\n\r\nexport default withColorContext( ColorPalette );\r\n","/**\n * Internal dependencies\n */\nimport ColorGradientControl from '../colors-gradients/control';\n\nexport default function ColorPaletteControl( {\n\tonChange,\n\tvalue,\n\t...otherProps\n} ) {\n\treturn (\n\t\t<ColorGradientControl\n\t\t\t{ ...otherProps }\n\t\t\tonColorChange={ onChange }\n\t\t\tcolorValue={ value }\n\t\t\tgradients={ [] }\n\t\t\tdisableCustomGradients\n\t\t/>\n\t);\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"date\"];","/**\n * WordPress dependencies\n */\nimport { _x, __ } from '@wordpress/i18n';\nimport { dateI18n } from '@wordpress/date';\nimport { useState, createInterpolateElement } from '@wordpress/element';\nimport {\n\tTextControl,\n\tExternalLink,\n\tVisuallyHidden,\n\tCustomSelectControl,\n\tToggleControl,\n\t__experimentalVStack as VStack,\n} from '@wordpress/components';\n\n// So that we can illustrate the different formats in the dropdown properly,\n// show a date that has a day greater than 12 and a month with more than three\n// letters. Here we're using 2022-01-25 which is when WordPress 5.9 was\n// released.\nconst EXAMPLE_DATE = new Date( 2022, 0, 25 );\n\n/**\n * The `DateFormatPicker` component renders controls that let the user choose a\n * _date format_. That is, how they want their dates to be formatted.\n *\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/date-format-picker/README.md\n *\n * @param {Object}                          props\n * @param {string|null}                     props.format        The selected date\n *                                                              format. If\n *                                                              `null`,\n *                                                              _Default_ is\n *                                                              selected.\n * @param {string}                          props.defaultFormat The date format that\n *                                                              will be used if the\n *                                                              user selects\n *                                                              'Default'.\n * @param {( format: string|null ) => void} props.onChange      Called when a\n *                                                              selection is\n *                                                              made. If `null`,\n *                                                              _Default_ is\n *                                                              selected.\n */\nexport default function DateFormatPicker( {\n\tformat,\n\tdefaultFormat,\n\tonChange,\n} ) {\n\treturn (\n\t\t<fieldset className=\"block-editor-date-format-picker\">\n\t\t\t<VisuallyHidden as=\"legend\">{ __( 'Date format' ) }</VisuallyHidden>\n\t\t\t<ToggleControl\n\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\tlabel={ __( 'Default format' ) }\n\t\t\t\thelp={ `${ __( 'Example:' ) }  ${ dateI18n(\n\t\t\t\t\tdefaultFormat,\n\t\t\t\t\tEXAMPLE_DATE\n\t\t\t\t) }` }\n\t\t\t\tchecked={ ! format }\n\t\t\t\tonChange={ ( checked ) =>\n\t\t\t\t\tonChange( checked ? null : defaultFormat )\n\t\t\t\t}\n\t\t\t/>\n\t\t\t{ format && (\n\t\t\t\t<NonDefaultControls format={ format } onChange={ onChange } />\n\t\t\t) }\n\t\t</fieldset>\n\t);\n}\n\nfunction NonDefaultControls( { format, onChange } ) {\n\t// Suggest a short format, medium format, long format, and a standardised\n\t// (YYYY-MM-DD) format. The short, medium, and long formats are localised as\n\t// different languages have different ways of writing these. For example, 'F\n\t// j, Y' (April 20, 2022) in American English (en_US) is 'j. F Y' (20. April\n\t// 2022) in German (de). The resultant array is de-duplicated as some\n\t// languages will use the same format string for short, medium, and long\n\t// formats.\n\tconst suggestedFormats = [\n\t\t...new Set( [\n\t\t\t/* translators: See https://www.php.net/manual/datetime.format.php */\n\t\t\t'Y-m-d',\n\t\t\t/* translators: See https://www.php.net/manual/datetime.format.php */\n\t\t\t_x( 'n/j/Y', 'short date format' ),\n\t\t\t/* translators: See https://www.php.net/manual/datetime.format.php */\n\t\t\t_x( 'n/j/Y g:i A', 'short date format with time' ),\n\t\t\t/* translators: See https://www.php.net/manual/datetime.format.php */\n\t\t\t_x( 'M j, Y', 'medium date format' ),\n\t\t\t/* translators: See https://www.php.net/manual/datetime.format.php */\n\t\t\t_x( 'M j, Y g:i A', 'medium date format with time' ),\n\t\t\t/* translators: See https://www.php.net/manual/datetime.format.php */\n\t\t\t_x( 'F j, Y', 'long date format' ),\n\t\t\t/* translators: See https://www.php.net/manual/datetime.format.php */\n\t\t\t_x( 'M j', 'short date format without the year' ),\n\t\t] ),\n\t];\n\n\tconst suggestedOptions = suggestedFormats.map(\n\t\t( suggestedFormat, index ) => ( {\n\t\t\tkey: `suggested-${ index }`,\n\t\t\tname: dateI18n( suggestedFormat, EXAMPLE_DATE ),\n\t\t\tformat: suggestedFormat,\n\t\t} )\n\t);\n\tconst customOption = {\n\t\tkey: 'custom',\n\t\tname: __( 'Custom' ),\n\t\tclassName:\n\t\t\t'block-editor-date-format-picker__custom-format-select-control__custom-option',\n\t\t__experimentalHint: __( 'Enter your own date format' ),\n\t};\n\n\tconst [ isCustom, setIsCustom ] = useState(\n\t\t() => !! format && ! suggestedFormats.includes( format )\n\t);\n\n\treturn (\n\t\t<VStack>\n\t\t\t<CustomSelectControl\n\t\t\t\tlabel={ __( 'Choose a format' ) }\n\t\t\t\toptions={ [ ...suggestedOptions, customOption ] }\n\t\t\t\tvalue={\n\t\t\t\t\tisCustom\n\t\t\t\t\t\t? customOption\n\t\t\t\t\t\t: suggestedOptions.find(\n\t\t\t\t\t\t\t\t( option ) => option.format === format\n\t\t\t\t\t\t  ) ?? customOption\n\t\t\t\t}\n\t\t\t\tonChange={ ( { selectedItem } ) => {\n\t\t\t\t\tif ( selectedItem === customOption ) {\n\t\t\t\t\t\tsetIsCustom( true );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsetIsCustom( false );\n\t\t\t\t\t\tonChange( selectedItem.format );\n\t\t\t\t\t}\n\t\t\t\t} }\n\t\t\t/>\n\t\t\t{ isCustom && (\n\t\t\t\t<TextControl\n\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\tlabel={ __( 'Custom format' ) }\n\t\t\t\t\thideLabelFromVision\n\t\t\t\t\thelp={ createInterpolateElement(\n\t\t\t\t\t\t__(\n\t\t\t\t\t\t\t'Enter a date or time <Link>format string</Link>.'\n\t\t\t\t\t\t),\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tLink: (\n\t\t\t\t\t\t\t\t<ExternalLink\n\t\t\t\t\t\t\t\t\thref={ __(\n\t\t\t\t\t\t\t\t\t\t'https://wordpress.org/documentation/article/customize-date-and-time-format/'\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t}\n\t\t\t\t\t) }\n\t\t\t\t\tvalue={ format }\n\t\t\t\t\tonChange={ ( value ) => onChange( value ) }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</VStack>\n\t);\n}\n","/**\r\n * External dependencies\r\n */\r\nimport classnames from 'classnames';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\tButton,\r\n\tColorIndicator,\r\n\tDropdown,\r\n\tFlexItem,\r\n\t__experimentalDropdownContentWrapper as DropdownContentWrapper,\r\n\t__experimentalHStack as HStack,\r\n\t__experimentalToolsPanelItem as ToolsPanelItem,\r\n} from '@wordpress/components';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport ColorGradientControl from './control';\r\n\r\n// When the `ColorGradientSettingsDropdown` controls are being rendered to a\r\n// `ToolsPanel` they must be wrapped in a `ToolsPanelItem`.\r\nconst WithToolsPanelItem = ( { setting, children, panelId, ...props } ) => {\r\n\tconst clearValue = () => {\r\n\t\tif ( setting.colorValue ) {\r\n\t\t\tsetting.onColorChange();\r\n\t\t} else if ( setting.gradientValue ) {\r\n\t\t\tsetting.onGradientChange();\r\n\t\t}\r\n\t};\r\n\treturn (\r\n\t\t<ToolsPanelItem\r\n\t\t\thasValue={ () => {\r\n\t\t\t\treturn !! setting.colorValue || !! setting.gradientValue;\r\n\t\t\t} }\r\n\t\t\tlabel={ setting.label }\r\n\t\t\tonDeselect={ clearValue }\r\n\t\t\tisShownByDefault={\r\n\t\t\t\tsetting.isShownByDefault !== undefined\r\n\t\t\t\t\t? setting.isShownByDefault\r\n\t\t\t\t\t: true\r\n\t\t\t}\r\n\t\t\t{ ...props }\r\n\t\t\tclassName=\"block-editor-tools-panel-color-gradient-settings__item\"\r\n\t\t\tpanelId={ panelId }\r\n\t\t\t// Pass resetAllFilter if supplied due to rendering via SlotFill\r\n\t\t\t// into parent ToolsPanel.\r\n\t\t\tresetAllFilter={ setting.resetAllFilter }\r\n\t\t>\r\n\t\t\t{ children }\r\n\t\t</ToolsPanelItem>\r\n\t);\r\n};\r\n\r\nconst LabeledColorIndicator = ( { colorValue, label } ) => (\r\n\t<HStack justify=\"flex-start\">\r\n\t\t<ColorIndicator\r\n\t\t\tclassName=\"block-editor-panel-color-gradient-settings__color-indicator\"\r\n\t\t\tcolorValue={ colorValue }\r\n\t\t/>\r\n\t\t<FlexItem\r\n\t\t\tclassName=\"block-editor-panel-color-gradient-settings__color-name\"\r\n\t\t\ttitle={ label }\r\n\t\t>\r\n\t\t\t{ label }\r\n\t\t</FlexItem>\r\n\t</HStack>\r\n);\r\n\r\n// Renders a color dropdown's toggle as an `Item` if it is within an `ItemGroup`\r\n// or as a `Button` if it isn't e.g. the controls are being rendered in\r\n// a `ToolsPanel`.\r\nconst renderToggle =\r\n\t( settings ) =>\r\n\t( { onToggle, isOpen } ) => {\r\n\t\tconst { colorValue, label } = settings;\r\n\r\n\t\tconst toggleProps = {\r\n\t\t\tonClick: onToggle,\r\n\t\t\tclassName: classnames(\r\n\t\t\t\t'block-editor-panel-color-gradient-settings__dropdown',\r\n\t\t\t\t{ 'is-open': isOpen }\r\n\t\t\t),\r\n\t\t\t'aria-expanded': isOpen,\r\n\t\t};\r\n\r\n\t\treturn (\r\n\t\t\t<Button { ...toggleProps }>\r\n\t\t\t\t<LabeledColorIndicator\r\n\t\t\t\t\tcolorValue={ colorValue }\r\n\t\t\t\t\tlabel={ label }\r\n\t\t\t\t/>\r\n\t\t\t</Button>\r\n\t\t);\r\n\t};\r\n\r\n// Renders a collection of color controls as dropdowns. Depending upon the\r\n// context in which these dropdowns are being rendered, they may be wrapped\r\n// in an `ItemGroup` with each dropdown's toggle as an `Item`, or alternatively,\r\n// the may be individually wrapped in a `ToolsPanelItem` with the toggle as\r\n// a regular `Button`.\r\n//\r\n// For more context see: https://github.com/WordPress/gutenberg/pull/40084\r\nexport default function ColorGradientSettingsDropdown( {\r\n\tcolors,\r\n\tdisableCustomColors,\r\n\tdisableCustomGradients,\r\n\tenableAlpha,\r\n\tgradients,\r\n\tsettings,\r\n\t__experimentalIsRenderedInSidebar,\r\n\t...props\r\n} ) {\r\n\tlet popoverProps;\r\n\tif ( __experimentalIsRenderedInSidebar ) {\r\n\t\tpopoverProps = {\r\n\t\t\tplacement: 'left-start',\r\n\t\t\toffset: 36,\r\n\t\t\tshift: true,\r\n\t\t};\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{ settings.map( ( setting, index ) => {\r\n\t\t\t\tconst controlProps = {\r\n\t\t\t\t\tclearable: false,\r\n\t\t\t\t\tcolorValue: setting.colorValue,\r\n\t\t\t\t\tcolors,\r\n\t\t\t\t\tdisableCustomColors,\r\n\t\t\t\t\tdisableCustomGradients,\r\n\t\t\t\t\tenableAlpha,\r\n\t\t\t\t\tgradientValue: setting.gradientValue,\r\n\t\t\t\t\tgradients,\r\n\t\t\t\t\tlabel: setting.label,\r\n\t\t\t\t\tonColorChange: setting.onColorChange,\r\n\t\t\t\t\tonGradientChange: setting.onGradientChange,\r\n\t\t\t\t\tshowTitle: false,\r\n\t\t\t\t\t__experimentalIsRenderedInSidebar,\r\n\t\t\t\t\t...setting,\r\n\t\t\t\t};\r\n\t\t\t\tconst toggleSettings = {\r\n\t\t\t\t\tcolorValue: setting.gradientValue ?? setting.colorValue,\r\n\t\t\t\t\tlabel: setting.label,\r\n\t\t\t\t};\r\n\r\n\t\t\t\treturn (\r\n\t\t\t\t\tsetting && (\r\n\t\t\t\t\t\t// If not in an `ItemGroup` wrap the dropdown in a\r\n\t\t\t\t\t\t// `ToolsPanelItem`\r\n\t\t\t\t\t\t<WithToolsPanelItem\r\n\t\t\t\t\t\t\tkey={ index }\r\n\t\t\t\t\t\t\tsetting={ setting }\r\n\t\t\t\t\t\t\t{ ...props }\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Dropdown\r\n\t\t\t\t\t\t\t\tpopoverProps={ popoverProps }\r\n\t\t\t\t\t\t\t\tclassName=\"block-editor-tools-panel-color-gradient-settings__dropdown\"\r\n\t\t\t\t\t\t\t\trenderToggle={ renderToggle( toggleSettings ) }\r\n\t\t\t\t\t\t\t\trenderContent={ () => (\r\n\t\t\t\t\t\t\t\t\t<DropdownContentWrapper paddingSize=\"none\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"block-editor-panel-color-gradient-settings__dropdown-content\">\r\n\t\t\t\t\t\t\t\t\t\t\t<ColorGradientControl\r\n\t\t\t\t\t\t\t\t\t\t\t\t{ ...controlProps }\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</DropdownContentWrapper>\r\n\t\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</WithToolsPanelItem>\r\n\t\t\t\t\t)\r\n\t\t\t\t);\r\n\t\t\t} ) }\r\n\t\t</>\r\n\t);\r\n}\r\n","/**\r\n * External dependencies\r\n */\r\nimport classnames from 'classnames';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\t__experimentalSpacer as Spacer,\r\n\t__experimentalToolsPanel as ToolsPanel,\r\n} from '@wordpress/components';\r\nimport { useRegistry } from '@wordpress/data';\r\nimport { useInstanceId } from '@wordpress/compose';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport ColorGradientSettingsDropdown from './dropdown';\r\nimport useColorsAndGradientsPalettes from './use-multiple-origin-colors-and-gradients';\r\n\r\nconst colorsAndGradientKeys = [\r\n\t'colors',\r\n\t'disableCustomColors',\r\n\t'gradients',\r\n\t'disableCustomGradients',\r\n];\r\n\r\nexport const PanelColorGradientSettingsInner = ( {\r\n\tclassName,\r\n\tcolors,\r\n\tgradients,\r\n\tdisableCustomColors,\r\n\tdisableCustomGradients,\r\n\tchildren,\r\n\tsettings,\r\n\ttitle,\r\n\tshowTitle = true,\r\n\t__experimentalIsRenderedInSidebar,\r\n\tenableAlpha,\r\n} ) => {\r\n\tconst panelId = useInstanceId( PanelColorGradientSettingsInner );\r\n\tconst { batch } = useRegistry();\r\n\tif (\r\n\t\t( ! colors || colors.length === 0 ) &&\r\n\t\t( ! gradients || gradients.length === 0 ) &&\r\n\t\tdisableCustomColors &&\r\n\t\tdisableCustomGradients &&\r\n\t\tsettings?.every(\r\n\t\t\t( setting ) =>\r\n\t\t\t\t( ! setting.colors || setting.colors.length === 0 ) &&\r\n\t\t\t\t( ! setting.gradients || setting.gradients.length === 0 ) &&\r\n\t\t\t\t( setting.disableCustomColors === undefined ||\r\n\t\t\t\t\tsetting.disableCustomColors ) &&\r\n\t\t\t\t( setting.disableCustomGradients === undefined ||\r\n\t\t\t\t\tsetting.disableCustomGradients )\r\n\t\t)\r\n\t) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<ToolsPanel\r\n\t\t\tclassName={ classnames(\r\n\t\t\t\t'block-editor-panel-color-gradient-settings',\r\n\t\t\t\tclassName\r\n\t\t\t) }\r\n\t\t\tlabel={ showTitle ? title : undefined }\r\n\t\t\tresetAll={ () => {\r\n\t\t\t\tbatch( () => {\r\n\t\t\t\t\tsettings.forEach(\r\n\t\t\t\t\t\t( {\r\n\t\t\t\t\t\t\tcolorValue,\r\n\t\t\t\t\t\t\tgradientValue,\r\n\t\t\t\t\t\t\tonColorChange,\r\n\t\t\t\t\t\t\tonGradientChange,\r\n\t\t\t\t\t\t} ) => {\r\n\t\t\t\t\t\t\tif ( colorValue ) {\r\n\t\t\t\t\t\t\t\tonColorChange();\r\n\t\t\t\t\t\t\t} else if ( gradientValue ) {\r\n\t\t\t\t\t\t\t\tonGradientChange();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t);\r\n\t\t\t\t} );\r\n\t\t\t} }\r\n\t\t\tpanelId={ panelId }\r\n\t\t\t__experimentalFirstVisibleItemClass=\"first\"\r\n\t\t\t__experimentalLastVisibleItemClass=\"last\"\r\n\t\t>\r\n\t\t\t<ColorGradientSettingsDropdown\r\n\t\t\t\tsettings={ settings }\r\n\t\t\t\tpanelId={ panelId }\r\n\t\t\t\t{ ...{\r\n\t\t\t\t\tcolors,\r\n\t\t\t\t\tgradients,\r\n\t\t\t\t\tdisableCustomColors,\r\n\t\t\t\t\tdisableCustomGradients,\r\n\t\t\t\t\t__experimentalIsRenderedInSidebar,\r\n\t\t\t\t\tenableAlpha,\r\n\t\t\t\t} }\r\n\t\t\t/>\r\n\t\t\t{ !! children && (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<Spacer marginY={ 4 } /> { children }\r\n\t\t\t\t</>\r\n\t\t\t) }\r\n\t\t</ToolsPanel>\r\n\t);\r\n};\r\n\r\nconst PanelColorGradientSettingsSelect = ( props ) => {\r\n\tconst colorGradientSettings = useColorsAndGradientsPalettes();\r\n\treturn (\r\n\t\t<PanelColorGradientSettingsInner\r\n\t\t\t{ ...{ ...colorGradientSettings, ...props } }\r\n\t\t/>\r\n\t);\r\n};\r\n\r\nconst PanelColorGradientSettings = ( props ) => {\r\n\tif (\r\n\t\tcolorsAndGradientKeys.every( ( key ) => props.hasOwnProperty( key ) )\r\n\t) {\r\n\t\treturn <PanelColorGradientSettingsInner { ...props } />;\r\n\t}\r\n\treturn <PanelColorGradientSettingsSelect { ...props } />;\r\n};\r\n\r\nexport default PanelColorGradientSettings;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { createContext, useContext, useMemo } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport useSaveImage from './use-save-image';\r\nimport useTransformImage from './use-transform-image';\r\n\r\nconst ImageEditingContext = createContext( {} );\r\n\r\nexport const useImageEditingContext = () => useContext( ImageEditingContext );\r\n\r\nexport default function ImageEditingProvider( {\r\n\tid,\r\n\turl,\r\n\tnaturalWidth,\r\n\tnaturalHeight,\r\n\tonFinishEditing,\r\n\tonSaveImage,\r\n\tchildren,\r\n} ) {\r\n\tconst transformImage = useTransformImage( {\r\n\t\turl,\r\n\t\tnaturalWidth,\r\n\t\tnaturalHeight,\r\n\t} );\r\n\r\n\tconst saveImage = useSaveImage( {\r\n\t\tid,\r\n\t\turl,\r\n\t\tonSaveImage,\r\n\t\tonFinishEditing,\r\n\t\t...transformImage,\r\n\t} );\r\n\r\n\tconst providerValue = useMemo(\r\n\t\t() => ( {\r\n\t\t\t...transformImage,\r\n\t\t\t...saveImage,\r\n\t\t} ),\r\n\t\t[ transformImage, saveImage ]\r\n\t);\r\n\r\n\treturn (\r\n\t\t<ImageEditingContext.Provider value={ providerValue }>\r\n\t\t\t{ children }\r\n\t\t</ImageEditingContext.Provider>\r\n\t);\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useCallback, useMemo, useState } from '@wordpress/element';\r\nimport { applyFilters } from '@wordpress/hooks';\r\n\r\nexport default function useTransformImage( {\r\n\turl,\r\n\tnaturalWidth,\r\n\tnaturalHeight,\r\n} ) {\r\n\tconst [ editedUrl, setEditedUrl ] = useState();\r\n\tconst [ crop, setCrop ] = useState();\r\n\tconst [ position, setPosition ] = useState( { x: 0, y: 0 } );\r\n\tconst [ zoom, setZoom ] = useState( 100 );\r\n\tconst [ rotation, setRotation ] = useState( 0 );\r\n\tconst defaultAspect = naturalWidth / naturalHeight;\r\n\tconst [ aspect, setAspect ] = useState( defaultAspect );\r\n\r\n\tconst rotateClockwise = useCallback( () => {\r\n\t\tconst angle = ( rotation + 90 ) % 360;\r\n\r\n\t\tlet naturalAspectRatio = defaultAspect;\r\n\r\n\t\tif ( rotation % 180 === 90 ) {\r\n\t\t\tnaturalAspectRatio = 1 / defaultAspect;\r\n\t\t}\r\n\r\n\t\tif ( angle === 0 ) {\r\n\t\t\tsetEditedUrl();\r\n\t\t\tsetRotation( angle );\r\n\t\t\tsetAspect( defaultAspect );\r\n\t\t\tsetPosition( ( prevPosition ) => ( {\r\n\t\t\t\tx: -( prevPosition.y * naturalAspectRatio ),\r\n\t\t\t\ty: prevPosition.x * naturalAspectRatio,\r\n\t\t\t} ) );\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tfunction editImage( event ) {\r\n\t\t\tconst canvas = document.createElement( 'canvas' );\r\n\r\n\t\t\tlet translateX = 0;\r\n\t\t\tlet translateY = 0;\r\n\r\n\t\t\tif ( angle % 180 ) {\r\n\t\t\t\tcanvas.width = event.target.height;\r\n\t\t\t\tcanvas.height = event.target.width;\r\n\t\t\t} else {\r\n\t\t\t\tcanvas.width = event.target.width;\r\n\t\t\t\tcanvas.height = event.target.height;\r\n\t\t\t}\r\n\r\n\t\t\tif ( angle === 90 || angle === 180 ) {\r\n\t\t\t\ttranslateX = canvas.width;\r\n\t\t\t}\r\n\r\n\t\t\tif ( angle === 270 || angle === 180 ) {\r\n\t\t\t\ttranslateY = canvas.height;\r\n\t\t\t}\r\n\r\n\t\t\tconst context = canvas.getContext( '2d' );\r\n\r\n\t\t\tcontext.translate( translateX, translateY );\r\n\t\t\tcontext.rotate( ( angle * Math.PI ) / 180 );\r\n\t\t\tcontext.drawImage( event.target, 0, 0 );\r\n\r\n\t\t\tcanvas.toBlob( ( blob ) => {\r\n\t\t\t\tsetEditedUrl( URL.createObjectURL( blob ) );\r\n\t\t\t\tsetRotation( angle );\r\n\t\t\t\tsetAspect( canvas.width / canvas.height );\r\n\t\t\t\tsetPosition( ( prevPosition ) => ( {\r\n\t\t\t\t\tx: -( prevPosition.y * naturalAspectRatio ),\r\n\t\t\t\t\ty: prevPosition.x * naturalAspectRatio,\r\n\t\t\t\t} ) );\r\n\t\t\t} );\r\n\t\t}\r\n\r\n\t\tconst el = new window.Image();\r\n\t\tel.src = url;\r\n\t\tel.onload = editImage;\r\n\r\n\t\tconst imgCrossOrigin = applyFilters(\r\n\t\t\t'media.crossOrigin',\r\n\t\t\tundefined,\r\n\t\t\turl\r\n\t\t);\r\n\t\tif ( typeof imgCrossOrigin === 'string' ) {\r\n\t\t\tel.crossOrigin = imgCrossOrigin;\r\n\t\t}\r\n\t}, [ rotation, defaultAspect, url ] );\r\n\r\n\treturn useMemo(\r\n\t\t() => ( {\r\n\t\t\teditedUrl,\r\n\t\t\tsetEditedUrl,\r\n\t\t\tcrop,\r\n\t\t\tsetCrop,\r\n\t\t\tposition,\r\n\t\t\tsetPosition,\r\n\t\t\tzoom,\r\n\t\t\tsetZoom,\r\n\t\t\trotation,\r\n\t\t\tsetRotation,\r\n\t\t\trotateClockwise,\r\n\t\t\taspect,\r\n\t\t\tsetAspect,\r\n\t\t\tdefaultAspect,\r\n\t\t} ),\r\n\t\t[\r\n\t\t\teditedUrl,\r\n\t\t\tcrop,\r\n\t\t\tposition,\r\n\t\t\tzoom,\r\n\t\t\trotation,\r\n\t\t\trotateClockwise,\r\n\t\t\taspect,\r\n\t\t\tdefaultAspect,\r\n\t\t]\r\n\t);\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\n// Disable Reason: Needs to be refactored.\r\n// eslint-disable-next-line no-restricted-imports\r\nimport apiFetch from '@wordpress/api-fetch';\r\nimport { useDispatch } from '@wordpress/data';\r\nimport { useCallback, useMemo, useState } from '@wordpress/element';\r\nimport { __, sprintf } from '@wordpress/i18n';\r\nimport { store as noticesStore } from '@wordpress/notices';\r\nimport { __unstableStripHTML as stripHTML } from '@wordpress/dom';\r\n\r\nexport default function useSaveImage( {\r\n\tcrop,\r\n\trotation,\r\n\turl,\r\n\tid,\r\n\tonSaveImage,\r\n\tonFinishEditing,\r\n} ) {\r\n\tconst { createErrorNotice } = useDispatch( noticesStore );\r\n\tconst [ isInProgress, setIsInProgress ] = useState( false );\r\n\r\n\tconst cancel = useCallback( () => {\r\n\t\tsetIsInProgress( false );\r\n\t\tonFinishEditing();\r\n\t}, [ onFinishEditing ] );\r\n\r\n\tconst apply = useCallback( () => {\r\n\t\tsetIsInProgress( true );\r\n\r\n\t\tconst modifiers = [];\r\n\r\n\t\tif ( rotation > 0 ) {\r\n\t\t\tmodifiers.push( {\r\n\t\t\t\ttype: 'rotate',\r\n\t\t\t\targs: {\r\n\t\t\t\t\tangle: rotation,\r\n\t\t\t\t},\r\n\t\t\t} );\r\n\t\t}\r\n\r\n\t\t// The crop script may return some very small, sub-pixel values when the image was not cropped.\r\n\t\t// Crop only when the new size has changed by more than 0.1%.\r\n\t\tif ( crop.width < 99.9 || crop.height < 99.9 ) {\r\n\t\t\tmodifiers.push( {\r\n\t\t\t\ttype: 'crop',\r\n\t\t\t\targs: {\r\n\t\t\t\t\tleft: crop.x,\r\n\t\t\t\t\ttop: crop.y,\r\n\t\t\t\t\twidth: crop.width,\r\n\t\t\t\t\theight: crop.height,\r\n\t\t\t\t},\r\n\t\t\t} );\r\n\t\t}\r\n\r\n\t\tapiFetch( {\r\n\t\t\tpath: `/wp/v2/media/${ id }/edit`,\r\n\t\t\tmethod: 'POST',\r\n\t\t\tdata: { src: url, modifiers },\r\n\t\t} )\r\n\t\t\t.then( ( response ) => {\r\n\t\t\t\tonSaveImage( {\r\n\t\t\t\t\tid: response.id,\r\n\t\t\t\t\turl: response.source_url,\r\n\t\t\t\t} );\r\n\t\t\t} )\r\n\t\t\t.catch( ( error ) => {\r\n\t\t\t\tcreateErrorNotice(\r\n\t\t\t\t\tsprintf(\r\n\t\t\t\t\t\t/* translators: 1. Error message */\r\n\t\t\t\t\t\t__( 'Could not edit image. %s' ),\r\n\t\t\t\t\t\tstripHTML( error.message )\r\n\t\t\t\t\t),\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 'image-editing-error',\r\n\t\t\t\t\t\ttype: 'snackbar',\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t} )\r\n\t\t\t.finally( () => {\r\n\t\t\t\tsetIsInProgress( false );\r\n\t\t\t\tonFinishEditing();\r\n\t\t\t} );\r\n\t}, [\r\n\t\tcrop,\r\n\t\trotation,\r\n\t\tid,\r\n\t\turl,\r\n\t\tonSaveImage,\r\n\t\tcreateErrorNotice,\r\n\t\tonFinishEditing,\r\n\t] );\r\n\r\n\treturn useMemo(\r\n\t\t() => ( {\r\n\t\t\tisInProgress,\r\n\t\t\tapply,\r\n\t\t\tcancel,\r\n\t\t} ),\r\n\t\t[ isInProgress, apply, cancel ]\r\n\t);\r\n}\r\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import { Area, MediaSize, Point, Size } from './types'\n\n/**\n * Compute the dimension of the crop area based on media size,\n * aspect ratio and optionally rotation\n */\nexport function getCropSize(\n  mediaWidth: number,\n  mediaHeight: number,\n  containerWidth: number,\n  containerHeight: number,\n  aspect: number,\n  rotation = 0\n): Size {\n  const { width, height } = rotateSize(mediaWidth, mediaHeight, rotation)\n  const fittingWidth = Math.min(width, containerWidth)\n  const fittingHeight = Math.min(height, containerHeight)\n\n  if (fittingWidth > fittingHeight * aspect) {\n    return {\n      width: fittingHeight * aspect,\n      height: fittingHeight,\n    }\n  }\n\n  return {\n    width: fittingWidth,\n    height: fittingWidth / aspect,\n  }\n}\n\n/**\n * Compute media zoom.\n * We fit the media into the container with \"max-width: 100%; max-height: 100%;\"\n */\nexport function getMediaZoom(mediaSize: MediaSize) {\n  // Take the axis with more pixels to improve accuracy\n  return mediaSize.width > mediaSize.height\n    ? mediaSize.width / mediaSize.naturalWidth\n    : mediaSize.height / mediaSize.naturalHeight\n}\n\n/**\n * Ensure a new media position stays in the crop area.\n */\nexport function restrictPosition(\n  position: Point,\n  mediaSize: Size,\n  cropSize: Size,\n  zoom: number,\n  rotation = 0\n): Point {\n  const { width, height } = rotateSize(mediaSize.width, mediaSize.height, rotation)\n\n  return {\n    x: restrictPositionCoord(position.x, width, cropSize.width, zoom),\n    y: restrictPositionCoord(position.y, height, cropSize.height, zoom),\n  }\n}\n\nfunction restrictPositionCoord(\n  position: number,\n  mediaSize: number,\n  cropSize: number,\n  zoom: number\n): number {\n  const maxPosition = (mediaSize * zoom) / 2 - cropSize / 2\n\n  return clamp(position, -maxPosition, maxPosition)\n}\n\nexport function getDistanceBetweenPoints(pointA: Point, pointB: Point) {\n  return Math.sqrt(Math.pow(pointA.y - pointB.y, 2) + Math.pow(pointA.x - pointB.x, 2))\n}\n\nexport function getRotationBetweenPoints(pointA: Point, pointB: Point) {\n  return (Math.atan2(pointB.y - pointA.y, pointB.x - pointA.x) * 180) / Math.PI\n}\n\n/**\n * Compute the output cropped area of the media in percentages and pixels.\n * x/y are the top-left coordinates on the src media\n */\nexport function computeCroppedArea(\n  crop: Point,\n  mediaSize: MediaSize,\n  cropSize: Size,\n  aspect: number,\n  zoom: number,\n  rotation = 0,\n  restrictPosition = true\n): { croppedAreaPercentages: Area; croppedAreaPixels: Area } {\n  // if the media is rotated by the user, we cannot limit the position anymore\n  // as it might need to be negative.\n  const limitAreaFn = restrictPosition ? limitArea : noOp\n\n  const mediaBBoxSize = rotateSize(mediaSize.width, mediaSize.height, rotation)\n  const mediaNaturalBBoxSize = rotateSize(mediaSize.naturalWidth, mediaSize.naturalHeight, rotation)\n\n  // calculate the crop area in percentages\n  // in the rotated space\n  const croppedAreaPercentages = {\n    x: limitAreaFn(\n      100,\n      (((mediaBBoxSize.width - cropSize.width / zoom) / 2 - crop.x / zoom) / mediaBBoxSize.width) *\n        100\n    ),\n    y: limitAreaFn(\n      100,\n      (((mediaBBoxSize.height - cropSize.height / zoom) / 2 - crop.y / zoom) /\n        mediaBBoxSize.height) *\n        100\n    ),\n    width: limitAreaFn(100, ((cropSize.width / mediaBBoxSize.width) * 100) / zoom),\n    height: limitAreaFn(100, ((cropSize.height / mediaBBoxSize.height) * 100) / zoom),\n  }\n\n  // we compute the pixels size naively\n  const widthInPixels = Math.round(\n    limitAreaFn(\n      mediaNaturalBBoxSize.width,\n      (croppedAreaPercentages.width * mediaNaturalBBoxSize.width) / 100\n    )\n  )\n  const heightInPixels = Math.round(\n    limitAreaFn(\n      mediaNaturalBBoxSize.height,\n      (croppedAreaPercentages.height * mediaNaturalBBoxSize.height) / 100\n    )\n  )\n  const isImgWiderThanHigh = mediaNaturalBBoxSize.width >= mediaNaturalBBoxSize.height * aspect\n\n  // then we ensure the width and height exactly match the aspect (to avoid rounding approximations)\n  // if the media is wider than high, when zoom is 0, the crop height will be equals to image height\n  // thus we want to compute the width from the height and aspect for accuracy.\n  // Otherwise, we compute the height from width and aspect.\n  const sizePixels = isImgWiderThanHigh\n    ? {\n        width: Math.round(heightInPixels * aspect),\n        height: heightInPixels,\n      }\n    : {\n        width: widthInPixels,\n        height: Math.round(widthInPixels / aspect),\n      }\n\n  const croppedAreaPixels = {\n    ...sizePixels,\n    x: Math.round(\n      limitAreaFn(\n        mediaNaturalBBoxSize.width - sizePixels.width,\n        (croppedAreaPercentages.x * mediaNaturalBBoxSize.width) / 100\n      )\n    ),\n    y: Math.round(\n      limitAreaFn(\n        mediaNaturalBBoxSize.height - sizePixels.height,\n        (croppedAreaPercentages.y * mediaNaturalBBoxSize.height) / 100\n      )\n    ),\n  }\n\n  return { croppedAreaPercentages, croppedAreaPixels }\n}\n\n/**\n * Ensure the returned value is between 0 and max\n */\nfunction limitArea(max: number, value: number): number {\n  return Math.min(max, Math.max(0, value))\n}\n\nfunction noOp(_max: number, value: number) {\n  return value\n}\n\n/**\n * Compute crop and zoom from the croppedAreaPercentages.\n */\nexport function getInitialCropFromCroppedAreaPercentages(\n  croppedAreaPercentages: Area,\n  mediaSize: MediaSize,\n  rotation: number,\n  cropSize: Size,\n  minZoom: number,\n  maxZoom: number\n) {\n  const mediaBBoxSize = rotateSize(mediaSize.width, mediaSize.height, rotation)\n\n  // This is the inverse process of computeCroppedArea\n  const zoom = clamp(\n    (cropSize.width / mediaBBoxSize.width) * (100 / croppedAreaPercentages.width),\n    minZoom,\n    maxZoom\n  )\n\n  const crop = {\n    x:\n      (zoom * mediaBBoxSize.width) / 2 -\n      cropSize.width / 2 -\n      mediaBBoxSize.width * zoom * (croppedAreaPercentages.x / 100),\n    y:\n      (zoom * mediaBBoxSize.height) / 2 -\n      cropSize.height / 2 -\n      mediaBBoxSize.height * zoom * (croppedAreaPercentages.y / 100),\n  }\n\n  return { crop, zoom }\n}\n\n/**\n * Compute zoom from the croppedAreaPixels\n */\nfunction getZoomFromCroppedAreaPixels(\n  croppedAreaPixels: Area,\n  mediaSize: MediaSize,\n  cropSize: Size\n): number {\n  const mediaZoom = getMediaZoom(mediaSize)\n\n  return cropSize.height > cropSize.width\n    ? cropSize.height / (croppedAreaPixels.height * mediaZoom)\n    : cropSize.width / (croppedAreaPixels.width * mediaZoom)\n}\n\n/**\n * Compute crop and zoom from the croppedAreaPixels\n */\nexport function getInitialCropFromCroppedAreaPixels(\n  croppedAreaPixels: Area,\n  mediaSize: MediaSize,\n  rotation = 0,\n  cropSize: Size,\n  minZoom: number,\n  maxZoom: number\n): { crop: Point; zoom: number } {\n  const mediaNaturalBBoxSize = rotateSize(mediaSize.naturalWidth, mediaSize.naturalHeight, rotation)\n\n  const zoom = clamp(\n    getZoomFromCroppedAreaPixels(croppedAreaPixels, mediaSize, cropSize),\n    minZoom,\n    maxZoom\n  )\n\n  const cropZoom =\n    cropSize.height > cropSize.width\n      ? cropSize.height / croppedAreaPixels.height\n      : cropSize.width / croppedAreaPixels.width\n\n  const crop = {\n    x:\n      ((mediaNaturalBBoxSize.width - croppedAreaPixels.width) / 2 - croppedAreaPixels.x) * cropZoom,\n    y:\n      ((mediaNaturalBBoxSize.height - croppedAreaPixels.height) / 2 - croppedAreaPixels.y) *\n      cropZoom,\n  }\n  return { crop, zoom }\n}\n\n/**\n * Return the point that is the center of point a and b\n */\nexport function getCenter(a: Point, b: Point): Point {\n  return {\n    x: (b.x + a.x) / 2,\n    y: (b.y + a.y) / 2,\n  }\n}\n\nexport function getRadianAngle(degreeValue: number) {\n  return (degreeValue * Math.PI) / 180\n}\n\n/**\n * Returns the new bounding area of a rotated rectangle.\n */\nexport function rotateSize(width: number, height: number, rotation: number): Size {\n  const rotRad = getRadianAngle(rotation)\n\n  return {\n    width: Math.abs(Math.cos(rotRad) * width) + Math.abs(Math.sin(rotRad) * height),\n    height: Math.abs(Math.sin(rotRad) * width) + Math.abs(Math.cos(rotRad) * height),\n  }\n}\n\n/**\n * Clamp value between min and max\n */\nexport function clamp(value: number, min: number, max: number) {\n  return Math.min(Math.max(value, min), max)\n}\n\n/**\n * Combine multiple class names into a single string.\n */\nexport function classNames(...args: (boolean | string | number | undefined | void | null)[]) {\n  return args\n    .filter((value) => {\n      if (typeof value === 'string' && value.length > 0) {\n        return true\n      }\n\n      return false\n    })\n    .join(' ')\n    .trim()\n}\n","import React from 'react'\nimport normalizeWheel from 'normalize-wheel'\nimport { Area, MediaSize, Point, Size, VideoSrc } from './types'\nimport {\n  getCropSize,\n  restrictPosition,\n  getDistanceBetweenPoints,\n  getRotationBetweenPoints,\n  computeCroppedArea,\n  getCenter,\n  getInitialCropFromCroppedAreaPixels,\n  getInitialCropFromCroppedAreaPercentages,\n  classNames,\n  clamp,\n} from './helpers'\nimport cssStyles from './styles.css'\n\nexport type CropperProps = {\n  image?: string\n  video?: string | VideoSrc[]\n  transform?: string\n  crop: Point\n  zoom: number\n  rotation: number\n  aspect: number\n  minZoom: number\n  maxZoom: number\n  cropShape: 'rect' | 'round'\n  cropSize?: Size\n  objectFit?: 'contain' | 'horizontal-cover' | 'vertical-cover' | 'auto-cover'\n  showGrid?: boolean\n  zoomSpeed: number\n  zoomWithScroll?: boolean\n  onCropChange: (location: Point) => void\n  onZoomChange?: (zoom: number) => void\n  onRotationChange?: (rotation: number) => void\n  onCropComplete?: (croppedArea: Area, croppedAreaPixels: Area) => void\n  onCropAreaChange?: (croppedArea: Area, croppedAreaPixels: Area) => void\n  onCropSizeChange?: (cropSize: Size) => void\n  onInteractionStart?: () => void\n  onInteractionEnd?: () => void\n  onMediaLoaded?: (mediaSize: MediaSize) => void\n  style: {\n    containerStyle?: React.CSSProperties\n    mediaStyle?: React.CSSProperties\n    cropAreaStyle?: React.CSSProperties\n  }\n  classes: {\n    containerClassName?: string\n    mediaClassName?: string\n    cropAreaClassName?: string\n  }\n  restrictPosition: boolean\n  mediaProps: React.ImgHTMLAttributes<HTMLElement> | React.VideoHTMLAttributes<HTMLElement>\n  disableAutomaticStylesInjection?: boolean\n  initialCroppedAreaPixels?: Area\n  initialCroppedAreaPercentages?: Area\n  onTouchRequest?: (e: React.TouchEvent<HTMLDivElement>) => boolean\n  onWheelRequest?: (e: WheelEvent) => boolean\n  setImageRef?: (ref: React.RefObject<HTMLImageElement>) => void\n  setVideoRef?: (ref: React.RefObject<HTMLVideoElement>) => void\n  setMediaSize?: (size: MediaSize) => void\n  setCropSize?: (size: Size) => void\n  nonce?: string\n}\n\ntype State = {\n  cropSize: Size | null\n  hasWheelJustStarted: boolean\n}\n\nconst MIN_ZOOM = 1\nconst MAX_ZOOM = 3\n\nclass Cropper extends React.Component<CropperProps, State> {\n  static defaultProps = {\n    zoom: 1,\n    rotation: 0,\n    aspect: 4 / 3,\n    maxZoom: MAX_ZOOM,\n    minZoom: MIN_ZOOM,\n    cropShape: 'rect' as const,\n    objectFit: 'contain' as const,\n    showGrid: true,\n    style: {},\n    classes: {},\n    mediaProps: {},\n    zoomSpeed: 1,\n    restrictPosition: true,\n    zoomWithScroll: true,\n  }\n\n  imageRef: React.RefObject<HTMLImageElement> = React.createRef()\n  videoRef: React.RefObject<HTMLVideoElement> = React.createRef()\n  containerRef: HTMLDivElement | null = null\n  styleRef: HTMLStyleElement | null = null\n  containerRect: DOMRect | null = null\n  mediaSize: MediaSize = { width: 0, height: 0, naturalWidth: 0, naturalHeight: 0 }\n  dragStartPosition: Point = { x: 0, y: 0 }\n  dragStartCrop: Point = { x: 0, y: 0 }\n  lastPinchDistance = 0\n  lastPinchRotation = 0\n  rafDragTimeout: number | null = null\n  rafPinchTimeout: number | null = null\n  wheelTimer: number | null = null\n  currentDoc: Document = document\n  currentWindow: Window = window\n\n  state: State = {\n    cropSize: null,\n    hasWheelJustStarted: false,\n  }\n\n  componentDidMount() {\n    if (this.containerRef) {\n      if (this.containerRef.ownerDocument) {\n        this.currentDoc = this.containerRef.ownerDocument\n      }\n      if (this.currentDoc.defaultView) {\n        this.currentWindow = this.currentDoc.defaultView\n      }\n      this.currentWindow.addEventListener('resize', this.computeSizes)\n      this.props.zoomWithScroll &&\n        this.containerRef.addEventListener('wheel', this.onWheel, { passive: false })\n      this.containerRef.addEventListener('gesturestart', this.preventZoomSafari)\n      this.containerRef.addEventListener('gesturechange', this.preventZoomSafari)\n    }\n\n    if (!this.props.disableAutomaticStylesInjection) {\n      this.styleRef = this.currentDoc.createElement('style')\n      this.styleRef.setAttribute('type', 'text/css')\n      if (this.props.nonce) {\n        this.styleRef.setAttribute('nonce', this.props.nonce)\n      }\n      this.styleRef.innerHTML = cssStyles\n      this.currentDoc.head.appendChild(this.styleRef)\n    }\n\n    // when rendered via SSR, the image can already be loaded and its onLoad callback will never be called\n    if (this.imageRef.current && this.imageRef.current.complete) {\n      this.onMediaLoad()\n    }\n\n    // set image and video refs in the parent if the callbacks exist\n    if (this.props.setImageRef) {\n      this.props.setImageRef(this.imageRef)\n    }\n\n    if (this.props.setVideoRef) {\n      this.props.setVideoRef(this.videoRef)\n    }\n  }\n\n  componentWillUnmount() {\n    this.currentWindow.removeEventListener('resize', this.computeSizes)\n    if (this.containerRef) {\n      this.containerRef.removeEventListener('gesturestart', this.preventZoomSafari)\n      this.containerRef.removeEventListener('gesturechange', this.preventZoomSafari)\n    }\n\n    if (this.styleRef) {\n      this.styleRef.parentNode?.removeChild(this.styleRef)\n    }\n\n    this.cleanEvents()\n    this.props.zoomWithScroll && this.clearScrollEvent()\n  }\n\n  componentDidUpdate(prevProps: CropperProps) {\n    if (prevProps.rotation !== this.props.rotation) {\n      this.computeSizes()\n      this.recomputeCropPosition()\n    } else if (prevProps.aspect !== this.props.aspect) {\n      this.computeSizes()\n    } else if (prevProps.zoom !== this.props.zoom) {\n      this.recomputeCropPosition()\n    } else if (\n      prevProps.cropSize?.height !== this.props.cropSize?.height ||\n      prevProps.cropSize?.width !== this.props.cropSize?.width\n    ) {\n      this.computeSizes()\n    } else if (\n      prevProps.crop?.x !== this.props.crop?.x ||\n      prevProps.crop?.y !== this.props.crop?.y\n    ) {\n      this.emitCropAreaChange()\n    }\n    if (prevProps.zoomWithScroll !== this.props.zoomWithScroll && this.containerRef) {\n      this.props.zoomWithScroll\n        ? this.containerRef.addEventListener('wheel', this.onWheel, { passive: false })\n        : this.clearScrollEvent()\n    }\n    if (prevProps.video !== this.props.video) {\n      this.videoRef.current?.load()\n    }\n  }\n\n  // this is to prevent Safari on iOS >= 10 to zoom the page\n  preventZoomSafari = (e: Event) => e.preventDefault()\n\n  cleanEvents = () => {\n    this.currentDoc.removeEventListener('mousemove', this.onMouseMove)\n    this.currentDoc.removeEventListener('mouseup', this.onDragStopped)\n    this.currentDoc.removeEventListener('touchmove', this.onTouchMove)\n    this.currentDoc.removeEventListener('touchend', this.onDragStopped)\n  }\n\n  clearScrollEvent = () => {\n    if (this.containerRef) this.containerRef.removeEventListener('wheel', this.onWheel)\n    if (this.wheelTimer) {\n      clearTimeout(this.wheelTimer)\n    }\n  }\n\n  onMediaLoad = () => {\n    const cropSize = this.computeSizes()\n\n    if (cropSize) {\n      this.emitCropData()\n      this.setInitialCrop(cropSize)\n    }\n\n    if (this.props.onMediaLoaded) {\n      this.props.onMediaLoaded(this.mediaSize)\n    }\n  }\n\n  setInitialCrop = (cropSize: Size) => {\n    if (this.props.initialCroppedAreaPercentages) {\n      const { crop, zoom } = getInitialCropFromCroppedAreaPercentages(\n        this.props.initialCroppedAreaPercentages,\n        this.mediaSize,\n        this.props.rotation,\n        cropSize,\n        this.props.minZoom,\n        this.props.maxZoom\n      )\n\n      this.props.onCropChange(crop)\n      this.props.onZoomChange && this.props.onZoomChange(zoom)\n    } else if (this.props.initialCroppedAreaPixels) {\n      const { crop, zoom } = getInitialCropFromCroppedAreaPixels(\n        this.props.initialCroppedAreaPixels,\n        this.mediaSize,\n        this.props.rotation,\n        cropSize,\n        this.props.minZoom,\n        this.props.maxZoom\n      )\n\n      this.props.onCropChange(crop)\n      this.props.onZoomChange && this.props.onZoomChange(zoom)\n    }\n  }\n\n  getAspect() {\n    const { cropSize, aspect } = this.props\n    if (cropSize) {\n      return cropSize.width / cropSize.height\n    }\n    return aspect\n  }\n\n  computeSizes = () => {\n    const mediaRef = this.imageRef.current || this.videoRef.current\n\n    if (mediaRef && this.containerRef) {\n      this.containerRect = this.containerRef.getBoundingClientRect()\n      const containerAspect = this.containerRect.width / this.containerRect.height\n      const naturalWidth =\n        this.imageRef.current?.naturalWidth || this.videoRef.current?.videoWidth || 0\n      const naturalHeight =\n        this.imageRef.current?.naturalHeight || this.videoRef.current?.videoHeight || 0\n      const isMediaScaledDown =\n        mediaRef.offsetWidth < naturalWidth || mediaRef.offsetHeight < naturalHeight\n      const mediaAspect = naturalWidth / naturalHeight\n\n      // We do not rely on the offsetWidth/offsetHeight if the media is scaled down\n      // as the values they report are rounded. That will result in precision losses\n      // when calculating zoom. We use the fact that the media is positionned relative\n      // to the container. That allows us to use the container's dimensions\n      // and natural aspect ratio of the media to calculate accurate media size.\n      // However, for this to work, the container should not be rotated\n      let renderedMediaSize: Size\n\n      if (isMediaScaledDown) {\n        switch (this.props.objectFit) {\n          default:\n          case 'contain':\n            renderedMediaSize =\n              containerAspect > mediaAspect\n                ? {\n                    width: this.containerRect.height * mediaAspect,\n                    height: this.containerRect.height,\n                  }\n                : {\n                    width: this.containerRect.width,\n                    height: this.containerRect.width / mediaAspect,\n                  }\n            break\n          case 'horizontal-cover':\n            renderedMediaSize = {\n              width: this.containerRect.width,\n              height: this.containerRect.width / mediaAspect,\n            }\n            break\n          case 'vertical-cover':\n            renderedMediaSize = {\n              width: this.containerRect.height * mediaAspect,\n              height: this.containerRect.height,\n            }\n            break\n          case 'auto-cover':\n            renderedMediaSize =\n              naturalWidth > naturalHeight\n                ? {\n                    width: this.containerRect.width,\n                    height: this.containerRect.width / mediaAspect,\n                  }\n                : {\n                    width: this.containerRect.height * mediaAspect,\n                    height: this.containerRect.height,\n                  }\n            break\n        }\n      } else {\n        renderedMediaSize = {\n          width: mediaRef.offsetWidth,\n          height: mediaRef.offsetHeight,\n        }\n      }\n\n      this.mediaSize = {\n        ...renderedMediaSize,\n        naturalWidth,\n        naturalHeight,\n      }\n\n      // set media size in the parent\n      if (this.props.setMediaSize) {\n        this.props.setMediaSize(this.mediaSize)\n      }\n\n      const cropSize = this.props.cropSize\n        ? this.props.cropSize\n        : getCropSize(\n            this.mediaSize.width,\n            this.mediaSize.height,\n            this.containerRect.width,\n            this.containerRect.height,\n            this.props.aspect,\n            this.props.rotation\n          )\n\n      if (\n        this.state.cropSize?.height !== cropSize.height ||\n        this.state.cropSize?.width !== cropSize.width\n      ) {\n        this.props.onCropSizeChange && this.props.onCropSizeChange(cropSize)\n      }\n      this.setState({ cropSize }, this.recomputeCropPosition)\n      // pass crop size to parent\n      if (this.props.setCropSize) {\n        this.props.setCropSize(cropSize)\n      }\n\n      return cropSize\n    }\n  }\n\n  static getMousePoint = (e: MouseEvent | React.MouseEvent) => ({\n    x: Number(e.clientX),\n    y: Number(e.clientY),\n  })\n\n  static getTouchPoint = (touch: Touch | React.Touch) => ({\n    x: Number(touch.clientX),\n    y: Number(touch.clientY),\n  })\n\n  onMouseDown = (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\n    e.preventDefault()\n    this.currentDoc.addEventListener('mousemove', this.onMouseMove)\n    this.currentDoc.addEventListener('mouseup', this.onDragStopped)\n    this.onDragStart(Cropper.getMousePoint(e))\n  }\n\n  onMouseMove = (e: MouseEvent) => this.onDrag(Cropper.getMousePoint(e))\n\n  onTouchStart = (e: React.TouchEvent<HTMLDivElement>) => {\n    if (this.props.onTouchRequest && !this.props.onTouchRequest(e)) {\n      return\n    }\n\n    this.currentDoc.addEventListener('touchmove', this.onTouchMove, { passive: false }) // iOS 11 now defaults to passive: true\n    this.currentDoc.addEventListener('touchend', this.onDragStopped)\n\n    if (e.touches.length === 2) {\n      this.onPinchStart(e)\n    } else if (e.touches.length === 1) {\n      this.onDragStart(Cropper.getTouchPoint(e.touches[0]))\n    }\n  }\n\n  onTouchMove = (e: TouchEvent) => {\n    // Prevent whole page from scrolling on iOS.\n    e.preventDefault()\n    if (e.touches.length === 2) {\n      this.onPinchMove(e)\n    } else if (e.touches.length === 1) {\n      this.onDrag(Cropper.getTouchPoint(e.touches[0]))\n    }\n  }\n\n  onDragStart = ({ x, y }: Point) => {\n    this.dragStartPosition = { x, y }\n    this.dragStartCrop = { ...this.props.crop }\n    this.props.onInteractionStart?.()\n  }\n\n  onDrag = ({ x, y }: Point) => {\n    if (this.rafDragTimeout) this.currentWindow.cancelAnimationFrame(this.rafDragTimeout)\n\n    this.rafDragTimeout = this.currentWindow.requestAnimationFrame(() => {\n      if (!this.state.cropSize) return\n      if (x === undefined || y === undefined) return\n      const offsetX = x - this.dragStartPosition.x\n      const offsetY = y - this.dragStartPosition.y\n      const requestedPosition = {\n        x: this.dragStartCrop.x + offsetX,\n        y: this.dragStartCrop.y + offsetY,\n      }\n\n      const newPosition = this.props.restrictPosition\n        ? restrictPosition(\n            requestedPosition,\n            this.mediaSize,\n            this.state.cropSize,\n            this.props.zoom,\n            this.props.rotation\n          )\n        : requestedPosition\n      this.props.onCropChange(newPosition)\n    })\n  }\n\n  onDragStopped = () => {\n    this.cleanEvents()\n    this.emitCropData()\n    this.props.onInteractionEnd?.()\n  }\n\n  onPinchStart(e: React.TouchEvent<HTMLDivElement>) {\n    const pointA = Cropper.getTouchPoint(e.touches[0])\n    const pointB = Cropper.getTouchPoint(e.touches[1])\n    this.lastPinchDistance = getDistanceBetweenPoints(pointA, pointB)\n    this.lastPinchRotation = getRotationBetweenPoints(pointA, pointB)\n    this.onDragStart(getCenter(pointA, pointB))\n  }\n\n  onPinchMove(e: TouchEvent) {\n    const pointA = Cropper.getTouchPoint(e.touches[0])\n    const pointB = Cropper.getTouchPoint(e.touches[1])\n    const center = getCenter(pointA, pointB)\n    this.onDrag(center)\n\n    if (this.rafPinchTimeout) this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout)\n    this.rafPinchTimeout = this.currentWindow.requestAnimationFrame(() => {\n      const distance = getDistanceBetweenPoints(pointA, pointB)\n      const newZoom = this.props.zoom * (distance / this.lastPinchDistance)\n      this.setNewZoom(newZoom, center, { shouldUpdatePosition: false })\n      this.lastPinchDistance = distance\n\n      const rotation = getRotationBetweenPoints(pointA, pointB)\n      const newRotation = this.props.rotation + (rotation - this.lastPinchRotation)\n      this.props.onRotationChange && this.props.onRotationChange(newRotation)\n      this.lastPinchRotation = rotation\n    })\n  }\n\n  onWheel = (e: WheelEvent) => {\n    if (this.props.onWheelRequest && !this.props.onWheelRequest(e)) {\n      return\n    }\n\n    e.preventDefault()\n    const point = Cropper.getMousePoint(e)\n    const { pixelY } = normalizeWheel(e)\n    const newZoom = this.props.zoom - (pixelY * this.props.zoomSpeed) / 200\n    this.setNewZoom(newZoom, point, { shouldUpdatePosition: true })\n\n    if (!this.state.hasWheelJustStarted) {\n      this.setState({ hasWheelJustStarted: true }, () => this.props.onInteractionStart?.())\n    }\n\n    if (this.wheelTimer) {\n      clearTimeout(this.wheelTimer)\n    }\n    this.wheelTimer = this.currentWindow.setTimeout(\n      () => this.setState({ hasWheelJustStarted: false }, () => this.props.onInteractionEnd?.()),\n      250\n    )\n  }\n\n  getPointOnContainer = ({ x, y }: Point) => {\n    if (!this.containerRect) {\n      throw new Error('The Cropper is not mounted')\n    }\n    return {\n      x: this.containerRect.width / 2 - (x - this.containerRect.left),\n      y: this.containerRect.height / 2 - (y - this.containerRect.top),\n    }\n  }\n\n  getPointOnMedia = ({ x, y }: Point) => {\n    const { crop, zoom } = this.props\n    return {\n      x: (x + crop.x) / zoom,\n      y: (y + crop.y) / zoom,\n    }\n  }\n\n  setNewZoom = (zoom: number, point: Point, { shouldUpdatePosition = true } = {}) => {\n    if (!this.state.cropSize || !this.props.onZoomChange) return\n\n    const zoomPoint = this.getPointOnContainer(point)\n    const zoomTarget = this.getPointOnMedia(zoomPoint)\n    const newZoom = clamp(zoom, this.props.minZoom, this.props.maxZoom)\n    const requestedPosition = {\n      x: zoomTarget.x * newZoom - zoomPoint.x,\n      y: zoomTarget.y * newZoom - zoomPoint.y,\n    }\n\n    if (shouldUpdatePosition) {\n      const newPosition = this.props.restrictPosition\n        ? restrictPosition(\n            requestedPosition,\n            this.mediaSize,\n            this.state.cropSize,\n            newZoom,\n            this.props.rotation\n          )\n        : requestedPosition\n\n      this.props.onCropChange(newPosition)\n    }\n    this.props.onZoomChange(newZoom)\n  }\n\n  getCropData = () => {\n    if (!this.state.cropSize) {\n      return null\n    }\n\n    // this is to ensure the crop is correctly restricted after a zoom back (https://github.com/ValentinH/react-easy-crop/issues/6)\n    const restrictedPosition = this.props.restrictPosition\n      ? restrictPosition(\n          this.props.crop,\n          this.mediaSize,\n          this.state.cropSize,\n          this.props.zoom,\n          this.props.rotation\n        )\n      : this.props.crop\n    return computeCroppedArea(\n      restrictedPosition,\n      this.mediaSize,\n      this.state.cropSize,\n      this.getAspect(),\n      this.props.zoom,\n      this.props.rotation,\n      this.props.restrictPosition\n    )\n  }\n\n  emitCropData = () => {\n    const cropData = this.getCropData()\n    if (!cropData) return\n\n    const { croppedAreaPercentages, croppedAreaPixels } = cropData\n    if (this.props.onCropComplete) {\n      this.props.onCropComplete(croppedAreaPercentages, croppedAreaPixels)\n    }\n\n    if (this.props.onCropAreaChange) {\n      this.props.onCropAreaChange(croppedAreaPercentages, croppedAreaPixels)\n    }\n  }\n\n  emitCropAreaChange = () => {\n    const cropData = this.getCropData()\n    if (!cropData) return\n\n    const { croppedAreaPercentages, croppedAreaPixels } = cropData\n    if (this.props.onCropAreaChange) {\n      this.props.onCropAreaChange(croppedAreaPercentages, croppedAreaPixels)\n    }\n  }\n\n  recomputeCropPosition = () => {\n    if (!this.state.cropSize) return\n\n    const newPosition = this.props.restrictPosition\n      ? restrictPosition(\n          this.props.crop,\n          this.mediaSize,\n          this.state.cropSize,\n          this.props.zoom,\n          this.props.rotation\n        )\n      : this.props.crop\n\n    this.props.onCropChange(newPosition)\n    this.emitCropData()\n  }\n\n  render() {\n    const {\n      image,\n      video,\n      mediaProps,\n      transform,\n      crop: { x, y },\n      rotation,\n      zoom,\n      cropShape,\n      showGrid,\n      style: { containerStyle, cropAreaStyle, mediaStyle },\n      classes: { containerClassName, cropAreaClassName, mediaClassName },\n      objectFit,\n    } = this.props\n\n    return (\n      <div\n        onMouseDown={this.onMouseDown}\n        onTouchStart={this.onTouchStart}\n        ref={(el) => (this.containerRef = el)}\n        data-testid=\"container\"\n        style={containerStyle}\n        className={classNames('reactEasyCrop_Container', containerClassName)}\n      >\n        {image ? (\n          <img\n            alt=\"\"\n            className={classNames(\n              'reactEasyCrop_Image',\n              objectFit === 'contain' && 'reactEasyCrop_Contain',\n              objectFit === 'horizontal-cover' && 'reactEasyCrop_Cover_Horizontal',\n              objectFit === 'vertical-cover' && 'reactEasyCrop_Cover_Vertical',\n              objectFit === 'auto-cover' &&\n                (this.mediaSize.naturalWidth > this.mediaSize.naturalHeight\n                  ? 'reactEasyCrop_Cover_Horizontal'\n                  : 'reactEasyCrop_Cover_Vertical'),\n              mediaClassName\n            )}\n            {...(mediaProps as React.ImgHTMLAttributes<HTMLElement>)}\n            src={image}\n            ref={this.imageRef}\n            style={{\n              ...mediaStyle,\n              transform:\n                transform || `translate(${x}px, ${y}px) rotate(${rotation}deg) scale(${zoom})`,\n            }}\n            onLoad={this.onMediaLoad}\n          />\n        ) : (\n          video && (\n            <video\n              autoPlay\n              loop\n              muted={true}\n              className={classNames(\n                'reactEasyCrop_Video',\n                objectFit === 'contain' && 'reactEasyCrop_Contain',\n                objectFit === 'horizontal-cover' && 'reactEasyCrop_Cover_Horizontal',\n                objectFit === 'vertical-cover' && 'reactEasyCrop_Cover_Vertical',\n                objectFit === 'auto-cover' &&\n                  (this.mediaSize.naturalWidth > this.mediaSize.naturalHeight\n                    ? 'reactEasyCrop_Cover_Horizontal'\n                    : 'reactEasyCrop_Cover_Vertical'),\n                mediaClassName\n              )}\n              {...mediaProps}\n              ref={this.videoRef}\n              onLoadedMetadata={this.onMediaLoad}\n              style={{\n                ...mediaStyle,\n                transform:\n                  transform || `translate(${x}px, ${y}px) rotate(${rotation}deg) scale(${zoom})`,\n              }}\n              controls={false}\n            >\n              {(Array.isArray(video) ? video : [{ src: video }]).map((item) => (\n                <source key={item.src} {...item} />\n              ))}\n            </video>\n          )\n        )}\n        {this.state.cropSize && (\n          <div\n            style={{\n              ...cropAreaStyle,\n              width: this.state.cropSize.width,\n              height: this.state.cropSize.height,\n            }}\n            data-testid=\"cropper\"\n            className={classNames(\n              'reactEasyCrop_CropArea',\n              cropShape === 'round' && 'reactEasyCrop_CropAreaRound',\n              showGrid && 'reactEasyCrop_CropAreaGrid',\n              cropAreaClassName\n            )}\n          />\n        )}\n      </div>\n    )\n  }\n}\n\nexport default Cropper\n","export const MIN_ZOOM = 100;\r\nexport const MAX_ZOOM = 300;\r\nexport const POPOVER_PROPS = {\r\n\tplacement: 'bottom-start',\r\n};\r\n","/**\n * External dependencies\n */\nimport Cropper from 'react-easy-crop';\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { Spinner } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport { MIN_ZOOM, MAX_ZOOM } from './constants';\n\nimport { useImageEditingContext } from './context';\n\nexport default function ImageCropper( {\n\turl,\n\twidth,\n\theight,\n\tclientWidth,\n\tnaturalHeight,\n\tnaturalWidth,\n\tborderProps,\n} ) {\n\tconst {\n\t\tisInProgress,\n\t\teditedUrl,\n\t\tposition,\n\t\tzoom,\n\t\taspect,\n\t\tsetPosition,\n\t\tsetCrop,\n\t\tsetZoom,\n\t\trotation,\n\t} = useImageEditingContext();\n\n\tlet editedHeight = height || ( clientWidth * naturalHeight ) / naturalWidth;\n\n\tif ( rotation % 180 === 90 ) {\n\t\teditedHeight = ( clientWidth * naturalWidth ) / naturalHeight;\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tclassName={ classnames(\n\t\t\t\t'wp-block-image__crop-area',\n\t\t\t\tborderProps?.className,\n\t\t\t\t{\n\t\t\t\t\t'is-applying': isInProgress,\n\t\t\t\t}\n\t\t\t) }\n\t\t\tstyle={ {\n\t\t\t\t...borderProps?.style,\n\t\t\t\twidth: width || clientWidth,\n\t\t\t\theight: editedHeight,\n\t\t\t} }\n\t\t>\n\t\t\t<Cropper\n\t\t\t\timage={ editedUrl || url }\n\t\t\t\tdisabled={ isInProgress }\n\t\t\t\tminZoom={ MIN_ZOOM / 100 }\n\t\t\t\tmaxZoom={ MAX_ZOOM / 100 }\n\t\t\t\tcrop={ position }\n\t\t\t\tzoom={ zoom / 100 }\n\t\t\t\taspect={ aspect }\n\t\t\t\tonCropChange={ ( pos ) => {\n\t\t\t\t\tsetPosition( pos );\n\t\t\t\t} }\n\t\t\t\tonCropComplete={ ( newCropPercent ) => {\n\t\t\t\t\tsetCrop( newCropPercent );\n\t\t\t\t} }\n\t\t\t\tonZoomChange={ ( newZoom ) => {\n\t\t\t\t\tsetZoom( newZoom * 100 );\n\t\t\t\t} }\n\t\t\t/>\n\t\t\t{ isInProgress && <Spinner /> }\n\t\t</div>\n\t);\n}\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst search = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M13 5c-3.3 0-6 2.7-6 6 0 1.4.5 2.7 1.3 3.7l-3.8 3.8 1.1 1.1 3.8-3.8c1 .8 2.3 1.3 3.7 1.3 3.3 0 6-2.7 6-6S16.3 5 13 5zm0 10.5c-2.5 0-4.5-2-4.5-4.5s2-4.5 4.5-4.5 4.5 2 4.5 4.5-2 4.5-4.5 4.5z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default search;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { ToolbarButton, RangeControl, Dropdown } from '@wordpress/components';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { search } from '@wordpress/icons';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { MIN_ZOOM, MAX_ZOOM, POPOVER_PROPS } from './constants';\r\nimport { useImageEditingContext } from './context';\r\n\r\nexport default function ZoomDropdown() {\r\n\tconst { isInProgress, zoom, setZoom } = useImageEditingContext();\r\n\treturn (\r\n\t\t<Dropdown\r\n\t\t\tcontentClassName=\"wp-block-image__zoom\"\r\n\t\t\tpopoverProps={ POPOVER_PROPS }\r\n\t\t\trenderToggle={ ( { isOpen, onToggle } ) => (\r\n\t\t\t\t<ToolbarButton\r\n\t\t\t\t\ticon={ search }\r\n\t\t\t\t\tlabel={ __( 'Zoom' ) }\r\n\t\t\t\t\tonClick={ onToggle }\r\n\t\t\t\t\taria-expanded={ isOpen }\r\n\t\t\t\t\tdisabled={ isInProgress }\r\n\t\t\t\t/>\r\n\t\t\t) }\r\n\t\t\trenderContent={ () => (\r\n\t\t\t\t<RangeControl\r\n\t\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t\t\tlabel={ __( 'Zoom' ) }\r\n\t\t\t\t\tmin={ MIN_ZOOM }\r\n\t\t\t\t\tmax={ MAX_ZOOM }\r\n\t\t\t\t\tvalue={ Math.round( zoom ) }\r\n\t\t\t\t\tonChange={ setZoom }\r\n\t\t\t\t/>\r\n\t\t\t) }\r\n\t\t/>\r\n\t);\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst aspectRatio = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M18.5 5.5h-13c-1.1 0-2 .9-2 2v9c0 1.1.9 2 2 2h13c1.1 0 2-.9 2-2v-9c0-1.1-.9-2-2-2zm.5 11c0 .3-.2.5-.5.5h-13c-.3 0-.5-.2-.5-.5v-9c0-.3.2-.5.5-.5h13c.3 0 .5.2.5.5v9zM6.5 12H8v-2h2V8.5H6.5V12zm9.5 2h-2v1.5h3.5V12H16v2z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default aspectRatio;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { check, aspectRatio as aspectRatioIcon } from '@wordpress/icons';\r\nimport { DropdownMenu, MenuGroup, MenuItem } from '@wordpress/components';\r\nimport { __ } from '@wordpress/i18n';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { POPOVER_PROPS } from './constants';\r\nimport { useImageEditingContext } from './context';\r\n\r\nfunction AspectGroup( { aspectRatios, isDisabled, label, onClick, value } ) {\r\n\treturn (\r\n\t\t<MenuGroup label={ label }>\r\n\t\t\t{ aspectRatios.map( ( { title, aspect } ) => (\r\n\t\t\t\t<MenuItem\r\n\t\t\t\t\tkey={ aspect }\r\n\t\t\t\t\tdisabled={ isDisabled }\r\n\t\t\t\t\tonClick={ () => {\r\n\t\t\t\t\t\tonClick( aspect );\r\n\t\t\t\t\t} }\r\n\t\t\t\t\trole=\"menuitemradio\"\r\n\t\t\t\t\tisSelected={ aspect === value }\r\n\t\t\t\t\ticon={ aspect === value ? check : undefined }\r\n\t\t\t\t>\r\n\t\t\t\t\t{ title }\r\n\t\t\t\t</MenuItem>\r\n\t\t\t) ) }\r\n\t\t</MenuGroup>\r\n\t);\r\n}\r\n\r\nexport default function AspectRatioDropdown( { toggleProps } ) {\r\n\tconst { isInProgress, aspect, setAspect, defaultAspect } =\r\n\t\tuseImageEditingContext();\r\n\r\n\treturn (\r\n\t\t<DropdownMenu\r\n\t\t\ticon={ aspectRatioIcon }\r\n\t\t\tlabel={ __( 'Aspect Ratio' ) }\r\n\t\t\tpopoverProps={ POPOVER_PROPS }\r\n\t\t\ttoggleProps={ toggleProps }\r\n\t\t\tclassName=\"wp-block-image__aspect-ratio\"\r\n\t\t>\r\n\t\t\t{ ( { onClose } ) => (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<AspectGroup\r\n\t\t\t\t\t\tisDisabled={ isInProgress }\r\n\t\t\t\t\t\tonClick={ ( newAspect ) => {\r\n\t\t\t\t\t\t\tsetAspect( newAspect );\r\n\t\t\t\t\t\t\tonClose();\r\n\t\t\t\t\t\t} }\r\n\t\t\t\t\t\tvalue={ aspect }\r\n\t\t\t\t\t\taspectRatios={ [\r\n\t\t\t\t\t\t\t// All ratios should be mirrored in AspectRatioTool in @wordpress/block-editor.\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttitle: __( 'Original' ),\r\n\t\t\t\t\t\t\t\taspect: defaultAspect,\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttitle: __( 'Square' ),\r\n\t\t\t\t\t\t\t\taspect: 1,\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t] }\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<AspectGroup\r\n\t\t\t\t\t\tlabel={ __( 'Landscape' ) }\r\n\t\t\t\t\t\tisDisabled={ isInProgress }\r\n\t\t\t\t\t\tonClick={ ( newAspect ) => {\r\n\t\t\t\t\t\t\tsetAspect( newAspect );\r\n\t\t\t\t\t\t\tonClose();\r\n\t\t\t\t\t\t} }\r\n\t\t\t\t\t\tvalue={ aspect }\r\n\t\t\t\t\t\taspectRatios={ [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttitle: __( '16:9' ),\r\n\t\t\t\t\t\t\t\taspect: 16 / 9,\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttitle: __( '4:3' ),\r\n\t\t\t\t\t\t\t\taspect: 4 / 3,\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttitle: __( '3:2' ),\r\n\t\t\t\t\t\t\t\taspect: 3 / 2,\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t] }\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<AspectGroup\r\n\t\t\t\t\t\tlabel={ __( 'Portrait' ) }\r\n\t\t\t\t\t\tisDisabled={ isInProgress }\r\n\t\t\t\t\t\tonClick={ ( newAspect ) => {\r\n\t\t\t\t\t\t\tsetAspect( newAspect );\r\n\t\t\t\t\t\t\tonClose();\r\n\t\t\t\t\t\t} }\r\n\t\t\t\t\t\tvalue={ aspect }\r\n\t\t\t\t\t\taspectRatios={ [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttitle: __( '9:16' ),\r\n\t\t\t\t\t\t\t\taspect: 9 / 16,\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttitle: __( '3:4' ),\r\n\t\t\t\t\t\t\t\taspect: 3 / 4,\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttitle: __( '2:3' ),\r\n\t\t\t\t\t\t\t\taspect: 2 / 3,\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t] }\r\n\t\t\t\t\t/>\r\n\t\t\t\t</>\r\n\t\t\t) }\r\n\t\t</DropdownMenu>\r\n\t);\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst rotateRight = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M15.1 4.8l-3-2.5V4c-4.4 0-8 3.6-8 8 0 3.7 2.5 6.9 6 7.7.3.1.6.1 1 .2l.2-1.5c-.4 0-.7-.1-1.1-.2l-.1.2v-.2c-2.6-.8-4.5-3.3-4.5-6.2 0-3.6 2.9-6.5 6.5-6.5v1.8l3-2.5zM20 11c-.2-1.4-.7-2.7-1.6-3.8l-1.2.8c.7.9 1.1 2 1.3 3.1L20 11zm-1.5 1.8c-.1.5-.2 1.1-.4 1.6s-.5 1-.8 1.5l1.2.9c.4-.5.8-1.1 1-1.8s.5-1.3.5-2l-1.5-.2zm-5.6 5.6l.2 1.5c1.4-.2 2.7-.7 3.8-1.6l-.9-1.1c-.9.7-2 1.1-3.1 1.2z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default rotateRight;\r\n","/**\r\n * WordPress dependencies\r\n */\r\n\r\nimport { ToolbarButton } from '@wordpress/components';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { rotateRight as rotateRightIcon } from '@wordpress/icons';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { useImageEditingContext } from './context';\r\n\r\nexport default function RotationButton() {\r\n\tconst { isInProgress, rotateClockwise } = useImageEditingContext();\r\n\treturn (\r\n\t\t<ToolbarButton\r\n\t\t\ticon={ rotateRightIcon }\r\n\t\t\tlabel={ __( 'Rotate' ) }\r\n\t\t\tonClick={ rotateClockwise }\r\n\t\t\tdisabled={ isInProgress }\r\n\t\t/>\r\n\t);\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { ToolbarButton } from '@wordpress/components';\r\nimport { __ } from '@wordpress/i18n';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { useImageEditingContext } from './context';\r\n\r\nexport default function FormControls() {\r\n\tconst { isInProgress, apply, cancel } = useImageEditingContext();\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<ToolbarButton onClick={ apply } disabled={ isInProgress }>\r\n\t\t\t\t{ __( 'Apply' ) }\r\n\t\t\t</ToolbarButton>\r\n\t\t\t<ToolbarButton onClick={ cancel }>{ __( 'Cancel' ) }</ToolbarButton>\r\n\t\t</>\r\n\t);\r\n}\r\n","/**\n * WordPress dependencies\n */\nimport { ToolbarGroup, ToolbarItem } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport BlockControls from '../block-controls';\nimport ImageEditingProvider from './context';\nimport Cropper from './cropper';\nimport ZoomDropdown from './zoom-dropdown';\nimport AspectRatioDropdown from './aspect-ratio-dropdown';\nimport RotationButton from './rotation-button';\nimport FormControls from './form-controls';\n\nexport default function ImageEditor( {\n\tid,\n\turl,\n\twidth,\n\theight,\n\tclientWidth,\n\tnaturalHeight,\n\tnaturalWidth,\n\tonSaveImage,\n\tonFinishEditing,\n\tborderProps,\n} ) {\n\treturn (\n\t\t<ImageEditingProvider\n\t\t\tid={ id }\n\t\t\turl={ url }\n\t\t\tnaturalWidth={ naturalWidth }\n\t\t\tnaturalHeight={ naturalHeight }\n\t\t\tonSaveImage={ onSaveImage }\n\t\t\tonFinishEditing={ onFinishEditing }\n\t\t>\n\t\t\t<Cropper\n\t\t\t\tborderProps={ borderProps }\n\t\t\t\turl={ url }\n\t\t\t\twidth={ width }\n\t\t\t\theight={ height }\n\t\t\t\tclientWidth={ clientWidth }\n\t\t\t\tnaturalHeight={ naturalHeight }\n\t\t\t\tnaturalWidth={ naturalWidth }\n\t\t\t/>\n\t\t\t<BlockControls>\n\t\t\t\t<ToolbarGroup>\n\t\t\t\t\t<ZoomDropdown />\n\t\t\t\t\t<ToolbarItem>\n\t\t\t\t\t\t{ ( toggleProps ) => (\n\t\t\t\t\t\t\t<AspectRatioDropdown toggleProps={ toggleProps } />\n\t\t\t\t\t\t) }\n\t\t\t\t\t</ToolbarItem>\n\t\t\t\t\t<RotationButton />\n\t\t\t\t</ToolbarGroup>\n\t\t\t\t<ToolbarGroup>\n\t\t\t\t\t<FormControls />\n\t\t\t\t</ToolbarGroup>\n\t\t\t</BlockControls>\n\t\t</ImageEditingProvider>\n\t);\n}\n","/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\tButton,\r\n\tButtonGroup,\r\n\tSelectControl,\r\n\t__experimentalNumberControl as NumberControl,\r\n\t__experimentalHStack as HStack,\r\n} from '@wordpress/components';\r\nimport { __ } from '@wordpress/i18n';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport useDimensionHandler from './use-dimension-handler';\r\n\r\nconst IMAGE_SIZE_PRESETS = [ 25, 50, 75, 100 ];\r\nconst noop = () => {};\r\n\r\nexport default function ImageSizeControl( {\r\n\timageSizeHelp,\r\n\timageWidth,\r\n\timageHeight,\r\n\timageSizeOptions = [],\r\n\tisResizable = true,\r\n\tslug,\r\n\twidth,\r\n\theight,\r\n\tonChange,\r\n\tonChangeImage = noop,\r\n} ) {\r\n\tconst { currentHeight, currentWidth, updateDimension, updateDimensions } =\r\n\t\tuseDimensionHandler( height, width, imageHeight, imageWidth, onChange );\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{ imageSizeOptions && imageSizeOptions.length > 0 && (\r\n\t\t\t\t<SelectControl\r\n\t\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t\t\tlabel={ __( 'Resolution' ) }\r\n\t\t\t\t\tvalue={ slug }\r\n\t\t\t\t\toptions={ imageSizeOptions }\r\n\t\t\t\t\tonChange={ onChangeImage }\r\n\t\t\t\t\thelp={ imageSizeHelp }\r\n\t\t\t\t\tsize=\"__unstable-large\"\r\n\t\t\t\t/>\r\n\t\t\t) }\r\n\t\t\t{ isResizable && (\r\n\t\t\t\t<div className=\"block-editor-image-size-control\">\r\n\t\t\t\t\t<HStack align=\"baseline\" spacing=\"3\">\r\n\t\t\t\t\t\t<NumberControl\r\n\t\t\t\t\t\t\tclassName=\"block-editor-image-size-control__width\"\r\n\t\t\t\t\t\t\tlabel={ __( 'Width' ) }\r\n\t\t\t\t\t\t\tvalue={ currentWidth }\r\n\t\t\t\t\t\t\tmin={ 1 }\r\n\t\t\t\t\t\t\tonChange={ ( value ) =>\r\n\t\t\t\t\t\t\t\tupdateDimension( 'width', value )\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tsize=\"__unstable-large\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<NumberControl\r\n\t\t\t\t\t\t\tclassName=\"block-editor-image-size-control__height\"\r\n\t\t\t\t\t\t\tlabel={ __( 'Height' ) }\r\n\t\t\t\t\t\t\tvalue={ currentHeight }\r\n\t\t\t\t\t\t\tmin={ 1 }\r\n\t\t\t\t\t\t\tonChange={ ( value ) =>\r\n\t\t\t\t\t\t\t\tupdateDimension( 'height', value )\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tsize=\"__unstable-large\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</HStack>\r\n\t\t\t\t\t<HStack>\r\n\t\t\t\t\t\t<ButtonGroup aria-label={ __( 'Image size presets' ) }>\r\n\t\t\t\t\t\t\t{ IMAGE_SIZE_PRESETS.map( ( scale ) => {\r\n\t\t\t\t\t\t\t\tconst scaledWidth = Math.round(\r\n\t\t\t\t\t\t\t\t\timageWidth * ( scale / 100 )\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\tconst scaledHeight = Math.round(\r\n\t\t\t\t\t\t\t\t\timageHeight * ( scale / 100 )\r\n\t\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t\tconst isCurrent =\r\n\t\t\t\t\t\t\t\t\tcurrentWidth === scaledWidth &&\r\n\t\t\t\t\t\t\t\t\tcurrentHeight === scaledHeight;\r\n\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\tkey={ scale }\r\n\t\t\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\t\t\tvariant={\r\n\t\t\t\t\t\t\t\t\t\t\tisCurrent ? 'primary' : undefined\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tisPressed={ isCurrent }\r\n\t\t\t\t\t\t\t\t\t\tonClick={ () =>\r\n\t\t\t\t\t\t\t\t\t\t\tupdateDimensions(\r\n\t\t\t\t\t\t\t\t\t\t\t\tscaledHeight,\r\n\t\t\t\t\t\t\t\t\t\t\t\tscaledWidth\r\n\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{ scale }%\r\n\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t} ) }\r\n\t\t\t\t\t\t</ButtonGroup>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\tonClick={ () => updateDimensions() }\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{ __( 'Reset' ) }\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</HStack>\r\n\t\t\t\t</div>\r\n\t\t\t) }\r\n\t\t</>\r\n\t);\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useEffect, useState } from '@wordpress/element';\r\n\r\nexport default function useDimensionHandler(\r\n\tcustomHeight,\r\n\tcustomWidth,\r\n\tdefaultHeight,\r\n\tdefaultWidth,\r\n\tonChange\r\n) {\r\n\tconst [ currentWidth, setCurrentWidth ] = useState(\r\n\t\tcustomWidth ?? defaultWidth ?? ''\r\n\t);\r\n\tconst [ currentHeight, setCurrentHeight ] = useState(\r\n\t\tcustomHeight ?? defaultHeight ?? ''\r\n\t);\r\n\r\n\t// When an image is first inserted, the default dimensions are initially\r\n\t// undefined. This effect updates the dimensions when the default values\r\n\t// come through.\r\n\tuseEffect( () => {\r\n\t\tif ( customWidth === undefined && defaultWidth !== undefined ) {\r\n\t\t\tsetCurrentWidth( defaultWidth );\r\n\t\t}\r\n\t\tif ( customHeight === undefined && defaultHeight !== undefined ) {\r\n\t\t\tsetCurrentHeight( defaultHeight );\r\n\t\t}\r\n\t}, [ defaultWidth, defaultHeight ] );\r\n\r\n\t// If custom values change, it means an outsider has resized the image using some other method (eg resize box)\r\n\t// this keeps track of these values too. We need to parse before comparing; custom values can be strings.\r\n\tuseEffect( () => {\r\n\t\tif (\r\n\t\t\tcustomWidth !== undefined &&\r\n\t\t\tNumber.parseInt( customWidth ) !== Number.parseInt( currentWidth )\r\n\t\t) {\r\n\t\t\tsetCurrentWidth( customWidth );\r\n\t\t}\r\n\t\tif (\r\n\t\t\tcustomHeight !== undefined &&\r\n\t\t\tNumber.parseInt( customHeight ) !== Number.parseInt( currentHeight )\r\n\t\t) {\r\n\t\t\tsetCurrentHeight( customHeight );\r\n\t\t}\r\n\t}, [ customWidth, customHeight ] );\r\n\r\n\tconst updateDimension = ( dimension, value ) => {\r\n\t\tconst parsedValue = value === '' ? undefined : parseInt( value, 10 );\r\n\t\tif ( dimension === 'width' ) {\r\n\t\t\tsetCurrentWidth( parsedValue );\r\n\t\t} else {\r\n\t\t\tsetCurrentHeight( parsedValue );\r\n\t\t}\r\n\t\tonChange( {\r\n\t\t\t[ dimension ]: parsedValue,\r\n\t\t} );\r\n\t};\r\n\r\n\tconst updateDimensions = ( nextHeight, nextWidth ) => {\r\n\t\tsetCurrentHeight( nextHeight ?? defaultHeight );\r\n\t\tsetCurrentWidth( nextWidth ?? defaultWidth );\r\n\t\tonChange( { height: nextHeight, width: nextWidth } );\r\n\t};\r\n\r\n\treturn {\r\n\t\tcurrentHeight,\r\n\t\tcurrentWidth,\r\n\t\tupdateDimension,\r\n\t\tupdateDimensions,\r\n\t};\r\n}\r\n","/**\r\n * External dependencies\r\n */\r\nimport classnames from 'classnames';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { ExternalLink } from '@wordpress/components';\r\nimport { safeDecodeURI, filterURLForDisplay } from '@wordpress/url';\r\n\r\nexport default function LinkViewerURL( { url, urlLabel, className } ) {\r\n\tconst linkClassName = classnames(\r\n\t\tclassName,\r\n\t\t'block-editor-url-popover__link-viewer-url'\r\n\t);\r\n\r\n\tif ( ! url ) {\r\n\t\treturn <span className={ linkClassName }></span>;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<ExternalLink className={ linkClassName } href={ url }>\r\n\t\t\t{ urlLabel || filterURLForDisplay( safeDecodeURI( url ) ) }\r\n\t\t</ExternalLink>\r\n\t);\r\n}\r\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { forwardRef, useState } from '@wordpress/element';\nimport {\n\tButton,\n\tPopover,\n\tprivateApis as componentsPrivateApis,\n} from '@wordpress/components';\nimport { chevronDown } from '@wordpress/icons';\nimport deprecated from '@wordpress/deprecated';\n\n/**\n * Internal dependencies\n */\nimport LinkViewer from './link-viewer';\nimport LinkEditor from './link-editor';\nimport { unlock } from '../../lock-unlock';\n\nconst { __experimentalPopoverLegacyPositionToPlacement } = unlock(\n\tcomponentsPrivateApis\n);\n\nconst DEFAULT_PLACEMENT = 'bottom';\n\nconst URLPopover = forwardRef(\n\t(\n\t\t{\n\t\t\tadditionalControls,\n\t\t\tchildren,\n\t\t\trenderSettings,\n\t\t\t// The DEFAULT_PLACEMENT value is assigned inside the function's body\n\t\t\tplacement,\n\t\t\tfocusOnMount = 'firstElement',\n\t\t\t// Deprecated\n\t\t\tposition,\n\t\t\t// Rest\n\t\t\t...popoverProps\n\t\t},\n\t\tref\n\t) => {\n\t\tif ( position !== undefined ) {\n\t\t\tdeprecated( '`position` prop in wp.blockEditor.URLPopover', {\n\t\t\t\tsince: '6.2',\n\t\t\t\talternative: '`placement` prop',\n\t\t\t} );\n\t\t}\n\n\t\t// Compute popover's placement:\n\t\t// - give priority to `placement` prop, if defined\n\t\t// - otherwise, compute it from the legacy `position` prop (if defined)\n\t\t// - finally, fallback to the DEFAULT_PLACEMENT.\n\t\tlet computedPlacement;\n\t\tif ( placement !== undefined ) {\n\t\t\tcomputedPlacement = placement;\n\t\t} else if ( position !== undefined ) {\n\t\t\tcomputedPlacement =\n\t\t\t\t__experimentalPopoverLegacyPositionToPlacement( position );\n\t\t}\n\t\tcomputedPlacement = computedPlacement || DEFAULT_PLACEMENT;\n\n\t\tconst [ isSettingsExpanded, setIsSettingsExpanded ] = useState( false );\n\n\t\tconst showSettings = !! renderSettings && isSettingsExpanded;\n\n\t\tconst toggleSettingsVisibility = () => {\n\t\t\tsetIsSettingsExpanded( ! isSettingsExpanded );\n\t\t};\n\n\t\treturn (\n\t\t\t<Popover\n\t\t\t\tref={ ref }\n\t\t\t\tclassName=\"block-editor-url-popover\"\n\t\t\t\tfocusOnMount={ focusOnMount }\n\t\t\t\tplacement={ computedPlacement }\n\t\t\t\tshift\n\t\t\t\tvariant=\"toolbar\"\n\t\t\t\t{ ...popoverProps }\n\t\t\t>\n\t\t\t\t<div className=\"block-editor-url-popover__input-container\">\n\t\t\t\t\t<div className=\"block-editor-url-popover__row\">\n\t\t\t\t\t\t{ children }\n\t\t\t\t\t\t{ !! renderSettings && (\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tclassName=\"block-editor-url-popover__settings-toggle\"\n\t\t\t\t\t\t\t\ticon={ chevronDown }\n\t\t\t\t\t\t\t\tlabel={ __( 'Link settings' ) }\n\t\t\t\t\t\t\t\tonClick={ toggleSettingsVisibility }\n\t\t\t\t\t\t\t\taria-expanded={ isSettingsExpanded }\n\t\t\t\t\t\t\t\tsize=\"compact\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t{ showSettings && (\n\t\t\t\t\t<div className=\"block-editor-url-popover__settings\">\n\t\t\t\t\t\t{ renderSettings() }\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t\t\t{ additionalControls && ! showSettings && (\n\t\t\t\t\t<div className=\"block-editor-url-popover__additional-controls\">\n\t\t\t\t\t\t{ additionalControls }\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t\t</Popover>\n\t\t);\n\t}\n);\n\nURLPopover.LinkEditor = LinkEditor;\n\nURLPopover.LinkViewer = LinkViewer;\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/url-popover/README.md\n */\nexport default URLPopover;\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Button } from '@wordpress/components';\nimport { keyboardReturn } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport URLInput from '../url-input';\n\nexport default function LinkEditor( {\n\tautocompleteRef,\n\tclassName,\n\tonChangeInputValue,\n\tvalue,\n\t...props\n} ) {\n\treturn (\n\t\t<form\n\t\t\tclassName={ classnames(\n\t\t\t\t'block-editor-url-popover__link-editor',\n\t\t\t\tclassName\n\t\t\t) }\n\t\t\t{ ...props }\n\t\t>\n\t\t\t<URLInput\n\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\tvalue={ value }\n\t\t\t\tonChange={ onChangeInputValue }\n\t\t\t\tautocompleteRef={ autocompleteRef }\n\t\t\t/>\n\t\t\t<Button\n\t\t\t\ticon={ keyboardReturn }\n\t\t\t\tlabel={ __( 'Apply' ) }\n\t\t\t\ttype=\"submit\"\n\t\t\t\tsize=\"compact\"\n\t\t\t/>\n\t\t</form>\n\t);\n}\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Button } from '@wordpress/components';\nimport { edit } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport LinkViewerURL from './link-viewer-url';\n\nexport default function LinkViewer( {\n\tclassName,\n\tlinkClassName,\n\tonEditLinkClick,\n\turl,\n\turlLabel,\n\t...props\n} ) {\n\treturn (\n\t\t<div\n\t\t\tclassName={ classnames(\n\t\t\t\t'block-editor-url-popover__link-viewer',\n\t\t\t\tclassName\n\t\t\t) }\n\t\t\t{ ...props }\n\t\t>\n\t\t\t<LinkViewerURL\n\t\t\t\turl={ url }\n\t\t\t\turlLabel={ urlLabel }\n\t\t\t\tclassName={ linkClassName }\n\t\t\t/>\n\t\t\t{ onEditLinkClick && (\n\t\t\t\t<Button\n\t\t\t\t\ticon={ edit }\n\t\t\t\t\tlabel={ __( 'Edit' ) }\n\t\t\t\t\tonClick={ onEditLinkClick }\n\t\t\t\t\tsize=\"compact\"\n\t\t\t\t/>\n\t\t\t) }\n\t\t</div>\n\t);\n}\n","/**\r\n * External dependencies\r\n */\r\nimport classnames from 'classnames';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\tButton,\r\n\tFormFileUpload,\r\n\tPlaceholder,\r\n\tDropZone,\r\n\twithFilters,\r\n} from '@wordpress/components';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { useState, useEffect } from '@wordpress/element';\r\nimport { useSelect } from '@wordpress/data';\r\nimport { keyboardReturn } from '@wordpress/icons';\r\nimport { pasteHandler } from '@wordpress/blocks';\r\nimport deprecated from '@wordpress/deprecated';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport MediaUpload from '../media-upload';\r\nimport MediaUploadCheck from '../media-upload/check';\r\nimport URLPopover from '../url-popover';\r\nimport { store as blockEditorStore } from '../../store';\r\n\r\nconst noop = () => {};\r\n\r\nconst InsertFromURLPopover = ( {\r\n\tsrc,\r\n\tonChange,\r\n\tonSubmit,\r\n\tonClose,\r\n\tpopoverAnchor,\r\n} ) => (\r\n\t<URLPopover anchor={ popoverAnchor } onClose={ onClose }>\r\n\t\t<form\r\n\t\t\tclassName=\"block-editor-media-placeholder__url-input-form\"\r\n\t\t\tonSubmit={ onSubmit }\r\n\t\t>\r\n\t\t\t<input\r\n\t\t\t\tclassName=\"block-editor-media-placeholder__url-input-field\"\r\n\t\t\t\ttype=\"text\"\r\n\t\t\t\taria-label={ __( 'URL' ) }\r\n\t\t\t\tplaceholder={ __( 'Paste or type URL' ) }\r\n\t\t\t\tonChange={ onChange }\r\n\t\t\t\tvalue={ src }\r\n\t\t\t/>\r\n\t\t\t<Button\r\n\t\t\t\tclassName=\"block-editor-media-placeholder__url-input-submit-button\"\r\n\t\t\t\ticon={ keyboardReturn }\r\n\t\t\t\tlabel={ __( 'Apply' ) }\r\n\t\t\t\ttype=\"submit\"\r\n\t\t\t/>\r\n\t\t</form>\r\n\t</URLPopover>\r\n);\r\n\r\nconst URLSelectionUI = ( {\r\n\tisURLInputVisible,\r\n\tsrc,\r\n\tonChangeSrc,\r\n\tonSubmitSrc,\r\n\topenURLInput,\r\n\tcloseURLInput,\r\n} ) => {\r\n\t// Use internal state instead of a ref to make sure that the component\r\n\t// re-renders when the popover's anchor updates.\r\n\tconst [ popoverAnchor, setPopoverAnchor ] = useState( null );\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName=\"block-editor-media-placeholder__url-input-container\"\r\n\t\t\tref={ setPopoverAnchor }\r\n\t\t>\r\n\t\t\t<Button\r\n\t\t\t\tclassName=\"block-editor-media-placeholder__button\"\r\n\t\t\t\tonClick={ openURLInput }\r\n\t\t\t\tisPressed={ isURLInputVisible }\r\n\t\t\t\tvariant=\"tertiary\"\r\n\t\t\t>\r\n\t\t\t\t{ __( 'Insert from URL' ) }\r\n\t\t\t</Button>\r\n\t\t\t{ isURLInputVisible && (\r\n\t\t\t\t<InsertFromURLPopover\r\n\t\t\t\t\tsrc={ src }\r\n\t\t\t\t\tonChange={ onChangeSrc }\r\n\t\t\t\t\tonSubmit={ onSubmitSrc }\r\n\t\t\t\t\tonClose={ closeURLInput }\r\n\t\t\t\t\tpopoverAnchor={ popoverAnchor }\r\n\t\t\t\t/>\r\n\t\t\t) }\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport function MediaPlaceholder( {\r\n\tvalue = {},\r\n\tallowedTypes,\r\n\tclassName,\r\n\ticon,\r\n\tlabels = {},\r\n\tmediaPreview,\r\n\tnotices,\r\n\tisAppender,\r\n\taccept,\r\n\taddToGallery,\r\n\tmultiple = false,\r\n\thandleUpload = true,\r\n\tdisableDropZone,\r\n\tdisableMediaButtons,\r\n\tonError,\r\n\tonSelect,\r\n\tonCancel,\r\n\tonSelectURL,\r\n\tonToggleFeaturedImage,\r\n\tonDoubleClick,\r\n\tonFilesPreUpload = noop,\r\n\tonHTMLDrop: deprecatedOnHTMLDrop,\r\n\tchildren,\r\n\tmediaLibraryButton,\r\n\tplaceholder,\r\n\tstyle,\r\n} ) {\r\n\tif ( deprecatedOnHTMLDrop ) {\r\n\t\tdeprecated( 'wp.blockEditor.MediaPlaceholder onHTMLDrop prop', {\r\n\t\t\tsince: '6.2',\r\n\t\t\tversion: '6.4',\r\n\t\t} );\r\n\t}\r\n\r\n\tconst mediaUpload = useSelect( ( select ) => {\r\n\t\tconst { getSettings } = select( blockEditorStore );\r\n\t\treturn getSettings().mediaUpload;\r\n\t}, [] );\r\n\tconst [ src, setSrc ] = useState( '' );\r\n\tconst [ isURLInputVisible, setIsURLInputVisible ] = useState( false );\r\n\r\n\tuseEffect( () => {\r\n\t\tsetSrc( value?.src ?? '' );\r\n\t}, [ value?.src ] );\r\n\r\n\tconst onlyAllowsImages = () => {\r\n\t\tif ( ! allowedTypes || allowedTypes.length === 0 ) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn allowedTypes.every(\r\n\t\t\t( allowedType ) =>\r\n\t\t\t\tallowedType === 'image' || allowedType.startsWith( 'image/' )\r\n\t\t);\r\n\t};\r\n\r\n\tconst onChangeSrc = ( event ) => {\r\n\t\tsetSrc( event.target.value );\r\n\t};\r\n\r\n\tconst openURLInput = () => {\r\n\t\tsetIsURLInputVisible( true );\r\n\t};\r\n\tconst closeURLInput = () => {\r\n\t\tsetIsURLInputVisible( false );\r\n\t};\r\n\r\n\tconst onSubmitSrc = ( event ) => {\r\n\t\tevent.preventDefault();\r\n\t\tif ( src && onSelectURL ) {\r\n\t\t\tonSelectURL( src );\r\n\t\t\tcloseURLInput();\r\n\t\t}\r\n\t};\r\n\r\n\tconst onFilesUpload = ( files ) => {\r\n\t\tif ( ! handleUpload ) {\r\n\t\t\treturn onSelect( files );\r\n\t\t}\r\n\t\tonFilesPreUpload( files );\r\n\t\tlet setMedia;\r\n\t\tif ( multiple ) {\r\n\t\t\tif ( addToGallery ) {\r\n\t\t\t\t// Since the setMedia function runs multiple times per upload group\r\n\t\t\t\t// and is passed newMedia containing every item in its group each time, we must\r\n\t\t\t\t// filter out whatever this upload group had previously returned to the\r\n\t\t\t\t// gallery before adding and returning the image array with replacement newMedia\r\n\t\t\t\t// values.\r\n\r\n\t\t\t\t// Define an array to store urls from newMedia between subsequent function calls.\r\n\t\t\t\tlet lastMediaPassed = [];\r\n\t\t\t\tsetMedia = ( newMedia ) => {\r\n\t\t\t\t\t// Remove any images this upload group is responsible for (lastMediaPassed).\r\n\t\t\t\t\t// Their replacements are contained in newMedia.\r\n\t\t\t\t\tconst filteredMedia = ( value ?? [] ).filter( ( item ) => {\r\n\t\t\t\t\t\t// If Item has id, only remove it if lastMediaPassed has an item with that id.\r\n\t\t\t\t\t\tif ( item.id ) {\r\n\t\t\t\t\t\t\treturn ! lastMediaPassed.some(\r\n\t\t\t\t\t\t\t\t// Be sure to convert to number for comparison.\r\n\t\t\t\t\t\t\t\t( { id } ) => Number( id ) === Number( item.id )\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// Compare transient images via .includes since gallery may append extra info onto the url.\r\n\t\t\t\t\t\treturn ! lastMediaPassed.some( ( { urlSlug } ) =>\r\n\t\t\t\t\t\t\titem.url.includes( urlSlug )\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t} );\r\n\t\t\t\t\t// Return the filtered media array along with newMedia.\r\n\t\t\t\t\tonSelect( filteredMedia.concat( newMedia ) );\r\n\t\t\t\t\t// Reset lastMediaPassed and set it with ids and urls from newMedia.\r\n\t\t\t\t\tlastMediaPassed = newMedia.map( ( media ) => {\r\n\t\t\t\t\t\t// Add everything up to '.fileType' to compare via .includes.\r\n\t\t\t\t\t\tconst cutOffIndex = media.url.lastIndexOf( '.' );\r\n\t\t\t\t\t\tconst urlSlug = media.url.slice( 0, cutOffIndex );\r\n\t\t\t\t\t\treturn { id: media.id, urlSlug };\r\n\t\t\t\t\t} );\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\tsetMedia = onSelect;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tsetMedia = ( [ media ] ) => onSelect( media );\r\n\t\t}\r\n\t\tmediaUpload( {\r\n\t\t\tallowedTypes,\r\n\t\t\tfilesList: files,\r\n\t\t\tonFileChange: setMedia,\r\n\t\t\tonError,\r\n\t\t} );\r\n\t};\r\n\r\n\tasync function handleBlocksDrop( blocks ) {\r\n\t\tif ( ! blocks || ! Array.isArray( blocks ) ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tfunction recursivelyFindMediaFromBlocks( _blocks ) {\r\n\t\t\treturn _blocks.flatMap( ( block ) =>\r\n\t\t\t\t( block.name === 'core/image' ||\r\n\t\t\t\t\tblock.name === 'core/audio' ||\r\n\t\t\t\t\tblock.name === 'core/video' ) &&\r\n\t\t\t\tblock.attributes.url\r\n\t\t\t\t\t? [ block ]\r\n\t\t\t\t\t: recursivelyFindMediaFromBlocks( block.innerBlocks )\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tconst mediaBlocks = recursivelyFindMediaFromBlocks( blocks );\r\n\r\n\t\tif ( ! mediaBlocks.length ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst uploadedMediaList = await Promise.all(\r\n\t\t\tmediaBlocks.map( ( block ) =>\r\n\t\t\t\tblock.attributes.id\r\n\t\t\t\t\t? block.attributes\r\n\t\t\t\t\t: new Promise( ( resolve, reject ) => {\r\n\t\t\t\t\t\t\twindow\r\n\t\t\t\t\t\t\t\t.fetch( block.attributes.url )\r\n\t\t\t\t\t\t\t\t.then( ( response ) => response.blob() )\r\n\t\t\t\t\t\t\t\t.then( ( blob ) =>\r\n\t\t\t\t\t\t\t\t\tmediaUpload( {\r\n\t\t\t\t\t\t\t\t\t\tfilesList: [ blob ],\r\n\t\t\t\t\t\t\t\t\t\tadditionalData: {\r\n\t\t\t\t\t\t\t\t\t\t\ttitle: block.attributes.title,\r\n\t\t\t\t\t\t\t\t\t\t\talt_text: block.attributes.alt,\r\n\t\t\t\t\t\t\t\t\t\t\tcaption: block.attributes.caption,\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\tonFileChange: ( [ media ] ) => {\r\n\t\t\t\t\t\t\t\t\t\t\tif ( media.id ) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tresolve( media );\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\tallowedTypes,\r\n\t\t\t\t\t\t\t\t\t\tonError: reject,\r\n\t\t\t\t\t\t\t\t\t} )\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t.catch( () => resolve( block.attributes.url ) );\r\n\t\t\t\t\t  } )\r\n\t\t\t)\r\n\t\t).catch( ( err ) => onError( err ) );\r\n\r\n\t\tif ( multiple ) {\r\n\t\t\tonSelect( uploadedMediaList );\r\n\t\t} else {\r\n\t\t\tonSelect( uploadedMediaList[ 0 ] );\r\n\t\t}\r\n\t}\r\n\r\n\tasync function onHTMLDrop( HTML ) {\r\n\t\tconst blocks = pasteHandler( { HTML } );\r\n\t\treturn await handleBlocksDrop( blocks );\r\n\t}\r\n\r\n\tconst onUpload = ( event ) => {\r\n\t\tonFilesUpload( event.target.files );\r\n\t};\r\n\r\n\tconst defaultRenderPlaceholder = ( content ) => {\r\n\t\tlet { instructions, title } = labels;\r\n\r\n\t\tif ( ! mediaUpload && ! onSelectURL ) {\r\n\t\t\tinstructions = __(\r\n\t\t\t\t'To edit this block, you need permission to upload media.'\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tif ( instructions === undefined || title === undefined ) {\r\n\t\t\tconst typesAllowed = allowedTypes ?? [];\r\n\r\n\t\t\tconst [ firstAllowedType ] = typesAllowed;\r\n\t\t\tconst isOneType = 1 === typesAllowed.length;\r\n\t\t\tconst isAudio = isOneType && 'audio' === firstAllowedType;\r\n\t\t\tconst isImage = isOneType && 'image' === firstAllowedType;\r\n\t\t\tconst isVideo = isOneType && 'video' === firstAllowedType;\r\n\r\n\t\t\tif ( instructions === undefined && mediaUpload ) {\r\n\t\t\t\tinstructions = __(\r\n\t\t\t\t\t'Upload a media file or pick one from your media library.'\r\n\t\t\t\t);\r\n\r\n\t\t\t\tif ( isAudio ) {\r\n\t\t\t\t\tinstructions = __(\r\n\t\t\t\t\t\t'Upload an audio file, pick one from your media library, or add one with a URL.'\r\n\t\t\t\t\t);\r\n\t\t\t\t} else if ( isImage ) {\r\n\t\t\t\t\tinstructions = __(\r\n\t\t\t\t\t\t'Upload an image file, pick one from your media library, or add one with a URL.'\r\n\t\t\t\t\t);\r\n\t\t\t\t} else if ( isVideo ) {\r\n\t\t\t\t\tinstructions = __(\r\n\t\t\t\t\t\t'Upload a video file, pick one from your media library, or add one with a URL.'\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif ( title === undefined ) {\r\n\t\t\t\ttitle = __( 'Media' );\r\n\r\n\t\t\t\tif ( isAudio ) {\r\n\t\t\t\t\ttitle = __( 'Audio' );\r\n\t\t\t\t} else if ( isImage ) {\r\n\t\t\t\t\ttitle = __( 'Image' );\r\n\t\t\t\t} else if ( isVideo ) {\r\n\t\t\t\t\ttitle = __( 'Video' );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst placeholderClassName = classnames(\r\n\t\t\t'block-editor-media-placeholder',\r\n\t\t\tclassName,\r\n\t\t\t{\r\n\t\t\t\t'is-appender': isAppender,\r\n\t\t\t}\r\n\t\t);\r\n\r\n\t\treturn (\r\n\t\t\t<Placeholder\r\n\t\t\t\ticon={ icon }\r\n\t\t\t\tlabel={ title }\r\n\t\t\t\tinstructions={ instructions }\r\n\t\t\t\tclassName={ placeholderClassName }\r\n\t\t\t\tnotices={ notices }\r\n\t\t\t\tonDoubleClick={ onDoubleClick }\r\n\t\t\t\tpreview={ mediaPreview }\r\n\t\t\t\tstyle={ style }\r\n\t\t\t>\r\n\t\t\t\t{ content }\r\n\t\t\t\t{ children }\r\n\t\t\t</Placeholder>\r\n\t\t);\r\n\t};\r\n\tconst renderPlaceholder = placeholder ?? defaultRenderPlaceholder;\r\n\r\n\tconst renderDropZone = () => {\r\n\t\tif ( disableDropZone ) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<DropZone onFilesDrop={ onFilesUpload } onHTMLDrop={ onHTMLDrop } />\r\n\t\t);\r\n\t};\r\n\r\n\tconst renderCancelLink = () => {\r\n\t\treturn (\r\n\t\t\tonCancel && (\r\n\t\t\t\t<Button\r\n\t\t\t\t\tclassName=\"block-editor-media-placeholder__cancel-button\"\r\n\t\t\t\t\ttitle={ __( 'Cancel' ) }\r\n\t\t\t\t\tvariant=\"link\"\r\n\t\t\t\t\tonClick={ onCancel }\r\n\t\t\t\t>\r\n\t\t\t\t\t{ __( 'Cancel' ) }\r\n\t\t\t\t</Button>\r\n\t\t\t)\r\n\t\t);\r\n\t};\r\n\r\n\tconst renderUrlSelectionUI = () => {\r\n\t\treturn (\r\n\t\t\tonSelectURL && (\r\n\t\t\t\t<URLSelectionUI\r\n\t\t\t\t\tisURLInputVisible={ isURLInputVisible }\r\n\t\t\t\t\tsrc={ src }\r\n\t\t\t\t\tonChangeSrc={ onChangeSrc }\r\n\t\t\t\t\tonSubmitSrc={ onSubmitSrc }\r\n\t\t\t\t\topenURLInput={ openURLInput }\r\n\t\t\t\t\tcloseURLInput={ closeURLInput }\r\n\t\t\t\t/>\r\n\t\t\t)\r\n\t\t);\r\n\t};\r\n\r\n\tconst renderFeaturedImageToggle = () => {\r\n\t\treturn (\r\n\t\t\tonToggleFeaturedImage && (\r\n\t\t\t\t<div className=\"block-editor-media-placeholder__url-input-container\">\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tclassName=\"block-editor-media-placeholder__button\"\r\n\t\t\t\t\t\tonClick={ onToggleFeaturedImage }\r\n\t\t\t\t\t\tvariant=\"tertiary\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{ __( 'Use featured image' ) }\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</div>\r\n\t\t\t)\r\n\t\t);\r\n\t};\r\n\r\n\tconst renderMediaUploadChecked = () => {\r\n\t\tconst defaultButton = ( { open } ) => {\r\n\t\t\treturn (\r\n\t\t\t\t<Button\r\n\t\t\t\t\tvariant=\"tertiary\"\r\n\t\t\t\t\tonClick={ () => {\r\n\t\t\t\t\t\topen();\r\n\t\t\t\t\t} }\r\n\t\t\t\t>\r\n\t\t\t\t\t{ __( 'Media Library' ) }\r\n\t\t\t\t</Button>\r\n\t\t\t);\r\n\t\t};\r\n\t\tconst libraryButton = mediaLibraryButton ?? defaultButton;\r\n\t\tconst uploadMediaLibraryButton = (\r\n\t\t\t<MediaUpload\r\n\t\t\t\taddToGallery={ addToGallery }\r\n\t\t\t\tgallery={ multiple && onlyAllowsImages() }\r\n\t\t\t\tmultiple={ multiple }\r\n\t\t\t\tonSelect={ onSelect }\r\n\t\t\t\tallowedTypes={ allowedTypes }\r\n\t\t\t\tmode={ 'browse' }\r\n\t\t\t\tvalue={\r\n\t\t\t\t\tArray.isArray( value )\r\n\t\t\t\t\t\t? value.map( ( { id } ) => id )\r\n\t\t\t\t\t\t: value.id\r\n\t\t\t\t}\r\n\t\t\t\trender={ libraryButton }\r\n\t\t\t/>\r\n\t\t);\r\n\r\n\t\tif ( mediaUpload && isAppender ) {\r\n\t\t\treturn (\r\n\t\t\t\t<>\r\n\t\t\t\t\t{ renderDropZone() }\r\n\t\t\t\t\t<FormFileUpload\r\n\t\t\t\t\t\tonChange={ onUpload }\r\n\t\t\t\t\t\taccept={ accept }\r\n\t\t\t\t\t\tmultiple={ !! multiple }\r\n\t\t\t\t\t\trender={ ( { openFileDialog } ) => {\r\n\t\t\t\t\t\t\tconst content = (\r\n\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"primary\"\r\n\t\t\t\t\t\t\t\t\t\tclassName={ classnames(\r\n\t\t\t\t\t\t\t\t\t\t\t'block-editor-media-placeholder__button',\r\n\t\t\t\t\t\t\t\t\t\t\t'block-editor-media-placeholder__upload-button'\r\n\t\t\t\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\t\t\t\tonClick={ openFileDialog }\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{ __( 'Upload' ) }\r\n\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t{ uploadMediaLibraryButton }\r\n\t\t\t\t\t\t\t\t\t{ renderUrlSelectionUI() }\r\n\t\t\t\t\t\t\t\t\t{ renderFeaturedImageToggle() }\r\n\t\t\t\t\t\t\t\t\t{ renderCancelLink() }\r\n\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\treturn renderPlaceholder( content );\r\n\t\t\t\t\t\t} }\r\n\t\t\t\t\t/>\r\n\t\t\t\t</>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tif ( mediaUpload ) {\r\n\t\t\tconst content = (\r\n\t\t\t\t<>\r\n\t\t\t\t\t{ renderDropZone() }\r\n\t\t\t\t\t<FormFileUpload\r\n\t\t\t\t\t\tvariant=\"primary\"\r\n\t\t\t\t\t\tclassName={ classnames(\r\n\t\t\t\t\t\t\t'block-editor-media-placeholder__button',\r\n\t\t\t\t\t\t\t'block-editor-media-placeholder__upload-button'\r\n\t\t\t\t\t\t) }\r\n\t\t\t\t\t\tonChange={ onUpload }\r\n\t\t\t\t\t\taccept={ accept }\r\n\t\t\t\t\t\tmultiple={ !! multiple }\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{ __( 'Upload' ) }\r\n\t\t\t\t\t</FormFileUpload>\r\n\t\t\t\t\t{ uploadMediaLibraryButton }\r\n\t\t\t\t\t{ renderUrlSelectionUI() }\r\n\t\t\t\t\t{ renderFeaturedImageToggle() }\r\n\t\t\t\t\t{ renderCancelLink() }\r\n\t\t\t\t</>\r\n\t\t\t);\r\n\t\t\treturn renderPlaceholder( content );\r\n\t\t}\r\n\r\n\t\treturn renderPlaceholder( uploadMediaLibraryButton );\r\n\t};\r\n\r\n\tif ( disableMediaButtons ) {\r\n\t\treturn <MediaUploadCheck>{ renderDropZone() }</MediaUploadCheck>;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<MediaUploadCheck\r\n\t\t\tfallback={ renderPlaceholder( renderUrlSelectionUI() ) }\r\n\t\t>\r\n\t\t\t{ renderMediaUploadChecked() }\r\n\t\t</MediaUploadCheck>\r\n\t);\r\n}\r\n\r\n/**\r\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/media-placeholder/README.md\r\n */\r\nexport default withFilters( 'editor.MediaPlaceholder' )( MediaPlaceholder );\r\n","/**\n * Internal dependencies\n */\nimport PanelColorGradientSettings from '../colors-gradients/panel-color-gradient-settings';\n\nconst PanelColorSettings = ( { colorSettings, ...props } ) => {\n\tconst settings = colorSettings.map( ( setting ) => {\n\t\tif ( ! setting ) {\n\t\t\treturn setting;\n\t\t}\n\t\tconst { value, onChange, ...otherSettings } = setting;\n\t\treturn {\n\t\t\t...otherSettings,\n\t\t\tcolorValue: value,\n\t\t\tonColorChange: onChange,\n\t\t};\n\t} );\n\treturn (\n\t\t<PanelColorGradientSettings\n\t\t\tsettings={ settings }\n\t\t\tgradients={ [] }\n\t\t\tdisableCustomGradients\n\t\t\t{ ...props }\n\t\t/>\n\t);\n};\nexport default PanelColorSettings;\n","/**\r\n * External dependencies\r\n */\r\nimport classnames from 'classnames';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { __ } from '@wordpress/i18n';\r\nimport { ToolbarItem, DropdownMenu, Slot } from '@wordpress/components';\r\nimport { chevronDown } from '@wordpress/icons';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { orderBy } from '../../../utils/sorting';\r\n\r\nconst POPOVER_PROPS = {\r\n\tplacement: 'bottom-start',\r\n};\r\n\r\nconst FormatToolbar = () => {\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{ [ 'bold', 'italic', 'link', 'unknown' ].map( ( format ) => (\r\n\t\t\t\t<Slot\r\n\t\t\t\t\tname={ `RichText.ToolbarControls.${ format }` }\r\n\t\t\t\t\tkey={ format }\r\n\t\t\t\t/>\r\n\t\t\t) ) }\r\n\t\t\t<Slot name=\"RichText.ToolbarControls\">\r\n\t\t\t\t{ ( fills ) => {\r\n\t\t\t\t\tif ( ! fills.length ) {\r\n\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconst allProps = fills.map( ( [ { props } ] ) => props );\r\n\t\t\t\t\tconst hasActive = allProps.some(\r\n\t\t\t\t\t\t( { isActive } ) => isActive\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<ToolbarItem>\r\n\t\t\t\t\t\t\t{ ( toggleProps ) => (\r\n\t\t\t\t\t\t\t\t<DropdownMenu\r\n\t\t\t\t\t\t\t\t\ticon={ chevronDown }\r\n\t\t\t\t\t\t\t\t\t/* translators: button label text should, if possible, be under 16 characters. */\r\n\t\t\t\t\t\t\t\t\tlabel={ __( 'More' ) }\r\n\t\t\t\t\t\t\t\t\ttoggleProps={ {\r\n\t\t\t\t\t\t\t\t\t\t...toggleProps,\r\n\t\t\t\t\t\t\t\t\t\tclassName: classnames(\r\n\t\t\t\t\t\t\t\t\t\t\ttoggleProps.className,\r\n\t\t\t\t\t\t\t\t\t\t\t{ 'is-pressed': hasActive }\r\n\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t\tdescribedBy: __(\r\n\t\t\t\t\t\t\t\t\t\t\t'Displays more block tools'\r\n\t\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t\t\t\tcontrols={ orderBy(\r\n\t\t\t\t\t\t\t\t\t\tfills.map( ( [ { props } ] ) => props ),\r\n\t\t\t\t\t\t\t\t\t\t'title'\r\n\t\t\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\t\t\tpopoverProps={ POPOVER_PROPS }\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t</ToolbarItem>\r\n\t\t\t\t\t);\r\n\t\t\t\t} }\r\n\t\t\t</Slot>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default FormatToolbar;\r\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Popover, ToolbarGroup } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport BlockControls from '../block-controls';\nimport FormatToolbar from './format-toolbar';\nimport NavigableToolbar from '../navigable-toolbar';\n\nfunction InlineToolbar( { popoverAnchor } ) {\n\treturn (\n\t\t<Popover\n\t\t\tplacement=\"top\"\n\t\t\tfocusOnMount={ false }\n\t\t\tanchor={ popoverAnchor }\n\t\t\tclassName=\"block-editor-rich-text__inline-format-toolbar\"\n\t\t\t__unstableSlotName=\"block-toolbar\"\n\t\t>\n\t\t\t<NavigableToolbar\n\t\t\t\tclassName=\"block-editor-rich-text__inline-format-toolbar-group\"\n\t\t\t\t/* translators: accessibility text for the inline format toolbar */\n\t\t\t\taria-label={ __( 'Format tools' ) }\n\t\t\t>\n\t\t\t\t<ToolbarGroup>\n\t\t\t\t\t<FormatToolbar />\n\t\t\t\t</ToolbarGroup>\n\t\t\t</NavigableToolbar>\n\t\t</Popover>\n\t);\n}\n\nconst FormatToolbarContainer = ( { inline, editableContentElement } ) => {\n\tif ( inline ) {\n\t\treturn <InlineToolbar popoverAnchor={ editableContentElement } />;\n\t}\n\n\t// Render regular toolbar.\n\treturn (\n\t\t<BlockControls group=\"inline\">\n\t\t\t<FormatToolbar />\n\t\t</BlockControls>\n\t);\n};\n\nexport default FormatToolbarContainer;\n","/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport { useRefEffect } from '@wordpress/compose';\nimport { BACKSPACE, DELETE, ESCAPE } from '@wordpress/keycodes';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\n\nexport function useUndoAutomaticChange() {\n\tconst { didAutomaticChange, getSettings } = useSelect( blockEditorStore );\n\treturn useRefEffect( ( element ) => {\n\t\tfunction onKeyDown( event ) {\n\t\t\tconst { keyCode } = event;\n\n\t\t\tif ( event.defaultPrevented ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tkeyCode !== DELETE &&\n\t\t\t\tkeyCode !== BACKSPACE &&\n\t\t\t\tkeyCode !== ESCAPE\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst { __experimentalUndo } = getSettings();\n\n\t\t\tif ( ! __experimentalUndo ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( ! didAutomaticChange() ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tevent.preventDefault();\n\t\t\t__experimentalUndo();\n\t\t}\n\n\t\telement.addEventListener( 'keydown', onKeyDown );\n\t\treturn () => {\n\t\t\telement.removeEventListener( 'keydown', onKeyDown );\n\t\t};\n\t}, [] );\n}\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { renderToString } from '@wordpress/element';\r\nimport { createBlock } from '@wordpress/blocks';\r\n\r\nexport function addActiveFormats( value, activeFormats ) {\r\n\tif ( activeFormats?.length ) {\r\n\t\tlet index = value.formats.length;\r\n\r\n\t\twhile ( index-- ) {\r\n\t\t\tvalue.formats[ index ] = [\r\n\t\t\t\t...activeFormats,\r\n\t\t\t\t...( value.formats[ index ] || [] ),\r\n\t\t\t];\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/**\r\n * Get the multiline tag based on the multiline prop.\r\n *\r\n * @param {?(string|boolean)} multiline The multiline prop.\r\n *\r\n * @return {string | undefined} The multiline tag.\r\n */\r\nexport function getMultilineTag( multiline ) {\r\n\tif ( multiline !== true && multiline !== 'p' && multiline !== 'li' ) {\r\n\t\treturn;\r\n\t}\r\n\r\n\treturn multiline === true ? 'p' : multiline;\r\n}\r\n\r\nexport function getAllowedFormats( { allowedFormats, disableFormats } ) {\r\n\tif ( disableFormats ) {\r\n\t\treturn getAllowedFormats.EMPTY_ARRAY;\r\n\t}\r\n\r\n\treturn allowedFormats;\r\n}\r\n\r\ngetAllowedFormats.EMPTY_ARRAY = [];\r\n\r\n/**\r\n * Creates a link from pasted URL.\r\n * Creates a paragraph block containing a link to the URL, and calls `onReplace`.\r\n *\r\n * @param {string}   url       The URL that could not be embedded.\r\n * @param {Function} onReplace Function to call with the created fallback block.\r\n */\r\nexport function createLinkInParagraph( url, onReplace ) {\r\n\tconst link = <a href={ url }>{ url }</a>;\r\n\tonReplace(\r\n\t\tcreateBlock( 'core/paragraph', { content: renderToString( link ) } )\r\n\t);\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { isEmpty, split, toHTMLString } from '@wordpress/rich-text';\r\n\r\n/*\r\n * Signals to the RichText owner that the block can be replaced with two blocks\r\n * as a result of splitting the block by pressing enter, or with blocks as a\r\n * result of splitting the block by pasting block content in the instance.\r\n */\r\nexport function splitValue( { value, pastedBlocks = [], onReplace, onSplit } ) {\r\n\tif ( ! onReplace || ! onSplit ) {\r\n\t\treturn;\r\n\t}\r\n\r\n\t// Ensure the value has a selection. This might happen when trying to split\r\n\t// an empty value before there was a `selectionchange` event.\r\n\tconst { start = 0, end = 0 } = value;\r\n\tconst valueWithEnsuredSelection = { ...value, start, end };\r\n\tconst blocks = [];\r\n\tconst [ before, after ] = split( valueWithEnsuredSelection );\r\n\tconst hasPastedBlocks = pastedBlocks.length > 0;\r\n\tlet lastPastedBlockIndex = -1;\r\n\r\n\t// Consider the after value to be the original it is not empty and the\r\n\t// before value *is* empty.\r\n\tconst isAfterOriginal = isEmpty( before ) && ! isEmpty( after );\r\n\r\n\t// Create a block with the content before the caret if there's no pasted\r\n\t// blocks, or if there are pasted blocks and the value is not empty. We do\r\n\t// not want a leading empty block on paste, but we do if we split with e.g.\r\n\t// the enter key.\r\n\tif ( ! hasPastedBlocks || ! isEmpty( before ) ) {\r\n\t\tblocks.push(\r\n\t\t\tonSplit( toHTMLString( { value: before } ), ! isAfterOriginal )\r\n\t\t);\r\n\t\tlastPastedBlockIndex += 1;\r\n\t}\r\n\r\n\tif ( hasPastedBlocks ) {\r\n\t\tblocks.push( ...pastedBlocks );\r\n\t\tlastPastedBlockIndex += pastedBlocks.length;\r\n\t}\r\n\r\n\t// Create a block with the content after the caret if there's no pasted\r\n\t// blocks, or if there are pasted blocks and the value is not empty. We do\r\n\t// not want a trailing empty block on paste, but we do if we split with e.g.\r\n\t// the enter key.\r\n\tif ( ! hasPastedBlocks || ! isEmpty( after ) ) {\r\n\t\tblocks.push(\r\n\t\t\tonSplit( toHTMLString( { value: after } ), isAfterOriginal )\r\n\t\t);\r\n\t}\r\n\r\n\t// If there are pasted blocks, set the selection to the last one. Otherwise,\r\n\t// set the selection to the second block.\r\n\tconst indexToSelect = hasPastedBlocks ? lastPastedBlockIndex : 1;\r\n\r\n\t// If there are pasted blocks, move the caret to the end of the selected\r\n\t// block Otherwise, retain the default value.\r\n\tconst initialPosition = hasPastedBlocks ? -1 : 0;\r\n\r\n\tonReplace( blocks, indexToSelect, initialPosition );\r\n}\r\n","/**\n * WordPress dependencies\n */\nimport { useRef } from '@wordpress/element';\nimport { useRefEffect } from '@wordpress/compose';\nimport {\n\tpasteHandler,\n\tfindTransform,\n\tgetBlockTransforms,\n} from '@wordpress/blocks';\nimport { isEmpty, insert, create } from '@wordpress/rich-text';\nimport { isURL } from '@wordpress/url';\n\n/**\n * Internal dependencies\n */\nimport { addActiveFormats } from './utils';\nimport { splitValue } from './split-value';\nimport { getPasteEventData } from '../../utils/pasting';\n\n/** @typedef {import('@wordpress/rich-text').RichTextValue} RichTextValue */\n\nexport function usePasteHandler( props ) {\n\tconst propsRef = useRef( props );\n\tpropsRef.current = props;\n\treturn useRefEffect( ( element ) => {\n\t\tfunction _onPaste( event ) {\n\t\t\tconst {\n\t\t\t\tisSelected,\n\t\t\t\tdisableFormats,\n\t\t\t\tonChange,\n\t\t\t\tvalue,\n\t\t\t\tformatTypes,\n\t\t\t\ttagName,\n\t\t\t\tonReplace,\n\t\t\t\tonSplit,\n\t\t\t\t__unstableEmbedURLOnPaste,\n\t\t\t\tpastePlainText,\n\t\t\t} = propsRef.current;\n\n\t\t\tif ( ! isSelected ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst { plainText, html, files } = getPasteEventData( event );\n\n\t\t\tevent.preventDefault();\n\n\t\t\t// Allows us to ask for this information when we get a report.\n\t\t\twindow.console.log( 'Received HTML:\\n\\n', html );\n\t\t\twindow.console.log( 'Received plain text:\\n\\n', plainText );\n\n\t\t\tif ( disableFormats ) {\n\t\t\t\tonChange( insert( value, plainText ) );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst isInternal =\n\t\t\t\tevent.clipboardData.getData( 'rich-text' ) === 'true';\n\n\t\t\tfunction pasteInline( content ) {\n\t\t\t\tconst transformed = formatTypes.reduce(\n\t\t\t\t\t( accumulator, { __unstablePasteRule } ) => {\n\t\t\t\t\t\t// Only allow one transform.\n\t\t\t\t\t\tif ( __unstablePasteRule && accumulator === value ) {\n\t\t\t\t\t\t\taccumulator = __unstablePasteRule( value, {\n\t\t\t\t\t\t\t\thtml,\n\t\t\t\t\t\t\t\tplainText,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn accumulator;\n\t\t\t\t\t},\n\t\t\t\t\tvalue\n\t\t\t\t);\n\t\t\t\tif ( transformed !== value ) {\n\t\t\t\t\tonChange( transformed );\n\t\t\t\t} else {\n\t\t\t\t\tconst valueToInsert = create( { html: content } );\n\t\t\t\t\taddActiveFormats( valueToInsert, value.activeFormats );\n\t\t\t\t\tonChange( insert( value, valueToInsert ) );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// If the data comes from a rich text instance, we can directly use it\n\t\t\t// without filtering the data. The filters are only meant for externally\n\t\t\t// pasted content and remove inline styles.\n\t\t\tif ( isInternal ) {\n\t\t\t\tpasteInline( html );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( pastePlainText ) {\n\t\t\t\tonChange( insert( value, create( { text: plainText } ) ) );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( files?.length ) {\n\t\t\t\t// Allows us to ask for this information when we get a report.\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\twindow.console.log( 'Received items:\\n\\n', files );\n\n\t\t\t\tconst fromTransforms = getBlockTransforms( 'from' );\n\t\t\t\tconst blocks = files\n\t\t\t\t\t.reduce( ( accumulator, file ) => {\n\t\t\t\t\t\tconst transformation = findTransform(\n\t\t\t\t\t\t\tfromTransforms,\n\t\t\t\t\t\t\t( transform ) =>\n\t\t\t\t\t\t\t\ttransform.type === 'files' &&\n\t\t\t\t\t\t\t\ttransform.isMatch( [ file ] )\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif ( transformation ) {\n\t\t\t\t\t\t\taccumulator.push(\n\t\t\t\t\t\t\t\ttransformation.transform( [ file ] )\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn accumulator;\n\t\t\t\t\t}, [] )\n\t\t\t\t\t.flat();\n\t\t\t\tif ( ! blocks.length ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( onReplace && isEmpty( value ) ) {\n\t\t\t\t\tonReplace( blocks );\n\t\t\t\t} else {\n\t\t\t\t\tsplitValue( {\n\t\t\t\t\t\tvalue,\n\t\t\t\t\t\tpastedBlocks: blocks,\n\t\t\t\t\t\tonReplace,\n\t\t\t\t\t\tonSplit,\n\t\t\t\t\t} );\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet mode = onReplace && onSplit ? 'AUTO' : 'INLINE';\n\n\t\t\tconst trimmedPlainText = plainText.trim();\n\n\t\t\tif (\n\t\t\t\t__unstableEmbedURLOnPaste &&\n\t\t\t\tisEmpty( value ) &&\n\t\t\t\tisURL( trimmedPlainText ) &&\n\t\t\t\t// For the link pasting feature, allow only http(s) protocols.\n\t\t\t\t/^https?:/.test( trimmedPlainText )\n\t\t\t) {\n\t\t\t\tmode = 'BLOCKS';\n\t\t\t}\n\n\t\t\tconst content = pasteHandler( {\n\t\t\t\tHTML: html,\n\t\t\t\tplainText,\n\t\t\t\tmode,\n\t\t\t\ttagName,\n\t\t\t} );\n\n\t\t\tif ( typeof content === 'string' ) {\n\t\t\t\tpasteInline( content );\n\t\t\t} else if ( content.length > 0 ) {\n\t\t\t\tif ( onReplace && isEmpty( value ) ) {\n\t\t\t\t\tonReplace( content, content.length - 1, -1 );\n\t\t\t\t} else {\n\t\t\t\t\tsplitValue( {\n\t\t\t\t\t\tvalue,\n\t\t\t\t\t\tpastedBlocks: content,\n\t\t\t\t\t\tonReplace,\n\t\t\t\t\t\tonSplit,\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\telement.addEventListener( 'paste', _onPaste );\n\t\treturn () => {\n\t\t\telement.removeEventListener( 'paste', _onPaste );\n\t\t};\n\t}, [] );\n}\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useRef } from '@wordpress/element';\r\nimport { useRefEffect } from '@wordpress/compose';\r\nimport { insert, isCollapsed } from '@wordpress/rich-text';\r\nimport { useDispatch } from '@wordpress/data';\r\nimport { applyFilters } from '@wordpress/hooks';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as blockEditorStore } from '../../store';\r\n\r\n/**\r\n * When typing over a selection, the selection will we wrapped by a matching\r\n * character pair. The second character is optional, it defaults to the first\r\n * character.\r\n *\r\n * @type {string[]} Array of character pairs.\r\n */\r\nconst wrapSelectionSettings = [ '`', '\"', \"'\", '', '' ];\r\n\r\nexport function useBeforeInputRules( props ) {\r\n\tconst {\r\n\t\t__unstableMarkLastChangeAsPersistent,\r\n\t\t__unstableMarkAutomaticChange,\r\n\t} = useDispatch( blockEditorStore );\r\n\tconst propsRef = useRef( props );\r\n\tpropsRef.current = props;\r\n\treturn useRefEffect( ( element ) => {\r\n\t\tfunction onInput( event ) {\r\n\t\t\tconst { inputType, data } = event;\r\n\t\t\tconst { value, onChange } = propsRef.current;\r\n\r\n\t\t\t// Only run the rules when inserting text.\r\n\t\t\tif ( inputType !== 'insertText' ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif ( isCollapsed( value ) ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst pair = applyFilters(\r\n\t\t\t\t'blockEditor.wrapSelectionSettings',\r\n\t\t\t\twrapSelectionSettings\r\n\t\t\t).find(\r\n\t\t\t\t( [ startChar, endChar ] ) =>\r\n\t\t\t\t\tstartChar === data || endChar === data\r\n\t\t\t);\r\n\r\n\t\t\tif ( ! pair ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst [ startChar, endChar = startChar ] = pair;\r\n\t\t\tconst start = value.start;\r\n\t\t\tconst end = value.end + startChar.length;\r\n\r\n\t\t\tlet newValue = insert( value, startChar, start, start );\r\n\t\t\tnewValue = insert( newValue, endChar, end, end );\r\n\r\n\t\t\t__unstableMarkLastChangeAsPersistent();\r\n\t\t\tonChange( newValue );\r\n\t\t\t__unstableMarkAutomaticChange();\r\n\r\n\t\t\tconst init = {};\r\n\r\n\t\t\tfor ( const key in event ) {\r\n\t\t\t\tinit[ key ] = event[ key ];\r\n\t\t\t}\r\n\r\n\t\t\tinit.data = endChar;\r\n\r\n\t\t\tconst { ownerDocument } = element;\r\n\t\t\tconst { defaultView } = ownerDocument;\r\n\t\t\tconst newEvent = new defaultView.InputEvent( 'input', init );\r\n\r\n\t\t\t// Dispatch an `input` event with the new data. This will trigger the\r\n\t\t\t// input rules.\r\n\t\t\t// Postpone the `input` to the next event loop tick so that the dispatch\r\n\t\t\t// doesn't happen synchronously in the middle of `beforeinput` dispatch.\r\n\t\t\t// This is closer to how native `input` event would be timed, and also\r\n\t\t\t// makes sure that the `input` event is dispatched only after the `onChange`\r\n\t\t\t// call few lines above has fully updated the data store state and rerendered\r\n\t\t\t// all affected components.\r\n\t\t\twindow.queueMicrotask( () => {\r\n\t\t\t\tevent.target.dispatchEvent( newEvent );\r\n\t\t\t} );\r\n\t\t\tevent.preventDefault();\r\n\t\t}\r\n\r\n\t\telement.addEventListener( 'beforeinput', onInput );\r\n\t\treturn () => {\r\n\t\t\telement.removeEventListener( 'beforeinput', onInput );\r\n\t\t};\r\n\t}, [] );\r\n}\r\n","/**\n * WordPress dependencies\n */\nimport { useRef } from '@wordpress/element';\nimport { useRefEffect } from '@wordpress/compose';\nimport { insert, toHTMLString } from '@wordpress/rich-text';\nimport { getBlockTransforms, findTransform } from '@wordpress/blocks';\nimport { useDispatch } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport { preventEventDiscovery } from './prevent-event-discovery';\nimport {\n\tretrieveSelectedAttribute,\n\tSTART_OF_SELECTED_AREA,\n} from '../../utils/selection';\n\nfunction findSelection( blocks ) {\n\tlet i = blocks.length;\n\n\twhile ( i-- ) {\n\t\tconst attributeKey = retrieveSelectedAttribute(\n\t\t\tblocks[ i ].attributes\n\t\t);\n\n\t\tif ( attributeKey ) {\n\t\t\tblocks[ i ].attributes[ attributeKey ] = blocks[ i ].attributes[\n\t\t\t\tattributeKey\n\t\t\t]\n\t\t\t\t// To do: refactor this to use rich text's selection instead, so\n\t\t\t\t// we no longer have to use on this hack inserting a special\n\t\t\t\t// character.\n\t\t\t\t.toString()\n\t\t\t\t.replace( START_OF_SELECTED_AREA, '' );\n\t\t\treturn [ blocks[ i ].clientId, attributeKey, 0, 0 ];\n\t\t}\n\n\t\tconst nestedSelection = findSelection( blocks[ i ].innerBlocks );\n\n\t\tif ( nestedSelection ) {\n\t\t\treturn nestedSelection;\n\t\t}\n\t}\n\n\treturn [];\n}\n\nexport function useInputRules( props ) {\n\tconst {\n\t\t__unstableMarkLastChangeAsPersistent,\n\t\t__unstableMarkAutomaticChange,\n\t} = useDispatch( blockEditorStore );\n\tconst propsRef = useRef( props );\n\tpropsRef.current = props;\n\treturn useRefEffect( ( element ) => {\n\t\tfunction inputRule() {\n\t\t\tconst { getValue, onReplace, selectionChange } = propsRef.current;\n\n\t\t\tif ( ! onReplace ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// We must use getValue() here because value may be update\n\t\t\t// asynchronously.\n\t\t\tconst value = getValue();\n\t\t\tconst { start, text } = value;\n\t\t\tconst characterBefore = text.slice( start - 1, start );\n\n\t\t\t// The character right before the caret must be a plain space.\n\t\t\tif ( characterBefore !== ' ' ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst trimmedTextBefore = text.slice( 0, start ).trim();\n\t\t\tconst prefixTransforms = getBlockTransforms( 'from' ).filter(\n\t\t\t\t( { type } ) => type === 'prefix'\n\t\t\t);\n\t\t\tconst transformation = findTransform(\n\t\t\t\tprefixTransforms,\n\t\t\t\t( { prefix } ) => {\n\t\t\t\t\treturn trimmedTextBefore === prefix;\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tif ( ! transformation ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst content = toHTMLString( {\n\t\t\t\tvalue: insert( value, START_OF_SELECTED_AREA, 0, start ),\n\t\t\t} );\n\t\t\tconst block = transformation.transform( content );\n\n\t\t\tselectionChange( ...findSelection( [ block ] ) );\n\t\t\tonReplace( [ block ] );\n\t\t\t__unstableMarkAutomaticChange();\n\n\t\t\treturn true;\n\t\t}\n\n\t\tfunction onInput( event ) {\n\t\t\tconst { inputType, type } = event;\n\t\t\tconst {\n\t\t\t\tgetValue,\n\t\t\t\tonChange,\n\t\t\t\t__unstableAllowPrefixTransformations,\n\t\t\t\tformatTypes,\n\t\t\t} = propsRef.current;\n\n\t\t\t// Only run input rules when inserting text.\n\t\t\tif ( inputType !== 'insertText' && type !== 'compositionend' ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( __unstableAllowPrefixTransformations && inputRule() ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst value = getValue();\n\t\t\tconst transformed = formatTypes.reduce(\n\t\t\t\t( accumlator, { __unstableInputRule } ) => {\n\t\t\t\t\tif ( __unstableInputRule ) {\n\t\t\t\t\t\taccumlator = __unstableInputRule( accumlator );\n\t\t\t\t\t}\n\n\t\t\t\t\treturn accumlator;\n\t\t\t\t},\n\t\t\t\tpreventEventDiscovery( value )\n\t\t\t);\n\n\t\t\tif ( transformed !== value ) {\n\t\t\t\t__unstableMarkLastChangeAsPersistent();\n\t\t\t\tonChange( {\n\t\t\t\t\t...transformed,\n\t\t\t\t\tactiveFormats: value.activeFormats,\n\t\t\t\t} );\n\t\t\t\t__unstableMarkAutomaticChange();\n\t\t\t}\n\t\t}\n\n\t\telement.addEventListener( 'input', onInput );\n\t\telement.addEventListener( 'compositionend', onInput );\n\t\treturn () => {\n\t\t\telement.removeEventListener( 'input', onInput );\n\t\t\telement.removeEventListener( 'compositionend', onInput );\n\t\t};\n\t}, [] );\n}\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { insert } from '@wordpress/rich-text';\r\n\r\nexport function preventEventDiscovery( value ) {\r\n\tconst searchText = 'tales of gutenberg';\r\n\tconst addText =\r\n\t\t' ';\r\n\tconst { start, text } = value;\r\n\r\n\tif ( start < searchText.length ) {\r\n\t\treturn value;\r\n\t}\r\n\r\n\tconst charactersBefore = text.slice( start - searchText.length, start );\r\n\r\n\tif ( charactersBefore.toLowerCase() !== searchText ) {\r\n\t\treturn value;\r\n\t}\r\n\r\n\treturn insert( value, addText );\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useRef } from '@wordpress/element';\r\nimport { useRefEffect } from '@wordpress/compose';\r\nimport { DELETE, BACKSPACE } from '@wordpress/keycodes';\r\nimport { isCollapsed, isEmpty } from '@wordpress/rich-text';\r\n\r\nexport function useDelete( props ) {\r\n\tconst propsRef = useRef( props );\r\n\tpropsRef.current = props;\r\n\treturn useRefEffect( ( element ) => {\r\n\t\tfunction onKeyDown( event ) {\r\n\t\t\tconst { keyCode } = event;\r\n\r\n\t\t\tif ( event.defaultPrevented ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst { value, onMerge, onRemove } = propsRef.current;\r\n\r\n\t\t\tif ( keyCode === DELETE || keyCode === BACKSPACE ) {\r\n\t\t\t\tconst { start, end, text } = value;\r\n\t\t\t\tconst isReverse = keyCode === BACKSPACE;\r\n\t\t\t\tconst hasActiveFormats =\r\n\t\t\t\t\tvalue.activeFormats && !! value.activeFormats.length;\r\n\r\n\t\t\t\t// Only process delete if the key press occurs at an uncollapsed edge.\r\n\t\t\t\tif (\r\n\t\t\t\t\t! isCollapsed( value ) ||\r\n\t\t\t\t\thasActiveFormats ||\r\n\t\t\t\t\t( isReverse && start !== 0 ) ||\r\n\t\t\t\t\t( ! isReverse && end !== text.length )\r\n\t\t\t\t) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( onMerge ) {\r\n\t\t\t\t\tonMerge( ! isReverse );\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Only handle remove on Backspace. This serves dual-purpose of being\r\n\t\t\t\t// an intentional user interaction distinguishing between Backspace and\r\n\t\t\t\t// Delete to remove the empty field, but also to avoid merge & remove\r\n\t\t\t\t// causing destruction of two fields (merge, then removed merged).\r\n\t\t\t\telse if ( onRemove && isEmpty( value ) && isReverse ) {\r\n\t\t\t\t\tonRemove( ! isReverse );\r\n\t\t\t\t}\r\n\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\telement.addEventListener( 'keydown', onKeyDown );\r\n\t\treturn () => {\r\n\t\t\telement.removeEventListener( 'keydown', onKeyDown );\r\n\t\t};\r\n\t}, [] );\r\n}\r\n","/**\n * WordPress dependencies\n */\nimport { useRef } from '@wordpress/element';\nimport { useRefEffect } from '@wordpress/compose';\nimport { ENTER } from '@wordpress/keycodes';\nimport { insert, remove } from '@wordpress/rich-text';\nimport { getBlockTransforms, findTransform } from '@wordpress/blocks';\nimport { useDispatch, useRegistry } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport { splitValue } from './split-value';\n\nexport function useEnter( props ) {\n\tconst registry = useRegistry();\n\tconst { __unstableMarkAutomaticChange } = useDispatch( blockEditorStore );\n\tconst propsRef = useRef( props );\n\tpropsRef.current = props;\n\treturn useRefEffect( ( element ) => {\n\t\tfunction onKeyDown( event ) {\n\t\t\tif ( event.target.contentEditable !== 'true' ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( event.defaultPrevented ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( event.keyCode !== ENTER ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst {\n\t\t\t\tremoveEditorOnlyFormats,\n\t\t\t\tvalue,\n\t\t\t\tonReplace,\n\t\t\t\tonSplit,\n\t\t\t\tonChange,\n\t\t\t\tdisableLineBreaks,\n\t\t\t\tonSplitAtEnd,\n\t\t\t\tonSplitAtDoubleLineEnd,\n\t\t\t} = propsRef.current;\n\n\t\t\tevent.preventDefault();\n\n\t\t\tconst _value = { ...value };\n\t\t\t_value.formats = removeEditorOnlyFormats( value );\n\t\t\tconst canSplit = onReplace && onSplit;\n\n\t\t\tif ( onReplace ) {\n\t\t\t\tconst transforms = getBlockTransforms( 'from' ).filter(\n\t\t\t\t\t( { type } ) => type === 'enter'\n\t\t\t\t);\n\t\t\t\tconst transformation = findTransform( transforms, ( item ) => {\n\t\t\t\t\treturn item.regExp.test( _value.text );\n\t\t\t\t} );\n\n\t\t\t\tif ( transformation ) {\n\t\t\t\t\tonReplace( [\n\t\t\t\t\t\ttransformation.transform( {\n\t\t\t\t\t\t\tcontent: _value.text,\n\t\t\t\t\t\t} ),\n\t\t\t\t\t] );\n\t\t\t\t\t__unstableMarkAutomaticChange();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst { text, start, end } = _value;\n\n\t\t\tif ( event.shiftKey ) {\n\t\t\t\tif ( ! disableLineBreaks ) {\n\t\t\t\t\tonChange( insert( _value, '\\n' ) );\n\t\t\t\t}\n\t\t\t} else if ( canSplit ) {\n\t\t\t\tsplitValue( {\n\t\t\t\t\tvalue: _value,\n\t\t\t\t\tonReplace,\n\t\t\t\t\tonSplit,\n\t\t\t\t} );\n\t\t\t} else if ( onSplitAtEnd && start === end && end === text.length ) {\n\t\t\t\tonSplitAtEnd();\n\t\t\t} else if (\n\t\t\t\t// For some blocks it's desirable to split at the end of the\n\t\t\t\t// block when there are two line breaks at the end of the\n\t\t\t\t// block, so triple Enter exits the block.\n\t\t\t\tonSplitAtDoubleLineEnd &&\n\t\t\t\tstart === end &&\n\t\t\t\tend === text.length &&\n\t\t\t\ttext.slice( -2 ) === '\\n\\n'\n\t\t\t) {\n\t\t\t\tregistry.batch( () => {\n\t\t\t\t\t_value.start = _value.end - 2;\n\t\t\t\t\tonChange( remove( _value ) );\n\t\t\t\t\tonSplitAtDoubleLineEnd();\n\t\t\t\t} );\n\t\t\t} else if ( ! disableLineBreaks ) {\n\t\t\t\tonChange( insert( _value, '\\n' ) );\n\t\t\t}\n\t\t}\n\n\t\telement.addEventListener( 'keydown', onKeyDown );\n\t\treturn () => {\n\t\t\telement.removeEventListener( 'keydown', onKeyDown );\n\t\t};\n\t}, [] );\n}\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useMemo } from '@wordpress/element';\r\nimport { useSelect, useDispatch } from '@wordpress/data';\r\nimport { store as richTextStore } from '@wordpress/rich-text';\r\n\r\nfunction formatTypesSelector( select ) {\r\n\treturn select( richTextStore ).getFormatTypes();\r\n}\r\n\r\n/**\r\n * Set of all interactive content tags.\r\n *\r\n * @see https://html.spec.whatwg.org/multipage/dom.html#interactive-content\r\n */\r\nconst interactiveContentTags = new Set( [\r\n\t'a',\r\n\t'audio',\r\n\t'button',\r\n\t'details',\r\n\t'embed',\r\n\t'iframe',\r\n\t'input',\r\n\t'label',\r\n\t'select',\r\n\t'textarea',\r\n\t'video',\r\n] );\r\n\r\nfunction prefixSelectKeys( selected, prefix ) {\r\n\tif ( typeof selected !== 'object' ) return { [ prefix ]: selected };\r\n\treturn Object.fromEntries(\r\n\t\tObject.entries( selected ).map( ( [ key, value ] ) => [\r\n\t\t\t`${ prefix }.${ key }`,\r\n\t\t\tvalue,\r\n\t\t] )\r\n\t);\r\n}\r\n\r\nfunction getPrefixedSelectKeys( selected, prefix ) {\r\n\tif ( selected[ prefix ] ) return selected[ prefix ];\r\n\treturn Object.keys( selected )\r\n\t\t.filter( ( key ) => key.startsWith( prefix + '.' ) )\r\n\t\t.reduce( ( accumulator, key ) => {\r\n\t\t\taccumulator[ key.slice( prefix.length + 1 ) ] = selected[ key ];\r\n\t\t\treturn accumulator;\r\n\t\t}, {} );\r\n}\r\n\r\n/**\r\n * This hook provides RichText with the `formatTypes` and its derived props from\r\n * experimental format type settings.\r\n *\r\n * @param {Object}  $0                              Options\r\n * @param {string}  $0.clientId                     Block client ID.\r\n * @param {string}  $0.identifier                   Block attribute.\r\n * @param {boolean} $0.withoutInteractiveFormatting Whether to clean the interactive formattings or not.\r\n * @param {Array}   $0.allowedFormats               Allowed formats\r\n */\r\nexport function useFormatTypes( {\r\n\tclientId,\r\n\tidentifier,\r\n\twithoutInteractiveFormatting,\r\n\tallowedFormats,\r\n} ) {\r\n\tconst allFormatTypes = useSelect( formatTypesSelector, [] );\r\n\tconst formatTypes = useMemo( () => {\r\n\t\treturn allFormatTypes.filter( ( { name, interactive, tagName } ) => {\r\n\t\t\tif ( allowedFormats && ! allowedFormats.includes( name ) ) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tif (\r\n\t\t\t\twithoutInteractiveFormatting &&\r\n\t\t\t\t( interactive || interactiveContentTags.has( tagName ) )\r\n\t\t\t) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\t\t} );\r\n\t}, [ allFormatTypes, allowedFormats, withoutInteractiveFormatting ] );\r\n\tconst keyedSelected = useSelect(\r\n\t\t( select ) =>\r\n\t\t\tformatTypes.reduce( ( accumulator, type ) => {\r\n\t\t\t\tif ( ! type.__experimentalGetPropsForEditableTreePreparation ) {\r\n\t\t\t\t\treturn accumulator;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...accumulator,\r\n\t\t\t\t\t...prefixSelectKeys(\r\n\t\t\t\t\t\ttype.__experimentalGetPropsForEditableTreePreparation(\r\n\t\t\t\t\t\t\tselect,\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\trichTextIdentifier: identifier,\r\n\t\t\t\t\t\t\t\tblockClientId: clientId,\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t\ttype.name\r\n\t\t\t\t\t),\r\n\t\t\t\t};\r\n\t\t\t}, {} ),\r\n\t\t[ formatTypes, clientId, identifier ]\r\n\t);\r\n\tconst dispatch = useDispatch();\r\n\tconst prepareHandlers = [];\r\n\tconst valueHandlers = [];\r\n\tconst changeHandlers = [];\r\n\tconst dependencies = [];\r\n\r\n\tfor ( const key in keyedSelected ) {\r\n\t\tdependencies.push( keyedSelected[ key ] );\r\n\t}\r\n\r\n\tformatTypes.forEach( ( type ) => {\r\n\t\tif ( type.__experimentalCreatePrepareEditableTree ) {\r\n\t\t\tconst handler = type.__experimentalCreatePrepareEditableTree(\r\n\t\t\t\tgetPrefixedSelectKeys( keyedSelected, type.name ),\r\n\t\t\t\t{\r\n\t\t\t\t\trichTextIdentifier: identifier,\r\n\t\t\t\t\tblockClientId: clientId,\r\n\t\t\t\t}\r\n\t\t\t);\r\n\r\n\t\t\tif ( type.__experimentalCreateOnChangeEditableValue ) {\r\n\t\t\t\tvalueHandlers.push( handler );\r\n\t\t\t} else {\r\n\t\t\t\tprepareHandlers.push( handler );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ( type.__experimentalCreateOnChangeEditableValue ) {\r\n\t\t\tlet dispatchers = {};\r\n\r\n\t\t\tif ( type.__experimentalGetPropsForEditableTreeChangeHandler ) {\r\n\t\t\t\tdispatchers =\r\n\t\t\t\t\ttype.__experimentalGetPropsForEditableTreeChangeHandler(\r\n\t\t\t\t\t\tdispatch,\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\trichTextIdentifier: identifier,\r\n\t\t\t\t\t\t\tblockClientId: clientId,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\tconst selected = getPrefixedSelectKeys( keyedSelected, type.name );\r\n\t\t\tchangeHandlers.push(\r\n\t\t\t\ttype.__experimentalCreateOnChangeEditableValue(\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t...( typeof selected === 'object' ? selected : {} ),\r\n\t\t\t\t\t\t...dispatchers,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\trichTextIdentifier: identifier,\r\n\t\t\t\t\t\tblockClientId: clientId,\r\n\t\t\t\t\t}\r\n\t\t\t\t)\r\n\t\t\t);\r\n\t\t}\r\n\t} );\r\n\r\n\treturn {\r\n\t\tformatTypes,\r\n\t\tprepareHandlers,\r\n\t\tvalueHandlers,\r\n\t\tchangeHandlers,\r\n\t\tdependencies,\r\n\t};\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useRefEffect } from '@wordpress/compose';\r\n\r\nexport function useShortcuts( keyboardShortcuts ) {\r\n\treturn useRefEffect( ( element ) => {\r\n\t\tfunction onKeyDown( event ) {\r\n\t\t\tfor ( const keyboardShortcut of keyboardShortcuts.current ) {\r\n\t\t\t\tkeyboardShortcut( event );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\telement.addEventListener( 'keydown', onKeyDown );\r\n\t\treturn () => {\r\n\t\t\telement.removeEventListener( 'keydown', onKeyDown );\r\n\t\t};\r\n\t}, [] );\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useRefEffect } from '@wordpress/compose';\r\n\r\nexport function useInputEvents( inputEvents ) {\r\n\treturn useRefEffect( ( element ) => {\r\n\t\tfunction onInput( event ) {\r\n\t\t\tfor ( const keyboardShortcut of inputEvents.current ) {\r\n\t\t\t\tkeyboardShortcut( event );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\telement.addEventListener( 'input', onInput );\r\n\t\treturn () => {\r\n\t\t\telement.removeEventListener( 'input', onInput );\r\n\t\t};\r\n\t}, [] );\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useRefEffect } from '@wordpress/compose';\r\nimport { useDispatch } from '@wordpress/data';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as blockEditorStore } from '../../store';\r\n\r\n/**\r\n * When the browser is about to auto correct, add an undo level so the user can\r\n * revert the change.\r\n */\r\nexport function useInsertReplacementText() {\r\n\tconst { __unstableMarkLastChangeAsPersistent } =\r\n\t\tuseDispatch( blockEditorStore );\r\n\treturn useRefEffect( ( element ) => {\r\n\t\tfunction onInput( event ) {\r\n\t\t\tif ( event.inputType === 'insertReplacementText' ) {\r\n\t\t\t\t__unstableMarkLastChangeAsPersistent();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\telement.addEventListener( 'beforeinput', onInput );\r\n\t\treturn () => {\r\n\t\t\telement.removeEventListener( 'beforeinput', onInput );\r\n\t\t};\r\n\t}, [] );\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useRefEffect } from '@wordpress/compose';\r\nimport { useSelect } from '@wordpress/data';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as blockEditorStore } from '../../store';\r\n\r\nexport function useFirefoxCompat() {\r\n\tconst { isMultiSelecting } = useSelect( blockEditorStore );\r\n\treturn useRefEffect( ( element ) => {\r\n\t\tfunction onFocus() {\r\n\t\t\tif ( ! isMultiSelecting() ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// This is a little hack to work around focus issues with nested\r\n\t\t\t// editable elements in Firefox. For some reason the editable child\r\n\t\t\t// element sometimes regains focus, while it should not be focusable\r\n\t\t\t// and focus should remain on the editable parent element.\r\n\t\t\t// To do: try to find the cause of the shifting focus.\r\n\t\t\tconst parentEditable = element.parentElement.closest(\r\n\t\t\t\t'[contenteditable=\"true\"]'\r\n\t\t\t);\r\n\r\n\t\t\tif ( parentEditable ) {\r\n\t\t\t\tparentEditable.focus();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\telement.addEventListener( 'focus', onFocus );\r\n\t\treturn () => {\r\n\t\t\telement.removeEventListener( 'focus', onFocus );\r\n\t\t};\r\n\t}, [] );\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { getActiveFormat, getActiveObject } from '@wordpress/rich-text';\r\nimport { useContext, useMemo } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport BlockContext from '../block-context';\r\n\r\nconst DEFAULT_BLOCK_CONTEXT = {};\r\n\r\nexport const usesContextKey = Symbol( 'usesContext' );\r\n\r\nfunction Edit( { onChange, onFocus, value, forwardedRef, settings } ) {\r\n\tconst {\r\n\t\tname,\r\n\t\tedit: EditFunction,\r\n\t\t[ usesContextKey ]: usesContext,\r\n\t} = settings;\r\n\r\n\tconst blockContext = useContext( BlockContext );\r\n\r\n\t// Assign context values using the block type's declared context needs.\r\n\tconst context = useMemo( () => {\r\n\t\treturn usesContext\r\n\t\t\t? Object.fromEntries(\r\n\t\t\t\t\tObject.entries( blockContext ).filter( ( [ key ] ) =>\r\n\t\t\t\t\t\tusesContext.includes( key )\r\n\t\t\t\t\t)\r\n\t\t\t  )\r\n\t\t\t: DEFAULT_BLOCK_CONTEXT;\r\n\t}, [ usesContext, blockContext ] );\r\n\r\n\tif ( ! EditFunction ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tconst activeFormat = getActiveFormat( value, name );\r\n\tconst isActive = activeFormat !== undefined;\r\n\tconst activeObject = getActiveObject( value );\r\n\tconst isObjectActive =\r\n\t\tactiveObject !== undefined && activeObject.type === name;\r\n\r\n\treturn (\r\n\t\t<EditFunction\r\n\t\t\tkey={ name }\r\n\t\t\tisActive={ isActive }\r\n\t\t\tactiveAttributes={ isActive ? activeFormat.attributes || {} : {} }\r\n\t\t\tisObjectActive={ isObjectActive }\r\n\t\t\tactiveObjectAttributes={\r\n\t\t\t\tisObjectActive ? activeObject.attributes || {} : {}\r\n\t\t\t}\r\n\t\t\tvalue={ value }\r\n\t\t\tonChange={ onChange }\r\n\t\t\tonFocus={ onFocus }\r\n\t\t\tcontentRef={ forwardedRef }\r\n\t\t\tcontext={ context }\r\n\t\t/>\r\n\t);\r\n}\r\n\r\nexport default function FormatEdit( { formatTypes, ...props } ) {\r\n\treturn formatTypes.map( ( settings ) => (\r\n\t\t<Edit settings={ settings } { ...props } key={ settings.name } />\r\n\t) );\r\n}\r\n","/**\n * WordPress dependencies\n */\nimport { RawHTML } from '@wordpress/element';\nimport { children as childrenSource } from '@wordpress/blocks';\nimport deprecated from '@wordpress/deprecated';\n\n/**\n * Internal dependencies\n */\nimport RichText from './';\n\n/**\n * Internal dependencies\n */\nimport { getMultilineTag } from './utils';\n\nexport function Content( {\n\tvalue,\n\ttagName: Tag,\n\tmultiline,\n\tformat,\n\t...props\n} ) {\n\tif ( RichText.isEmpty( value ) ) {\n\t\tconst MultilineTag = getMultilineTag( multiline );\n\t\tvalue = MultilineTag ? <MultilineTag /> : null;\n\t} else if ( Array.isArray( value ) ) {\n\t\tdeprecated( 'wp.blockEditor.RichText value prop as children type', {\n\t\t\tsince: '6.1',\n\t\t\tversion: '6.3',\n\t\t\talternative: 'value prop as string',\n\t\t\tlink: 'https://developer.wordpress.org/block-editor/how-to-guides/block-tutorial/introducing-attributes-and-editable-fields/',\n\t\t} );\n\t\tvalue = <RawHTML>{ childrenSource.toHTML( value ) }</RawHTML>;\n\t} else if ( typeof value === 'string' ) {\n\t\t// To do: deprecate.\n\t\tvalue = <RawHTML>{ value }</RawHTML>;\n\t} else {\n\t\t// To do: create a toReactComponent method on RichTextData, which we\n\t\t// might in the future also use for the editable tree. See\n\t\t// https://github.com/WordPress/gutenberg/pull/41655.\n\t\tvalue = <RawHTML>{ value.toHTMLString() }</RawHTML>;\n\t}\n\n\treturn Tag ? <Tag { ...props }>{ value }</Tag> : value;\n}\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { forwardRef } from '@wordpress/element';\r\nimport deprecated from '@wordpress/deprecated';\r\nimport { useDispatch } from '@wordpress/data';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { RichTextWrapper } from './';\r\nimport { store as blockEditorStore } from '../../store';\r\nimport { useBlockEditContext } from '../block-edit';\r\nimport { getMultilineTag } from './utils';\r\n\r\nfunction RichTextMultiline(\r\n\t{\r\n\t\tchildren,\r\n\t\tidentifier,\r\n\t\ttagName: TagName = 'div',\r\n\t\tvalue = '',\r\n\t\tonChange,\r\n\t\tmultiline,\r\n\t\t...props\r\n\t},\r\n\tforwardedRef\r\n) {\r\n\tdeprecated( 'wp.blockEditor.RichText multiline prop', {\r\n\t\tsince: '6.1',\r\n\t\tversion: '6.3',\r\n\t\talternative: 'nested blocks (InnerBlocks)',\r\n\t\tlink: 'https://developer.wordpress.org/block-editor/how-to-guides/block-tutorial/nested-blocks-inner-blocks/',\r\n\t} );\r\n\r\n\tconst { clientId } = useBlockEditContext();\r\n\tconst { selectionChange } = useDispatch( blockEditorStore );\r\n\r\n\tconst multilineTagName = getMultilineTag( multiline );\r\n\tvalue = value || `<${ multilineTagName }></${ multilineTagName }>`;\r\n\tconst padded = `</${ multilineTagName }>${ value }<${ multilineTagName }>`;\r\n\tconst values = padded.split(\r\n\t\t`</${ multilineTagName }><${ multilineTagName }>`\r\n\t);\r\n\r\n\tvalues.shift();\r\n\tvalues.pop();\r\n\r\n\tfunction _onChange( newValues ) {\r\n\t\tonChange(\r\n\t\t\t`<${ multilineTagName }>${ newValues.join(\r\n\t\t\t\t`</${ multilineTagName }><${ multilineTagName }>`\r\n\t\t\t) }</${ multilineTagName }>`\r\n\t\t);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<TagName ref={ forwardedRef }>\r\n\t\t\t{ values.map( ( _value, index ) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<RichTextWrapper\r\n\t\t\t\t\t\tkey={ index }\r\n\t\t\t\t\t\tidentifier={ `${ identifier }-${ index }` }\r\n\t\t\t\t\t\ttagName={ multilineTagName }\r\n\t\t\t\t\t\tvalue={ _value }\r\n\t\t\t\t\t\tonChange={ ( newValue ) => {\r\n\t\t\t\t\t\t\tconst newValues = values.slice();\r\n\t\t\t\t\t\t\tnewValues[ index ] = newValue;\r\n\t\t\t\t\t\t\t_onChange( newValues );\r\n\t\t\t\t\t\t} }\r\n\t\t\t\t\t\tisSelected={ undefined }\r\n\t\t\t\t\t\tonSplit={ ( v ) => v }\r\n\t\t\t\t\t\tonReplace={ ( array ) => {\r\n\t\t\t\t\t\t\tconst newValues = values.slice();\r\n\t\t\t\t\t\t\tnewValues.splice( index, 1, ...array );\r\n\t\t\t\t\t\t\t_onChange( newValues );\r\n\t\t\t\t\t\t\tselectionChange(\r\n\t\t\t\t\t\t\t\tclientId,\r\n\t\t\t\t\t\t\t\t`${ identifier }-${ index + 1 }`,\r\n\t\t\t\t\t\t\t\t0,\r\n\t\t\t\t\t\t\t\t0\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t} }\r\n\t\t\t\t\t\tonMerge={ ( forward ) => {\r\n\t\t\t\t\t\t\tconst newValues = values.slice();\r\n\t\t\t\t\t\t\tlet offset = 0;\r\n\t\t\t\t\t\t\tif ( forward ) {\r\n\t\t\t\t\t\t\t\tif ( ! newValues[ index + 1 ] ) return;\r\n\t\t\t\t\t\t\t\tnewValues.splice(\r\n\t\t\t\t\t\t\t\t\tindex,\r\n\t\t\t\t\t\t\t\t\t2,\r\n\t\t\t\t\t\t\t\t\tnewValues[ index ] + newValues[ index + 1 ]\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\toffset = newValues[ index ].length - 1;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif ( ! newValues[ index - 1 ] ) return;\r\n\t\t\t\t\t\t\t\tnewValues.splice(\r\n\t\t\t\t\t\t\t\t\tindex - 1,\r\n\t\t\t\t\t\t\t\t\t2,\r\n\t\t\t\t\t\t\t\t\tnewValues[ index - 1 ] + newValues[ index ]\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\toffset = newValues[ index - 1 ].length - 1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t_onChange( newValues );\r\n\t\t\t\t\t\t\tselectionChange(\r\n\t\t\t\t\t\t\t\tclientId,\r\n\t\t\t\t\t\t\t\t`${ identifier }-${\r\n\t\t\t\t\t\t\t\t\tindex - ( forward ? 0 : 1 )\r\n\t\t\t\t\t\t\t\t}`,\r\n\t\t\t\t\t\t\t\toffset,\r\n\t\t\t\t\t\t\t\toffset\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t} }\r\n\t\t\t\t\t\t{ ...props }\r\n\t\t\t\t\t/>\r\n\t\t\t\t);\r\n\t\t\t} ) }\r\n\t\t</TagName>\r\n\t);\r\n}\r\n\r\nexport default forwardRef( RichTextMultiline );\r\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tuseRef,\n\tuseCallback,\n\tforwardRef,\n\tcreateContext,\n} from '@wordpress/element';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { useMergeRefs, useInstanceId } from '@wordpress/compose';\nimport {\n\t__unstableUseRichText as useRichText,\n\tremoveFormat,\n} from '@wordpress/rich-text';\nimport { Popover } from '@wordpress/components';\nimport { getBlockType, store as blocksStore } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport { useBlockEditorAutocompleteProps } from '../autocomplete';\nimport { useBlockEditContext } from '../block-edit';\nimport { blockBindingsKey } from '../block-edit/context';\nimport FormatToolbarContainer from './format-toolbar-container';\nimport { store as blockEditorStore } from '../../store';\nimport { useUndoAutomaticChange } from './use-undo-automatic-change';\nimport { useMarkPersistent } from './use-mark-persistent';\nimport { usePasteHandler } from './use-paste-handler';\nimport { useBeforeInputRules } from './use-before-input-rules';\nimport { useInputRules } from './use-input-rules';\nimport { useDelete } from './use-delete';\nimport { useEnter } from './use-enter';\nimport { useFormatTypes } from './use-format-types';\nimport { useRemoveBrowserShortcuts } from './use-remove-browser-shortcuts';\nimport { useShortcuts } from './use-shortcuts';\nimport { useInputEvents } from './use-input-events';\nimport { useInsertReplacementText } from './use-insert-replacement-text';\nimport { useFirefoxCompat } from './use-firefox-compat';\nimport FormatEdit from './format-edit';\nimport { getAllowedFormats } from './utils';\nimport { Content } from './content';\nimport { withDeprecations } from './with-deprecations';\nimport { unlock } from '../../lock-unlock';\nimport { canBindBlock } from '../../hooks/use-bindings-attributes';\n\nexport const keyboardShortcutContext = createContext();\nexport const inputEventContext = createContext();\n\nconst instanceIdKey = Symbol( 'instanceId' );\n\n/**\n * Removes props used for the native version of RichText so that they are not\n * passed to the DOM element and log warnings.\n *\n * @param {Object} props Props to filter.\n *\n * @return {Object} Filtered props.\n */\nfunction removeNativeProps( props ) {\n\tconst {\n\t\t__unstableMobileNoFocusOnMount,\n\t\tdeleteEnter,\n\t\tplaceholderTextColor,\n\t\ttextAlign,\n\t\tselectionColor,\n\t\ttagsToEliminate,\n\t\tdisableEditingMenu,\n\t\tfontSize,\n\t\tfontFamily,\n\t\tfontWeight,\n\t\tfontStyle,\n\t\tminWidth,\n\t\tmaxWidth,\n\t\tdisableSuggestions,\n\t\tdisableAutocorrection,\n\t\t...restProps\n\t} = props;\n\treturn restProps;\n}\n\nexport function RichTextWrapper(\n\t{\n\t\tchildren,\n\t\ttagName = 'div',\n\t\tvalue: adjustedValue = '',\n\t\tonChange: adjustedOnChange,\n\t\tisSelected: originalIsSelected,\n\t\tmultiline,\n\t\tinlineToolbar,\n\t\twrapperClassName,\n\t\tautocompleters,\n\t\tonReplace,\n\t\tplaceholder,\n\t\tallowedFormats,\n\t\twithoutInteractiveFormatting,\n\t\tonRemove,\n\t\tonMerge,\n\t\tonSplit,\n\t\t__unstableOnSplitAtEnd: onSplitAtEnd,\n\t\t__unstableOnSplitAtDoubleLineEnd: onSplitAtDoubleLineEnd,\n\t\tidentifier,\n\t\tpreserveWhiteSpace,\n\t\t__unstablePastePlainText: pastePlainText,\n\t\t__unstableEmbedURLOnPaste,\n\t\t__unstableDisableFormats: disableFormats,\n\t\tdisableLineBreaks,\n\t\t__unstableAllowPrefixTransformations,\n\t\treadOnly,\n\t\t...props\n\t},\n\tforwardedRef\n) {\n\tprops = removeNativeProps( props );\n\n\tconst instanceId = useInstanceId( RichTextWrapper );\n\n\tconst anchorRef = useRef();\n\tconst context = useBlockEditContext();\n\tconst { clientId, isSelected: isBlockSelected, name: blockName } = context;\n\tconst blockBindings = context[ blockBindingsKey ];\n\tconst selector = ( select ) => {\n\t\t// Avoid subscribing to the block editor store if the block is not\n\t\t// selected.\n\t\tif ( ! isBlockSelected ) {\n\t\t\treturn { isSelected: false };\n\t\t}\n\n\t\tconst { getSelectionStart, getSelectionEnd } =\n\t\t\tselect( blockEditorStore );\n\t\tconst selectionStart = getSelectionStart();\n\t\tconst selectionEnd = getSelectionEnd();\n\n\t\tlet isSelected;\n\n\t\tif ( originalIsSelected === undefined ) {\n\t\t\tisSelected =\n\t\t\t\tselectionStart.clientId === clientId &&\n\t\t\t\tselectionEnd.clientId === clientId &&\n\t\t\t\t( identifier\n\t\t\t\t\t? selectionStart.attributeKey === identifier\n\t\t\t\t\t: selectionStart[ instanceIdKey ] === instanceId );\n\t\t} else if ( originalIsSelected ) {\n\t\t\tisSelected = selectionStart.clientId === clientId;\n\t\t}\n\n\t\treturn {\n\t\t\tselectionStart: isSelected ? selectionStart.offset : undefined,\n\t\t\tselectionEnd: isSelected ? selectionEnd.offset : undefined,\n\t\t\tisSelected,\n\t\t};\n\t};\n\tconst { selectionStart, selectionEnd, isSelected } = useSelect( selector, [\n\t\tclientId,\n\t\tidentifier,\n\t\tinstanceId,\n\t\toriginalIsSelected,\n\t\tisBlockSelected,\n\t] );\n\n\tconst disableBoundBlocks = useSelect(\n\t\t( select ) => {\n\t\t\t// Disable Rich Text editing if block bindings specify that.\n\t\t\tlet _disableBoundBlocks = false;\n\t\t\tif ( blockBindings && canBindBlock( blockName ) ) {\n\t\t\t\tconst blockTypeAttributes =\n\t\t\t\t\tgetBlockType( blockName ).attributes;\n\t\t\t\tconst { getBlockBindingsSource } = unlock(\n\t\t\t\t\tselect( blocksStore )\n\t\t\t\t);\n\t\t\t\tfor ( const [ attribute, args ] of Object.entries(\n\t\t\t\t\tblockBindings\n\t\t\t\t) ) {\n\t\t\t\t\tif (\n\t\t\t\t\t\tblockTypeAttributes?.[ attribute ]?.source !==\n\t\t\t\t\t\t'rich-text'\n\t\t\t\t\t) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\t// If the source is not defined, or if its value of `lockAttributesEditing` is `true`, disable it.\n\t\t\t\t\tconst blockBindingsSource = getBlockBindingsSource(\n\t\t\t\t\t\targs.source\n\t\t\t\t\t);\n\t\t\t\t\tif (\n\t\t\t\t\t\t! blockBindingsSource ||\n\t\t\t\t\t\tblockBindingsSource.lockAttributesEditing\n\t\t\t\t\t) {\n\t\t\t\t\t\t_disableBoundBlocks = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn _disableBoundBlocks;\n\t\t},\n\t\t[ blockBindings, blockName ]\n\t);\n\n\tconst shouldDisableEditing = readOnly || disableBoundBlocks;\n\n\tconst { getSelectionStart, getSelectionEnd, getBlockRootClientId } =\n\t\tuseSelect( blockEditorStore );\n\tconst { selectionChange } = useDispatch( blockEditorStore );\n\tconst adjustedAllowedFormats = getAllowedFormats( {\n\t\tallowedFormats,\n\t\tdisableFormats,\n\t} );\n\tconst hasFormats =\n\t\t! adjustedAllowedFormats || adjustedAllowedFormats.length > 0;\n\n\tconst onSelectionChange = useCallback(\n\t\t( start, end ) => {\n\t\t\tconst selection = {};\n\t\t\tconst unset = start === undefined && end === undefined;\n\n\t\t\tconst baseSelection = {\n\t\t\t\tclientId,\n\t\t\t\t[ identifier ? 'attributeKey' : instanceIdKey ]: identifier\n\t\t\t\t\t? identifier\n\t\t\t\t\t: instanceId,\n\t\t\t};\n\n\t\t\tif ( typeof start === 'number' || unset ) {\n\t\t\t\t// If we are only setting the start (or the end below), which\n\t\t\t\t// means a partial selection, and we're not updating a selection\n\t\t\t\t// with the same client ID, abort. This means the selected block\n\t\t\t\t// is a parent block.\n\t\t\t\tif (\n\t\t\t\t\tend === undefined &&\n\t\t\t\t\tgetBlockRootClientId( clientId ) !==\n\t\t\t\t\t\tgetBlockRootClientId( getSelectionEnd().clientId )\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tselection.start = {\n\t\t\t\t\t...baseSelection,\n\t\t\t\t\toffset: start,\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tif ( typeof end === 'number' || unset ) {\n\t\t\t\tif (\n\t\t\t\t\tstart === undefined &&\n\t\t\t\t\tgetBlockRootClientId( clientId ) !==\n\t\t\t\t\t\tgetBlockRootClientId( getSelectionStart().clientId )\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tselection.end = {\n\t\t\t\t\t...baseSelection,\n\t\t\t\t\toffset: end,\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tselectionChange( selection );\n\t\t},\n\t\t[\n\t\t\tclientId,\n\t\t\tgetBlockRootClientId,\n\t\t\tgetSelectionEnd,\n\t\t\tgetSelectionStart,\n\t\t\tidentifier,\n\t\t\tinstanceId,\n\t\t\tselectionChange,\n\t\t]\n\t);\n\n\tconst {\n\t\tformatTypes,\n\t\tprepareHandlers,\n\t\tvalueHandlers,\n\t\tchangeHandlers,\n\t\tdependencies,\n\t} = useFormatTypes( {\n\t\tclientId,\n\t\tidentifier,\n\t\twithoutInteractiveFormatting,\n\t\tallowedFormats: adjustedAllowedFormats,\n\t} );\n\n\tfunction addEditorOnlyFormats( value ) {\n\t\treturn valueHandlers.reduce(\n\t\t\t( accumulator, fn ) => fn( accumulator, value.text ),\n\t\t\tvalue.formats\n\t\t);\n\t}\n\n\tfunction removeEditorOnlyFormats( value ) {\n\t\tformatTypes.forEach( ( formatType ) => {\n\t\t\t// Remove formats created by prepareEditableTree, because they are editor only.\n\t\t\tif ( formatType.__experimentalCreatePrepareEditableTree ) {\n\t\t\t\tvalue = removeFormat(\n\t\t\t\t\tvalue,\n\t\t\t\t\tformatType.name,\n\t\t\t\t\t0,\n\t\t\t\t\tvalue.text.length\n\t\t\t\t);\n\t\t\t}\n\t\t} );\n\n\t\treturn value.formats;\n\t}\n\n\tfunction addInvisibleFormats( value ) {\n\t\treturn prepareHandlers.reduce(\n\t\t\t( accumulator, fn ) => fn( accumulator, value.text ),\n\t\t\tvalue.formats\n\t\t);\n\t}\n\n\tconst {\n\t\tvalue,\n\t\tgetValue,\n\t\tonChange,\n\t\tref: richTextRef,\n\t} = useRichText( {\n\t\tvalue: adjustedValue,\n\t\tonChange( html, { __unstableFormats, __unstableText } ) {\n\t\t\tadjustedOnChange( html );\n\t\t\tObject.values( changeHandlers ).forEach( ( changeHandler ) => {\n\t\t\t\tchangeHandler( __unstableFormats, __unstableText );\n\t\t\t} );\n\t\t},\n\t\tselectionStart,\n\t\tselectionEnd,\n\t\tonSelectionChange,\n\t\tplaceholder,\n\t\t__unstableIsSelected: isSelected,\n\t\t__unstableDisableFormats: disableFormats,\n\t\tpreserveWhiteSpace,\n\t\t__unstableDependencies: [ ...dependencies, tagName ],\n\t\t__unstableAfterParse: addEditorOnlyFormats,\n\t\t__unstableBeforeSerialize: removeEditorOnlyFormats,\n\t\t__unstableAddInvisibleFormats: addInvisibleFormats,\n\t} );\n\tconst autocompleteProps = useBlockEditorAutocompleteProps( {\n\t\tonReplace,\n\t\tcompleters: autocompleters,\n\t\trecord: value,\n\t\tonChange,\n\t} );\n\n\tuseMarkPersistent( { html: adjustedValue, value } );\n\n\tconst keyboardShortcuts = useRef( new Set() );\n\tconst inputEvents = useRef( new Set() );\n\n\tfunction onFocus() {\n\t\tanchorRef.current?.focus();\n\t}\n\n\tconst TagName = tagName;\n\treturn (\n\t\t<>\n\t\t\t{ isSelected && (\n\t\t\t\t<keyboardShortcutContext.Provider value={ keyboardShortcuts }>\n\t\t\t\t\t<inputEventContext.Provider value={ inputEvents }>\n\t\t\t\t\t\t<Popover.__unstableSlotNameProvider value=\"__unstable-block-tools-after\">\n\t\t\t\t\t\t\t{ children &&\n\t\t\t\t\t\t\t\tchildren( { value, onChange, onFocus } ) }\n\n\t\t\t\t\t\t\t<FormatEdit\n\t\t\t\t\t\t\t\tvalue={ value }\n\t\t\t\t\t\t\t\tonChange={ onChange }\n\t\t\t\t\t\t\t\tonFocus={ onFocus }\n\t\t\t\t\t\t\t\tformatTypes={ formatTypes }\n\t\t\t\t\t\t\t\tforwardedRef={ anchorRef }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Popover.__unstableSlotNameProvider>\n\t\t\t\t\t</inputEventContext.Provider>\n\t\t\t\t</keyboardShortcutContext.Provider>\n\t\t\t) }\n\t\t\t{ isSelected && hasFormats && (\n\t\t\t\t<FormatToolbarContainer\n\t\t\t\t\tinline={ inlineToolbar }\n\t\t\t\t\teditableContentElement={ anchorRef.current }\n\t\t\t\t/>\n\t\t\t) }\n\t\t\t<TagName\n\t\t\t\t// Overridable props.\n\t\t\t\trole=\"textbox\"\n\t\t\t\taria-multiline={ ! disableLineBreaks }\n\t\t\t\taria-label={ placeholder }\n\t\t\t\taria-readonly={ shouldDisableEditing }\n\t\t\t\t{ ...props }\n\t\t\t\t{ ...autocompleteProps }\n\t\t\t\tref={ useMergeRefs( [\n\t\t\t\t\t// Rich text ref must be first because its focus listener\n\t\t\t\t\t// must be set up before any other ref calls .focus() on\n\t\t\t\t\t// mount.\n\t\t\t\t\trichTextRef,\n\t\t\t\t\tforwardedRef,\n\t\t\t\t\tautocompleteProps.ref,\n\t\t\t\t\tprops.ref,\n\t\t\t\t\tuseBeforeInputRules( { value, onChange } ),\n\t\t\t\t\tuseInputRules( {\n\t\t\t\t\t\tgetValue,\n\t\t\t\t\t\tonChange,\n\t\t\t\t\t\t__unstableAllowPrefixTransformations,\n\t\t\t\t\t\tformatTypes,\n\t\t\t\t\t\tonReplace,\n\t\t\t\t\t\tselectionChange,\n\t\t\t\t\t} ),\n\t\t\t\t\tuseInsertReplacementText(),\n\t\t\t\t\tuseRemoveBrowserShortcuts(),\n\t\t\t\t\tuseShortcuts( keyboardShortcuts ),\n\t\t\t\t\tuseInputEvents( inputEvents ),\n\t\t\t\t\tuseUndoAutomaticChange(),\n\t\t\t\t\tusePasteHandler( {\n\t\t\t\t\t\tisSelected,\n\t\t\t\t\t\tdisableFormats,\n\t\t\t\t\t\tonChange,\n\t\t\t\t\t\tvalue,\n\t\t\t\t\t\tformatTypes,\n\t\t\t\t\t\ttagName,\n\t\t\t\t\t\tonReplace,\n\t\t\t\t\t\tonSplit,\n\t\t\t\t\t\t__unstableEmbedURLOnPaste,\n\t\t\t\t\t\tpastePlainText,\n\t\t\t\t\t} ),\n\t\t\t\t\tuseDelete( {\n\t\t\t\t\t\tvalue,\n\t\t\t\t\t\tonMerge,\n\t\t\t\t\t\tonRemove,\n\t\t\t\t\t} ),\n\t\t\t\t\tuseEnter( {\n\t\t\t\t\t\tremoveEditorOnlyFormats,\n\t\t\t\t\t\tvalue,\n\t\t\t\t\t\tonReplace,\n\t\t\t\t\t\tonSplit,\n\t\t\t\t\t\tonChange,\n\t\t\t\t\t\tdisableLineBreaks,\n\t\t\t\t\t\tonSplitAtEnd,\n\t\t\t\t\t\tonSplitAtDoubleLineEnd,\n\t\t\t\t\t} ),\n\t\t\t\t\tuseFirefoxCompat(),\n\t\t\t\t\tanchorRef,\n\t\t\t\t] ) }\n\t\t\t\tcontentEditable={ ! shouldDisableEditing }\n\t\t\t\tsuppressContentEditableWarning\n\t\t\t\tclassName={ classnames(\n\t\t\t\t\t'block-editor-rich-text__editable',\n\t\t\t\t\tprops.className,\n\t\t\t\t\t'rich-text'\n\t\t\t\t) }\n\t\t\t\t// Setting tabIndex to 0 is unnecessary, the element is already\n\t\t\t\t// focusable because it's contentEditable. This also fixes a\n\t\t\t\t// Safari bug where it's not possible to Shift+Click multi\n\t\t\t\t// select blocks when Shift Clicking into an element with\n\t\t\t\t// tabIndex because Safari will focus the element. However,\n\t\t\t\t// Safari will correctly ignore nested contentEditable elements.\n\t\t\t\ttabIndex={\n\t\t\t\t\tprops.tabIndex === 0 && ! shouldDisableEditing\n\t\t\t\t\t\t? null\n\t\t\t\t\t\t: props.tabIndex\n\t\t\t\t}\n\t\t\t\tdata-wp-block-attribute-key={ identifier }\n\t\t\t/>\n\t\t</>\n\t);\n}\n\n// This is the private API for the RichText component.\n// It allows access to all props, not just the public ones.\nexport const PrivateRichText = withDeprecations(\n\tforwardRef( RichTextWrapper )\n);\n\nPrivateRichText.Content = Content;\nPrivateRichText.isEmpty = ( value ) => {\n\treturn ! value || value.length === 0;\n};\n\n// This is the public API for the RichText component.\n// We wrap the PrivateRichText component to hide some props from the public API.\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/rich-text/README.md\n */\nconst PublicForwardedRichTextContainer = forwardRef( ( props, ref ) => {\n\treturn <PrivateRichText ref={ ref } { ...props } readOnly={ false } />;\n} );\n\nPublicForwardedRichTextContainer.Content = Content;\nPublicForwardedRichTextContainer.isEmpty = ( value ) => {\n\treturn ! value || value.length === 0;\n};\n\nexport default PublicForwardedRichTextContainer;\nexport { RichTextShortcut } from './shortcut';\nexport { RichTextToolbarButton } from './toolbar-button';\nexport { __unstableRichTextInputEvent } from './input-event';\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useLayoutEffect, useRef } from '@wordpress/element';\r\nimport { useDispatch } from '@wordpress/data';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as blockEditorStore } from '../../store';\r\n\r\nexport function useMarkPersistent( { html, value } ) {\r\n\tconst previousText = useRef();\r\n\tconst hasActiveFormats = !! value.activeFormats?.length;\r\n\tconst { __unstableMarkLastChangeAsPersistent } =\r\n\t\tuseDispatch( blockEditorStore );\r\n\r\n\t// Must be set synchronously to make sure it applies to the last change.\r\n\tuseLayoutEffect( () => {\r\n\t\t// Ignore mount.\r\n\t\tif ( ! previousText.current ) {\r\n\t\t\tpreviousText.current = value.text;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Text input, so don't create an undo level for every character.\r\n\t\t// Create an undo level after 1 second of no input.\r\n\t\tif ( previousText.current !== value.text ) {\r\n\t\t\tconst timeout = window.setTimeout( () => {\r\n\t\t\t\t__unstableMarkLastChangeAsPersistent();\r\n\t\t\t}, 1000 );\r\n\t\t\tpreviousText.current = value.text;\r\n\t\t\treturn () => {\r\n\t\t\t\twindow.clearTimeout( timeout );\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\t__unstableMarkLastChangeAsPersistent();\r\n\t}, [ html, hasActiveFormats ] );\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useRefEffect } from '@wordpress/compose';\r\nimport { isKeyboardEvent } from '@wordpress/keycodes';\r\n\r\n/**\r\n * Hook to prevent default behaviors for key combinations otherwise handled\r\n * internally by RichText.\r\n *\r\n * @return {import('react').RefObject} The component to be rendered.\r\n */\r\nexport function useRemoveBrowserShortcuts() {\r\n\treturn useRefEffect( ( node ) => {\r\n\t\tfunction onKeydown( event ) {\r\n\t\t\tif (\r\n\t\t\t\tisKeyboardEvent.primary( event, 'z' ) ||\r\n\t\t\t\tisKeyboardEvent.primary( event, 'y' ) ||\r\n\t\t\t\tisKeyboardEvent.primaryShift( event, 'z' )\r\n\t\t\t) {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t}\r\n\t\t}\r\n\t\tnode.addEventListener( 'keydown', onKeydown );\r\n\t\treturn () => {\r\n\t\t\tnode.removeEventListener( 'keydown', onKeydown );\r\n\t\t};\r\n\t}, [] );\r\n}\r\n","/**\n * WordPress dependencies\n */\nimport { forwardRef } from '@wordpress/element';\nimport { children as childrenSource } from '@wordpress/blocks';\nimport { __unstableCreateElement } from '@wordpress/rich-text';\nimport deprecated from '@wordpress/deprecated';\n\n/**\n * Internal dependencies\n */\nimport RichTextMultiline from './multiline';\n\nexport function withDeprecations( Component ) {\n\treturn forwardRef( ( props, ref ) => {\n\t\tlet value = props.value;\n\t\tlet onChange = props.onChange;\n\n\t\t// Handle deprecated format.\n\t\tif ( Array.isArray( value ) ) {\n\t\t\tdeprecated( 'wp.blockEditor.RichText value prop as children type', {\n\t\t\t\tsince: '6.1',\n\t\t\t\tversion: '6.3',\n\t\t\t\talternative: 'value prop as string',\n\t\t\t\tlink: 'https://developer.wordpress.org/block-editor/how-to-guides/block-tutorial/introducing-attributes-and-editable-fields/',\n\t\t\t} );\n\n\t\t\tvalue = childrenSource.toHTML( props.value );\n\t\t\tonChange = ( newValue ) =>\n\t\t\t\tprops.onChange(\n\t\t\t\t\tchildrenSource.fromDOM(\n\t\t\t\t\t\t__unstableCreateElement( document, newValue ).childNodes\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t}\n\n\t\tconst NewComponent = props.multiline ? RichTextMultiline : Component;\n\n\t\treturn (\n\t\t\t<NewComponent\n\t\t\t\t{ ...props }\n\t\t\t\tvalue={ value }\n\t\t\t\tonChange={ onChange }\n\t\t\t\tref={ ref }\n\t\t\t/>\n\t\t);\n\t} );\n}\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { forwardRef } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport RichText from '../rich-text';\r\n\r\nconst EditableText = forwardRef( ( props, ref ) => {\r\n\treturn <RichText ref={ ref } { ...props } __unstableDisableFormats />;\r\n} );\r\n\r\nEditableText.Content = ( { value = '', tagName: Tag = 'div', ...props } ) => {\r\n\treturn <Tag { ...props }>{ value }</Tag>;\r\n};\r\n\r\n/**\r\n * Renders an editable text input in which text formatting is not allowed.\r\n */\r\nexport default EditableText;\r\n","/**\r\n * External dependencies\r\n */\r\nimport TextareaAutosize from 'react-autosize-textarea';\r\nimport classnames from 'classnames';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { forwardRef } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport EditableText from '../editable-text';\r\n\r\n/**\r\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/plain-text/README.md\r\n */\r\nconst PlainText = forwardRef( ( { __experimentalVersion, ...props }, ref ) => {\r\n\tif ( __experimentalVersion === 2 ) {\r\n\t\treturn <EditableText ref={ ref } { ...props } />;\r\n\t}\r\n\r\n\tconst { className, onChange, ...remainingProps } = props;\r\n\r\n\treturn (\r\n\t\t<TextareaAutosize\r\n\t\t\tref={ ref }\r\n\t\t\tclassName={ classnames( 'block-editor-plain-text', className ) }\r\n\t\t\tonChange={ ( event ) => onChange( event.target.value ) }\r\n\t\t\t{ ...remainingProps }\r\n\t\t/>\r\n\t);\r\n} );\r\n\r\nexport default PlainText;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useInstanceId } from '@wordpress/compose';\r\nimport { VisuallyHidden } from '@wordpress/components';\r\nimport { _x, sprintf } from '@wordpress/i18n';\r\n\r\nexport default function ResponsiveBlockControlLabel( {\r\n\tproperty,\r\n\tviewport,\r\n\tdesc,\r\n} ) {\r\n\tconst instanceId = useInstanceId( ResponsiveBlockControlLabel );\r\n\tconst accessibleLabel =\r\n\t\tdesc ||\r\n\t\tsprintf(\r\n\t\t\t/* translators: 1: property name. 2: viewport name. */\r\n\t\t\t_x(\r\n\t\t\t\t'Controls the %1$s property for %2$s viewports.',\r\n\t\t\t\t'Text labelling a interface as controlling a given layout property (eg: margin) for a given screen size.'\r\n\t\t\t),\r\n\t\t\tproperty,\r\n\t\t\tviewport.label\r\n\t\t);\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<span aria-describedby={ `rbc-desc-${ instanceId }` }>\r\n\t\t\t\t{ viewport.label }\r\n\t\t\t</span>\r\n\t\t\t<VisuallyHidden as=\"span\" id={ `rbc-desc-${ instanceId }` }>\r\n\t\t\t\t{ accessibleLabel }\r\n\t\t\t</VisuallyHidden>\r\n\t\t</>\r\n\t);\r\n}\r\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { __, _x, sprintf } from '@wordpress/i18n';\nimport { Fragment } from '@wordpress/element';\nimport { ToggleControl } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport ResponsiveBlockControlLabel from './label';\n\nfunction ResponsiveBlockControl( props ) {\n\tconst {\n\t\ttitle,\n\t\tproperty,\n\t\ttoggleLabel,\n\t\tonIsResponsiveChange,\n\t\trenderDefaultControl,\n\t\trenderResponsiveControls,\n\t\tisResponsive = false,\n\t\tdefaultLabel = {\n\t\t\tid: 'all',\n\t\t\tlabel: _x( 'All', 'screen sizes' ),\n\t\t},\n\t\tviewports = [\n\t\t\t{\n\t\t\t\tid: 'small',\n\t\t\t\tlabel: __( 'Small screens' ),\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'medium',\n\t\t\t\tlabel: __( 'Medium screens' ),\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'large',\n\t\t\t\tlabel: __( 'Large screens' ),\n\t\t\t},\n\t\t],\n\t} = props;\n\n\tif ( ! title || ! property || ! renderDefaultControl ) {\n\t\treturn null;\n\t}\n\n\tconst toggleControlLabel =\n\t\ttoggleLabel ||\n\t\tsprintf(\n\t\t\t/* translators: %s: Property value for the control (eg: margin, padding, etc.). */\n\t\t\t__( 'Use the same %s on all screen sizes.' ),\n\t\t\tproperty\n\t\t);\n\n\tconst toggleHelpText = __(\n\t\t'Toggle between using the same value for all screen sizes or using a unique value per screen size.'\n\t);\n\n\tconst defaultControl = renderDefaultControl(\n\t\t<ResponsiveBlockControlLabel\n\t\t\tproperty={ property }\n\t\t\tviewport={ defaultLabel }\n\t\t/>,\n\t\tdefaultLabel\n\t);\n\n\tconst defaultResponsiveControls = () => {\n\t\treturn viewports.map( ( viewport ) => (\n\t\t\t<Fragment key={ viewport.id }>\n\t\t\t\t{ renderDefaultControl(\n\t\t\t\t\t<ResponsiveBlockControlLabel\n\t\t\t\t\t\tproperty={ property }\n\t\t\t\t\t\tviewport={ viewport }\n\t\t\t\t\t/>,\n\t\t\t\t\tviewport\n\t\t\t\t) }\n\t\t\t</Fragment>\n\t\t) );\n\t};\n\n\treturn (\n\t\t<fieldset className=\"block-editor-responsive-block-control\">\n\t\t\t<legend className=\"block-editor-responsive-block-control__title\">\n\t\t\t\t{ title }\n\t\t\t</legend>\n\n\t\t\t<div className=\"block-editor-responsive-block-control__inner\">\n\t\t\t\t<ToggleControl\n\t\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t\tclassName=\"block-editor-responsive-block-control__toggle\"\n\t\t\t\t\tlabel={ toggleControlLabel }\n\t\t\t\t\tchecked={ ! isResponsive }\n\t\t\t\t\tonChange={ onIsResponsiveChange }\n\t\t\t\t\thelp={ toggleHelpText }\n\t\t\t\t/>\n\t\t\t\t<div\n\t\t\t\t\tclassName={ classnames(\n\t\t\t\t\t\t'block-editor-responsive-block-control__group',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'is-responsive': isResponsive,\n\t\t\t\t\t\t}\n\t\t\t\t\t) }\n\t\t\t\t>\n\t\t\t\t\t{ ! isResponsive && defaultControl }\n\t\t\t\t\t{ isResponsive &&\n\t\t\t\t\t\t( renderResponsiveControls\n\t\t\t\t\t\t\t? renderResponsiveControls( viewports )\n\t\t\t\t\t\t\t: defaultResponsiveControls() ) }\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</fieldset>\n\t);\n}\n\nexport default ResponsiveBlockControl;\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { isKeyboardEvent } from '@wordpress/keycodes';\r\nimport { useEffect, useContext, useRef } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { keyboardShortcutContext } from './';\r\n\r\nexport function RichTextShortcut( { character, type, onUse } ) {\r\n\tconst keyboardShortcuts = useContext( keyboardShortcutContext );\r\n\tconst onUseRef = useRef();\r\n\tonUseRef.current = onUse;\r\n\r\n\tuseEffect( () => {\r\n\t\tfunction callback( event ) {\r\n\t\t\tif ( isKeyboardEvent[ type ]( event, character ) ) {\r\n\t\t\t\tonUseRef.current();\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tkeyboardShortcuts.current.add( callback );\r\n\t\treturn () => {\r\n\t\t\tkeyboardShortcuts.current.delete( callback );\r\n\t\t};\r\n\t}, [ character, type ] );\r\n\r\n\treturn null;\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { Fill, ToolbarButton } from '@wordpress/components';\r\nimport { displayShortcut } from '@wordpress/keycodes';\r\n\r\nexport function RichTextToolbarButton( {\r\n\tname,\r\n\tshortcutType,\r\n\tshortcutCharacter,\r\n\t...props\r\n} ) {\r\n\tlet shortcut;\r\n\tlet fillName = 'RichText.ToolbarControls';\r\n\r\n\tif ( name ) {\r\n\t\tfillName += `.${ name }`;\r\n\t}\r\n\r\n\tif ( shortcutType && shortcutCharacter ) {\r\n\t\tshortcut = displayShortcut[ shortcutType ]( shortcutCharacter );\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Fill name={ fillName }>\r\n\t\t\t<ToolbarButton { ...props } shortcut={ shortcut } />\r\n\t\t</Fill>\r\n\t);\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useEffect, useContext, useRef } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { inputEventContext } from './';\r\n\r\nexport function __unstableRichTextInputEvent( { inputType, onInput } ) {\r\n\tconst callbacks = useContext( inputEventContext );\r\n\tconst onInputRef = useRef();\r\n\tonInputRef.current = onInput;\r\n\r\n\tuseEffect( () => {\r\n\t\tfunction callback( event ) {\r\n\t\t\tif ( event.inputType === inputType ) {\r\n\t\t\t\tonInputRef.current();\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tcallbacks.current.add( callback );\r\n\t\treturn () => {\r\n\t\t\tcallbacks.current.delete( callback );\r\n\t\t};\r\n\t}, [ inputType ] );\r\n\r\n\treturn null;\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\tDropdown,\r\n\tButton,\r\n\tMenuItemsChoice,\r\n\tSVG,\r\n\tPath,\r\n\tNavigableMenu,\r\n} from '@wordpress/components';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { useSelect, useDispatch } from '@wordpress/data';\r\nimport { forwardRef } from '@wordpress/element';\r\nimport { Icon, edit as editIcon } from '@wordpress/icons';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as blockEditorStore } from '../../store';\r\n\r\nconst selectIcon = (\r\n\t<SVG\r\n\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\twidth=\"24\"\r\n\t\theight=\"24\"\r\n\t\tviewBox=\"0 0 24 24\"\r\n\t>\r\n\t\t<Path d=\"M9.4 20.5L5.2 3.8l14.6 9-2 .3c-.2 0-.4.1-.7.1-.9.2-1.6.3-2.2.5-.8.3-1.4.5-1.8.8-.4.3-.8.8-1.3 1.5-.4.5-.8 1.2-1.2 2l-.3.6-.9 1.9zM7.6 7.1l2.4 9.3c.2-.4.5-.8.7-1.1.6-.8 1.1-1.4 1.6-1.8.5-.4 1.3-.8 2.2-1.1l1.2-.3-8.1-5z\" />\r\n\t</SVG>\r\n);\r\n\r\nfunction ToolSelector( props, ref ) {\r\n\tconst mode = useSelect(\r\n\t\t( select ) => select( blockEditorStore ).__unstableGetEditorMode(),\r\n\t\t[]\r\n\t);\r\n\tconst { __unstableSetEditorMode } = useDispatch( blockEditorStore );\r\n\r\n\treturn (\r\n\t\t<Dropdown\r\n\t\t\trenderToggle={ ( { isOpen, onToggle } ) => (\r\n\t\t\t\t<Button\r\n\t\t\t\t\t{ ...props }\r\n\t\t\t\t\tref={ ref }\r\n\t\t\t\t\ticon={ mode === 'navigation' ? selectIcon : editIcon }\r\n\t\t\t\t\taria-expanded={ isOpen }\r\n\t\t\t\t\taria-haspopup=\"true\"\r\n\t\t\t\t\tonClick={ onToggle }\r\n\t\t\t\t\t/* translators: button label text should, if possible, be under 16 characters. */\r\n\t\t\t\t\tlabel={ __( 'Tools' ) }\r\n\t\t\t\t/>\r\n\t\t\t) }\r\n\t\t\tpopoverProps={ { placement: 'bottom-start' } }\r\n\t\t\trenderContent={ () => (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<NavigableMenu role=\"menu\" aria-label={ __( 'Tools' ) }>\r\n\t\t\t\t\t\t<MenuItemsChoice\r\n\t\t\t\t\t\t\tvalue={\r\n\t\t\t\t\t\t\t\tmode === 'navigation' ? 'navigation' : 'edit'\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tonSelect={ __unstableSetEditorMode }\r\n\t\t\t\t\t\t\tchoices={ [\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvalue: 'edit',\r\n\t\t\t\t\t\t\t\t\tlabel: (\r\n\t\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t\t<Icon icon={ editIcon } />\r\n\t\t\t\t\t\t\t\t\t\t\t{ __( 'Edit' ) }\r\n\t\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvalue: 'navigation',\r\n\t\t\t\t\t\t\t\t\tlabel: (\r\n\t\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t\t{ selectIcon }\r\n\t\t\t\t\t\t\t\t\t\t\t{ __( 'Select' ) }\r\n\t\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t] }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</NavigableMenu>\r\n\t\t\t\t\t<div className=\"block-editor-tool-selector__help\">\r\n\t\t\t\t\t\t{ __(\r\n\t\t\t\t\t\t\t'Tools provide different interactions for selecting, navigating, and editing blocks. Toggle between select and edit by pressing Escape and Enter.'\r\n\t\t\t\t\t\t) }\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</>\r\n\t\t\t) }\r\n\t\t/>\r\n\t);\r\n}\r\n\r\nexport default forwardRef( ToolSelector );\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\t__experimentalUseCustomUnits as useCustomUnits,\r\n\t__experimentalUnitControl as BaseUnitControl,\r\n} from '@wordpress/components';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { useSettings } from '../use-settings';\r\n\r\nexport default function UnitControl( { units: unitsProp, ...props } ) {\r\n\tconst [ availableUnits ] = useSettings( 'spacing.units' );\r\n\tconst units = useCustomUnits( {\r\n\t\tavailableUnits: availableUnits || [ '%', 'px', 'em', 'rem', 'vw' ],\r\n\t\tunits: unitsProp,\r\n\t} );\r\n\r\n\treturn <BaseUnitControl units={ units } { ...props } />;\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst arrowLeft = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M20 11.2H6.8l3.7-3.7-1-1L3.9 12l5.6 5.5 1-1-3.7-3.7H20z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default arrowLeft;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { __ } from '@wordpress/i18n';\r\nimport { Component } from '@wordpress/element';\r\nimport { Button } from '@wordpress/components';\r\nimport { link, keyboardReturn, arrowLeft } from '@wordpress/icons';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport URLInput from './';\r\n\r\nclass URLInputButton extends Component {\r\n\tconstructor() {\r\n\t\tsuper( ...arguments );\r\n\t\tthis.toggle = this.toggle.bind( this );\r\n\t\tthis.submitLink = this.submitLink.bind( this );\r\n\t\tthis.state = {\r\n\t\t\texpanded: false,\r\n\t\t};\r\n\t}\r\n\r\n\ttoggle() {\r\n\t\tthis.setState( { expanded: ! this.state.expanded } );\r\n\t}\r\n\r\n\tsubmitLink( event ) {\r\n\t\tevent.preventDefault();\r\n\t\tthis.toggle();\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { url, onChange } = this.props;\r\n\t\tconst { expanded } = this.state;\r\n\t\tconst buttonLabel = url ? __( 'Edit link' ) : __( 'Insert link' );\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"block-editor-url-input__button\">\r\n\t\t\t\t<Button\r\n\t\t\t\t\ticon={ link }\r\n\t\t\t\t\tlabel={ buttonLabel }\r\n\t\t\t\t\tonClick={ this.toggle }\r\n\t\t\t\t\tclassName=\"components-toolbar__control\"\r\n\t\t\t\t\tisPressed={ !! url }\r\n\t\t\t\t/>\r\n\t\t\t\t{ expanded && (\r\n\t\t\t\t\t<form\r\n\t\t\t\t\t\tclassName=\"block-editor-url-input__button-modal\"\r\n\t\t\t\t\t\tonSubmit={ this.submitLink }\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<div className=\"block-editor-url-input__button-modal-line\">\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tclassName=\"block-editor-url-input__back\"\r\n\t\t\t\t\t\t\t\ticon={ arrowLeft }\r\n\t\t\t\t\t\t\t\tlabel={ __( 'Close' ) }\r\n\t\t\t\t\t\t\t\tonClick={ this.toggle }\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<URLInput\r\n\t\t\t\t\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t\t\t\t\t\tvalue={ url || '' }\r\n\t\t\t\t\t\t\t\tonChange={ onChange }\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\ticon={ keyboardReturn }\r\n\t\t\t\t\t\t\t\tlabel={ __( 'Submit' ) }\r\n\t\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t) }\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n/**\r\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/url-input/README.md\r\n */\r\nexport default URLInputButton;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { Path, SVG } from '@wordpress/primitives';\r\n\r\nconst image = (\r\n\t<SVG viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n\t\t<Path d=\"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM5 4.5h14c.3 0 .5.2.5.5v8.4l-3-2.9c-.3-.3-.8-.3-1 0L11.9 14 9 12c-.3-.2-.6-.2-.8 0l-3.6 2.6V5c-.1-.3.1-.5.4-.5zm14 15H5c-.3 0-.5-.2-.5-.5v-2.4l4.1-3 3 1.9c.3.2.7.2.9-.1L16 12l3.5 3.4V19c0 .3-.2.5-.5.5z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default image;\r\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { useRef, useEffect, useState } from '@wordpress/element';\nimport { focus } from '@wordpress/dom';\nimport {\n\tToolbarButton,\n\tNavigableMenu,\n\tButton,\n\tMenuItem,\n\tToggleControl,\n\tTextControl,\n\t__experimentalVStack as VStack,\n} from '@wordpress/components';\nimport {\n\tIcon,\n\tlink as linkIcon,\n\timage,\n\tpage,\n\tfullscreen,\n\tlinkOff,\n} from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport URLPopover from './index';\n\nconst LINK_DESTINATION_NONE = 'none';\nconst LINK_DESTINATION_CUSTOM = 'custom';\nconst LINK_DESTINATION_MEDIA = 'media';\nconst LINK_DESTINATION_ATTACHMENT = 'attachment';\nconst NEW_TAB_REL = [ 'noreferrer', 'noopener' ];\n\nconst ImageURLInputUI = ( {\n\tlinkDestination,\n\tonChangeUrl,\n\turl,\n\tmediaType = 'image',\n\tmediaUrl,\n\tmediaLink,\n\tlinkTarget,\n\tlinkClass,\n\trel,\n\tshowLightboxSetting,\n\tlightboxEnabled,\n\tonSetLightbox,\n\tresetLightbox,\n} ) => {\n\tconst [ isOpen, setIsOpen ] = useState( false );\n\t// Use internal state instead of a ref to make sure that the component\n\t// re-renders when the popover's anchor updates.\n\tconst [ popoverAnchor, setPopoverAnchor ] = useState( null );\n\tconst openLinkUI = () => {\n\t\tsetIsOpen( true );\n\t};\n\n\tconst [ isEditingLink, setIsEditingLink ] = useState( false );\n\tconst [ urlInput, setUrlInput ] = useState( null );\n\n\tconst autocompleteRef = useRef( null );\n\tconst wrapperRef = useRef();\n\n\tuseEffect( () => {\n\t\tif ( ! wrapperRef.current ) {\n\t\t\treturn;\n\t\t}\n\t\tconst nextFocusTarget =\n\t\t\tfocus.focusable.find( wrapperRef.current )[ 0 ] ||\n\t\t\twrapperRef.current;\n\t\tnextFocusTarget.focus();\n\t}, [ isEditingLink, url, lightboxEnabled ] );\n\n\tconst startEditLink = () => {\n\t\tif (\n\t\t\tlinkDestination === LINK_DESTINATION_MEDIA ||\n\t\t\tlinkDestination === LINK_DESTINATION_ATTACHMENT\n\t\t) {\n\t\t\tsetUrlInput( '' );\n\t\t}\n\t\tsetIsEditingLink( true );\n\t};\n\n\tconst stopEditLink = () => {\n\t\tsetIsEditingLink( false );\n\t};\n\n\tconst closeLinkUI = () => {\n\t\tsetUrlInput( null );\n\t\tstopEditLink();\n\t\tsetIsOpen( false );\n\t};\n\n\tconst getUpdatedLinkTargetSettings = ( value ) => {\n\t\tconst newLinkTarget = value ? '_blank' : undefined;\n\n\t\tlet updatedRel;\n\t\tif ( newLinkTarget ) {\n\t\t\tconst rels = ( rel ?? '' ).split( ' ' );\n\t\t\tNEW_TAB_REL.forEach( ( relVal ) => {\n\t\t\t\tif ( ! rels.includes( relVal ) ) {\n\t\t\t\t\trels.push( relVal );\n\t\t\t\t}\n\t\t\t} );\n\t\t\tupdatedRel = rels.join( ' ' );\n\t\t} else {\n\t\t\tconst rels = ( rel ?? '' )\n\t\t\t\t.split( ' ' )\n\t\t\t\t.filter(\n\t\t\t\t\t( relVal ) => NEW_TAB_REL.includes( relVal ) === false\n\t\t\t\t);\n\t\t\tupdatedRel = rels.length ? rels.join( ' ' ) : undefined;\n\t\t}\n\n\t\treturn {\n\t\t\tlinkTarget: newLinkTarget,\n\t\t\trel: updatedRel,\n\t\t};\n\t};\n\n\tconst onFocusOutside = () => {\n\t\treturn ( event ) => {\n\t\t\t// The autocomplete suggestions list renders in a separate popover (in a portal),\n\t\t\t// so onFocusOutside fails to detect that a click on a suggestion occurred in the\n\t\t\t// LinkContainer. Detect clicks on autocomplete suggestions using a ref here, and\n\t\t\t// return to avoid the popover being closed.\n\t\t\tconst autocompleteElement = autocompleteRef.current;\n\t\t\tif (\n\t\t\t\tautocompleteElement &&\n\t\t\t\tautocompleteElement.contains( event.target )\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tsetIsOpen( false );\n\t\t\tsetUrlInput( null );\n\t\t\tstopEditLink();\n\t\t};\n\t};\n\n\tconst onSubmitLinkChange = () => {\n\t\treturn ( event ) => {\n\t\t\tif ( urlInput ) {\n\t\t\t\t// It is possible the entered URL actually matches a named link destination.\n\t\t\t\t// This check will ensure our link destination is correct.\n\t\t\t\tconst selectedDestination =\n\t\t\t\t\tgetLinkDestinations().find(\n\t\t\t\t\t\t( destination ) => destination.url === urlInput\n\t\t\t\t\t)?.linkDestination || LINK_DESTINATION_CUSTOM;\n\n\t\t\t\tonChangeUrl( {\n\t\t\t\t\thref: urlInput,\n\t\t\t\t\tlinkDestination: selectedDestination,\n\t\t\t\t\tlightbox: { enabled: false },\n\t\t\t\t} );\n\t\t\t}\n\t\t\tstopEditLink();\n\t\t\tsetUrlInput( null );\n\t\t\tevent.preventDefault();\n\t\t};\n\t};\n\n\tconst onLinkRemove = () => {\n\t\tonChangeUrl( {\n\t\t\tlinkDestination: LINK_DESTINATION_NONE,\n\t\t\thref: '',\n\t\t} );\n\t};\n\n\tconst getLinkDestinations = () => {\n\t\tconst linkDestinations = [\n\t\t\t{\n\t\t\t\tlinkDestination: LINK_DESTINATION_MEDIA,\n\t\t\t\ttitle: __( 'Link to image file' ),\n\t\t\t\turl: mediaType === 'image' ? mediaUrl : undefined,\n\t\t\t\ticon: image,\n\t\t\t},\n\t\t];\n\t\tif ( mediaType === 'image' && mediaLink ) {\n\t\t\tlinkDestinations.push( {\n\t\t\t\tlinkDestination: LINK_DESTINATION_ATTACHMENT,\n\t\t\t\ttitle: __( 'Link to attachment page' ),\n\t\t\t\turl: mediaType === 'image' ? mediaLink : undefined,\n\t\t\t\ticon: page,\n\t\t\t} );\n\t\t}\n\t\treturn linkDestinations;\n\t};\n\n\tconst onSetHref = ( value ) => {\n\t\tconst linkDestinations = getLinkDestinations();\n\t\tlet linkDestinationInput;\n\t\tif ( ! value ) {\n\t\t\tlinkDestinationInput = LINK_DESTINATION_NONE;\n\t\t} else {\n\t\t\tlinkDestinationInput = (\n\t\t\t\tlinkDestinations.find( ( destination ) => {\n\t\t\t\t\treturn destination.url === value;\n\t\t\t\t} ) || { linkDestination: LINK_DESTINATION_CUSTOM }\n\t\t\t).linkDestination;\n\t\t}\n\t\tonChangeUrl( {\n\t\t\tlinkDestination: linkDestinationInput,\n\t\t\thref: value,\n\t\t} );\n\t};\n\n\tconst onSetNewTab = ( value ) => {\n\t\tconst updatedLinkTarget = getUpdatedLinkTargetSettings( value );\n\t\tonChangeUrl( updatedLinkTarget );\n\t};\n\n\tconst onSetLinkRel = ( value ) => {\n\t\tonChangeUrl( { rel: value } );\n\t};\n\n\tconst onSetLinkClass = ( value ) => {\n\t\tonChangeUrl( { linkClass: value } );\n\t};\n\n\tconst advancedOptions = (\n\t\t<VStack spacing=\"3\">\n\t\t\t<ToggleControl\n\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\tlabel={ __( 'Open in new tab' ) }\n\t\t\t\tonChange={ onSetNewTab }\n\t\t\t\tchecked={ linkTarget === '_blank' }\n\t\t\t/>\n\t\t\t<TextControl\n\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\tlabel={ __( 'Link rel' ) }\n\t\t\t\tvalue={ rel ?? '' }\n\t\t\t\tonChange={ onSetLinkRel }\n\t\t\t/>\n\t\t\t<TextControl\n\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\tlabel={ __( 'Link CSS class' ) }\n\t\t\t\tvalue={ linkClass || '' }\n\t\t\t\tonChange={ onSetLinkClass }\n\t\t\t/>\n\t\t</VStack>\n\t);\n\n\tconst linkEditorValue = urlInput !== null ? urlInput : url;\n\tconst hideLightboxPanel =\n\t\t! lightboxEnabled || ( lightboxEnabled && ! showLightboxSetting );\n\tconst showLinkEditor = ! linkEditorValue && hideLightboxPanel;\n\n\tconst urlLabel = (\n\t\tgetLinkDestinations().find(\n\t\t\t( destination ) => destination.linkDestination === linkDestination\n\t\t) || {}\n\t).title;\n\n\tconst PopoverChildren = () => {\n\t\tif (\n\t\t\tlightboxEnabled &&\n\t\t\tshowLightboxSetting &&\n\t\t\t! url &&\n\t\t\t! isEditingLink\n\t\t) {\n\t\t\treturn (\n\t\t\t\t<div className=\"block-editor-url-popover__expand-on-click\">\n\t\t\t\t\t<Icon icon={ fullscreen } />\n\t\t\t\t\t<div className=\"text\">\n\t\t\t\t\t\t<p>{ __( 'Expand on click' ) }</p>\n\t\t\t\t\t\t<p className=\"description\">\n\t\t\t\t\t\t\t{ __( 'Scales the image with a lightbox effect' ) }\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<Button\n\t\t\t\t\t\ticon={ linkOff }\n\t\t\t\t\t\tlabel={ __( 'Disable expand on click' ) }\n\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\tonSetLightbox( false );\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tsize=\"compact\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t);\n\t\t} else if ( ! url || isEditingLink ) {\n\t\t\treturn (\n\t\t\t\t<URLPopover.LinkEditor\n\t\t\t\t\tclassName=\"block-editor-format-toolbar__link-container-content\"\n\t\t\t\t\tvalue={ linkEditorValue }\n\t\t\t\t\tonChangeInputValue={ setUrlInput }\n\t\t\t\t\tonSubmit={ onSubmitLinkChange() }\n\t\t\t\t\tautocompleteRef={ autocompleteRef }\n\t\t\t\t/>\n\t\t\t);\n\t\t} else if ( url && ! isEditingLink ) {\n\t\t\treturn (\n\t\t\t\t<>\n\t\t\t\t\t<URLPopover.LinkViewer\n\t\t\t\t\t\tclassName=\"block-editor-format-toolbar__link-container-content\"\n\t\t\t\t\t\turl={ url }\n\t\t\t\t\t\tonEditLinkClick={ startEditLink }\n\t\t\t\t\t\turlLabel={ urlLabel }\n\t\t\t\t\t/>\n\t\t\t\t\t<Button\n\t\t\t\t\t\ticon={ linkOff }\n\t\t\t\t\t\tlabel={ __( 'Remove link' ) }\n\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\tonLinkRemove();\n\t\t\t\t\t\t\tresetLightbox();\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tsize=\"compact\"\n\t\t\t\t\t/>\n\t\t\t\t</>\n\t\t\t);\n\t\t}\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<ToolbarButton\n\t\t\t\ticon={ linkIcon }\n\t\t\t\tclassName=\"components-toolbar__control\"\n\t\t\t\tlabel={ __( 'Link' ) }\n\t\t\t\taria-expanded={ isOpen }\n\t\t\t\tonClick={ openLinkUI }\n\t\t\t\tref={ setPopoverAnchor }\n\t\t\t\tisActive={\n\t\t\t\t\t!! url || ( lightboxEnabled && showLightboxSetting )\n\t\t\t\t}\n\t\t\t/>\n\t\t\t{ isOpen && (\n\t\t\t\t<URLPopover\n\t\t\t\t\tref={ wrapperRef }\n\t\t\t\t\tanchor={ popoverAnchor }\n\t\t\t\t\tonFocusOutside={ onFocusOutside() }\n\t\t\t\t\tonClose={ closeLinkUI }\n\t\t\t\t\trenderSettings={\n\t\t\t\t\t\thideLightboxPanel ? () => advancedOptions : null\n\t\t\t\t\t}\n\t\t\t\t\tadditionalControls={\n\t\t\t\t\t\tshowLinkEditor && (\n\t\t\t\t\t\t\t<NavigableMenu>\n\t\t\t\t\t\t\t\t{ getLinkDestinations().map( ( link ) => (\n\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\tkey={ link.linkDestination }\n\t\t\t\t\t\t\t\t\t\ticon={ link.icon }\n\t\t\t\t\t\t\t\t\t\ticonPosition=\"left\"\n\t\t\t\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\t\t\t\tsetUrlInput( null );\n\t\t\t\t\t\t\t\t\t\t\tonSetHref( link.url );\n\t\t\t\t\t\t\t\t\t\t\tstopEditLink();\n\t\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{ link.title }\n\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t) ) }\n\t\t\t\t\t\t\t\t{ showLightboxSetting && (\n\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\tkey=\"expand-on-click\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"block-editor-url-popover__expand-on-click\"\n\t\t\t\t\t\t\t\t\t\ticon={ fullscreen }\n\t\t\t\t\t\t\t\t\t\tinfo={ __(\n\t\t\t\t\t\t\t\t\t\t\t'Scale the image with a lightbox effect.'\n\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\ticonPosition=\"left\"\n\t\t\t\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\t\t\t\tsetUrlInput( null );\n\t\t\t\t\t\t\t\t\t\t\tonChangeUrl( {\n\t\t\t\t\t\t\t\t\t\t\t\tlinkDestination:\n\t\t\t\t\t\t\t\t\t\t\t\t\tLINK_DESTINATION_NONE,\n\t\t\t\t\t\t\t\t\t\t\t\thref: '',\n\t\t\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t\t\t\tonSetLightbox( true );\n\t\t\t\t\t\t\t\t\t\t\tstopEditLink();\n\t\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{ __( 'Expand on click' ) }\n\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</NavigableMenu>\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t\toffset={ 13 }\n\t\t\t\t>\n\t\t\t\t\t{ PopoverChildren() }\n\t\t\t\t</URLPopover>\n\t\t\t) }\n\t\t</>\n\t);\n};\n\nexport { ImageURLInputUI as __experimentalImageURLInputUI };\n","/**\r\n * WordPress dependencies\r\n */\r\nimport deprecated from '@wordpress/deprecated';\r\n\r\nexport default function PreviewOptions() {\r\n\tdeprecated( 'wp.blockEditor.PreviewOptions', {\r\n\t\tversion: '6.5',\r\n\t} );\r\n\treturn null;\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useEffect, useState } from '@wordpress/element';\r\n\r\n/**\r\n * Function to resize the editor window.\r\n *\r\n * @param {string} deviceType Used for determining the size of the container (e.g. Desktop, Tablet, Mobile)\r\n *\r\n * @return {Object} Inline styles to be added to resizable container.\r\n */\r\nexport default function useResizeCanvas( deviceType ) {\r\n\tconst [ actualWidth, updateActualWidth ] = useState( window.innerWidth );\r\n\r\n\tuseEffect( () => {\r\n\t\tif ( deviceType === 'Desktop' ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst resizeListener = () => updateActualWidth( window.innerWidth );\r\n\t\twindow.addEventListener( 'resize', resizeListener );\r\n\r\n\t\treturn () => {\r\n\t\t\twindow.removeEventListener( 'resize', resizeListener );\r\n\t\t};\r\n\t}, [ deviceType ] );\r\n\r\n\tconst getCanvasWidth = ( device ) => {\r\n\t\tlet deviceWidth;\r\n\r\n\t\tswitch ( device ) {\r\n\t\t\tcase 'Tablet':\r\n\t\t\t\tdeviceWidth = 780;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'Mobile':\r\n\t\t\t\tdeviceWidth = 360;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn deviceWidth < actualWidth ? deviceWidth : actualWidth;\r\n\t};\r\n\r\n\tconst marginValue = () => ( window.innerHeight < 800 ? 36 : 72 );\r\n\r\n\tconst contentInlineStyles = ( device ) => {\r\n\t\tconst height = device === 'Mobile' ? '768px' : '1024px';\r\n\t\tconst marginVertical = marginValue() + 'px';\r\n\t\tconst marginHorizontal = 'auto';\r\n\r\n\t\tswitch ( device ) {\r\n\t\t\tcase 'Tablet':\r\n\t\t\tcase 'Mobile':\r\n\t\t\t\treturn {\r\n\t\t\t\t\twidth: getCanvasWidth( device ),\r\n\t\t\t\t\t// Keeping margin styles separate to avoid warnings\r\n\t\t\t\t\t// when those props get overridden in the iframe component\r\n\t\t\t\t\tmarginTop: marginVertical,\r\n\t\t\t\t\tmarginBottom: marginVertical,\r\n\t\t\t\t\tmarginLeft: marginHorizontal,\r\n\t\t\t\t\tmarginRight: marginHorizontal,\r\n\t\t\t\t\theight,\r\n\t\t\t\t\tborderRadius: '2px 2px 2px 2px',\r\n\t\t\t\t\tborder: '1px solid #ddd',\r\n\t\t\t\t\toverflowY: 'auto',\r\n\t\t\t\t};\r\n\t\t\tdefault:\r\n\t\t\t\treturn {\r\n\t\t\t\t\tmarginLeft: marginHorizontal,\r\n\t\t\t\t\tmarginRight: marginHorizontal,\r\n\t\t\t\t};\r\n\t\t}\r\n\t};\r\n\r\n\treturn contentInlineStyles( deviceType );\r\n}\r\n","/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport { __ } from '@wordpress/i18n';\nimport { Button } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport { __unstableUseBlockRef as useBlockRef } from '../block-list/use-block-props/use-block-refs';\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/skip-to-selected-block/README.md\n */\nexport default function SkipToSelectedBlock() {\n\tconst selectedBlockClientId = useSelect(\n\t\t( select ) => select( blockEditorStore ).getBlockSelectionStart(),\n\t\t[]\n\t);\n\tconst ref = useBlockRef( selectedBlockClientId );\n\tconst onClick = () => {\n\t\tref.current.focus();\n\t};\n\n\treturn selectedBlockClientId ? (\n\t\t<Button\n\t\t\tvariant=\"secondary\"\n\t\t\tclassName=\"block-editor-skip-to-selected-block\"\n\t\t\tonClick={ onClick }\n\t\t>\n\t\t\t{ __( 'Skip to the selected block' ) }\n\t\t</Button>\n\t) : null;\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"wordcount\"];","/**\r\n * WordPress dependencies\r\n */\r\nimport { sprintf, _n } from '@wordpress/i18n';\r\nimport { withSelect } from '@wordpress/data';\r\nimport { serialize } from '@wordpress/blocks';\r\nimport { count as wordCount } from '@wordpress/wordcount';\r\nimport { copy } from '@wordpress/icons';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport BlockIcon from '../block-icon';\r\nimport { store as blockEditorStore } from '../../store';\r\n\r\nfunction MultiSelectionInspector( { blocks } ) {\r\n\tconst words = wordCount( serialize( blocks ), 'words' );\r\n\r\n\treturn (\r\n\t\t<div className=\"block-editor-multi-selection-inspector__card\">\r\n\t\t\t<BlockIcon icon={ copy } showColors />\r\n\t\t\t<div className=\"block-editor-multi-selection-inspector__card-content\">\r\n\t\t\t\t<div className=\"block-editor-multi-selection-inspector__card-title\">\r\n\t\t\t\t\t{ sprintf(\r\n\t\t\t\t\t\t/* translators: %d: number of blocks */\r\n\t\t\t\t\t\t_n( '%d Block', '%d Blocks', blocks.length ),\r\n\t\t\t\t\t\tblocks.length\r\n\t\t\t\t\t) }\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"block-editor-multi-selection-inspector__card-description\">\r\n\t\t\t\t\t{ sprintf(\r\n\t\t\t\t\t\t/* translators: %d: number of words */\r\n\t\t\t\t\t\t_n( '%d word selected.', '%d words selected.', words ),\r\n\t\t\t\t\t\twords\r\n\t\t\t\t\t) }\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default withSelect( ( select ) => {\r\n\tconst { getMultiSelectedBlocks } = select( blockEditorStore );\r\n\treturn {\r\n\t\tblocks: getMultiSelectedBlocks(),\r\n\t};\r\n} )( MultiSelectionInspector );\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst cog = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path\r\n\t\t\tfillRule=\"evenodd\"\r\n\t\t\td=\"M10.289 4.836A1 1 0 0111.275 4h1.306a1 1 0 01.987.836l.244 1.466c.787.26 1.503.679 2.108 1.218l1.393-.522a1 1 0 011.216.437l.653 1.13a1 1 0 01-.23 1.273l-1.148.944a6.025 6.025 0 010 2.435l1.149.946a1 1 0 01.23 1.272l-.653 1.13a1 1 0 01-1.216.437l-1.394-.522c-.605.54-1.32.958-2.108 1.218l-.244 1.466a1 1 0 01-.987.836h-1.306a1 1 0 01-.986-.836l-.244-1.466a5.995 5.995 0 01-2.108-1.218l-1.394.522a1 1 0 01-1.217-.436l-.653-1.131a1 1 0 01.23-1.272l1.149-.946a6.026 6.026 0 010-2.435l-1.148-.944a1 1 0 01-.23-1.272l.653-1.131a1 1 0 011.217-.437l1.393.522a5.994 5.994 0 012.108-1.218l.244-1.466zM14.929 12a3 3 0 11-6 0 3 3 0 016 0z\"\r\n\t\t\tclipRule=\"evenodd\"\r\n\t\t/>\r\n\t</SVG>\r\n);\r\n\r\nexport default cog;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { Path, SVG } from '@wordpress/primitives';\r\n\r\nexport const styles = (\r\n\t<SVG viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n\t\t<Path d=\"M12 4c-4.4 0-8 3.6-8 8v.1c0 4.1 3.2 7.5 7.2 7.9h.8c4.4 0 8-3.6 8-8s-3.6-8-8-8zm0 15V5c3.9 0 7 3.1 7 7s-3.1 7-7 7z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default styles;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { cog, styles, listView } from '@wordpress/icons';\r\nimport { __ } from '@wordpress/i18n';\r\n\r\nexport const TAB_SETTINGS = {\r\n\tname: 'settings',\r\n\ttitle: __( 'Settings' ),\r\n\tvalue: 'settings',\r\n\ticon: cog,\r\n\tclassName: 'block-editor-block-inspector__tab-item',\r\n};\r\n\r\nexport const TAB_STYLES = {\r\n\tname: 'styles',\r\n\ttitle: __( 'Styles' ),\r\n\tvalue: 'styles',\r\n\ticon: styles,\r\n\tclassName: 'block-editor-block-inspector__tab-item',\r\n};\r\n\r\nexport const TAB_LIST_VIEW = {\r\n\tname: 'list',\r\n\ttitle: __( 'List View' ),\r\n\tvalue: 'list-view',\r\n\ticon: listView,\r\n\tclassName: 'block-editor-block-inspector__tab-item',\r\n};\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\tPanelBody,\r\n\t__experimentalUseSlotFills as useSlotFills,\r\n} from '@wordpress/components';\r\nimport { __ } from '@wordpress/i18n';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport {\r\n\tdefault as InspectorControls,\r\n\tInspectorAdvancedControls,\r\n} from '../inspector-controls';\r\n\r\nconst AdvancedControls = () => {\r\n\tconst fills = useSlotFills( InspectorAdvancedControls.slotName );\r\n\tconst hasFills = Boolean( fills && fills.length );\r\n\r\n\tif ( ! hasFills ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<PanelBody\r\n\t\t\tclassName=\"block-editor-block-inspector__advanced\"\r\n\t\t\ttitle={ __( 'Advanced' ) }\r\n\t\t\tinitialOpen={ false }\r\n\t\t>\r\n\t\t\t<InspectorControls.Slot group=\"advanced\" />\r\n\t\t</PanelBody>\r\n\t);\r\n};\r\n\r\nexport default AdvancedControls;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\tPanelBody,\r\n\t__experimentalUseSlotFills as useSlotFills,\r\n} from '@wordpress/components';\r\nimport { useSelect } from '@wordpress/data';\r\nimport { useLayoutEffect, useState } from '@wordpress/element';\r\nimport { __ } from '@wordpress/i18n';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport InspectorControlsGroups from '../inspector-controls/groups';\r\nimport { default as InspectorControls } from '../inspector-controls';\r\nimport { store as blockEditorStore } from '../../store';\r\n\r\nconst PositionControlsPanel = () => {\r\n\tconst [ initialOpen, setInitialOpen ] = useState();\r\n\r\n\t// Determine whether the panel should be expanded.\r\n\tconst { multiSelectedBlocks } = useSelect( ( select ) => {\r\n\t\tconst { getBlocksByClientId, getSelectedBlockClientIds } =\r\n\t\t\tselect( blockEditorStore );\r\n\t\tconst clientIds = getSelectedBlockClientIds();\r\n\t\treturn {\r\n\t\t\tmultiSelectedBlocks: getBlocksByClientId( clientIds ),\r\n\t\t};\r\n\t}, [] );\r\n\r\n\tuseLayoutEffect( () => {\r\n\t\t// If any selected block has a position set, open the panel by default.\r\n\t\t// The first block's value will still be used within the control though.\r\n\t\tif ( initialOpen === undefined ) {\r\n\t\t\tsetInitialOpen(\r\n\t\t\t\tmultiSelectedBlocks.some(\r\n\t\t\t\t\t( { attributes } ) => !! attributes?.style?.position?.type\r\n\t\t\t\t)\r\n\t\t\t);\r\n\t\t}\r\n\t}, [ initialOpen, multiSelectedBlocks, setInitialOpen ] );\r\n\r\n\treturn (\r\n\t\t<PanelBody\r\n\t\t\tclassName=\"block-editor-block-inspector__position\"\r\n\t\t\ttitle={ __( 'Position' ) }\r\n\t\t\tinitialOpen={ initialOpen ?? false }\r\n\t\t>\r\n\t\t\t<InspectorControls.Slot group=\"position\" />\r\n\t\t</PanelBody>\r\n\t);\r\n};\r\n\r\nconst PositionControls = () => {\r\n\tconst fills = useSlotFills(\r\n\t\tInspectorControlsGroups.position.Slot.__unstableName\r\n\t);\r\n\tconst hasFills = Boolean( fills && fills.length );\r\n\r\n\tif ( ! hasFills ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn <PositionControlsPanel />;\r\n};\r\n\r\nexport default PositionControls;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst close = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M13 11.8l6.1-6.3-1-1-6.1 6.2-6.1-6.2-1 1 6.1 6.3-6.5 6.7 1 1 6.5-6.6 6.5 6.6 1-1z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default close;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { Button } from '@wordpress/components';\r\nimport { useDispatch, useSelect } from '@wordpress/data';\r\nimport { focus } from '@wordpress/dom';\r\nimport { useRef } from '@wordpress/element';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { close } from '@wordpress/icons';\r\nimport { store as preferencesStore } from '@wordpress/preferences';\r\n\r\nconst PREFERENCE_NAME = 'isInspectorControlsTabsHintVisible';\r\n\r\nexport default function InspectorControlsTabsHint() {\r\n\tconst isInspectorControlsTabsHintVisible = useSelect(\r\n\t\t( select ) =>\r\n\t\t\tselect( preferencesStore ).get( 'core', PREFERENCE_NAME ) ?? true,\r\n\t\t[]\r\n\t);\r\n\r\n\tconst ref = useRef();\r\n\r\n\tconst { set: setPreference } = useDispatch( preferencesStore );\r\n\tif ( ! isInspectorControlsTabsHintVisible ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div ref={ ref } className=\"block-editor-inspector-controls-tabs__hint\">\r\n\t\t\t<div className=\"block-editor-inspector-controls-tabs__hint-content\">\r\n\t\t\t\t{ __(\r\n\t\t\t\t\t\"Looking for other block settings? They've moved to the styles tab.\"\r\n\t\t\t\t) }\r\n\t\t\t</div>\r\n\t\t\t<Button\r\n\t\t\t\tclassName=\"block-editor-inspector-controls-tabs__hint-dismiss\"\r\n\t\t\t\ticon={ close }\r\n\t\t\t\ticonSize=\"16\"\r\n\t\t\t\tlabel={ __( 'Dismiss hint' ) }\r\n\t\t\t\tonClick={ () => {\r\n\t\t\t\t\t// Retain focus when dismissing the element.\r\n\t\t\t\t\tconst previousElement = focus.tabbable.findPrevious(\r\n\t\t\t\t\t\tref.current\r\n\t\t\t\t\t);\r\n\t\t\t\t\tpreviousElement?.focus();\r\n\t\t\t\t\tsetPreference( 'core', PREFERENCE_NAME, false );\r\n\t\t\t\t} }\r\n\t\t\t\tshowTooltip={ false }\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n}\r\n","/**\r\n * Internal dependencies\r\n */\r\nimport AdvancedControls from './advanced-controls-panel';\r\nimport PositionControls from './position-controls-panel';\r\nimport { default as InspectorControls } from '../inspector-controls';\r\nimport SettingsTabHint from './settings-tab-hint';\r\n\r\nconst SettingsTab = ( { showAdvancedControls = false } ) => (\r\n\t<>\r\n\t\t<InspectorControls.Slot />\r\n\t\t<PositionControls />\r\n\t\t{ showAdvancedControls && (\r\n\t\t\t<div>\r\n\t\t\t\t<AdvancedControls />\r\n\t\t\t</div>\r\n\t\t) }\r\n\t\t<SettingsTabHint />\r\n\t</>\r\n);\r\n\r\nexport default SettingsTab;\r\n","/**\n * WordPress dependencies\n */\nimport { PanelBody } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport BlockStyles from '../block-styles';\nimport InspectorControls from '../inspector-controls';\nimport { useBorderPanelLabel } from '../../hooks/border';\n\nconst StylesTab = ( { blockName, clientId, hasBlockStyles } ) => {\n\tconst borderPanelLabel = useBorderPanelLabel( { blockName } );\n\n\treturn (\n\t\t<>\n\t\t\t{ hasBlockStyles && (\n\t\t\t\t<div>\n\t\t\t\t\t<PanelBody title={ __( 'Styles' ) }>\n\t\t\t\t\t\t<BlockStyles clientId={ clientId } />\n\t\t\t\t\t</PanelBody>\n\t\t\t\t</div>\n\t\t\t) }\n\t\t\t<InspectorControls.Slot\n\t\t\t\tgroup=\"color\"\n\t\t\t\tlabel={ __( 'Color' ) }\n\t\t\t\tclassName=\"color-block-support-panel__inner-wrapper\"\n\t\t\t/>\n\t\t\t<InspectorControls.Slot\n\t\t\t\tgroup=\"background\"\n\t\t\t\tlabel={ __( 'Background' ) }\n\t\t\t/>\n\t\t\t<InspectorControls.Slot group=\"filter\" />\n\t\t\t<InspectorControls.Slot\n\t\t\t\tgroup=\"typography\"\n\t\t\t\tlabel={ __( 'Typography' ) }\n\t\t\t/>\n\t\t\t<InspectorControls.Slot\n\t\t\t\tgroup=\"dimensions\"\n\t\t\t\tlabel={ __( 'Dimensions' ) }\n\t\t\t/>\n\t\t\t<InspectorControls.Slot group=\"border\" label={ borderPanelLabel } />\n\t\t\t<InspectorControls.Slot group=\"styles\" />\n\t\t</>\n\t);\n};\n\nexport default StylesTab;\n","// List view tab restricts the blocks that may render to it via the\r\n// allowlist below.\r\nconst allowlist = [ 'core/navigation' ];\r\n\r\nexport const useIsListViewTabDisabled = ( blockName ) => {\r\n\treturn ! allowlist.includes( blockName );\r\n};\r\n\r\nexport default useIsListViewTabDisabled;\r\n","/**\n * WordPress dependencies\n */\nimport {\n\tButton,\n\tprivateApis as componentsPrivateApis,\n} from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport { TAB_SETTINGS, TAB_STYLES, TAB_LIST_VIEW } from './utils';\nimport SettingsTab from './settings-tab';\nimport StylesTab from './styles-tab';\nimport InspectorControls from '../inspector-controls';\nimport useIsListViewTabDisabled from './use-is-list-view-tab-disabled';\nimport { unlock } from '../../lock-unlock';\n\nconst { Tabs } = unlock( componentsPrivateApis );\n\nexport default function InspectorControlsTabs( {\n\tblockName,\n\tclientId,\n\thasBlockStyles,\n\ttabs,\n} ) {\n\t// The tabs panel will mount before fills are rendered to the list view\n\t// slot. This means the list view tab isn't initially included in the\n\t// available tabs so the panel defaults selection to the settings tab\n\t// which at the time is the first tab. This check allows blocks known to\n\t// include the list view tab to set it as the tab selected by default.\n\tconst initialTabName = ! useIsListViewTabDisabled( blockName )\n\t\t? TAB_LIST_VIEW.name\n\t\t: undefined;\n\n\treturn (\n\t\t<div className=\"block-editor-block-inspector__tabs\">\n\t\t\t<Tabs defaultTabId={ initialTabName } key={ clientId }>\n\t\t\t\t<Tabs.TabList>\n\t\t\t\t\t{ tabs.map( ( tab ) => (\n\t\t\t\t\t\t<Tabs.Tab\n\t\t\t\t\t\t\tkey={ tab.name }\n\t\t\t\t\t\t\ttabId={ tab.name }\n\t\t\t\t\t\t\trender={\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\ticon={ tab.icon }\n\t\t\t\t\t\t\t\t\tlabel={ tab.title }\n\t\t\t\t\t\t\t\t\tclassName={ tab.className }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) ) }\n\t\t\t\t</Tabs.TabList>\n\t\t\t\t<Tabs.TabPanel tabId={ TAB_SETTINGS.name } focusable={ false }>\n\t\t\t\t\t<SettingsTab showAdvancedControls={ !! blockName } />\n\t\t\t\t</Tabs.TabPanel>\n\t\t\t\t<Tabs.TabPanel tabId={ TAB_STYLES.name } focusable={ false }>\n\t\t\t\t\t<StylesTab\n\t\t\t\t\t\tblockName={ blockName }\n\t\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\t\thasBlockStyles={ hasBlockStyles }\n\t\t\t\t\t/>\n\t\t\t\t</Tabs.TabPanel>\n\t\t\t\t<Tabs.TabPanel tabId={ TAB_LIST_VIEW.name } focusable={ false }>\n\t\t\t\t\t<InspectorControls.Slot group=\"list\" />\n\t\t\t\t</Tabs.TabPanel>\n\t\t\t</Tabs>\n\t\t</div>\n\t);\n}\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { __experimentalUseSlotFills as useSlotFills } from '@wordpress/components';\r\nimport { useSelect } from '@wordpress/data';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport InspectorControlsGroups from '../inspector-controls/groups';\r\nimport useIsListViewTabDisabled from './use-is-list-view-tab-disabled';\r\nimport { InspectorAdvancedControls } from '../inspector-controls';\r\nimport { TAB_LIST_VIEW, TAB_SETTINGS, TAB_STYLES } from './utils';\r\nimport { store as blockEditorStore } from '../../store';\r\n\r\nconst EMPTY_ARRAY = [];\r\n\r\nfunction getShowTabs( blockName, tabSettings = {} ) {\r\n\t// Block specific setting takes precedence over generic default.\r\n\tif ( tabSettings[ blockName ] !== undefined ) {\r\n\t\treturn tabSettings[ blockName ];\r\n\t}\r\n\r\n\t// Use generic default if set over the Gutenberg experiment option.\r\n\tif ( tabSettings.default !== undefined ) {\r\n\t\treturn tabSettings.default;\r\n\t}\r\n\r\n\treturn true;\r\n}\r\n\r\nexport default function useInspectorControlsTabs( blockName ) {\r\n\tconst tabs = [];\r\n\tconst {\r\n\t\tborder: borderGroup,\r\n\t\tcolor: colorGroup,\r\n\t\tdefault: defaultGroup,\r\n\t\tdimensions: dimensionsGroup,\r\n\t\tlist: listGroup,\r\n\t\tposition: positionGroup,\r\n\t\tstyles: stylesGroup,\r\n\t\ttypography: typographyGroup,\r\n\t\teffects: effectsGroup,\r\n\t} = InspectorControlsGroups;\r\n\r\n\t// List View Tab: If there are any fills for the list group add that tab.\r\n\tconst listViewDisabled = useIsListViewTabDisabled( blockName );\r\n\tconst listFills = useSlotFills( listGroup.Slot.__unstableName );\r\n\tconst hasListFills = ! listViewDisabled && !! listFills && listFills.length;\r\n\r\n\t// Styles Tab: Add this tab if there are any fills for block supports\r\n\t// e.g. border, color, spacing, typography, etc.\r\n\tconst styleFills = [\r\n\t\t...( useSlotFills( borderGroup.Slot.__unstableName ) || [] ),\r\n\t\t...( useSlotFills( colorGroup.Slot.__unstableName ) || [] ),\r\n\t\t...( useSlotFills( dimensionsGroup.Slot.__unstableName ) || [] ),\r\n\t\t...( useSlotFills( stylesGroup.Slot.__unstableName ) || [] ),\r\n\t\t...( useSlotFills( typographyGroup.Slot.__unstableName ) || [] ),\r\n\t\t...( useSlotFills( effectsGroup.Slot.__unstableName ) || [] ),\r\n\t];\r\n\tconst hasStyleFills = styleFills.length;\r\n\r\n\t// Settings Tab: If we don't have multiple tabs to display\r\n\t// (i.e. both list view and styles), check only the default and position\r\n\t// InspectorControls slots. If we have multiple tabs, we'll need to check\r\n\t// the advanced controls slot as well to ensure they are rendered.\r\n\tconst advancedFills =\r\n\t\tuseSlotFills( InspectorAdvancedControls.slotName ) || [];\r\n\r\n\tconst settingsFills = [\r\n\t\t...( useSlotFills( defaultGroup.Slot.__unstableName ) || [] ),\r\n\t\t...( useSlotFills( positionGroup.Slot.__unstableName ) || [] ),\r\n\t\t...( hasListFills && hasStyleFills > 1 ? advancedFills : [] ),\r\n\t];\r\n\r\n\t// Add the tabs in the order that they will default to if available.\r\n\t// List View > Settings > Styles.\r\n\tif ( hasListFills ) {\r\n\t\ttabs.push( TAB_LIST_VIEW );\r\n\t}\r\n\r\n\tif ( settingsFills.length ) {\r\n\t\ttabs.push( TAB_SETTINGS );\r\n\t}\r\n\r\n\tif ( hasStyleFills ) {\r\n\t\ttabs.push( TAB_STYLES );\r\n\t}\r\n\r\n\tconst tabSettings = useSelect( ( select ) => {\r\n\t\treturn select( blockEditorStore ).getSettings().blockInspectorTabs;\r\n\t}, [] );\r\n\r\n\tconst showTabs = getShowTabs( blockName, tabSettings );\r\n\treturn showTabs ? tabs : EMPTY_ARRAY;\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { privateApis as componentsPrivateApis } from '@wordpress/components';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { unlock } from '../../lock-unlock';\r\nimport {\r\n\tuseBlockEditContext,\r\n\tmayDisplayControlsKey,\r\n} from '../block-edit/context';\r\n\r\nconst { createPrivateSlotFill } = unlock( componentsPrivateApis );\r\nconst { Fill, Slot } = createPrivateSlotFill( 'BlockInformation' );\r\n\r\nconst BlockInfo = ( props ) => {\r\n\tconst context = useBlockEditContext();\r\n\tif ( ! context[ mayDisplayControlsKey ] ) {\r\n\t\treturn null;\r\n\t}\r\n\treturn <Fill { ...props } />;\r\n};\r\nBlockInfo.Slot = ( props ) => <Slot { ...props } />;\r\n\r\nexport default BlockInfo;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useSelect, useDispatch } from '@wordpress/data';\r\nimport {\r\n\tButton,\r\n\t__experimentalVStack as VStack,\r\n\t__experimentalTruncate as Truncate,\r\n\tFlex,\r\n\tFlexBlock,\r\n\tFlexItem,\r\n} from '@wordpress/components';\r\nimport {\r\n\t__experimentalGetBlockLabel,\r\n\tstore as blocksStore,\r\n} from '@wordpress/blocks';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as blockEditorStore } from '../../store';\r\nimport BlockIcon from '../block-icon';\r\n\r\nexport default function BlockQuickNavigation( { clientIds } ) {\r\n\tif ( ! clientIds.length ) {\r\n\t\treturn null;\r\n\t}\r\n\treturn (\r\n\t\t<VStack spacing={ 1 }>\r\n\t\t\t{ clientIds.map( ( clientId ) => (\r\n\t\t\t\t<BlockQuickNavigationItem\r\n\t\t\t\t\tkey={ clientId }\r\n\t\t\t\t\tclientId={ clientId }\r\n\t\t\t\t/>\r\n\t\t\t) ) }\r\n\t\t</VStack>\r\n\t);\r\n}\r\n\r\nfunction BlockQuickNavigationItem( { clientId } ) {\r\n\tconst { name, icon, isSelected } = useSelect(\r\n\t\t( select ) => {\r\n\t\t\tconst {\r\n\t\t\t\tgetBlockName,\r\n\t\t\t\tgetBlockAttributes,\r\n\t\t\t\tisBlockSelected,\r\n\t\t\t\thasSelectedInnerBlock,\r\n\t\t\t} = select( blockEditorStore );\r\n\t\t\tconst { getBlockType } = select( blocksStore );\r\n\r\n\t\t\tconst blockType = getBlockType( getBlockName( clientId ) );\r\n\t\t\tconst attributes = getBlockAttributes( clientId );\r\n\r\n\t\t\treturn {\r\n\t\t\t\tname:\r\n\t\t\t\t\tblockType &&\r\n\t\t\t\t\t__experimentalGetBlockLabel(\r\n\t\t\t\t\t\tblockType,\r\n\t\t\t\t\t\tattributes,\r\n\t\t\t\t\t\t'list-view'\r\n\t\t\t\t\t),\r\n\t\t\t\ticon: blockType?.icon,\r\n\t\t\t\tisSelected:\r\n\t\t\t\t\tisBlockSelected( clientId ) ||\r\n\t\t\t\t\thasSelectedInnerBlock( clientId, /* deep: */ true ),\r\n\t\t\t};\r\n\t\t},\r\n\t\t[ clientId ]\r\n\t);\r\n\tconst { selectBlock } = useDispatch( blockEditorStore );\r\n\r\n\treturn (\r\n\t\t<Button\r\n\t\t\tisPressed={ isSelected }\r\n\t\t\tonClick={ () => selectBlock( clientId ) }\r\n\t\t>\r\n\t\t\t<Flex>\r\n\t\t\t\t<FlexItem>\r\n\t\t\t\t\t<BlockIcon icon={ icon } />\r\n\t\t\t\t</FlexItem>\r\n\t\t\t\t<FlexBlock style={ { textAlign: 'left' } }>\r\n\t\t\t\t\t<Truncate>{ name }</Truncate>\r\n\t\t\t\t</FlexBlock>\r\n\t\t\t</Flex>\r\n\t\t</Button>\r\n\t);\r\n}\r\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport {\n\tgetBlockType,\n\tgetUnregisteredTypeHandlerName,\n\tstore as blocksStore,\n} from '@wordpress/blocks';\nimport { PanelBody, __unstableMotion as motion } from '@wordpress/components';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport SkipToSelectedBlock from '../skip-to-selected-block';\nimport BlockCard from '../block-card';\nimport MultiSelectionInspector from '../multi-selection-inspector';\nimport BlockVariationTransforms from '../block-variation-transforms';\nimport useBlockDisplayInformation from '../use-block-display-information';\nimport { store as blockEditorStore } from '../../store';\nimport BlockStyles from '../block-styles';\nimport { default as InspectorControls } from '../inspector-controls';\nimport { default as InspectorControlsTabs } from '../inspector-controls-tabs';\nimport useInspectorControlsTabs from '../inspector-controls-tabs/use-inspector-controls-tabs';\nimport AdvancedControls from '../inspector-controls-tabs/advanced-controls-panel';\nimport PositionControls from '../inspector-controls-tabs/position-controls-panel';\nimport useBlockInspectorAnimationSettings from './useBlockInspectorAnimationSettings';\nimport BlockInfo from '../block-info-slot-fill';\nimport BlockQuickNavigation from '../block-quick-navigation';\nimport { useBorderPanelLabel } from '../../hooks/border';\n\nfunction BlockInspectorLockedBlocks( { topLevelLockedBlock } ) {\n\tconst contentClientIds = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tgetClientIdsOfDescendants,\n\t\t\t\tgetBlockName,\n\t\t\t\tgetBlockEditingMode,\n\t\t\t} = select( blockEditorStore );\n\t\t\treturn getClientIdsOfDescendants( topLevelLockedBlock ).filter(\n\t\t\t\t( clientId ) =>\n\t\t\t\t\tgetBlockName( clientId ) !== 'core/list-item' &&\n\t\t\t\t\tgetBlockEditingMode( clientId ) === 'contentOnly'\n\t\t\t);\n\t\t},\n\t\t[ topLevelLockedBlock ]\n\t);\n\tconst blockInformation = useBlockDisplayInformation( topLevelLockedBlock );\n\treturn (\n\t\t<div className=\"block-editor-block-inspector\">\n\t\t\t<BlockCard\n\t\t\t\t{ ...blockInformation }\n\t\t\t\tclassName={ blockInformation.isSynced && 'is-synced' }\n\t\t\t/>\n\t\t\t<BlockVariationTransforms blockClientId={ topLevelLockedBlock } />\n\t\t\t<BlockInfo.Slot />\n\t\t\t{ contentClientIds.length > 0 && (\n\t\t\t\t<PanelBody title={ __( 'Content' ) }>\n\t\t\t\t\t<BlockQuickNavigation clientIds={ contentClientIds } />\n\t\t\t\t</PanelBody>\n\t\t\t) }\n\t\t</div>\n\t);\n}\n\nconst BlockInspector = ( { showNoBlockSelectedMessage = true } ) => {\n\tconst {\n\t\tcount,\n\t\tselectedBlockName,\n\t\tselectedBlockClientId,\n\t\tblockType,\n\t\ttopLevelLockedBlock,\n\t} = useSelect( ( select ) => {\n\t\tconst {\n\t\t\tgetSelectedBlockClientId,\n\t\t\tgetSelectedBlockCount,\n\t\t\tgetBlockName,\n\t\t\t__unstableGetContentLockingParent,\n\t\t\tgetTemplateLock,\n\t\t} = select( blockEditorStore );\n\n\t\tconst _selectedBlockClientId = getSelectedBlockClientId();\n\t\tconst _selectedBlockName =\n\t\t\t_selectedBlockClientId && getBlockName( _selectedBlockClientId );\n\t\tconst _blockType =\n\t\t\t_selectedBlockName && getBlockType( _selectedBlockName );\n\n\t\treturn {\n\t\t\tcount: getSelectedBlockCount(),\n\t\t\tselectedBlockClientId: _selectedBlockClientId,\n\t\t\tselectedBlockName: _selectedBlockName,\n\t\t\tblockType: _blockType,\n\t\t\ttopLevelLockedBlock:\n\t\t\t\t__unstableGetContentLockingParent( _selectedBlockClientId ) ||\n\t\t\t\t( getTemplateLock( _selectedBlockClientId ) === 'contentOnly' ||\n\t\t\t\t_selectedBlockName === 'core/block'\n\t\t\t\t\t? _selectedBlockClientId\n\t\t\t\t\t: undefined ),\n\t\t};\n\t}, [] );\n\n\tconst availableTabs = useInspectorControlsTabs( blockType?.name );\n\tconst showTabs = availableTabs?.length > 1;\n\n\t// The block inspector animation settings will be completely\n\t// removed in the future to create an API which allows the block\n\t// inspector to transition between what it\n\t// displays based on the relationship between the selected block\n\t// and its parent, and only enable it if the parent is controlling\n\t// its children blocks.\n\tconst blockInspectorAnimationSettings = useBlockInspectorAnimationSettings(\n\t\tblockType,\n\t\tselectedBlockClientId\n\t);\n\n\tconst borderPanelLabel = useBorderPanelLabel( {\n\t\tblockName: selectedBlockName,\n\t} );\n\n\tif ( count > 1 ) {\n\t\treturn (\n\t\t\t<div className=\"block-editor-block-inspector\">\n\t\t\t\t<MultiSelectionInspector />\n\t\t\t\t{ showTabs ? (\n\t\t\t\t\t<InspectorControlsTabs tabs={ availableTabs } />\n\t\t\t\t) : (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<InspectorControls.Slot />\n\t\t\t\t\t\t<InspectorControls.Slot\n\t\t\t\t\t\t\tgroup=\"color\"\n\t\t\t\t\t\t\tlabel={ __( 'Color' ) }\n\t\t\t\t\t\t\tclassName=\"color-block-support-panel__inner-wrapper\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<InspectorControls.Slot\n\t\t\t\t\t\t\tgroup=\"typography\"\n\t\t\t\t\t\t\tlabel={ __( 'Typography' ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<InspectorControls.Slot\n\t\t\t\t\t\t\tgroup=\"dimensions\"\n\t\t\t\t\t\t\tlabel={ __( 'Dimensions' ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<InspectorControls.Slot\n\t\t\t\t\t\t\tgroup=\"border\"\n\t\t\t\t\t\t\tlabel={ borderPanelLabel }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<InspectorControls.Slot group=\"styles\" />\n\t\t\t\t\t</>\n\t\t\t\t) }\n\t\t\t</div>\n\t\t);\n\t}\n\n\tconst isSelectedBlockUnregistered =\n\t\tselectedBlockName === getUnregisteredTypeHandlerName();\n\n\t/*\n\t * If the selected block is of an unregistered type, avoid showing it as an actual selection\n\t * because we want the user to focus on the unregistered block warning, not block settings.\n\t */\n\tif (\n\t\t! blockType ||\n\t\t! selectedBlockClientId ||\n\t\tisSelectedBlockUnregistered\n\t) {\n\t\tif ( showNoBlockSelectedMessage ) {\n\t\t\treturn (\n\t\t\t\t<span className=\"block-editor-block-inspector__no-blocks\">\n\t\t\t\t\t{ __( 'No block selected.' ) }\n\t\t\t\t</span>\n\t\t\t);\n\t\t}\n\t\treturn null;\n\t}\n\tif ( topLevelLockedBlock ) {\n\t\treturn (\n\t\t\t<BlockInspectorLockedBlocks\n\t\t\t\ttopLevelLockedBlock={ topLevelLockedBlock }\n\t\t\t/>\n\t\t);\n\t}\n\n\treturn (\n\t\t<BlockInspectorSingleBlockWrapper\n\t\t\tanimate={ blockInspectorAnimationSettings }\n\t\t\twrapper={ ( children ) => (\n\t\t\t\t<AnimatedContainer\n\t\t\t\t\tblockInspectorAnimationSettings={\n\t\t\t\t\t\tblockInspectorAnimationSettings\n\t\t\t\t\t}\n\t\t\t\t\tselectedBlockClientId={ selectedBlockClientId }\n\t\t\t\t>\n\t\t\t\t\t{ children }\n\t\t\t\t</AnimatedContainer>\n\t\t\t) }\n\t\t>\n\t\t\t<BlockInspectorSingleBlock\n\t\t\t\tclientId={ selectedBlockClientId }\n\t\t\t\tblockName={ blockType.name }\n\t\t\t/>\n\t\t</BlockInspectorSingleBlockWrapper>\n\t);\n};\n\nconst BlockInspectorSingleBlockWrapper = ( { animate, wrapper, children } ) => {\n\treturn animate ? wrapper( children ) : children;\n};\n\nconst AnimatedContainer = ( {\n\tblockInspectorAnimationSettings,\n\tselectedBlockClientId,\n\tchildren,\n} ) => {\n\tconst animationOrigin =\n\t\tblockInspectorAnimationSettings &&\n\t\tblockInspectorAnimationSettings.enterDirection === 'leftToRight'\n\t\t\t? -50\n\t\t\t: 50;\n\n\treturn (\n\t\t<motion.div\n\t\t\tanimate={ {\n\t\t\t\tx: 0,\n\t\t\t\topacity: 1,\n\t\t\t\ttransition: {\n\t\t\t\t\tease: 'easeInOut',\n\t\t\t\t\tduration: 0.14,\n\t\t\t\t},\n\t\t\t} }\n\t\t\tinitial={ {\n\t\t\t\tx: animationOrigin,\n\t\t\t\topacity: 0,\n\t\t\t} }\n\t\t\tkey={ selectedBlockClientId }\n\t\t>\n\t\t\t{ children }\n\t\t</motion.div>\n\t);\n};\n\nconst BlockInspectorSingleBlock = ( { clientId, blockName } ) => {\n\tconst availableTabs = useInspectorControlsTabs( blockName );\n\t//const showTabs = availableTabs?.length > 1;\n\t// DOUBLEEDESIGN CUSTOM: Do not use tabs\n\tconst showTabs = false;\n\n\tconst hasBlockStyles = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getBlockStyles } = select( blocksStore );\n\t\t\tconst blockStyles = getBlockStyles( blockName );\n\t\t\treturn blockStyles && blockStyles.length > 0;\n\t\t},\n\t\t[ blockName ]\n\t);\n\tconst blockInformation = useBlockDisplayInformation( clientId );\n\tconst borderPanelLabel = useBorderPanelLabel( { blockName } );\n\n\treturn (\n\t\t<div className=\"block-editor-block-inspector\">\n\t\t\t<BlockCard\n\t\t\t\t{ ...blockInformation }\n\t\t\t\tclassName={ blockInformation.isSynced && 'is-synced' }\n\t\t\t/>\n\t\t\t<BlockVariationTransforms blockClientId={ clientId } />\n\t\t\t<BlockInfo.Slot />\n\t\t\t{ showTabs && (\n\t\t\t\t<InspectorControlsTabs\n\t\t\t\t\thasBlockStyles={ hasBlockStyles }\n\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\tblockName={ blockName }\n\t\t\t\t\ttabs={ availableTabs }\n\t\t\t\t/>\n\t\t\t) }\n\t\t\t{ ! showTabs && (\n\t\t\t\t<>\n\t\t\t\t\t{ hasBlockStyles && (\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<PanelBody title={ __( 'Styles' ) }>\n\t\t\t\t\t\t\t\t<BlockStyles clientId={ clientId } />\n\t\t\t\t\t\t\t</PanelBody>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) }\n\t\t\t\t\t{ /** DOUBLEEDESIGN CUSTOM: Reorder sections so color is directly under styles*/ }\n\t\t\t\t\t<InspectorControls.Slot\n\t\t\t\t\t\tgroup=\"color\"\n\t\t\t\t\t\tlabel={ __( 'Color' ) }\n\t\t\t\t\t\tclassName=\"color-block-support-panel__inner-wrapper\"\n\t\t\t\t\t/>\n\t\t\t\t\t<InspectorControls.Slot />\n\t\t\t\t\t<InspectorControls.Slot group=\"list\" />\n\t\t\t\t\t<InspectorControls.Slot\n\t\t\t\t\t\tgroup=\"typography\"\n\t\t\t\t\t\tlabel={ __( 'Typography' ) }\n\t\t\t\t\t/>\n\t\t\t\t\t<InspectorControls.Slot\n\t\t\t\t\t\tgroup=\"dimensions\"\n\t\t\t\t\t\tlabel={ __( 'Dimensions' ) }\n\t\t\t\t\t/>\n\t\t\t\t\t<InspectorControls.Slot\n\t\t\t\t\t\tgroup=\"border\"\n\t\t\t\t\t\tlabel={ borderPanelLabel }\n\t\t\t\t\t/>\n\t\t\t\t\t<InspectorControls.Slot group=\"styles\" />\n\t\t\t\t\t<InspectorControls.Slot\n\t\t\t\t\t\tgroup=\"background\"\n\t\t\t\t\t\tlabel={ __( 'Background' ) }\n\t\t\t\t\t/>\n\t\t\t\t\t<PositionControls />\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<AdvancedControls />\n\t\t\t\t\t</div>\n\t\t\t\t</>\n\t\t\t) }\n\t\t\t<SkipToSelectedBlock key=\"back\" />\n\t\t</div>\n\t);\n};\n\n/**\n * @see https://github.com/WordPress/gutenberg/blob/HEAD/packages/block-editor/src/components/block-inspector/README.md\n */\nexport default BlockInspector;\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useSelect } from '@wordpress/data';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as blockEditorStore } from '../../store';\r\n\r\nexport default function useBlockInspectorAnimationSettings(\r\n\tblockType,\r\n\tselectedBlockClientId\r\n) {\r\n\treturn useSelect(\r\n\t\t( select ) => {\r\n\t\t\tif ( blockType ) {\r\n\t\t\t\tconst globalBlockInspectorAnimationSettings =\r\n\t\t\t\t\tselect( blockEditorStore ).getSettings()\r\n\t\t\t\t\t\t.blockInspectorAnimation;\r\n\r\n\t\t\t\t// Get the name of the block that will allow it's children to be animated.\r\n\t\t\t\tconst animationParent =\r\n\t\t\t\t\tglobalBlockInspectorAnimationSettings?.animationParent;\r\n\r\n\t\t\t\t// Determine whether the animationParent block is a parent of the selected block.\r\n\t\t\t\tconst { getSelectedBlockClientId, getBlockParentsByBlockName } =\r\n\t\t\t\t\tselect( blockEditorStore );\r\n\t\t\t\tconst _selectedBlockClientId = getSelectedBlockClientId();\r\n\t\t\t\tconst animationParentBlockClientId = getBlockParentsByBlockName(\r\n\t\t\t\t\t_selectedBlockClientId,\r\n\t\t\t\t\tanimationParent,\r\n\t\t\t\t\ttrue\r\n\t\t\t\t)[ 0 ];\r\n\r\n\t\t\t\t// If the selected block is not a child of the animationParent block,\r\n\t\t\t\t// and not an animationParent block itself, don't animate.\r\n\t\t\t\tif (\r\n\t\t\t\t\t! animationParentBlockClientId &&\r\n\t\t\t\t\tblockType.name !== animationParent\r\n\t\t\t\t) {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn globalBlockInspectorAnimationSettings?.[\r\n\t\t\t\t\tblockType.name\r\n\t\t\t\t];\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t},\r\n\t\t[ selectedBlockClientId, blockType ]\r\n\t);\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport deprecated from '@wordpress/deprecated';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport useClipboardHandler from '../writing-flow/use-clipboard-handler';\r\n\r\n/**\r\n * @deprecated\r\n */\r\nexport const __unstableUseClipboardHandler = () => {\r\n\tdeprecated( '__unstableUseClipboardHandler', {\r\n\t\talternative: 'BlockCanvas or WritingFlow',\r\n\t\tsince: '6.4',\r\n\t\tversion: '6.7',\r\n\t} );\r\n\treturn useClipboardHandler();\r\n};\r\n\r\n/**\r\n * @deprecated\r\n * @param {Object} props\r\n */\r\nexport default function CopyHandler( props ) {\r\n\tdeprecated( 'CopyHandler', {\r\n\t\talternative: 'BlockCanvas or WritingFlow',\r\n\t\tsince: '6.4',\r\n\t\tversion: '6.7',\r\n\t} );\r\n\treturn <div { ...props } ref={ useClipboardHandler() } />;\r\n}\r\n","/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport { forwardRef } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport InserterMenu from './menu';\nimport { store as blockEditorStore } from '../../store';\n\nconst noop = () => {};\n\nfunction InserterLibrary(\n\t{\n\t\trootClientId,\n\t\tclientId,\n\t\tisAppender,\n\t\tshowInserterHelpPanel,\n\t\tshowMostUsedBlocks = false,\n\t\t__experimentalInsertionIndex,\n\t\t__experimentalFilterValue,\n\t\t__experimentalOnPatternCategorySelection,\n\t\tonSelect = noop,\n\t\tshouldFocusBlock = false,\n\t},\n\tref\n) {\n\tconst { destinationRootClientId } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getBlockRootClientId } = select( blockEditorStore );\n\t\t\tconst _rootClientId =\n\t\t\t\trootClientId || getBlockRootClientId( clientId ) || undefined;\n\t\t\treturn {\n\t\t\t\tdestinationRootClientId: _rootClientId,\n\t\t\t};\n\t\t},\n\t\t[ clientId, rootClientId ]\n\t);\n\n\treturn (\n\t\t<InserterMenu\n\t\t\tonSelect={ onSelect }\n\t\t\trootClientId={ destinationRootClientId }\n\t\t\tclientId={ clientId }\n\t\t\tisAppender={ isAppender }\n\t\t\tshowInserterHelpPanel={ showInserterHelpPanel }\n\t\t\tshowMostUsedBlocks={ showMostUsedBlocks }\n\t\t\t__experimentalInsertionIndex={ __experimentalInsertionIndex }\n\t\t\t__experimentalFilterValue={ __experimentalFilterValue }\n\t\t\t__experimentalOnPatternCategorySelection={\n\t\t\t\t__experimentalOnPatternCategorySelection\n\t\t\t}\n\t\t\tshouldFocusBlock={ shouldFocusBlock }\n\t\t\tref={ ref }\n\t\t/>\n\t);\n}\n\nexport default forwardRef( InserterLibrary );\n","/**\r\n * WordPress dependencies\r\n */\r\nimport deprecated from '@wordpress/deprecated';\r\n\r\n/**\r\n * Scrolls the multi block selection end into view if not in view already. This\r\n * is important to do after selection by keyboard.\r\n *\r\n * @deprecated\r\n */\r\nexport function MultiSelectScrollIntoView() {\r\n\tdeprecated( 'wp.blockEditor.MultiSelectScrollIntoView', {\r\n\t\thint: 'This behaviour is now built-in.',\r\n\t\tsince: '5.8',\r\n\t} );\r\n\treturn null;\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useRefEffect } from '@wordpress/compose';\r\nimport { computeCaretRect, getScrollContainer } from '@wordpress/dom';\r\nimport { useSelect } from '@wordpress/data';\r\nimport { UP, DOWN, LEFT, RIGHT } from '@wordpress/keycodes';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { store as blockEditorStore } from '../../store';\r\n\r\nconst isIE = window.navigator.userAgent.indexOf( 'Trident' ) !== -1;\r\nconst arrowKeyCodes = new Set( [ UP, DOWN, LEFT, RIGHT ] );\r\nconst initialTriggerPercentage = 0.75;\r\n\r\nexport function useTypewriter() {\r\n\tconst hasSelectedBlock = useSelect(\r\n\t\t( select ) => select( blockEditorStore ).hasSelectedBlock(),\r\n\t\t[]\r\n\t);\r\n\r\n\treturn useRefEffect(\r\n\t\t( node ) => {\r\n\t\t\tif ( ! hasSelectedBlock ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst { ownerDocument } = node;\r\n\t\t\tconst { defaultView } = ownerDocument;\r\n\r\n\t\t\tlet scrollResizeRafId;\r\n\t\t\tlet onKeyDownRafId;\r\n\r\n\t\t\tlet caretRect;\r\n\r\n\t\t\tfunction onScrollResize() {\r\n\t\t\t\tif ( scrollResizeRafId ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tscrollResizeRafId = defaultView.requestAnimationFrame( () => {\r\n\t\t\t\t\tcomputeCaretRectangle();\r\n\t\t\t\t\tscrollResizeRafId = null;\r\n\t\t\t\t} );\r\n\t\t\t}\r\n\r\n\t\t\tfunction onKeyDown( event ) {\r\n\t\t\t\t// Ensure the any remaining request is cancelled.\r\n\t\t\t\tif ( onKeyDownRafId ) {\r\n\t\t\t\t\tdefaultView.cancelAnimationFrame( onKeyDownRafId );\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Use an animation frame for a smooth result.\r\n\t\t\t\tonKeyDownRafId = defaultView.requestAnimationFrame( () => {\r\n\t\t\t\t\tmaintainCaretPosition( event );\r\n\t\t\t\t\tonKeyDownRafId = null;\r\n\t\t\t\t} );\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Maintains the scroll position after a selection change caused by a\r\n\t\t\t * keyboard event.\r\n\t\t\t *\r\n\t\t\t * @param {KeyboardEvent} event Keyboard event.\r\n\t\t\t */\r\n\t\t\tfunction maintainCaretPosition( { keyCode } ) {\r\n\t\t\t\tif ( ! isSelectionEligibleForScroll() ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst currentCaretRect = computeCaretRect( defaultView );\r\n\r\n\t\t\t\tif ( ! currentCaretRect ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// If for some reason there is no position set to be scrolled to, let\r\n\t\t\t\t// this be the position to be scrolled to in the future.\r\n\t\t\t\tif ( ! caretRect ) {\r\n\t\t\t\t\tcaretRect = currentCaretRect;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Even though enabling the typewriter effect for arrow keys results in\r\n\t\t\t\t// a pleasant experience, it may not be the case for everyone, so, for\r\n\t\t\t\t// now, let's disable it.\r\n\t\t\t\tif ( arrowKeyCodes.has( keyCode ) ) {\r\n\t\t\t\t\t// Reset the caret position to maintain.\r\n\t\t\t\t\tcaretRect = currentCaretRect;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst diff = currentCaretRect.top - caretRect.top;\r\n\r\n\t\t\t\tif ( diff === 0 ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst scrollContainer = getScrollContainer( node );\r\n\r\n\t\t\t\t// The page must be scrollable.\r\n\t\t\t\tif ( ! scrollContainer ) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst windowScroll =\r\n\t\t\t\t\tscrollContainer === ownerDocument.body ||\r\n\t\t\t\t\tscrollContainer === ownerDocument.documentElement;\r\n\t\t\t\tconst scrollY = windowScroll\r\n\t\t\t\t\t? defaultView.scrollY\r\n\t\t\t\t\t: scrollContainer.scrollTop;\r\n\t\t\t\tconst scrollContainerY = windowScroll\r\n\t\t\t\t\t? 0\r\n\t\t\t\t\t: scrollContainer.getBoundingClientRect().top;\r\n\t\t\t\tconst relativeScrollPosition = windowScroll\r\n\t\t\t\t\t? caretRect.top / defaultView.innerHeight\r\n\t\t\t\t\t: ( caretRect.top - scrollContainerY ) /\r\n\t\t\t\t\t  ( defaultView.innerHeight - scrollContainerY );\r\n\r\n\t\t\t\t// If the scroll position is at the start, the active editable element\r\n\t\t\t\t// is the last one, and the caret is positioned within the initial\r\n\t\t\t\t// trigger percentage of the page, do not scroll the page.\r\n\t\t\t\t// The typewriter effect should not kick in until an empty page has been\r\n\t\t\t\t// filled with the initial trigger percentage or the user scrolls\r\n\t\t\t\t// intentionally down.\r\n\t\t\t\tif (\r\n\t\t\t\t\tscrollY === 0 &&\r\n\t\t\t\t\trelativeScrollPosition < initialTriggerPercentage &&\r\n\t\t\t\t\tisLastEditableNode()\r\n\t\t\t\t) {\r\n\t\t\t\t\t// Reset the caret position to maintain.\r\n\t\t\t\t\tcaretRect = currentCaretRect;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst scrollContainerHeight = windowScroll\r\n\t\t\t\t\t? defaultView.innerHeight\r\n\t\t\t\t\t: scrollContainer.clientHeight;\r\n\r\n\t\t\t\t// Abort if the target scroll position would scroll the caret out of\r\n\t\t\t\t// view.\r\n\t\t\t\tif (\r\n\t\t\t\t\t// The caret is under the lower fold.\r\n\t\t\t\t\tcaretRect.top + caretRect.height >\r\n\t\t\t\t\t\tscrollContainerY + scrollContainerHeight ||\r\n\t\t\t\t\t// The caret is above the upper fold.\r\n\t\t\t\t\tcaretRect.top < scrollContainerY\r\n\t\t\t\t) {\r\n\t\t\t\t\t// Reset the caret position to maintain.\r\n\t\t\t\t\tcaretRect = currentCaretRect;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( windowScroll ) {\r\n\t\t\t\t\tdefaultView.scrollBy( 0, diff );\r\n\t\t\t\t} else {\r\n\t\t\t\t\tscrollContainer.scrollTop += diff;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Adds a `selectionchange` listener to reset the scroll position to be\r\n\t\t\t * maintained.\r\n\t\t\t */\r\n\t\t\tfunction addSelectionChangeListener() {\r\n\t\t\t\townerDocument.addEventListener(\r\n\t\t\t\t\t'selectionchange',\r\n\t\t\t\t\tcomputeCaretRectOnSelectionChange\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Resets the scroll position to be maintained during a `selectionchange`\r\n\t\t\t * event. Also removes the listener, so it acts as a one-time listener.\r\n\t\t\t */\r\n\t\t\tfunction computeCaretRectOnSelectionChange() {\r\n\t\t\t\townerDocument.removeEventListener(\r\n\t\t\t\t\t'selectionchange',\r\n\t\t\t\t\tcomputeCaretRectOnSelectionChange\r\n\t\t\t\t);\r\n\t\t\t\tcomputeCaretRectangle();\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Resets the scroll position to be maintained.\r\n\t\t\t */\r\n\t\t\tfunction computeCaretRectangle() {\r\n\t\t\t\tif ( isSelectionEligibleForScroll() ) {\r\n\t\t\t\t\tcaretRect = computeCaretRect( defaultView );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Checks if the current situation is elegible for scroll:\r\n\t\t\t * - There should be one and only one block selected.\r\n\t\t\t * - The component must contain the selection.\r\n\t\t\t * - The active element must be contenteditable.\r\n\t\t\t */\r\n\t\t\tfunction isSelectionEligibleForScroll() {\r\n\t\t\t\treturn (\r\n\t\t\t\t\tnode.contains( ownerDocument.activeElement ) &&\r\n\t\t\t\t\townerDocument.activeElement.isContentEditable\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\tfunction isLastEditableNode() {\r\n\t\t\t\tconst editableNodes = node.querySelectorAll(\r\n\t\t\t\t\t'[contenteditable=\"true\"]'\r\n\t\t\t\t);\r\n\t\t\t\tconst lastEditableNode =\r\n\t\t\t\t\teditableNodes[ editableNodes.length - 1 ];\r\n\t\t\t\treturn lastEditableNode === ownerDocument.activeElement;\r\n\t\t\t}\r\n\r\n\t\t\t// When the user scrolls or resizes, the scroll position should be\r\n\t\t\t// reset.\r\n\t\t\tdefaultView.addEventListener( 'scroll', onScrollResize, true );\r\n\t\t\tdefaultView.addEventListener( 'resize', onScrollResize, true );\r\n\r\n\t\t\tnode.addEventListener( 'keydown', onKeyDown );\r\n\t\t\tnode.addEventListener( 'keyup', maintainCaretPosition );\r\n\t\t\tnode.addEventListener( 'mousedown', addSelectionChangeListener );\r\n\t\t\tnode.addEventListener( 'touchstart', addSelectionChangeListener );\r\n\r\n\t\t\treturn () => {\r\n\t\t\t\tdefaultView.removeEventListener(\r\n\t\t\t\t\t'scroll',\r\n\t\t\t\t\tonScrollResize,\r\n\t\t\t\t\ttrue\r\n\t\t\t\t);\r\n\t\t\t\tdefaultView.removeEventListener(\r\n\t\t\t\t\t'resize',\r\n\t\t\t\t\tonScrollResize,\r\n\t\t\t\t\ttrue\r\n\t\t\t\t);\r\n\r\n\t\t\t\tnode.removeEventListener( 'keydown', onKeyDown );\r\n\t\t\t\tnode.removeEventListener( 'keyup', maintainCaretPosition );\r\n\t\t\t\tnode.removeEventListener(\r\n\t\t\t\t\t'mousedown',\r\n\t\t\t\t\taddSelectionChangeListener\r\n\t\t\t\t);\r\n\t\t\t\tnode.removeEventListener(\r\n\t\t\t\t\t'touchstart',\r\n\t\t\t\t\taddSelectionChangeListener\r\n\t\t\t\t);\r\n\r\n\t\t\t\townerDocument.removeEventListener(\r\n\t\t\t\t\t'selectionchange',\r\n\t\t\t\t\tcomputeCaretRectOnSelectionChange\r\n\t\t\t\t);\r\n\r\n\t\t\t\tdefaultView.cancelAnimationFrame( scrollResizeRafId );\r\n\t\t\t\tdefaultView.cancelAnimationFrame( onKeyDownRafId );\r\n\t\t\t};\r\n\t\t},\r\n\t\t[ hasSelectedBlock ]\r\n\t);\r\n}\r\n\r\nfunction Typewriter( { children } ) {\r\n\treturn (\r\n\t\t<div ref={ useTypewriter() } className=\"block-editor__typewriter\">\r\n\t\t\t{ children }\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\n/**\r\n * The exported component. The implementation of Typewriter faced technical\r\n * challenges in Internet Explorer, and is simply skipped, rendering the given\r\n * props children instead.\r\n *\r\n * @type {Component}\r\n */\r\nconst TypewriterOrIEBypass = isIE ? ( props ) => props.children : Typewriter;\r\n\r\n/**\r\n * Ensures that the text selection keeps the same vertical distance from the\r\n * viewport during keyboard events within this component. The vertical distance\r\n * can vary. It is the last clicked or scrolled to position.\r\n */\r\nexport default TypewriterOrIEBypass;\r\n","/**\n * WordPress dependencies\n */\nimport { createContext, useContext, useMemo } from '@wordpress/element';\nimport deprecated from '@wordpress/deprecated';\n\n/**\n * Internal dependencies\n */\nimport { useBlockEditContext } from '../block-edit/context';\n\nconst RenderedRefsContext = createContext( {} );\n\n/**\n * Immutably adds an unique identifier to a set scoped for a given block type.\n *\n * @param {Object} renderedBlocks Rendered blocks grouped by block name\n * @param {string} blockName      Name of the block.\n * @param {*}      uniqueId       Any value that acts as a unique identifier for a block instance.\n *\n * @return {Object} The list of rendered blocks grouped by block name.\n */\nfunction addToBlockType( renderedBlocks, blockName, uniqueId ) {\n\tconst result = {\n\t\t...renderedBlocks,\n\t\t[ blockName ]: renderedBlocks[ blockName ]\n\t\t\t? new Set( renderedBlocks[ blockName ] )\n\t\t\t: new Set(),\n\t};\n\tresult[ blockName ].add( uniqueId );\n\n\treturn result;\n}\n\n/**\n * A React context provider for use with the `useHasRecursion` hook to prevent recursive\n * renders.\n *\n * Wrap block content with this provider and provide the same `uniqueId` prop as used\n * with `useHasRecursion`.\n *\n * @param {Object}      props\n * @param {*}           props.uniqueId  Any value that acts as a unique identifier for a block instance.\n * @param {string}      props.blockName Optional block name.\n * @param {JSX.Element} props.children  React children.\n *\n * @return {JSX.Element} A React element.\n */\nexport function RecursionProvider( { children, uniqueId, blockName = '' } ) {\n\tconst previouslyRenderedBlocks = useContext( RenderedRefsContext );\n\tconst { name } = useBlockEditContext();\n\n\tblockName = blockName || name;\n\n\tconst newRenderedBlocks = useMemo(\n\t\t() => addToBlockType( previouslyRenderedBlocks, blockName, uniqueId ),\n\t\t[ previouslyRenderedBlocks, blockName, uniqueId ]\n\t);\n\n\treturn (\n\t\t<RenderedRefsContext.Provider value={ newRenderedBlocks }>\n\t\t\t{ children }\n\t\t</RenderedRefsContext.Provider>\n\t);\n}\n\n/**\n * A React hook for keeping track of blocks previously rendered up in the block\n * tree. Blocks susceptible to recursion can use this hook in their `Edit`\n * function to prevent said recursion.\n *\n * Use this with the `RecursionProvider` component, using the same `uniqueId` value\n * for both the hook and the provider.\n *\n * @param {*}      uniqueId  Any value that acts as a unique identifier for a block instance.\n * @param {string} blockName Optional block name.\n *\n * @return {boolean} A boolean describing whether the provided id has already been rendered.\n */\nexport function useHasRecursion( uniqueId, blockName = '' ) {\n\tconst previouslyRenderedBlocks = useContext( RenderedRefsContext );\n\tconst { name } = useBlockEditContext();\n\tblockName = blockName || name;\n\treturn Boolean( previouslyRenderedBlocks[ blockName ]?.has( uniqueId ) );\n}\n\nexport const DeprecatedExperimentalRecursionProvider = ( props ) => {\n\tdeprecated( 'wp.blockEditor.__experimentalRecursionProvider', {\n\t\tsince: '6.5',\n\t\talternative: 'wp.blockEditor.RecursionProvider',\n\t} );\n\treturn <RecursionProvider { ...props } />;\n};\n\nexport const DeprecatedExperimentalUseHasRecursion = ( props ) => {\n\tdeprecated( 'wp.blockEditor.__experimentalUseHasRecursion', {\n\t\tsince: '6.5',\n\t\talternative: 'wp.blockEditor.useHasRecursion',\n\t} );\n\treturn useHasRecursion( ...props );\n};\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { SVG, Path } from '@wordpress/primitives';\r\n\r\nconst closeSmall = (\r\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n\t\t<Path d=\"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z\" />\r\n\t</SVG>\r\n);\r\n\r\nexport default closeSmall;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\t__experimentalVStack as VStack,\r\n\t__experimentalHStack as HStack,\r\n\t__experimentalHeading as Heading,\r\n\t__experimentalSpacer as Spacer,\r\n\tButton,\r\n\t__experimentalText as Text,\r\n} from '@wordpress/components';\r\nimport { closeSmall } from '@wordpress/icons';\r\nimport { __ } from '@wordpress/i18n';\r\n\r\nexport default function InspectorPopoverHeader( {\r\n\ttitle,\r\n\thelp,\r\n\tactions = [],\r\n\tonClose,\r\n} ) {\r\n\treturn (\r\n\t\t<VStack className=\"block-editor-inspector-popover-header\" spacing={ 4 }>\r\n\t\t\t<HStack alignment=\"center\">\r\n\t\t\t\t<Heading\r\n\t\t\t\t\tclassName=\"block-editor-inspector-popover-header__heading\"\r\n\t\t\t\t\tlevel={ 2 }\r\n\t\t\t\t\tsize={ 13 }\r\n\t\t\t\t>\r\n\t\t\t\t\t{ title }\r\n\t\t\t\t</Heading>\r\n\t\t\t\t<Spacer />\r\n\t\t\t\t{ actions.map( ( { label, icon, onClick } ) => (\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tkey={ label }\r\n\t\t\t\t\t\tclassName=\"block-editor-inspector-popover-header__action\"\r\n\t\t\t\t\t\tlabel={ label }\r\n\t\t\t\t\t\ticon={ icon }\r\n\t\t\t\t\t\tvariant={ ! icon && 'tertiary' }\r\n\t\t\t\t\t\tonClick={ onClick }\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{ ! icon && label }\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t) ) }\r\n\t\t\t\t{ onClose && (\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tclassName=\"block-editor-inspector-popover-header__action\"\r\n\t\t\t\t\t\tlabel={ __( 'Close' ) }\r\n\t\t\t\t\t\ticon={ closeSmall }\r\n\t\t\t\t\t\tonClick={ onClose }\r\n\t\t\t\t\t/>\r\n\t\t\t\t) }\r\n\t\t\t</HStack>\r\n\t\t\t{ help && <Text>{ help }</Text> }\r\n\t\t</VStack>\r\n\t);\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { DateTimePicker } from '@wordpress/components';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { forwardRef } from '@wordpress/element';\r\nimport { getSettings } from '@wordpress/date';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport InspectorPopoverHeader from '../inspector-popover-header';\r\n\r\nfunction PublishDateTimePicker(\r\n\t{ onClose, onChange, ...additionalProps },\r\n\tref\r\n) {\r\n\treturn (\r\n\t\t<div ref={ ref } className=\"block-editor-publish-date-time-picker\">\r\n\t\t\t<InspectorPopoverHeader\r\n\t\t\t\ttitle={ __( 'Publish' ) }\r\n\t\t\t\tactions={ [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tlabel: __( 'Now' ),\r\n\t\t\t\t\t\tonClick: () => onChange?.( null ),\r\n\t\t\t\t\t},\r\n\t\t\t\t] }\r\n\t\t\t\tonClose={ onClose }\r\n\t\t\t/>\r\n\t\t\t<DateTimePicker\r\n\t\t\t\tstartOfWeek={ getSettings().l10n.startOfWeek }\r\n\t\t\t\tonChange={ onChange }\r\n\t\t\t\t{ ...additionalProps }\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default forwardRef( PublishDateTimePicker );\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { Button } from '@wordpress/components';\r\nimport { useDispatch, useSelect } from '@wordpress/data';\r\nimport { focus } from '@wordpress/dom';\r\nimport { useRef } from '@wordpress/element';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { close } from '@wordpress/icons';\r\nimport { store as preferencesStore } from '@wordpress/preferences';\r\n\r\nconst PREFERENCE_NAME = 'isResuableBlocksrRenameHintVisible';\r\n/*\r\n * This hook was added in 6.3 to help users with the transition from Reusable blocks to Patterns.\r\n * It is only exported for use in the reusable-blocks package as well as block-editor.\r\n * It will be removed in 6.4. and should not be used in any new code.\r\n */\r\nexport function useReusableBlocksRenameHint() {\r\n\treturn useSelect(\r\n\t\t( select ) =>\r\n\t\t\tselect( preferencesStore ).get( 'core', PREFERENCE_NAME ) ?? true,\r\n\t\t[]\r\n\t);\r\n}\r\n\r\n/*\r\n * This component was added in 6.3 to help users with the transition from Reusable blocks to Patterns.\r\n * It is only exported for use in the reusable-blocks package as well as block-editor.\r\n * It will be removed in 6.4. and should not be used in any new code.\r\n */\r\nexport default function ReusableBlocksRenameHint() {\r\n\tconst isReusableBlocksRenameHint = useSelect(\r\n\t\t( select ) =>\r\n\t\t\tselect( preferencesStore ).get( 'core', PREFERENCE_NAME ) ?? true,\r\n\t\t[]\r\n\t);\r\n\r\n\tconst ref = useRef();\r\n\r\n\tconst { set: setPreference } = useDispatch( preferencesStore );\r\n\tif ( ! isReusableBlocksRenameHint ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div ref={ ref } className=\"reusable-blocks-menu-items__rename-hint\">\r\n\t\t\t<div className=\"reusable-blocks-menu-items__rename-hint-content\">\r\n\t\t\t\t{ __(\r\n\t\t\t\t\t'Reusable blocks are now synced patterns. A synced pattern will behave in exactly the same way as a reusable block.'\r\n\t\t\t\t) }\r\n\t\t\t</div>\r\n\t\t\t<Button\r\n\t\t\t\tclassName=\"reusable-blocks-menu-items__rename-hint-dismiss\"\r\n\t\t\t\ticon={ close }\r\n\t\t\t\ticonSize=\"16\"\r\n\t\t\t\tlabel={ __( 'Dismiss hint' ) }\r\n\t\t\t\tonClick={ () => {\r\n\t\t\t\t\t// Retain focus when dismissing the element.\r\n\t\t\t\t\tconst previousElement = focus.tabbable.findPrevious(\r\n\t\t\t\t\t\tref.current\r\n\t\t\t\t\t);\r\n\t\t\t\t\tpreviousElement?.focus();\r\n\t\t\t\t\tsetPreference( 'core', PREFERENCE_NAME, false );\r\n\t\t\t\t} }\r\n\t\t\t\tshowTooltip={ false }\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n}\r\n","const ELEMENT_CLASS_NAMES = {\r\n\tbutton: 'wp-element-button',\r\n\tcaption: 'wp-element-caption',\r\n};\r\n\r\nexport const __experimentalGetElementClassName = ( element ) => {\r\n\treturn ELEMENT_CLASS_NAMES[ element ] ? ELEMENT_CLASS_NAMES[ element ] : '';\r\n};\r\n","/**\r\n * This function was accidentially exposed for mobile/native usage.\r\n *\r\n * @deprecated\r\n *\r\n * @return {string} Empty string.\r\n */\r\nexport default () => '';\r\n","/**\n * WordPress dependencies\n */\nimport {\n\t__EXPERIMENTAL_STYLE_PROPERTY as STYLE_PROPERTY,\n\t__EXPERIMENTAL_ELEMENTS as ELEMENTS,\n\tgetBlockSupport,\n\tgetBlockTypes,\n\tstore as blocksStore,\n} from '@wordpress/blocks';\nimport { useSelect } from '@wordpress/data';\nimport { useContext, useMemo } from '@wordpress/element';\nimport { getCSSRules } from '@wordpress/style-engine';\nimport { privateApis as componentsPrivateApis } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport {\n\tPRESET_METADATA,\n\tROOT_BLOCK_SELECTOR,\n\tROOT_CSS_PROPERTIES_SELECTOR,\n\tscopeSelector,\n\tappendToSelector,\n\tgetBlockStyleVariationSelector,\n} from './utils';\nimport { getBlockCSSSelector } from './get-block-css-selector';\nimport { getTypographyFontSizeValue } from './typography-utils';\nimport { GlobalStylesContext } from './context';\nimport { useGlobalSetting } from './hooks';\nimport { getDuotoneFilter } from '../duotone/utils';\nimport { getGapCSSValue } from '../../hooks/gap';\nimport { store as blockEditorStore } from '../../store';\nimport { LAYOUT_DEFINITIONS } from '../../layouts/definitions';\nimport { getValueFromObjectPath, setImmutably } from '../../utils/object';\nimport BlockContext from '../block-context';\nimport { unlock } from '../../lock-unlock';\n\n// List of block support features that can have their related styles\n// generated under their own feature level selector rather than the block's.\nconst BLOCK_SUPPORT_FEATURE_LEVEL_SELECTORS = {\n\t__experimentalBorder: 'border',\n\tcolor: 'color',\n\tspacing: 'spacing',\n\ttypography: 'typography',\n};\n\nfunction compileStyleValue( uncompiledValue ) {\n\tconst VARIABLE_REFERENCE_PREFIX = 'var:';\n\tconst VARIABLE_PATH_SEPARATOR_TOKEN_ATTRIBUTE = '|';\n\tconst VARIABLE_PATH_SEPARATOR_TOKEN_STYLE = '--';\n\n\tif ( uncompiledValue?.startsWith?.( VARIABLE_REFERENCE_PREFIX ) ) {\n\t\tconst variable = uncompiledValue\n\t\t\t.slice( VARIABLE_REFERENCE_PREFIX.length )\n\t\t\t.split( VARIABLE_PATH_SEPARATOR_TOKEN_ATTRIBUTE )\n\t\t\t.join( VARIABLE_PATH_SEPARATOR_TOKEN_STYLE );\n\t\treturn `var(--wp--${ variable })`;\n\t}\n\treturn uncompiledValue;\n}\n\n/**\n * Transform given preset tree into a set of style declarations.\n *\n * @param {Object} blockPresets\n * @param {Object} mergedSettings Merged theme.json settings.\n *\n * @return {Array<Object>} An array of style declarations.\n */\nfunction getPresetsDeclarations( blockPresets = {}, mergedSettings ) {\n\tconst { kebabCase } = unlock( componentsPrivateApis );\n\n\treturn PRESET_METADATA.reduce(\n\t\t( declarations, { path, valueKey, valueFunc, cssVarInfix } ) => {\n\t\t\tconst presetByOrigin = getValueFromObjectPath(\n\t\t\t\tblockPresets,\n\t\t\t\tpath,\n\t\t\t\t[]\n\t\t\t);\n\t\t\t[ 'default', 'theme', 'custom' ].forEach( ( origin ) => {\n\t\t\t\tif ( presetByOrigin[ origin ] ) {\n\t\t\t\t\tpresetByOrigin[ origin ].forEach( ( value ) => {\n\t\t\t\t\t\tif ( valueKey && ! valueFunc ) {\n\t\t\t\t\t\t\tdeclarations.push(\n\t\t\t\t\t\t\t\t`--wp--preset--${ cssVarInfix }--${ kebabCase(\n\t\t\t\t\t\t\t\t\tvalue.slug\n\t\t\t\t\t\t\t\t) }: ${ value[ valueKey ] }`\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\tvalueFunc &&\n\t\t\t\t\t\t\ttypeof valueFunc === 'function'\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tdeclarations.push(\n\t\t\t\t\t\t\t\t`--wp--preset--${ cssVarInfix }--${ kebabCase(\n\t\t\t\t\t\t\t\t\tvalue.slug\n\t\t\t\t\t\t\t\t) }: ${ valueFunc( value, mergedSettings ) }`\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\treturn declarations;\n\t\t},\n\t\t[]\n\t);\n}\n\n/**\n * Transform given preset tree into a set of preset class declarations.\n *\n * @param {?string} blockSelector\n * @param {Object}  blockPresets\n * @return {string} CSS declarations for the preset classes.\n */\nfunction getPresetsClasses( blockSelector = '*', blockPresets = {} ) {\n\tconst { kebabCase } = unlock( componentsPrivateApis );\n\n\treturn PRESET_METADATA.reduce(\n\t\t( declarations, { path, cssVarInfix, classes } ) => {\n\t\t\tif ( ! classes ) {\n\t\t\t\treturn declarations;\n\t\t\t}\n\n\t\t\tconst presetByOrigin = getValueFromObjectPath(\n\t\t\t\tblockPresets,\n\t\t\t\tpath,\n\t\t\t\t[]\n\t\t\t);\n\t\t\t[ 'default', 'theme', 'custom' ].forEach( ( origin ) => {\n\t\t\t\tif ( presetByOrigin[ origin ] ) {\n\t\t\t\t\tpresetByOrigin[ origin ].forEach( ( { slug } ) => {\n\t\t\t\t\t\tclasses.forEach( ( { classSuffix, propertyName } ) => {\n\t\t\t\t\t\t\tconst classSelectorToUse = `.has-${ kebabCase(\n\t\t\t\t\t\t\t\tslug\n\t\t\t\t\t\t\t) }-${ classSuffix }`;\n\t\t\t\t\t\t\tconst selectorToUse = blockSelector\n\t\t\t\t\t\t\t\t.split( ',' ) // Selector can be \"h1, h2, h3\"\n\t\t\t\t\t\t\t\t.map(\n\t\t\t\t\t\t\t\t\t( selector ) =>\n\t\t\t\t\t\t\t\t\t\t`${ selector }${ classSelectorToUse }`\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t.join( ',' );\n\t\t\t\t\t\t\tconst value = `var(--wp--preset--${ cssVarInfix }--${ kebabCase(\n\t\t\t\t\t\t\t\tslug\n\t\t\t\t\t\t\t) })`;\n\t\t\t\t\t\t\tdeclarations += `${ selectorToUse }{${ propertyName }: ${ value } !important;}`;\n\t\t\t\t\t\t} );\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} );\n\t\t\treturn declarations;\n\t\t},\n\t\t''\n\t);\n}\n\nfunction getPresetsSvgFilters( blockPresets = {} ) {\n\treturn PRESET_METADATA.filter(\n\t\t// Duotone are the only type of filters for now.\n\t\t( metadata ) => metadata.path.at( -1 ) === 'duotone'\n\t).flatMap( ( metadata ) => {\n\t\tconst presetByOrigin = getValueFromObjectPath(\n\t\t\tblockPresets,\n\t\t\tmetadata.path,\n\t\t\t{}\n\t\t);\n\t\treturn [ 'default', 'theme' ]\n\t\t\t.filter( ( origin ) => presetByOrigin[ origin ] )\n\t\t\t.flatMap( ( origin ) =>\n\t\t\t\tpresetByOrigin[ origin ].map( ( preset ) =>\n\t\t\t\t\tgetDuotoneFilter(\n\t\t\t\t\t\t`wp-duotone-${ preset.slug }`,\n\t\t\t\t\t\tpreset.colors\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t)\n\t\t\t.join( '' );\n\t} );\n}\n\nfunction flattenTree( input = {}, prefix, token ) {\n\tconst { kebabCase } = unlock( componentsPrivateApis );\n\tlet result = [];\n\tObject.keys( input ).forEach( ( key ) => {\n\t\tconst newKey = prefix + kebabCase( key.replace( '/', '-' ) );\n\t\tconst newLeaf = input[ key ];\n\n\t\tif ( newLeaf instanceof Object ) {\n\t\t\tconst newPrefix = newKey + token;\n\t\t\tresult = [ ...result, ...flattenTree( newLeaf, newPrefix, token ) ];\n\t\t} else {\n\t\t\tresult.push( `${ newKey }: ${ newLeaf }` );\n\t\t}\n\t} );\n\treturn result;\n}\n\n/**\n * Gets variation selector string from feature selector.\n *\n * @param {string} featureSelector        The feature selector.\n *\n * @param {string} styleVariationSelector The style variation selector.\n * @return {string} Combined selector string.\n */\nfunction concatFeatureVariationSelectorString(\n\tfeatureSelector,\n\tstyleVariationSelector\n) {\n\tconst featureSelectors = featureSelector.split( ',' );\n\tconst combinedSelectors = [];\n\tfeatureSelectors.forEach( ( selector ) => {\n\t\tcombinedSelectors.push(\n\t\t\t`${ styleVariationSelector.trim() }${ selector.trim() }`\n\t\t);\n\t} );\n\treturn combinedSelectors.join( ', ' );\n}\n\n/**\n * Generate style declarations for a block's custom feature and subfeature\n * selectors.\n *\n * NOTE: The passed `styles` object will be mutated by this function.\n *\n * @param {Object} selectors Custom selectors object for a block.\n * @param {Object} styles    A block's styles object.\n *\n * @return {Object} Style declarations.\n */\nconst getFeatureDeclarations = ( selectors, styles ) => {\n\tconst declarations = {};\n\n\tObject.entries( selectors ).forEach( ( [ feature, selector ] ) => {\n\t\t// We're only processing features/subfeatures that have styles.\n\t\tif ( feature === 'root' || ! styles?.[ feature ] ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst isShorthand = typeof selector === 'string';\n\n\t\t// If we have a selector object instead of shorthand process it.\n\t\tif ( ! isShorthand ) {\n\t\t\tObject.entries( selector ).forEach(\n\t\t\t\t( [ subfeature, subfeatureSelector ] ) => {\n\t\t\t\t\t// Don't process root feature selector yet or any\n\t\t\t\t\t// subfeature that doesn't have a style.\n\t\t\t\t\tif (\n\t\t\t\t\t\tsubfeature === 'root' ||\n\t\t\t\t\t\t! styles?.[ feature ][ subfeature ]\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Create a temporary styles object and build\n\t\t\t\t\t// declarations for subfeature.\n\t\t\t\t\tconst subfeatureStyles = {\n\t\t\t\t\t\t[ feature ]: {\n\t\t\t\t\t\t\t[ subfeature ]: styles[ feature ][ subfeature ],\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\t\t\t\t\tconst newDeclarations =\n\t\t\t\t\t\tgetStylesDeclarations( subfeatureStyles );\n\n\t\t\t\t\t// Merge new declarations in with any others that\n\t\t\t\t\t// share the same selector.\n\t\t\t\t\tdeclarations[ subfeatureSelector ] = [\n\t\t\t\t\t\t...( declarations[ subfeatureSelector ] || [] ),\n\t\t\t\t\t\t...newDeclarations,\n\t\t\t\t\t];\n\n\t\t\t\t\t// Remove the subfeature's style now it will be\n\t\t\t\t\t// included under its own selector not the block's.\n\t\t\t\t\tdelete styles[ feature ][ subfeature ];\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\t// Now subfeatures have been processed and removed, we can\n\t\t// process root, or shorthand, feature selectors.\n\t\tif ( isShorthand || selector.root ) {\n\t\t\tconst featureSelector = isShorthand ? selector : selector.root;\n\n\t\t\t// Create temporary style object and build declarations for feature.\n\t\t\tconst featureStyles = { [ feature ]: styles[ feature ] };\n\t\t\tconst newDeclarations = getStylesDeclarations( featureStyles );\n\n\t\t\t// Merge new declarations with any others that share the selector.\n\t\t\tdeclarations[ featureSelector ] = [\n\t\t\t\t...( declarations[ featureSelector ] || [] ),\n\t\t\t\t...newDeclarations,\n\t\t\t];\n\n\t\t\t// Remove the feature from the block's styles now as it will be\n\t\t\t// included under its own selector not the block's.\n\t\t\tdelete styles[ feature ];\n\t\t}\n\t} );\n\n\treturn declarations;\n};\n\n/**\n * Transform given style tree into a set of style declarations.\n *\n * @param {Object}  blockStyles         Block styles.\n *\n * @param {string}  selector            The selector these declarations should attach to.\n *\n * @param {boolean} useRootPaddingAlign Whether to use CSS custom properties in root selector.\n *\n * @param {Object}  tree                A theme.json tree containing layout definitions.\n *\n * @param {boolean} isTemplate          Whether the entity being edited is a full template or a pattern.\n * @return {Array} An array of style declarations.\n */\nexport function getStylesDeclarations(\n\tblockStyles = {},\n\tselector = '',\n\tuseRootPaddingAlign,\n\ttree = {},\n\tisTemplate = true\n) {\n\tconst { kebabCase } = unlock( componentsPrivateApis );\n\tconst isRoot = ROOT_BLOCK_SELECTOR === selector;\n\tconst output = Object.entries( STYLE_PROPERTY ).reduce(\n\t\t(\n\t\t\tdeclarations,\n\t\t\t[ key, { value, properties, useEngine, rootOnly } ]\n\t\t) => {\n\t\t\tif ( rootOnly && ! isRoot ) {\n\t\t\t\treturn declarations;\n\t\t\t}\n\t\t\tconst pathToValue = value;\n\t\t\tif ( pathToValue[ 0 ] === 'elements' || useEngine ) {\n\t\t\t\treturn declarations;\n\t\t\t}\n\n\t\t\tconst styleValue = getValueFromObjectPath(\n\t\t\t\tblockStyles,\n\t\t\t\tpathToValue\n\t\t\t);\n\n\t\t\t// Root-level padding styles don't currently support strings with CSS shorthand values.\n\t\t\t// This may change: https://github.com/WordPress/gutenberg/issues/40132.\n\t\t\tif (\n\t\t\t\tkey === '--wp--style--root--padding' &&\n\t\t\t\t( typeof styleValue === 'string' || ! useRootPaddingAlign )\n\t\t\t) {\n\t\t\t\treturn declarations;\n\t\t\t}\n\n\t\t\tif ( properties && typeof styleValue !== 'string' ) {\n\t\t\t\tObject.entries( properties ).forEach( ( entry ) => {\n\t\t\t\t\tconst [ name, prop ] = entry;\n\n\t\t\t\t\tif (\n\t\t\t\t\t\t! getValueFromObjectPath( styleValue, [ prop ], false )\n\t\t\t\t\t) {\n\t\t\t\t\t\t// Do not create a declaration\n\t\t\t\t\t\t// for sub-properties that don't have any value.\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst cssProperty = name.startsWith( '--' )\n\t\t\t\t\t\t? name\n\t\t\t\t\t\t: kebabCase( name );\n\t\t\t\t\tdeclarations.push(\n\t\t\t\t\t\t`${ cssProperty }: ${ compileStyleValue(\n\t\t\t\t\t\t\tgetValueFromObjectPath( styleValue, [ prop ] )\n\t\t\t\t\t\t) }`\n\t\t\t\t\t);\n\t\t\t\t} );\n\t\t\t} else if (\n\t\t\t\tgetValueFromObjectPath( blockStyles, pathToValue, false )\n\t\t\t) {\n\t\t\t\tconst cssProperty = key.startsWith( '--' )\n\t\t\t\t\t? key\n\t\t\t\t\t: kebabCase( key );\n\t\t\t\tdeclarations.push(\n\t\t\t\t\t`${ cssProperty }: ${ compileStyleValue(\n\t\t\t\t\t\tgetValueFromObjectPath( blockStyles, pathToValue )\n\t\t\t\t\t) }`\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn declarations;\n\t\t},\n\t\t[]\n\t);\n\n\t// The goal is to move everything to server side generated engine styles\n\t// This is temporary as we absorb more and more styles into the engine.\n\tconst extraRules = getCSSRules( blockStyles );\n\textraRules.forEach( ( rule ) => {\n\t\t// Don't output padding properties if padding variables are set or if we're not editing a full template.\n\t\tif (\n\t\t\tisRoot &&\n\t\t\t( useRootPaddingAlign || ! isTemplate ) &&\n\t\t\trule.key.startsWith( 'padding' )\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\tconst cssProperty = rule.key.startsWith( '--' )\n\t\t\t? rule.key\n\t\t\t: kebabCase( rule.key );\n\n\t\tlet ruleValue = rule.value;\n\t\tif ( typeof ruleValue !== 'string' && ruleValue?.ref ) {\n\t\t\tconst refPath = ruleValue.ref.split( '.' );\n\t\t\truleValue = compileStyleValue(\n\t\t\t\tgetValueFromObjectPath( tree, refPath )\n\t\t\t);\n\t\t\t// Presence of another ref indicates a reference to another dynamic value.\n\t\t\t// Pointing to another dynamic value is not supported.\n\t\t\tif ( ! ruleValue || ruleValue?.ref ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// Calculate fluid typography rules where available.\n\t\tif ( cssProperty === 'font-size' ) {\n\t\t\t/*\n\t\t\t * getTypographyFontSizeValue() will check\n\t\t\t * if fluid typography has been activated and also\n\t\t\t * whether the incoming value can be converted to a fluid value.\n\t\t\t * Values that already have a \"clamp()\" function will not pass the test,\n\t\t\t * and therefore the original $value will be returned.\n\t\t\t */\n\t\t\truleValue = getTypographyFontSizeValue(\n\t\t\t\t{ size: ruleValue },\n\t\t\t\ttree?.settings\n\t\t\t);\n\t\t}\n\n\t\t// For aspect ratio to work, other dimensions rules (and Cover block defaults) must be unset.\n\t\t// This ensures that a fixed height does not override the aspect ratio.\n\t\tif ( cssProperty === 'aspect-ratio' ) {\n\t\t\toutput.push( 'min-height: unset' );\n\t\t}\n\n\t\toutput.push( `${ cssProperty }: ${ ruleValue }` );\n\t} );\n\n\treturn output;\n}\n\n/**\n * Get generated CSS for layout styles by looking up layout definitions provided\n * in theme.json, and outputting common layout styles, and specific blockGap values.\n *\n * @param {Object}  props\n * @param {Object}  props.layoutDefinitions     Layout definitions, keyed by layout type.\n * @param {Object}  props.style                 A style object containing spacing values.\n * @param {string}  props.selector              Selector used to group together layout styling rules.\n * @param {boolean} props.hasBlockGapSupport    Whether or not the theme opts-in to blockGap support.\n * @param {boolean} props.hasFallbackGapSupport Whether or not the theme allows fallback gap styles.\n * @param {?string} props.fallbackGapValue      An optional fallback gap value if no real gap value is available.\n * @return {string} Generated CSS rules for the layout styles.\n */\nexport function getLayoutStyles( {\n\tlayoutDefinitions = LAYOUT_DEFINITIONS,\n\tstyle,\n\tselector,\n\thasBlockGapSupport,\n\thasFallbackGapSupport,\n\tfallbackGapValue,\n} ) {\n\tlet ruleset = '';\n\tlet gapValue = hasBlockGapSupport\n\t\t? getGapCSSValue( style?.spacing?.blockGap )\n\t\t: '';\n\n\t// Ensure a fallback gap value for the root layout definitions,\n\t// and use a fallback value if one is provided for the current block.\n\tif ( hasFallbackGapSupport ) {\n\t\tif ( selector === ROOT_BLOCK_SELECTOR ) {\n\t\t\tgapValue = ! gapValue ? '0.5em' : gapValue;\n\t\t} else if ( ! hasBlockGapSupport && fallbackGapValue ) {\n\t\t\tgapValue = fallbackGapValue;\n\t\t}\n\t}\n\n\tif ( gapValue && layoutDefinitions ) {\n\t\tObject.values( layoutDefinitions ).forEach(\n\t\t\t( { className, name, spacingStyles } ) => {\n\t\t\t\t// Allow outputting fallback gap styles for flex layout type when block gap support isn't available.\n\t\t\t\tif (\n\t\t\t\t\t! hasBlockGapSupport &&\n\t\t\t\t\t'flex' !== name &&\n\t\t\t\t\t'grid' !== name\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( spacingStyles?.length ) {\n\t\t\t\t\tspacingStyles.forEach( ( spacingStyle ) => {\n\t\t\t\t\t\tconst declarations = [];\n\n\t\t\t\t\t\tif ( spacingStyle.rules ) {\n\t\t\t\t\t\t\tObject.entries( spacingStyle.rules ).forEach(\n\t\t\t\t\t\t\t\t( [ cssProperty, cssValue ] ) => {\n\t\t\t\t\t\t\t\t\tdeclarations.push(\n\t\t\t\t\t\t\t\t\t\t`${ cssProperty }: ${\n\t\t\t\t\t\t\t\t\t\t\tcssValue ? cssValue : gapValue\n\t\t\t\t\t\t\t\t\t\t}`\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( declarations.length ) {\n\t\t\t\t\t\t\tlet combinedSelector = '';\n\n\t\t\t\t\t\t\tif ( ! hasBlockGapSupport ) {\n\t\t\t\t\t\t\t\t// For fallback gap styles, use lower specificity, to ensure styles do not unintentionally override theme styles.\n\t\t\t\t\t\t\t\tcombinedSelector =\n\t\t\t\t\t\t\t\t\tselector === ROOT_BLOCK_SELECTOR\n\t\t\t\t\t\t\t\t\t\t? `:where(.${ className }${\n\t\t\t\t\t\t\t\t\t\t\t\tspacingStyle?.selector || ''\n\t\t\t\t\t\t\t\t\t\t  })`\n\t\t\t\t\t\t\t\t\t\t: `:where(${ selector }.${ className }${\n\t\t\t\t\t\t\t\t\t\t\t\tspacingStyle?.selector || ''\n\t\t\t\t\t\t\t\t\t\t  })`;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tcombinedSelector =\n\t\t\t\t\t\t\t\t\tselector === ROOT_BLOCK_SELECTOR\n\t\t\t\t\t\t\t\t\t\t? `:where(${ selector } .${ className })${\n\t\t\t\t\t\t\t\t\t\t\t\tspacingStyle?.selector || ''\n\t\t\t\t\t\t\t\t\t\t  }`\n\t\t\t\t\t\t\t\t\t\t: `${ selector }-${ className }${\n\t\t\t\t\t\t\t\t\t\t\t\tspacingStyle?.selector || ''\n\t\t\t\t\t\t\t\t\t\t  }`;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\truleset += `${ combinedSelector } { ${ declarations.join(\n\t\t\t\t\t\t\t\t'; '\n\t\t\t\t\t\t\t) }; }`;\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t\t// For backwards compatibility, ensure the legacy block gap CSS variable is still available.\n\t\tif ( selector === ROOT_BLOCK_SELECTOR && hasBlockGapSupport ) {\n\t\t\truleset += `${ ROOT_CSS_PROPERTIES_SELECTOR } { --wp--style--block-gap: ${ gapValue }; }`;\n\t\t}\n\t}\n\n\t// Output base styles\n\tif ( selector === ROOT_BLOCK_SELECTOR && layoutDefinitions ) {\n\t\tconst validDisplayModes = [ 'block', 'flex', 'grid' ];\n\t\tObject.values( layoutDefinitions ).forEach(\n\t\t\t( { className, displayMode, baseStyles } ) => {\n\t\t\t\tif (\n\t\t\t\t\tdisplayMode &&\n\t\t\t\t\tvalidDisplayModes.includes( displayMode )\n\t\t\t\t) {\n\t\t\t\t\truleset += `${ selector } .${ className } { display:${ displayMode }; }`;\n\t\t\t\t}\n\n\t\t\t\tif ( baseStyles?.length ) {\n\t\t\t\t\tbaseStyles.forEach( ( baseStyle ) => {\n\t\t\t\t\t\tconst declarations = [];\n\n\t\t\t\t\t\tif ( baseStyle.rules ) {\n\t\t\t\t\t\t\tObject.entries( baseStyle.rules ).forEach(\n\t\t\t\t\t\t\t\t( [ cssProperty, cssValue ] ) => {\n\t\t\t\t\t\t\t\t\tdeclarations.push(\n\t\t\t\t\t\t\t\t\t\t`${ cssProperty }: ${ cssValue }`\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( declarations.length ) {\n\t\t\t\t\t\t\tconst combinedSelector = `${ selector } .${ className }${\n\t\t\t\t\t\t\t\tbaseStyle?.selector || ''\n\t\t\t\t\t\t\t}`;\n\t\t\t\t\t\t\truleset += `${ combinedSelector } { ${ declarations.join(\n\t\t\t\t\t\t\t\t'; '\n\t\t\t\t\t\t\t) }; }`;\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t}\n\n\treturn ruleset;\n}\n\nconst STYLE_KEYS = [\n\t'border',\n\t'color',\n\t'dimensions',\n\t'spacing',\n\t'typography',\n\t'filter',\n\t'outline',\n\t'shadow',\n\t'background',\n];\n\nfunction pickStyleKeys( treeToPickFrom ) {\n\tif ( ! treeToPickFrom ) {\n\t\treturn {};\n\t}\n\tconst entries = Object.entries( treeToPickFrom );\n\tconst pickedEntries = entries.filter( ( [ key ] ) =>\n\t\tSTYLE_KEYS.includes( key )\n\t);\n\t// clone the style objects so that `getFeatureDeclarations` can remove consumed keys from it\n\tconst clonedEntries = pickedEntries.map( ( [ key, style ] ) => [\n\t\tkey,\n\t\tJSON.parse( JSON.stringify( style ) ),\n\t] );\n\treturn Object.fromEntries( clonedEntries );\n}\n\nexport const getNodesWithStyles = ( tree, blockSelectors ) => {\n\tconst nodes = [];\n\n\tif ( ! tree?.styles ) {\n\t\treturn nodes;\n\t}\n\n\t// Top-level.\n\tconst styles = pickStyleKeys( tree.styles );\n\tif ( styles ) {\n\t\tnodes.push( {\n\t\t\tstyles,\n\t\t\tselector: ROOT_BLOCK_SELECTOR,\n\t\t} );\n\t}\n\n\tObject.entries( ELEMENTS ).forEach( ( [ name, selector ] ) => {\n\t\tif ( tree.styles?.elements?.[ name ] ) {\n\t\t\tnodes.push( {\n\t\t\t\tstyles: tree.styles?.elements?.[ name ],\n\t\t\t\tselector,\n\t\t\t} );\n\t\t}\n\t} );\n\n\t// Iterate over blocks: they can have styles & elements.\n\tObject.entries( tree.styles?.blocks ?? {} ).forEach(\n\t\t( [ blockName, node ] ) => {\n\t\t\tconst blockStyles = pickStyleKeys( node );\n\n\t\t\tif ( node?.variations ) {\n\t\t\t\tconst variations = {};\n\t\t\t\tObject.keys( node.variations ).forEach( ( variation ) => {\n\t\t\t\t\tvariations[ variation ] = pickStyleKeys(\n\t\t\t\t\t\tnode.variations[ variation ]\n\t\t\t\t\t);\n\t\t\t\t} );\n\t\t\t\tblockStyles.variations = variations;\n\t\t\t}\n\t\t\tif ( blockStyles && blockSelectors?.[ blockName ]?.selector ) {\n\t\t\t\tnodes.push( {\n\t\t\t\t\tduotoneSelector:\n\t\t\t\t\t\tblockSelectors[ blockName ].duotoneSelector,\n\t\t\t\t\tfallbackGapValue:\n\t\t\t\t\t\tblockSelectors[ blockName ].fallbackGapValue,\n\t\t\t\t\thasLayoutSupport:\n\t\t\t\t\t\tblockSelectors[ blockName ].hasLayoutSupport,\n\t\t\t\t\tselector: blockSelectors[ blockName ].selector,\n\t\t\t\t\tstyles: blockStyles,\n\t\t\t\t\tfeatureSelectors:\n\t\t\t\t\t\tblockSelectors[ blockName ].featureSelectors,\n\t\t\t\t\tstyleVariationSelectors:\n\t\t\t\t\t\tblockSelectors[ blockName ].styleVariationSelectors,\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\tObject.entries( node?.elements ?? {} ).forEach(\n\t\t\t\t( [ elementName, value ] ) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\tvalue &&\n\t\t\t\t\t\tblockSelectors?.[ blockName ] &&\n\t\t\t\t\t\tELEMENTS[ elementName ]\n\t\t\t\t\t) {\n\t\t\t\t\t\tnodes.push( {\n\t\t\t\t\t\t\tstyles: value,\n\t\t\t\t\t\t\tselector: blockSelectors[ blockName ]?.selector\n\t\t\t\t\t\t\t\t.split( ',' )\n\t\t\t\t\t\t\t\t.map( ( sel ) => {\n\t\t\t\t\t\t\t\t\tconst elementSelectors =\n\t\t\t\t\t\t\t\t\t\tELEMENTS[ elementName ].split( ',' );\n\t\t\t\t\t\t\t\t\treturn elementSelectors.map(\n\t\t\t\t\t\t\t\t\t\t( elementSelector ) =>\n\t\t\t\t\t\t\t\t\t\t\tsel + ' ' + elementSelector\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t\t.join( ',' ),\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t);\n\n\treturn nodes;\n};\n\nexport const getNodesWithSettings = ( tree, blockSelectors ) => {\n\tconst nodes = [];\n\n\tif ( ! tree?.settings ) {\n\t\treturn nodes;\n\t}\n\n\tconst pickPresets = ( treeToPickFrom ) => {\n\t\tlet presets = {};\n\t\tPRESET_METADATA.forEach( ( { path } ) => {\n\t\t\tconst value = getValueFromObjectPath( treeToPickFrom, path, false );\n\t\t\tif ( value !== false ) {\n\t\t\t\tpresets = setImmutably( presets, path, value );\n\t\t\t}\n\t\t} );\n\t\treturn presets;\n\t};\n\n\t// Top-level.\n\tconst presets = pickPresets( tree.settings );\n\tconst custom = tree.settings?.custom;\n\tif ( Object.keys( presets ).length > 0 || custom ) {\n\t\tnodes.push( {\n\t\t\tpresets,\n\t\t\tcustom,\n\t\t\tselector: ROOT_CSS_PROPERTIES_SELECTOR,\n\t\t} );\n\t}\n\n\t// Blocks.\n\tObject.entries( tree.settings?.blocks ?? {} ).forEach(\n\t\t( [ blockName, node ] ) => {\n\t\t\tconst blockPresets = pickPresets( node );\n\t\t\tconst blockCustom = node.custom;\n\t\t\tif ( Object.keys( blockPresets ).length > 0 || blockCustom ) {\n\t\t\t\tnodes.push( {\n\t\t\t\t\tpresets: blockPresets,\n\t\t\t\t\tcustom: blockCustom,\n\t\t\t\t\tselector: blockSelectors[ blockName ]?.selector,\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\t);\n\n\treturn nodes;\n};\n\nexport const toCustomProperties = ( tree, blockSelectors ) => {\n\tconst settings = getNodesWithSettings( tree, blockSelectors );\n\tlet ruleset = '';\n\tsettings.forEach( ( { presets, custom, selector } ) => {\n\t\tconst declarations = getPresetsDeclarations( presets, tree?.settings );\n\t\tconst customProps = flattenTree( custom, '--wp--custom--', '--' );\n\t\tif ( customProps.length > 0 ) {\n\t\t\tdeclarations.push( ...customProps );\n\t\t}\n\n\t\tif ( declarations.length > 0 ) {\n\t\t\truleset += `${ selector }{${ declarations.join( ';' ) };}`;\n\t\t}\n\t} );\n\n\treturn ruleset;\n};\n\nexport const toStyles = (\n\ttree,\n\tblockSelectors,\n\thasBlockGapSupport,\n\thasFallbackGapSupport,\n\tdisableLayoutStyles = false,\n\tisTemplate = true\n) => {\n\tconst nodesWithStyles = getNodesWithStyles( tree, blockSelectors );\n\tconst nodesWithSettings = getNodesWithSettings( tree, blockSelectors );\n\tconst useRootPaddingAlign = tree?.settings?.useRootPaddingAwareAlignments;\n\tconst { contentSize, wideSize } = tree?.settings?.layout || {};\n\tlet ruleset = '';\n\n\tif ( contentSize || wideSize ) {\n\t\truleset += `${ ROOT_CSS_PROPERTIES_SELECTOR } {`;\n\t\truleset = contentSize\n\t\t\t? ruleset + ` --wp--style--global--content-size: ${ contentSize };`\n\t\t\t: ruleset;\n\t\truleset = wideSize\n\t\t\t? ruleset + ` --wp--style--global--wide-size: ${ wideSize };`\n\t\t\t: ruleset;\n\t\truleset += '}';\n\t}\n\n\t/*\n\t * Reset default browser margin on the body element.\n\t * This is set on the body selector **before** generating the ruleset\n\t * from the `theme.json`. This is to ensure that if the `theme.json` declares\n\t * `margin` in its `spacing` declaration for the `body` element then these\n\t * user-generated values take precedence in the CSS cascade.\n\t * @link https://github.com/WordPress/gutenberg/issues/36147.\n\t */\n\truleset += 'body {margin: 0;';\n\n\t// Root padding styles should only be output for full templates, not patterns or template parts.\n\tif ( useRootPaddingAlign && isTemplate ) {\n\t\t/*\n\t\t * These rules reproduce the ones from https://github.com/WordPress/gutenberg/blob/79103f124925d1f457f627e154f52a56228ed5ad/lib/class-wp-theme-json-gutenberg.php#L2508\n\t\t * almost exactly, but for the selectors that target block wrappers in the front end. This code only runs in the editor, so it doesn't need those selectors.\n\t\t */\n\t\truleset += `padding-right: 0; padding-left: 0; padding-top: var(--wp--style--root--padding-top); padding-bottom: var(--wp--style--root--padding-bottom) }\n\t\t\t.has-global-padding { padding-right: var(--wp--style--root--padding-right); padding-left: var(--wp--style--root--padding-left); }\n\t\t\t.has-global-padding :where(.has-global-padding:not(.wp-block-block)) { padding-right: 0; padding-left: 0; }\n\t\t\t.has-global-padding > .alignfull { margin-right: calc(var(--wp--style--root--padding-right) * -1); margin-left: calc(var(--wp--style--root--padding-left) * -1); }\n\t\t\t.has-global-padding :where(.has-global-padding:not(.wp-block-block)) > .alignfull { margin-right: 0; margin-left: 0; }\n\t\t\t.has-global-padding > .alignfull:where(:not(.has-global-padding):not(.is-layout-flex):not(.is-layout-grid)) > :where(.wp-block:not(.alignfull),p,h1,h2,h3,h4,h5,h6,ul,ol) { padding-right: var(--wp--style--root--padding-right); padding-left: var(--wp--style--root--padding-left); }\n\t\t\t.has-global-padding :where(.has-global-padding) > .alignfull:where(:not(.has-global-padding)) > :where(.wp-block:not(.alignfull),p,h1,h2,h3,h4,h5,h6,ul,ol) { padding-right: 0; padding-left: 0;`;\n\t}\n\n\truleset += '}';\n\n\tnodesWithStyles.forEach(\n\t\t( {\n\t\t\tselector,\n\t\t\tduotoneSelector,\n\t\t\tstyles,\n\t\t\tfallbackGapValue,\n\t\t\thasLayoutSupport,\n\t\t\tfeatureSelectors,\n\t\t\tstyleVariationSelectors,\n\t\t} ) => {\n\t\t\t// Process styles for block support features with custom feature level\n\t\t\t// CSS selectors set.\n\t\t\tif ( featureSelectors ) {\n\t\t\t\tconst featureDeclarations = getFeatureDeclarations(\n\t\t\t\t\tfeatureSelectors,\n\t\t\t\t\tstyles\n\t\t\t\t);\n\n\t\t\t\tObject.entries( featureDeclarations ).forEach(\n\t\t\t\t\t( [ cssSelector, declarations ] ) => {\n\t\t\t\t\t\tif ( declarations.length ) {\n\t\t\t\t\t\t\tconst rules = declarations.join( ';' );\n\t\t\t\t\t\t\truleset += `:where(${ cssSelector }){${ rules };}`;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif ( styleVariationSelectors ) {\n\t\t\t\tObject.entries( styleVariationSelectors ).forEach(\n\t\t\t\t\t( [ styleVariationName, styleVariationSelector ] ) => {\n\t\t\t\t\t\tconst styleVariations =\n\t\t\t\t\t\t\tstyles?.variations?.[ styleVariationName ];\n\t\t\t\t\t\tif ( styleVariations ) {\n\t\t\t\t\t\t\t// If the block uses any custom selectors for block support, add those first.\n\t\t\t\t\t\t\tif ( featureSelectors ) {\n\t\t\t\t\t\t\t\tconst featureDeclarations =\n\t\t\t\t\t\t\t\t\tgetFeatureDeclarations(\n\t\t\t\t\t\t\t\t\t\tfeatureSelectors,\n\t\t\t\t\t\t\t\t\t\tstyleVariations\n\t\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\tObject.entries( featureDeclarations ).forEach(\n\t\t\t\t\t\t\t\t\t( [ baseSelector, declarations ] ) => {\n\t\t\t\t\t\t\t\t\t\tif ( declarations.length ) {\n\t\t\t\t\t\t\t\t\t\t\tconst cssSelector =\n\t\t\t\t\t\t\t\t\t\t\t\tconcatFeatureVariationSelectorString(\n\t\t\t\t\t\t\t\t\t\t\t\t\tbaseSelector,\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyleVariationSelector\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\tconst rules =\n\t\t\t\t\t\t\t\t\t\t\t\tdeclarations.join( ';' );\n\t\t\t\t\t\t\t\t\t\t\truleset += `${ cssSelector }{${ rules };}`;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Otherwise add regular selectors.\n\t\t\t\t\t\t\tconst styleVariationDeclarations =\n\t\t\t\t\t\t\t\tgetStylesDeclarations(\n\t\t\t\t\t\t\t\t\tstyleVariations,\n\t\t\t\t\t\t\t\t\tstyleVariationSelector,\n\t\t\t\t\t\t\t\t\tuseRootPaddingAlign,\n\t\t\t\t\t\t\t\t\ttree\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tif ( styleVariationDeclarations.length ) {\n\t\t\t\t\t\t\t\truleset += `${ styleVariationSelector }{${ styleVariationDeclarations.join(\n\t\t\t\t\t\t\t\t\t';'\n\t\t\t\t\t\t\t\t) };}`;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// Process duotone styles.\n\t\t\tif ( duotoneSelector ) {\n\t\t\t\tconst duotoneStyles = {};\n\t\t\t\tif ( styles?.filter ) {\n\t\t\t\t\tduotoneStyles.filter = styles.filter;\n\t\t\t\t\tdelete styles.filter;\n\t\t\t\t}\n\t\t\t\tconst duotoneDeclarations =\n\t\t\t\t\tgetStylesDeclarations( duotoneStyles );\n\t\t\t\tif ( duotoneDeclarations.length ) {\n\t\t\t\t\truleset += `${ duotoneSelector }{${ duotoneDeclarations.join(\n\t\t\t\t\t\t';'\n\t\t\t\t\t) };}`;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Process blockGap and layout styles.\n\t\t\tif (\n\t\t\t\t! disableLayoutStyles &&\n\t\t\t\t( ROOT_BLOCK_SELECTOR === selector || hasLayoutSupport )\n\t\t\t) {\n\t\t\t\truleset += getLayoutStyles( {\n\t\t\t\t\tstyle: styles,\n\t\t\t\t\tselector,\n\t\t\t\t\thasBlockGapSupport,\n\t\t\t\t\thasFallbackGapSupport,\n\t\t\t\t\tfallbackGapValue,\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\t// Process the remaining block styles (they use either normal block class or __experimentalSelector).\n\t\t\tconst declarations = getStylesDeclarations(\n\t\t\t\tstyles,\n\t\t\t\tselector,\n\t\t\t\tuseRootPaddingAlign,\n\t\t\t\ttree,\n\t\t\t\tisTemplate\n\t\t\t);\n\t\t\tif ( declarations?.length ) {\n\t\t\t\truleset += `:where(${ selector }){${ declarations.join(\n\t\t\t\t\t';'\n\t\t\t\t) };}`;\n\t\t\t}\n\n\t\t\t// Check for pseudo selector in `styles` and handle separately.\n\t\t\tconst pseudoSelectorStyles = Object.entries( styles ).filter(\n\t\t\t\t( [ key ] ) => key.startsWith( ':' )\n\t\t\t);\n\n\t\t\tif ( pseudoSelectorStyles?.length ) {\n\t\t\t\tpseudoSelectorStyles.forEach(\n\t\t\t\t\t( [ pseudoKey, pseudoStyle ] ) => {\n\t\t\t\t\t\tconst pseudoDeclarations =\n\t\t\t\t\t\t\tgetStylesDeclarations( pseudoStyle );\n\n\t\t\t\t\t\tif ( ! pseudoDeclarations?.length ) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// `selector` maybe provided in a form\n\t\t\t\t\t\t// where block level selectors have sub element\n\t\t\t\t\t\t// selectors appended to them as a comma separated\n\t\t\t\t\t\t// string.\n\t\t\t\t\t\t// e.g. `h1 a,h2 a,h3 a,h4 a,h5 a,h6 a`;\n\t\t\t\t\t\t// Split and append pseudo selector to create\n\t\t\t\t\t\t// the proper rules to target the elements.\n\t\t\t\t\t\tconst _selector = selector\n\t\t\t\t\t\t\t.split( ',' )\n\t\t\t\t\t\t\t.map( ( sel ) => sel + pseudoKey )\n\t\t\t\t\t\t\t.join( ',' );\n\n\t\t\t\t\t\tconst pseudoRule = `${ _selector }{${ pseudoDeclarations.join(\n\t\t\t\t\t\t\t';'\n\t\t\t\t\t\t) };}`;\n\n\t\t\t\t\t\truleset += pseudoRule;\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t);\n\n\t/* Add alignment / layout styles */\n\truleset =\n\t\truleset +\n\t\t'.wp-site-blocks > .alignleft { float: left; margin-right: 2em; }';\n\truleset =\n\t\truleset +\n\t\t'.wp-site-blocks > .alignright { float: right; margin-left: 2em; }';\n\truleset =\n\t\truleset +\n\t\t'.wp-site-blocks > .aligncenter { justify-content: center; margin-left: auto; margin-right: auto; }';\n\n\tif ( hasBlockGapSupport ) {\n\t\t// Use fallback of `0.5em` just in case, however if there is blockGap support, there should nearly always be a real value.\n\t\tconst gapValue =\n\t\t\tgetGapCSSValue( tree?.styles?.spacing?.blockGap ) || '0.5em';\n\t\truleset =\n\t\t\truleset +\n\t\t\t`:where(.wp-site-blocks) > * { margin-block-start: ${ gapValue }; margin-block-end: 0; }`;\n\t\truleset =\n\t\t\truleset +\n\t\t\t':where(.wp-site-blocks) > :first-child:first-child { margin-block-start: 0; }';\n\t\truleset =\n\t\t\truleset +\n\t\t\t':where(.wp-site-blocks) > :last-child:last-child { margin-block-end: 0; }';\n\t}\n\n\tnodesWithSettings.forEach( ( { selector, presets } ) => {\n\t\tif (\n\t\t\tROOT_BLOCK_SELECTOR === selector ||\n\t\t\tROOT_CSS_PROPERTIES_SELECTOR === selector\n\t\t) {\n\t\t\t// Do not add extra specificity for top-level classes.\n\t\t\tselector = '';\n\t\t}\n\n\t\tconst classes = getPresetsClasses( selector, presets );\n\t\tif ( classes.length > 0 ) {\n\t\t\truleset += classes;\n\t\t}\n\t} );\n\n\treturn ruleset;\n};\n\nexport function toSvgFilters( tree, blockSelectors ) {\n\tconst nodesWithSettings = getNodesWithSettings( tree, blockSelectors );\n\treturn nodesWithSettings.flatMap( ( { presets } ) => {\n\t\treturn getPresetsSvgFilters( presets );\n\t} );\n}\n\nconst getSelectorsConfig = ( blockType, rootSelector ) => {\n\tif (\n\t\tblockType?.selectors &&\n\t\tObject.keys( blockType.selectors ).length > 0\n\t) {\n\t\treturn blockType.selectors;\n\t}\n\n\tconst config = { root: rootSelector };\n\tObject.entries( BLOCK_SUPPORT_FEATURE_LEVEL_SELECTORS ).forEach(\n\t\t( [ featureKey, featureName ] ) => {\n\t\t\tconst featureSelector = getBlockCSSSelector(\n\t\t\t\tblockType,\n\t\t\t\tfeatureKey\n\t\t\t);\n\n\t\t\tif ( featureSelector ) {\n\t\t\t\tconfig[ featureName ] = featureSelector;\n\t\t\t}\n\t\t}\n\t);\n\n\treturn config;\n};\n\nexport const getBlockSelectors = ( blockTypes, getBlockStyles ) => {\n\tconst result = {};\n\tblockTypes.forEach( ( blockType ) => {\n\t\tconst name = blockType.name;\n\t\tconst selector = getBlockCSSSelector( blockType );\n\t\tlet duotoneSelector = getBlockCSSSelector(\n\t\t\tblockType,\n\t\t\t'filter.duotone'\n\t\t);\n\n\t\t// Keep backwards compatibility for support.color.__experimentalDuotone.\n\t\tif ( ! duotoneSelector ) {\n\t\t\tconst rootSelector = getBlockCSSSelector( blockType );\n\t\t\tconst duotoneSupport = getBlockSupport(\n\t\t\t\tblockType,\n\t\t\t\t'color.__experimentalDuotone',\n\t\t\t\tfalse\n\t\t\t);\n\t\t\tduotoneSelector =\n\t\t\t\tduotoneSupport && scopeSelector( rootSelector, duotoneSupport );\n\t\t}\n\n\t\tconst hasLayoutSupport =\n\t\t\t!! blockType?.supports?.layout ||\n\t\t\t!! blockType?.supports?.__experimentalLayout;\n\t\tconst fallbackGapValue =\n\t\t\tblockType?.supports?.spacing?.blockGap?.__experimentalDefault;\n\n\t\tconst blockStyleVariations = getBlockStyles( name );\n\t\tconst styleVariationSelectors = {};\n\t\tif ( blockStyleVariations?.length ) {\n\t\t\tblockStyleVariations.forEach( ( variation ) => {\n\t\t\t\tconst styleVariationSelector = getBlockStyleVariationSelector(\n\t\t\t\t\tvariation.name,\n\t\t\t\t\tselector\n\t\t\t\t);\n\t\t\t\tstyleVariationSelectors[ variation.name ] =\n\t\t\t\t\tstyleVariationSelector;\n\t\t\t} );\n\t\t}\n\t\t// For each block support feature add any custom selectors.\n\t\tconst featureSelectors = getSelectorsConfig( blockType, selector );\n\n\t\tresult[ name ] = {\n\t\t\tduotoneSelector,\n\t\t\tfallbackGapValue,\n\t\t\tfeatureSelectors: Object.keys( featureSelectors ).length\n\t\t\t\t? featureSelectors\n\t\t\t\t: undefined,\n\t\t\thasLayoutSupport,\n\t\t\tname,\n\t\t\tselector,\n\t\t\tstyleVariationSelectors: Object.keys( styleVariationSelectors )\n\t\t\t\t.length\n\t\t\t\t? styleVariationSelectors\n\t\t\t\t: undefined,\n\t\t};\n\t} );\n\n\treturn result;\n};\n\n/**\n * If there is a separator block whose color is defined in theme.json via background,\n * update the separator color to the same value by using border color.\n *\n * @param {Object} config Theme.json configuration file object.\n * @return {Object} configTheme.json configuration file object updated.\n */\nfunction updateConfigWithSeparator( config ) {\n\tconst needsSeparatorStyleUpdate =\n\t\tconfig.styles?.blocks?.[ 'core/separator' ] &&\n\t\tconfig.styles?.blocks?.[ 'core/separator' ].color?.background &&\n\t\t! config.styles?.blocks?.[ 'core/separator' ].color?.text &&\n\t\t! config.styles?.blocks?.[ 'core/separator' ].border?.color;\n\tif ( needsSeparatorStyleUpdate ) {\n\t\treturn {\n\t\t\t...config,\n\t\t\tstyles: {\n\t\t\t\t...config.styles,\n\t\t\t\tblocks: {\n\t\t\t\t\t...config.styles.blocks,\n\t\t\t\t\t'core/separator': {\n\t\t\t\t\t\t...config.styles.blocks[ 'core/separator' ],\n\t\t\t\t\t\tcolor: {\n\t\t\t\t\t\t\t...config.styles.blocks[ 'core/separator' ].color,\n\t\t\t\t\t\t\ttext: config.styles?.blocks[ 'core/separator' ]\n\t\t\t\t\t\t\t\t.color.background,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\t}\n\treturn config;\n}\n\nexport function processCSSNesting( css, blockSelector ) {\n\tlet processedCSS = '';\n\n\t// Split CSS nested rules.\n\tconst parts = css.split( '&' );\n\tparts.forEach( ( part ) => {\n\t\tconst isRootCss = ! part.includes( '{' );\n\t\tif ( isRootCss ) {\n\t\t\t// If the part doesn't contain braces, it applies to the root level.\n\t\t\tprocessedCSS += `${ blockSelector }{${ part.trim() }}`;\n\t\t} else {\n\t\t\t// If the part contains braces, it's a nested CSS rule.\n\t\t\tconst splittedPart = part.replace( '}', '' ).split( '{' );\n\t\t\tif ( splittedPart.length !== 2 ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst [ nestedSelector, cssValue ] = splittedPart;\n\t\t\tconst combinedSelector = nestedSelector.startsWith( ' ' )\n\t\t\t\t? scopeSelector( blockSelector, nestedSelector )\n\t\t\t\t: appendToSelector( blockSelector, nestedSelector );\n\n\t\t\tprocessedCSS += `${ combinedSelector }{${ cssValue.trim() }}`;\n\t\t}\n\t} );\n\treturn processedCSS;\n}\n\n/**\n * Returns the global styles output using a global styles configuration.\n * If wishing to generate global styles and settings based on the\n * global styles config loaded in the editor context, use `useGlobalStylesOutput()`.\n * The use case for a custom config is to generate bespoke styles\n * and settings for previews, or other out-of-editor experiences.\n *\n * @param {Object} mergedConfig Global styles configuration.\n * @return {Array} Array of stylesheets and settings.\n */\nexport function useGlobalStylesOutputWithConfig( mergedConfig = {} ) {\n\tconst [ blockGap ] = useGlobalSetting( 'spacing.blockGap' );\n\tconst hasBlockGapSupport = blockGap !== null;\n\tconst hasFallbackGapSupport = ! hasBlockGapSupport; // This setting isn't useful yet: it exists as a placeholder for a future explicit fallback styles support.\n\tconst disableLayoutStyles = useSelect( ( select ) => {\n\t\tconst { getSettings } = select( blockEditorStore );\n\t\treturn !! getSettings().disableLayoutStyles;\n\t} );\n\n\tconst blockContext = useContext( BlockContext );\n\n\tconst isTemplate = blockContext?.templateSlug !== undefined;\n\n\tconst { getBlockStyles } = useSelect( blocksStore );\n\n\treturn useMemo( () => {\n\t\tif ( ! mergedConfig?.styles || ! mergedConfig?.settings ) {\n\t\t\treturn [];\n\t\t}\n\t\tconst updatedConfig = updateConfigWithSeparator( mergedConfig );\n\n\t\tconst blockSelectors = getBlockSelectors(\n\t\t\tgetBlockTypes(),\n\t\t\tgetBlockStyles\n\t\t);\n\n\t\tconst customProperties = toCustomProperties(\n\t\t\tupdatedConfig,\n\t\t\tblockSelectors\n\t\t);\n\n\t\tconst globalStyles = toStyles(\n\t\t\tupdatedConfig,\n\t\t\tblockSelectors,\n\t\t\thasBlockGapSupport,\n\t\t\thasFallbackGapSupport,\n\t\t\tdisableLayoutStyles,\n\t\t\tisTemplate\n\t\t);\n\t\tconst svgs = toSvgFilters( updatedConfig, blockSelectors );\n\n\t\tconst styles = [\n\t\t\t{\n\t\t\t\tcss: customProperties,\n\t\t\t\tisGlobalStyles: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tcss: globalStyles,\n\t\t\t\tisGlobalStyles: true,\n\t\t\t},\n\t\t\t// Load custom CSS in own stylesheet so that any invalid CSS entered in the input won't break all the global styles in the editor.\n\t\t\t{\n\t\t\t\tcss: updatedConfig.styles.css ?? '',\n\t\t\t\tisGlobalStyles: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tassets: svgs,\n\t\t\t\t__unstableType: 'svg',\n\t\t\t\tisGlobalStyles: true,\n\t\t\t},\n\t\t];\n\n\t\t// Loop through the blocks to check if there are custom CSS values.\n\t\t// If there are, get the block selector and push the selector together with\n\t\t// the CSS value to the 'stylesheets' array.\n\t\tgetBlockTypes().forEach( ( blockType ) => {\n\t\t\tif ( updatedConfig.styles.blocks[ blockType.name ]?.css ) {\n\t\t\t\tconst selector = blockSelectors[ blockType.name ].selector;\n\t\t\t\tstyles.push( {\n\t\t\t\t\tcss: processCSSNesting(\n\t\t\t\t\t\tupdatedConfig.styles.blocks[ blockType.name ]?.css,\n\t\t\t\t\t\tselector\n\t\t\t\t\t),\n\t\t\t\t\tisGlobalStyles: true,\n\t\t\t\t} );\n\t\t\t}\n\t\t} );\n\n\t\treturn [ styles, updatedConfig.settings ];\n\t}, [\n\t\thasBlockGapSupport,\n\t\thasFallbackGapSupport,\n\t\tmergedConfig,\n\t\tdisableLayoutStyles,\n\t\tisTemplate,\n\t\tgetBlockStyles,\n\t] );\n}\n\n/**\n * Returns the global styles output based on the current state of global styles config loaded in the editor context.\n *\n * @return {Array} Array of stylesheets and settings.\n */\nexport function useGlobalStylesOutput() {\n\tconst { merged: mergedConfig } = useContext( GlobalStylesContext );\n\treturn useGlobalStylesOutputWithConfig( mergedConfig );\n}\n","/**\n * WordPress dependencies\n */\nimport {\n\t__experimentalToolsPanel as ToolsPanel,\n\t__experimentalToolsPanelItem as ToolsPanelItem,\n\tToggleControl,\n} from '@wordpress/components';\nimport { __, _x } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { TOOLSPANEL_DROPDOWNMENU_PROPS } from './utils';\n\nexport function useHasImageSettingsPanel( name, value, inheritedValue ) {\n\t// Note: If lightbox `value` exists, that means it was\n\t// defined via the the Global Styles UI and will NOT\n\t// be a boolean value or contain the `allowEditing` property,\n\t// so we should show the settings panel in those cases.\n\treturn (\n\t\t( name === 'core/image' && inheritedValue?.lightbox?.allowEditing ) ||\n\t\t!! value?.lightbox\n\t);\n}\n\nexport default function ImageSettingsPanel( {\n\tonChange,\n\tvalue,\n\tinheritedValue,\n\tpanelId,\n} ) {\n\tconst resetLightbox = () => {\n\t\tonChange( undefined );\n\t};\n\n\tconst onChangeLightbox = ( newSetting ) => {\n\t\tonChange( {\n\t\t\tenabled: newSetting,\n\t\t} );\n\t};\n\n\tlet lightboxChecked = false;\n\n\tif ( inheritedValue?.lightbox?.enabled ) {\n\t\tlightboxChecked = inheritedValue.lightbox.enabled;\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<ToolsPanel\n\t\t\t\tlabel={ _x( 'Settings', 'Image settings' ) }\n\t\t\t\tresetAll={ resetLightbox }\n\t\t\t\tpanelId={ panelId }\n\t\t\t\tdropdownMenuProps={ TOOLSPANEL_DROPDOWNMENU_PROPS }\n\t\t\t>\n\t\t\t\t<ToolsPanelItem\n\t\t\t\t\t// We use the `userSettings` prop instead of `settings`, because `settings`\n\t\t\t\t\t// contains the core/theme values for the lightbox and we want to show the\n\t\t\t\t\t// \"RESET\" button ONLY when the user has explicitly set a value in the\n\t\t\t\t\t// Global Styles.\n\t\t\t\t\thasValue={ () => !! value?.lightbox }\n\t\t\t\t\tlabel={ __( 'Expand on click' ) }\n\t\t\t\t\tonDeselect={ resetLightbox }\n\t\t\t\t\tisShownByDefault\n\t\t\t\t\tpanelId={ panelId }\n\t\t\t\t>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\tlabel={ __( 'Expand on click' ) }\n\t\t\t\t\t\tchecked={ lightboxChecked }\n\t\t\t\t\t\tonChange={ onChangeLightbox }\n\t\t\t\t\t/>\n\t\t\t\t</ToolsPanelItem>\n\t\t\t</ToolsPanel>\n\t\t</>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport {\n\tTextareaControl,\n\tNotice,\n\t__experimentalVStack as VStack,\n} from '@wordpress/components';\nimport { useState } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { default as transformStyles } from '../../utils/transform-styles';\n\nexport default function AdvancedPanel( {\n\tvalue,\n\tonChange,\n\tinheritedValue = value,\n} ) {\n\t// Custom CSS\n\tconst [ cssError, setCSSError ] = useState( null );\n\tconst customCSS = inheritedValue?.css;\n\tfunction handleOnChange( newValue ) {\n\t\tonChange( {\n\t\t\t...value,\n\t\t\tcss: newValue,\n\t\t} );\n\t\tif ( cssError ) {\n\t\t\t// Check if the new value is valid CSS, and pass a wrapping selector\n\t\t\t// to ensure that `transformStyles` validates the CSS. Note that the\n\t\t\t// wrapping selector here is not used in the actual output of any styles.\n\t\t\tconst [ transformed ] = transformStyles(\n\t\t\t\t[ { css: newValue } ],\n\t\t\t\t'.for-validation-only'\n\t\t\t);\n\t\t\tif ( transformed ) {\n\t\t\t\tsetCSSError( null );\n\t\t\t}\n\t\t}\n\t}\n\tfunction handleOnBlur( event ) {\n\t\tif ( ! event?.target?.value ) {\n\t\t\tsetCSSError( null );\n\t\t\treturn;\n\t\t}\n\n\t\t// Check if the new value is valid CSS, and pass a wrapping selector\n\t\t// to ensure that `transformStyles` validates the CSS. Note that the\n\t\t// wrapping selector here is not used in the actual output of any styles.\n\t\tconst [ transformed ] = transformStyles(\n\t\t\t[ { css: event.target.value } ],\n\t\t\t'.for-validation-only'\n\t\t);\n\n\t\tsetCSSError(\n\t\t\ttransformed === null\n\t\t\t\t? __( 'There is an error with your CSS structure.' )\n\t\t\t\t: null\n\t\t);\n\t}\n\n\treturn (\n\t\t<VStack spacing={ 3 }>\n\t\t\t{ cssError && (\n\t\t\t\t<Notice status=\"error\" onRemove={ () => setCSSError( null ) }>\n\t\t\t\t\t{ cssError }\n\t\t\t\t</Notice>\n\t\t\t) }\n\t\t\t<TextareaControl\n\t\t\t\tlabel={ __( 'Additional CSS' ) }\n\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\tvalue={ customCSS }\n\t\t\t\tonChange={ ( newValue ) => handleOnChange( newValue ) }\n\t\t\t\tonBlur={ handleOnBlur }\n\t\t\t\tclassName=\"block-editor-global-styles-advanced-panel__custom-css-input\"\n\t\t\t\tspellCheck={ false }\n\t\t\t/>\n\t\t</VStack>\n\t);\n}\n","/**\n * External dependencies\n */\nimport memoize from 'memize';\n\n/**\n * WordPress dependencies\n */\nimport { __, _n, sprintf } from '@wordpress/i18n';\nimport { getBlockTypes } from '@wordpress/blocks';\n\nconst globalStylesChangesCache = new Map();\nconst EMPTY_ARRAY = [];\nconst translationMap = {\n\tcaption: __( 'Caption' ),\n\tlink: __( 'Link' ),\n\tbutton: __( 'Button' ),\n\theading: __( 'Heading' ),\n\th1: __( 'H1' ),\n\th2: __( 'H2' ),\n\th3: __( 'H3' ),\n\th4: __( 'H4' ),\n\th5: __( 'H5' ),\n\th6: __( 'H6' ),\n\t'settings.color': __( 'Color' ),\n\t'settings.typography': __( 'Typography' ),\n\t'styles.color': __( 'Colors' ),\n\t'styles.spacing': __( 'Spacing' ),\n\t'styles.background': __( 'Background' ),\n\t'styles.typography': __( 'Typography' ),\n};\nconst getBlockNames = memoize( () =>\n\tgetBlockTypes().reduce( ( accumulator, { name, title } ) => {\n\t\taccumulator[ name ] = title;\n\t\treturn accumulator;\n\t}, {} )\n);\nconst isObject = ( obj ) => obj !== null && typeof obj === 'object';\n\n/**\n * Get the translation for a given global styles key.\n * @param {string} key A key representing a path to a global style property or setting.\n * @return {string|undefined}                A translated key or undefined if no translation exists.\n */\nfunction getTranslation( key ) {\n\tif ( translationMap[ key ] ) {\n\t\treturn translationMap[ key ];\n\t}\n\n\tconst keyArray = key.split( '.' );\n\n\tif ( keyArray?.[ 0 ] === 'blocks' ) {\n\t\tconst blockName = getBlockNames()?.[ keyArray[ 1 ] ];\n\t\treturn blockName || keyArray[ 1 ];\n\t}\n\n\tif ( keyArray?.[ 0 ] === 'elements' ) {\n\t\treturn translationMap[ keyArray[ 1 ] ] || keyArray[ 1 ];\n\t}\n\n\treturn undefined;\n}\n\n/**\n * A deep comparison of two objects, optimized for comparing global styles.\n * @param {Object} changedObject  The changed object to compare.\n * @param {Object} originalObject The original object to compare against.\n * @param {string} parentPath     A key/value pair object of block names and their rendered titles.\n * @return {string[]}             An array of paths whose values have changed.\n */\nfunction deepCompare( changedObject, originalObject, parentPath = '' ) {\n\t// We have two non-object values to compare.\n\tif ( ! isObject( changedObject ) && ! isObject( originalObject ) ) {\n\t\t/*\n\t\t * Only return a path if the value has changed.\n\t\t * And then only the path name up to 2 levels deep.\n\t\t */\n\t\treturn changedObject !== originalObject\n\t\t\t? parentPath.split( '.' ).slice( 0, 2 ).join( '.' )\n\t\t\t: undefined;\n\t}\n\n\t// Enable comparison when an object doesn't have a corresponding property to compare.\n\tchangedObject = isObject( changedObject ) ? changedObject : {};\n\toriginalObject = isObject( originalObject ) ? originalObject : {};\n\n\tconst allKeys = new Set( [\n\t\t...Object.keys( changedObject ),\n\t\t...Object.keys( originalObject ),\n\t] );\n\n\tlet diffs = [];\n\tfor ( const key of allKeys ) {\n\t\tconst path = parentPath ? parentPath + '.' + key : key;\n\t\tconst changedPath = deepCompare(\n\t\t\tchangedObject[ key ],\n\t\t\toriginalObject[ key ],\n\t\t\tpath\n\t\t);\n\t\tif ( changedPath ) {\n\t\t\tdiffs = diffs.concat( changedPath );\n\t\t}\n\t}\n\treturn diffs;\n}\n\n/**\n * Returns an array of translated summarized global styles changes.\n * Results are cached using a Map() key of `JSON.stringify( { next, previous } )`.\n *\n * @param {Object} next     The changed object to compare.\n * @param {Object} previous The original object to compare against.\n * @return {Array[]}        A 2-dimensional array of tuples: [ \"group\", \"translated change\" ].\n */\nexport function getGlobalStylesChangelist( next, previous ) {\n\tconst cacheKey = JSON.stringify( { next, previous } );\n\n\tif ( globalStylesChangesCache.has( cacheKey ) ) {\n\t\treturn globalStylesChangesCache.get( cacheKey );\n\t}\n\n\t/*\n\t * Compare the two changesets with normalized keys.\n\t * The order of these keys determines the order in which\n\t * they'll appear in the results.\n\t */\n\tconst changedValueTree = deepCompare(\n\t\t{\n\t\t\tstyles: {\n\t\t\t\tbackground: next?.styles?.background,\n\t\t\t\tcolor: next?.styles?.color,\n\t\t\t\ttypography: next?.styles?.typography,\n\t\t\t\tspacing: next?.styles?.spacing,\n\t\t\t},\n\t\t\tblocks: next?.styles?.blocks,\n\t\t\telements: next?.styles?.elements,\n\t\t\tsettings: next?.settings,\n\t\t},\n\t\t{\n\t\t\tstyles: {\n\t\t\t\tbackground: previous?.styles?.background,\n\t\t\t\tcolor: previous?.styles?.color,\n\t\t\t\ttypography: previous?.styles?.typography,\n\t\t\t\tspacing: previous?.styles?.spacing,\n\t\t\t},\n\t\t\tblocks: previous?.styles?.blocks,\n\t\t\telements: previous?.styles?.elements,\n\t\t\tsettings: previous?.settings,\n\t\t}\n\t);\n\n\tif ( ! changedValueTree.length ) {\n\t\tglobalStylesChangesCache.set( cacheKey, EMPTY_ARRAY );\n\t\treturn EMPTY_ARRAY;\n\t}\n\n\t// Remove duplicate results.\n\tconst result = [ ...new Set( changedValueTree ) ]\n\t\t/*\n\t\t * Translate the keys.\n\t\t * Remove empty translations.\n\t\t */\n\t\t.reduce( ( acc, curr ) => {\n\t\t\tconst translation = getTranslation( curr );\n\t\t\tif ( translation ) {\n\t\t\t\tacc.push( [ curr.split( '.' )[ 0 ], translation ] );\n\t\t\t}\n\t\t\treturn acc;\n\t\t}, [] );\n\n\tglobalStylesChangesCache.set( cacheKey, result );\n\n\treturn result;\n}\n\n/**\n * From a getGlobalStylesChangelist() result, returns an array of translated global styles changes, grouped by type.\n * The types are 'blocks', 'elements', 'settings', and 'styles'.\n *\n * @param {Object}              next     The changed object to compare.\n * @param {Object}              previous The original object to compare against.\n * @param {{maxResults:number}} options  Options. maxResults: results to return before truncating.\n * @return {string[]}                    An array of translated changes.\n */\nexport default function getGlobalStylesChanges( next, previous, options = {} ) {\n\tlet changeList = getGlobalStylesChangelist( next, previous );\n\tconst changesLength = changeList.length;\n\tconst { maxResults } = options;\n\n\tif ( changesLength ) {\n\t\t// Truncate to `n` results if necessary.\n\t\tif ( !! maxResults && changesLength > maxResults ) {\n\t\t\tchangeList = changeList.slice( 0, maxResults );\n\t\t}\n\t\treturn Object.entries(\n\t\t\tchangeList.reduce( ( acc, curr ) => {\n\t\t\t\tconst group = acc[ curr[ 0 ] ] || [];\n\t\t\t\tif ( ! group.includes( curr[ 1 ] ) ) {\n\t\t\t\t\tacc[ curr[ 0 ] ] = [ ...group, curr[ 1 ] ];\n\t\t\t\t}\n\t\t\t\treturn acc;\n\t\t\t}, {} )\n\t\t).map( ( [ key, changeValues ] ) => {\n\t\t\tconst changeValuesLength = changeValues.length;\n\t\t\tconst joinedChangesValue = changeValues.join( __( ', ' ) );\n\t\t\tswitch ( key ) {\n\t\t\t\tcase 'blocks': {\n\t\t\t\t\treturn sprintf(\n\t\t\t\t\t\t// translators: %s: a list of block names separated by a comma.\n\t\t\t\t\t\t_n( '%s block.', '%s blocks.', changeValuesLength ),\n\t\t\t\t\t\tjoinedChangesValue\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tcase 'elements': {\n\t\t\t\t\treturn sprintf(\n\t\t\t\t\t\t// translators: %s: a list of element names separated by a comma.\n\t\t\t\t\t\t_n( '%s element.', '%s elements.', changeValuesLength ),\n\t\t\t\t\t\tjoinedChangesValue\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tcase 'settings': {\n\t\t\t\t\treturn sprintf(\n\t\t\t\t\t\t// translators: %s: a list of theme.json setting labels separated by a comma.\n\t\t\t\t\t\t__( '%s settings.' ),\n\t\t\t\t\t\tjoinedChangesValue\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tcase 'styles': {\n\t\t\t\t\treturn sprintf(\n\t\t\t\t\t\t// translators: %s: a list of theme.json top-level styles labels separated by a comma.\n\t\t\t\t\t\t__( '%s styles.' ),\n\t\t\t\t\t\tjoinedChangesValue\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tdefault: {\n\t\t\t\t\treturn sprintf(\n\t\t\t\t\t\t// translators: %s: a list of global styles changes separated by a comma.\n\t\t\t\t\t\t__( '%s.' ),\n\t\t\t\t\t\tjoinedChangesValue\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n\n\treturn EMPTY_ARRAY;\n}\n","/**\n * Memize options object.\n *\n * @typedef MemizeOptions\n *\n * @property {number} [maxSize] Maximum size of the cache.\n */\n\n/**\n * Internal cache entry.\n *\n * @typedef MemizeCacheNode\n *\n * @property {?MemizeCacheNode|undefined} [prev] Previous node.\n * @property {?MemizeCacheNode|undefined} [next] Next node.\n * @property {Array<*>}                   args   Function arguments for cache\n *                                               entry.\n * @property {*}                          val    Function result.\n */\n\n/**\n * Properties of the enhanced function for controlling cache.\n *\n * @typedef MemizeMemoizedFunction\n *\n * @property {()=>void} clear Clear the cache.\n */\n\n/**\n * Accepts a function to be memoized, and returns a new memoized function, with\n * optional options.\n *\n * @template {(...args: any[]) => any} F\n *\n * @param {F}             fn        Function to memoize.\n * @param {MemizeOptions} [options] Options object.\n *\n * @return {((...args: Parameters<F>) => ReturnType<F>) & MemizeMemoizedFunction} Memoized function.\n */\nfunction memize(fn, options) {\n\tvar size = 0;\n\n\t/** @type {?MemizeCacheNode|undefined} */\n\tvar head;\n\n\t/** @type {?MemizeCacheNode|undefined} */\n\tvar tail;\n\n\toptions = options || {};\n\n\tfunction memoized(/* ...args */) {\n\t\tvar node = head,\n\t\t\tlen = arguments.length,\n\t\t\targs,\n\t\t\ti;\n\n\t\tsearchCache: while (node) {\n\t\t\t// Perform a shallow equality test to confirm that whether the node\n\t\t\t// under test is a candidate for the arguments passed. Two arrays\n\t\t\t// are shallowly equal if their length matches and each entry is\n\t\t\t// strictly equal between the two sets. Avoid abstracting to a\n\t\t\t// function which could incur an arguments leaking deoptimization.\n\n\t\t\t// Check whether node arguments match arguments length\n\t\t\tif (node.args.length !== arguments.length) {\n\t\t\t\tnode = node.next;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Check whether node arguments match arguments values\n\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\tif (node.args[i] !== arguments[i]) {\n\t\t\t\t\tnode = node.next;\n\t\t\t\t\tcontinue searchCache;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// At this point we can assume we've found a match\n\n\t\t\t// Surface matched node to head if not already\n\t\t\tif (node !== head) {\n\t\t\t\t// As tail, shift to previous. Must only shift if not also\n\t\t\t\t// head, since if both head and tail, there is no previous.\n\t\t\t\tif (node === tail) {\n\t\t\t\t\ttail = node.prev;\n\t\t\t\t}\n\n\t\t\t\t// Adjust siblings to point to each other. If node was tail,\n\t\t\t\t// this also handles new tail's empty `next` assignment.\n\t\t\t\t/** @type {MemizeCacheNode} */ (node.prev).next = node.next;\n\t\t\t\tif (node.next) {\n\t\t\t\t\tnode.next.prev = node.prev;\n\t\t\t\t}\n\n\t\t\t\tnode.next = head;\n\t\t\t\tnode.prev = null;\n\t\t\t\t/** @type {MemizeCacheNode} */ (head).prev = node;\n\t\t\t\thead = node;\n\t\t\t}\n\n\t\t\t// Return immediately\n\t\t\treturn node.val;\n\t\t}\n\n\t\t// No cached value found. Continue to insertion phase:\n\n\t\t// Create a copy of arguments (avoid leaking deoptimization)\n\t\targs = new Array(len);\n\t\tfor (i = 0; i < len; i++) {\n\t\t\targs[i] = arguments[i];\n\t\t}\n\n\t\tnode = {\n\t\t\targs: args,\n\n\t\t\t// Generate the result from original function\n\t\t\tval: fn.apply(null, args),\n\t\t};\n\n\t\t// Don't need to check whether node is already head, since it would\n\t\t// have been returned above already if it was\n\n\t\t// Shift existing head down list\n\t\tif (head) {\n\t\t\thead.prev = node;\n\t\t\tnode.next = head;\n\t\t} else {\n\t\t\t// If no head, follows that there's no tail (at initial or reset)\n\t\t\ttail = node;\n\t\t}\n\n\t\t// Trim tail if we're reached max size and are pending cache insertion\n\t\tif (size === /** @type {MemizeOptions} */ (options).maxSize) {\n\t\t\ttail = /** @type {MemizeCacheNode} */ (tail).prev;\n\t\t\t/** @type {MemizeCacheNode} */ (tail).next = null;\n\t\t} else {\n\t\t\tsize++;\n\t\t}\n\n\t\thead = node;\n\n\t\treturn node.val;\n\t}\n\n\tmemoized.clear = function () {\n\t\thead = null;\n\t\ttail = null;\n\t\tsize = 0;\n\t};\n\n\t// Ignore reason: There's not a clear solution to create an intersection of\n\t// the function with additional properties, where the goal is to retain the\n\t// function signature of the incoming argument and add control properties\n\t// on the return value.\n\n\t// @ts-ignore\n\treturn memoized;\n}\n\nexport { memize as default };\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { RawHTML, StrictMode, Fragment } from '@wordpress/element';\r\nimport {\r\n\tgetSaveElement,\r\n\t__unstableGetBlockProps as getBlockProps,\r\n} from '@wordpress/blocks';\r\nimport { RichTextData } from '@wordpress/rich-text';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport InnerBlocks from '../inner-blocks';\r\nimport { Content } from './content';\r\n\r\n/*\r\n * This function is similar to `@wordpress/element`'s `renderToString` function,\r\n * except that it does not render the elements to a string, but instead collects\r\n * the values of all rich text `Content` elements.\r\n */\r\nfunction addValuesForElement( element, values, innerBlocks ) {\r\n\tif ( null === element || undefined === element || false === element ) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tif ( Array.isArray( element ) ) {\r\n\t\treturn addValuesForElements( element, values, innerBlocks );\r\n\t}\r\n\r\n\tswitch ( typeof element ) {\r\n\t\tcase 'string':\r\n\t\tcase 'number':\r\n\t\t\treturn;\r\n\t}\r\n\r\n\tconst { type, props } = element;\r\n\r\n\tswitch ( type ) {\r\n\t\tcase StrictMode:\r\n\t\tcase Fragment:\r\n\t\t\treturn addValuesForElements( props.children, values, innerBlocks );\r\n\t\tcase RawHTML:\r\n\t\t\treturn;\r\n\t\tcase InnerBlocks.Content:\r\n\t\t\treturn addValuesForBlocks( values, innerBlocks );\r\n\t\tcase Content:\r\n\t\t\tvalues.push( props.value );\r\n\t\t\treturn;\r\n\t}\r\n\r\n\tswitch ( typeof type ) {\r\n\t\tcase 'string':\r\n\t\t\tif ( typeof props.children !== 'undefined' ) {\r\n\t\t\t\treturn addValuesForElements(\r\n\t\t\t\t\tprops.children,\r\n\t\t\t\t\tvalues,\r\n\t\t\t\t\tinnerBlocks\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\tcase 'function':\r\n\t\t\tconst el =\r\n\t\t\t\ttype.prototype && typeof type.prototype.render === 'function'\r\n\t\t\t\t\t? new type( props ).render()\r\n\t\t\t\t\t: type( props );\r\n\t\t\treturn addValuesForElement( el, values, innerBlocks );\r\n\t}\r\n}\r\n\r\nfunction addValuesForElements( children, ...args ) {\r\n\tchildren = Array.isArray( children ) ? children : [ children ];\r\n\r\n\tfor ( let i = 0; i < children.length; i++ ) {\r\n\t\taddValuesForElement( children[ i ], ...args );\r\n\t}\r\n}\r\n\r\nfunction addValuesForBlocks( values, blocks ) {\r\n\tfor ( let i = 0; i < blocks.length; i++ ) {\r\n\t\tconst { name, attributes, innerBlocks } = blocks[ i ];\r\n\t\tconst saveElement = getSaveElement(\r\n\t\t\tname,\r\n\t\t\tattributes,\r\n\t\t\t// Instead of letting save elements use `useInnerBlocksProps.save`,\r\n\t\t\t// force them to use InnerBlocks.Content instead so we can intercept\r\n\t\t\t// a single component.\r\n\t\t\t<InnerBlocks.Content />\r\n\t\t);\r\n\t\taddValuesForElement( saveElement, values, innerBlocks );\r\n\t}\r\n}\r\n\r\nexport function getRichTextValues( blocks = [] ) {\r\n\tgetBlockProps.skipFilters = true;\r\n\tconst values = [];\r\n\taddValuesForBlocks( values, blocks );\r\n\tgetBlockProps.skipFilters = false;\r\n\treturn values.map( ( value ) =>\r\n\t\tvalue instanceof RichTextData\r\n\t\t\t? value\r\n\t\t\t: RichTextData.fromHTMLString( value )\r\n\t);\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\t__experimentalToolsPanelItem as ToolsPanelItem,\r\n\t__experimentalToggleGroupControl as ToggleGroupControl,\r\n\t__experimentalToggleGroupControlOption as ToggleGroupControlOption,\r\n} from '@wordpress/components';\r\nimport { useMemo } from '@wordpress/element';\r\nimport { __, _x } from '@wordpress/i18n';\r\n\r\n/**\r\n * @typedef {import('@wordpress/components/build-types/select-control/types').SelectControlProps} SelectControlProps\r\n */\r\n\r\n/**\r\n * The descriptions are purposely made generic as object-fit could be used for\r\n * any replaced element. Provide your own set of options if you need different\r\n * help text or labels.\r\n *\r\n * @see https://developer.mozilla.org/en-US/docs/Web/CSS/Replaced_element\r\n *\r\n * @type {SelectControlProps[]}\r\n */\r\nconst DEFAULT_SCALE_OPTIONS = [\r\n\t{\r\n\t\tvalue: 'fill',\r\n\t\tlabel: _x( 'Fill', 'Scale option for dimensions control' ),\r\n\t\thelp: __( 'Fill the space by stretching the content.' ),\r\n\t},\r\n\t{\r\n\t\tvalue: 'contain',\r\n\t\tlabel: _x( 'Contain', 'Scale option for dimensions control' ),\r\n\t\thelp: __( 'Fit the content to the space without clipping.' ),\r\n\t},\r\n\t{\r\n\t\tvalue: 'cover',\r\n\t\tlabel: _x( 'Cover', 'Scale option for dimensions control' ),\r\n\t\thelp: __( \"Fill the space by clipping what doesn't fit.\" ),\r\n\t},\r\n\t{\r\n\t\tvalue: 'none',\r\n\t\tlabel: _x( 'None', 'Scale option for dimensions control' ),\r\n\t\thelp: __(\r\n\t\t\t'Do not adjust the sizing of the content. Content that is too large will be clipped, and content that is too small will have additional padding.'\r\n\t\t),\r\n\t},\r\n\t{\r\n\t\tvalue: 'scale-down',\r\n\t\tlabel: _x( 'Scale down', 'Scale option for dimensions control' ),\r\n\t\thelp: __(\r\n\t\t\t'Scale down the content to fit the space if it is too big. Content that is too small will have additional padding.'\r\n\t\t),\r\n\t},\r\n];\r\n\r\n/**\r\n * @callback ScaleToolPropsOnChange\r\n * @param {string} nextValue New scale value.\r\n * @return {void}\r\n */\r\n\r\n/**\r\n * @typedef {Object} ScaleToolProps\r\n * @property {string}                 [panelId]               ID of the panel that contains the controls.\r\n * @property {string}                 [value]                 Current scale value.\r\n * @property {ScaleToolPropsOnChange} [onChange]              Callback to update the scale value.\r\n * @property {SelectControlProps[]}   [options]               Scale options.\r\n * @property {string}                 [defaultValue]          Default scale value.\r\n * @property {boolean}                [showControl=true]      Whether to show the control.\r\n * @property {boolean}                [isShownByDefault=true] Whether the tool panel is shown by default.\r\n */\r\n\r\n/**\r\n * A tool to select the CSS object-fit property for the image.\r\n *\r\n * @param {ScaleToolProps} props\r\n *\r\n * @return {import('react').ReactElement} The scale tool.\r\n */\r\nexport default function ScaleTool( {\r\n\tpanelId,\r\n\tvalue,\r\n\tonChange,\r\n\toptions = DEFAULT_SCALE_OPTIONS,\r\n\tdefaultValue = DEFAULT_SCALE_OPTIONS[ 0 ].value,\r\n\tisShownByDefault = true,\r\n} ) {\r\n\t// Match the CSS default so if the value is used directly in CSS it will look correct in the control.\r\n\tconst displayValue = value ?? 'fill';\r\n\r\n\tconst scaleHelp = useMemo( () => {\r\n\t\treturn options.reduce( ( acc, option ) => {\r\n\t\t\tacc[ option.value ] = option.help;\r\n\t\t\treturn acc;\r\n\t\t}, {} );\r\n\t}, [ options ] );\r\n\r\n\treturn (\r\n\t\t<ToolsPanelItem\r\n\t\t\tlabel={ __( 'Scale' ) }\r\n\t\t\tisShownByDefault={ isShownByDefault }\r\n\t\t\thasValue={ () => displayValue !== defaultValue }\r\n\t\t\tonDeselect={ () => onChange( defaultValue ) }\r\n\t\t\tpanelId={ panelId }\r\n\t\t>\r\n\t\t\t<ToggleGroupControl\r\n\t\t\t\tlabel={ __( 'Scale' ) }\r\n\t\t\t\tisBlock\r\n\t\t\t\thelp={ scaleHelp[ displayValue ] }\r\n\t\t\t\tvalue={ displayValue }\r\n\t\t\t\tonChange={ onChange }\r\n\t\t\t\tsize={ '__unstable-large' }\r\n\t\t\t>\r\n\t\t\t\t{ options.map( ( option ) => (\r\n\t\t\t\t\t<ToggleGroupControlOption\r\n\t\t\t\t\t\tkey={ option.value }\r\n\t\t\t\t\t\t{ ...option }\r\n\t\t\t\t\t/>\r\n\t\t\t\t) ) }\r\n\t\t\t</ToggleGroupControl>\r\n\t\t</ToolsPanelItem>\r\n\t);\r\n}\r\n","export default function _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}","function memoize(fn) {\n  var cache = Object.create(null);\n  return function (arg) {\n    if (cache[arg] === undefined) cache[arg] = fn(arg);\n    return cache[arg];\n  };\n}\n\nexport { memoize as default };\n","import memoize from '@emotion/memoize';\n\nvar reactPropsRegex = /^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/; // https://esbench.com/bench/5bfee68a4cd7e6009ef61d23\n\nvar isPropValid = /* #__PURE__ */memoize(function (prop) {\n  return reactPropsRegex.test(prop) || prop.charCodeAt(0) === 111\n  /* o */\n  && prop.charCodeAt(1) === 110\n  /* n */\n  && prop.charCodeAt(2) < 91;\n}\n/* Z+1 */\n);\n\nexport { isPropValid as default };\n","/*\n\nBased off glamor's StyleSheet, thanks Sunil \n\nhigh performance StyleSheet for css-in-js systems\n\n- uses multiple style tags behind the scenes for millions of rules\n- uses `insertRule` for appending in production for *much* faster performance\n\n// usage\n\nimport { StyleSheet } from '@emotion/sheet'\n\nlet styleSheet = new StyleSheet({ key: '', container: document.head })\n\nstyleSheet.insert('#box { border: 1px solid red; }')\n- appends a css rule into the stylesheet\n\nstyleSheet.flush()\n- empties the stylesheet of all its contents\n\n*/\n// $FlowFixMe\nfunction sheetForTag(tag) {\n  if (tag.sheet) {\n    // $FlowFixMe\n    return tag.sheet;\n  } // this weirdness brought to you by firefox\n\n  /* istanbul ignore next */\n\n\n  for (var i = 0; i < document.styleSheets.length; i++) {\n    if (document.styleSheets[i].ownerNode === tag) {\n      // $FlowFixMe\n      return document.styleSheets[i];\n    }\n  }\n}\n\nfunction createStyleElement(options) {\n  var tag = document.createElement('style');\n  tag.setAttribute('data-emotion', options.key);\n\n  if (options.nonce !== undefined) {\n    tag.setAttribute('nonce', options.nonce);\n  }\n\n  tag.appendChild(document.createTextNode(''));\n  tag.setAttribute('data-s', '');\n  return tag;\n}\n\nvar StyleSheet = /*#__PURE__*/function () {\n  function StyleSheet(options) {\n    var _this = this;\n\n    this._insertTag = function (tag) {\n      var before;\n\n      if (_this.tags.length === 0) {\n        if (_this.insertionPoint) {\n          before = _this.insertionPoint.nextSibling;\n        } else if (_this.prepend) {\n          before = _this.container.firstChild;\n        } else {\n          before = _this.before;\n        }\n      } else {\n        before = _this.tags[_this.tags.length - 1].nextSibling;\n      }\n\n      _this.container.insertBefore(tag, before);\n\n      _this.tags.push(tag);\n    };\n\n    this.isSpeedy = options.speedy === undefined ? process.env.NODE_ENV === 'production' : options.speedy;\n    this.tags = [];\n    this.ctr = 0;\n    this.nonce = options.nonce; // key is the value of the data-emotion attribute, it's used to identify different sheets\n\n    this.key = options.key;\n    this.container = options.container;\n    this.prepend = options.prepend;\n    this.insertionPoint = options.insertionPoint;\n    this.before = null;\n  }\n\n  var _proto = StyleSheet.prototype;\n\n  _proto.hydrate = function hydrate(nodes) {\n    nodes.forEach(this._insertTag);\n  };\n\n  _proto.insert = function insert(rule) {\n    // the max length is how many rules we have per style tag, it's 65000 in speedy mode\n    // it's 1 in dev because we insert source maps that map a single rule to a location\n    // and you can only have one source map per style tag\n    if (this.ctr % (this.isSpeedy ? 65000 : 1) === 0) {\n      this._insertTag(createStyleElement(this));\n    }\n\n    var tag = this.tags[this.tags.length - 1];\n\n    if (process.env.NODE_ENV !== 'production') {\n      var isImportRule = rule.charCodeAt(0) === 64 && rule.charCodeAt(1) === 105;\n\n      if (isImportRule && this._alreadyInsertedOrderInsensitiveRule) {\n        // this would only cause problem in speedy mode\n        // but we don't want enabling speedy to affect the observable behavior\n        // so we report this error at all times\n        console.error(\"You're attempting to insert the following rule:\\n\" + rule + '\\n\\n`@import` rules must be before all other types of rules in a stylesheet but other rules have already been inserted. Please ensure that `@import` rules are before all other rules.');\n      }\n      this._alreadyInsertedOrderInsensitiveRule = this._alreadyInsertedOrderInsensitiveRule || !isImportRule;\n    }\n\n    if (this.isSpeedy) {\n      var sheet = sheetForTag(tag);\n\n      try {\n        // this is the ultrafast version, works across browsers\n        // the big drawback is that the css won't be editable in devtools\n        sheet.insertRule(rule, sheet.cssRules.length);\n      } catch (e) {\n        if (process.env.NODE_ENV !== 'production' && !/:(-moz-placeholder|-moz-focus-inner|-moz-focusring|-ms-input-placeholder|-moz-read-write|-moz-read-only|-ms-clear){/.test(rule)) {\n          console.error(\"There was a problem inserting the following rule: \\\"\" + rule + \"\\\"\", e);\n        }\n      }\n    } else {\n      tag.appendChild(document.createTextNode(rule));\n    }\n\n    this.ctr++;\n  };\n\n  _proto.flush = function flush() {\n    // $FlowFixMe\n    this.tags.forEach(function (tag) {\n      return tag.parentNode && tag.parentNode.removeChild(tag);\n    });\n    this.tags = [];\n    this.ctr = 0;\n\n    if (process.env.NODE_ENV !== 'production') {\n      this._alreadyInsertedOrderInsensitiveRule = false;\n    }\n  };\n\n  return StyleSheet;\n}();\n\nexport { StyleSheet };\n","/**\n * @param {number}\n * @return {number}\n */\nexport var abs = Math.abs\n\n/**\n * @param {number}\n * @return {string}\n */\nexport var from = String.fromCharCode\n\n/**\n * @param {object}\n * @return {object}\n */\nexport var assign = Object.assign\n\n/**\n * @param {string} value\n * @param {number} length\n * @return {number}\n */\nexport function hash (value, length) {\n\treturn (((((((length << 2) ^ charat(value, 0)) << 2) ^ charat(value, 1)) << 2) ^ charat(value, 2)) << 2) ^ charat(value, 3)\n}\n\n/**\n * @param {string} value\n * @return {string}\n */\nexport function trim (value) {\n\treturn value.trim()\n}\n\n/**\n * @param {string} value\n * @param {RegExp} pattern\n * @return {string?}\n */\nexport function match (value, pattern) {\n\treturn (value = pattern.exec(value)) ? value[0] : value\n}\n\n/**\n * @param {string} value\n * @param {(string|RegExp)} pattern\n * @param {string} replacement\n * @return {string}\n */\nexport function replace (value, pattern, replacement) {\n\treturn value.replace(pattern, replacement)\n}\n\n/**\n * @param {string} value\n * @param {string} search\n * @return {number}\n */\nexport function indexof (value, search) {\n\treturn value.indexOf(search)\n}\n\n/**\n * @param {string} value\n * @param {number} index\n * @return {number}\n */\nexport function charat (value, index) {\n\treturn value.charCodeAt(index) | 0\n}\n\n/**\n * @param {string} value\n * @param {number} begin\n * @param {number} end\n * @return {string}\n */\nexport function substr (value, begin, end) {\n\treturn value.slice(begin, end)\n}\n\n/**\n * @param {string} value\n * @return {number}\n */\nexport function strlen (value) {\n\treturn value.length\n}\n\n/**\n * @param {any[]} value\n * @return {number}\n */\nexport function sizeof (value) {\n\treturn value.length\n}\n\n/**\n * @param {any} value\n * @param {any[]} array\n * @return {any}\n */\nexport function append (value, array) {\n\treturn array.push(value), value\n}\n\n/**\n * @param {string[]} array\n * @param {function} callback\n * @return {string}\n */\nexport function combine (array, callback) {\n\treturn array.map(callback).join('')\n}\n","import {from, trim, charat, strlen, substr, append, assign} from './Utility.js'\n\nexport var line = 1\nexport var column = 1\nexport var length = 0\nexport var position = 0\nexport var character = 0\nexport var characters = ''\n\n/**\n * @param {string} value\n * @param {object | null} root\n * @param {object | null} parent\n * @param {string} type\n * @param {string[] | string} props\n * @param {object[] | string} children\n * @param {number} length\n */\nexport function node (value, root, parent, type, props, children, length) {\n\treturn {value: value, root: root, parent: parent, type: type, props: props, children: children, line: line, column: column, length: length, return: ''}\n}\n\n/**\n * @param {object} root\n * @param {object} props\n * @return {object}\n */\nexport function copy (root, props) {\n\treturn assign(node('', null, null, '', null, null, 0), root, {length: -root.length}, props)\n}\n\n/**\n * @return {number}\n */\nexport function char () {\n\treturn character\n}\n\n/**\n * @return {number}\n */\nexport function prev () {\n\tcharacter = position > 0 ? charat(characters, --position) : 0\n\n\tif (column--, character === 10)\n\t\tcolumn = 1, line--\n\n\treturn character\n}\n\n/**\n * @return {number}\n */\nexport function next () {\n\tcharacter = position < length ? charat(characters, position++) : 0\n\n\tif (column++, character === 10)\n\t\tcolumn = 1, line++\n\n\treturn character\n}\n\n/**\n * @return {number}\n */\nexport function peek () {\n\treturn charat(characters, position)\n}\n\n/**\n * @return {number}\n */\nexport function caret () {\n\treturn position\n}\n\n/**\n * @param {number} begin\n * @param {number} end\n * @return {string}\n */\nexport function slice (begin, end) {\n\treturn substr(characters, begin, end)\n}\n\n/**\n * @param {number} type\n * @return {number}\n */\nexport function token (type) {\n\tswitch (type) {\n\t\t// \\0 \\t \\n \\r \\s whitespace token\n\t\tcase 0: case 9: case 10: case 13: case 32:\n\t\t\treturn 5\n\t\t// ! + , / > @ ~ isolate token\n\t\tcase 33: case 43: case 44: case 47: case 62: case 64: case 126:\n\t\t// ; { } breakpoint token\n\t\tcase 59: case 123: case 125:\n\t\t\treturn 4\n\t\t// : accompanied token\n\t\tcase 58:\n\t\t\treturn 3\n\t\t// \" ' ( [ opening delimit token\n\t\tcase 34: case 39: case 40: case 91:\n\t\t\treturn 2\n\t\t// ) ] closing delimit token\n\t\tcase 41: case 93:\n\t\t\treturn 1\n\t}\n\n\treturn 0\n}\n\n/**\n * @param {string} value\n * @return {any[]}\n */\nexport function alloc (value) {\n\treturn line = column = 1, length = strlen(characters = value), position = 0, []\n}\n\n/**\n * @param {any} value\n * @return {any}\n */\nexport function dealloc (value) {\n\treturn characters = '', value\n}\n\n/**\n * @param {number} type\n * @return {string}\n */\nexport function delimit (type) {\n\treturn trim(slice(position - 1, delimiter(type === 91 ? type + 2 : type === 40 ? type + 1 : type)))\n}\n\n/**\n * @param {string} value\n * @return {string[]}\n */\nexport function tokenize (value) {\n\treturn dealloc(tokenizer(alloc(value)))\n}\n\n/**\n * @param {number} type\n * @return {string}\n */\nexport function whitespace (type) {\n\twhile (character = peek())\n\t\tif (character < 33)\n\t\t\tnext()\n\t\telse\n\t\t\tbreak\n\n\treturn token(type) > 2 || token(character) > 3 ? '' : ' '\n}\n\n/**\n * @param {string[]} children\n * @return {string[]}\n */\nexport function tokenizer (children) {\n\twhile (next())\n\t\tswitch (token(character)) {\n\t\t\tcase 0: append(identifier(position - 1), children)\n\t\t\t\tbreak\n\t\t\tcase 2: append(delimit(character), children)\n\t\t\t\tbreak\n\t\t\tdefault: append(from(character), children)\n\t\t}\n\n\treturn children\n}\n\n/**\n * @param {number} index\n * @param {number} count\n * @return {string}\n */\nexport function escaping (index, count) {\n\twhile (--count && next())\n\t\t// not 0-9 A-F a-f\n\t\tif (character < 48 || character > 102 || (character > 57 && character < 65) || (character > 70 && character < 97))\n\t\t\tbreak\n\n\treturn slice(index, caret() + (count < 6 && peek() == 32 && next() == 32))\n}\n\n/**\n * @param {number} type\n * @return {number}\n */\nexport function delimiter (type) {\n\twhile (next())\n\t\tswitch (character) {\n\t\t\t// ] ) \" '\n\t\t\tcase type:\n\t\t\t\treturn position\n\t\t\t// \" '\n\t\t\tcase 34: case 39:\n\t\t\t\tif (type !== 34 && type !== 39)\n\t\t\t\t\tdelimiter(character)\n\t\t\t\tbreak\n\t\t\t// (\n\t\t\tcase 40:\n\t\t\t\tif (type === 41)\n\t\t\t\t\tdelimiter(type)\n\t\t\t\tbreak\n\t\t\t// \\\n\t\t\tcase 92:\n\t\t\t\tnext()\n\t\t\t\tbreak\n\t\t}\n\n\treturn position\n}\n\n/**\n * @param {number} type\n * @param {number} index\n * @return {number}\n */\nexport function commenter (type, index) {\n\twhile (next())\n\t\t// //\n\t\tif (type + character === 47 + 10)\n\t\t\tbreak\n\t\t// /*\n\t\telse if (type + character === 42 + 42 && peek() === 47)\n\t\t\tbreak\n\n\treturn '/*' + slice(index, position - 1) + '*' + from(type === 47 ? type : next())\n}\n\n/**\n * @param {number} index\n * @return {string}\n */\nexport function identifier (index) {\n\twhile (!token(peek()))\n\t\tnext()\n\n\treturn slice(index, position)\n}\n","export var MS = '-ms-'\nexport var MOZ = '-moz-'\nexport var WEBKIT = '-webkit-'\n\nexport var COMMENT = 'comm'\nexport var RULESET = 'rule'\nexport var DECLARATION = 'decl'\n\nexport var PAGE = '@page'\nexport var MEDIA = '@media'\nexport var IMPORT = '@import'\nexport var CHARSET = '@charset'\nexport var VIEWPORT = '@viewport'\nexport var SUPPORTS = '@supports'\nexport var DOCUMENT = '@document'\nexport var NAMESPACE = '@namespace'\nexport var KEYFRAMES = '@keyframes'\nexport var FONT_FACE = '@font-face'\nexport var COUNTER_STYLE = '@counter-style'\nexport var FONT_FEATURE_VALUES = '@font-feature-values'\n","import {IMPORT, COMMENT, RULESET, DECLARATION, KEYFRAMES} from './Enum.js'\nimport {strlen, sizeof} from './Utility.js'\n\n/**\n * @param {object[]} children\n * @param {function} callback\n * @return {string}\n */\nexport function serialize (children, callback) {\n\tvar output = ''\n\tvar length = sizeof(children)\n\n\tfor (var i = 0; i < length; i++)\n\t\toutput += callback(children[i], i, children, callback) || ''\n\n\treturn output\n}\n\n/**\n * @param {object} element\n * @param {number} index\n * @param {object[]} children\n * @param {function} callback\n * @return {string}\n */\nexport function stringify (element, index, children, callback) {\n\tswitch (element.type) {\n\t\tcase IMPORT: case DECLARATION: return element.return = element.return || element.value\n\t\tcase COMMENT: return ''\n\t\tcase KEYFRAMES: return element.return = element.value + '{' + serialize(element.children, callback) + '}'\n\t\tcase RULESET: element.value = element.props.join(',')\n\t}\n\n\treturn strlen(children = serialize(element.children, callback)) ? element.return = element.value + '{' + children + '}' : ''\n}\n","import {MS, MOZ, WEBKIT} from './Enum.js'\nimport {hash, charat, strlen, indexof, replace} from './Utility.js'\n\n/**\n * @param {string} value\n * @param {number} length\n * @return {string}\n */\nexport function prefix (value, length) {\n\tswitch (hash(value, length)) {\n\t\t// color-adjust\n\t\tcase 5103:\n\t\t\treturn WEBKIT + 'print-' + value + value\n\t\t// animation, animation-(delay|direction|duration|fill-mode|iteration-count|name|play-state|timing-function)\n\t\tcase 5737: case 4201: case 3177: case 3433: case 1641: case 4457: case 2921:\n\t\t// text-decoration, filter, clip-path, backface-visibility, column, box-decoration-break\n\t\tcase 5572: case 6356: case 5844: case 3191: case 6645: case 3005:\n\t\t// mask, mask-image, mask-(mode|clip|size), mask-(repeat|origin), mask-position, mask-composite,\n\t\tcase 6391: case 5879: case 5623: case 6135: case 4599: case 4855:\n\t\t// background-clip, columns, column-(count|fill|gap|rule|rule-color|rule-style|rule-width|span|width)\n\t\tcase 4215: case 6389: case 5109: case 5365: case 5621: case 3829:\n\t\t\treturn WEBKIT + value + value\n\t\t// appearance, user-select, transform, hyphens, text-size-adjust\n\t\tcase 5349: case 4246: case 4810: case 6968: case 2756:\n\t\t\treturn WEBKIT + value + MOZ + value + MS + value + value\n\t\t// flex, flex-direction\n\t\tcase 6828: case 4268:\n\t\t\treturn WEBKIT + value + MS + value + value\n\t\t// order\n\t\tcase 6165:\n\t\t\treturn WEBKIT + value + MS + 'flex-' + value + value\n\t\t// align-items\n\t\tcase 5187:\n\t\t\treturn WEBKIT + value + replace(value, /(\\w+).+(:[^]+)/, WEBKIT + 'box-$1$2' + MS + 'flex-$1$2') + value\n\t\t// align-self\n\t\tcase 5443:\n\t\t\treturn WEBKIT + value + MS + 'flex-item-' + replace(value, /flex-|-self/, '') + value\n\t\t// align-content\n\t\tcase 4675:\n\t\t\treturn WEBKIT + value + MS + 'flex-line-pack' + replace(value, /align-content|flex-|-self/, '') + value\n\t\t// flex-shrink\n\t\tcase 5548:\n\t\t\treturn WEBKIT + value + MS + replace(value, 'shrink', 'negative') + value\n\t\t// flex-basis\n\t\tcase 5292:\n\t\t\treturn WEBKIT + value + MS + replace(value, 'basis', 'preferred-size') + value\n\t\t// flex-grow\n\t\tcase 6060:\n\t\t\treturn WEBKIT + 'box-' + replace(value, '-grow', '') + WEBKIT + value + MS + replace(value, 'grow', 'positive') + value\n\t\t// transition\n\t\tcase 4554:\n\t\t\treturn WEBKIT + replace(value, /([^-])(transform)/g, '$1' + WEBKIT + '$2') + value\n\t\t// cursor\n\t\tcase 6187:\n\t\t\treturn replace(replace(replace(value, /(zoom-|grab)/, WEBKIT + '$1'), /(image-set)/, WEBKIT + '$1'), value, '') + value\n\t\t// background, background-image\n\t\tcase 5495: case 3959:\n\t\t\treturn replace(value, /(image-set\\([^]*)/, WEBKIT + '$1' + '$`$1')\n\t\t// justify-content\n\t\tcase 4968:\n\t\t\treturn replace(replace(value, /(.+:)(flex-)?(.*)/, WEBKIT + 'box-pack:$3' + MS + 'flex-pack:$3'), /s.+-b[^;]+/, 'justify') + WEBKIT + value + value\n\t\t// (margin|padding)-inline-(start|end)\n\t\tcase 4095: case 3583: case 4068: case 2532:\n\t\t\treturn replace(value, /(.+)-inline(.+)/, WEBKIT + '$1$2') + value\n\t\t// (min|max)?(width|height|inline-size|block-size)\n\t\tcase 8116: case 7059: case 5753: case 5535:\n\t\tcase 5445: case 5701: case 4933: case 4677:\n\t\tcase 5533: case 5789: case 5021: case 4765:\n\t\t\t// stretch, max-content, min-content, fill-available\n\t\t\tif (strlen(value) - 1 - length > 6)\n\t\t\t\tswitch (charat(value, length + 1)) {\n\t\t\t\t\t// (m)ax-content, (m)in-content\n\t\t\t\t\tcase 109:\n\t\t\t\t\t\t// -\n\t\t\t\t\t\tif (charat(value, length + 4) !== 45)\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t// (f)ill-available, (f)it-content\n\t\t\t\t\tcase 102:\n\t\t\t\t\t\treturn replace(value, /(.+:)(.+)-([^]+)/, '$1' + WEBKIT + '$2-$3' + '$1' + MOZ + (charat(value, length + 3) == 108 ? '$3' : '$2-$3')) + value\n\t\t\t\t\t// (s)tretch\n\t\t\t\t\tcase 115:\n\t\t\t\t\t\treturn ~indexof(value, 'stretch') ? prefix(replace(value, 'stretch', 'fill-available'), length) + value : value\n\t\t\t\t}\n\t\t\tbreak\n\t\t// position: sticky\n\t\tcase 4949:\n\t\t\t// (s)ticky?\n\t\t\tif (charat(value, length + 1) !== 115)\n\t\t\t\tbreak\n\t\t// display: (flex|inline-flex)\n\t\tcase 6444:\n\t\t\tswitch (charat(value, strlen(value) - 3 - (~indexof(value, '!important') && 10))) {\n\t\t\t\t// stic(k)y\n\t\t\t\tcase 107:\n\t\t\t\t\treturn replace(value, ':', ':' + WEBKIT) + value\n\t\t\t\t// (inline-)?fl(e)x\n\t\t\t\tcase 101:\n\t\t\t\t\treturn replace(value, /(.+:)([^;!]+)(;|!.+)?/, '$1' + WEBKIT + (charat(value, 14) === 45 ? 'inline-' : '') + 'box$3' + '$1' + WEBKIT + '$2$3' + '$1' + MS + '$2box$3') + value\n\t\t\t}\n\t\t\tbreak\n\t\t// writing-mode\n\t\tcase 5936:\n\t\t\tswitch (charat(value, length + 11)) {\n\t\t\t\t// vertical-l(r)\n\t\t\t\tcase 114:\n\t\t\t\t\treturn WEBKIT + value + MS + replace(value, /[svh]\\w+-[tblr]{2}/, 'tb') + value\n\t\t\t\t// vertical-r(l)\n\t\t\t\tcase 108:\n\t\t\t\t\treturn WEBKIT + value + MS + replace(value, /[svh]\\w+-[tblr]{2}/, 'tb-rl') + value\n\t\t\t\t// horizontal(-)tb\n\t\t\t\tcase 45:\n\t\t\t\t\treturn WEBKIT + value + MS + replace(value, /[svh]\\w+-[tblr]{2}/, 'lr') + value\n\t\t\t}\n\n\t\t\treturn WEBKIT + value + MS + value + value\n\t}\n\n\treturn value\n}\n","import {COMMENT, RULESET, DECLARATION} from './Enum.js'\nimport {abs, trim, from, sizeof, strlen, substr, append, replace, indexof} from './Utility.js'\nimport {node, char, prev, next, peek, caret, alloc, dealloc, delimit, whitespace, escaping, identifier, commenter} from './Tokenizer.js'\n\n/**\n * @param {string} value\n * @return {object[]}\n */\nexport function compile (value) {\n\treturn dealloc(parse('', null, null, null, [''], value = alloc(value), 0, [0], value))\n}\n\n/**\n * @param {string} value\n * @param {object} root\n * @param {object?} parent\n * @param {string[]} rule\n * @param {string[]} rules\n * @param {string[]} rulesets\n * @param {number[]} pseudo\n * @param {number[]} points\n * @param {string[]} declarations\n * @return {object}\n */\nexport function parse (value, root, parent, rule, rules, rulesets, pseudo, points, declarations) {\n\tvar index = 0\n\tvar offset = 0\n\tvar length = pseudo\n\tvar atrule = 0\n\tvar property = 0\n\tvar previous = 0\n\tvar variable = 1\n\tvar scanning = 1\n\tvar ampersand = 1\n\tvar character = 0\n\tvar type = ''\n\tvar props = rules\n\tvar children = rulesets\n\tvar reference = rule\n\tvar characters = type\n\n\twhile (scanning)\n\t\tswitch (previous = character, character = next()) {\n\t\t\t// (\n\t\t\tcase 40:\n\t\t\t\tif (previous != 108 && characters.charCodeAt(length - 1) == 58) {\n\t\t\t\t\tif (indexof(characters += replace(delimit(character), '&', '&\\f'), '&\\f') != -1)\n\t\t\t\t\t\tampersand = -1\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t// \" ' [\n\t\t\tcase 34: case 39: case 91:\n\t\t\t\tcharacters += delimit(character)\n\t\t\t\tbreak\n\t\t\t// \\t \\n \\r \\s\n\t\t\tcase 9: case 10: case 13: case 32:\n\t\t\t\tcharacters += whitespace(previous)\n\t\t\t\tbreak\n\t\t\t// \\\n\t\t\tcase 92:\n\t\t\t\tcharacters += escaping(caret() - 1, 7)\n\t\t\t\tcontinue\n\t\t\t// /\n\t\t\tcase 47:\n\t\t\t\tswitch (peek()) {\n\t\t\t\t\tcase 42: case 47:\n\t\t\t\t\t\tappend(comment(commenter(next(), caret()), root, parent), declarations)\n\t\t\t\t\t\tbreak\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tcharacters += '/'\n\t\t\t\t}\n\t\t\t\tbreak\n\t\t\t// {\n\t\t\tcase 123 * variable:\n\t\t\t\tpoints[index++] = strlen(characters) * ampersand\n\t\t\t// } ; \\0\n\t\t\tcase 125 * variable: case 59: case 0:\n\t\t\t\tswitch (character) {\n\t\t\t\t\t// \\0 }\n\t\t\t\t\tcase 0: case 125: scanning = 0\n\t\t\t\t\t// ;\n\t\t\t\t\tcase 59 + offset:\n\t\t\t\t\t\tif (property > 0 && (strlen(characters) - length))\n\t\t\t\t\t\t\tappend(property > 32 ? declaration(characters + ';', rule, parent, length - 1) : declaration(replace(characters, ' ', '') + ';', rule, parent, length - 2), declarations)\n\t\t\t\t\t\tbreak\n\t\t\t\t\t// @ ;\n\t\t\t\t\tcase 59: characters += ';'\n\t\t\t\t\t// { rule/at-rule\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tappend(reference = ruleset(characters, root, parent, index, offset, rules, points, type, props = [], children = [], length), rulesets)\n\n\t\t\t\t\t\tif (character === 123)\n\t\t\t\t\t\t\tif (offset === 0)\n\t\t\t\t\t\t\t\tparse(characters, root, reference, reference, props, rulesets, length, points, children)\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tswitch (atrule) {\n\t\t\t\t\t\t\t\t\t// d m s\n\t\t\t\t\t\t\t\t\tcase 100: case 109: case 115:\n\t\t\t\t\t\t\t\t\t\tparse(value, reference, reference, rule && append(ruleset(value, reference, reference, 0, 0, rules, points, type, rules, props = [], length), children), rules, children, length, points, rule ? props : children)\n\t\t\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\tparse(characters, reference, reference, reference, [''], children, 0, points, children)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tindex = offset = property = 0, variable = ampersand = 1, type = characters = '', length = pseudo\n\t\t\t\tbreak\n\t\t\t// :\n\t\t\tcase 58:\n\t\t\t\tlength = 1 + strlen(characters), property = previous\n\t\t\tdefault:\n\t\t\t\tif (variable < 1)\n\t\t\t\t\tif (character == 123)\n\t\t\t\t\t\t--variable\n\t\t\t\t\telse if (character == 125 && variable++ == 0 && prev() == 125)\n\t\t\t\t\t\tcontinue\n\n\t\t\t\tswitch (characters += from(character), character * variable) {\n\t\t\t\t\t// &\n\t\t\t\t\tcase 38:\n\t\t\t\t\t\tampersand = offset > 0 ? 1 : (characters += '\\f', -1)\n\t\t\t\t\t\tbreak\n\t\t\t\t\t// ,\n\t\t\t\t\tcase 44:\n\t\t\t\t\t\tpoints[index++] = (strlen(characters) - 1) * ampersand, ampersand = 1\n\t\t\t\t\t\tbreak\n\t\t\t\t\t// @\n\t\t\t\t\tcase 64:\n\t\t\t\t\t\t// -\n\t\t\t\t\t\tif (peek() === 45)\n\t\t\t\t\t\t\tcharacters += delimit(next())\n\n\t\t\t\t\t\tatrule = peek(), offset = length = strlen(type = characters += identifier(caret())), character++\n\t\t\t\t\t\tbreak\n\t\t\t\t\t// -\n\t\t\t\t\tcase 45:\n\t\t\t\t\t\tif (previous === 45 && strlen(characters) == 2)\n\t\t\t\t\t\t\tvariable = 0\n\t\t\t\t}\n\t\t}\n\n\treturn rulesets\n}\n\n/**\n * @param {string} value\n * @param {object} root\n * @param {object?} parent\n * @param {number} index\n * @param {number} offset\n * @param {string[]} rules\n * @param {number[]} points\n * @param {string} type\n * @param {string[]} props\n * @param {string[]} children\n * @param {number} length\n * @return {object}\n */\nexport function ruleset (value, root, parent, index, offset, rules, points, type, props, children, length) {\n\tvar post = offset - 1\n\tvar rule = offset === 0 ? rules : ['']\n\tvar size = sizeof(rule)\n\n\tfor (var i = 0, j = 0, k = 0; i < index; ++i)\n\t\tfor (var x = 0, y = substr(value, post + 1, post = abs(j = points[i])), z = value; x < size; ++x)\n\t\t\tif (z = trim(j > 0 ? rule[x] + ' ' + y : replace(y, /&\\f/g, rule[x])))\n\t\t\t\tprops[k++] = z\n\n\treturn node(value, root, parent, offset === 0 ? RULESET : type, props, children, length)\n}\n\n/**\n * @param {number} value\n * @param {object} root\n * @param {object?} parent\n * @return {object}\n */\nexport function comment (value, root, parent) {\n\treturn node(value, root, parent, COMMENT, from(char()), substr(value, 2, -2), 0)\n}\n\n/**\n * @param {string} value\n * @param {object} root\n * @param {object?} parent\n * @param {number} length\n * @return {object}\n */\nexport function declaration (value, root, parent, length) {\n\treturn node(value, root, parent, DECLARATION, substr(value, 0, length), substr(value, length + 1, -1), length)\n}\n","import { StyleSheet } from '@emotion/sheet';\nimport { dealloc, alloc, next, token, from, peek, delimit, slice, position, stringify, COMMENT, rulesheet, middleware, prefixer, serialize, compile } from 'stylis';\nimport '@emotion/weak-memoize';\nimport '@emotion/memoize';\n\nvar last = function last(arr) {\n  return arr.length ? arr[arr.length - 1] : null;\n}; // based on https://github.com/thysultan/stylis.js/blob/e6843c373ebcbbfade25ebcc23f540ed8508da0a/src/Tokenizer.js#L239-L244\n\n\nvar identifierWithPointTracking = function identifierWithPointTracking(begin, points, index) {\n  var previous = 0;\n  var character = 0;\n\n  while (true) {\n    previous = character;\n    character = peek(); // &\\f\n\n    if (previous === 38 && character === 12) {\n      points[index] = 1;\n    }\n\n    if (token(character)) {\n      break;\n    }\n\n    next();\n  }\n\n  return slice(begin, position);\n};\n\nvar toRules = function toRules(parsed, points) {\n  // pretend we've started with a comma\n  var index = -1;\n  var character = 44;\n\n  do {\n    switch (token(character)) {\n      case 0:\n        // &\\f\n        if (character === 38 && peek() === 12) {\n          // this is not 100% correct, we don't account for literal sequences here - like for example quoted strings\n          // stylis inserts \\f after & to know when & where it should replace this sequence with the context selector\n          // and when it should just concatenate the outer and inner selectors\n          // it's very unlikely for this sequence to actually appear in a different context, so we just leverage this fact here\n          points[index] = 1;\n        }\n\n        parsed[index] += identifierWithPointTracking(position - 1, points, index);\n        break;\n\n      case 2:\n        parsed[index] += delimit(character);\n        break;\n\n      case 4:\n        // comma\n        if (character === 44) {\n          // colon\n          parsed[++index] = peek() === 58 ? '&\\f' : '';\n          points[index] = parsed[index].length;\n          break;\n        }\n\n      // fallthrough\n\n      default:\n        parsed[index] += from(character);\n    }\n  } while (character = next());\n\n  return parsed;\n};\n\nvar getRules = function getRules(value, points) {\n  return dealloc(toRules(alloc(value), points));\n}; // WeakSet would be more appropriate, but only WeakMap is supported in IE11\n\n\nvar fixedElements = /* #__PURE__ */new WeakMap();\nvar compat = function compat(element) {\n  if (element.type !== 'rule' || !element.parent || // positive .length indicates that this rule contains pseudo\n  // negative .length indicates that this rule has been already prefixed\n  element.length < 1) {\n    return;\n  }\n\n  var value = element.value,\n      parent = element.parent;\n  var isImplicitRule = element.column === parent.column && element.line === parent.line;\n\n  while (parent.type !== 'rule') {\n    parent = parent.parent;\n    if (!parent) return;\n  } // short-circuit for the simplest case\n\n\n  if (element.props.length === 1 && value.charCodeAt(0) !== 58\n  /* colon */\n  && !fixedElements.get(parent)) {\n    return;\n  } // if this is an implicitly inserted rule (the one eagerly inserted at the each new nested level)\n  // then the props has already been manipulated beforehand as they that array is shared between it and its \"rule parent\"\n\n\n  if (isImplicitRule) {\n    return;\n  }\n\n  fixedElements.set(element, true);\n  var points = [];\n  var rules = getRules(value, points);\n  var parentRules = parent.props;\n\n  for (var i = 0, k = 0; i < rules.length; i++) {\n    for (var j = 0; j < parentRules.length; j++, k++) {\n      element.props[k] = points[i] ? rules[i].replace(/&\\f/g, parentRules[j]) : parentRules[j] + \" \" + rules[i];\n    }\n  }\n};\nvar removeLabel = function removeLabel(element) {\n  if (element.type === 'decl') {\n    var value = element.value;\n\n    if ( // charcode for l\n    value.charCodeAt(0) === 108 && // charcode for b\n    value.charCodeAt(2) === 98) {\n      // this ignores label\n      element[\"return\"] = '';\n      element.value = '';\n    }\n  }\n};\nvar ignoreFlag = 'emotion-disable-server-rendering-unsafe-selector-warning-please-do-not-use-this-the-warning-exists-for-a-reason';\n\nvar isIgnoringComment = function isIgnoringComment(element) {\n  return !!element && element.type === 'comm' && element.children.indexOf(ignoreFlag) > -1;\n};\n\nvar createUnsafeSelectorsAlarm = function createUnsafeSelectorsAlarm(cache) {\n  return function (element, index, children) {\n    if (element.type !== 'rule') return;\n    var unsafePseudoClasses = element.value.match(/(:first|:nth|:nth-last)-child/g);\n\n    if (unsafePseudoClasses && cache.compat !== true) {\n      var prevElement = index > 0 ? children[index - 1] : null;\n\n      if (prevElement && isIgnoringComment(last(prevElement.children))) {\n        return;\n      }\n\n      unsafePseudoClasses.forEach(function (unsafePseudoClass) {\n        console.error(\"The pseudo class \\\"\" + unsafePseudoClass + \"\\\" is potentially unsafe when doing server-side rendering. Try changing it to \\\"\" + unsafePseudoClass.split('-child')[0] + \"-of-type\\\".\");\n      });\n    }\n  };\n};\n\nvar isImportRule = function isImportRule(element) {\n  return element.type.charCodeAt(1) === 105 && element.type.charCodeAt(0) === 64;\n};\n\nvar isPrependedWithRegularRules = function isPrependedWithRegularRules(index, children) {\n  for (var i = index - 1; i >= 0; i--) {\n    if (!isImportRule(children[i])) {\n      return true;\n    }\n  }\n\n  return false;\n}; // use this to remove incorrect elements from further processing\n// so they don't get handed to the `sheet` (or anything else)\n// as that could potentially lead to additional logs which in turn could be overhelming to the user\n\n\nvar nullifyElement = function nullifyElement(element) {\n  element.type = '';\n  element.value = '';\n  element[\"return\"] = '';\n  element.children = '';\n  element.props = '';\n};\n\nvar incorrectImportAlarm = function incorrectImportAlarm(element, index, children) {\n  if (!isImportRule(element)) {\n    return;\n  }\n\n  if (element.parent) {\n    console.error(\"`@import` rules can't be nested inside other rules. Please move it to the top level and put it before regular rules. Keep in mind that they can only be used within global styles.\");\n    nullifyElement(element);\n  } else if (isPrependedWithRegularRules(index, children)) {\n    console.error(\"`@import` rules can't be after other rules. Please put your `@import` rules before your other rules.\");\n    nullifyElement(element);\n  }\n};\n\nvar defaultStylisPlugins = [prefixer];\n\nvar createCache = function createCache(options) {\n  var key = options.key;\n\n  if (process.env.NODE_ENV !== 'production' && !key) {\n    throw new Error(\"You have to configure `key` for your cache. Please make sure it's unique (and not equal to 'css') as it's used for linking styles to your cache.\\n\" + \"If multiple caches share the same key they might \\\"fight\\\" for each other's style elements.\");\n  }\n\n  if ( key === 'css') {\n    var ssrStyles = document.querySelectorAll(\"style[data-emotion]:not([data-s])\"); // get SSRed styles out of the way of React's hydration\n    // document.head is a safe place to move them to(though note document.head is not necessarily the last place they will be)\n    // note this very very intentionally targets all style elements regardless of the key to ensure\n    // that creating a cache works inside of render of a React component\n\n    Array.prototype.forEach.call(ssrStyles, function (node) {\n      // we want to only move elements which have a space in the data-emotion attribute value\n      // because that indicates that it is an Emotion 11 server-side rendered style elements\n      // while we will already ignore Emotion 11 client-side inserted styles because of the :not([data-s]) part in the selector\n      // Emotion 10 client-side inserted styles did not have data-s (but importantly did not have a space in their data-emotion attributes)\n      // so checking for the space ensures that loading Emotion 11 after Emotion 10 has inserted some styles\n      // will not result in the Emotion 10 styles being destroyed\n      var dataEmotionAttribute = node.getAttribute('data-emotion');\n\n      if (dataEmotionAttribute.indexOf(' ') === -1) {\n        return;\n      }\n      document.head.appendChild(node);\n      node.setAttribute('data-s', '');\n    });\n  }\n\n  var stylisPlugins = options.stylisPlugins || defaultStylisPlugins;\n\n  if (process.env.NODE_ENV !== 'production') {\n    // $FlowFixMe\n    if (/[^a-z-]/.test(key)) {\n      throw new Error(\"Emotion key must only contain lower case alphabetical characters and - but \\\"\" + key + \"\\\" was passed\");\n    }\n  }\n\n  var inserted = {}; // $FlowFixMe\n\n  var container;\n  var nodesToHydrate = [];\n\n  {\n    container = options.container || document.head;\n    Array.prototype.forEach.call( // this means we will ignore elements which don't have a space in them which\n    // means that the style elements we're looking at are only Emotion 11 server-rendered style elements\n    document.querySelectorAll(\"style[data-emotion^=\\\"\" + key + \" \\\"]\"), function (node) {\n      var attrib = node.getAttribute(\"data-emotion\").split(' '); // $FlowFixMe\n\n      for (var i = 1; i < attrib.length; i++) {\n        inserted[attrib[i]] = true;\n      }\n\n      nodesToHydrate.push(node);\n    });\n  }\n\n  var _insert;\n\n  var omnipresentPlugins = [compat, removeLabel];\n\n  if (process.env.NODE_ENV !== 'production') {\n    omnipresentPlugins.push(createUnsafeSelectorsAlarm({\n      get compat() {\n        return cache.compat;\n      }\n\n    }), incorrectImportAlarm);\n  }\n\n  {\n    var currentSheet;\n    var finalizingPlugins = [stringify, process.env.NODE_ENV !== 'production' ? function (element) {\n      if (!element.root) {\n        if (element[\"return\"]) {\n          currentSheet.insert(element[\"return\"]);\n        } else if (element.value && element.type !== COMMENT) {\n          // insert empty rule in non-production environments\n          // so @emotion/jest can grab `key` from the (JS)DOM for caches without any rules inserted yet\n          currentSheet.insert(element.value + \"{}\");\n        }\n      }\n    } : rulesheet(function (rule) {\n      currentSheet.insert(rule);\n    })];\n    var serializer = middleware(omnipresentPlugins.concat(stylisPlugins, finalizingPlugins));\n\n    var stylis = function stylis(styles) {\n      return serialize(compile(styles), serializer);\n    };\n\n    _insert = function insert(selector, serialized, sheet, shouldCache) {\n      currentSheet = sheet;\n\n      if (process.env.NODE_ENV !== 'production' && serialized.map !== undefined) {\n        currentSheet = {\n          insert: function insert(rule) {\n            sheet.insert(rule + serialized.map);\n          }\n        };\n      }\n\n      stylis(selector ? selector + \"{\" + serialized.styles + \"}\" : serialized.styles);\n\n      if (shouldCache) {\n        cache.inserted[serialized.name] = true;\n      }\n    };\n  }\n\n  var cache = {\n    key: key,\n    sheet: new StyleSheet({\n      key: key,\n      container: container,\n      nonce: options.nonce,\n      speedy: options.speedy,\n      prepend: options.prepend,\n      insertionPoint: options.insertionPoint\n    }),\n    nonce: options.nonce,\n    inserted: inserted,\n    registered: {},\n    insert: _insert\n  };\n  cache.sheet.hydrate(nodesToHydrate);\n  return cache;\n};\n\nexport default createCache;\n","import {MS, MOZ, WEBKIT, RULESET, KEYFRAMES, DECLARATION} from './Enum.js'\nimport {match, charat, substr, strlen, sizeof, replace, combine} from './Utility.js'\nimport {copy, tokenize} from './Tokenizer.js'\nimport {serialize} from './Serializer.js'\nimport {prefix} from './Prefixer.js'\n\n/**\n * @param {function[]} collection\n * @return {function}\n */\nexport function middleware (collection) {\n\tvar length = sizeof(collection)\n\n\treturn function (element, index, children, callback) {\n\t\tvar output = ''\n\n\t\tfor (var i = 0; i < length; i++)\n\t\t\toutput += collection[i](element, index, children, callback) || ''\n\n\t\treturn output\n\t}\n}\n\n/**\n * @param {function} callback\n * @return {function}\n */\nexport function rulesheet (callback) {\n\treturn function (element) {\n\t\tif (!element.root)\n\t\t\tif (element = element.return)\n\t\t\t\tcallback(element)\n\t}\n}\n\n/**\n * @param {object} element\n * @param {number} index\n * @param {object[]} children\n * @param {function} callback\n */\nexport function prefixer (element, index, children, callback) {\n\tif (element.length > -1)\n\t\tif (!element.return)\n\t\t\tswitch (element.type) {\n\t\t\t\tcase DECLARATION: element.return = prefix(element.value, element.length)\n\t\t\t\t\tbreak\n\t\t\t\tcase KEYFRAMES:\n\t\t\t\t\treturn serialize([copy(element, {value: replace(element.value, '@', '@' + WEBKIT)})], callback)\n\t\t\t\tcase RULESET:\n\t\t\t\t\tif (element.length)\n\t\t\t\t\t\treturn combine(element.props, function (value) {\n\t\t\t\t\t\t\tswitch (match(value, /(::plac\\w+|:read-\\w+)/)) {\n\t\t\t\t\t\t\t\t// :read-(only|write)\n\t\t\t\t\t\t\t\tcase ':read-only': case ':read-write':\n\t\t\t\t\t\t\t\t\treturn serialize([copy(element, {props: [replace(value, /:(read-\\w+)/, ':' + MOZ + '$1')]})], callback)\n\t\t\t\t\t\t\t\t// :placeholder\n\t\t\t\t\t\t\t\tcase '::placeholder':\n\t\t\t\t\t\t\t\t\treturn serialize([\n\t\t\t\t\t\t\t\t\t\tcopy(element, {props: [replace(value, /:(plac\\w+)/, ':' + WEBKIT + 'input-$1')]}),\n\t\t\t\t\t\t\t\t\t\tcopy(element, {props: [replace(value, /:(plac\\w+)/, ':' + MOZ + '$1')]}),\n\t\t\t\t\t\t\t\t\t\tcopy(element, {props: [replace(value, /:(plac\\w+)/, MS + 'input-$1')]})\n\t\t\t\t\t\t\t\t\t], callback)\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn ''\n\t\t\t\t\t\t})\n\t\t\t}\n}\n\n/**\n * @param {object} element\n * @param {number} index\n * @param {object[]} children\n */\nexport function namespace (element) {\n\tswitch (element.type) {\n\t\tcase RULESET:\n\t\t\telement.props = element.props.map(function (value) {\n\t\t\t\treturn combine(tokenize(value), function (value, index, children) {\n\t\t\t\t\tswitch (charat(value, 0)) {\n\t\t\t\t\t\t// \\f\n\t\t\t\t\t\tcase 12:\n\t\t\t\t\t\t\treturn substr(value, 1, strlen(value))\n\t\t\t\t\t\t// \\0 ( + > ~\n\t\t\t\t\t\tcase 0: case 40: case 43: case 62: case 126:\n\t\t\t\t\t\t\treturn value\n\t\t\t\t\t\t// :\n\t\t\t\t\t\tcase 58:\n\t\t\t\t\t\t\tif (children[++index] === 'global')\n\t\t\t\t\t\t\t\tchildren[index] = '', children[++index] = '\\f' + substr(children[index], index = 1, -1)\n\t\t\t\t\t\t// \\s\n\t\t\t\t\t\tcase 32:\n\t\t\t\t\t\t\treturn index === 1 ? '' : value\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tswitch (index) {\n\t\t\t\t\t\t\t\tcase 0: element = value\n\t\t\t\t\t\t\t\t\treturn sizeof(children) > 1 ? '' : value\n\t\t\t\t\t\t\t\tcase index = sizeof(children) - 1: case 2:\n\t\t\t\t\t\t\t\t\treturn index === 2 ? value + element + element : value + element\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\treturn value\n\t\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t})\n\t}\n}\n","var unitlessKeys = {\n  animationIterationCount: 1,\n  aspectRatio: 1,\n  borderImageOutset: 1,\n  borderImageSlice: 1,\n  borderImageWidth: 1,\n  boxFlex: 1,\n  boxFlexGroup: 1,\n  boxOrdinalGroup: 1,\n  columnCount: 1,\n  columns: 1,\n  flex: 1,\n  flexGrow: 1,\n  flexPositive: 1,\n  flexShrink: 1,\n  flexNegative: 1,\n  flexOrder: 1,\n  gridRow: 1,\n  gridRowEnd: 1,\n  gridRowSpan: 1,\n  gridRowStart: 1,\n  gridColumn: 1,\n  gridColumnEnd: 1,\n  gridColumnSpan: 1,\n  gridColumnStart: 1,\n  msGridRow: 1,\n  msGridRowSpan: 1,\n  msGridColumn: 1,\n  msGridColumnSpan: 1,\n  fontWeight: 1,\n  lineHeight: 1,\n  opacity: 1,\n  order: 1,\n  orphans: 1,\n  tabSize: 1,\n  widows: 1,\n  zIndex: 1,\n  zoom: 1,\n  WebkitLineClamp: 1,\n  // SVG-related properties\n  fillOpacity: 1,\n  floodOpacity: 1,\n  stopOpacity: 1,\n  strokeDasharray: 1,\n  strokeDashoffset: 1,\n  strokeMiterlimit: 1,\n  strokeOpacity: 1,\n  strokeWidth: 1\n};\n\nexport { unitlessKeys as default };\n","function memoize(fn) {\n  var cache = Object.create(null);\n  return function (arg) {\n    if (cache[arg] === undefined) cache[arg] = fn(arg);\n    return cache[arg];\n  };\n}\n\nexport { memoize as default };\n","import hashString from '@emotion/hash';\nimport unitless from '@emotion/unitless';\nimport memoize from '@emotion/memoize';\n\nvar ILLEGAL_ESCAPE_SEQUENCE_ERROR = \"You have illegal escape sequence in your template literal, most likely inside content's property value.\\nBecause you write your CSS inside a JavaScript string you actually have to do double escaping, so for example \\\"content: '\\\\00d7';\\\" should become \\\"content: '\\\\\\\\00d7';\\\".\\nYou can read more about this here:\\nhttps://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals#ES2018_revision_of_illegal_escape_sequences\";\nvar UNDEFINED_AS_OBJECT_KEY_ERROR = \"You have passed in falsy value as style object's key (can happen when in example you pass unexported component as computed key).\";\nvar hyphenateRegex = /[A-Z]|^ms/g;\nvar animationRegex = /_EMO_([^_]+?)_([^]*?)_EMO_/g;\n\nvar isCustomProperty = function isCustomProperty(property) {\n  return property.charCodeAt(1) === 45;\n};\n\nvar isProcessableValue = function isProcessableValue(value) {\n  return value != null && typeof value !== 'boolean';\n};\n\nvar processStyleName = /* #__PURE__ */memoize(function (styleName) {\n  return isCustomProperty(styleName) ? styleName : styleName.replace(hyphenateRegex, '-$&').toLowerCase();\n});\n\nvar processStyleValue = function processStyleValue(key, value) {\n  switch (key) {\n    case 'animation':\n    case 'animationName':\n      {\n        if (typeof value === 'string') {\n          return value.replace(animationRegex, function (match, p1, p2) {\n            cursor = {\n              name: p1,\n              styles: p2,\n              next: cursor\n            };\n            return p1;\n          });\n        }\n      }\n  }\n\n  if (unitless[key] !== 1 && !isCustomProperty(key) && typeof value === 'number' && value !== 0) {\n    return value + 'px';\n  }\n\n  return value;\n};\n\nif (process.env.NODE_ENV !== 'production') {\n  var contentValuePattern = /(var|attr|counters?|url|element|(((repeating-)?(linear|radial))|conic)-gradient)\\(|(no-)?(open|close)-quote/;\n  var contentValues = ['normal', 'none', 'initial', 'inherit', 'unset'];\n  var oldProcessStyleValue = processStyleValue;\n  var msPattern = /^-ms-/;\n  var hyphenPattern = /-(.)/g;\n  var hyphenatedCache = {};\n\n  processStyleValue = function processStyleValue(key, value) {\n    if (key === 'content') {\n      if (typeof value !== 'string' || contentValues.indexOf(value) === -1 && !contentValuePattern.test(value) && (value.charAt(0) !== value.charAt(value.length - 1) || value.charAt(0) !== '\"' && value.charAt(0) !== \"'\")) {\n        throw new Error(\"You seem to be using a value for 'content' without quotes, try replacing it with `content: '\\\"\" + value + \"\\\"'`\");\n      }\n    }\n\n    var processed = oldProcessStyleValue(key, value);\n\n    if (processed !== '' && !isCustomProperty(key) && key.indexOf('-') !== -1 && hyphenatedCache[key] === undefined) {\n      hyphenatedCache[key] = true;\n      console.error(\"Using kebab-case for css properties in objects is not supported. Did you mean \" + key.replace(msPattern, 'ms-').replace(hyphenPattern, function (str, _char) {\n        return _char.toUpperCase();\n      }) + \"?\");\n    }\n\n    return processed;\n  };\n}\n\nvar noComponentSelectorMessage = 'Component selectors can only be used in conjunction with ' + '@emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware ' + 'compiler transform.';\n\nfunction handleInterpolation(mergedProps, registered, interpolation) {\n  if (interpolation == null) {\n    return '';\n  }\n\n  if (interpolation.__emotion_styles !== undefined) {\n    if (process.env.NODE_ENV !== 'production' && interpolation.toString() === 'NO_COMPONENT_SELECTOR') {\n      throw new Error(noComponentSelectorMessage);\n    }\n\n    return interpolation;\n  }\n\n  switch (typeof interpolation) {\n    case 'boolean':\n      {\n        return '';\n      }\n\n    case 'object':\n      {\n        if (interpolation.anim === 1) {\n          cursor = {\n            name: interpolation.name,\n            styles: interpolation.styles,\n            next: cursor\n          };\n          return interpolation.name;\n        }\n\n        if (interpolation.styles !== undefined) {\n          var next = interpolation.next;\n\n          if (next !== undefined) {\n            // not the most efficient thing ever but this is a pretty rare case\n            // and there will be very few iterations of this generally\n            while (next !== undefined) {\n              cursor = {\n                name: next.name,\n                styles: next.styles,\n                next: cursor\n              };\n              next = next.next;\n            }\n          }\n\n          var styles = interpolation.styles + \";\";\n\n          if (process.env.NODE_ENV !== 'production' && interpolation.map !== undefined) {\n            styles += interpolation.map;\n          }\n\n          return styles;\n        }\n\n        return createStringFromObject(mergedProps, registered, interpolation);\n      }\n\n    case 'function':\n      {\n        if (mergedProps !== undefined) {\n          var previousCursor = cursor;\n          var result = interpolation(mergedProps);\n          cursor = previousCursor;\n          return handleInterpolation(mergedProps, registered, result);\n        } else if (process.env.NODE_ENV !== 'production') {\n          console.error('Functions that are interpolated in css calls will be stringified.\\n' + 'If you want to have a css call based on props, create a function that returns a css call like this\\n' + 'let dynamicStyle = (props) => css`color: ${props.color}`\\n' + 'It can be called directly with props or interpolated in a styled call like this\\n' + \"let SomeComponent = styled('div')`${dynamicStyle}`\");\n        }\n\n        break;\n      }\n\n    case 'string':\n      if (process.env.NODE_ENV !== 'production') {\n        var matched = [];\n        var replaced = interpolation.replace(animationRegex, function (match, p1, p2) {\n          var fakeVarName = \"animation\" + matched.length;\n          matched.push(\"const \" + fakeVarName + \" = keyframes`\" + p2.replace(/^@keyframes animation-\\w+/, '') + \"`\");\n          return \"${\" + fakeVarName + \"}\";\n        });\n\n        if (matched.length) {\n          console.error('`keyframes` output got interpolated into plain string, please wrap it with `css`.\\n\\n' + 'Instead of doing this:\\n\\n' + [].concat(matched, [\"`\" + replaced + \"`\"]).join('\\n') + '\\n\\nYou should wrap it with `css` like this:\\n\\n' + (\"css`\" + replaced + \"`\"));\n        }\n      }\n\n      break;\n  } // finalize string values (regular strings and functions interpolated into css calls)\n\n\n  if (registered == null) {\n    return interpolation;\n  }\n\n  var cached = registered[interpolation];\n  return cached !== undefined ? cached : interpolation;\n}\n\nfunction createStringFromObject(mergedProps, registered, obj) {\n  var string = '';\n\n  if (Array.isArray(obj)) {\n    for (var i = 0; i < obj.length; i++) {\n      string += handleInterpolation(mergedProps, registered, obj[i]) + \";\";\n    }\n  } else {\n    for (var _key in obj) {\n      var value = obj[_key];\n\n      if (typeof value !== 'object') {\n        if (registered != null && registered[value] !== undefined) {\n          string += _key + \"{\" + registered[value] + \"}\";\n        } else if (isProcessableValue(value)) {\n          string += processStyleName(_key) + \":\" + processStyleValue(_key, value) + \";\";\n        }\n      } else {\n        if (_key === 'NO_COMPONENT_SELECTOR' && process.env.NODE_ENV !== 'production') {\n          throw new Error(noComponentSelectorMessage);\n        }\n\n        if (Array.isArray(value) && typeof value[0] === 'string' && (registered == null || registered[value[0]] === undefined)) {\n          for (var _i = 0; _i < value.length; _i++) {\n            if (isProcessableValue(value[_i])) {\n              string += processStyleName(_key) + \":\" + processStyleValue(_key, value[_i]) + \";\";\n            }\n          }\n        } else {\n          var interpolated = handleInterpolation(mergedProps, registered, value);\n\n          switch (_key) {\n            case 'animation':\n            case 'animationName':\n              {\n                string += processStyleName(_key) + \":\" + interpolated + \";\";\n                break;\n              }\n\n            default:\n              {\n                if (process.env.NODE_ENV !== 'production' && _key === 'undefined') {\n                  console.error(UNDEFINED_AS_OBJECT_KEY_ERROR);\n                }\n\n                string += _key + \"{\" + interpolated + \"}\";\n              }\n          }\n        }\n      }\n    }\n  }\n\n  return string;\n}\n\nvar labelPattern = /label:\\s*([^\\s;\\n{]+)\\s*(;|$)/g;\nvar sourceMapPattern;\n\nif (process.env.NODE_ENV !== 'production') {\n  sourceMapPattern = /\\/\\*#\\ssourceMappingURL=data:application\\/json;\\S+\\s+\\*\\//g;\n} // this is the cursor for keyframes\n// keyframes are stored on the SerializedStyles object as a linked list\n\n\nvar cursor;\nvar serializeStyles = function serializeStyles(args, registered, mergedProps) {\n  if (args.length === 1 && typeof args[0] === 'object' && args[0] !== null && args[0].styles !== undefined) {\n    return args[0];\n  }\n\n  var stringMode = true;\n  var styles = '';\n  cursor = undefined;\n  var strings = args[0];\n\n  if (strings == null || strings.raw === undefined) {\n    stringMode = false;\n    styles += handleInterpolation(mergedProps, registered, strings);\n  } else {\n    if (process.env.NODE_ENV !== 'production' && strings[0] === undefined) {\n      console.error(ILLEGAL_ESCAPE_SEQUENCE_ERROR);\n    }\n\n    styles += strings[0];\n  } // we start at 1 since we've already handled the first arg\n\n\n  for (var i = 1; i < args.length; i++) {\n    styles += handleInterpolation(mergedProps, registered, args[i]);\n\n    if (stringMode) {\n      if (process.env.NODE_ENV !== 'production' && strings[i] === undefined) {\n        console.error(ILLEGAL_ESCAPE_SEQUENCE_ERROR);\n      }\n\n      styles += strings[i];\n    }\n  }\n\n  var sourceMap;\n\n  if (process.env.NODE_ENV !== 'production') {\n    styles = styles.replace(sourceMapPattern, function (match) {\n      sourceMap = match;\n      return '';\n    });\n  } // using a global regex with .exec is stateful so lastIndex has to be reset each time\n\n\n  labelPattern.lastIndex = 0;\n  var identifierName = '';\n  var match; // https://esbench.com/bench/5b809c2cf2949800a0f61fb5\n\n  while ((match = labelPattern.exec(styles)) !== null) {\n    identifierName += '-' + // $FlowFixMe we know it's not null\n    match[1];\n  }\n\n  var name = hashString(styles) + identifierName;\n\n  if (process.env.NODE_ENV !== 'production') {\n    // $FlowFixMe SerializedStyles type doesn't have toString property (and we don't want to add it)\n    return {\n      name: name,\n      styles: styles,\n      map: sourceMap,\n      next: cursor,\n      toString: function toString() {\n        return \"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop).\";\n      }\n    };\n  }\n\n  return {\n    name: name,\n    styles: styles,\n    next: cursor\n  };\n};\n\nexport { serializeStyles };\n","import { createContext, useContext, forwardRef, createElement, Fragment } from 'react';\nimport createCache from '@emotion/cache';\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport weakMemoize from '@emotion/weak-memoize';\nimport hoistNonReactStatics from '../_isolated-hnrs/dist/emotion-react-_isolated-hnrs.browser.esm.js';\nimport { getRegisteredStyles, insertStyles } from '@emotion/utils';\nimport { serializeStyles } from '@emotion/serialize';\n\nvar hasOwnProperty = {}.hasOwnProperty;\n\nvar EmotionCacheContext = /* #__PURE__ */createContext( // we're doing this to avoid preconstruct's dead code elimination in this one case\n// because this module is primarily intended for the browser and node\n// but it's also required in react native and similar environments sometimes\n// and we could have a special build just for that\n// but this is much easier and the native packages\n// might use a different theme context in the future anyway\ntypeof HTMLElement !== 'undefined' ? /* #__PURE__ */createCache({\n  key: 'css'\n}) : null);\n\nif (process.env.NODE_ENV !== 'production') {\n  EmotionCacheContext.displayName = 'EmotionCacheContext';\n}\n\nvar CacheProvider = EmotionCacheContext.Provider;\nvar __unsafe_useEmotionCache = function useEmotionCache() {\n  return useContext(EmotionCacheContext);\n};\n\nvar withEmotionCache = function withEmotionCache(func) {\n  // $FlowFixMe\n  return /*#__PURE__*/forwardRef(function (props, ref) {\n    // the cache will never be null in the browser\n    var cache = useContext(EmotionCacheContext);\n    return func(props, cache, ref);\n  });\n};\n\nvar ThemeContext = /* #__PURE__ */createContext({});\n\nif (process.env.NODE_ENV !== 'production') {\n  ThemeContext.displayName = 'EmotionThemeContext';\n}\n\nvar useTheme = function useTheme() {\n  return useContext(ThemeContext);\n};\n\nvar getTheme = function getTheme(outerTheme, theme) {\n  if (typeof theme === 'function') {\n    var mergedTheme = theme(outerTheme);\n\n    if (process.env.NODE_ENV !== 'production' && (mergedTheme == null || typeof mergedTheme !== 'object' || Array.isArray(mergedTheme))) {\n      throw new Error('[ThemeProvider] Please return an object from your theme function, i.e. theme={() => ({})}!');\n    }\n\n    return mergedTheme;\n  }\n\n  if (process.env.NODE_ENV !== 'production' && (theme == null || typeof theme !== 'object' || Array.isArray(theme))) {\n    throw new Error('[ThemeProvider] Please make your theme prop a plain object');\n  }\n\n  return _extends({}, outerTheme, theme);\n};\n\nvar createCacheWithTheme = /* #__PURE__ */weakMemoize(function (outerTheme) {\n  return weakMemoize(function (theme) {\n    return getTheme(outerTheme, theme);\n  });\n});\nvar ThemeProvider = function ThemeProvider(props) {\n  var theme = useContext(ThemeContext);\n\n  if (props.theme !== theme) {\n    theme = createCacheWithTheme(theme)(props.theme);\n  }\n\n  return /*#__PURE__*/createElement(ThemeContext.Provider, {\n    value: theme\n  }, props.children);\n};\nfunction withTheme(Component) {\n  var componentName = Component.displayName || Component.name || 'Component';\n\n  var render = function render(props, ref) {\n    var theme = useContext(ThemeContext);\n    return /*#__PURE__*/createElement(Component, _extends({\n      theme: theme,\n      ref: ref\n    }, props));\n  }; // $FlowFixMe\n\n\n  var WithTheme = /*#__PURE__*/forwardRef(render);\n  WithTheme.displayName = \"WithTheme(\" + componentName + \")\";\n  return hoistNonReactStatics(WithTheme, Component);\n}\n\nvar getFunctionNameFromStackTraceLine = function getFunctionNameFromStackTraceLine(line) {\n  // V8\n  var match = /^\\s+at\\s+([A-Za-z0-9$.]+)\\s/.exec(line);\n\n  if (match) {\n    // The match may be something like 'Object.createEmotionProps'\n    var parts = match[1].split('.');\n    return parts[parts.length - 1];\n  } // Safari / Firefox\n\n\n  match = /^([A-Za-z0-9$.]+)@/.exec(line);\n  if (match) return match[1];\n  return undefined;\n};\n\nvar internalReactFunctionNames = /* #__PURE__ */new Set(['renderWithHooks', 'processChild', 'finishClassComponent', 'renderToString']); // These identifiers come from error stacks, so they have to be valid JS\n// identifiers, thus we only need to replace what is a valid character for JS,\n// but not for CSS.\n\nvar sanitizeIdentifier = function sanitizeIdentifier(identifier) {\n  return identifier.replace(/\\$/g, '-');\n};\n\nvar getLabelFromStackTrace = function getLabelFromStackTrace(stackTrace) {\n  if (!stackTrace) return undefined;\n  var lines = stackTrace.split('\\n');\n\n  for (var i = 0; i < lines.length; i++) {\n    var functionName = getFunctionNameFromStackTraceLine(lines[i]); // The first line of V8 stack traces is just \"Error\"\n\n    if (!functionName) continue; // If we reach one of these, we have gone too far and should quit\n\n    if (internalReactFunctionNames.has(functionName)) break; // The component name is the first function in the stack that starts with an\n    // uppercase letter\n\n    if (/^[A-Z]/.test(functionName)) return sanitizeIdentifier(functionName);\n  }\n\n  return undefined;\n};\n\nvar typePropName = '__EMOTION_TYPE_PLEASE_DO_NOT_USE__';\nvar labelPropName = '__EMOTION_LABEL_PLEASE_DO_NOT_USE__';\nvar createEmotionProps = function createEmotionProps(type, props) {\n  if (process.env.NODE_ENV !== 'production' && typeof props.css === 'string' && // check if there is a css declaration\n  props.css.indexOf(':') !== -1) {\n    throw new Error(\"Strings are not allowed as css prop values, please wrap it in a css template literal from '@emotion/react' like this: css`\" + props.css + \"`\");\n  }\n\n  var newProps = {};\n\n  for (var key in props) {\n    if (hasOwnProperty.call(props, key)) {\n      newProps[key] = props[key];\n    }\n  }\n\n  newProps[typePropName] = type; // For performance, only call getLabelFromStackTrace in development and when\n  // the label hasn't already been computed\n\n  if (process.env.NODE_ENV !== 'production' && !!props.css && (typeof props.css !== 'object' || typeof props.css.name !== 'string' || props.css.name.indexOf('-') === -1)) {\n    var label = getLabelFromStackTrace(new Error().stack);\n    if (label) newProps[labelPropName] = label;\n  }\n\n  return newProps;\n};\n\nvar Noop = function Noop() {\n  return null;\n};\n\nvar Emotion = /* #__PURE__ */withEmotionCache(function (props, cache, ref) {\n  var cssProp = props.css; // so that using `css` from `emotion` and passing the result to the css prop works\n  // not passing the registered cache to serializeStyles because it would\n  // make certain babel optimisations not possible\n\n  if (typeof cssProp === 'string' && cache.registered[cssProp] !== undefined) {\n    cssProp = cache.registered[cssProp];\n  }\n\n  var type = props[typePropName];\n  var registeredStyles = [cssProp];\n  var className = '';\n\n  if (typeof props.className === 'string') {\n    className = getRegisteredStyles(cache.registered, registeredStyles, props.className);\n  } else if (props.className != null) {\n    className = props.className + \" \";\n  }\n\n  var serialized = serializeStyles(registeredStyles, undefined, useContext(ThemeContext));\n\n  if (process.env.NODE_ENV !== 'production' && serialized.name.indexOf('-') === -1) {\n    var labelFromStack = props[labelPropName];\n\n    if (labelFromStack) {\n      serialized = serializeStyles([serialized, 'label:' + labelFromStack + ';']);\n    }\n  }\n\n  var rules = insertStyles(cache, serialized, typeof type === 'string');\n  className += cache.key + \"-\" + serialized.name;\n  var newProps = {};\n\n  for (var key in props) {\n    if (hasOwnProperty.call(props, key) && key !== 'css' && key !== typePropName && (process.env.NODE_ENV === 'production' || key !== labelPropName)) {\n      newProps[key] = props[key];\n    }\n  }\n\n  newProps.ref = ref;\n  newProps.className = className;\n  var ele = /*#__PURE__*/createElement(type, newProps);\n  var possiblyStyleElement = /*#__PURE__*/createElement(Noop, null);\n\n\n  return /*#__PURE__*/createElement(Fragment, null, possiblyStyleElement, ele);\n});\n\nif (process.env.NODE_ENV !== 'production') {\n  Emotion.displayName = 'EmotionCssPropInternal';\n}\n\nexport { CacheProvider as C, Emotion as E, ThemeContext as T, __unsafe_useEmotionCache as _, ThemeProvider as a, withTheme as b, createEmotionProps as c, hasOwnProperty as h, useTheme as u, withEmotionCache as w };\n","import _extends from '@babel/runtime/helpers/esm/extends';\nimport { useContext, createElement, Fragment } from 'react';\nimport isPropValid from '@emotion/is-prop-valid';\nimport { withEmotionCache, ThemeContext } from '@emotion/react';\nimport { getRegisteredStyles, insertStyles } from '@emotion/utils';\nimport { serializeStyles } from '@emotion/serialize';\n\nvar testOmitPropsOnStringTag = isPropValid;\n\nvar testOmitPropsOnComponent = function testOmitPropsOnComponent(key) {\n  return key !== 'theme';\n};\n\nvar getDefaultShouldForwardProp = function getDefaultShouldForwardProp(tag) {\n  return typeof tag === 'string' && // 96 is one less than the char code\n  // for \"a\" so this is checking that\n  // it's a lowercase character\n  tag.charCodeAt(0) > 96 ? testOmitPropsOnStringTag : testOmitPropsOnComponent;\n};\nvar composeShouldForwardProps = function composeShouldForwardProps(tag, options, isReal) {\n  var shouldForwardProp;\n\n  if (options) {\n    var optionsShouldForwardProp = options.shouldForwardProp;\n    shouldForwardProp = tag.__emotion_forwardProp && optionsShouldForwardProp ? function (propName) {\n      return tag.__emotion_forwardProp(propName) && optionsShouldForwardProp(propName);\n    } : optionsShouldForwardProp;\n  }\n\n  if (typeof shouldForwardProp !== 'function' && isReal) {\n    shouldForwardProp = tag.__emotion_forwardProp;\n  }\n\n  return shouldForwardProp;\n};\n\nvar ILLEGAL_ESCAPE_SEQUENCE_ERROR = \"You have illegal escape sequence in your template literal, most likely inside content's property value.\\nBecause you write your CSS inside a JavaScript string you actually have to do double escaping, so for example \\\"content: '\\\\00d7';\\\" should become \\\"content: '\\\\\\\\00d7';\\\".\\nYou can read more about this here:\\nhttps://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals#ES2018_revision_of_illegal_escape_sequences\";\n\nvar Noop = function Noop() {\n  return null;\n};\n\nvar createStyled = function createStyled(tag, options) {\n  if (process.env.NODE_ENV !== 'production') {\n    if (tag === undefined) {\n      throw new Error('You are trying to create a styled element with an undefined component.\\nYou may have forgotten to import it.');\n    }\n  }\n\n  var isReal = tag.__emotion_real === tag;\n  var baseTag = isReal && tag.__emotion_base || tag;\n  var identifierName;\n  var targetClassName;\n\n  if (options !== undefined) {\n    identifierName = options.label;\n    targetClassName = options.target;\n  }\n\n  var shouldForwardProp = composeShouldForwardProps(tag, options, isReal);\n  var defaultShouldForwardProp = shouldForwardProp || getDefaultShouldForwardProp(baseTag);\n  var shouldUseAs = !defaultShouldForwardProp('as');\n  return function () {\n    var args = arguments;\n    var styles = isReal && tag.__emotion_styles !== undefined ? tag.__emotion_styles.slice(0) : [];\n\n    if (identifierName !== undefined) {\n      styles.push(\"label:\" + identifierName + \";\");\n    }\n\n    if (args[0] == null || args[0].raw === undefined) {\n      styles.push.apply(styles, args);\n    } else {\n      if (process.env.NODE_ENV !== 'production' && args[0][0] === undefined) {\n        console.error(ILLEGAL_ESCAPE_SEQUENCE_ERROR);\n      }\n\n      styles.push(args[0][0]);\n      var len = args.length;\n      var i = 1;\n\n      for (; i < len; i++) {\n        if (process.env.NODE_ENV !== 'production' && args[0][i] === undefined) {\n          console.error(ILLEGAL_ESCAPE_SEQUENCE_ERROR);\n        }\n\n        styles.push(args[i], args[0][i]);\n      }\n    } // $FlowFixMe: we need to cast StatelessFunctionalComponent to our PrivateStyledComponent class\n\n\n    var Styled = withEmotionCache(function (props, cache, ref) {\n      var finalTag = shouldUseAs && props.as || baseTag;\n      var className = '';\n      var classInterpolations = [];\n      var mergedProps = props;\n\n      if (props.theme == null) {\n        mergedProps = {};\n\n        for (var key in props) {\n          mergedProps[key] = props[key];\n        }\n\n        mergedProps.theme = useContext(ThemeContext);\n      }\n\n      if (typeof props.className === 'string') {\n        className = getRegisteredStyles(cache.registered, classInterpolations, props.className);\n      } else if (props.className != null) {\n        className = props.className + \" \";\n      }\n\n      var serialized = serializeStyles(styles.concat(classInterpolations), cache.registered, mergedProps);\n      var rules = insertStyles(cache, serialized, typeof finalTag === 'string');\n      className += cache.key + \"-\" + serialized.name;\n\n      if (targetClassName !== undefined) {\n        className += \" \" + targetClassName;\n      }\n\n      var finalShouldForwardProp = shouldUseAs && shouldForwardProp === undefined ? getDefaultShouldForwardProp(finalTag) : defaultShouldForwardProp;\n      var newProps = {};\n\n      for (var _key in props) {\n        if (shouldUseAs && _key === 'as') continue;\n\n        if ( // $FlowFixMe\n        finalShouldForwardProp(_key)) {\n          newProps[_key] = props[_key];\n        }\n      }\n\n      newProps.className = className;\n      newProps.ref = ref;\n      var ele = /*#__PURE__*/createElement(finalTag, newProps);\n      var possiblyStyleElement = /*#__PURE__*/createElement(Noop, null);\n\n\n      return /*#__PURE__*/createElement(Fragment, null, possiblyStyleElement, ele);\n    });\n    Styled.displayName = identifierName !== undefined ? identifierName : \"Styled(\" + (typeof baseTag === 'string' ? baseTag : baseTag.displayName || baseTag.name || 'Component') + \")\";\n    Styled.defaultProps = tag.defaultProps;\n    Styled.__emotion_real = Styled;\n    Styled.__emotion_base = baseTag;\n    Styled.__emotion_styles = styles;\n    Styled.__emotion_forwardProp = shouldForwardProp;\n    Object.defineProperty(Styled, 'toString', {\n      value: function value() {\n        if (targetClassName === undefined && process.env.NODE_ENV !== 'production') {\n          return 'NO_COMPONENT_SELECTOR';\n        } // $FlowFixMe: coerce undefined to string\n\n\n        return \".\" + targetClassName;\n      }\n    });\n\n    Styled.withComponent = function (nextTag, nextOptions) {\n      return createStyled(nextTag, _extends({}, options, nextOptions, {\n        shouldForwardProp: composeShouldForwardProps(Styled, nextOptions, true)\n      })).apply(void 0, styles);\n    };\n\n    return Styled;\n  };\n};\n\nexport default createStyled;\n","var isBrowser = \"object\" !== 'undefined';\nfunction getRegisteredStyles(registered, registeredStyles, classNames) {\n  var rawClassName = '';\n  classNames.split(' ').forEach(function (className) {\n    if (registered[className] !== undefined) {\n      registeredStyles.push(registered[className] + \";\");\n    } else {\n      rawClassName += className + \" \";\n    }\n  });\n  return rawClassName;\n}\nvar registerStyles = function registerStyles(cache, serialized, isStringTag) {\n  var className = cache.key + \"-\" + serialized.name;\n\n  if ( // we only need to add the styles to the registered cache if the\n  // class name could be used further down\n  // the tree but if it's a string tag, we know it won't\n  // so we don't have to add it to registered cache.\n  // this improves memory usage since we can avoid storing the whole style string\n  (isStringTag === false || // we need to always store it if we're in compat mode and\n  // in node since emotion-server relies on whether a style is in\n  // the registered cache to know whether a style is global or not\n  // also, note that this check will be dead code eliminated in the browser\n  isBrowser === false ) && cache.registered[className] === undefined) {\n    cache.registered[className] = serialized.styles;\n  }\n};\nvar insertStyles = function insertStyles(cache, serialized, isStringTag) {\n  registerStyles(cache, serialized, isStringTag);\n  var className = cache.key + \"-\" + serialized.name;\n\n  if (cache.inserted[serialized.name] === undefined) {\n    var current = serialized;\n\n    do {\n      cache.insert(serialized === current ? \".\" + className : '', current, cache.sheet, true);\n\n      current = current.next;\n    } while (current !== undefined);\n  }\n};\n\nexport { getRegisteredStyles, insertStyles, registerStyles };\n","/* eslint-disable */\n// Inspired by https://github.com/garycourt/murmurhash-js\n// Ported from https://github.com/aappleby/smhasher/blob/61a0530f28277f2e850bfc39600ce61d02b518de/src/MurmurHash2.cpp#L37-L86\nfunction murmur2(str) {\n  // 'm' and 'r' are mixing constants generated offline.\n  // They're not really 'magic', they just happen to work well.\n  // const m = 0x5bd1e995;\n  // const r = 24;\n  // Initialize the hash\n  var h = 0; // Mix 4 bytes at a time into the hash\n\n  var k,\n      i = 0,\n      len = str.length;\n\n  for (; len >= 4; ++i, len -= 4) {\n    k = str.charCodeAt(i) & 0xff | (str.charCodeAt(++i) & 0xff) << 8 | (str.charCodeAt(++i) & 0xff) << 16 | (str.charCodeAt(++i) & 0xff) << 24;\n    k =\n    /* Math.imul(k, m): */\n    (k & 0xffff) * 0x5bd1e995 + ((k >>> 16) * 0xe995 << 16);\n    k ^=\n    /* k >>> r: */\n    k >>> 24;\n    h =\n    /* Math.imul(k, m): */\n    (k & 0xffff) * 0x5bd1e995 + ((k >>> 16) * 0xe995 << 16) ^\n    /* Math.imul(h, m): */\n    (h & 0xffff) * 0x5bd1e995 + ((h >>> 16) * 0xe995 << 16);\n  } // Handle the last few bytes of the input array\n\n\n  switch (len) {\n    case 3:\n      h ^= (str.charCodeAt(i + 2) & 0xff) << 16;\n\n    case 2:\n      h ^= (str.charCodeAt(i + 1) & 0xff) << 8;\n\n    case 1:\n      h ^= str.charCodeAt(i) & 0xff;\n      h =\n      /* Math.imul(h, m): */\n      (h & 0xffff) * 0x5bd1e995 + ((h >>> 16) * 0xe995 << 16);\n  } // Do a few final mixes of the hash to ensure the last few\n  // bytes are well-incorporated.\n\n\n  h ^= h >>> 13;\n  h =\n  /* Math.imul(h, m): */\n  (h & 0xffff) * 0x5bd1e995 + ((h >>> 16) * 0xe995 << 16);\n  return ((h ^ h >>> 15) >>> 0).toString(36);\n}\n\nexport { murmur2 as default };\n","/**\r\n * External dependencies\r\n */\r\nimport styled from '@emotion/styled';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\t__experimentalToolsPanelItem as ToolsPanelItem,\r\n\t__experimentalUnitControl as UnitControl,\r\n} from '@wordpress/components';\r\nimport { __ } from '@wordpress/i18n';\r\n\r\nconst SingleColumnToolsPanelItem = styled( ToolsPanelItem )`\r\n\tgrid-column: span 1;\r\n`;\r\n\r\n/**\r\n * @typedef {import('@wordpress/components/build-types/unit-control/types').WPUnitControlUnit} WPUnitControlUnit\r\n */\r\n\r\n/**\r\n * @typedef {Object} WidthHeightToolValue\r\n * @property {string} [width]  Width CSS value.\r\n * @property {string} [height] Height CSS value.\r\n */\r\n\r\n/**\r\n * @callback WidthHeightToolOnChange\r\n * @param {WidthHeightToolValue} nextValue Next dimensions value.\r\n * @return {void}\r\n */\r\n\r\n/**\r\n * @typedef {Object} WidthHeightToolProps\r\n * @property {string}                  [panelId]          ID of the panel that contains the controls.\r\n * @property {WidthHeightToolValue}    [value]            Current dimensions values.\r\n * @property {WidthHeightToolOnChange} [onChange]         Callback to update the dimensions values.\r\n * @property {WPUnitControlUnit[]}     [units]            Units options.\r\n * @property {boolean}                 [isShownByDefault] Whether the panel is shown by default.\r\n */\r\n\r\n/**\r\n * Component that renders controls to edit the dimensions of an image or container.\r\n *\r\n * @param {WidthHeightToolProps} props The component props.\r\n *\r\n * @return {import('react').ReactElement} The width and height tool.\r\n */\r\nexport default function WidthHeightTool( {\r\n\tpanelId,\r\n\tvalue = {},\r\n\tonChange = () => {},\r\n\tunits,\r\n\tisShownByDefault = true,\r\n} ) {\r\n\t// null, undefined, and 'auto' all represent the default value.\r\n\tconst width = value.width === 'auto' ? '' : value.width ?? '';\r\n\tconst height = value.height === 'auto' ? '' : value.height ?? '';\r\n\r\n\tconst onDimensionChange = ( dimension ) => ( nextDimension ) => {\r\n\t\tconst nextValue = { ...value };\r\n\t\t// Empty strings or undefined may be passed and both represent removing the value.\r\n\t\tif ( ! nextDimension ) {\r\n\t\t\tdelete nextValue[ dimension ];\r\n\t\t} else {\r\n\t\t\tnextValue[ dimension ] = nextDimension;\r\n\t\t}\r\n\t\tonChange( nextValue );\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<SingleColumnToolsPanelItem\r\n\t\t\t\tlabel={ __( 'Width' ) }\r\n\t\t\t\tisShownByDefault={ isShownByDefault }\r\n\t\t\t\thasValue={ () => width !== '' }\r\n\t\t\t\tonDeselect={ onDimensionChange( 'width' ) }\r\n\t\t\t\tpanelId={ panelId }\r\n\t\t\t>\r\n\t\t\t\t<UnitControl\r\n\t\t\t\t\tlabel={ __( 'Width' ) }\r\n\t\t\t\t\tplaceholder={ __( 'Auto' ) }\r\n\t\t\t\t\tlabelPosition=\"top\"\r\n\t\t\t\t\tunits={ units }\r\n\t\t\t\t\tmin={ 0 }\r\n\t\t\t\t\tvalue={ width }\r\n\t\t\t\t\tonChange={ onDimensionChange( 'width' ) }\r\n\t\t\t\t\tsize={ '__unstable-large' }\r\n\t\t\t\t/>\r\n\t\t\t</SingleColumnToolsPanelItem>\r\n\t\t\t<SingleColumnToolsPanelItem\r\n\t\t\t\tlabel={ __( 'Height' ) }\r\n\t\t\t\tisShownByDefault={ isShownByDefault }\r\n\t\t\t\thasValue={ () => height !== '' }\r\n\t\t\t\tonDeselect={ onDimensionChange( 'height' ) }\r\n\t\t\t\tpanelId={ panelId }\r\n\t\t\t>\r\n\t\t\t\t<UnitControl\r\n\t\t\t\t\tlabel={ __( 'Height' ) }\r\n\t\t\t\t\tplaceholder={ __( 'Auto' ) }\r\n\t\t\t\t\tlabelPosition=\"top\"\r\n\t\t\t\t\tunits={ units }\r\n\t\t\t\t\tmin={ 0 }\r\n\t\t\t\t\tvalue={ height }\r\n\t\t\t\t\tonChange={ onDimensionChange( 'height' ) }\r\n\t\t\t\t\tsize={ '__unstable-large' }\r\n\t\t\t\t/>\r\n\t\t\t</SingleColumnToolsPanelItem>\r\n\t\t</>\r\n\t);\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useState } from '@wordpress/element';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport AspectRatioTool from './aspect-ratio-tool';\r\nimport ScaleTool from './scale-tool';\r\nimport WidthHeightTool from './width-height-tool';\r\n\r\n/**\r\n * @typedef {import('@wordpress/components/build-types/select-control/types').SelectControlProps} SelectControlProps\r\n */\r\n\r\n/**\r\n * @typedef {import('@wordpress/components/build-types/unit-control/types').WPUnitControlUnit} WPUnitControlUnit\r\n */\r\n\r\n/**\r\n * @typedef {Object} Dimensions\r\n * @property {string} [width]       CSS width property.\r\n * @property {string} [height]      CSS height property.\r\n * @property {string} [scale]       CSS object-fit property.\r\n * @property {string} [aspectRatio] CSS aspect-ratio property.\r\n */\r\n\r\n/**\r\n * @callback DimensionsControlsOnChange\r\n * @param {Dimensions} nextValue\r\n * @return {void}\r\n */\r\n\r\n/**\r\n * @typedef {Object} DimensionsControlsProps\r\n * @property {string}                     [panelId]            ID of the panel that contains the controls.\r\n * @property {Dimensions}                 [value]              Current dimensions values.\r\n * @property {DimensionsControlsOnChange} [onChange]           Callback to update the dimensions values.\r\n * @property {SelectControlProps[]}       [aspectRatioOptions] Aspect ratio options.\r\n * @property {SelectControlProps[]}       [scaleOptions]       Scale options.\r\n * @property {WPUnitControlUnit[]}        [unitsOptions]       Units options.\r\n */\r\n\r\n/**\r\n * Component that renders controls to edit the dimensions of an image or container.\r\n *\r\n * @param {DimensionsControlsProps} props The component props.\r\n *\r\n * @return {Element} The dimensions controls.\r\n */\r\nfunction DimensionsTool( {\r\n\tpanelId,\r\n\tvalue = {},\r\n\tonChange = () => {},\r\n\taspectRatioOptions, // Default options handled by AspectRatioTool.\r\n\tdefaultAspectRatio = 'auto', // Match CSS default value for aspect-ratio.\r\n\tscaleOptions, // Default options handled by ScaleTool.\r\n\tdefaultScale = 'fill', // Match CSS default value for object-fit.\r\n\tunitsOptions, // Default options handled by UnitControl.\r\n} ) {\r\n\t// Coerce undefined and CSS default values to be null.\r\n\tconst width =\r\n\t\tvalue.width === undefined || value.width === 'auto'\r\n\t\t\t? null\r\n\t\t\t: value.width;\r\n\tconst height =\r\n\t\tvalue.height === undefined || value.height === 'auto'\r\n\t\t\t? null\r\n\t\t\t: value.height;\r\n\tconst aspectRatio =\r\n\t\tvalue.aspectRatio === undefined || value.aspectRatio === 'auto'\r\n\t\t\t? null\r\n\t\t\t: value.aspectRatio;\r\n\tconst scale =\r\n\t\tvalue.scale === undefined || value.scale === 'fill'\r\n\t\t\t? null\r\n\t\t\t: value.scale;\r\n\r\n\t// Keep track of state internally, so when the value is cleared by means\r\n\t// other than directly editing that field, it's easier to restore the\r\n\t// previous value.\r\n\tconst [ lastScale, setLastScale ] = useState( scale );\r\n\tconst [ lastAspectRatio, setLastAspectRatio ] = useState( aspectRatio );\r\n\r\n\t// 'custom' is not a valid value for CSS aspect-ratio, but it is used in the\r\n\t// dropdown to indicate that setting both the width and height is the same\r\n\t// as a custom aspect ratio.\r\n\tconst aspectRatioValue = width && height ? 'custom' : lastAspectRatio;\r\n\r\n\tconst showScaleControl = aspectRatio || ( width && height );\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<AspectRatioTool\r\n\t\t\t\tpanelId={ panelId }\r\n\t\t\t\toptions={ aspectRatioOptions }\r\n\t\t\t\tdefaultValue={ defaultAspectRatio }\r\n\t\t\t\tvalue={ aspectRatioValue }\r\n\t\t\t\tonChange={ ( nextAspectRatio ) => {\r\n\t\t\t\t\tconst nextValue = { ...value };\r\n\r\n\t\t\t\t\t// 'auto' is CSS default, so it gets treated as null.\r\n\t\t\t\t\tnextAspectRatio =\r\n\t\t\t\t\t\tnextAspectRatio === 'auto' ? null : nextAspectRatio;\r\n\r\n\t\t\t\t\tsetLastAspectRatio( nextAspectRatio );\r\n\r\n\t\t\t\t\t// Update aspectRatio.\r\n\t\t\t\t\tif ( ! nextAspectRatio ) {\r\n\t\t\t\t\t\tdelete nextValue.aspectRatio;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tnextValue.aspectRatio = nextAspectRatio;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Auto-update scale.\r\n\t\t\t\t\tif ( ! nextAspectRatio ) {\r\n\t\t\t\t\t\tdelete nextValue.scale;\r\n\t\t\t\t\t} else if ( lastScale ) {\r\n\t\t\t\t\t\tnextValue.scale = lastScale;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tnextValue.scale = defaultScale;\r\n\t\t\t\t\t\tsetLastScale( defaultScale );\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Auto-update width and height.\r\n\t\t\t\t\tif ( 'custom' !== nextAspectRatio && width && height ) {\r\n\t\t\t\t\t\tdelete nextValue.height;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tonChange( nextValue );\r\n\t\t\t\t} }\r\n\t\t\t/>\r\n\t\t\t<WidthHeightTool\r\n\t\t\t\tpanelId={ panelId }\r\n\t\t\t\tunits={ unitsOptions }\r\n\t\t\t\tvalue={ { width, height } }\r\n\t\t\t\tonChange={ ( { width: nextWidth, height: nextHeight } ) => {\r\n\t\t\t\t\tconst nextValue = { ...value };\r\n\r\n\t\t\t\t\t// 'auto' is CSS default, so it gets treated as null.\r\n\t\t\t\t\tnextWidth = nextWidth === 'auto' ? null : nextWidth;\r\n\t\t\t\t\tnextHeight = nextHeight === 'auto' ? null : nextHeight;\r\n\r\n\t\t\t\t\t// Update width.\r\n\t\t\t\t\tif ( ! nextWidth ) {\r\n\t\t\t\t\t\tdelete nextValue.width;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tnextValue.width = nextWidth;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Update height.\r\n\t\t\t\t\tif ( ! nextHeight ) {\r\n\t\t\t\t\t\tdelete nextValue.height;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tnextValue.height = nextHeight;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Auto-update aspectRatio.\r\n\t\t\t\t\tif ( nextWidth && nextHeight ) {\r\n\t\t\t\t\t\tdelete nextValue.aspectRatio;\r\n\t\t\t\t\t} else if ( lastAspectRatio ) {\r\n\t\t\t\t\t\tnextValue.aspectRatio = lastAspectRatio;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// No setting defaultAspectRatio here, because\r\n\t\t\t\t\t\t// aspectRatio is optional in this scenario,\r\n\t\t\t\t\t\t// unlike scale.\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Auto-update scale.\r\n\t\t\t\t\tif ( ! lastAspectRatio && !! nextWidth !== !! nextHeight ) {\r\n\t\t\t\t\t\tdelete nextValue.scale;\r\n\t\t\t\t\t} else if ( lastScale ) {\r\n\t\t\t\t\t\tnextValue.scale = lastScale;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tnextValue.scale = defaultScale;\r\n\t\t\t\t\t\tsetLastScale( defaultScale );\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tonChange( nextValue );\r\n\t\t\t\t} }\r\n\t\t\t/>\r\n\t\t\t{ showScaleControl && (\r\n\t\t\t\t<ScaleTool\r\n\t\t\t\t\tpanelId={ panelId }\r\n\t\t\t\t\toptions={ scaleOptions }\r\n\t\t\t\t\tdefaultValue={ defaultScale }\r\n\t\t\t\t\tvalue={ lastScale }\r\n\t\t\t\t\tonChange={ ( nextScale ) => {\r\n\t\t\t\t\t\tconst nextValue = { ...value };\r\n\r\n\t\t\t\t\t\t// 'fill' is CSS default, so it gets treated as null.\r\n\t\t\t\t\t\tnextScale = nextScale === 'fill' ? null : nextScale;\r\n\r\n\t\t\t\t\t\tsetLastScale( nextScale );\r\n\r\n\t\t\t\t\t\t// Update scale.\r\n\t\t\t\t\t\tif ( ! nextScale ) {\r\n\t\t\t\t\t\t\tdelete nextValue.scale;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tnextValue.scale = nextScale;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tonChange( nextValue );\r\n\t\t\t\t\t} }\r\n\t\t\t\t/>\r\n\t\t\t) }\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default DimensionsTool;\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\tSelectControl,\r\n\t__experimentalToolsPanelItem as ToolsPanelItem,\r\n} from '@wordpress/components';\r\nimport { __, _x } from '@wordpress/i18n';\r\n\r\nconst DEFAULT_SIZE_OPTIONS = [\r\n\t{\r\n\t\tlabel: _x( 'Thumbnail', 'Image size option for resolution control' ),\r\n\t\tvalue: 'thumbnail',\r\n\t},\r\n\t{\r\n\t\tlabel: _x( 'Medium', 'Image size option for resolution control' ),\r\n\t\tvalue: 'medium',\r\n\t},\r\n\t{\r\n\t\tlabel: _x( 'Large', 'Image size option for resolution control' ),\r\n\t\tvalue: 'large',\r\n\t},\r\n\t{\r\n\t\tlabel: _x( 'Full Size', 'Image size option for resolution control' ),\r\n\t\tvalue: 'full',\r\n\t},\r\n];\r\n\r\nexport default function ResolutionTool( {\r\n\tpanelId,\r\n\tvalue,\r\n\tonChange,\r\n\toptions = DEFAULT_SIZE_OPTIONS,\r\n\tdefaultValue = DEFAULT_SIZE_OPTIONS[ 0 ].value,\r\n\tisShownByDefault = true,\r\n} ) {\r\n\tconst displayValue = value ?? defaultValue;\r\n\treturn (\r\n\t\t<ToolsPanelItem\r\n\t\t\thasValue={ () => displayValue !== defaultValue }\r\n\t\t\tlabel={ __( 'Resolution' ) }\r\n\t\t\tonDeselect={ () => onChange( defaultValue ) }\r\n\t\t\tisShownByDefault={ isShownByDefault }\r\n\t\t\tpanelId={ panelId }\r\n\t\t>\r\n\t\t\t<SelectControl\r\n\t\t\t\tlabel={ __( 'Resolution' ) }\r\n\t\t\t\tvalue={ displayValue }\r\n\t\t\t\toptions={ options }\r\n\t\t\t\tonChange={ onChange }\r\n\t\t\t\thelp={ __( 'Select the size of the source image.' ) }\r\n\t\t\t\tsize={ '__unstable-large' }\r\n\t\t\t/>\r\n\t\t</ToolsPanelItem>\r\n\t);\r\n}\r\n","/**\n * Internal dependencies\n */\nimport * as globalStyles from './components/global-styles';\nimport { ExperimentalBlockEditorProvider } from './components/provider';\nimport { lock } from './lock-unlock';\nimport { getRichTextValues } from './components/rich-text/get-rich-text-values';\nimport ResizableBoxPopover from './components/resizable-box-popover';\nimport { ComposedPrivateInserter as PrivateInserter } from './components/inserter';\nimport { default as PrivateQuickInserter } from './components/inserter/quick-inserter';\nimport {\n\textractWords,\n\tgetNormalizedSearchTerms,\n\tnormalizeString,\n} from './components/inserter/search-items';\nimport { PrivateListView } from './components/list-view';\nimport BlockInfo from './components/block-info-slot-fill';\nimport { useShowBlockTools } from './components/block-tools/use-show-block-tools';\nimport { cleanEmptyObject, useStyleOverride } from './hooks/utils';\nimport BlockQuickNavigation from './components/block-quick-navigation';\nimport { LayoutStyle } from './components/block-list/layout';\nimport { BlockRemovalWarningModal } from './components/block-removal-warning-modal';\nimport { useLayoutClasses, useLayoutStyles } from './hooks';\nimport DimensionsTool from './components/dimensions-tool';\nimport ResolutionTool from './components/resolution-tool';\nimport {\n\tdefault as ReusableBlocksRenameHint,\n\tuseReusableBlocksRenameHint,\n} from './components/inserter/reusable-block-rename-hint';\nimport { usesContextKey } from './components/rich-text/format-edit';\nimport { ExperimentalBlockCanvas } from './components/block-canvas';\nimport { getDuotoneFilter } from './components/duotone/utils';\nimport { useFlashEditableBlocks } from './components/use-flash-editable-blocks';\nimport {\n\tselectBlockPatternsKey,\n\treusableBlocksSelectKey,\n} from './store/private-keys';\nimport { requiresWrapperOnCopy } from './components/writing-flow/utils';\nimport { PrivateRichText } from './components/rich-text/';\n\n/**\n * Private @wordpress/block-editor APIs.\n */\nexport const privateApis = {};\nlock( privateApis, {\n\t...globalStyles,\n\tExperimentalBlockCanvas,\n\tExperimentalBlockEditorProvider,\n\tgetDuotoneFilter,\n\tgetRichTextValues,\n\tPrivateInserter,\n\tPrivateQuickInserter,\n\textractWords,\n\tgetNormalizedSearchTerms,\n\tnormalizeString,\n\tPrivateListView,\n\tResizableBoxPopover,\n\tBlockInfo,\n\tuseShowBlockTools,\n\tcleanEmptyObject,\n\tuseStyleOverride,\n\tBlockQuickNavigation,\n\tLayoutStyle,\n\tBlockRemovalWarningModal,\n\tuseLayoutClasses,\n\tuseLayoutStyles,\n\tDimensionsTool,\n\tResolutionTool,\n\tReusableBlocksRenameHint,\n\tuseReusableBlocksRenameHint,\n\tusesContextKey,\n\tuseFlashEditableBlocks,\n\tselectBlockPatternsKey,\n\trequiresWrapperOnCopy,\n\tPrivateRichText,\n\treusableBlocksSelectKey,\n} );\n","/**\n * WordPress dependencies\n */\nimport { ResizableBox } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport BlockPopoverCover from '../block-popover/cover';\n\nexport default function ResizableBoxPopover( {\n\tclientId,\n\tresizableBoxProps,\n\t...props\n} ) {\n\treturn (\n\t\t<BlockPopoverCover\n\t\t\tclientId={ clientId }\n\t\t\t__unstablePopoverSlot=\"block-toolbar\"\n\t\t\t{ ...props }\n\t\t>\n\t\t\t<ResizableBox { ...resizableBoxProps } />\n\t\t</BlockPopoverCover>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { useEffect } from '@wordpress/element';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport {\n\tModal,\n\tButton,\n\t__experimentalHStack as HStack,\n} from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { store as blockEditorStore } from '../../store';\nimport { unlock } from '../../lock-unlock';\n\nexport function BlockRemovalWarningModal( { rules } ) {\n\tconst { clientIds, selectPrevious, message } = useSelect( ( select ) =>\n\t\tunlock( select( blockEditorStore ) ).getRemovalPromptData()\n\t);\n\n\tconst {\n\t\tclearBlockRemovalPrompt,\n\t\tsetBlockRemovalRules,\n\t\tprivateRemoveBlocks,\n\t} = unlock( useDispatch( blockEditorStore ) );\n\n\t// Load block removal rules, simultaneously signalling that the block\n\t// removal prompt is in place.\n\tuseEffect( () => {\n\t\tsetBlockRemovalRules( rules );\n\t\treturn () => {\n\t\t\tsetBlockRemovalRules();\n\t\t};\n\t}, [ rules, setBlockRemovalRules ] );\n\n\tif ( ! message ) {\n\t\treturn;\n\t}\n\n\tconst onConfirmRemoval = () => {\n\t\tprivateRemoveBlocks( clientIds, selectPrevious, /* force */ true );\n\t\tclearBlockRemovalPrompt();\n\t};\n\n\treturn (\n\t\t<Modal\n\t\t\ttitle={ __( 'Be careful!' ) }\n\t\t\tonRequestClose={ clearBlockRemovalPrompt }\n\t\t\tsize=\"medium\"\n\t\t>\n\t\t\t<p>{ message }</p>\n\t\t\t<HStack justify=\"right\">\n\t\t\t\t<Button variant=\"tertiary\" onClick={ clearBlockRemovalPrompt }>\n\t\t\t\t\t{ __( 'Cancel' ) }\n\t\t\t\t</Button>\n\t\t\t\t<Button variant=\"primary\" onClick={ onConfirmRemoval }>\n\t\t\t\t\t{ __( 'Delete' ) }\n\t\t\t\t</Button>\n\t\t\t</HStack>\n\t\t</Modal>\n\t);\n}\n"],"names":["module","exports","keys","values","map","Map","has","key","indexOf","get","set","value","push","delete","index","splice","createEvent","name","Event","bubbles","e","evt","document","initEvent","assign","ta","nodeName","heightOffset","clientWidth","cachedHeight","pageResize","update","destroy","style","window","removeEventListener","Object","forEach","bind","height","resize","overflowY","overflowX","wordWrap","addEventListener","getComputedStyle","boxSizing","parseFloat","paddingTop","paddingBottom","borderTopWidth","borderBottomWidth","isNaN","changeOverflow","width","offsetWidth","scrollHeight","overflows","el","arr","parentNode","Element","scrollTop","node","getParentOverflows","docTop","documentElement","styleHeight","Math","round","computed","actualHeight","offsetHeight","dispatchEvent","err","methods","autosize","options","Array","prototype","call","length","x","default","hasOwn","hasOwnProperty","classNames","classes","i","arguments","arg","argType","isArray","inner","apply","toString","join","prop","currentStyle","replace","word","letter","toUpperCase","Diff","buildValues","diff","components","newString","oldString","useLongestToken","componentPos","componentLen","newPos","oldPos","component","removed","slice","count","added","tmp","oldValue","lastComponent","equals","pop","callback","this","self","done","setTimeout","undefined","castInput","removeEmpty","tokenize","newLen","oldLen","editLength","maxEditLength","bestPath","extractCommon","execEditLength","diagonalPath","basePath","addPath","removePath","canAdd","canRemove","path","pushComponent","exec","ret","last","commonCount","left","right","comparator","ignoreCase","toLowerCase","array","split","chars","oldStr","newStr","characterDiff","equal","a","b","constructor","size","entries","Set","ArrayBuffer","isView","RegExp","source","flags","valueOf","computedStyle","lnHeightStr","lnHeight","_lnHeightStyle","lineHeight","_node","createElement","innerHTML","setAttribute","fontSizeStr","fontSize","padding","border","body","appendChild","removeChild","canUseDOM","ExecutionEnvironment","canUseWorkers","Worker","canUseEventListeners","attachEvent","canUseViewport","screen","isInWorker","_ie","_firefox","_opera","_webkit","_chrome","_ie_real_version","_osx","_windows","_linux","_android","_win64","_iphone","_ipad","_native","_mobile","_populated","_populate","uas","navigator","userAgent","agent","os","NaN","documentMode","trident","ver","UserAgent_DEPRECATED","ie","ieCompatibilityMode","ie64","firefox","opera","webkit","safari","chrome","windows","osx","linux","iphone","mobile","nativeApp","android","ipad","useHasFeature","implementation","hasFeature","eventNameSuffix","capture","eventName","isSupported","element","isEventSupported","normalizeWheel","event","sX","sY","pX","pY","detail","wheelDelta","wheelDeltaY","wheelDeltaX","axis","HORIZONTAL_AXIS","deltaY","deltaX","deltaMode","spinX","spinY","pixelX","pixelY","getEventType","String","create","isColorSupported","reset","bold","dim","italic","underline","inverse","hidden","strikethrough","black","red","green","yellow","blue","magenta","cyan","white","gray","bgBlack","bgRed","bgGreen","bgYellow","bgBlue","bgMagenta","bgCyan","bgWhite","createColors","defineProperty","__importDefault","mod","__esModule","postcss_1","PostCSSPlugin_1","prefixWrapCSSSelector","prefixWrapCSSRule","CSSSelector_1","cssRule","nested","ignoredSelectors","prefixSelector","prefixRootTags","rules","selector","filter","cssRuleMatchesPrefixSelector","cssSelector","isValidCSSSelector","cleanedSelector","cleanSelector","startsWith","isKeyframes","some","currentValue","match","isNotRootTag","ANY_WHITESPACE_AT_BEGINNING_OR_END","IS_ROOT_TAG","parent","parentReal","type","escapedPrefixSelector","test","shouldIncludeFilePath","filePath","whitelist","blacklist","__createBinding","o","m","k","k2","desc","getOwnPropertyDescriptor","writable","configurable","enumerable","__setModuleDefault","v","__importStar","result","asPostCSSv7PluginGenerator","PostCSSPrefixWrap_1","postcss","plugin","PLUGIN_NAME","prefix","asPostCSSv8PluginGenerator","isPostCSSv8","Root","postcssPlugin","Once","root","prefixRoot","PostCSS8Plugin_1","PostCSS7Plugin_1","CSSRuleWrapper_1","FileIncludeList_1","isPrefixSelector","css","input","file","walkRules","CSSValueParser","opts","config","skipHostRelativeUrls","Declaration","decl","parsedValue","valueChanged","walk","urlVal","nodes","basedUrl","URL","rootUrl","pathname","stringify","parse","ValueParser","cb","bubble","unit","openParentheses","charCodeAt","closeParentheses","singleQuote","doubleQuote","backslash","slash","comma","colon","star","uLower","uUpper","plus","isUnicodeRange","next","quote","prev","token","escape","escapePos","whitespacePos","parenthesesOpenPos","tokens","pos","code","max","stack","balanced","before","after","sourceEndIndex","sourceIndex","unclosed","stringifyNode","custom","buf","customResult","minus","dot","exp","EXP","nextCode","nextNextCode","likeNumber","number","Container","AtRule","defaults","super","append","children","proxyOf","prepend","registerAtRule","Node","Comment","Rule","isClean","my","cleanSource","markDirtyUp","child","each","iterator","getIterator","indexes","addToError","walkDecls","walkAtRules","walkComments","normalize","markDirty","reverse","first","unshift","id","cleanRaws","keepBetween","insertBefore","exist","add","insertAfter","removeAll","replaceValues","pattern","props","includes","fast","every","condition","sample","Error","text","rebuild","raws","getProxyProcessor","args","toProxy","other","lastEach","registerParse","dependant","registerRule","registerRoot","setPrototypeOf","pico","terminalHighlight","CssSyntaxError","message","line","column","reason","endLine","endColumn","setMessage","captureStackTrace","showSourceCode","color","mark","aside","lines","start","end","min","maxWidth","str","gutter","spacing","variable","LazyResult","Processor","Document","toResult","registerLazyResult","registerProcessor","PreviousMap","Input","fromJSON","json","inputs","n","ownInputs","inputHydrated","__proto__","inputId","SourceMapConsumer","SourceMapGenerator","fileURLToPath","pathToFileURL","resolve","isAbsolute","nanoid","fromOffsetCache","Symbol","sourceMapAvailable","Boolean","pathAvailable","hasBOM","from","consumer","mapResolve","fromOffset","offset","lastLine","lineToIndex","prevIndex","l","mid","col","error","origin","url","to","fromUrl","originalPositionFor","sourceRoot","mapFile","protocol","sourceContentFor","toJSON","consumerCache","registerInput","MapGenerator","Result","TYPE_TO_CLASS_NAME","atrule","rule","comment","PLUGIN_PROPS","prepare","DeclarationExit","RuleExit","AtRuleExit","CommentExit","RootExit","DocumentExit","OnceExit","NOT_VISITORS","CHILDREN","isPromise","obj","then","getEvents","toStack","events","eventIndex","visitors","visitorIndex","cleanMarks","processor","stringified","processed","inline","parser","syntax","helpers","plugins","toStringTag","content","sync","messages","warnings","onFulfilled","onRejected","async","catch","onFinally","Promise","reject","processing","runAsync","getAsyncError","runOnRoot","prepareVisitors","hasListener","walkSync","listeners","subRoot","visitSync","stringifier","data","generate","visitor","promise","lastPlugin","handleError","roots","all","postcssVersion","console","visitTick","version","visit","registerPostcss","list","string","separators","current","func","inQuote","prevQuote","trim","space","dirname","relative","sep","cssString","mapOpts","isMap","previous","previousMaps","isInline","annotation","isSourcesContent","sourcesContent","withContent","clearAnnotation","setSourcesContent","already","setSourceContent","toUrl","applyPrevMaps","applySourceMap","isAnnotation","toBase64","Buffer","btoa","unescape","encodeURIComponent","addAnnotation","outputFile","eol","generateMap","generateString","fromSourceMap","addMapping","generated","original","absolute","encodeURI","sourcePath","noSource","mapping","lastIndexOf","p","semicolon","NoWorkResult","_processor","_css","_opts","_map","generatedCSS","generatedMap","_root","Stringifier","cloneNode","cloned","j","clone","rangeBy","warn","remove","overrides","cloneBefore","cloneAfter","replaceWith","bookmark","foundSelf","raw","defaultType","between","_","fixed","emitInputs","inputsNextIndex","positionInside","positionBy","endIndex","proxyCache","Proxy","postcssNode","s","Parser","tokenizer","SAFE_COMMENT_NEIGHBOR","empty","spaces","customProperty","createTokenizer","endOfFile","nextToken","freeSemicolon","emptyRule","endFile","init","getPosition","bracket","brackets","back","unclosedBracket","unknownWord","spacesAndCommentsFromEnd","findLastWithPosition","shift","firstSpaces","precheckMissedSemicolon","important","stringFrom","spacesFromEnd","cache","concat","checkMissedSemicolon","unnamedAtrule","open","params","afterName","spacesAndCommentsFromStart","unexpectedClose","unclosedBlock","ownSemicolon","clean","reduce","lastTokenType","doubleColon","founded","Warning","initializer","warningPrinted","creator","process","env","LANG","transformer","processOpts","pluginOpts","atRule","existsSync","readFileSync","loadAnnotation","startWith","loadMap","substr","getAnnotationURL","sourceMapString","comments","substring","decodeInline","decodeURIComponent","lastMatch","atob","encoding","loadFile","JSON","prevPath","mappings","_mappings","sections","use","normalized","warning","ignore","selectors","DEFAULT_RAW","indent","beforeDecl","beforeRule","beforeOpen","beforeClose","beforeComment","emptyBody","commentLeft","commentRight","builder","rawValue","block","own","detect","rawCache","beforeAfter","method","rawSemicolon","rawEmptyBody","rawIndent","parts","rawBeforeComment","rawBeforeDecl","rawBeforeRule","rawBeforeClose","rawBeforeOpen","rawColon","depth","step","SINGLE_QUOTE","DOUBLE_QUOTE","BACKSLASH","SLASH","NEWLINE","SPACE","FEED","TAB","CR","OPEN_SQUARE","CLOSE_SQUARE","OPEN_PARENTHESES","CLOSE_PARENTHESES","OPEN_CURLY","CLOSE_CURLY","SEMICOLON","ASTERISK","COLON","AT","RE_AT_END","RE_WORD_END","RE_BAD_BRACKET","RE_HEX_ESCAPE","escaped","currentToken","ignoreErrors","buffer","returned","what","ignoreUnclosed","controlChar","fromCharCode","lastIndex","charAt","position","printed","range","opt","ReactPropTypesSecret","emptyFunction","emptyFunctionWithReset","resetWarningCache","shim","propName","componentName","location","propFullName","secret","getShim","isRequired","ReactPropTypes","bigint","bool","object","symbol","any","arrayOf","elementType","instanceOf","objectOf","oneOf","oneOfType","shape","exact","checkPropTypes","PropTypes","extendStatics","__extends","d","__","__assign","t","__rest","getOwnPropertySymbols","React","getLineHeight","RESIZED","TextareaAutosizeClass","_super","_this","state","textarea","onResize","updateLineHeight","setState","onChange","currentTarget","componentDidMount","_a","maxRows","componentWillUnmount","render","_b","innerRef","maxHeight","ref","componentDidUpdate","defaultProps","rows","propTypes","Component","TextareaAutosize","forwardRef","TextareaAutosize_1","characterMap","allAccents","firstAccent","matcher","removeAccents","existIndex","originalCSS","usesFileUrls","memoizedFileURLs","memoizedPaths","memoizedURLs","cached","toFileUrl","fileURL","stringRepresentation","random","customAlphabet","alphabet","defaultSize","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","definition","r","mayDisplayControlsKey","mayDisplayParentControlsKey","blockEditingModeKey","blockBindingsKey","DEFAULT_BLOCK_EDIT_CONTEXT","isSelected","Context","createContext","Provider","useBlockEditContext","useContext","PREFERENCES_DEFAULTS","insertUsage","SETTINGS_DEFAULTS","alignWide","supportsLayout","colors","slug","fontSizes","_x","imageDefaultSize","imageSizes","imageEditing","allowedBlockTypes","maxUploadFileSize","allowedMimeTypes","canLockBlocks","enableOpenverseMediaCategory","clearBlockSelection","__experimentalCanUserUseUnfilteredHTML","__experimentalBlockDirectory","__mobileEnablePageTemplates","__experimentalBlockPatterns","__experimentalBlockPatternCategories","__unstableGalleryWithImageBlocks","__unstableIsPreviewMode","blockInspectorAnimation","animationParent","enterDirection","generateAnchors","gradients","gradient","__unstableResolvedAssets","styles","scripts","insertAt","elements","moveTo","withoutMovedElements","identity","mapBlockOrder","blocks","rootClientId","clientId","innerBlocks","order","subClientId","mapBlockParents","currentBlocks","flattenBlocks","transform","getFlattenedBlocksWithoutAttributes","attributes","restBlock","getFlattenedBlockAttributes","isUpdatingSameBlockAttribute","action","lastAction","fastDeepEqual","clientIds","hasSameKeys","updateBlockTreeForBlocks","treeToUpdate","tree","flattenedBlocks","byClientId","subBlock","updateParentInnerBlocksInTree","updatedClientIds","updateChildrenOfUpdatedClientIds","uncontrolledParents","controlledParents","parents","controlledInnerBlocks","pipe","combineReducers","reducer","updatedId","newState","inserterClientIds","getFlattenedClientIds","replacedClientIds","parentsOfRemovedBlocks","parentId","removedClientIds","updatedBlockUids","fromRootClientId","toRootClientId","getAllChildren","keepControlledInnerBlocks","nestedControllers","stateAfterBlocksRemoval","stateAfterInsert","stateAfterInsertOrder","_key","explicitPersistent","markNextChangeAsNotPersistent","nextIsPersistentChange","nextState","_state$isPersistentCh","isPersistentChange","isExplicitPersistentChange","_state$isPersistentCh2","IGNORED_ACTION_TYPES","isIgnoredChange","tempState","changes","updates","hasChange","_action$attributes","updatedAttributeEntries","uniqueByBlock","hasUpdatedAttributes","existingAttributes","newAttributes","_state$get","blockOrder","subState","mappedBlocks","_state$get$filter","fromIndex","firstClientId","firstIndex","lastClientId","newSubOrder","_order$filter","hasControlledInnerBlocks","selectionHelper","updateSelection","blockToSelect","indexToSelect","combinedReducers","isDragging","isTyping","isBlockInterfaceHidden","draggedBlocks","selection","selectionStart","attributeKey","startOffset","selectionEnd","endOffset","startClientId","endClientId","isMultiSelecting","isSelectionEnabled","initialPosition","blocksMode","blockListSettings","fromEntries","settings","removedBlock","restBlocks","insertionPoint","__unstableWithInserter","operation","nearestSide","template","isValid","preferences","nextInsertUsage","prevUsage","blockName","select","blocksStore","getActiveBlockVariation","time","lastBlockAttributesChange","accumulator","lastFocus","editorMode","mode","hasBlockMovingClientId","expandedBlock","highlightedBlock","isHighlighted","lastBlockInserted","meta","temporarilyEditingAsBlocks","temporarilyEditingFocusModeRevert","focusModeToRevert","blockVisibility","blockEditingModes","styleOverrides","removalPromptData","selectPrevious","blockRemovalRules","openedBlockSettingsMenu","_action$clientId","registeredInserterMediaCategories","category","automaticChangeStatus","LEAF_KEY","isShallowEqual","getDependants","rootCache","normalizedGetDependants","clear","WeakMap","callSelector","dependants","len","caches","isUniqueByDependants","head","createCache","getCache","lastDependants","val","SVG","xmlns","viewBox","Path","selectBlockPatternsKey","reusableBlocksSelectKey","lock","unlock","__dangerousOptInToUnstableAPIsOnlyForCoreModules","STORE_NAME","checkAllowList","item","defaultResult","checkAllowListRecursive","blocksQueue","innerBlock","getAllPatternsDependants","__experimentalUserPatternCategories","__experimentalReusableBlocks","blockPatterns","getReusableBlocks","getInsertBlockTypeDependants","templateLock","orderBy","items","field","sort","cmpA","cmpB","orderA","findIndex","orderB","EMPTY_ARRAY","EMPTY_SET","getBlockName","socialLinkName","Platform","OS","service","isBlockValid","getBlockAttributes","getBlock","__unstableGetBlockWithoutInnerBlocks","createSelector","getBlocks","treeKey","areInnerBlocksControlled","__unstableGetClientIdWithClientIdsTree","deprecated","since","__unstableGetClientIdsTree","getBlockOrder","getClientIdsOfDescendants","rootIds","ids","rootId","getClientIdsWithDescendants","getGlobalBlockCount","getBlocksByName","blockNames","foundBlocks","__experimentalGetGlobalBlocksByName","alternative","getBlocksByClientId","getBlockNamesByClientId","getBlockCount","getSelectionStart","getSelectionEnd","getBlockSelectionStart","getBlockSelectionEnd","getSelectedBlockCount","getMultiSelectedBlockClientIds","hasSelectedBlock","getSelectedBlockClientId","getSelectedBlock","getBlockRootClientId","_state$blocks$parents","getBlockParents","ascending","getBlockParentsByBlockName","hasName","getBlockHierarchyRootClientId","getLowestCommonAncestorWithSelectedBlock","selectedId","clientParents","selectedParents","lowestCommonAncestor","maxDepth","getAdjacentBlockClientId","modifier","getFirstMultiSelectedBlockClientId","getLastMultiSelectedBlockClientId","orderSet","nextIndex","getPreviousBlockClientId","getNextBlockClientId","getSelectedBlocksInitialCaretPosition","getSelectedBlockClientIds","startIndex","getMultiSelectedBlocks","multiSelectedBlockClientIds","selectedClientIds","isFirstMultiSelectedBlock","isBlockMultiSelected","isAncestorMultiSelected","ancestorClientId","isMultiSelected","getMultiSelectedBlocksStartClientId","getMultiSelectedBlocksEndClientId","__unstableIsFullySelected","selectionAnchor","selectionFocus","__unstableIsSelectionCollapsed","__unstableSelectionHasUnmergeableBlock","getBlockType","merge","__unstableIsSelectionMergeable","isForward","anchorRootClientId","targetBlockClientId","blockToMergeClientId","targetBlockName","blockToMerge","blocksToMerge","switchToBlockType","__unstableGetSelectedBlocksWithPartialSelection","anchorIndex","focusIndex","blockA","blockB","htmlA","htmlB","valueA","html","valueB","toHTMLString","getBlockIndex","isBlockSelected","hasSelectedInnerBlock","deep","selectedBlockClientIds","hasDraggedInnerBlock","innerClientId","isBlockBeingDragged","isBlockWithinSelection","hasMultiSelection","getBlockMode","isDraggingBlocks","getDraggedBlockClientIds","isAncestorBeingDragged","parentClientId","isCaretWithinFormattedText","getBlockInsertionPoint","isBlockInsertionPointVisible","isValidTemplate","getTemplate","getTemplateLock","_getBlockListSettings","_state$settings$templ","getBlockListSettings","canInsertBlockTypeUnmemoized","blockType","getSettings","getBlockEditingMode","parentBlockListSettings","parentName","parentBlockType","parentAllowedChildBlocks","allowedBlocks","hasParentAllowedBlock","parentAllowedBlocks","hasParentListAllowedBlock","blockAllowedParentBlocks","hasBlockAllowedParent","hasBlockAllowedAncestor","blockAllowedAncestorBlocks","ancestor","canInsert","applyFilters","canInsertBlockType","canInsertBlocks","canRemoveBlock","canRemoveBlocks","canMoveBlock","move","canMoveBlocks","canEditBlock","edit","canLockBlockType","nameOrType","hasBlockSupport","getInsertUsage","_state$preferences$in","canIncludeBlockTypeInInserter","calculateFrecency","duration","Date","now","buildBlockTypeItem","buildScope","isDisabled","blockItemBase","title","icon","frecency","inserterVariations","getBlockVariations","initialAttributes","description","keywords","variations","example","utility","getInserterItems","createRegistrySelector","syncedPatternInserterItems","reusableBlock","wp_pattern_sync_status","src","foreground","syncStatus","buildBlockTypeInserterItem","getBlockTypes","isDefault","variationMapper","getItemFromVariation","variation","variationId","core","coreItems","noncore","nonCoreItems","groupByType","getBlockTransformItems","normalizedBlocks","buildBlockTypeTransformItem","blockTypeTransformItems","itemsByName","possibleTransforms","getPossibleBlockTransformations","hasInserterItems","getAllowedBlocks","blockTypes","__experimentalGetAllowedBlocks","getDirectInsertBlock","_state$blockListSetti","defaultBlock","directInsert","__experimentalGetDirectInsertBlock","__experimentalGetParsedPattern","patternName","getAllPatterns","find","__unstableSkipMigrationLogs","metadata","categories","getAllowedPatternsDependants","__experimentalGetAllowedPatterns","getParsedPattern","patterns","parsedPatterns","inserter","availableParsedPatterns","patternsAllowed","getPatternsByBlockTypes","normalizedBlockNames","filteredPatterns","__experimentalGetPatternsByBlockTypes","__experimentalGetPatternTransformItems","selectedBlockNames","isLastBlockChangePersistent","__experimentalGetBlockListSettingsForBlocks","blockListSettingsForBlocks","__experimentalGetReusableBlockTitle","__unstableIsLastBlockChangeIgnored","__experimentalGetLastBlockAttributeChanges","isNavigationMode","__unstableGetEditorMode","didAutomaticChange","isBlockHighlighted","__experimentalGetActiveBlockIdByBlockNames","validBlockNames","selectedBlockClientId","entityAreaParents","wasBlockJustInserted","isBlockVisible","_state$blockVisibilit","__unstableGetVisibleBlocks","visibleBlocks","__unstableGetContentLockingParent","__unstableGetTemporarilyEditingAsBlocks","__unstableGetTemporarilyEditingFocusModeToRevert","__unstableHasActiveBlockOverlayActive","blockSupportDisable","__unstableIsWithinBlockOverlay","blockEditingMode","__experimentalHasContentRoleAttribute","parentMode","isUngroupable","_clientId","getGroupingBlockName","groupingBlockName","transforms","ungroup","isGroupable","_clientIds","undoIgnoreBlocks","WeakSet","privateSettings","__experimentalUpdateSettings","stripExperimentalSettings","cleanSettings","hideBlockInterface","showBlockInterface","privateRemoveBlocks","forceRemove","dispatch","registry","maybeArray","getBlockRemovalRules","displayBlockRemovalPrompt","selectPreviousBlock","batch","ensureDefaultBlock","__unstableHasCustomAppender","insertDefaultBlock","clearBlockRemovalPrompt","setBlockRemovalRules","setOpenedBlockSettingsMenu","setStyleOverride","deleteStyleOverride","syncDerivedUpdates","updatedBlocks","setLastFocus","stopEditingAsBlocks","__unstableMarkNextChangeAsNotPersistent","updateBlockAttributes","updateBlockListSettings","updateSettings","focusMode","__unstableSetTemporarilyEditingAsBlocks","startDragging","stopDragging","expandBlock","INSERTER_PATTERN_TYPES","user","theme","directory","INSERTER_SYNC_TYPES","full","unsynced","allPatternsCategory","label","myPatternsCategory","isPatternFiltered","sourceFilter","syncFilter","isUserPattern","isDirectoryPattern","setImmutably","leaf","lvl","getValueFromObjectPath","defaultValue","_value","arrayPath","fieldName","blockedPaths","deprecatedFlags","disableCustomColors","disableCustomGradients","disableCustomFontSizes","enableCustomLineHeight","enableCustomUnits","enableCustomSpacing","prefixedFlags","removeCustomPrefixes","mergeCache","overrideOrigins","_ref","_value$custom","hasOriginValue","getBlockSettings","paths","candidates","normalizedPath","candidateClientId","_getValueFromObjectPa","candidateAtts","__experimentalFeatures","PATHS_WITH_OVERRIDE","deprecatedSettingsValue","getLastInsertedBlocksClientIds","getBlockWithoutAttributes","isBlockSubtreeDisabled","isChildSubtreeDisabled","childClientId","getEnabledClientIdsTree","getEnabledClientIdsTreeUnmemoized","getEnabledBlockParents","getRemovalPromptData","getOpenedBlockSettingsMenu","getStyleOverrides","getRegisteredInserterMediaCategories","getInserterMediaCategories","inserterMediaCategories","coreInserterMediaCategoriesNames","mimeType","mediaType","hasAllowedPatterns","_state$settings$selec","reusableBlocksSelect","userPattern","wp_pattern_category","catId","y","_state$settings$__exp","getLastFocus","getExpandedBlock","START_OF_SELECTED_AREA","retrieveSelectedAttribute","blockAttributes","RichTextData","castArray","resetBlocks","validateBlocksToTemplate","isBlocksValidToTemplate","doBlocksMatchTemplate","setTemplateValidity","resetSelection","receiveBlocks","updateBlock","selectBlock","fallbackToParent","previousBlockClientId","firstParentClientId","selectNextBlock","nextBlockClientId","startMultiSelect","stopMultiSelect","multiSelect","__experimentalInitialPosition","blockCount","speak","sprintf","_n","clearSelectedBlock","toggleSelection","replaceBlocks","replaceBlock","createOnMove","moveBlocksDown","moveBlocksUp","moveBlocksToPosition","moveBlockToPosition","insertBlock","insertBlocks","hint","showInsertionPoint","__unstableOptions","hideInsertionPoint","synchronizeTemplate","updatedBlockList","synchronizeBlocksWithTemplate","__unstableDeleteSelection","targetSelection","targetBlock","targetBlockType","selectionA","selectionB","insert","cloneA","cloneBlock","cloneB","followingBlock","blocksWithTheSameType","updatedAttributes","newAttributeKey","convertedHtml","convertedValue","newOffset","newValue","newHtml","replacement","selectionChange","__unstableSplitSelection","__unstableExpandSelection","mergeBlocks","firstBlockClientId","secondBlockClientId","clientIdA","clientIdB","blockAType","getBlockSupport","blockWithSameType","removeBlock","rootAttributes","previousRootAttributes","isUnmodifiedDefaultBlock","blockBType","attributeDefinition","canRestoreTextSelection","selectedBlock","removeBlocks","replaceInnerBlocks","toggleBlockMode","startTyping","stopTyping","startDraggingBlocks","stopDraggingBlocks","enterFormattedText","exitFormattedText","defaultBlockName","getDefaultBlockName","createBlock","__unstableSaveReusableBlock","__unstableMarkLastChangeAsPersistent","__unstableMarkAutomaticChange","requestIdleCallback","setNavigationMode","__unstableSetEditorMode","firstSelectedClientId","setBlockMovingClientId","duplicateBlocks","clientIdsArray","lastSelectedIndex","clonedBlocks","__experimentalCloneSanitizedBlock","insertBeforeBlock","blockIndex","directInsertBlock","copiedAttributes","attributesToCopy","insertAfterBlock","toggleBlockHighlight","flashBlock","setHasControlledInnerBlocks","setBlockVisibility","registerInserterMediaCategory","labels","fetch","isExternalResource","setBlockEditingMode","unsetBlockEditingMode","storeConfig","actions","store","createReduxStore","persist","registeredStore","registerStore","useSettings","useSelect","blockEditorStore","useSetting","note","registerPrivateActions","privateActions","registerPrivateSelectors","privateSelectors","DEFAULT_MAXIMUM_VIEWPORT_WIDTH","DEFAULT_MINIMUM_VIEWPORT_WIDTH","DEFAULT_SCALE_FACTOR","DEFAULT_MINIMUM_FONT_SIZE_FACTOR_MIN","DEFAULT_MINIMUM_FONT_SIZE_FACTOR_MAX","DEFAULT_MINIMUM_FONT_SIZE_LIMIT","getComputedFluidTypographyValue","minimumFontSize","maximumFontSize","minimumViewportWidth","maximumViewportWidth","scaleFactor","minimumFontSizeLimit","getTypographyValueAndUnit","fontSizeParsed","minimumFontSizeLimitParsed","coerceTo","fontSizeValueInPx","minimumFontSizeFactor","log2","calculatedMinimumFontSize","roundToPrecision","minimumFontSizeParsed","fontSizeUnit","maximumFontSizeParsed","minimumFontSizeRem","maximumViewportWidthParsed","minimumViewportWidthParsed","linearDenominator","minViewportWidthOffsetValue","viewportWidthOffset","linearFactorScaled","isFinite","rootSizeValue","acceptableUnits","acceptableUnitsGroup","regexUnits","matches","returnValue","digits","base","pow","Number","getTypographyFontSizeValue","preset","isFluidTypographyEnabled","typography","fluid","fluidTypographySettings","typographySettings","layoutSettings","layout","defaultMaxViewportWidth","wideSize","maxViewportWidth","getFluidTypographyOptionsFromSettings","minFontSize","minViewportWidth","fluidSettings","ROOT_BLOCK_SELECTOR","ROOT_CSS_PROPERTIES_SELECTOR","PRESET_METADATA","valueKey","cssVarInfix","classSuffix","propertyName","valueFunc","STYLE_PATH_TO_CSS_VAR_INFIX","shadow","TOOLSPANEL_DROPDOWNMENU_PROPS","popoverProps","placement","findInPresetsBy","features","presetPath","presetProperty","presetValueValue","orderedPresetsByOrigin","presetByOrigin","origins","presets","presetObject","getValueFromVariable","refPath","parsedVar","USER_VALUE_PREFIX","endsWith","THEME_VALUE_PREFIX","THEME_VALUE_SUFFIX","presetType","getValueFromPresetVariable","getValueFromCustomVariable","scopeSelector","scope","scopes","selectorsScoped","outer","areGlobalStyleConfigsEqual","GlobalStylesContext","merged","setUserConfig","EMPTY_CONFIG","VALID_SETTINGS","useGlobalStylesReset","useCallback","useGlobalSetting","propertyPath","configs","appendedBlockPath","appendedPropertyPath","contextualPath","globalPath","sourceKey","useMemo","configToUse","setting","_getValueFromObjectPa2","currentConfig","useGlobalStyle","shouldDecodeEncode","mergedConfig","baseConfig","userConfig","appendedPath","finalPath","rawResult","variableStylePath","presetPropertyValue","getPresetVariableFromValue","useSettingsForBlockElement","parentSettings","supportedStyles","supports","getSupportedStyles","updatedSettings","customFontSize","fontFamilies","background","button","heading","link","caption","customGradient","defaultDuotone","customDuotone","textColumns","sides","dimensions","useColorsPerOrigin","customColors","palette","themeColors","defaultColors","shouldDisplayDefaultColors","defaultPalette","useGradientsPerOrigin","customGradients","themeGradients","defaultGradients","shouldDisplayDefaultGradients","cleanEmptyObject","cleanedNestedObjects","transformStyles","activeSupports","migrationPaths","results","isActive","referenceBlockAttributes","returnBlock","support","styleValue","shouldSkipSerialization","blockNameOrType","featureSet","feature","skipSerialization","__experimentalSkipSerialization","useStyleOverride","assets","__unstableType","useDispatch","fallbackId","useId","useEffect","_id","useBlockSettings","parentLayout","backgroundImage","backgroundSize","customFontFamilies","defaultFontFamilies","themeFontFamilies","customFontSizes","defaultFontSizes","themeFontSizes","fontStyle","fontWeight","textDecoration","writingMode","textTransform","letterSpacing","margin","blockGap","spacingSizes","units","aspectRatio","minHeight","borderColor","borderRadius","borderStyle","borderWidth","customColorsEnabled","userDuotonePalette","themeDuotonePalette","defaultDuotonePalette","userGradientPalette","themeGradientPalette","defaultGradientPalette","areCustomGradientsEnabled","isBackgroundEnabled","isLinkEnabled","isTextEnabled","isHeadingEnabled","isButtonEnabled","duotone","radius","BlockPropsPure","memo","useBlockProps","setAllWrapperProps","wrapperProps","setWrapperProps","nextAll","addFilter","apiVersion","createSlotFill","BlockControlsFill","group","controls","__experimentalShareWithChildBlocks","Fill","shareWithChildBlocks","context","groups","useBlockControlsFill","innerMarkup","Fragment","ToolbarGroup","StyleProvider","fillProps","forwardedContext","ComponentsContext","privateApis","BlockControlsSlot","toolbarState","ToolbarContext","contextState","Slot","fills","useSlotFills","__unstableName","slot","bubblesVirtually","BlockControls","BlockFormatControls","LAYOUT_DEFINITIONS","className","baseStyles","float","spacingStyles","constrained","flex","displayMode","gap","grid","appendSelectors","subselector","getBlockGapCSS","layoutDefinitions","layoutType","blockGapValue","output","gapStyle","cssProperty","getAlignmentsInfo","contentSize","alignmentInfo","sizeRegex","none","wide","opacity","fill","sidesLeft","ALL_SIDES","DEFAULT_VALUES","top","bottom","ICONS","sidesAll","axial","horizontal","sidesHorizontal","vertical","sidesVertical","sidesTop","sidesRight","sidesBottom","LABELS","mixed","VIEWS","isValueSpacingPreset","getCustomValueFromPreset","getSpacingPresetSlug","spacingSize","getPresetValueFromCustomValue","spacingMatch","getSpacingPresetCssVar","hasAxisSupport","hasHorizontalSupport","hasVerticalSupport","getGapCSSValue","blockGapBoxControlValue","isValueString","getGapBoxControlValueFromStyle","row","alignBottom","alignCenter","alignTop","alignStretch","spaceBetween","BLOCK_ALIGNMENTS_CONTROLS","center","stretch","DEFAULT_CONTROLS","isCollapsed","isToolbar","applyOrUnset","align","activeAlignment","defaultAlignmentControl","UIComponent","ToolbarDropdownMenu","extraProps","control","role","onClick","BlockVerticalAlignmentControl","BlockVerticalAlignmentUI","BlockVerticalAlignmentToolbar","icons","justifyLeft","justifyCenter","justifyRight","justifySpaceBetween","justifyStretch","allowedControls","handleClick","allControls","elem","JustifyContentControl","JustifyContentUI","JustifyToolbar","justifyContentMap","alignItemsMap","verticalAlignmentMap","flexWrapOptions","inspectorControls","layoutBlockSupport","allowOrientation","Flex","FlexItem","FlexLayoutJustifyContentControl","OrientationControl","FlexWrapControl","toolBarControls","allowSwitching","allowVerticalAlignment","FlexLayoutVerticalAlignmentControl","getLayoutStyle","hasBlockGapSupport","orientation","justifyContent","flexWrap","verticalAlignment","alignItems","getOrientation","getAlignments","defaultVerticalAlignment","onVerticalAlignmentChange","verticalAlignmentOptions","Button","isPressed","POPOVER_PROPS","onJustificationChange","justificationOptions","ToggleGroupControl","__nextHasNoMarginBottom","ToggleGroupControlOptionIcon","ToggleControl","checked","newVerticalAlignment","newJustification","arrowRight","arrowDown","blockGapStyleValue","isBlockBasedTheme","alignments","alignment","info","cloneElement","allowJustification","allowCustomContentAndWideSize","availableUnits","useCustomUnits","UnitControl","labelPosition","__unstableInputWidth","nextWidth","Icon","positionCenter","stretchWide","marginLeft","marginRight","getCSSRules","BlockRefs","refs","callbacks","BlockRefsProvider","useBlockRefProvider","useRef","useLayoutEffect","useRefEffect","setElement","useBlockRef","freshClientId","useBlockElement","useState","scrollableRef","onWheel","scrollBy","passive","MAX_POPOVER_RECOMPUTE_COUNTER","MAX_SAFE_INTEGER","bottomClientId","__unstablePopoverSlot","__unstableContentRef","selectedElement","lastSelectedElement","mergedRefs","useMergeRefs","usePopoverScroll","popoverDimensionsRecomputeCounter","forceRecomputePopoverDimensions","useReducer","observer","MutationObserver","observe","disconnect","popoverAnchor","getBoundingClientRect","_lastSelectedBCR$left","_lastSelectedBCR$top","_lastSelectedBCR$righ","_lastSelectedBCR$bott","selectedBCR","lastSelectedBCR","Infinity","DOMRect","contextElement","Popover","animate","focusOnMount","anchor","__unstableSlotName","flip","classnames","variant","CoverContainer","setWidth","setHeight","ResizeObserver","box","_bottomClientId","BlockPopover","getComputedCSS","property","ownerDocument","defaultView","getPropertyValue","GridVisualizer","blockElement","BlockPopoverCover","GridVisualizerGrid","gridInfo","setGridInfo","getGridInfo","observers","numItems","gridTemplateColumns","gridTemplateRows","RANGE_CONTROL_MAX_VALUES","px","vw","vh","em","rem","svw","lvw","dvw","svh","lvh","dvh","vi","svi","lvi","dvi","vb","svb","lvb","dvb","vmin","svmin","lvmin","dvmin","vmax","svmax","lvmax","dvmax","GridLayoutTypeControl","columnCount","GridLayoutColumnsControl","GridLayoutMinimumWidthControl","__experimentalEnableGridInteractivity","minimumColumnWidth","quantity","parseQuantityAndUnitFromRawValue","BaseControl","VisualLabel","as","isBlock","onUnitChange","newUnit","toFixed","hideLabelFromVision","RangeControl","withInputField","NumberControl","validValue","parseInt","tempColumnCount","setTempColumnCount","tempMinimumColumnWidth","setTempMinimumColumnWidth","isManual","ToggleGroupControlOption","layoutTypes","flow","getLayoutType","defaultLayout","Layout","LayoutProvider","useLayout","WIDE_CONTROLS","useAvailableAlignments","isNoneOnly","wideControlsEnabled","themeSupportsLayout","_settings$alignWide","__unstableIsBlockBasedTheme","alignNone","positionLeft","positionRight","stretchFullWidth","enabledControls","onChangeAlignment","activeAlignmentControl","commonProps","controlName","toggleProps","describedBy","onClose","MenuGroup","MenuItem","iconPosition","BlockAlignmentControl","BlockAlignmentUI","BlockAlignmentToolbar","useBlockEditingMode","globalBlockEditingMode","ALL_ALIGNMENTS","WIDE_ALIGNMENTS","getValidAlignments","blockAlign","hasWideBlockSupport","hasWideEnabled","validAlignments","setAttributes","nextAlign","blockDefaultAlign","addSaveProps","attributeKeys","hasSupport","_settings$attributes$","enum","InspectorControlsDefault","InspectorControlsAdvanced","InspectorControlsBackground","InspectorControlsBorder","InspectorControlsColor","InspectorControlsFilter","InspectorControlsDimensions","InspectorControlsPosition","InspectorControlsTypography","InspectorControlsListView","InspectorControlsStyles","advanced","effects","InspectorControlsFill","__experimentalGroup","resetAllFilter","ToolsPanelInspectorControl","RegisterResetAll","registerResetAllFilter","deregisterResetAllFilter","ToolsPanelContext","BlockSupportToolsPanel","panelId","resetAll","resetFilters","newBlockAttributes","resetFilter","ToolsPanel","hasInnerWrapper","shouldRenderPlaceholderItems","__experimentalFirstVisibleItemClass","__experimentalLastVisibleItemClass","dropdownMenuProps","BlockSupportSlotContainer","toolsPanelContext","computedFillProps","_fillProps$forwardedC","InspectorControlsSlot","motionContextValue","MotionContext","InspectorControls","InspectorAdvancedControls","slotName","fillRule","clipRule","withFilters","MediaUpload","fallback","hasUploadPermissions","mediaUpload","LinkSettingsDrawer","settingsOpen","setSettingsOpen","prefersReducedMotion","useReducedMotion","MaybeAnimatePresence","AnimatePresence","MaybeMotionDiv","motion","div","settingsDrawerId","useInstanceId","isRTL","chevronLeftSmall","chevronRightSmall","initial","exit","variants","collapsed","transition","isFunction","maybeFunc","URLInput","onFocus","onKeyDown","selectLink","handleOnClick","bindSuggestionNode","autocompleteRef","createRef","inputRef","updateSuggestions","debounce","suggestionNodes","suggestionsRequest","suggestions","showSuggestions","suggestionsValue","selectedSuggestion","suggestionsListboxId","suggestionOptionIdPrefix","prevProps","__experimentalShowInitialSuggestions","scrollIntoView","behavior","disableSuggestions","shouldShowInitialSuggestions","cancel","__experimentalFetchLinkSuggestions","fetchLinkSuggestions","__experimentalHandleURLSuggestions","handleURLSuggestions","isInitialSuggestions","isURL","loading","request","debouncedSpeak","finally","target","keyCode","UP","preventDefault","setSelectionRange","DOWN","ENTER","onSubmit","suggestion","previousIndex","focus","getDerivedStateFromProps","instanceId","shouldShowSuggestions","hasValue","renderControl","renderSuggestions","isFullWidth","placeholder","__experimentalRenderControl","controlProps","inputProps","required","Spinner","__experimentalRenderSuggestions","suggestionsListProps","buildSuggestionItemProps","tabIndex","isLoading","handleSuggestionClick","currentInputValue","compose","withSafeTimeout","withSpokenMessages","withInstanceId","withSelect","LinkControlSearchCreate","searchTerm","itemProps","buttonText","createInterpolateElement","ICONS_MAP","post","postList","page","post_tag","tag","attachment","SearchItemIcon","globe","isFrontPage","home","isBlogHome","verse","addLeadingSlash","trimmedURL","removeTrailingSlash","getVisualTypeName","LinkControlSearchItem","shouldShowType","safeDecodeURI","getPath","partialRight","fn","partialArgs","filterURLForDisplay","shortcut","TextHighlight","stripHTML","highlight","CREATE_TYPE","URL_TYPE","MAILTO_TYPE","INTERNAL_TYPE","LINK_ENTRY_TYPES","DEFAULT_LINK_SETTINGS","LinkControlSearchResults","withCreateSuggestion","createSuggestionButtonText","suggestionsQuery","resultsListClasses","isSingleDirectEntryResult","shouldShowCreateSuggestion","shouldShowSuggestionsTypes","searchResultsLabelId","labelText","searchResultsLabel","VisuallyHidden","isURLLike","getProtocol","protocolIsValid","isValidProtocol","mayBeTLD","maxLength","cleanedURL","hasPossibleTLD","isWWW","isInternal","isValidFragment","handleNoop","handleDirectEntry","prependHTTP","noopSearchHandler","noop","LinkControlSearchInput","currentLink","onCreateSuggestion","onSelect","fetchSuggestions","allowDirectEntry","showInitialSuggestions","withURLSuggestion","genericSearchHandler","fetchSearchSuggestions","pageOnFront","pageForPosts","directEntryHandler","handleEntitySearch","useSearchHandler","searchHandler","focusedSuggestion","setFocusedSuggestion","onSuggestionSelected","restLinkProps","onInputChange","hasSuggestion","ViewerSlot","ViewerFill","isFetching","richData","fetchRichUrlData","__experimentalFetchRichUrlData","AbortController","controller","signal","urlData","aborted","abort","LinkPreview","onEditClick","hasRichPreviews","hasUnlinkControl","onRemove","showIconLabels","preferencesStore","showRichPreviews","useRichUrlData","hasRichData","displayURL","isEmptyURL","displayTitle","alt","createNotice","noticesStore","useCopyToClipboard","isDismissible","ExternalLink","href","Truncate","numberOfLines","linkOff","copySmall","disabled","LinkControlSettings","handleSettingChange","theSettings","CheckboxControl","help","PREFERENCE_SCOPE","PREFERENCE_KEY","LinkControl","searchInputPlaceholder","onCancel","noDirectEntry","forceIsEditingLink","createSuggestion","inputValue","propInputValue","noURLSuggestion","hasTextControl","renderControlBottom","advancedSettingsPreference","_prefsStore$get","setPreference","isSettingsOpen","isMounting","wrapperNode","textInputRef","isEndingEditWithFocus","settingsKeys","internalControlValue","setInternalControlValue","setInternalURLInputValue","setInternalTextInputValue","createSetInternalSettingValueHandler","internalValue","setInternalValue","previousValue","setPreviousValue","nextValue","settingsUpdates","acc","useInternalValue","valueHasChanges","isShallowEqualObjects","isEditingLink","setIsEditingLink","createPage","isCreatingPage","errorMessage","handleCreatePage","cancelableCreateSuggestion","setIsCreatingPage","setErrorMessage","suggestionTitle","hasCanceled_","isCanceled","makeCancelable","useCreatePage","focusable","hasLinkValue","stopEditing","contains","activeElement","handleSubmit","currentUrlInputValue","currentInputIsEmpty","shownUnlinkControl","showActions","showTextControl","isEditing","showSettings","TextControl","updatedValue","nonSettingsChanges","keyboardReturn","Notice","status","LinkControlSettingsDrawer","prefVal","LinkSettings","HStack","justify","stopPropagation","uniqueId","withDispatch","removeNotice","MediaReplaceFlow","mediaURL","mediaId","mediaIds","allowedTypes","accept","onError","onSelectURL","onToggleFeaturedImage","useFeaturedImage","onFilesUpload","multiple","addToGallery","handleUpload","canUpload","editMediaButtonRef","errorNoticeID","onUploadError","safeMessage","selectMedia","media","closeMenu","openOnArrowDown","click","gallery","allowedType","Dropdown","contentClassName","renderToggle","isOpen","onToggle","ToolbarButton","renderContent","NavigableMenu","MediaUploadCheck","mediaIcon","FormFileUpload","uploadFiles","files","filesList","onFileChange","openFileDialog","upload","postFeaturedImage","IMAGE_BACKGROUND_TYPE","useHasBackgroundPanel","hasBackgroundImageValue","coordsToBackgroundPosition","backgroundPositionToCoords","InspectorImagePreview","filename","imgUrl","imgLabel","getFilename","ItemGroup","BackgroundImageToolsPanelItem","isShownByDefault","inheritedValue","replaceContainerRef","createErrorNotice","resetBackgroundImage","onSelectMedia","isBlobURL","media_type","ToolsPanelItem","onDeselect","toggleButton","tabbable","DropZone","onFilesDrop","image","BackgroundSizeToolsPanelItem","defaultValues","sizeValue","repeatValue","backgroundRepeat","imageValue","positionValue","backgroundPosition","currentValueForToggle","repeatCheckedValue","hasBackgroundSizeValue","updateBackgroundSize","nextRepeat","VStack","resetBackgroundSize","FocalPointPicker","__next40pxDefaultSize","toggleIsRepeated","BackgroundToolsPanel","BackgroundPanel","Wrapper","defaultControls","shouldShowBackgroundSizeControls","BACKGROUND_SUPPORT_KEY","BACKGROUND_BLOCK_DEFAULT_VALUES","hasBackgroundSupport","getBackgroundImageClasses","BackgroundInspectorControl","BackgroundImagePanel","StylesBackgroundPanel","newStyle","backgroundStyles","backgroundStyle","backgroundStylesWithDefaults","setBackgroundStyleDefaults","ANCHOR_REGEX","ANCHOR_SCHEMA","attribute","isWeb","autoCapitalize","autoComplete","ARIA_LABEL_SCHEMA","ariaLabel","originClassName","getBlockDefaultClassName","grad","turn","rad","PI","u","g","h","floor","f","c","N","M","H","$","parsed","rgba","brightness","isDark","isLight","toHex","toRgb","toRgbString","toHsl","toHslString","toHsv","invert","w","saturate","desaturate","grayscale","lighten","darken","rotate","hue","alpha","isEqual","S","bisque","cadetblue","chartreuse","chocolate","coral","antiquewhite","aqua","azure","whitesmoke","papayawhip","plum","blanchedalmond","gold","goldenrod","gainsboro","cornsilk","cornflowerblue","burlywood","aquamarine","beige","crimson","darkblue","darkcyan","darkgoldenrod","darkkhaki","darkgray","darkgreen","darkgrey","peachpuff","darkmagenta","darkred","darkorchid","darkorange","darkslateblue","darkslategray","darkslategrey","deeppink","deepskyblue","wheat","firebrick","floralwhite","ghostwhite","darkviolet","dodgerblue","grey","honeydew","hotpink","blueviolet","forestgreen","lawngreen","indianred","indigo","fuchsia","brown","maroon","mediumblue","lightcoral","darkturquoise","lightcyan","ivory","lightyellow","lightsalmon","lightseagreen","linen","mediumaquamarine","lemonchiffon","lime","khaki","mediumseagreen","limegreen","mediumspringgreen","lightskyblue","lightblue","midnightblue","lightpink","mistyrose","moccasin","mintcream","lightslategray","lightslategrey","navajowhite","navy","mediumvioletred","powderblue","palegoldenrod","oldlace","paleturquoise","mediumturquoise","mediumorchid","rebeccapurple","lightsteelblue","mediumslateblue","thistle","tan","orchid","mediumpurple","purple","pink","skyblue","springgreen","palegreen","slateblue","lavenderblush","peru","palevioletred","violet","teal","slategray","slategrey","aliceblue","darkseagreen","darkolivegreen","greenyellow","seagreen","seashell","tomato","silver","sienna","lavender","lightgreen","orange","orangered","steelblue","royalblue","turquoise","yellowgreen","salmon","saddlebrown","sandybrown","rosybrown","darksalmon","lightgoldenrodyellow","snow","lightgrey","lightgray","dimgray","dimgrey","olivedrab","olive","toName","closest","luminance","contrast","isReadable","level","extend","namesPlugin","a11yPlugin","getColorObjectByAttributeValues","definedColor","customColor","colorObj","getColorObjectByColorValue","colorValue","getColorClassName","colorContextName","colorSlug","kebabCase","componentsPrivateApis","useMultipleOriginColorsAndGradients","enableCustomColors","enableCustomGradients","colorGradientSettings","hasColorsOrGradients","inputArray","getAllUnit","selectedUnits","flat","cornerUnits","getAllValue","parsedQuantitiesAndUnits","allValues","_value$","allUnits","hasMixedValues","allValue","hasDefinedValues","AllInputControl","setSelectedUnits","isMixed","allPlaceholder","disableUnits","isOnly","isNumeric","topLeft","topRight","bottomLeft","bottomRight","CORNERS","BoxInputControls","valuesProp","createHandleOnChange","corner","parsedQuantity","parsedUnit","computedUnit","Tooltip","side","newUnits","LinkedButton","isLinked","iconSize","MIN_BORDER_RADIUS_VALUE","MAX_BORDER_RADIUS_VALUES","BorderRadiusControl","setIsLinked","unitConfig","InputControls","toggleLinked","ShadowPopoverContainer","onShadowChange","shadows","useShadowPresets","Heading","ShadowPresets","activeShadow","CompositeV2","Composite","useCompositeStoreV2","useCompositeStore","compositeStore","ShadowIndicator","CompositeItemV2","CompositeItem","unset","boxShadow","showTooltip","check","ShadowPopover","shadowIcon","DropdownContentWrapper","paddingSize","_settings$shadow$pres","defaultPresetsEnabled","defaultPresets","defaultShadows","themeShadows","unsetShadow","shadowPresets","useHasBorderPanel","useHasBorderPanelControls","hasBorderColor","useHasBorderColorControl","hasBorderRadius","useHasBorderRadiusControl","hasBorderStyle","useHasBorderStyleControl","hasBorderWidth","useHasBorderWidthControl","hasShadow","useHasShadowControl","BorderToolsPanel","BorderPanel","_overrideOrigins","decodeValue","encodeColorValue","colorObject","flatMap","originColors","hasSplitBorders","borderValue","setBorder","newBorder","showBorderColor","showBorderStyle","showBorderWidth","showBorderRadius","borderRadiusValues","setBorderRadius","newBorderRadius","borderValues","hasShadowControl","overriddenShadowPresets","setShadow","shadowName","showBorderByDefault","hasBorderControl","useBorderPanelLabel","isDefinedBorder","resetBorder","BorderBoxControl","enableAlpha","enableStyle","updatedBorder","popoverOffset","popoverPlacement","__experimentalIsRenderedInSidebar","resetShadow","isBordered","isSeparated","BORDER_SUPPORT_KEY","SHADOW_SUPPORT_KEY","getColorByProperty","matchedColor","getMultiOriginColor","namedColor","getColorSlugFromVariable","styleToAttributes","borderColorValue","borderColorSlug","updatedStyle","attributesToStyle","BordersInspectorControl","attributesResetAllFilter","existingStyle","isEnabled","StylesBorderPanel","hasBorderSupport","borderClasses","getBorderClasses","newClassName","borderColorClass","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","__experimentalGetGradientClass","gradientSlug","getGradientValueBySlug","__experimentalGetGradientObjectByGradientValue","getGradientSlugByValue","__experimentalUseGradient","gradientAttribute","customGradientAttribute","allGradients","setGradient","newGradientValue","gradientClass","gradientValue","colorsAndGradientKeys","TAB_IDS","ColorGradientControlInner","onColorChange","onGradientChange","clearable","showTitle","headingLevel","canChooseAColor","canChooseAGradient","tabPanels","ColorPalette","newColor","GradientPicker","newGradient","renderPanelType","Tabs","defaultTabId","TabList","Tab","tabId","TabPanel","ColorGradientControlSelect","useHasColorPanel","hasTextPanel","useHasTextPanel","hasBackgroundPanel","hasLinkPanel","useHasLinkPanel","hasHeadingPanel","useHasHeadingPanel","hasButtonPanel","useHasButtonPanel","hasCaptionPanel","useHasCaptionPanel","ColorToolsPanel","LabeledColorIndicators","indicators","ZStack","isLayered","indicator","expanded","ColorIndicator","ColorPanelTab","isGradient","userValue","setValue","colorGradientControlSettings","ColorGradientControl","ColorPanelDropdown","resetValue","tabs","currentTab","tab","ColorPanel","areCustomSolidsEnabled","hasSolidColors","hasGradientColors","encodeGradientValue","gradientObject","originGradients","showBackgroundPanel","backgroundColor","userBackgroundColor","userGradient","showButtonPanel","buttonColor","userButtonColor","setButtonColor","showLinkPanel","linkColor","userLinkColor","hoverLinkColor","userHoverLinkColor","showTextPanel","textColor","userTextColor","setTextColor","changedObject","showPanel","hasTextColor","resetTextColor","hasBackground","resetBackground","hasButtonColor","resetButtonColor","hasLink","resetLink","elementBackgroundColor","elementGradient","elementTextColor","elementBackgroundUserColor","elementGradientUserColor","elementTextUserColor","supportsBackground","hasElement","resetElement","newTextColor","newBackgroundColor","fallbackBackgroundColor","fallbackTextColor","fallbackLinkColor","isLargeText","enableAlphaChecker","currentBackgroundColor","currentTextColor","currentLinkColor","textColors","colordBackgroundColor","colord","backgroundColorHasTransparency","backgroundColorBrightness","isReadableOptions","speakMessage","colordTextColor","isColordTextReadable","textHasTransparency","spokenMessage","BlockColorContrastChecker","detectedBackgroundColor","setDetectedBackgroundColor","detectedColor","setDetectedColor","detectedLinkColor","setDetectedLinkColor","firstLinkElement","querySelector","innerText","backgroundColorNode","nodeType","ELEMENT_NODE","ContrastChecker","COLOR_SUPPORT_KEY","hasColorSupport","colorSupport","hasLinkColorSupport","hasGradientSupport","hasBackgroundColorSupport","hasTextColorSupport","hasGradient","shouldSerialize","textClass","backgroundClass","serializeHasBackground","textColorValue","textColorSlug","backgroundColorValue","backgroundColorSlug","ColorInspectorControl","ColorEdit","enableContrastChecking","StylesColorPanel","enableContrastChecker","userPalette","themePalette","extraStyles","saveProps","hasBackgroundValue","MIGRATION_PATHS","FontFamilyControl","blockLevelFontFamilies","fontFamily","SelectControl","destinationBlockType","FONT_STYLES","FONT_WEIGHTS","getFontAppearanceLabel","hasFontStyles","hasFontWeights","FontAppearanceControl","otherProps","hasStylesOrWeights","defaultOption","selectOptions","combineOptions","combinedOptions","styleName","weightName","weightValue","optionName","styleOptions","weightOptions","currentSelection","option","CustomSelectControl","selectedItem","LineHeightControl","isDefined","isLineHeightDefined","adjustNextValue","wasTypedOrPasted","BASE_DEFAULT_VALUE","deprecatedStyles","marginBottom","__unstableStateReducer","stateReducer","payload","nativeEvent","inputType","handleOnChange","spinFactor","spinControls","LetterSpacingControl","TEXT_TRANSFORMS","formatUppercase","formatLowercase","formatCapitalize","TextTransformControl","TEXT_DECORATIONS","formatUnderline","formatStrikethrough","TextDecorationControl","WRITING_MODES","textHorizontal","textVertical","WritingModeControl","MIN_TEXT_COLUMNS","MAX_TEXT_COLUMNS","useHasTypographyPanel","hasFontFamily","useHasFontFamilyControl","hasLineHeight","useHasLineHeightControl","hasFontAppearance","useHasAppearanceControl","hasLetterSpacing","useHasLetterSpacingControl","hasTextTransform","useHasTextTransformControl","hasTextDecoration","useHasTextDecorationControl","hasWritingMode","useHasWritingModeControl","hasTextColumns","useHasTextColumnsControl","hasFontSize","useHasFontSizeControl","TypographyToolsPanel","fontAppearance","TypographyPanel","_settings$typography$2","hasFontFamilyEnabled","mergedFontFamilies","_value$key","mergeOrigins","setFontFamily","hasFontSizeEnabled","mergedFontSizes","_settings$typography$","overriddenFontSizes","uniqueSizes","currentSize","getUniqueFontSizesBySlug","setFontSize","hasAppearanceControl","appearanceControlLabel","useAppearanceControlLabel","setFontAppearance","newFontStyle","newFontWeight","hasLineHeightEnabled","setLineHeight","hasLetterSpacingControl","setLetterSpacing","hasTextColumnsControl","setTextColumns","hasTextTransformControl","setTextTransform","hasTextDecorationControl","setTextDecoration","hasWritingModeControl","setWritingMode","resetFontFamily","resetFontSize","FontSizePicker","withReset","withSlider","resetFontAppearance","resetLineHeight","resetLetterSpacing","resetTextColumns","resetTextDecoration","resetWritingMode","resetTextTransform","showNone","FONT_FAMILY_SUPPORT_KEY","TYPOGRAPHY_SUPPORT_KEY","TokenList","getFontSize","fontSizeAttribute","customFontSizeAttribute","fontSizeObject","getFontSizeObjectByValue","getFontSizeClass","fontSizeSlug","FONT_SIZE_SUPPORT_KEY","omit","TYPOGRAPHY_SUPPORT_KEYS","fontSizeValue","fontFamilyValue","fontFamilySlug","TypographyInspectorControl","StylesTypographyPanel","CUSTOM_VALUE_SETTINGS","steps","rm","SpacingInputControl","minimumCustomValue","onMouseOut","onMouseOver","showSideInLabel","_CUSTOM_VALUE_SETTING","_CUSTOM_VALUE_SETTING2","selectListSizes","showRangeControl","disableCustomSpacingSizes","editorSettings","showCustomValueControl","setShowCustomValueControl","usePrevious","presetValue","sliderValue","getSliderValueFromPreset","selectedUnit","customRangeValue","getNewPresetValue","newSize","controlType","marks","_newValue","sideLabel","typeLabel","onBlur","getNewCustomValue","onMouseDown","offsetX","renderTooltipContent","groupedSides","AxialInputControls","nextValues","filteredSides","axisValue","SeparatedInputControls","SingleInputControl","currentSide","checkIcon","SidesDropdown","labelProp","supportedItems","menuItems","numberOfIndividualSides","getSupportedMenuItems","sideIcon","customItem","DropdownMenu","suffix","SpacingSizesControl","settingsSizes","useSpacingSizes","inputValues","hasOneSide","hasOnlyAxialSides","view","setView","sideValues","hasMatchingAxialValues","hasNoValuesAndBalancedSides","counts","hasBalancedSidesSupport","getInitialView","inputControlProps","newValues","dropdownLabelText","RANGE_CONTROL_CUSTOM_SETTINGS","HeightControl","_RANGE_CONTROL_CUSTOM","_RANGE_CONTROL_CUSTOM2","currentUnit","Spacer","marginX","helpText","selfStretch","ChildLayoutControl","childLayout","flexSize","columnStart","rowStart","columnSpan","rowSpan","parentType","defaultParentType","parentLayoutType","flexResetLabel","hasFlexValue","resetFlex","childLayoutOrientation","hasSpanValue","resetGridSpans","InputControl","hasStartValue","resetGridStarts","DEFAULT_ASPECT_RATIO_OPTIONS","AspectRatioTool","displayValue","AXIAL_SIDES","useHasDimensionsPanel","hasContentSize","useHasContentSize","hasWideSize","useHasWideSize","hasPadding","useHasPadding","hasMargin","useHasMargin","hasGap","useHasGap","hasMinHeight","useHasMinHeight","hasAspectRatio","useHasAspectRatio","hasChildLayout","useHasChildLayout","_settings$parentLayou","defaultParentLayoutType","allowSizingOnChildren","filterValuesBySides","filteredValues","splitStyleValue","DimensionsToolsPanel","DimensionsPanel","onVisualize","includeLayoutControls","_defaultControls$cont","_defaultControls$wide","_defaultControls$padd","_defaultControls$marg","_defaultControls$bloc","_defaultControls$chil","_defaultControls$minH","_defaultControls$aspe","showSpacingPresetsControl","_ref2","useHasSpacingPresets","showContentSizeControl","contentSizeValue","setContentSizeValue","showWideSizeControl","wideSizeValue","setWideSizeValue","showPaddingControl","paddingValues","paddingSides","isAxialPadding","setPaddingValues","newPaddingValues","onMouseOverPadding","showMarginControl","marginValues","marginSides","isAxialMargin","setMarginValues","newMarginValues","onMouseOverMargin","showGapControl","gapValue","gapValues","splitGapValue","gapSides","isAxialGap","setGapValue","newGapValue","setGapValues","nextBoxGapValue","showMinHeightControl","minHeightValue","setMinHeightValue","tempValue","showAspectRatioControl","aspectRatioValue","showChildLayoutControl","onMouseLeaveControls","hasUserSetContentSizeValue","resetContentSizeValue","nextContentSize","View","hasUserSetWideSizeValue","resetWideSizeValue","nextWideSize","hasPaddingValue","resetPaddingValue","BoxControl","allowReset","splitOnAxis","hasMarginValue","resetMarginValue","hasGapValue","resetGapValue","newChildLayout","hasMinHeightValue","resetMinHeightValue","hasAspectRatioValue","SpacingVisualizer","computeStyle","forceShow","updateStyle","requestAnimationFrame","setIsActive","timeout","clearTimeout","MarginVisualizer","borderRightWidth","borderLeftWidth","PaddingVisualizer","DIMENSIONS_SUPPORT_KEY","SPACING_SUPPORT_KEY","DimensionsInspectorControl","visualizedProperty","setVisualizedProperty","setProperty","useVisualizer","StylesDimensionsPanel","hasDimensionsSupport","inlineStyleOverrides","useCustomSides","styleSupportKeys","hasStyleSupport","getInlineStyles","skipSerializationPathsEdit","skipSerializationPathsSave","skipSerializationPathsSaveChecks","renamedFeatures","omitStyle","preserveReference","firstSubpath","restPath","skipPaths","featureName","__unstableParentLayout","passedProps","blockElementsContainerIdentifier","baseElementSelector","blockElementStyles","elementCSSRules","elementTypes","pseudo","elementStyles","ELEMENTS","compileCSS","pseudoSelector","DuotoneControl","idProp","colorPalette","duotonePalette","disableCustomDuotone","toolbarIcon","DuotoneSwatch","actionLabel","descriptionId","headerTitle","DuotonePicker","getDuotoneUnsetStylesheet","getDuotoneStylesheet","getDuotoneFilter","rgbColor","getValuesFromColors","getBlockCSSSelector","hasSelectors","rootSelector","__experimentalSelector","pathArray","fallbackSelector","featureSelector","subfeatureSelector","useMultiOriginColorPresets","presetSetting","defaultSetting","disableDefault","userPresets","themePresets","useHasFiltersPanel","useHasDuotoneControl","FiltersToolsPanel","LabeledColorIndicator","FiltersPanel","hasDuotoneEnabled","setDuotone","duotonePreset","settedValue","hasDuotone","resetDuotone","isSafari","useMultiOriginPresets","enableDefault","getColorsFromDuotonePreset","duotoneStyle","enableCustomDuotone","duotonePresetOrColors","StylesFiltersPanel","newDuotone","maybePreset","getDuotonePresetFromColors","experimentalDuotone","filterClass","shouldRender","filterId","duotoneSelector","duotoneAttr","isCustom","isPreset","selectorPart","isValidFilter","display","useDuotoneStyles","useBlockDisplayInformation","isSynced","isReusableBlock","isTemplatePart","getBlockLabel","positionLabel","positionType","getPositionTypeLabel","blockTypeInfo","POSITION_SUPPORT_KEY","OPTION_CLASSNAME","DEFAULT_OPTION","STICKY_OPTION","__experimentalHint","FIXED_OPTION","POSITION_SIDES","VALID_POSITION_TYPES","hasStickyOrFixedPositionValue","useIsPositionDisabled","allowFixed","allowSticky","PositionPanelPure","hasFixedPositionSupport","sticky","hasStickyPositionSupport","blockInformation","stickyHelpText","availableOptions","selectedOption","web","__experimentalShowSelectedHint","onChangeType","native","hasPositionBlockSupport","isPositionDisabled","allowPositionStyles","getPositionCSS","layoutBlockSupportKey","hasLayoutBlockSupport","useLayoutClasses","rootPaddingAlignment","useRootPaddingAwareAlignments","defaultBlockLayout","usedLayout","inherit","layoutClassnames","baseClassName","splitBlockName","compoundClassName","blockSupportAndThemeSettings","allowEditing","allowInheriting","blockSupportAndLayout","blockLayoutType","showInheritToggle","constrainedType","displayControlsForLegacyLayouts","hasContentSizeOrLegacySettings","onChangeLayout","newLayout","PanelBody","LayoutTypeSwitcher","newType","ButtonGroup","BlockWithLayoutStyles","BlockListBlock","layoutClasses","selectorPrefix","blockGapSupport","fullLayoutType","layoutClassNames","__unstableLayoutClassNames","withLayoutStyles","createHigherOrderComponent","blockSupportsLayout","disableLayoutStyles","GridItemResizer","ResizableBox","enable","onResizeStop","direction","boxElement","gridElement","parentElement","columnGap","rowGap","gridColumnLines","getGridLines","gridRowLines","getClosestLine","offsetLeft","offsetTop","columnEnd","rowEnd","abs","useBlockPropsChildLayoutStyles","_style$layout","shouldRenderChildLayoutStyles","columnSpanNumber","columnStartNumber","highestNumber","parentColumnValue","parentColumnUnit","useConvertToGroupButtonProps","blocksSelection","firstSelectedBlock","_isUngroupable","onUngroup","ConvertToGroupButton","onConvertToGroup","newBlocks","onConvertFromGroup","useBlockLock","canEdit","canMove","canLock","isContentLocked","isLocked","ALLOWS_EDIT_LOCKING","getTemplateLockValue","BlockLockModal","setLock","allowsEditLocking","hasTemplateLock","applyTemplateLock","setApplyTemplateLock","isAllChecked","Modal","overlayClassName","onRequestClose","indeterminate","prevLock","lockIcon","unlockIcon","BlockLockMenuItem","isModalOpen","toggleModal","lockOutline","isCodeEditingEnabled","codeEditingEnabled","onToggleMode","small","isEmptyString","testString","BlockRenameModal","originalBlockName","onSave","editedBlockName","setEditedBlockName","nameHasChanged","nameIsOriginal","nameIsEmpty","isNameValid","dialogDescription","aria","describedby","BlockRenameControl","renamingBlock","setRenamingBlock","_metadata","customName","newName","BlockSettingsMenuControls","BlockSettingsMenuControlsSlot","selectedBlocks","canRename","showLockButton","showRenameButton","convertToGroupButtonProps","showConvertToGroupButton","onlyBlock","onMoveTo","BlockModeToggle","isLockedByParent","isEditingAsBlocks","stopEditingAsBlockCallback","showStopEditingAsBlocks","showStartEditingAsBlocks","META_ATTRIBUTE_NAME","blockTypeSettings","showColors","blockDefault","renderedIcon","EMPTY_OBJECT","ignoredHookedBlocks","hookedBlocksForCurrentBlock","blockHooks","innerBlocksLength","hookedBlockClientIds","_hookedBlockClientIds","relativePosition","hookedBlock","candidate","groupedHookedBlocks","namespace","initialOpen","vendor","BlockIcon","insertBlockIntoDesignatedLocation","__experimentalLabel","BLOCK_BINDINGS_ALLOWED_BLOCKS","canBindBlock","BindingConnector","attrName","blockProps","onPropValueChange","propValue","useSource","attrValue","updateBoundAttibute","newAttrValue","prevAttrValue","fromHTMLString","htmlAttribute","BlockBindingBridge","bindings","blockBindingsSources","getAllBlockBindingsSources","boundAttribute","withBlockBindingSupport","BlockEdit","boundAttributes","setBoundAttributes","updateBoundAttributes","canBindAttribute","attributeName","getBorderClassesAndStyles","useBorderProps","borderProps","borderColorObject","getShadowClassesAndStyles","getColorClassesAndStyles","useColorProps","userGradients","colorProps","backgroundColorObject","textColorObject","getSpacingClassesAndStyles","getTypographyClassesAndStyles","typographyStyles","fontFamilyClassName","useCachedTruthy","cachedValue","setCachedValue","useZoomOut","Edit","withBlockEditHooks","OriginalBlockEdit","neededProps","createBlockEditFilter","customClassName","contentLockUI","blockRenaming","withBlockListBlockHooks","allWrapperProps","createBlockListBlockFilter","accu","neededAttributes","upperFirst","firstLetter","rest","withCustomColorPalette","colorsArray","WrappedComponent","withEditorColorPalette","allColors","createColorHOC","colorTypes","withColorPalette","colorMap","colorType","setters","createSetters","colorUtils","getMostReadableColor","colordColor","getColorContrast","maxContrast","settersAccumulator","colorAttributeName","upperFirstColorAttributeName","customColorAttributeName","createSetColor","previousState","colorContext","previousColorObject","previousColor","class","createCustomColorsHOC","withColors","BaseFontSizePicker","DEFAULT_FONT_SIZES","fontSizeNames","fontSizeAttributeNames","fontSizeAttributeNamesAccumulator","fontSizeAttributeName","customFontSizeAttributeName","createSetFontSize","didAttributesChange","newStateAccumulator","fontSizeAttributeValue","DEFAULT_ALIGNMENT_CONTROLS","alignLeft","alignRight","alignmentControls","AlignmentControl","AlignmentUI","AlignmentToolbar","lowerCase","DEFAULT_SPLIT_REGEXP","DEFAULT_STRIP_REGEXP","re","defaultGetName","defaultGetTitle","defaultGetDescription","defaultGetKeywords","defaultGetCategory","defaultGetCollection","splitRegexp","stripRegexp","extractedWords","normalizedStrings","extractWords","delimiter","noCase","normalizeString","getNormalizedSearchTerms","searchBlockItems","collections","searchInput","searchItems","getCategory","getCollection","rankedItems","getItemSearchRank","rank","rank1","rank2","getName","getTitle","getDescription","getKeywords","collection","normalizedSearchInput","normalizedTitle","terms","unmatchedTerms","unprocessedTerms","term","unprocessedTerm","removeMatchingTerms","useBlockTypesState","onInsert","getCategories","getCollections","shouldFocusBlock","insertedBlock","createBlocksFromInnerBlocksTemplate","orderInserterBlockItems","priority","aName","bName","aIndex","bIndex","triggerPrefix","useItems","filterValue","selectedBlockName","prioritizedBlocks","_rootClientId","prioritizedInserterBlocks","filteredItems","blockItem","allowContext","getOptionCompletion","inserterItem","apiFetch","addQueryArgs","per_page","search","letters","order_by","getOptionKeywords","getOptionLabel","subtype","useCompleters","completers","filteredCompleters","linkAutocompleter","blockAutocompleter","hasFilter","completer","Autocomplete","fullscreen","AlignmentMatrixControl","hasFocusBorder","useBlockDisplayTitle","maximumLength","blockTitle","omission","BlockTitle","rootLabelText","hasSelection","rootLabel","useBlockOverlayActive","BlockContextProvider","DEFAULT_BLOCK_CONTEXT","EditWithFilters","save","blockContext","BlockContext","usesContext","generatedClassName","mayDisplayControls","mayDisplayParentControls","layoutSupport","BlockEditContextProvider","secondaryActions","Children","moreVertical","noIcons","BlockView","rawContent","renderedContent","actionText","RawHTML","safeHTML","onKeep","onConvert","convertor","convertButtonText","converted","convertedBlock","getSaveContent","difference","originalContent","newContent","diffChars","blockToBlocks","rawHandler","HTML","BlockInvalidWarning","canInsertHTMLBlock","canInsertClassicBlock","compare","setCompare","onCompareClose","convert","toClassic","classicBlock","toHTML","htmlBlock","toBlocks","toRecoveredBlock","recoveredBlock","BlockCompare","BlockCrashBoundary","hasError","componentDidCatch","setHtml","getBlockContent","validateBlock","updateQueue","makeQueue","raf","schedule","writeQueue","write","onStartQueue","onStart","onFrameQueue","onFrame","onFinishQueue","onFinish","timeouts","handler","ms","pendingCount","findTimeout","batchedUpdates","throttle","lastArgs","queuedFn","throttled","nativeRaf","impl","performance","frameLoop","advance","ts","queue","loop","prevTs","eachSafely","flush","fun","num","und","ctx","flushCalls","isSSR","createStringInterpolator$1","colors$1","skipAnimation","willAdvance","globals","freeze","createStringInterpolator","startQueue","currentFrame","prevFrame","idle","animation","flushStartQueue","startSafely","startUnsafely","dt","nextFrame","NUMBER","PERCENTAGE","rgb","hsl","hsla","hex3","hex4","hex6","hex8","hue2rgb","q","hslToRgb","parse255","int","parse360","parse1","parsePercentage","colorToRgba","int32Color","normalizeColor","createInterpolator","extrapolate","outputRange","inputRange","extrapolateLeft","extrapolateRight","easing","findRange","inputMin","inputMax","outputMin","outputMax","interpolate","$get","for","$observers","hasFluidValue","getFluidValue","getFluidObservers","callFluidObservers","eventObserved","callFluidObserver","FluidValue","setFluidGetter","setHidden","observerAdded","removeFluidObserver","observerRemoved","numberRegex","colorRegex","unitRegex","rgbaRegex","cssVariableRegex","variableToRgba","parseCSSVariable","namedColorRegex","rgbaRound","p1","p2","p3","p4","keyframes","outputRanges","interpolators","_output$find","missingUnit","once","called","TypeError","warnInterpolate","isAnimatedString","emptyDeps","$node","getAnimated","owner","setAnimated","defineHidden","getPayload","Animated","AnimatedValue","elapsedTime","lastPosition","lastVelocity","v0","durationProgress","getValue","AnimatedString","_string","_toString","goal","TreeContext","dependencies","AnimatedObject","animated","_makePayload","_addToPayload","AnimatedArray","makeAnimated","getAnimatedType","withAnimated","host","hasInstance","isReactComponent","givenProps","givenRef","instanceRef","updateRef","deps","createAnimatedStyle","getAnimatedState","forceUpdate","isMounted","useIsMounted","instance","applyAnimatedValues","PropsObserver","observerRef","effect","dep","usedProps","getComponentProps","cacheKey","getDisplayName","displayName","callProp","matchProp","resolveProp","getDefaultProp","noopTransform","getDefaultProps","DEFAULT_PROPS","RESERVED_PROPS","pause","immediate","delay","onProps","onPause","onResume","onRest","onResolve","trail","expires","enter","leave","onDestroyed","callId","inferTo","forward","getForwardProps","out","computeGoal","isAsyncTo","c1","c2","c3","c4","c5","bounceOut","n1","d1","easings","linear","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInSine","cos","easeOutSine","sin","easeInOutSine","easeInExpo","easeOutExpo","easeInOutExpo","easeInCirc","sqrt","easeOutCirc","easeInOutCirc","easeInBack","easeOutBack","easeInOutBack","easeInElastic","easeOutElastic","easeInOutElastic","easeInBounce","easeOutBounce","easeInOutBounce","tension","friction","mass","damping","clamp","AnimationConfig","frequency","velocity","restVelocity","precision","progress","bounce","decay","sanitizeConfig","isTensionConfig","emptyArray","Animation","changed","toValues","fromValues","scheduleProps","_props$cancel","paused","resumeQueue","resume","delayed","pauseQueue","cancelId","getCombinedResult","cancelled","getCancelledResult","getNoopResult","getFinishedResult","finished","asyncTo","prevTo","prevPromise","asyncId","preventBail","bail","bailPromise","bailIfEnded","bailSignal","bailResult","arg1","arg2","BailSignal","skipAnimationSignal","SkipAniamtionSignal","stopAsync","animating","stop","isFrameValue","FrameValue","nextId$1","_priority","_onPriorityChange","_attach","_detach","_onChange","$P","hasAnimated","isAnimating","isPaused","setActiveBit","active","IS_ANIMATING","setPausedBit","SpringValue","_state","_pendingCalls","_lastCallId","_lastToId","_memoizedDuration","isDelayed","anim","elapsed","bounceFactor","canBounce","isGrowing","isMoving","isBouncing","numSteps","ceil","currVal","finalVal","_stop","_focus","_set","_update","finish","_onStart","_start","_prepareNode","isLoop","mergeActiveFn","sendEvent","isFrozen","checkFinished","_resume","_merge","nextProps","createLoopUpdate","hasToProp","hasFromProp","prevFrom","hasFromChanged","hasToChanged","hasAsyncTo","newConfig","defaultConfig","mergeConfig","isAnimatable","goalType","started","hasValueChanged","ACTIVE_EVENTS","oldNode","loopRet","createUpdate","findDefined","_target$animation$typ","_target$animation","_target$defaultProps$","_target$defaultProps","BATCHED_EVENTS","nextId","Controller","springs","_flush","_initialProps","_lastAsyncId","_active","_changed","_started","_item","_events","_onFrame","spring","prepareKeys","ctrl","flushUpdate","flushUpdateQueue","promises","prepareSprings","createSpring","_excluded$3","SpringContext","excluded","sourceKeys","_objectWithoutPropertiesLoose","inherited","getResult","committed","prevCache","useCache","areInputsEqual","useMemoOne","_context","Consumer","TransitionPhase","Interpolation","calc","_get","_dt","checkIdle","becomeIdle","highest","isIdle","isCustomPropRE","dangerousStyleValue","isUnitlessNumber","attributeCache","animationIterationCount","borderImageOutset","borderImageSlice","borderImageWidth","boxFlex","boxFlexGroup","boxOrdinalGroup","columns","flexGrow","flexPositive","flexShrink","flexNegative","flexOrder","gridRow","gridRowEnd","gridRowSpan","gridRowStart","gridColumn","gridColumnEnd","gridColumnSpan","gridColumnStart","lineClamp","orphans","tabSize","widows","zIndex","zoom","fillOpacity","floodOpacity","stopOpacity","strokeDasharray","strokeDashoffset","strokeMiterlimit","strokeOpacity","strokeWidth","prefixes","prefixKey","domTransforms","pxTransforms","degTransforms","addUnit","isValueIdentity","AnimatedStyle","z","xyz","deg","FluidTransform","unstable_batchedUpdates","transparent","burntsienna","_applyAnimatedValues","_createAnimatedStyle","_getComponentProps","hostConfig","createHost","isFilterElement","scrollLeft","names","hasAttribute","textContent","getAbsolutePosition","triggerAnimationOnChange","prevRect","scrollContainer","getScrollContainer","adjustScrolling","preserveScrollPosition","matchMedia","finishedMoving","transformOrigin","destination","PrivateBlockContext","BLOCK_SELECTOR","APPENDER_SELECTOR","BLOCK_APPENDER_CLASS","isInSameBlock","isInsideRootBlock","getBlockClientId","blockNode","useFocusFirstElement","textInputs","isTextField","isReverse","getAttribute","focusElement","findNext","isFormElement","placeCaretAtHorizontalEdge","listener","defaultPrevented","classList","useIsHovered","useFocusHandler","isContentEditable","useEventHandlers","onDragStart","BACKSPACE","DELETE","useNavModeExit","useIntersectionObserver","IntersectionObserver","unobserve","useFlashEditableBlocks","__unstableIsHtml","isAligned","blockApiVersion","isSubtreeDisabled","isOutlineEnabled","hasOverlay","isPartiallySelected","isReusable","hasChildSelected","removeOutline","isBlockMovingMode","canInsertMovingBlock","isEditingDisabled","hasEditableOutline","isTemporarilyEditingAsBlocks","defaultClassName","blockLabel","htmlSuffix","useMovingAnimation","useDisabled","blockEditContext","bindingsStyle","inert","Block","isHtml","__unstableBlockSource","onReplace","onInsertBlocksAfter","onMerge","_wrapperProps","blockEdit","insertBlocksAfter","getEditWrapperProps","propsA","propsB","newProps","mergeWrapperProps","isSticky","BlockHtml","saveContent","serializeRawBlock","dataAlign","restWrapperProps","BlockCrashWarning","getBlockProps","applyWithDispatch","ownProps","onInsertBlocks","moveFirstItemUp","changeSelection","targetRootClientId","isUnmodifiedBlock","nextRootClientId","previousRootClientId","replacementBlocks","selectionEnabled","selectedProps","blockWithoutAttributes","_hasBlockSupport","_isSelected","outlineMode","isAncestorOfSelectedBlock","typing","hasLightBlockWrapper","movingClientId","privateContext","globalTips","kbd","randomIndex","Tip","parentNavBlockClientId","minWidth","chevronRight","chevronLeft","withRegistry","useSubRegistry","subRegistry","setSubRegistry","newRegistry","createRegistry","blockEditorStoreName","RegistryProvider","useBlockSync","controlledBlocks","controlledSelection","onInput","useRegistry","isControlled","pendingChanges","incoming","outgoing","subscribed","setControlledBlocks","storeBlocks","onInputRef","onChangeRef","isPersistent","previousAreBlocksDifferent","unsubscribe","subscribe","newIsPersistent","areBlocksDifferent","updateParent","undoIgnore","KeyboardShortcuts","Register","registerShortcut","keyboardShortcutsStore","keyCombination","character","aliases","ExperimentalBlockEditorProvider","withRegistryProvider","__internalIsInitialized","SlotFillProvider","passthrough","useBlockSelectionClearer","BlockSelectionClearer","isFullSelection","useMultiSelection","contentEditable","getSelection","removeAllRanges","getClosestTabbable","containerElement","onlyVertical","targetRect","focusableNodes","firstElementChild","isTabbableIndex","nodeRect","useArrowNav","verticalRect","shiftKey","ctrlKey","altKey","metaKey","isUp","isDown","isLeft","LEFT","isRight","RIGHT","isHorizontal","isVertical","isNav","hasModifier","isNavEdge","isVerticalEdge","isHorizontalEdge","tagName","isNavigationCandidate","computeCaretRect","isReverseDir","keepCaretInsideBlock","closestTabbable","isClosestTabbableABlock","placeCaretAtVerticalEdge","useSelectAll","isMatch","useShortcutEventMatch","isEntirelySelected","blockClientIds","setContentEditableWrapper","useDragSelection","anchorElement","rafId","onMouseUp","rangeCount","getRangeAt","commonAncestorContainer","clonedRange","cloneRange","addRange","onMouseLeave","buttons","relatedTarget","cancelAnimationFrame","getRichTextElement","useSelectionObserver","onSelectionChange","startNode","anchorNode","anchorOffset","TEXT_NODE","childNodes","extractSelectionStartNode","endNode","focusNode","focusOffset","extractSelectionEndNode","isClickShift","selectedClientId","clickedClientId","focusNodeIsNonSelectable","startPath","endPath","findDepth","richTextElementStart","richTextElementEnd","_richTextDataStart$st","_richTextDataEnd$star","richTextDataStart","__unstableIsEditableTree","richTextDataEnd","dataset","wpBlockAttributeKey","useClickSelection","useInput","onBeforeInput","onCompositionStart","useNotifyCopy","createSuccessNotice","eventType","notice","getPasteEventData","clipboardData","plainText","getData","error1","error2","startIdx","endIdx","startStr","removeWindowsFragments","metaTag","removeCharsetMetaTag","getFilesFromDataTransfer","IMAGE_TAG","IMG_WITH_LOCAL_SRC","shouldDismissPastedFiles","requiresWrapperOnCopy","setClipboardBlocks","_blocks","firstBlock","wrapperBlockClientId","wrapperBlockName","serialized","serialize","setData","getPasteBlocks","canUserUseUnfilteredHTML","fromTransforms","getBlockTransforms","transformation","findTransform","pasteHandler","useClipboardHandler","notifyCopy","documentHasUncollapsedSelection","documentHasSelection","isSelectionMergeable","shouldHandleWholeBlocks","expandSelectionIsNeeded","tail","useWritingFlow","container","focusCaptureBeforeRef","focusCaptureAfterRef","focusCaptureTabIndex","noCapture","onFocusCapture","canvasElement","frameElement","isBefore","compareDocumentPosition","DOCUMENT_POSITION_FOLLOWING","tabbables","ESCAPE","isShift","nextTabbable","currentBlock","isElementPartOfSelectedBlock","preventScroll","onFocusOut","preventScrollOnTab","useTabNav","removeAttribute","forwardedRef","compatibilityStyles","bubbleEvent","Constructor","frame","contentDocument","MouseEvent","rect","clientX","clientY","newEvent","useBubbleEvents","iframeDocument","eventTypes","handlers","constructorName","getPrototypeOf","Iframe","contentRef","scale","frameSize","readonly","resolvedAssets","isPreviewMode","setIframeDocument","bodyClasses","setBodyClasses","clearerRef","writingFlowRef","contentResizeListener","contentHeight","contentWidth","useResizeObserver","setRef","iFrameDocument","preventFileDropDefault","onLoad","dir","compatStyle","styleSheets","styleSheet","cssRules","ownerNode","matchFromRules","_cssRules","selectorText","conditionText","__cssRules","mainStylesCssId","mainStylesElement","getElementById","inlineStylesCssId","inlineStylesElement","_load","windowResizeRef","nodeWindow","setIframeWindowInnerHeight","innerHeight","iframeWindowInnerHeight","disabledRef","bodyRef","cleanup","_src","createObjectURL","Blob","revokeObjectURL","_scale","bottomFrameSize","marginTop","shouldRenderFocusCaptureElements","KeyboardEvent","createPortal","transformStylesCache","wrapperSelector","transformedStyle","baseURL","postcssFriendlyCSS","wrap","rebaseUrl","transformStyle","useDarkThemeBodyClassName","canvas","tempCanvas","EditorStyles","transformedStyles","transformedSvgs","_styles","override","overrideWithId","visibility","overflow","dangerouslySetInnerHTML","__html","MemoizedBlockList","MAX_HEIGHT","EMPTY_ADDITIONAL_STYLES","ScaledBlockPreview","viewportWidth","containerWidth","additionalStyles","editorStyles","BlockList","Disabled","bodyElement","pointerEvents","renderAppender","AutoBlockPreview","containerResizeListener","__experimentalMinHeight","__experimentalPadding","originalSettings","renderedBlocks","AutoHeightBlockPreview","useBlockPreview","BlockListItems","_example$viewportWidt","getBlockFromExample","BlockPreview","BlockCard","isFirst","accessibleWhenDisabled","htmlProps","propsWithTabIndex","BlockDraggableChip","isPattern","fadeWhenDisabled","patternLabel","dragHandle","InserterDraggableBlocks","transferData","blockTypeIcon","Draggable","__experimentalTransferDataType","parsedBlocks","dataTransfer","onDragEnd","__experimentalDragComponent","onDraggableStart","onDraggableEnd","draggable","onHover","isDraggable","itemIconStyle","InserterListboxItem","isAppleOS","onMouseEnter","shouldSpeak","setShouldSpeak","CompositeGroupV2","CompositeGroup","BlockTypesList","listId","InserterListboxGroup","chunks","chunk","InserterListboxRow","InserterListItem","getBlockMenuDefaultClassName","rowId","focusShift","focusWrap","showMostUsedBlocks","onSelectItem","suggestedItems","uncategorizedItems","itemsPerCategory","itemList","itemsPerCollection","getBlockNamespace","currentlyRenderedCategories","useAsyncList","didRenderAllCategories","collectionEntries","currentlyRenderedCollections","InserterListbox","InserterPanel","categoryItems","collectionItems","PatternCategoriesList","selectedCategory","patternCategories","onClickCategory","PatternsExplorerSearch","searchValue","setSearchValue","SearchControl","Pagination","currentPage","numPages","changePage","totalItems","Text","WithToolTip","BlockPattern","setIsDragging","BlockPatternPlaceholder","shownPatterns","onClickPattern","showTitlesAsTooltip","pagingProps","setActiveId","BlockPatternsPaging","insertionIndex","isAppender","selectBlockOnInsert","destinationRootClientId","destinationIndex","_destinationIndex","_destinationRootClientId","shouldForceFocusBlock","blockLength","onToggleInsertionPoint","show","usePatternsState","userPatternCategories","allCategories","userCategory","existingCategory","patternBlocks","PAGE_SIZE","INITIAL_INSERTER_RESULTS","usePatternsPaging","currentCategoryPatterns","currentCategory","scrollContainerRef","currentFilter","setCurrentPage","previousCategory","previousFilter","pageIndex","categoryPatterns","categoryPatternsAsyncList","scrollTo","PatternsListHeader","filteredBlockPatternsLength","useDebounce","useInsertionPoint","registeredPatternCategories","patternCategory","filteredBlockPatterns","hasKnownCategory","resultsFoundMessage","previousSearchValue","setPreviousSearchValue","hasItems","BlockPatternsList","usePatternCategories","populatedCategories","localeCompare","cat","hasRegisteredCategory","PatternsExplorer","initialCategory","setSelectedCategory","PatternExplorerSidebar","PatternList","onModalClose","restProps","isFullScreen","ScreenHeader","paddingX","paddingY","NavigatorBackButton","MobileTabNavigation","NavigatorProvider","initialPath","NavigatorScreen","NavigatorButton","Item","isAction","FlexBlock","getShouldDisableSyncFilter","getShouldDisableNonUserSources","PatternsFilter","setPatternSyncFilter","setPatternSourceFilter","patternSyncFilter","patternSourceFilter","currentPatternSourceFilter","shouldDisableSyncFilter","shouldDisableNonUserSources","patternSyncMenuOptions","patternSourceMenuOptions","MenuItemsChoice","choices","newSourceFilter","Link","PatternCategoryPreviews","allPatterns","availableCategories","catName","onSetPatternSyncFilter","onSetPatternSourceFilter","patternFilter","onSelectCategory","showPatternsExplorer","setShowPatternsExplorer","isMobile","useViewportMatch","PatternsExplorerModal","PatternCategoryPreviewPanel","firstTabbable","useMediaCategories","setCategories","canInsertImage","canInsertVideo","canInsertAudio","_categories","categoriesHaveMedia","canInsertMediaType","video","audio","mediaTypeTag","getBlockAndPreviewFromMedia","mediaSrc","PreviewTag","preview","previewUrl","ALLOWED_MEDIA_TYPES","MEDIA_OPTIONS_POPOVER_PROPS","MediaPreviewOptions","getReportUrl","reportUrl","external","InsertExternalImageModal","MediaPreview","showExternalUploadModal","setShowExternalUploadModal","isHovered","setIsHovered","isInserting","setIsInserting","onMediaInsert","previewBlock","clonedBlock","response","blob","additionalData","img","rendered","truncatedTitle","mediaList","sourceId","INITIAL_MEDIA_ITEMS_PER_PAGE","MediaCategoryDialog","MediaCategoryPanel","setSearch","debouncedSearch","useDebouncedInput","query","setMediaList","setIsLoading","lastRequest","_media","useMediaResults","baseCssClass","searchLabel","search_items","InserterNoResults","MediaList","mediaCategories","mobileMediaCategories","mediaCategory","__unstableInserterMenuExtension","onHoverPattern","__experimentalInsertionIndex","maxBlockPatterns","maxBlockTypes","showBlockDirectory","prioritizePatterns","blockTypeCategories","blockTypeCollections","onSelectBlockType","maxBlockTypesToShow","filteredBlockTypes","orderedItems","currentShownBlockTypes","currentShownPatterns","blocksUI","patternsUI","blocksTab","patternsTab","mediaTab","showPatterns","showMedia","tabsContents","NOOP","showInserterHelpPanel","__experimentalFilterValue","__experimentalOnPatternCategorySelection","setFilterValue","delayedFilterValue","hoveredItem","setHoveredItem","selectedPatternCategory","setSelectedPatternCategory","setPatternFilter","selectedMediaCategory","setSelectedMediaCategory","selectedTab","setSelectedTab","onInsertPattern","isZoomedOutViewExperimentEnabled","__experimentalEnableZoomedOutView","onClickPatternCategory","BlockTypesTab","Tips","BlockPatternsTab","MediaTab","inserterTabsContents","searchRef","useImperativeHandle","focusSearch","showPatternPanel","showAsTabs","showMediaPanel","InserterSearchResults","InserterTabs","InserterPreviewPanel","QuickInserter","hasSearch","setInserterIsOpened","__experimentalSetIsInserterOpened","showSearch","onBrowseAll","defaultRenderToggle","hasSingleBlockType","tooltipPosition","PrivateInserter","__experimentalIsQuick","isQuick","onSelectOrClose","InserterMenu","insertOnlyAllowedBlock","expandOnMobile","ComposedPrivateInserter","shouldDirectInsert","allowedBlockType","__experimentalPreferPatternsOnRoot","blockToInsert","adjacentAttributes","previousBlock","parentBlock","lastInnerBlock","getAdjacentBlockAttributes","getInsertionIndex","ifCondition","ZWNBSP","DefaultBlockAppender","showPrompt","isEmpty","bodyPlaceholder","decodeEntities","onAppend","Inserter","ButtonBlockAppender","isToggleButton","inserterButton","ButtonBlockerAppender","DefaultAppender","BlockListAppender","CustomAppender","TagName","isDragOver","previousClientId","nextClientId","popoverRecomputeCounter","forcePopoverRecompute","isVisible","previousElement","nextElement","previousRect","nextRect","popoverScrollRef","animateVariants","hide","scaleY","reducedMotion","InsertionPointOpenRef","InbetweenInsertionPointPopover","openRef","isInserterShown","isDistractionFree","_isNavigationMode","_previousClientId","_nextClientId","disableMotion","lineVariants","hover","inserterVariants","orientationClassname","BlockPopoverInbetween","whileHover","whileTap","onHoverEnd","InsertionPoint","isBlockListEmpty","blockInsertionPoint","BlockDropZonePopover","useInBetweenInserter","isInBetweenInserterDisabled","onMouseMove","blockEl","blockElRect","elementRect","withClientId","showSeparator","isFloating","onAddBlock","isToggle","BaseButtonBlockAppender","lastBlockClientId","BaseDefaultBlockAppender","pendingSettingsUpdates","useOnBlockDrop","targetBlockIndex","insertOrReplaceBlocks","clientIdsToReplace","blocksClientIds","areGroupableBlocks","groupInnerBlocks","areAllImages","galleryBlock","wrappedBlocks","moveBlocks","sourceClientIds","sourceRootClientId","insertIndex","sourceBlocks","_onDrop","srcRootClientId","srcClientIds","dropType","srcIndex","parseDropEvent","blocksToInsert","sourceBlockIndex","isAtSameLevel","draggedBlockCount","onBlockDrop","_onFilesDrop","_onHTMLDrop","onHTMLDrop","getDistanceToNearestEdge","point","allowedEdges","candidateDistance","candidateEdge","edge","distance","pointLateralPosition","pointForwardPosition","edgeStart","edgeEnd","edgeForwardPosition","edgeLateralPosition","getDistanceFromPointToEdge","isPointContainedByRect","THRESHOLD_DISTANCE","MINIMUM_HEIGHT_FOR_THRESHOLD","MINIMUM_WIDTH_FOR_THRESHOLD","isDropTargetValid","draggedBlockNames","areBlocksAllowed","allowedBlockNames","targetMatchesDraggedBlockParents","allowedParentName","providesContext","contextName","useBlockContext","BlockListItemsMemo","UncontrolledInnerBlocks","__experimentalDefaultBlock","__experimentalDirectInsert","wrapperRef","templateInsertUpdatesSelection","__experimentalCaptureToolbars","captureToolbars","__experimentalAppenderTagName","parentLock","_allowedBlocks","prevValue","setPrevValue","useShallowMemo","_prioritizedInserterBlocks","_templateLock","newSettings","queueMicrotask","useNestedSettingsUpdate","existingTemplate","isCancelled","currentInnerBlocks","shouldApplyTemplate","hasTemplateChanged","nextBlocks","useInnerBlockTemplateSync","defaultLayoutBlockSupport","memoedLayout","ControlledInnerBlocks","ForwardedInnerBlocks","innerBlocksProps","useInnerBlocksProps","__unstableDisableLayoutClassNames","__unstableDisableDropZone","dropZoneElement","selected","enableClickThrough","isDropZoneDisabled","blockDropZoneRef","parentBlockClientId","dropTarget","setDropTarget","useThrottle","blocksData","getIsUnmodifiedDefaultBlock","blockOrientation","targetIndex","nearestIndex","insertPosition","minDistance","parentBlockOrientation","rootBlockIndex","isRightToLeft","sideDistance","sideEdge","isPointInsideRect","isPointWithinTopAndBottomBoundariesOfRect","adjacentIndex","isNearestBlockUnmodifiedDefaultBlock","isAdjacentBlockUnmodifiedDefaultBlock","getDropTargetPosition","insertionPointClientId","useDropZone","onDrop","onDragOver","onDragLeave","useBlockDropZone","InnerBlocks","getInnerBlocksProps","Content","KEY_DOWN_ELIGIBLE_KEY_CODES","useMouseMoveTypingReset","lastClientX","lastClientY","stopTypingOnMouseMove","useTypingObserver","_isTyping","ref1","ref2","timerId","stopTypingOnNonTextField","stopTypingOnEscapeKey","stopTypingOnSelectionUncollapse","startTypingInTextField","isKeyDownEligibleForStartTyping","pendingBlockVisibilityUpdatesPerRegistry","isLargeViewport","isOutlineMode","isFocusMode","delayedBlockVisibilityUpdates","isIntersecting","trailing","intersectionObserver","Observer","entry","StopEditingAsBlocksOnOutsideSelect","isBlockOrDescendantSelected","Items","hasAppender","hasCustomAppender","shouldRenderAppender","AsyncModeProvider","COMMON_PROPS","RESTRICTED_HEIGHT_PROPS","getProps","contentElement","selectedBlockElement","toolbarHeight","blockRect","topOfContentElementInViewport","viewportHeight","clientHeight","restrictedTopArea","hasSpaceForToolbarAbove","isBlockTallerThanViewport","useBlockToolbarPopoverProps","setToolbarHeight","setProps","popoverRef","popoverNode","updateProps","contentView","resizeObserver","addEventHandler","blockView","removeEventHandler","useSelectedBlockToolProps","selectedBlockProps","blockParentsClientIds","capturingClientId","isInsertionPointVisible","EmptyBlockInserter","BlockDraggable","appendToOwnerDocument","cloneClassname","elementId","dragComponent","visibleInserter","_getBlockType","startScrolling","scrollOnDragOver","stopScrolling","dragStartY","velocityY","scrollParentY","scrollEditorInterval","clearInterval","setInterval","newTop","scroll","scrollParentHeight","offsetDragStartPosition","offsetDragPosition","moveableDistance","dragDistance","distancePercentage","PIXELS_PER_SECOND_PER_PERCENTAGE","useScrollWhenDragging","blockRef","editorRoot","throttledOnDragOver","targetClientId","dropTargetValid","targetRootBlockName","rootAllowedBlocks","getMovementDirection","moveDirection","getArrowIcon","chevronUp","chevronDown","getMovementDirectionLabel","BlockMoverButton","moverOrientation","normalizedClientIds","blocksCount","isLast","blockRootClientId","firstBlockIndex","lastBlockIndex","isFirstBlock","isLastBlock","blockListOrientation","moverFunction","__experimentalIsFocusable","selectedCount","movementDirection","getMultiBlockMoverDescription","getBlockMoverDescription","BlockMoverUpButton","BlockMoverDownButton","hideDragHandle","isBlockMoverUpButtonDisabled","isBlockMoverDownButtonDisabled","dragHandleLabel","draggableProps","ToolbarItem","DEBOUNCE_TIMEOUT","useDebouncedShowGestures","isFocused","highlightParent","debounceTimeout","timeoutRef","nextIsFocused","clearTimeoutRef","debouncedShowGestures","debouncedHideGestures","shouldHideGestures","useShowHoveredOrFocusedGestures","setIsFocused","registerRef","isFocusedWithin","handleOnFocus","handleOnBlur","BlockParentSelector","_firstParentClientId","parentBlockName","_parentBlockType","nodeRef","showHoveredOrFocusedGestures","PreviewBlockPopover","BlockVariationTranformationItem","setHoveredTransformItemName","BlockVariationTransformations","transformations","hoveredTransformItemName","RestTransformationItems","restTransformations","BlockTranformationItem","BlockTransformationsMenu","possibleBlockTransformations","possibleBlockVariationTransformations","onSelectVariation","priorityTextTransformations","priorityContentTranformationBlocks","priorityTextTranformsNames","groupedPossibleTransforms","currentName","nextName","useGroupedTransforms","hasBothContentTransformations","restTransformItems","replaceActiveStyle","activeStyle","getDefaultStyle","useStylesForBlocks","onSwitch","getBlockStyles","stylesToRender","getRenderedStyles","potentialStyleName","getActiveStyle","genericPreviewBlock","useGenericPreviewBlock","styleClassName","BlockStylesMenuItems","menuItemText","limit","ellipsizeMode","truncate","BlockStylesMenu","hoveredBlock","getMatchingBlockByName","consumedBlocks","transformMatchingBlock","retainedBlockAttributes","getRetainedBlockAttributes","contentAttributes","getBlockAttributesNamesByRole","_accumulator","PreviewPatternsPopover","composite","transformedBlocks","statePatterns","showTransforms","setShowTransforms","useTransformedPatterns","_pattern","getPatternTransformedBlocks","_patternBlocks","patternBlock","BlockSwitcherDropdownMenuContents","hasBlockStyles","blockVariationTransformations","activeBlockVariation","useBlockVariationTransforms","selectForMultipleBlocks","insertedBlocks","isTemplate","hasPossibleBlockTransformations","hasPossibleBlockVariationTransformations","hasPatternTransformation","hasBlockOrBlockVariationTransforms","PatternTransformationsMenu","onPatternTransform","onBlockTransform","variationName","onBlockVariationTransform","BlockSwitcher","invalidBlocks","firstBlockName","_isSingleBlockSelected","_icon","copy","isSingleBlock","blockSwitcherLabel","blockSwitcherDescription","menuProps","__unstableBlockToolbarLastItem","STYLE_ATTRIBUTES","getStyleAttributes","sourceBlock","recursivelyUpdateBlockAttributes","targetBlocks","BlockActions","__experimentalUpdateSelection","canInsertDefaultBlock","canInsertBlock","canCopyStyles","canDuplicate","pasteStyles","createWarningNotice","clipboard","readText","__unstableSkipAutop","hasSerializedBlocks","copiedBlocks","usePasteStyles","onDuplicate","onInsertBefore","onInsertAfter","onGroup","onCopy","onPasteStyles","__unstableBlockSettingsMenuFirstItem","BlockParentSelectorMenuItem","isSmallViewport","menuItemRef","gesturesProps","CopyMenuItem","copyMenuItemLabel","BlockSettingsDropdown","__experimentalSelectBlock","currentClientId","shortcuts","getShortcutRepresentation","duplicate","__unstableUseShortcutEventMatch","hasSelectedBlocks","updateSelectionAfterDuplicate","clientIdsPromise","updateSelectionAfterRemove","blockToFocus","shouldUpdateSelection","parentBlockIsSelected","localOpen","BlockHTMLConvertButton","displayShortcut","primary","BlockLockToolbar","hasLockButtonShown","layouts","canInsertRow","canInsertStack","canInsertGrid","onConvertToRow","onConvertToStack","onConvertToGrid","BlockEditVisuallyButton","canEditVisually","getAllFocusableToolbarItemsIn","querySelectorAll","hasFocusWithin","NavigableToolbar","focusEditorOnEscape","shouldUseKeyboardFocusShortcut","__experimentalInitialIndex","initialIndex","__experimentalOnIndexChange","onIndexChange","toolbarRef","isAccessibleToolbar","setIsAccessibleToolbar","determineIsAccessibleToolbar","onlyToolbarItem","childList","subtree","useIsAccessibleToolbar","defaultIndex","initialFocusOnMount","focusToolbar","focusFirstTabbableIn","useShortcut","focusToolbarViaShortcut","navigableToolbarRef","handleKeyDown","useToolbarFocus","Toolbar","Shuffle","_patternName","sameCategoryPatternsWithSingleWrapper","ComponentToUse","shuffle","nextPattern","numberOfPatterns","patternIndex","getNextPattern","BlockBindingsToolbarIndicator","connection","useHasBlockControls","useHasBlockToolbar","hasAnyBlockControls","useHasAnyBlockControls","isDefaultEditingMode","PrivateBlockToolbar","blockClientId","toolbarKey","shouldShowVisualToolbar","showParentSelector","isUsingBindings","_isDefaultEditingMode","_blockName","isVisual","_isUsingBindings","toolbarWrapperRef","isMultiToolbar","innerClasses","BlockBindingsIndicator","BlockMover","BlockGroupToolbar","__unstableBlockNameContext","BlockSettingsMenu","BlockToolbar","BlockToolbarPopover","initialToolbarItemIndexRef","isToolbarForced","isBlockTemplatePart","isNextBlockTemplatePart","nextBlockType","isPrevBlockTemplatePart","prevClientId","prevName","prevBlockType","blockMovingMode","getAccessibleBlockLabel","trash","isTab","isEscape","isEnter","isSpace","selectionEndClientId","selectionBeforeEndClientId","selectionAfterEndClientId","navigateUp","navigateDown","navigateOut","navigateIn","focusedBlockUid","_getBlockRootClientId","_getClientIdsOfDescen","startingBlockClientId","destRoot","destinationBlockIndex","findPrevious","BlockToolbarBreadcrumb","BlockSelectionButton","isReady","setIsReady","useShowBlockTools","hasBlockToolbar","isEmptyDefaultBlock","_showEmptyBlockSideInserter","maybeShowBreadcrumb","showEmptyBlockSideInserter","showBreadcrumb","showBlockToolbarPopover","hasFixedToolbar","showFixedToolbar","isZoomOutMode","BlockTools","blockToolbarRef","blockToolbarAfterRef","contentWindow","ZoomOutModeInserters","useTransformCommands","commands","close","useActionsCommands","command","useQuickActionsCommands","_isGroupable","useBlockCommands","useCommandLoader","hook","ExperimentalBlockCanvas","shouldIframe","contentRefProp","iframeProps","resetTypingRef","localRef","WritingFlow","ColorSelectorSVGIcon","ColorSelectorIcon","renderToggleComponent","TextColor","BackgroundColor","BlockColorsStyleSelector","ListViewContext","useListViewContext","AriaReferencedText","Appender","nestingLevel","setInsertedBlock","hideInserter","insertedBlockTitle","maybeInsertedBlock","AnimatedTreeGridRow","TreeGridRow","ListViewLeaf","isDragged","rowCount","animationRef","enableAnimation","mergedRef","positionInSet","setSize","isExpanded","ListViewExpander","forceToggle","getImage","onContextMenu","onToggleExpanded","ariaDescribedBy","updateFocusAndSelection","images","getImagesFromGallery","getImagesFromBlock","useListViewImages","collapseAll","expand","getBlocksToUpdate","isUpdatingSelectedBlocks","firstBlockRootClientId","blocksToUpdate","_getPreviousBlockClie","blocksToDelete","blockParents","clearData","pinSmall","ListViewBlockContents","siblingBlockCount","blockMovingClientId","selectedBlockInBlockEditor","AdditionalBlockContent","isBlockMoveTarget","draggableClientIds","ListViewBlockSelectButton","focusListItem","focusClientId","treeGridElement","getFocusElement","ListViewBlock","displacement","isAfterDraggedBlocks","isNesting","isBranchSelected","showBlockMovers","isSyncedBranch","cellRef","rowRef","settingsRef","settingsAnchorRect","setSettingsAnchorRect","isFirstSelectedBlock","isLastSelectedBlock","allowRightClickOverrides","showBlockActions","collapse","listViewInstanceId","expandedState","treeGridElementRef","selectEditorBlock","shouldSelectBlock","toggleExpanded","settingsPopoverAnchor","clearSettingsAnchorRect","rowItemRef","isSingleSelection","rowRect","scrollContainerRect","useListViewScrollIntoView","blockPositionDescription","getBlockPositionDescription","siblingCount","blockPropertiesDescription","getBlockPropertiesDescription","hasRenderedMovers","moverCellClassName","listViewBlockSettingsClassName","colSpan","dropdownClientIds","currentlyEditingBlockInCanvas","TreeGridCell","withoutGridItem","TreeGridItem","disableOpenOnArrowDown","countBlocks","draggedClientIds","isExpandedByDefault","_expandedState$block$","countReducer","_expandedState$block$2","ListViewBranch","listPosition","fixedListWindow","shouldShowInnerBlocks","showAppender","showAppenderProp","parentBlockInformation","syncedBranch","canParentExpand","blockDropPosition","blockDropTargetIndex","firstDraggedBlockIndex","blockIndexes","filteredBlocks","nextPosition","_expandedState$client","thisBlockIndex","getDragDisplacementValues","itemInView","blockInView","updatedPath","hasNestedBlocks","shouldExpand","isClientIdSelected","isSelectedBranch","showBlock","treeGridCellProps","ListViewDropIndicatorPreview","draggedBlockClientId","listViewRef","blockDropTarget","dropPosition","rootBlockElement","targetElement","rtl","getDropIndicatorWidth","targetElementRect","windowScroll","distanceBetweenContainerAndTarget","scrollContainerWidth","horizontalScrollOffsetStyle","ariaLevel","_ariaLevel","hasAdjacentSelectedBranch","doc","scrollbarWidth","NESTING_LEVEL_INDENTATION","getNextNonDraggedBlock","nextBlockData","isDraggedBlock","ALLOWED_DROP_EDGES","getListViewDropTarget","candidateBlockData","candidateRect","candidateBlockIndex","blockData","isCursorWithinBlock","previousBlockData","candidateBlockParents","currentBlockData","getCandidateBlockParents","isDraggingBelow","canInsertDraggedBlocksAsChild","innerBlockCount","blockIndentPosition","isNestingGesture","newBlockIndex","isUpGesture","nextBlock","currentLevel","nextLevel","desiredRelativeLevel","distanceBetweenPointAndBlockIndentPosition","desiredParentLevel","getDesiredRelativeParentLevel","targetParentIndex","canInsertDraggedBlocksAsSibling","EXPAND_THROTTLE_OPTIONS","leading","PrivateListView","ListViewComponent","blockSettingsMenu","additionalBlockContent","clientIdsTree","useListViewClientIds","currentGlobalIndex","traverseBlocks","blockList","useListViewBlockIndexes","visibleBlockCount","updateBlockSelection","destinationClientId","focusPosition","isOnlyDeselection","isKeyPress","HOME","END","clientIdWithParents","blockId","startTarget","endTarget","startParents","endParents","startId","endId","getCommonDepthClientIds","updatedSelectedBlocks","selectionDiff","useBlockSelection","setExpandedState","setSelectedTreeId","firstSelectedBlockClientId","selectedTreeId","selectedBlockParentClientIds","useListViewExpandSelectedItem","dropZoneRef","setTarget","maybeExpandBlock","_expandedState","_target","throttledMaybeExpandBlock","draggedBlockClientIds","isBlockDrag","newTarget","useListViewDropZone","elementRef","clipBoardRef","listViewRow","originallySelectedBlockClientIds","treeGridRef","expandRow","collapseRow","focusRow","startRow","endRow","_getBlockParents","useListViewCollapseItems","firstDraggedBlockClientId","_blockDropTargetIndex","_firstDraggedBlockIndex","foundBlockIndex","contextValue","useFixedWindowList","useWindowing","windowOverscan","describedById","TreeGrid","onCollapseRow","onExpandRow","onFocusRow","applicationAriaLabel","BlockNavigationDropdownToggle","listView","ListView","BlockStylesPreviewPanel","previewBlocks","onHoverClassName","previewClassName","hoveredStyle","setHoveredStyle","isMobileViewport","debouncedSetHoveredStyle","styleItemHandler","_item$name","onSelectStylePreview","LEVEL_TO_PATH","HeadingLevelIcon","HEADING_LEVELS","HeadingLevelDropdown","targetLevel","instructions","allowSkip","Placeholder","VIEWMODES","Actions","onBlockPatternSelect","CarouselNavigation","handlePrevious","handleNext","activeSlide","totalSlides","SetupToolbar","viewMode","setViewMode","isCarouselView","displayControls","SetupContent","showTitles","containerClass","slideClass","BlockPatternSlide","BlockPatternSetup","filterPatternsFn","initialViewMode","setActiveSlide","usePatternsSetup","onPatternSelectCallback","VariationsButtons","selectedValue","VariationsDropdown","VariationsToggleGroupControl","hasUniqueIcons","variationIcons","showButtons","colorsFeature","hasColorsToChoose","withColorContext","ColorPaletteControl","EXAMPLE_DATE","DateFormatPicker","format","defaultFormat","dateI18n","NonDefaultControls","_suggestedOptions$fin","suggestedFormats","suggestedOptions","suggestedFormat","customOption","setIsCustom","WithToolsPanelItem","clearValue","ColorGradientSettingsDropdown","_setting$gradientValu","toggleSettings","PanelColorGradientSettingsInner","marginY","PanelColorGradientSettingsSelect","useColorsAndGradientsPalettes","ImageEditingContext","useImageEditingContext","ImageEditingProvider","naturalWidth","naturalHeight","onFinishEditing","onSaveImage","transformImage","editedUrl","setEditedUrl","crop","setCrop","setPosition","setZoom","rotation","setRotation","defaultAspect","aspect","setAspect","rotateClockwise","angle","naturalAspectRatio","prevPosition","Image","onload","translateX","translateY","getContext","translate","drawImage","toBlob","imgCrossOrigin","crossOrigin","useTransformImage","saveImage","isInProgress","setIsInProgress","modifiers","source_url","useSaveImage","providerValue","restrictPosition","mediaSize","cropSize","rotateSize","restrictPositionCoord","maxPosition","getDistanceBetweenPoints","pointA","pointB","getRotationBetweenPoints","atan2","limitArea","noOp","_max","getCenter","rotRad","_i","hasWheelJustStarted","currentDoc","onDragStopped","onTouchMove","containerRef","wheelTimer","computeSizes","emitCropData","setInitialCrop","onMediaLoaded","initialCroppedAreaPercentages","croppedAreaPercentages","minZoom","maxZoom","mediaBBoxSize","getInitialCropFromCroppedAreaPercentages","onCropChange","onZoomChange","initialCroppedAreaPixels","croppedAreaPixels","mediaNaturalBBoxSize","mediaZoom","getMediaZoom","getZoomFromCroppedAreaPixels","cropZoom","getInitialCropFromCroppedAreaPixels","mediaRef","imageRef","videoRef","containerRect","containerAspect","videoWidth","videoHeight","mediaAspect","renderedMediaSize","objectFit","setMediaSize","mediaWidth","mediaHeight","containerHeight","fittingWidth","fittingHeight","getCropSize","onCropSizeChange","recomputeCropPosition","setCropSize","Cropper","getMousePoint","onDrag","onTouchRequest","touches","onPinchStart","getTouchPoint","onPinchMove","dragStartPosition","dragStartCrop","onInteractionStart","rafDragTimeout","currentWindow","offsetY","requestedPosition","newPosition","cleanEvents","onInteractionEnd","onWheelRequest","newZoom","zoomSpeed","setNewZoom","shouldUpdatePosition","zoomPoint","getPointOnContainer","zoomTarget","getPointOnMedia","limitAreaFn","widthInPixels","heightInPixels","sizePixels","computeCroppedArea","getAspect","cropData","getCropData","onCropComplete","onCropAreaChange","zoomWithScroll","preventZoomSafari","disableAutomaticStylesInjection","styleRef","nonce","complete","onMediaLoad","setImageRef","setVideoRef","clearScrollEvent","emitCropAreaChange","load","lastPinchDistance","lastPinchRotation","rafPinchTimeout","newRotation","onRotationChange","mediaProps","cropShape","showGrid","_c","containerStyle","cropAreaStyle","mediaStyle","_d","containerClassName","cropAreaClassName","mediaClassName","onTouchStart","autoPlay","muted","onLoadedMetadata","touch","MIN_ZOOM","MAX_ZOOM","ImageCropper","editedHeight","newCropPercent","ZoomDropdown","AspectGroup","aspectRatios","AspectRatioDropdown","aspectRatioIcon","newAspect","RotationButton","rotateRightIcon","FormControls","ImageEditor","IMAGE_SIZE_PRESETS","ImageSizeControl","imageSizeHelp","imageWidth","imageHeight","imageSizeOptions","isResizable","onChangeImage","currentHeight","currentWidth","updateDimension","updateDimensions","customHeight","customWidth","defaultHeight","defaultWidth","setCurrentWidth","setCurrentHeight","dimension","nextHeight","useDimensionHandler","scaledWidth","scaledHeight","isCurrent","LinkViewerURL","urlLabel","linkClassName","__experimentalPopoverLegacyPositionToPlacement","URLPopover","additionalControls","renderSettings","computedPlacement","isSettingsExpanded","setIsSettingsExpanded","toggleSettingsVisibility","LinkEditor","onChangeInputValue","LinkViewer","onEditLinkClick","InsertFromURLPopover","URLSelectionUI","isURLInputVisible","onChangeSrc","onSubmitSrc","openURLInput","closeURLInput","setPopoverAnchor","mediaPreview","notices","disableDropZone","disableMediaButtons","onDoubleClick","onFilesPreUpload","deprecatedOnHTMLDrop","mediaLibraryButton","setSrc","setIsURLInputVisible","_value$src","setMedia","lastMediaPassed","newMedia","filteredMedia","urlSlug","cutOffIndex","mediaBlocks","recursivelyFindMediaFromBlocks","uploadedMediaList","alt_text","handleBlocksDrop","onUpload","renderPlaceholder","typesAllowed","firstAllowedType","isOneType","isAudio","isImage","isVideo","placeholderClassName","renderDropZone","renderCancelLink","renderUrlSelectionUI","renderFeaturedImageToggle","renderMediaUploadChecked","libraryButton","defaultButton","uploadMediaLibraryButton","PanelColorSettings","colorSettings","otherSettings","PanelColorGradientSettings","FormatToolbar","hasActive","InlineToolbar","FormatToolbarContainer","editableContentElement","useUndoAutomaticChange","__experimentalUndo","getMultilineTag","multiline","getAllowedFormats","allowedFormats","disableFormats","splitValue","pastedBlocks","onSplit","valueWithEnsuredSelection","hasPastedBlocks","lastPastedBlockIndex","isAfterOriginal","usePasteHandler","propsRef","_onPaste","formatTypes","__unstableEmbedURLOnPaste","pastePlainText","log","pasteInline","transformed","__unstablePasteRule","valueToInsert","activeFormats","formats","addActiveFormats","trimmedPlainText","wrapSelectionSettings","useBeforeInputRules","pair","startChar","endChar","InputEvent","findSelection","nestedSelection","useInputRules","inputRule","trimmedTextBefore","prefixTransforms","__unstableAllowPrefixTransformations","accumlator","__unstableInputRule","searchText","preventEventDiscovery","useDelete","hasActiveFormats","useEnter","removeEditorOnlyFormats","disableLineBreaks","onSplitAtEnd","onSplitAtDoubleLineEnd","canSplit","regExp","formatTypesSelector","richTextStore","getFormatTypes","interactiveContentTags","prefixSelectKeys","getPrefixedSelectKeys","useShortcuts","keyboardShortcuts","keyboardShortcut","useInputEvents","inputEvents","useInsertReplacementText","useFirefoxCompat","parentEditable","usesContextKey","EditFunction","activeFormat","getActiveFormat","activeObject","getActiveObject","isObjectActive","activeAttributes","activeObjectAttributes","FormatEdit","Tag","RichText","MultilineTag","childrenSource","identifier","multilineTagName","RichTextWrapper","keyboardShortcutContext","inputEventContext","instanceIdKey","adjustedValue","adjustedOnChange","originalIsSelected","inlineToolbar","wrapperClassName","autocompleters","withoutInteractiveFormatting","__unstableOnSplitAtEnd","__unstableOnSplitAtDoubleLineEnd","preserveWhiteSpace","__unstablePastePlainText","__unstableDisableFormats","readOnly","__unstableMobileNoFocusOnMount","deleteEnter","placeholderTextColor","textAlign","selectionColor","tagsToEliminate","disableEditingMenu","disableAutocorrection","removeNativeProps","anchorRef","blockBindings","disableBoundBlocks","_disableBoundBlocks","blockTypeAttributes","getBlockBindingsSource","blockBindingsSource","lockAttributesEditing","shouldDisableEditing","adjustedAllowedFormats","hasFormats","baseSelection","prepareHandlers","valueHandlers","changeHandlers","allFormatTypes","interactive","keyedSelected","__experimentalGetPropsForEditableTreePreparation","richTextIdentifier","__experimentalCreatePrepareEditableTree","__experimentalCreateOnChangeEditableValue","dispatchers","__experimentalGetPropsForEditableTreeChangeHandler","useFormatTypes","formatType","removeFormat","richTextRef","useRichText","__unstableFormats","__unstableText","changeHandler","__unstableIsSelected","__unstableDependencies","__unstableAfterParse","__unstableBeforeSerialize","__unstableAddInvisibleFormats","autocompleteProps","useAutocompleteProps","useBlockEditorAutocompleteProps","record","previousText","useMarkPersistent","__unstableSlotNameProvider","onKeydown","isKeyboardEvent","primaryShift","suppressContentEditableWarning","PrivateRichText","fromDOM","__unstableCreateElement","NewComponent","RichTextMultiline","PublicForwardedRichTextContainer","EditableText","__experimentalVersion","remainingProps","ResponsiveBlockControlLabel","viewport","accessibleLabel","toggleLabel","onIsResponsiveChange","renderDefaultControl","renderResponsiveControls","isResponsive","defaultLabel","viewports","toggleControlLabel","toggleHelpText","defaultControl","RichTextShortcut","onUse","onUseRef","RichTextToolbarButton","shortcutType","shortcutCharacter","fillName","__unstableRichTextInputEvent","selectIcon","editIcon","unitsProp","BaseUnitControl","URLInputButton","toggle","submitLink","buttonLabel","arrowLeft","LINK_DESTINATION_NONE","LINK_DESTINATION_CUSTOM","LINK_DESTINATION_MEDIA","LINK_DESTINATION_ATTACHMENT","NEW_TAB_REL","ImageURLInputUI","linkDestination","onChangeUrl","mediaUrl","mediaLink","linkTarget","linkClass","rel","showLightboxSetting","lightboxEnabled","onSetLightbox","resetLightbox","setIsOpen","urlInput","setUrlInput","stopEditLink","getLinkDestinations","linkDestinations","advancedOptions","updatedLinkTarget","newLinkTarget","updatedRel","rels","relVal","getUpdatedLinkTargetSettings","linkEditorValue","hideLightboxPanel","showLinkEditor","linkIcon","openLinkUI","onFocusOutside","autocompleteElement","closeLinkUI","linkDestinationInput","onSetHref","selectedDestination","lightbox","enabled","startEditLink","PreviewOptions","useResizeCanvas","deviceType","actualWidth","updateActualWidth","innerWidth","resizeListener","getCanvasWidth","device","deviceWidth","marginVertical","marginHorizontal","contentInlineStyles","SkipToSelectedBlock","words","wordCount","TAB_SETTINGS","cog","TAB_STYLES","TAB_LIST_VIEW","AdvancedControls","PositionControlsPanel","setInitialOpen","multiSelectedBlocks","PositionControls","InspectorControlsGroups","PREFERENCE_NAME","InspectorControlsTabsHint","isInspectorControlsTabsHintVisible","_select$get","SettingsTab","showAdvancedControls","SettingsTabHint","StylesTab","borderPanelLabel","BlockStyles","allowlist","InspectorControlsTabs","initialTabName","useIsListViewTabDisabled","useInspectorControlsTabs","borderGroup","colorGroup","defaultGroup","dimensionsGroup","listGroup","positionGroup","stylesGroup","typographyGroup","effectsGroup","listViewDisabled","listFills","hasListFills","hasStyleFills","advancedFills","settingsFills","showTabs","tabSettings","getShowTabs","blockInspectorTabs","createPrivateSlotFill","BlockInfo","BlockQuickNavigation","BlockQuickNavigationItem","__experimentalGetBlockLabel","BlockInspectorLockedBlocks","topLevelLockedBlock","contentClientIds","BlockVariationTransforms","BlockInspectorSingleBlockWrapper","wrapper","AnimatedContainer","blockInspectorAnimationSettings","animationOrigin","ease","BlockInspectorSingleBlock","blockStyles","BlockInspector","showNoBlockSelectedMessage","_selectedBlockClientId","_selectedBlockName","_blockType","availableTabs","globalBlockInspectorAnimationSettings","useBlockInspectorAnimationSettings","MultiSelectionInspector","isSelectedBlockUnregistered","getUnregisteredTypeHandlerName","__unstableUseClipboardHandler","CopyHandler","MultiSelectScrollIntoView","isIE","arrowKeyCodes","initialTriggerPercentage","useTypewriter","scrollResizeRafId","onKeyDownRafId","caretRect","onScrollResize","computeCaretRectangle","maintainCaretPosition","isSelectionEligibleForScroll","currentCaretRect","scrollY","scrollContainerY","relativeScrollPosition","editableNodes","isLastEditableNode","scrollContainerHeight","addSelectionChangeListener","computeCaretRectOnSelectionChange","RenderedRefsContext","RecursionProvider","previouslyRenderedBlocks","newRenderedBlocks","addToBlockType","useHasRecursion","DeprecatedExperimentalRecursionProvider","DeprecatedExperimentalUseHasRecursion","InspectorPopoverHeader","closeSmall","additionalProps","DateTimePicker","startOfWeek","l10n","ReusableBlocksRenameHint","isReusableBlocksRenameHint","_select$get2","ELEMENT_CLASS_NAMES","__experimentalGetElementClassName","BLOCK_SUPPORT_FEATURE_LEVEL_SELECTORS","__experimentalBorder","compileStyleValue","uncompiledValue","VARIABLE_REFERENCE_PREFIX","flattenTree","newKey","newLeaf","newPrefix","getFeatureDeclarations","declarations","isShorthand","subfeature","newDeclarations","getStylesDeclarations","useRootPaddingAlign","isRoot","STYLE_PROPERTY","properties","useEngine","rootOnly","pathToValue","ruleValue","getLayoutStyles","hasFallbackGapSupport","fallbackGapValue","ruleset","spacingStyle","cssValue","combinedSelector","validDisplayModes","baseStyle","STYLE_KEYS","pickStyleKeys","treeToPickFrom","clonedEntries","getNodesWithSettings","blockSelectors","_tree$settings$blocks","pickPresets","blockPresets","blockCustom","toCustomProperties","mergedSettings","getPresetsDeclarations","customProps","toStyles","nodesWithStyles","getNodesWithStyles","_tree$styles$blocks","_node$elements","hasLayoutSupport","featureSelectors","styleVariationSelectors","elementName","sel","elementSelector","nodesWithSettings","featureDeclarations","styleVariationName","styleVariationSelector","styleVariations","baseSelector","combinedSelectors","concatFeatureVariationSelectorString","styleVariationDeclarations","duotoneStyles","duotoneDeclarations","pseudoSelectorStyles","pseudoKey","pseudoStyle","pseudoDeclarations","pseudoRule","blockSelector","classSelectorToUse","selectorToUse","getPresetsClasses","getBlockSelectors","duotoneSupport","__experimentalLayout","__experimentalDefault","blockStyleVariations","variationClass","ancestorRegex","addVariationClass","_match","group1","group2","part","getBlockStyleVariationSelector","getSelectorsConfig","featureKey","processCSSNesting","processedCSS","splittedPart","nestedSelector","toAppend","appendToSelector","useGlobalStylesOutputWithConfig","templateSlug","_updatedConfig$styles","updatedConfig","customProperties","globalStyles","svgs","at","getPresetsSvgFilters","toSvgFilters","isGlobalStyles","useGlobalStylesOutput","useHasImageSettingsPanel","ImageSettingsPanel","lightboxChecked","newSetting","AdvancedPanel","cssError","setCSSError","customCSS","TextareaControl","spellCheck","globalStylesChangesCache","translationMap","h1","h2","h3","h4","h5","h6","getBlockNames","memoized","searchCache","maxSize","memoize","isObject","deepCompare","originalObject","parentPath","allKeys","diffs","changedPath","getGlobalStylesChangelist","changedValueTree","curr","translation","keyArray","getTranslation","getGlobalStylesChanges","changeList","changesLength","maxResults","changeValues","changeValuesLength","joinedChangesValue","addValuesForElement","addValuesForElements","StrictMode","addValuesForBlocks","getSaveElement","DEFAULT_SCALE_OPTIONS","ScaleTool","scaleHelp","reactPropsRegex","isPropValid","StyleSheet","_insertTag","tags","nextSibling","firstChild","isSpeedy","speedy","ctr","_proto","hydrate","createTextNode","createStyleElement","sheet","sheetForTag","insertRule","indexof","begin","characters","return","peek","caret","alloc","dealloc","delimit","whitespace","escaping","commenter","MS","MOZ","WEBKIT","COMMENT","DECLARATION","KEYFRAMES","hash","compile","rulesets","points","scanning","ampersand","reference","declaration","identifierWithPointTracking","fixedElements","compat","isImplicitRule","toRules","getRules","parentRules","removeLabel","defaultStylisPlugins","ssrStyles","_insert","stylisPlugins","inserted","nodesToHydrate","attrib","currentSheet","finalizingPlugins","serializer","shouldCache","registered","unitlessKeys","msGridRow","msGridRowSpan","msGridColumn","msGridColumnSpan","WebkitLineClamp","hyphenateRegex","animationRegex","isCustomProperty","isProcessableValue","processStyleName","processStyleValue","cursor","handleInterpolation","mergedProps","interpolation","__emotion_styles","interpolated","createStringFromObject","previousCursor","labelPattern","EmotionCacheContext","HTMLElement","ThemeContext","testOmitPropsOnStringTag","testOmitPropsOnComponent","getDefaultShouldForwardProp","composeShouldForwardProps","isReal","shouldForwardProp","optionsShouldForwardProp","__emotion_forwardProp","createStyled","identifierName","targetClassName","__emotion_real","baseTag","__emotion_base","defaultShouldForwardProp","shouldUseAs","Styled","finalTag","classInterpolations","registeredStyles","rawClassName","stringMode","strings","isStringTag","registerStyles","finalShouldForwardProp","ele","possiblyStyleElement","withComponent","nextTag","nextOptions","SingleColumnToolsPanelItem","_styled","WidthHeightTool","_value$width","_value$height","onDimensionChange","nextDimension","DEFAULT_SIZE_OPTIONS","getRichTextValues","skipFilters","PrivateQuickInserter","ResizableBoxPopover","resizableBoxProps","LayoutStyle","layoutStyle","BlockRemovalWarningModal","onConfirmRemoval","useLayoutStyles","DimensionsTool","aspectRatioOptions","defaultAspectRatio","scaleOptions","defaultScale","unitsOptions","lastScale","setLastScale","lastAspectRatio","setLastAspectRatio","showScaleControl","nextAspectRatio","nextScale","ResolutionTool","useReusableBlocksRenameHint"],"sourceRoot":""}